{"meta":{"version":1,"warehouse":"3.0.1"},"models":{"Asset":[{"_id":"source/images/7.gif","path":"images/7.gif","modified":0,"renderable":0},{"_id":"source/images/dip.jpg","path":"images/dip.jpg","modified":0,"renderable":0},{"_id":"source/images/lsp.jpg","path":"images/lsp.jpg","modified":0,"renderable":0},{"_id":"source/images/ocp.jpg","path":"images/ocp.jpg","modified":0,"renderable":0},{"_id":"source/images/orm.png","path":"images/orm.png","modified":0,"renderable":0},{"_id":"source/images/question_11.jpg","path":"images/question_11.jpg","modified":0,"renderable":0},{"_id":"source/images/sexymeo.jpg","path":"images/sexymeo.jpg","modified":0,"renderable":0},{"_id":"source/images/solid.png","path":"images/solid.png","modified":0,"renderable":0},{"_id":"source/images/hoptra.jpg","path":"images/hoptra.jpg","modified":0,"renderable":0},{"_id":"source/images/isp.png","path":"images/isp.png","modified":0,"renderable":0},{"_id":"source/images/rack.jpeg","path":"images/rack.jpeg","modified":0,"renderable":0},{"_id":"source/images/ruby-exception.jpg","path":"images/ruby-exception.jpg","modified":0,"renderable":0},{"_id":"source/images/ssl1.png","path":"images/ssl1.png","modified":0,"renderable":0},{"_id":"source/images/thanhcong.jpg","path":"images/thanhcong.jpg","modified":0,"renderable":0},{"_id":"source/images/thecon.jpg","path":"images/thecon.jpg","modified":0,"renderable":0},{"_id":"source/images/vangcon.jpeg","path":"images/vangcon.jpeg","modified":0,"renderable":0},{"_id":"themes/cactus/source/css/rtl.styl","path":"css/rtl.styl","modified":0,"renderable":1},{"_id":"themes/cactus/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/cactus/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/favicon-192x192.png","path":"images/favicon-192x192.png","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/favicon.ico","path":"images/favicon.ico","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/logo.png","path":"images/logo.png","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/apple-touch-icon.png","path":"images/apple-touch-icon.png","modified":0,"renderable":1},{"_id":"source/images/file_permission.gif","path":"images/file_permission.gif","modified":0,"renderable":0},{"_id":"source/images/3sum_2.jpeg","path":"images/3sum_2.jpeg","modified":0,"renderable":0},{"_id":"source/images/meta2/1.png","path":"images/meta2/1.png","modified":0,"renderable":0},{"_id":"themes/cactus/source/images/old/apple-touch-icon.png","path":"images/old/apple-touch-icon.png","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/old/favicon-192x192.png","path":"images/old/favicon-192x192.png","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/old/favicon.ico","path":"images/old/favicon.ico","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/clipboard/clipboard.min.js","path":"lib/clipboard/clipboard.min.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff","path":"lib/vazir-font/Vazir-Black.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff2","path":"lib/vazir-font/Vazir-Black.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff","path":"lib/vazir-font/Vazir-Bold.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff2","path":"lib/vazir-font/Vazir-Bold.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff2","path":"lib/vazir-font/Vazir-Light.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff","path":"lib/vazir-font/Vazir-Light.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff","path":"lib/vazir-font/Vazir-Medium.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff2","path":"lib/vazir-font/Vazir-Medium.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff","path":"lib/vazir-font/Vazir-Thin.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff2","path":"lib/vazir-font/Vazir-Thin.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.woff","path":"lib/vazir-font/Vazir.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.woff2","path":"lib/vazir-font/Vazir.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/font-face.css","path":"lib/vazir-font/font-face.css","modified":0,"renderable":1},{"_id":"source/images/meta2/2.png","path":"images/meta2/2.png","modified":0,"renderable":0},{"_id":"themes/cactus/source/lib/jquery/jquery.min.js","path":"lib/jquery/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.eot","path":"lib/vazir-font/Vazir-Black.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.ttf","path":"lib/vazir-font/Vazir-Black.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.ttf","path":"lib/vazir-font/Vazir-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.eot","path":"lib/vazir-font/Vazir-Bold.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.ttf","path":"lib/vazir-font/Vazir-Light.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.ttf","path":"lib/vazir-font/Vazir-Medium.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.ttf","path":"lib/vazir-font/Vazir-Thin.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.eot","path":"lib/vazir-font/Vazir-Light.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.eot","path":"lib/vazir-font/Vazir-Thin.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.eot","path":"lib/vazir-font/Vazir-Medium.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.ttf","path":"lib/vazir-font/Vazir.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.eot","path":"lib/vazir-font/Vazir.eot","modified":0,"renderable":1},{"_id":"source/images/meta2/5.png","path":"images/meta2/5.png","modified":0,"renderable":0},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff2","path":"lib/font-awesome/webfonts/fa-brands-400.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.eot","path":"lib/font-awesome/webfonts/fa-regular-400.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.ttf","path":"lib/font-awesome/webfonts/fa-regular-400.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff","path":"lib/font-awesome/webfonts/fa-regular-400.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff2","path":"lib/font-awesome/webfonts/fa-regular-400.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff2","path":"lib/font-awesome/webfonts/fa-solid-900.woff2","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/justified-gallery/css/justifiedGallery.min.css","path":"lib/justified-gallery/css/justifiedGallery.min.css","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/justified-gallery/js/jquery.justifiedGallery.min.js","path":"lib/justified-gallery/js/jquery.justifiedGallery.min.js","modified":0,"renderable":1},{"_id":"source/images/srp.jpg","path":"images/srp.jpg","modified":0,"renderable":0},{"_id":"themes/cactus/source/lib/font-awesome/css/all.min.css","path":"lib/font-awesome/css/all.min.css","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.ttf","path":"lib/font-awesome/webfonts/fa-brands-400.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff","path":"lib/font-awesome/webfonts/fa-brands-400.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff","path":"lib/font-awesome/webfonts/fa-solid-900.woff","modified":0,"renderable":1},{"_id":"themes/cactus/source/images/old/logo.png","path":"images/old/logo.png","modified":0,"renderable":1},{"_id":"source/images/meta2/9.png","path":"images/meta2/9.png","modified":0,"renderable":0},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.eot","path":"lib/font-awesome/webfonts/fa-brands-400.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.svg","path":"lib/font-awesome/webfonts/fa-regular-400.svg","modified":0,"renderable":1},{"_id":"source/images/meta2/3.png","path":"images/meta2/3.png","modified":0,"renderable":0},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.eot","path":"lib/font-awesome/webfonts/fa-solid-900.eot","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.ttf","path":"lib/font-awesome/webfonts/fa-solid-900.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGS-BoldItalic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGL-BoldItalic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Italic.ttf","path":"lib/meslo-LG/MesloLGS-Italic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGM-BoldItalic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Italic.ttf","path":"lib/meslo-LG/MesloLGM-Italic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Bold.ttf","path":"lib/meslo-LG/MesloLGS-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Regular.ttf","path":"lib/meslo-LG/MesloLGS-Regular.ttf","modified":0,"renderable":1},{"_id":"source/images/meta2/7.png","path":"images/meta2/7.png","modified":0,"renderable":0},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Italic.ttf","path":"lib/meslo-LG/MesloLGL-Italic.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Regular.ttf","path":"lib/meslo-LG/MesloLGL-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Regular.ttf","path":"lib/meslo-LG/MesloLGM-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Bold.ttf","path":"lib/meslo-LG/MesloLGM-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Bold.ttf","path":"lib/meslo-LG/MesloLGL-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.svg","path":"lib/font-awesome/webfonts/fa-brands-400.svg","modified":0,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.svg","path":"lib/font-awesome/webfonts/fa-solid-900.svg","modified":0,"renderable":1},{"_id":"source/images/meta2/8.png","path":"images/meta2/8.png","modified":0,"renderable":0},{"_id":"source/images/meta2/4.png","path":"images/meta2/4.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"20e5bce15896f68f63a12340a6fcaf8955e236fd","modified":1577591871120},{"_id":"themes/cactus/.jshintrc","hash":"2548bd6ce44422edc7e6f9f68061ab47f26c4f57","modified":1573628158000},{"_id":"themes/cactus/.stylintrc","hash":"eb5f48e83657928cb0cbee031373b2cd36ca0083","modified":1573628158000},{"_id":"themes/cactus/LICENSE","hash":"346ece39a983b0e7858c11f785cd846cef9eb875","modified":1573628158000},{"_id":"themes/cactus/.gitignore","hash":"c5345a2c5fa6c136dbe2020a405e541b4755a259","modified":1573628158000},{"_id":"themes/cactus/.DS_Store","hash":"9c0c6f6a3a81e605e5d2857f913670580ed5d7aa","modified":1575688355224},{"_id":"themes/cactus/README.md","hash":"859d11941c46be4f7b4a6d62297ccbeb4f732bc9","modified":1573628158000},{"_id":"themes/cactus/gulpfile.js","hash":"2bae290993507026a509665ee5a5326b616f8d68","modified":1573628158000},{"_id":"themes/cactus/_config.yml","hash":"ece922676cad737cb33a7b1d672635301c488789","modified":1577594516752},{"_id":"themes/cactus/package.json","hash":"5bbdbc429e9d46acf97baf7ac5654edde0781064","modified":1573628158000},{"_id":"source/_posts/2018-01-01-file-permission-in-linux.md","hash":"d769f7aeb685618cbab0368bed15001426890c16","modified":1573617324000},{"_id":"source/_posts/2019-01-23-open-command-in-macos.md","hash":"f1d6afc6c9a1f3ae3fdf596af31f27e0071477a7","modified":1573617402000},{"_id":"source/_posts/2019-01-28-count-vs-length-size-in-ruby-and-ror.md","hash":"1623862fe875f6851e7b7716501537f877b61f9e","modified":1573617496000},{"_id":"source/_posts/2019-01-30-bash-file-in-macos-and-linux.md","hash":"218f318dc4f4e9440a2e6f7fb479892dc538fa8e","modified":1573617546000},{"_id":"source/_posts/2019-02-19-truyen-tham-tri-va-truyen-tham-chieu.md","hash":"37517200972b9f50e091dfcc43589602248205b6","modified":1573617600000},{"_id":"source/_posts/2019-02-05-root-sudo-and-package-management-system.md","hash":"7bd43423d24c4ca39899ebc1d47bbe2f29a20318","modified":1573617572000},{"_id":"source/_posts/2019-02-20-cac-trinh-thong-dich-trong-ruby.md","hash":"17123f9e88b8a38c67b65ace5b943dad87b3fa19","modified":1573617624000},{"_id":"source/_posts/2019-02-22-quy-luat-80-20.md","hash":"c341cc1a05ed0300f3696979a57b940a2121649a","modified":1573617654000},{"_id":"source/_posts/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails.md","hash":"f0b17342720a4eea7dfaa57ae7956c8f540b7cbc","modified":1573617692000},{"_id":"source/_posts/2019-02-25-van-de-n-1-trong-rails.md","hash":"16901976d429bb0db5f096c0d90525ae9720826a","modified":1573617736000},{"_id":"source/_posts/2019-02-24-ruby-method-lookup.md","hash":"944d2fc5cd4790361d6590e8dbb7bf5250982c73","modified":1573617714000},{"_id":"source/_posts/2019-04-10-iaas-paas-saas.md","hash":"2fab20e8223475e7adae9fdbf6826afb2d5711ef","modified":1573617794000},{"_id":"source/_posts/2019-04-08-immutable-va-mutable-trong-ruby.md","hash":"c18fe6b4e276a106e6e7e6b3b7e7c72a5b70600a","modified":1573617764000},{"_id":"source/_posts/2019-04-10-upload-file-len-aws-s3-va-nhung-van-de-can-luu-y.md","hash":"b47e4e23474f7a4214956ca269cd2e27bf27ac33","modified":1573617824000},{"_id":"source/_posts/2019-04-11-su-dung-carrierwave-voi-s3.md","hash":"039b44d93a1e69b5093c3edd5d147d5d0326e4a3","modified":1573617846000},{"_id":"source/_posts/2019-05-04-https-vai-dieu-can-nho.md","hash":"ff24d26c702925d8df0b66e88957fe347709186d","modified":1573617900000},{"_id":"source/_posts/2019-04-17-doi-dieu-ve-session-va-cookie-trong-rails.md","hash":"f7f2e0b8e47f2bcc2184c6b09915cb728605720d","modified":1573617872000},{"_id":"source/_posts/2019-05-16-autoloading-va-reloading-constants-trong-rails.md","hash":"624a56495bc3caf58dce481bfd3a3c0f513af417","modified":1573617976000},{"_id":"source/_posts/2019-05-08-phan-biet-update-update-column-va-update-attribute-trong-rails.md","hash":"b1bcf19d06c629390d535d651c8d311574241170","modified":1573617926000},{"_id":"source/_posts/2019-05-15-require-load-include-va-extend-trong-ruby.md","hash":"537817c171e2a5590d03389bad9e43c5ddb927db","modified":1573617952000},{"_id":"source/_posts/2019-05-17-nguyen-ly-solid-trong-code-ruby.md","hash":"3302c51bcbfb0c832fcee4654e4208262c0d8001","modified":1575646752027},{"_id":"source/_posts/2019-06-08-tan-cong-sql-injection-va-cach-phong-chong-trong-rails.md","hash":"7853a083c45375b6feed19e0c3b02a9a0f4b28c6","modified":1575646705177},{"_id":"source/_posts/2019-06-09-luu-y-ngan-gon-ve-scope-va-class-method.md","hash":"44f952d7b847e5c5282124b29991ab37d8b4a88f","modified":1575646722091},{"_id":"source/_posts/2019-06-09-so-sanh-symbol-va-string-trong-ruby.md","hash":"891450590dd1039f93a6b13124373642212bdc57","modified":1575646754224},{"_id":"source/_posts/2019-06-10-xu-ly-ngoai-le-trong-rails.md","hash":"2adad492901d56bc60b12eac125321ed2a6ac700","modified":1575646767947},{"_id":"source/_posts/2019-06-11-public-private-va-protected-method-trong-ruby.md","hash":"9c1c9e3f79aaed3ce4c7906f6159c8d26713c1e1","modified":1575646782434},{"_id":"source/_posts/2019-06-16-tu-khoa-super-trong-ruby.md","hash":"10c0bc09143277eebac965f11e3bffb06e186d74","modified":1575646792594},{"_id":"source/_posts/2019-06-24-simple-rack-application.md","hash":"b16aa64b6bb48b4e7a7b36203908cdf937acc8b2","modified":1575646806678},{"_id":"source/_posts/2019-06-25-build-a-simple-orm-with-ruby.md","hash":"54dec8cfa92e58ff3e79f417927e3510c77257d1","modified":1577602818962},{"_id":"source/_posts/2019-08-05-setup-terminal-macos.md","hash":"12bc2b394a0319bd743b19620a3263f7d9c61a53","modified":1575646834080},{"_id":"source/_posts/2019-09-20-vscode-extension.md","hash":"bffd3e1657ad68ad580a3f3473808a012e58d933","modified":1575646840390},{"_id":"source/_posts/2019-12-01-basic-bash-file-to-deploy-my-blog.md","hash":"34a690a5805cd39d0939a072b6c1189aee5c03ba","modified":1575372588900},{"_id":"source/_posts/2019-12-01-how-to-use-multi-account-with-ssh.md","hash":"755f1b4e139fd71eceb23fcb457726132d7240c4","modified":1575372751401},{"_id":"source/_posts/2019-12-01-simple-bst-in-ruby.md","hash":"39f1d00030a37d808367d5d1ff943bf054852375","modified":1576386567159},{"_id":"source/_posts/2019-12-06-linked-list-with-ruby.md","hash":"2d04de05353f30fc08a4acf89b42177b33a2641e","modified":1575641242063},{"_id":"source/_posts/2019-12-05-ruby-argument.md","hash":"2b905c379c58e53146d6c7cef4dc933a8a744b61","modified":1577516341238},{"_id":"source/_posts/2019-12-16-search-in-array.md","hash":"7a96990ebf9cf6e4d859a320b89b65c29b3462f2","modified":1576849557967},{"_id":"source/_posts/2019-12-20-example-of-two-pointer.md","hash":"17bb1dccd6322ee0de3bb7eeabae8f4aba67a1c6","modified":1576850248610},{"_id":"source/_posts/2019-12-28-clone-object-and-array-in-javascript.md","hash":"038f01ef7024ee4aafe8cafc2bb3d67a2dbe2c16","modified":1577518510364},{"_id":"source/_posts/basic-vim-setup.md","hash":"cb4a6d3f95e2c4545a279fc7d4f2bc99369b3a22","modified":1573646339536},{"_id":"source/_posts/hello-hexo.md","hash":"a58b28fcd18c9ed87a4867c337fefd2ea609c891","modified":1575111540003},{"_id":"source/_posts/meta-programming-ruby.md","hash":"28f4a759d5a8646ed001a7c6e40071133897be5d","modified":1573646382647},{"_id":"source/about/index.md","hash":"3b53feeaede94d42e5518391385128af24fdb7b0","modified":1573619538000},{"_id":"source/images/7.gif","hash":"b85ec503cfc4a20438125cfdf351ef1047ee437b","modified":1573618324000},{"_id":"source/images/.DS_Store","hash":"545333cba56e80f59ff63bae10777895e3d2ec37","modified":1576929467820},{"_id":"source/images/dip.jpg","hash":"3d4204d18b0b55499ff7e209f955456a90edc8fb","modified":1573618324000},{"_id":"source/images/lsp.jpg","hash":"65e9b6cae517487c256665e96e85d24efc597986","modified":1573618324000},{"_id":"source/images/ocp.jpg","hash":"2cf898d6f4747d7280f5ea94a46baf6070e2a48e","modified":1573618324000},{"_id":"source/images/orm.png","hash":"0c5c1839671d39b0ebe69609cc1849716ad4dfc8","modified":1573618324000},{"_id":"source/images/question_11.jpg","hash":"e775d41977358490db76fca98876432928b2e076","modified":1576850223296},{"_id":"source/images/sexymeo.jpg","hash":"b184f24368abd09d5a11b9cbd612a9de3d0be01b","modified":1573618324000},{"_id":"source/images/solid.png","hash":"85d377189186938860534c3a13ff9b55199ac388","modified":1573618324000},{"_id":"source/projects/index.md","hash":"de841cb2cb061913cdf3967926e44db0d324d4ae","modified":1573619498000},{"_id":"source/images/hoptra.jpg","hash":"4b0a09ac3695f5ba09f3c92ae5b844c33a45ff9f","modified":1573618324000},{"_id":"source/images/isp.png","hash":"8cb5c14b38c4396246f9202dacc29491936e380d","modified":1573618324000},{"_id":"source/images/rack.jpeg","hash":"f6e3a0bd75b58db47ac18d1eeb2b71727a5230e7","modified":1573618324000},{"_id":"source/images/ruby-exception.jpg","hash":"a8d929aac3fe8c1472f08ef1fe16081a716d906e","modified":1573618324000},{"_id":"source/images/ssl1.png","hash":"b1ceda2df1849ff840ccad660cdbd6aa984ff3f6","modified":1573618324000},{"_id":"source/images/thanhcong.jpg","hash":"c84daf2145d5aa0d8aefc4d5c608539801f9b4c1","modified":1573618324000},{"_id":"themes/cactus/languages/ca.yml","hash":"b79dd2c21dc6697c635e92db1f661a4b8d5d2305","modified":1573628158000},{"_id":"themes/cactus/languages/default.yml","hash":"703548ad90034d4e5207a27eb50f726dc27e4c0c","modified":1573628158000},{"_id":"themes/cactus/languages/en.yml","hash":"703548ad90034d4e5207a27eb50f726dc27e4c0c","modified":1573628158000},{"_id":"themes/cactus/languages/es.yml","hash":"2b1fc8b0d636123e9ee39017fa20053bd1913a5a","modified":1573628158000},{"_id":"themes/cactus/languages/fa.yml","hash":"63f32e50953af1c4bd0308a4fca5862b5287c2cb","modified":1573628158000},{"_id":"themes/cactus/languages/fr.yml","hash":"4fea266d3c522903f3eee4fffee6e66c44775005","modified":1573628158000},{"_id":"themes/cactus/languages/it.yml","hash":"62800bcae1f2d2454f87f4bcf4d7593848424f61","modified":1573628158000},{"_id":"themes/cactus/languages/nl.yml","hash":"ac0573352ad2c737a7686bcca498b985e7bd6447","modified":1573628158000},{"_id":"themes/cactus/languages/pl.yml","hash":"8a2d6dc874d86c38d42c2c861c39590647b5d536","modified":1573628158000},{"_id":"themes/cactus/languages/pt-br.yml","hash":"4859aba788a050c2d5d0b997693b0c8c24b349f7","modified":1573628158000},{"_id":"themes/cactus/languages/ru.yml","hash":"81b57fcd1977ef534f4bf303dbc1b4710cc7f057","modified":1573628158000},{"_id":"themes/cactus/languages/tr.yml","hash":"2702914007e6bade9d6861078c0e179ac05bf48c","modified":1573628158000},{"_id":"themes/cactus/languages/vi.yml","hash":"f84893c3ec3e45875c90069e14b17ed3016ed973","modified":1573628158000},{"_id":"themes/cactus/languages/zh-CN.yml","hash":"8f81faaad9a0615b09dbc23868484a55ec958f6f","modified":1573628158000},{"_id":"themes/cactus/scripts/merge-configs.js","hash":"2048c3415d96b17b9d84aa44bc0c25f1210525f8","modified":1573628158000},{"_id":"themes/cactus/languages/zh-TW.yml","hash":"2f4e050c9b35a67f4a7278cec3a949533c2ac16a","modified":1573628158000},{"_id":"themes/cactus/scripts/meta.js","hash":"fa6055a39851c9953d033e70c1614547b94dce60","modified":1573628158000},{"_id":"themes/cactus/scripts/page_title.js","hash":"fa662dbdb82779af1b95e35ed7ccdf4866a53dee","modified":1573628158000},{"_id":"themes/cactus/scripts/thumbnail.js","hash":"df8829fd8c3119650037eba5ec11bdce06acff9d","modified":1573628158000},{"_id":"themes/cactus/source/.DS_Store","hash":"7f2a6590cb55d4ec241d1197e7255066743b12e1","modified":1577597090047},{"_id":"themes/cactus/layout/archive.ejs","hash":"53de8817e37be01b3ba8fa5ca31b9cafa2f3c011","modified":1573628158000},{"_id":"themes/cactus/layout/index.ejs","hash":"c53484094a7c30ab82b0ea984404157ab9711e71","modified":1573628734000},{"_id":"themes/cactus/layout/layout.ejs","hash":"8504004f2ed78914f806c6699d9bd722318cbe56","modified":1573628158000},{"_id":"themes/cactus/layout/page.ejs","hash":"c5465d5315a7544aa466b01fd8cfb62917a8bb1d","modified":1573628158000},{"_id":"themes/cactus/layout/post.ejs","hash":"a7d164ce888a60cd3eddd9c04bc6762428fa66bb","modified":1573628158000},{"_id":"source/images/meta2/.DS_Store","hash":"11cbac41f5cf11c5c611812d3daa887b2780d710","modified":1569062072862},{"_id":"source/images/thecon.jpg","hash":"272a340a5748fb56151f65386685c6d838386996","modified":1573200442000},{"_id":"source/images/vangcon.jpeg","hash":"81d20645ed37382ea561ee93fb99f915879d25c4","modified":1556069772624},{"_id":"themes/cactus/source/css/_extend.styl","hash":"2c8751d132e62f5f068dc3a184d160670737ba1f","modified":1573628158000},{"_id":"themes/cactus/source/css/_fonts.styl","hash":"354809b5a64e8a47a66c66fd1a28ac597c1460a6","modified":1573628158000},{"_id":"themes/cactus/source/css/_mixins.styl","hash":"1a9e309523df9685e8d088dcff0a809c58e2c392","modified":1573628158000},{"_id":"themes/cactus/source/css/_util.styl","hash":"2bfeb2e2605dd5235693b00c71a212646d2e0410","modified":1573628158000},{"_id":"themes/cactus/source/css/_variables.styl","hash":"02079fb71b7d1c01d15fa512a1948ad4cbb416b5","modified":1573628158000},{"_id":"themes/cactus/source/css/rtl.styl","hash":"98355abe9ef3a398a5b4cb40d3d33bf86ac8d1d4","modified":1573628158000},{"_id":"themes/cactus/source/css/style.styl","hash":"9a946631f0e59addc57c39bd7f2081b3e9256ab1","modified":1573628158000},{"_id":"themes/cactus/source/js/main.js","hash":"584c5a69ac81a483a1c4377a2e2cf326c2795e7b","modified":1573628158000},{"_id":"themes/cactus/source/js/search.js","hash":"a74d0c601f820160825a2e4ad13618074d714933","modified":1573628158000},{"_id":"themes/cactus/source/images/favicon-192x192.png","hash":"48288b60ec54c6824fc9597783751c04482f5fd9","modified":1577567392000},{"_id":"themes/cactus/source/images/favicon.ico","hash":"ad77605ede63cc3b0be4f38757b2b138a82244aa","modified":1577567386000},{"_id":"themes/cactus/source/images/logo.png","hash":"dfb53d445d460a0f263a9395b1be650e69302560","modified":1577567392000},{"_id":"themes/cactus/source/images/apple-touch-icon.png","hash":"f2b6be431d1410872417ea822d703a9163e5cc18","modified":1577567392000},{"_id":"themes/cactus/source/images/.DS_Store","hash":"c2f8a209c3008c2ea0ac3fff7e8d40b0df612745","modified":1577592718457},{"_id":"themes/cactus/layout/_partial/comments.ejs","hash":"4cf8d0059e5f8bc8ae1dd1a426293583fd398052","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/footer.ejs","hash":"c3a80e347cb11022baf5e65fb4d0209b8d205693","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/head.ejs","hash":"b7db191b7ad066b1f3f9c34d8a4b77e1ee815215","modified":1573646888480},{"_id":"themes/cactus/layout/_partial/header.ejs","hash":"8c8f071ae2fd1e17ae0405da7dfce59690c690f0","modified":1573646875355},{"_id":"themes/cactus/layout/_partial/pagination.ejs","hash":"23bf862b3b8a3cd831850504d9b5a24d21b005e7","modified":1573646966361},{"_id":"themes/cactus/layout/_partial/scripts.ejs","hash":"83d912956b00537e0b20a9905f14885ff3899ed4","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/search.ejs","hash":"8b4bf9cf5db0ce762a31fc3baae0f2fc004bece4","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/styles.ejs","hash":"be1b54388eb02176dd4722285dda19e3dce2e62e","modified":1573628158000},{"_id":"source/images/file_permission.gif","hash":"7045495d2b775ec3c73765211edb06381d683daa","modified":1573618324000},{"_id":"source/images/3sum_2.jpeg","hash":"3ca9dd693e2ca0bc6a34a801383ee347d4d9f138","modified":1576849914508},{"_id":"source/images/meta2/1.png","hash":"2fa2eeecf403fa05a9624e2cb3feb8001ad2dba9","modified":1568992716702},{"_id":"themes/cactus/source/css/_colors/classic.styl","hash":"0f0ec41a4165814ce69688425d5ac4d701b7cc70","modified":1573628158000},{"_id":"themes/cactus/source/css/_colors/white.styl","hash":"2b25ad24573bded8b42f9d80112eab9fadbed1a5","modified":1573628158000},{"_id":"themes/cactus/source/css/_colors/dark.styl","hash":"9c9655b42b85f754b8a573a1d4634c23c680e1bf","modified":1573628158000},{"_id":"themes/cactus/source/css/_colors/light.styl","hash":"d09f781cb02394850737b3a9efc6693307d5bf09","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/agate.styl","hash":"53027913ed8d4f75ac3e49e76aad824f0df62da3","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/androidstudio.styl","hash":"2af0861725f97f0ee2ded67c3d2d4548c62b2d16","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/arta.styl","hash":"b3e81e3e694ceb8deed178adb8b91013c5120e30","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-cave-light.styl","hash":"a5be0744a7ecf4a08f600ade4cfd555afc67bc15","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/ascetic.styl","hash":"32cff3bef6fac3760fe78f203096477052a90552","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/arduino-light.styl","hash":"15e8572585cd708221c513dea4bdd89d8fe56c10","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-cave-dark.styl","hash":"ce63dd8548688d88254405eedfa75b1d7c82449e","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-dune-dark.styl","hash":"c196ff0ee064af0e507823694ae39020addfc280","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-dune-light.styl","hash":"931435fbc6f974e8ce9e32722680035d248a9dc1","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-estuary-light.styl","hash":"344276ca9b27e51d4c907f76afe5d13cf8e60bdf","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-estuary-dark.styl","hash":"0bb16a4eff93688f40787abc2f9e56e7d5cc93e7","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-forest-dark.styl","hash":"effbc5d75fa87203c847039869c22031b40d5b7d","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-forest-light.styl","hash":"95228d9f2102fad425536aac44b80b2cba1f5950","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-heath-dark.styl","hash":"9a2e9a1d0a01bbdf158560c3ed1c134e098b2c68","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-heath-light.styl","hash":"8c8c2e445abef85273be966d59770e9ced6aac21","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-lakeside-dark.styl","hash":"10ee3882fca7b97a37bd309d2d35fce9868647bb","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-plateau-dark.styl","hash":"84c80e6f67f62fce958d25817c277d2360272617","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-plateau-light.styl","hash":"d1a05fdd1ededc9063d181ab25bad55a164aeb4a","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-lakeside-light.styl","hash":"2c54cb9bdb259ae3b5b29f63ac2469ed34b08578","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-savanna-dark.styl","hash":"e32c1c70def8060fce5e790979a126da650ac642","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-savanna-light.styl","hash":"f8244c93711c7cb59dd79d2df966806b30d171ea","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-seaside-dark.styl","hash":"2edf385215bbe1985b1a10106525d362667d28c2","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"538a14321193cd8abf2ddc484306631e54149ffb","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"efa52713efc468abeeb2b9299704371583b857de","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/codepen-embed.styl","hash":"8b7b34484f76a6c2c3b1a9e49abb9b382f439ae8","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/brown-paper.styl","hash":"c2326ba20a5020a66ca7895258d18833327d4334","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/atelier-seaside-light.styl","hash":"0597342da6e2d0c5bdcc7d42dabb07322b1a4177","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/color-brewer.styl","hash":"2a439d6214430e2f45dd4939b4dfe1fe1a20aa0f","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/dark.styl","hash":"f5e6e75958de59e87fc6be3a1668e870e20bc836","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/darkula.styl","hash":"9717efa9194837ba3fb4d762997d33075dcf8bfa","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/docco.styl","hash":"b1c176378bb275f2e8caa759f36294e42d614bf1","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/github.styl","hash":"3336aeba324c6d34a6fd41fef9b47bc598f7064c","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/foundation.styl","hash":"bf8ddc94b4ad995b8b8805b5a4cf95004553fdac","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/github-gist.styl","hash":"48211a03d33e7f7ada0b261162bea06676155a71","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/googlecode.styl","hash":"bda816beee7b439814b514e6869dc678822be1bc","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/far.styl","hash":"aaac3028f5e33123cd123a583cddc9290c45ec8e","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/highlightjs.styl","hash":"0e198b7a59191c7a39b641a4ddd22c948edb9358","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/hopscotch.styl","hash":"1378a6bc67a32c0cbff72ab771268b53f9aa586d","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/hybrid.styl","hash":"b8eb5c69d12f2ee5ebc50265ae271699d7f1a8d3","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/idea.styl","hash":"a02967cb51c16a34e0ee895d33ded2b823d35b21","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/index.styl","hash":"002d5596f6379cc87dbd43d9145bc764aa666be1","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/grayscale.styl","hash":"bf37d8b8d1e602126c51526f0cc28807440228ed","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/kimbie.styl","hash":"51b889ca7c6fe178cfbbe28d875a6ea427184441","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/gruvbox-dark.styl","hash":"76b744c14fd5600bea64731c05df97c2df75523f","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/ir-black.styl","hash":"53e5d74326a4527b92272bbd6946d4fec92720e8","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/mono-blue.styl","hash":"4c89a6ae29de67c0700585af82a60607e85df928","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/monokai-sublime.styl","hash":"c385b11345894be7e6ce3c5f08663e199933b8e4","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/magula.styl","hash":"16d323f989b1420a0f72ef989242ece9bf17a456","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/kimbie.dark.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/kimbie.light.styl","hash":"61f8baed25be05288c8604d5070afbcd9f183f49","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/obsidian.styl","hash":"199e28326be8590883f0813ebbd54fcfaa4750fd","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/paraiso-light.styl","hash":"d224d1df0eb3395d9eea1344cee945c228af2911","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/paraiso.styl","hash":"75f181eece6b71d033ea0c8d6cf00ae7efb9e29b","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/rainbow.styl","hash":"c0cf97aae3e10fdcd10414547a711c9effbc39b8","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/pojoaque.styl","hash":"4e7b6b046b8575ac749f6aec4e953a62ada27a36","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/railscasts.styl","hash":"b6674db9210e0c4444e4835fff2d1361f3ebd64c","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/monokai.styl","hash":"f87be027848ea6bee623a08ad1e17b2f5b7937ee","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/paraiso-dark.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/school-book.styl","hash":"d43560fe519a931ce6da7d57416d7aa148441b83","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/solarized-dark.styl","hash":"90c9da5aa594383697e5b18892a7f95beb053f55","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/solarized-light.styl","hash":"aa0dd3fd25c464183b59c5575c9bee8756b397f2","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/sunburst.styl","hash":"af3eec0fd56151e55bbd49c31b151f36717611d8","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-bright.styl","hash":"7674fecb6d27350727dc0d2dc93bc018382ebbd0","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-blue.styl","hash":"f24c17d0ab815dcfaab3438cb9fe2ab4839f5e0d","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-eighties.styl","hash":"28d751075ebabf7d0327a36f725076fe82fdf626","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night.styl","hash":"16ba09b2db501e4e3e2e7d62595d9bf935bf27c4","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/tomorrow.styl","hash":"15779cf6846725c7c35fc56cac39047d7e0aec1c","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/vs.styl","hash":"959a746f4b37aacb5d1d6ff1d57e0c045289d75d","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/xcode.styl","hash":"5e8532ae8366dcf6a4ef5e4813dc3d42ab3d0a50","modified":1573628158000},{"_id":"themes/cactus/source/css/_highlight/zenburn.styl","hash":"68ff9332ccc03f9389b15b713415cde016f8088f","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/archive.styl","hash":"ef8fc52337c4c7b010cad7c427cb78009b30f9d8","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/article.styl","hash":"c6a3c395ceb4aacba8c995bcde7b58a7ca501919","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/categories.styl","hash":"a43f00e61b3507f130b8a3f8108a4eeca147c2a0","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/footer.styl","hash":"d9b13e402808175dc90761cc4fdfe3d4808034f8","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/comments.styl","hash":"1e90f1fb9d4c155df518cacb5a537e9de9c042c1","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/header.styl","hash":"b64021d680f856d24dc17bc8f53674bfe2e241e4","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/index.styl","hash":"59c99f4ea3a73bf47ce030df166c5e33d5de31fb","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/pagination.styl","hash":"950bf517bbe7adb9a9aa4eb5ddec74ffc7598787","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/search.styl","hash":"159be002780c62a77f46947cf854a7342fba24f4","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/tags.styl","hash":"d571d5c7c960300d29c5f0ec3fe1140322ecd6b3","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/tooltip.styl","hash":"2daff581ec3efaec840cbfdee512195919c32629","modified":1573628158000},{"_id":"themes/cactus/source/images/old/apple-touch-icon.png","hash":"57e2def34682655f41a0be2d083f16765ba7858b","modified":1573628158000},{"_id":"themes/cactus/source/images/old/favicon-192x192.png","hash":"96e6fcbbb13a5914a6131391e210eb7dfd13d692","modified":1573628158000},{"_id":"themes/cactus/source/images/old/favicon.ico","hash":"189f9842bcb79a6f8f9e8445bc8bbd773443826b","modified":1573628158000},{"_id":"themes/cactus/source/lib/clipboard/clipboard.min.js","hash":"ee60ca5ba9401456105ef703a98092369b579c80","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff","hash":"37443d0040f0d7af381c955e4c15919a15d0349e","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff2","hash":"0a257c8b60e0f20802c1dc8daeed2d3cb0d44f17","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff","hash":"df15fd1e74b6f4a50bea57e2b44d9627f38495b5","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff2","hash":"62447a951d48b21c4696ae72df4bc4adef636e26","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff2","hash":"ef07a250766fea840c1049e67c0405d9216ee0a8","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff","hash":"32ae5c0d1d5943c8bb8e0f6ab07c3269c6f8b8a8","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff","hash":"f5653059b2a5929516e4aab02329a978600b9b67","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff2","hash":"668400ae92700965f03f2371faaee0ab8c8347c3","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff","hash":"ad4d46a99a1daf6353c86c79ac3a2b030213859c","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff2","hash":"c3be79b553ec394db71268d604b1d29183b867dc","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.woff","hash":"bbee70033f0f5882e9869e417b69c6a38f56f187","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.woff2","hash":"30ce165216db078951a690a6ad665b9b78f5dd81","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/font-face.css","hash":"8f2bf6b59ae1f2ed4c2fead6cea4b8314fcf62e5","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/post/actions_desktop.ejs","hash":"5728f8c2808465c6be801b8c8c4f5bb6b96dd64e","modified":1573647072216},{"_id":"themes/cactus/layout/_partial/post/actions_mobile.ejs","hash":"79b234ff3c264e66b2e71c819228e62bf92b48e4","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/post/category.ejs","hash":"b5bfa049f17868fb09d9d2a7e1d5279fa0381d37","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/post/date.ejs","hash":"6f2d1aa9562df343b797d25705f1945323c465fb","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/post/gallery.ejs","hash":"9aecd8908e8a684f33dc20c02497c0f1774137c7","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/post/share.ejs","hash":"847a400e79b775246ca9067e40c3f104d571413d","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/post/title.ejs","hash":"a060f1c6e3718494a6b1d0e1981ea0bf4e549828","modified":1573628158000},{"_id":"themes/cactus/layout/_partial/post/tag.ejs","hash":"e08fae30da060f49c087f6c121868b08eb55c795","modified":1573628158000},{"_id":"source/images/meta2/2.png","hash":"acf16dbf3b15e3941acc63c4cbfc56aa4fb7449d","modified":1568993381684},{"_id":"themes/cactus/source/lib/jquery/jquery.min.js","hash":"0dc32db4aa9c5f03f3b38c47d883dbd4fed13aae","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.eot","hash":"13d026ff857c853cbd0dc519b6e58669db309441","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.ttf","hash":"594dc3344ad14903c247615427d1009709f0f5a4","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.ttf","hash":"2e6c9df9f775373fb1988ae8529aa8f05313dae6","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.eot","hash":"f76ec625e15522ff60d21f7a9a3b71c65bc27556","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.ttf","hash":"9f1e2934098a6a4a7c5584c8f3fa24a707070da3","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.ttf","hash":"295f7e02c9b157e7ea63ad09613b00ceab85c5cd","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.ttf","hash":"a6aa450ee6e0f85786474ca6b04827ef97e81af4","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.eot","hash":"3edffd7bb61eee8cd46b57225f9f9e5264e3362b","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.eot","hash":"08e1503d1181188690fd9c81860d6c890c1465f6","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.eot","hash":"1f5a73db7947ef22c8a2bb19d6449b80496c03c4","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.ttf","hash":"f22b219824026e490a581ddb3b36b07997dff0e3","modified":1573628158000},{"_id":"themes/cactus/source/lib/vazir-font/Vazir.eot","hash":"31a9219c25fe1991fb745ec8dbbcf45c6094a702","modified":1573628158000},{"_id":"source/images/meta2/5.png","hash":"bb982c8aed9c8e3f81e8d71bd6c2d01b894cafcc","modified":1569052008080},{"_id":"themes/cactus/source/css/_partial/post/actions_desktop.styl","hash":"dc726537928fc0d7703e73c0a5e4b82ad1731d59","modified":1573628158000},{"_id":"themes/cactus/source/css/_partial/post/actions_mobile.styl","hash":"0d2966c1d870392476864af8ee3ba312ba30cb82","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"d902f8db3e021155f177f698a252fb98d6e61768","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.eot","hash":"42ff503f20e97503cef8e5b2ec10ae07699d7c01","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.ttf","hash":"c140085833a38abec6b7df99d4ccac93eb266031","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff","hash":"7b3f44b4d3028f3c87ddf0f4bd62511c9bf4a87e","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"9784edb76f8a2ed595ea4bf74d46cda4eff3b303","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"92da6e3c7121e21cdfde25ef08797a3937a683e1","modified":1573628158000},{"_id":"themes/cactus/source/lib/justified-gallery/css/justifiedGallery.min.css","hash":"92bb6e468a1db7fbd99ccb960e15e28572254263","modified":1573628158000},{"_id":"themes/cactus/source/lib/justified-gallery/js/jquery.justifiedGallery.min.js","hash":"82ab395176c927ffbb2f7c95132ee0a06cd5d64a","modified":1573628158000},{"_id":"source/images/srp.jpg","hash":"81710dc7159876b7164aa9bd7e77472f55e3a8ea","modified":1573618324000},{"_id":"themes/cactus/source/lib/font-awesome/css/all.min.css","hash":"cf1a3fd771900af34f2af22142beecfb47367548","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.ttf","hash":"19e302760e39e25a5f8d90d6cd0164ef6cd74f8c","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff","hash":"f9d835a0f9248b1bb33d66968e87c4a50103ed8d","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff","hash":"80d33a73cbb60e206ef6f5c898988641576c7dda","modified":1573628158000},{"_id":"themes/cactus/source/images/old/logo.png","hash":"0e3029251dfda26adee2761f71377297e8c26871","modified":1573628158000},{"_id":"source/images/meta2/9.png","hash":"5e4a5eb7f3a8956dc2f215fd5e253965e9ed7d73","modified":1569058906592},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.eot","hash":"644ece8263d2f96b087eebf7f6d4e309e5898eb5","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.svg","hash":"33e86c0ad6fb9c5c0c8c2af4cb2d790c6b14a8aa","modified":1573628158000},{"_id":"source/images/meta2/3.png","hash":"0bd5f388f8660ab278e5e5b840bad6825e0745a1","modified":1568994636513},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.eot","hash":"10740942ec6b3f4985529d343402d0bf32f9f847","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.ttf","hash":"c445864a9646948e0d7ff44930ad732ee61427d8","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-BoldItalic.ttf","hash":"926035f0156cccf1b0ca507347f39bf9c510f51e","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-BoldItalic.ttf","hash":"b7d24ab1e4fad720f31a2b0cca1904ce1740d846","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Italic.ttf","hash":"9d757cc9f928fc83b2133283dd639c12b11d94ad","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-BoldItalic.ttf","hash":"b542b9591fbf33925d93f0695b6e123a9f0cfd43","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Italic.ttf","hash":"93ebc5098cf57a32b7b8d297681f31692c09bdfa","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Bold.ttf","hash":"f9918fb93d6ab6850f5d38069a999c311af78816","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Regular.ttf","hash":"de559f8d70d5b1ab2810597bfd0b1b9506f3ef01","modified":1573628158000},{"_id":"source/images/meta2/7.png","hash":"b0a9c548892f127bec56bf2921f1e6e81786b186","modified":1569058506199},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Italic.ttf","hash":"9a23c6898b0943bd3d96c04df9a0f66e919451d8","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Regular.ttf","hash":"6c090d6bff3928fbf8a5f4104e58ed7f421aea7c","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Regular.ttf","hash":"20ce1fc7ae1254558ca044ae48283faaa58897e5","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Bold.ttf","hash":"58be4b7760e9a84daa81929d046f9a15c4fd1c1a","modified":1573628158000},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Bold.ttf","hash":"34f7db59f1d023294e69976aa20b7d52b86165a4","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.svg","hash":"b0bb9e6ac7709206b9510f1718516d89aead5b21","modified":1573628158000},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.svg","hash":"ed6c1ed8f24df909f40fe5e5c652d7ff9570c821","modified":1573628158000},{"_id":"source/images/meta2/8.png","hash":"9f222f8dadd5976e00ed74dbdefd21debede4a5e","modified":1569058528145},{"_id":"source/images/meta2/4.png","hash":"a747f18f540a439daf4f7877801dd03917f25dbd","modified":1568995114699}],"Category":[{"name":"h iu hnh","_id":"ck4qvfe1l00038ersaq4w5gmy"},{"name":"ruby notes","_id":"ck4qvfe21000f8ers90yf7ip4"},{"name":"Random","_id":"ck4qvfe2h000y8erscikyd3sa"},{"name":"rails notes","_id":"ck4qvfe2n00178ers2uxbhbny"},{"name":"programming","parent":"ck4qvfe21000f8ers90yf7ip4","_id":"ck4qvfe2y001l8ersgzde55bg"},{"name":"RUBY","_id":"ck4qvfe3n002p8ers84mug77j"},{"name":"RAILS","_id":"ck4qvfe3u002v8ershdfnbo7s"},{"name":"TIL","_id":"ck4qvfe4q00438ersblwt6zmz"},{"name":"PROGRAMMING","parent":"ck4qvfe3n002p8ers84mug77j","_id":"ck4qvfe4u004b8ersbt3g6e11"},{"name":"til","_id":"ck4qvfe4w004h8ers5ov14a56"}],"Data":[],"Page":[{"title":"about","date":"2019-11-11T03:38:10.000Z","_content":"\n![the con](/../images/thecon.jpg)\n\n> Nhn mt tui c ging ngi c thng tin  gii thiu khng?\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2019-11-11 10:38:10\n---\n\n![the con](/../images/thecon.jpg)\n\n> Nhn mt tui c ging ngi c thng tin  gii thiu khng?\n","updated":"2019-11-13T04:32:18.000Z","path":"about/index.html","comments":1,"layout":"page","_id":"ck4qvfe1h00018ers4apw8hw0","content":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<blockquote>\n<p>Nhn mt tui c ging ngi c thng tin  gii thiu khng?</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<blockquote>\n<p>Nhn mt tui c ging ngi c thng tin  gii thiu khng?</p>\n</blockquote>\n"},{"title":"Projects","date":"2019-11-10T17:00:00.000Z","_content":"\n![the con](/../images/thecon.jpg)\n\n> Nhn mt tui c ging ngi c projects  khoe khng?\n","source":"projects/index.md","raw":"---\ntitle: Projects\ndate: 2019-11-11\n---\n\n![the con](/../images/thecon.jpg)\n\n> Nhn mt tui c ging ngi c projects  khoe khng?\n","updated":"2019-11-13T04:31:38.000Z","path":"projects/index.html","comments":1,"layout":"page","_id":"ck4qvfe7c005x8ers9ndqdtmn","content":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<blockquote>\n<p>Nhn mt tui c ging ngi c projects  khoe khng?</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<blockquote>\n<p>Nhn mt tui c ging ngi c projects  khoe khng?</p>\n</blockquote>\n"}],"Post":[{"title":"Permission Trong Unix L G?","date":"2017-12-31T17:00:00.000Z","draft":false,"mytag":"OS","mytrend":"COOL","_content":"\n# t vn \n\nPhn ln thi gian thi i hc, ti c hc trn nn tng window vi b cng c visual studio v ms sql server. Mi th u n cho n khi ra trng v i lm. Mi trng lm vic khng cn l window na m chuyn sang gia nh linux-unix. Rt nhiu th l lm, tuy nhin, cng nh nhiu lp trnh vin khc. Copy paste khng c g kh khn vi ti.\n\nT nhng tutorial trn mng, vi nhng dng lnh ti khng hiu, nhng u thnh vn  g? N ang chy v vy l   hnh phc cho mt cu lp trnh vin thiu kinh nghim mi ra trng ri. Tuy nhin, vic phi lm nhng cng vic lp i lp li hng ngy m khng thc s hiu chng khin chng ta kh chu. Chng hn nh nhng cu lnh set permission chng hn.\n\n# Lun bn\n\n# 1.File permission l g?\n\nTng t nh ngi nh ca bn, bn sng cng gia nh v thi thong c nhng v khch gh thm. C nhng vt dng trong nh m bn ch mun ring mnh bn c th s dng, cng c nhng  vt khc, th m ch bn v gia nh c php s dng, v cng c nhng  vt m bn, gia nh v c nhng v khch u c th s dng.\n\nTi nguyn trong unix tng t nh vy, mi th trong unix u l file. Vy nn c nhng file quan trng ch mnh bn c th xi, cng c nhng file m bn c th chia s thm cho 1 nhm no . Cn nhng th khng qu quan trng bn c th m ca cho ai cng c th s dng.\n\n=>  l l do permission cn tn ti.\n\n# 2.S dng l s dng th no?\n\nHiu n gin nh th ny, nh ca bn, bn cho ti vo v cho php ti ngi gh ung nc xem tivi, nhng khng ng ngha vi vic ti mun lm g ci gh hay ci tivi cng c. Ti ch c th s dng ch khng c php thay i hay p ph  c ca bn.\n\nTrong unix c 3 quyn s dng:\n\n1. Quyn c.\n2. Quyn ghi.\n3. Quyn thc thi.\n\n# 3.Cc loi ngi dng.\n\n1. Owner (ngi s hu file  - ngi to ra file ).\n2. Group (nhm s hu file).\n3. Other (phn cn li ca h thng c th l guest).\n\n| Ngoi ra trn unix th cn 1 ngi dng th 4 gi l root. y l ngi dng siu quyn lc v khng th b nh hng bi my lnh phn quyn ca bn\n\nHiu n gin nh vic bn  nh ca mnh v ngh bn c th lm mi vic vi cn nh  m khng ai c th can thip. Tuy nhin khi m s  ra th bn s thy l bn ch ang c quyn s dng t ch khng phi s hu t. Mi t ai u thuc quyn s hu ca nh nc.\n\ny chnh l root trong trng hp ny, v nu nh nc thch th quyn s hu nh hay mi ti nguyn trong nh ca bn c th bay mu.\n\n| V vy hy tht cn thn khi s dng quyn root trn my tnh. Trong trng hp my tnh, th chng ta l ch s hu nn chng ta c th enable hay disable root i. Trn Mac th mc nh l disable.\n\n# 4.Cch phn quyn\n\n`chmod xyz file/folder`\n\nV d:  `chmod 007 duychinh.bin`\n\nGii thch cu lnh trn:\n-xyz l 3 s nguyn lin nhau( gi tr ca ba s ny c th l 0,1,2,3,4,5,6,7).\nVi x ng vi quyn phn cho owner, y ng vi quyn phn cho group v z l cho everyone.\n\n:zero: khng c quyn g c.\n\n:one: quyn thc thi tp tin.\n\n:two: quyn write only.\n\n:four: quyn read only.\n\nVi 4 s trn ta c th cng li v ra 1 s mi vi permission c cng dn.\nV d: 7 = 4 + 2 + 1 => tt c cc quyn. Tng t vi c t hp khc.\n\nSuy ra vi lnh `chmod 777 file_name` --> Ta  gn tt c quyn cho c 3 loi user(nh lit k  mc 3).\n\nHnh nh minh ho:\n\n![Branching](http://www.macinstruct.com/images/permissions/permissions1.png)\n\nTrong nhiu trng hp  c th thc hin c lnh set permission k trn, ta phi thm cu lnh `sudo`\nvo pha trc. Trong cc bi tip theo s gii thch v  ngha ca cu lnh ny.\n\n# 5.Tham kho\n\n[1] [guru99](https://www.guru99.com/file-permissions.html)\n\n# Kt lun\n\nTrn l 1 ci nhn tng quan v phn quyn trn linux. Th gii unix cn rt nhiu iu th v, hi vng trong thi gian ti c th c thi gian  tm hiu su sc hn v nn tng ny.\n\n![File Permission](/images/file_permission.gif)\n","source":"_posts/2018-01-01-file-permission-in-linux.md","raw":"---\ntitle: \"Permission Trong Unix L G?\"\ndate: 2018-01-01\ndraft: false\ntags: [\"unix\"]\ncategories: [\"h iu hnh\"]\nmytag: \"OS\"\nmytrend: \"COOL\"\n\n---\n\n# t vn \n\nPhn ln thi gian thi i hc, ti c hc trn nn tng window vi b cng c visual studio v ms sql server. Mi th u n cho n khi ra trng v i lm. Mi trng lm vic khng cn l window na m chuyn sang gia nh linux-unix. Rt nhiu th l lm, tuy nhin, cng nh nhiu lp trnh vin khc. Copy paste khng c g kh khn vi ti.\n\nT nhng tutorial trn mng, vi nhng dng lnh ti khng hiu, nhng u thnh vn  g? N ang chy v vy l   hnh phc cho mt cu lp trnh vin thiu kinh nghim mi ra trng ri. Tuy nhin, vic phi lm nhng cng vic lp i lp li hng ngy m khng thc s hiu chng khin chng ta kh chu. Chng hn nh nhng cu lnh set permission chng hn.\n\n# Lun bn\n\n# 1.File permission l g?\n\nTng t nh ngi nh ca bn, bn sng cng gia nh v thi thong c nhng v khch gh thm. C nhng vt dng trong nh m bn ch mun ring mnh bn c th s dng, cng c nhng  vt khc, th m ch bn v gia nh c php s dng, v cng c nhng  vt m bn, gia nh v c nhng v khch u c th s dng.\n\nTi nguyn trong unix tng t nh vy, mi th trong unix u l file. Vy nn c nhng file quan trng ch mnh bn c th xi, cng c nhng file m bn c th chia s thm cho 1 nhm no . Cn nhng th khng qu quan trng bn c th m ca cho ai cng c th s dng.\n\n=>  l l do permission cn tn ti.\n\n# 2.S dng l s dng th no?\n\nHiu n gin nh th ny, nh ca bn, bn cho ti vo v cho php ti ngi gh ung nc xem tivi, nhng khng ng ngha vi vic ti mun lm g ci gh hay ci tivi cng c. Ti ch c th s dng ch khng c php thay i hay p ph  c ca bn.\n\nTrong unix c 3 quyn s dng:\n\n1. Quyn c.\n2. Quyn ghi.\n3. Quyn thc thi.\n\n# 3.Cc loi ngi dng.\n\n1. Owner (ngi s hu file  - ngi to ra file ).\n2. Group (nhm s hu file).\n3. Other (phn cn li ca h thng c th l guest).\n\n| Ngoi ra trn unix th cn 1 ngi dng th 4 gi l root. y l ngi dng siu quyn lc v khng th b nh hng bi my lnh phn quyn ca bn\n\nHiu n gin nh vic bn  nh ca mnh v ngh bn c th lm mi vic vi cn nh  m khng ai c th can thip. Tuy nhin khi m s  ra th bn s thy l bn ch ang c quyn s dng t ch khng phi s hu t. Mi t ai u thuc quyn s hu ca nh nc.\n\ny chnh l root trong trng hp ny, v nu nh nc thch th quyn s hu nh hay mi ti nguyn trong nh ca bn c th bay mu.\n\n| V vy hy tht cn thn khi s dng quyn root trn my tnh. Trong trng hp my tnh, th chng ta l ch s hu nn chng ta c th enable hay disable root i. Trn Mac th mc nh l disable.\n\n# 4.Cch phn quyn\n\n`chmod xyz file/folder`\n\nV d:  `chmod 007 duychinh.bin`\n\nGii thch cu lnh trn:\n-xyz l 3 s nguyn lin nhau( gi tr ca ba s ny c th l 0,1,2,3,4,5,6,7).\nVi x ng vi quyn phn cho owner, y ng vi quyn phn cho group v z l cho everyone.\n\n:zero: khng c quyn g c.\n\n:one: quyn thc thi tp tin.\n\n:two: quyn write only.\n\n:four: quyn read only.\n\nVi 4 s trn ta c th cng li v ra 1 s mi vi permission c cng dn.\nV d: 7 = 4 + 2 + 1 => tt c cc quyn. Tng t vi c t hp khc.\n\nSuy ra vi lnh `chmod 777 file_name` --> Ta  gn tt c quyn cho c 3 loi user(nh lit k  mc 3).\n\nHnh nh minh ho:\n\n![Branching](http://www.macinstruct.com/images/permissions/permissions1.png)\n\nTrong nhiu trng hp  c th thc hin c lnh set permission k trn, ta phi thm cu lnh `sudo`\nvo pha trc. Trong cc bi tip theo s gii thch v  ngha ca cu lnh ny.\n\n# 5.Tham kho\n\n[1] [guru99](https://www.guru99.com/file-permissions.html)\n\n# Kt lun\n\nTrn l 1 ci nhn tng quan v phn quyn trn linux. Th gii unix cn rt nhiu iu th v, hi vng trong thi gian ti c th c thi gian  tm hiu su sc hn v nn tng ny.\n\n![File Permission](/images/file_permission.gif)\n","slug":"2018-01-01-file-permission-in-linux","published":1,"updated":"2019-11-13T03:55:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe1a00008ers1wrrei7q","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Phn ln thi gian thi i hc, ti c hc trn nn tng window vi b cng c visual studio v ms sql server. Mi th u n cho n khi ra trng v i lm. Mi trng lm vic khng cn l window na m chuyn sang gia nh linux-unix. Rt nhiu th l lm, tuy nhin, cng nh nhiu lp trnh vin khc. Copy paste khng c g kh khn vi ti.</p>\n<p>T nhng tutorial trn mng, vi nhng dng lnh ti khng hiu, nhng u thnh vn  g? N ang chy v vy l   hnh phc cho mt cu lp trnh vin thiu kinh nghim mi ra trng ri. Tuy nhin, vic phi lm nhng cng vic lp i lp li hng ngy m khng thc s hiu chng khin chng ta kh chu. Chng hn nh nhng cu lnh set permission chng hn.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-File-permission-la-gi\"><a href=\"#1-File-permission-la-gi\" class=\"headerlink\" title=\"1.File permission l g?\"></a>1.File permission l g?</h1><p>Tng t nh ngi nh ca bn, bn sng cng gia nh v thi thong c nhng v khch gh thm. C nhng vt dng trong nh m bn ch mun ring mnh bn c th s dng, cng c nhng  vt khc, th m ch bn v gia nh c php s dng, v cng c nhng  vt m bn, gia nh v c nhng v khch u c th s dng.</p>\n<p>Ti nguyn trong unix tng t nh vy, mi th trong unix u l file. Vy nn c nhng file quan trng ch mnh bn c th xi, cng c nhng file m bn c th chia s thm cho 1 nhm no . Cn nhng th khng qu quan trng bn c th m ca cho ai cng c th s dng.</p>\n<p>=&gt;  l l do permission cn tn ti.</p>\n<h1 id=\"2-Su-dung-la-su-dung-the-nao\"><a href=\"#2-Su-dung-la-su-dung-the-nao\" class=\"headerlink\" title=\"2.S dng l s dng th no?\"></a>2.S dng l s dng th no?</h1><p>Hiu n gin nh th ny, nh ca bn, bn cho ti vo v cho php ti ngi gh ung nc xem tivi, nhng khng ng ngha vi vic ti mun lm g ci gh hay ci tivi cng c. Ti ch c th s dng ch khng c php thay i hay p ph  c ca bn.</p>\n<p>Trong unix c 3 quyn s dng:</p>\n<ol>\n<li>Quyn c.</li>\n<li>Quyn ghi.</li>\n<li>Quyn thc thi.</li>\n</ol>\n<h1 id=\"3-Cac-loai-nguoi-dung\"><a href=\"#3-Cac-loai-nguoi-dung\" class=\"headerlink\" title=\"3.Cc loi ngi dng.\"></a>3.Cc loi ngi dng.</h1><ol>\n<li>Owner (ngi s hu file  - ngi to ra file ).</li>\n<li>Group (nhm s hu file).</li>\n<li>Other (phn cn li ca h thng c th l guest).</li>\n</ol>\n<p>| Ngoi ra trn unix th cn 1 ngi dng th 4 gi l root. y l ngi dng siu quyn lc v khng th b nh hng bi my lnh phn quyn ca bn</p>\n<p>Hiu n gin nh vic bn  nh ca mnh v ngh bn c th lm mi vic vi cn nh  m khng ai c th can thip. Tuy nhin khi m s  ra th bn s thy l bn ch ang c quyn s dng t ch khng phi s hu t. Mi t ai u thuc quyn s hu ca nh nc.</p>\n<p>y chnh l root trong trng hp ny, v nu nh nc thch th quyn s hu nh hay mi ti nguyn trong nh ca bn c th bay mu.</p>\n<p>| V vy hy tht cn thn khi s dng quyn root trn my tnh. Trong trng hp my tnh, th chng ta l ch s hu nn chng ta c th enable hay disable root i. Trn Mac th mc nh l disable.</p>\n<h1 id=\"4-Cach-phan-quyen\"><a href=\"#4-Cach-phan-quyen\" class=\"headerlink\" title=\"4.Cch phn quyn\"></a>4.Cch phn quyn</h1><p><code>chmod xyz file/folder</code></p>\n<p>V d:  <code>chmod 007 duychinh.bin</code></p>\n<p>Gii thch cu lnh trn:<br>-xyz l 3 s nguyn lin nhau( gi tr ca ba s ny c th l 0,1,2,3,4,5,6,7).<br>Vi x ng vi quyn phn cho owner, y ng vi quyn phn cho group v z l cho everyone.</p>\n<p>:zero: khng c quyn g c.</p>\n<p>:one: quyn thc thi tp tin.</p>\n<p>:two: quyn write only.</p>\n<p>:four: quyn read only.</p>\n<p>Vi 4 s trn ta c th cng li v ra 1 s mi vi permission c cng dn.<br>V d: 7 = 4 + 2 + 1 =&gt; tt c cc quyn. Tng t vi c t hp khc.</p>\n<p>Suy ra vi lnh <code>chmod 777 file_name</code> &gt; Ta  gn tt c quyn cho c 3 loi user(nh lit k  mc 3).</p>\n<p>Hnh nh minh ho:</p>\n<p><img src=\"http://www.macinstruct.com/images/permissions/permissions1.png\" alt=\"Branching\"></p>\n<p>Trong nhiu trng hp  c th thc hin c lnh set permission k trn, ta phi thm cu lnh <code>sudo</code><br>vo pha trc. Trong cc bi tip theo s gii thch v  ngha ca cu lnh ny.</p>\n<h1 id=\"5-Tham-khao\"><a href=\"#5-Tham-khao\" class=\"headerlink\" title=\"5.Tham kho\"></a>5.Tham kho</h1><p>[1] <a href=\"https://www.guru99.com/file-permissions.html\" target=\"_blank\" rel=\"noopener\">guru99</a></p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Trn l 1 ci nhn tng quan v phn quyn trn linux. Th gii unix cn rt nhiu iu th v, hi vng trong thi gian ti c th c thi gian  tm hiu su sc hn v nn tng ny.</p>\n<p><img src=\"/images/file_permission.gif\" alt=\"File Permission\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Phn ln thi gian thi i hc, ti c hc trn nn tng window vi b cng c visual studio v ms sql server. Mi th u n cho n khi ra trng v i lm. Mi trng lm vic khng cn l window na m chuyn sang gia nh linux-unix. Rt nhiu th l lm, tuy nhin, cng nh nhiu lp trnh vin khc. Copy paste khng c g kh khn vi ti.</p>\n<p>T nhng tutorial trn mng, vi nhng dng lnh ti khng hiu, nhng u thnh vn  g? N ang chy v vy l   hnh phc cho mt cu lp trnh vin thiu kinh nghim mi ra trng ri. Tuy nhin, vic phi lm nhng cng vic lp i lp li hng ngy m khng thc s hiu chng khin chng ta kh chu. Chng hn nh nhng cu lnh set permission chng hn.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-File-permission-la-gi\"><a href=\"#1-File-permission-la-gi\" class=\"headerlink\" title=\"1.File permission l g?\"></a>1.File permission l g?</h1><p>Tng t nh ngi nh ca bn, bn sng cng gia nh v thi thong c nhng v khch gh thm. C nhng vt dng trong nh m bn ch mun ring mnh bn c th s dng, cng c nhng  vt khc, th m ch bn v gia nh c php s dng, v cng c nhng  vt m bn, gia nh v c nhng v khch u c th s dng.</p>\n<p>Ti nguyn trong unix tng t nh vy, mi th trong unix u l file. Vy nn c nhng file quan trng ch mnh bn c th xi, cng c nhng file m bn c th chia s thm cho 1 nhm no . Cn nhng th khng qu quan trng bn c th m ca cho ai cng c th s dng.</p>\n<p>=&gt;  l l do permission cn tn ti.</p>\n<h1 id=\"2-Su-dung-la-su-dung-the-nao\"><a href=\"#2-Su-dung-la-su-dung-the-nao\" class=\"headerlink\" title=\"2.S dng l s dng th no?\"></a>2.S dng l s dng th no?</h1><p>Hiu n gin nh th ny, nh ca bn, bn cho ti vo v cho php ti ngi gh ung nc xem tivi, nhng khng ng ngha vi vic ti mun lm g ci gh hay ci tivi cng c. Ti ch c th s dng ch khng c php thay i hay p ph  c ca bn.</p>\n<p>Trong unix c 3 quyn s dng:</p>\n<ol>\n<li>Quyn c.</li>\n<li>Quyn ghi.</li>\n<li>Quyn thc thi.</li>\n</ol>\n<h1 id=\"3-Cac-loai-nguoi-dung\"><a href=\"#3-Cac-loai-nguoi-dung\" class=\"headerlink\" title=\"3.Cc loi ngi dng.\"></a>3.Cc loi ngi dng.</h1><ol>\n<li>Owner (ngi s hu file  - ngi to ra file ).</li>\n<li>Group (nhm s hu file).</li>\n<li>Other (phn cn li ca h thng c th l guest).</li>\n</ol>\n<p>| Ngoi ra trn unix th cn 1 ngi dng th 4 gi l root. y l ngi dng siu quyn lc v khng th b nh hng bi my lnh phn quyn ca bn</p>\n<p>Hiu n gin nh vic bn  nh ca mnh v ngh bn c th lm mi vic vi cn nh  m khng ai c th can thip. Tuy nhin khi m s  ra th bn s thy l bn ch ang c quyn s dng t ch khng phi s hu t. Mi t ai u thuc quyn s hu ca nh nc.</p>\n<p>y chnh l root trong trng hp ny, v nu nh nc thch th quyn s hu nh hay mi ti nguyn trong nh ca bn c th bay mu.</p>\n<p>| V vy hy tht cn thn khi s dng quyn root trn my tnh. Trong trng hp my tnh, th chng ta l ch s hu nn chng ta c th enable hay disable root i. Trn Mac th mc nh l disable.</p>\n<h1 id=\"4-Cach-phan-quyen\"><a href=\"#4-Cach-phan-quyen\" class=\"headerlink\" title=\"4.Cch phn quyn\"></a>4.Cch phn quyn</h1><p><code>chmod xyz file/folder</code></p>\n<p>V d:  <code>chmod 007 duychinh.bin</code></p>\n<p>Gii thch cu lnh trn:<br>-xyz l 3 s nguyn lin nhau( gi tr ca ba s ny c th l 0,1,2,3,4,5,6,7).<br>Vi x ng vi quyn phn cho owner, y ng vi quyn phn cho group v z l cho everyone.</p>\n<p>:zero: khng c quyn g c.</p>\n<p>:one: quyn thc thi tp tin.</p>\n<p>:two: quyn write only.</p>\n<p>:four: quyn read only.</p>\n<p>Vi 4 s trn ta c th cng li v ra 1 s mi vi permission c cng dn.<br>V d: 7 = 4 + 2 + 1 =&gt; tt c cc quyn. Tng t vi c t hp khc.</p>\n<p>Suy ra vi lnh <code>chmod 777 file_name</code> &gt; Ta  gn tt c quyn cho c 3 loi user(nh lit k  mc 3).</p>\n<p>Hnh nh minh ho:</p>\n<p><img src=\"http://www.macinstruct.com/images/permissions/permissions1.png\" alt=\"Branching\"></p>\n<p>Trong nhiu trng hp  c th thc hin c lnh set permission k trn, ta phi thm cu lnh <code>sudo</code><br>vo pha trc. Trong cc bi tip theo s gii thch v  ngha ca cu lnh ny.</p>\n<h1 id=\"5-Tham-khao\"><a href=\"#5-Tham-khao\" class=\"headerlink\" title=\"5.Tham kho\"></a>5.Tham kho</h1><p>[1] <a href=\"https://www.guru99.com/file-permissions.html\" target=\"_blank\" rel=\"noopener\">guru99</a></p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Trn l 1 ci nhn tng quan v phn quyn trn linux. Th gii unix cn rt nhiu iu th v, hi vng trong thi gian ti c th c thi gian  tm hiu su sc hn v nn tng ny.</p>\n<p><img src=\"/images/file_permission.gif\" alt=\"File Permission\"></p>\n"},{"title":"Lnh Open Trn Unix?","date":"2018-01-22T17:00:00.000Z","draft":false,"mytag":"OS","mytrend":"COOL","_content":"\n# t vn \n\nChc hn khng ch ti m nhiu ngi dng MacOS khc  quen thuc vi cu lnh `open` trn terminal.\nHiu mt cch c bn nht cu lnh ny gip chng ta m th mc hin ti trong ca s Finder. Tuy nhin, cu lnh ny cn c th lm c nhiu iu hn chng ta tng.\n\n# Lun bn\n\n# 1.Folders\n\nNgoi vic c th m c th mc bn ang lm vic, n c th m c cc th mc khc trong my tnh ca bn ch bng vic bn cung cp ng dn pha sau cu lnh open thay v du chm nh chng ta  lm  trn. Bn cng c th m cc th mc n hay m nhiu th mc cng mt lc.\nDi y l mt vi v d cho nhng g chng ta  tho lun  trn:\n\n`open ~/`\n\n`open ~/etc ~/desktop ~/documents`\n\n# 2.File\n\nOpen cng c th m tp tin, li tip tc suy ngh n gin, chng ta c th thy cu lnh ny ging nh mt c click chut double vo file hay folder th u c chc nng m n ln. V d:\n\n`open ~/desktop/meo.rb`\n\nN s m file meo.rb. Bn cng c th s dng iu ny vi nhiu tp.\n\n`open ~/desktop/meo.rb ~/desktop/meo.jpg`\n\n# 3.Applications\n\nGi s ti c file meo.rb, by gi file  s c m mc nh bi phn mm Xcode trong my ca ti. Khi , ti c th override li phn mm mc nh  m file ny bng cu lnh sau:\n\n`open -a Sublime ~/desktop/meo.rb`\n\n# 4.URLs\n\nOpen cng c th m cc ng dn URL vi c php n gin nh sau:\n\n`open https://google.com.vn`\n\nVi cu lnh ny th ng dn bn cung cp s c m bng trnh duyt mc nh. Bn cng c th s dng trnh duyt khc lm trnh duyt mc nh bng tu chn a nh sau:\n\n`open -a Firefox https://google.com.vn`\n\n# Kt lun\n\nBi vit ny c gi tr no khng?\n\nCu tr li l c, bit thm v cc lnh Termial s khin cuc i developer ca bn bt kh.\n","source":"_posts/2019-01-23-open-command-in-macos.md","raw":"---\ntitle: \"Lnh Open Trn Unix?\"\ndate: 2018-01-23\ndraft: false\ntags: [\"unix\"]\ncategories: [\"h iu hnh\"]\nmytag: \"OS\"\nmytrend: \"COOL\"\n\n---\n\n# t vn \n\nChc hn khng ch ti m nhiu ngi dng MacOS khc  quen thuc vi cu lnh `open` trn terminal.\nHiu mt cch c bn nht cu lnh ny gip chng ta m th mc hin ti trong ca s Finder. Tuy nhin, cu lnh ny cn c th lm c nhiu iu hn chng ta tng.\n\n# Lun bn\n\n# 1.Folders\n\nNgoi vic c th m c th mc bn ang lm vic, n c th m c cc th mc khc trong my tnh ca bn ch bng vic bn cung cp ng dn pha sau cu lnh open thay v du chm nh chng ta  lm  trn. Bn cng c th m cc th mc n hay m nhiu th mc cng mt lc.\nDi y l mt vi v d cho nhng g chng ta  tho lun  trn:\n\n`open ~/`\n\n`open ~/etc ~/desktop ~/documents`\n\n# 2.File\n\nOpen cng c th m tp tin, li tip tc suy ngh n gin, chng ta c th thy cu lnh ny ging nh mt c click chut double vo file hay folder th u c chc nng m n ln. V d:\n\n`open ~/desktop/meo.rb`\n\nN s m file meo.rb. Bn cng c th s dng iu ny vi nhiu tp.\n\n`open ~/desktop/meo.rb ~/desktop/meo.jpg`\n\n# 3.Applications\n\nGi s ti c file meo.rb, by gi file  s c m mc nh bi phn mm Xcode trong my ca ti. Khi , ti c th override li phn mm mc nh  m file ny bng cu lnh sau:\n\n`open -a Sublime ~/desktop/meo.rb`\n\n# 4.URLs\n\nOpen cng c th m cc ng dn URL vi c php n gin nh sau:\n\n`open https://google.com.vn`\n\nVi cu lnh ny th ng dn bn cung cp s c m bng trnh duyt mc nh. Bn cng c th s dng trnh duyt khc lm trnh duyt mc nh bng tu chn a nh sau:\n\n`open -a Firefox https://google.com.vn`\n\n# Kt lun\n\nBi vit ny c gi tr no khng?\n\nCu tr li l c, bit thm v cc lnh Termial s khin cuc i developer ca bn bt kh.\n","slug":"2019-01-23-open-command-in-macos","published":1,"updated":"2019-11-13T03:56:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe1i00028ers5pxhha7b","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Chc hn khng ch ti m nhiu ngi dng MacOS khc  quen thuc vi cu lnh <code>open</code> trn terminal.<br>Hiu mt cch c bn nht cu lnh ny gip chng ta m th mc hin ti trong ca s Finder. Tuy nhin, cu lnh ny cn c th lm c nhiu iu hn chng ta tng.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Folders\"><a href=\"#1-Folders\" class=\"headerlink\" title=\"1.Folders\"></a>1.Folders</h1><p>Ngoi vic c th m c th mc bn ang lm vic, n c th m c cc th mc khc trong my tnh ca bn ch bng vic bn cung cp ng dn pha sau cu lnh open thay v du chm nh chng ta  lm  trn. Bn cng c th m cc th mc n hay m nhiu th mc cng mt lc.<br>Di y l mt vi v d cho nhng g chng ta  tho lun  trn:</p>\n<p><code>open ~/</code></p>\n<p><code>open ~/etc ~/desktop ~/documents</code></p>\n<h1 id=\"2-File\"><a href=\"#2-File\" class=\"headerlink\" title=\"2.File\"></a>2.File</h1><p>Open cng c th m tp tin, li tip tc suy ngh n gin, chng ta c th thy cu lnh ny ging nh mt c click chut double vo file hay folder th u c chc nng m n ln. V d:</p>\n<p><code>open ~/desktop/meo.rb</code></p>\n<p>N s m file meo.rb. Bn cng c th s dng iu ny vi nhiu tp.</p>\n<p><code>open ~/desktop/meo.rb ~/desktop/meo.jpg</code></p>\n<h1 id=\"3-Applications\"><a href=\"#3-Applications\" class=\"headerlink\" title=\"3.Applications\"></a>3.Applications</h1><p>Gi s ti c file meo.rb, by gi file  s c m mc nh bi phn mm Xcode trong my ca ti. Khi , ti c th override li phn mm mc nh  m file ny bng cu lnh sau:</p>\n<p><code>open -a Sublime ~/desktop/meo.rb</code></p>\n<h1 id=\"4-URLs\"><a href=\"#4-URLs\" class=\"headerlink\" title=\"4.URLs\"></a>4.URLs</h1><p>Open cng c th m cc ng dn URL vi c php n gin nh sau:</p>\n<p><code>open https://google.com.vn</code></p>\n<p>Vi cu lnh ny th ng dn bn cung cp s c m bng trnh duyt mc nh. Bn cng c th s dng trnh duyt khc lm trnh duyt mc nh bng tu chn a nh sau:</p>\n<p><code>open -a Firefox https://google.com.vn</code></p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Bi vit ny c gi tr no khng?</p>\n<p>Cu tr li l c, bit thm v cc lnh Termial s khin cuc i developer ca bn bt kh.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Chc hn khng ch ti m nhiu ngi dng MacOS khc  quen thuc vi cu lnh <code>open</code> trn terminal.<br>Hiu mt cch c bn nht cu lnh ny gip chng ta m th mc hin ti trong ca s Finder. Tuy nhin, cu lnh ny cn c th lm c nhiu iu hn chng ta tng.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Folders\"><a href=\"#1-Folders\" class=\"headerlink\" title=\"1.Folders\"></a>1.Folders</h1><p>Ngoi vic c th m c th mc bn ang lm vic, n c th m c cc th mc khc trong my tnh ca bn ch bng vic bn cung cp ng dn pha sau cu lnh open thay v du chm nh chng ta  lm  trn. Bn cng c th m cc th mc n hay m nhiu th mc cng mt lc.<br>Di y l mt vi v d cho nhng g chng ta  tho lun  trn:</p>\n<p><code>open ~/</code></p>\n<p><code>open ~/etc ~/desktop ~/documents</code></p>\n<h1 id=\"2-File\"><a href=\"#2-File\" class=\"headerlink\" title=\"2.File\"></a>2.File</h1><p>Open cng c th m tp tin, li tip tc suy ngh n gin, chng ta c th thy cu lnh ny ging nh mt c click chut double vo file hay folder th u c chc nng m n ln. V d:</p>\n<p><code>open ~/desktop/meo.rb</code></p>\n<p>N s m file meo.rb. Bn cng c th s dng iu ny vi nhiu tp.</p>\n<p><code>open ~/desktop/meo.rb ~/desktop/meo.jpg</code></p>\n<h1 id=\"3-Applications\"><a href=\"#3-Applications\" class=\"headerlink\" title=\"3.Applications\"></a>3.Applications</h1><p>Gi s ti c file meo.rb, by gi file  s c m mc nh bi phn mm Xcode trong my ca ti. Khi , ti c th override li phn mm mc nh  m file ny bng cu lnh sau:</p>\n<p><code>open -a Sublime ~/desktop/meo.rb</code></p>\n<h1 id=\"4-URLs\"><a href=\"#4-URLs\" class=\"headerlink\" title=\"4.URLs\"></a>4.URLs</h1><p>Open cng c th m cc ng dn URL vi c php n gin nh sau:</p>\n<p><code>open https://google.com.vn</code></p>\n<p>Vi cu lnh ny th ng dn bn cung cp s c m bng trnh duyt mc nh. Bn cng c th s dng trnh duyt khc lm trnh duyt mc nh bng tu chn a nh sau:</p>\n<p><code>open -a Firefox https://google.com.vn</code></p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Bi vit ny c gi tr no khng?</p>\n<p>Cu tr li l c, bit thm v cc lnh Termial s khin cuc i developer ca bn bt kh.</p>\n"},{"title":"Length, Count v Size","date":"2018-06-27T17:00:00.000Z","mytag":"Ruby","mytrend":"COOL","_content":"\n# t vn \n\nKhong 1 nm trc, khi ti bt u hc v Ruby on Rails, ging nh nhiu developers khc, ti ch yu tp trung vo cch  c th xy dng mt ng dng ruby on rails chy c m khng tp trung nhiu vo kin thc Ruby nn tng. C l y cng l la chn duy nht vo thi im  vi mt cu sinh vin mi ra trng nh ti, khi m c qu nhiu khi nim, qu nhiu th phi hc m sp ca ti cng nh sp ca bn s khng tr lng cho chng ta ln cng ty  hc.\nThi gian tri qua, khi  c nhiu kinh nghim hn, ti bt u ngy cng hng th v nhng kin thc nn tng m ngy xa ti ch tng c lt qua. Trong  c Count, Length v Size, nhng th tng nh khng c g  ni hay tm hiu thm, nhng liu chng c thc s n gin nh vy?\n\n# Lun bn\n\n# 1.Tng quan\n\nV c bn, y l ba phng thc c Ruby cung cp, v d nhin, n hon ton c th s dng trong rails. Mt cch thng xuyn nht, bn c th thy ngi ta s dng nhng phng thc ny cho mt mng d liu bt k trong Ruby hay mt mng record trong Rails.  ngha ca n l tr v kch thc ca mng/hash. V d:\n\n```ruby\narray = Array.new(3,1)\n#=> To 1 mng tn array c 3 phn t u c gi tr l 1.\narray.size, array.length, array.count\n#=> Kt qu tr v cng l 3.\n```\n\nNhng mi chuyn khng dng li  y, nu chng ch cng c chung mt chc nng th khng c l do g  chng cng tn ti.\n\n# 2.Trong ruby\n\nNgoi chc nng tnh kch thc ca mt mng hay mt hash nh  c  cp  trn, Size c th c s dng vi c i tng dng chui v dng s nguyn.\nVi chui, Size s tr v kt qu l s lng k t ca chui. Cn vi s nguyn, n s tr v s bite m i tng  nm gi trn b nh. V d:\n\n```ruby\nstr_temp = \"hduychinh\"\nstr_temp.size\n#=> Kt qu tr v  di chui l 9.\nint_temp = 12\nint_temp.size\n#=> Kt qu tr v l 8, ng vi 8 bytes m int_temp lu tr trn b nh.\n```\n\nLength km hn size mt cht, Length ch c th s dng thm cho cc i tng dng chui  tr v s lng k t trong chui, m khng th s dng trn s nguyn.\n\nCui cng l Count, n khng c chc nng g b sung so vi phn   cp. Tuy nhin, mt im mnh ca Count  l khi s dng vi mng/hash th n c th nhn tham s chuyn vo. V d:\n\n```ruby\nc = [1, 2, 3, 3]\nc.count 3\n#=> Kt qu tr v l 2.\nc.count { |i| i > 1 }\n#=> Kt qu tr v l 3.\n```\n\n# 3.Trong Active Record\n\nKhi s dng Count thc cht l bn ang s dng lnh sql `select count(*) from table_names`  truy vn ra s lng m chng ta ang cn tm hiu. Th hai, Count khng c lu tr li, iu  c ngha mi ln bn chy hm Count th n s truy vn vo c s d liu m khng h quan tm l bn c gi lnh Count trc  hay khng. Th ba, Count l lnh duy nht trong ba lnh trn c th gi trc tip thng qua mt model class, v d nh: `Cat.count`.\n\nKhi s dng Length, iu u tin  l load ton b record m bn ang nh m s lng vo b nh ri tnh ton. T ln gi th hai, n s ly li kt qu c ch khng load d liu ln na. y thc s l mt iu ti t nu bn c mt c s d liu ln, n c th load hng triu record vo b nh.\n\n```ruby\nCat.all.length\n#=> Cat Load (0.2ms)  SELECT \"cats\".* FROM \"cats\"\n```\n\nKhi s dng Size, iu u tin ca n l tm xem kt qu ca truy vn  c trong b nh hay cha, nu c ri th n s ly ra v s dng, cn nu cha c, n s s dng mt cu truy vn SQL vo c s d liu  m s lng. iu ny tht s tuyt vi, nh mt s kt hp gia length v count.\n\n# Kt lun\n\nTheo d liu t fast-ruby th method length chy gn tng ng vi size v chy nhanh hn hn so vi count. im li ca count l n c th c gi t 1 class Model, gip c php tng minh hn, cng nh vic c th truyn tham s vo hm.\nNgc li trong cc trng hp khc, vic s dng size l kh d hn c, c bit vi d liu ln th nn trnh s dng length, v  c th mang li 1 thm ho cho chng trnh khi qu nhiu d liu b np vo b nh 1 cch v ch.\n","source":"_posts/2019-01-28-count-vs-length-size-in-ruby-and-ror.md","raw":"---\ntitle: \"Length, Count v Size\"\ndate: 2018-06-28\n# draft: false\ntags: [\"ruby\", \"rails\"]\ncategories: [\"ruby notes\"]\nmytag: \"Ruby\"\nmytrend: \"COOL\"\n\n---\n\n# t vn \n\nKhong 1 nm trc, khi ti bt u hc v Ruby on Rails, ging nh nhiu developers khc, ti ch yu tp trung vo cch  c th xy dng mt ng dng ruby on rails chy c m khng tp trung nhiu vo kin thc Ruby nn tng. C l y cng l la chn duy nht vo thi im  vi mt cu sinh vin mi ra trng nh ti, khi m c qu nhiu khi nim, qu nhiu th phi hc m sp ca ti cng nh sp ca bn s khng tr lng cho chng ta ln cng ty  hc.\nThi gian tri qua, khi  c nhiu kinh nghim hn, ti bt u ngy cng hng th v nhng kin thc nn tng m ngy xa ti ch tng c lt qua. Trong  c Count, Length v Size, nhng th tng nh khng c g  ni hay tm hiu thm, nhng liu chng c thc s n gin nh vy?\n\n# Lun bn\n\n# 1.Tng quan\n\nV c bn, y l ba phng thc c Ruby cung cp, v d nhin, n hon ton c th s dng trong rails. Mt cch thng xuyn nht, bn c th thy ngi ta s dng nhng phng thc ny cho mt mng d liu bt k trong Ruby hay mt mng record trong Rails.  ngha ca n l tr v kch thc ca mng/hash. V d:\n\n```ruby\narray = Array.new(3,1)\n#=> To 1 mng tn array c 3 phn t u c gi tr l 1.\narray.size, array.length, array.count\n#=> Kt qu tr v cng l 3.\n```\n\nNhng mi chuyn khng dng li  y, nu chng ch cng c chung mt chc nng th khng c l do g  chng cng tn ti.\n\n# 2.Trong ruby\n\nNgoi chc nng tnh kch thc ca mt mng hay mt hash nh  c  cp  trn, Size c th c s dng vi c i tng dng chui v dng s nguyn.\nVi chui, Size s tr v kt qu l s lng k t ca chui. Cn vi s nguyn, n s tr v s bite m i tng  nm gi trn b nh. V d:\n\n```ruby\nstr_temp = \"hduychinh\"\nstr_temp.size\n#=> Kt qu tr v  di chui l 9.\nint_temp = 12\nint_temp.size\n#=> Kt qu tr v l 8, ng vi 8 bytes m int_temp lu tr trn b nh.\n```\n\nLength km hn size mt cht, Length ch c th s dng thm cho cc i tng dng chui  tr v s lng k t trong chui, m khng th s dng trn s nguyn.\n\nCui cng l Count, n khng c chc nng g b sung so vi phn   cp. Tuy nhin, mt im mnh ca Count  l khi s dng vi mng/hash th n c th nhn tham s chuyn vo. V d:\n\n```ruby\nc = [1, 2, 3, 3]\nc.count 3\n#=> Kt qu tr v l 2.\nc.count { |i| i > 1 }\n#=> Kt qu tr v l 3.\n```\n\n# 3.Trong Active Record\n\nKhi s dng Count thc cht l bn ang s dng lnh sql `select count(*) from table_names`  truy vn ra s lng m chng ta ang cn tm hiu. Th hai, Count khng c lu tr li, iu  c ngha mi ln bn chy hm Count th n s truy vn vo c s d liu m khng h quan tm l bn c gi lnh Count trc  hay khng. Th ba, Count l lnh duy nht trong ba lnh trn c th gi trc tip thng qua mt model class, v d nh: `Cat.count`.\n\nKhi s dng Length, iu u tin  l load ton b record m bn ang nh m s lng vo b nh ri tnh ton. T ln gi th hai, n s ly li kt qu c ch khng load d liu ln na. y thc s l mt iu ti t nu bn c mt c s d liu ln, n c th load hng triu record vo b nh.\n\n```ruby\nCat.all.length\n#=> Cat Load (0.2ms)  SELECT \"cats\".* FROM \"cats\"\n```\n\nKhi s dng Size, iu u tin ca n l tm xem kt qu ca truy vn  c trong b nh hay cha, nu c ri th n s ly ra v s dng, cn nu cha c, n s s dng mt cu truy vn SQL vo c s d liu  m s lng. iu ny tht s tuyt vi, nh mt s kt hp gia length v count.\n\n# Kt lun\n\nTheo d liu t fast-ruby th method length chy gn tng ng vi size v chy nhanh hn hn so vi count. im li ca count l n c th c gi t 1 class Model, gip c php tng minh hn, cng nh vic c th truyn tham s vo hm.\nNgc li trong cc trng hp khc, vic s dng size l kh d hn c, c bit vi d liu ln th nn trnh s dng length, v  c th mang li 1 thm ho cho chng trnh khi qu nhiu d liu b np vo b nh 1 cch v ch.\n","slug":"2019-01-28-count-vs-length-size-in-ruby-and-ror","published":1,"updated":"2019-11-13T03:58:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe1o00058ers86opdwwt","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Khong 1 nm trc, khi ti bt u hc v Ruby on Rails, ging nh nhiu developers khc, ti ch yu tp trung vo cch  c th xy dng mt ng dng ruby on rails chy c m khng tp trung nhiu vo kin thc Ruby nn tng. C l y cng l la chn duy nht vo thi im  vi mt cu sinh vin mi ra trng nh ti, khi m c qu nhiu khi nim, qu nhiu th phi hc m sp ca ti cng nh sp ca bn s khng tr lng cho chng ta ln cng ty  hc.<br>Thi gian tri qua, khi  c nhiu kinh nghim hn, ti bt u ngy cng hng th v nhng kin thc nn tng m ngy xa ti ch tng c lt qua. Trong  c Count, Length v Size, nhng th tng nh khng c g  ni hay tm hiu thm, nhng liu chng c thc s n gin nh vy?</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Tong-quan\"><a href=\"#1-Tong-quan\" class=\"headerlink\" title=\"1.Tng quan\"></a>1.Tng quan</h1><p>V c bn, y l ba phng thc c Ruby cung cp, v d nhin, n hon ton c th s dng trong rails. Mt cch thng xuyn nht, bn c th thy ngi ta s dng nhng phng thc ny cho mt mng d liu bt k trong Ruby hay mt mng record trong Rails.  ngha ca n l tr v kch thc ca mng/hash. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array = Array.new(<span class=\"number\">3</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\">#=&gt; To 1 mng tn array c 3 phn t u c gi tr l 1.</span></span><br><span class=\"line\">array.size, array.length, array.count</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v cng l 3.</span></span><br></pre></td></tr></table></figure>\n\n<p>Nhng mi chuyn khng dng li  y, nu chng ch cng c chung mt chc nng th khng c l do g  chng cng tn ti.</p>\n<h1 id=\"2-Trong-ruby\"><a href=\"#2-Trong-ruby\" class=\"headerlink\" title=\"2.Trong ruby\"></a>2.Trong ruby</h1><p>Ngoi chc nng tnh kch thc ca mt mng hay mt hash nh  c  cp  trn, Size c th c s dng vi c i tng dng chui v dng s nguyn.<br>Vi chui, Size s tr v kt qu l s lng k t ca chui. Cn vi s nguyn, n s tr v s bite m i tng  nm gi trn b nh. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str_temp = <span class=\"string\">\"hduychinh\"</span></span><br><span class=\"line\">str_temp.size</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v  di chui l 9.</span></span><br><span class=\"line\">int_temp = <span class=\"number\">12</span></span><br><span class=\"line\">int_temp.size</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 8, ng vi 8 bytes m int_temp lu tr trn b nh.</span></span><br></pre></td></tr></table></figure>\n\n<p>Length km hn size mt cht, Length ch c th s dng thm cho cc i tng dng chui  tr v s lng k t trong chui, m khng th s dng trn s nguyn.</p>\n<p>Cui cng l Count, n khng c chc nng g b sung so vi phn   cp. Tuy nhin, mt im mnh ca Count  l khi s dng vi mng/hash th n c th nhn tham s chuyn vo. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">c.count <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 2.</span></span><br><span class=\"line\">c.count &#123; <span class=\"params\">|i|</span> i &gt; <span class=\"number\">1</span> &#125;</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 3.</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-Trong-Active-Record\"><a href=\"#3-Trong-Active-Record\" class=\"headerlink\" title=\"3.Trong Active Record\"></a>3.Trong Active Record</h1><p>Khi s dng Count thc cht l bn ang s dng lnh sql <code>select count(*) from table_names</code>  truy vn ra s lng m chng ta ang cn tm hiu. Th hai, Count khng c lu tr li, iu  c ngha mi ln bn chy hm Count th n s truy vn vo c s d liu m khng h quan tm l bn c gi lnh Count trc  hay khng. Th ba, Count l lnh duy nht trong ba lnh trn c th gi trc tip thng qua mt model class, v d nh: <code>Cat.count</code>.</p>\n<p>Khi s dng Length, iu u tin  l load ton b record m bn ang nh m s lng vo b nh ri tnh ton. T ln gi th hai, n s ly li kt qu c ch khng load d liu ln na. y thc s l mt iu ti t nu bn c mt c s d liu ln, n c th load hng triu record vo b nh.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.all.length</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Cat Load (0.2ms)  SELECT \"cats\".* FROM \"cats\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Khi s dng Size, iu u tin ca n l tm xem kt qu ca truy vn  c trong b nh hay cha, nu c ri th n s ly ra v s dng, cn nu cha c, n s s dng mt cu truy vn SQL vo c s d liu  m s lng. iu ny tht s tuyt vi, nh mt s kt hp gia length v count.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Theo d liu t fast-ruby th method length chy gn tng ng vi size v chy nhanh hn hn so vi count. im li ca count l n c th c gi t 1 class Model, gip c php tng minh hn, cng nh vic c th truyn tham s vo hm.<br>Ngc li trong cc trng hp khc, vic s dng size l kh d hn c, c bit vi d liu ln th nn trnh s dng length, v  c th mang li 1 thm ho cho chng trnh khi qu nhiu d liu b np vo b nh 1 cch v ch.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Khong 1 nm trc, khi ti bt u hc v Ruby on Rails, ging nh nhiu developers khc, ti ch yu tp trung vo cch  c th xy dng mt ng dng ruby on rails chy c m khng tp trung nhiu vo kin thc Ruby nn tng. C l y cng l la chn duy nht vo thi im  vi mt cu sinh vin mi ra trng nh ti, khi m c qu nhiu khi nim, qu nhiu th phi hc m sp ca ti cng nh sp ca bn s khng tr lng cho chng ta ln cng ty  hc.<br>Thi gian tri qua, khi  c nhiu kinh nghim hn, ti bt u ngy cng hng th v nhng kin thc nn tng m ngy xa ti ch tng c lt qua. Trong  c Count, Length v Size, nhng th tng nh khng c g  ni hay tm hiu thm, nhng liu chng c thc s n gin nh vy?</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Tong-quan\"><a href=\"#1-Tong-quan\" class=\"headerlink\" title=\"1.Tng quan\"></a>1.Tng quan</h1><p>V c bn, y l ba phng thc c Ruby cung cp, v d nhin, n hon ton c th s dng trong rails. Mt cch thng xuyn nht, bn c th thy ngi ta s dng nhng phng thc ny cho mt mng d liu bt k trong Ruby hay mt mng record trong Rails.  ngha ca n l tr v kch thc ca mng/hash. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array = Array.new(<span class=\"number\">3</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\">#=&gt; To 1 mng tn array c 3 phn t u c gi tr l 1.</span></span><br><span class=\"line\">array.size, array.length, array.count</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v cng l 3.</span></span><br></pre></td></tr></table></figure>\n\n<p>Nhng mi chuyn khng dng li  y, nu chng ch cng c chung mt chc nng th khng c l do g  chng cng tn ti.</p>\n<h1 id=\"2-Trong-ruby\"><a href=\"#2-Trong-ruby\" class=\"headerlink\" title=\"2.Trong ruby\"></a>2.Trong ruby</h1><p>Ngoi chc nng tnh kch thc ca mt mng hay mt hash nh  c  cp  trn, Size c th c s dng vi c i tng dng chui v dng s nguyn.<br>Vi chui, Size s tr v kt qu l s lng k t ca chui. Cn vi s nguyn, n s tr v s bite m i tng  nm gi trn b nh. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str_temp = <span class=\"string\">\"hduychinh\"</span></span><br><span class=\"line\">str_temp.size</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v  di chui l 9.</span></span><br><span class=\"line\">int_temp = <span class=\"number\">12</span></span><br><span class=\"line\">int_temp.size</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 8, ng vi 8 bytes m int_temp lu tr trn b nh.</span></span><br></pre></td></tr></table></figure>\n\n<p>Length km hn size mt cht, Length ch c th s dng thm cho cc i tng dng chui  tr v s lng k t trong chui, m khng th s dng trn s nguyn.</p>\n<p>Cui cng l Count, n khng c chc nng g b sung so vi phn   cp. Tuy nhin, mt im mnh ca Count  l khi s dng vi mng/hash th n c th nhn tham s chuyn vo. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">c.count <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 2.</span></span><br><span class=\"line\">c.count &#123; <span class=\"params\">|i|</span> i &gt; <span class=\"number\">1</span> &#125;</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 3.</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-Trong-Active-Record\"><a href=\"#3-Trong-Active-Record\" class=\"headerlink\" title=\"3.Trong Active Record\"></a>3.Trong Active Record</h1><p>Khi s dng Count thc cht l bn ang s dng lnh sql <code>select count(*) from table_names</code>  truy vn ra s lng m chng ta ang cn tm hiu. Th hai, Count khng c lu tr li, iu  c ngha mi ln bn chy hm Count th n s truy vn vo c s d liu m khng h quan tm l bn c gi lnh Count trc  hay khng. Th ba, Count l lnh duy nht trong ba lnh trn c th gi trc tip thng qua mt model class, v d nh: <code>Cat.count</code>.</p>\n<p>Khi s dng Length, iu u tin  l load ton b record m bn ang nh m s lng vo b nh ri tnh ton. T ln gi th hai, n s ly li kt qu c ch khng load d liu ln na. y thc s l mt iu ti t nu bn c mt c s d liu ln, n c th load hng triu record vo b nh.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.all.length</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Cat Load (0.2ms)  SELECT \"cats\".* FROM \"cats\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Khi s dng Size, iu u tin ca n l tm xem kt qu ca truy vn  c trong b nh hay cha, nu c ri th n s ly ra v s dng, cn nu cha c, n s s dng mt cu truy vn SQL vo c s d liu  m s lng. iu ny tht s tuyt vi, nh mt s kt hp gia length v count.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Theo d liu t fast-ruby th method length chy gn tng ng vi size v chy nhanh hn hn so vi count. im li ca count l n c th c gi t 1 class Model, gip c php tng minh hn, cng nh vic c th truyn tham s vo hm.<br>Ngc li trong cc trng hp khc, vic s dng size l kh d hn c, c bit vi d liu ln th nn trnh s dng length, v  c th mang li 1 thm ho cho chng trnh khi qu nhiu d liu b np vo b nh 1 cch v ch.</p>\n"},{"title":"Bash File Trn Unix","date":"2018-12-29T17:00:00.000Z","draft":false,"mytag":"OS","mytrend":"COOL","_content":"\n# t vn \n\ny li l mt bi vit tip theo v ch  lin quan n cc h iu hnh v dng lnh. Khi mi tip xc vi my tnh, OS m ti s dng l windows, n khi ln i hc, phn ln thi gian hc tp vn gn lin vi windows, cn phn nh thi gian cn li l lm quen vi mt h iu hnh l lm mang tn Linux.\n\nVic ci t phn mm trn Linux c kh khn hn windows mt cht,  l thay v click chut ri next next next next... th phn nhiu cc phn mm phc v cng vic lp trnh u phi ci t qua dng lnh. Mi th khng c vn  g cho n khi vic copy nhng dng lnh  ri enter, bn s khng cn nhn c mt kt qu thnh cng m mn na m thay vo  l mt ng li c tr v.\n\nKhi lm vic vi Ruby, ti  tng gp nhng li lin quan n Rbenv v RVM. iu  thc s l mt cn c mng khi lin tc phi google tm kim cu tr li cho vn  gp phi, copy nhng dng lnh trn stackoverflow paste vo terminal v ch i rng vn  s c gii quyt d chng hiu dng lnh ny c ngha l g. Lu dn ti  tch lu thm c mt s hiu bit mun chia s m bt u l cc File ht thng.\n\n# Lun bn\n\n bt u chia s v nhng file k trn, c l chng ta s phi im qua mt s khi nim c bn.\n\n# 1.Mt s khi nim c bn.\n\n`Unix` l mt h iu hnh ra i  rt lu, n l tin thn ca hai nhnh h iu hnh rt ni ting khc, bn thng mi chnh l `macOS` v bn m ngun m chnh l `GNU`. Cho n nhng nm 90, c mt s kt hp gia cc phn mm ca `GNU` v phn core ca mt d n m ngun m khc tn l `Linux`  to thnh mt h iu hnh hon chnh mang tn l `GNU/Linux`, ngy nay a s chng ta ch thng gi tt l `Linux`\n\nQua  chng ta c th thy, `Linux` v cc h iu hnh con chu ca `Unix` c rt nhiu im chung.\n\n`Shell`: y cng l mt khi nim quan trng cn tm hiu. Trc khi i vo ch  chnh ca bi vit,  tm hiu mt cch su sc v Shell, c l s cn n mt bi vit khc, nn  y ti ch m t mt cch bao qut v n. `Shell` l phn nm gia ng dng v phn core ca h iu hnh.\n\nHy tng tng chng ta c mt chng sch gm ba quyn vi quyn trn cng l nhng ng dng ang chy trn my tnh ca bn v d nh word, excel, cun  di cng chnh l phn nhn ca h iu hnh.  cc ng dng ca bn c th s dng cc ti nguyn ca my tnh nh b nh, ram, IO... iu tt yu phi xy ra  l ng dng ca bn phi giao tip c vi h iu hnh.\n\nTuy nhin, vn  gp phi  l h iu hnh ch hiu m my, mt th qu phc tp  ngi dng khi s dng ng dng c th thao tc c.  l l do ra i ca quyn sch  gia m chng ta gi l `Shell`. Nhim v ca n l g?  l chuyn i cc lnh t quyn sch u tin thnh cc lnh m quyn sch th ba c th hiu v thc hin c (Thng dch).\n\nV d terminal c xem l mt `Shell CLI`, mi khi bn g mt lnh bt k trn terminal, n s chuyn i cu lnh bn vit thnh mt cu lnh khc m phn nhn h iu hnh c th hiu v thc hin c.\n\n# 2.iu g xy ra khi bn g mt lnh trn terminal?\n\n bao gi bn t hi chuyn g s xy ra tip theo khi ta g mt lnh trong terminal? V d:\n\n```ruby\nls -a\n#=> Hin th tt c file v folder nm trong current folder.\n```\n\nChng ta s thng t an i bn thn rng nhng cu lnh   c h iu hnh lu li nh mt cun t in  n khi c gi chng s bit tm cu tr li  u. Thc t suy ngh trn khng hn  sai, mi th trong Unix u l file, nu bn g dng lnh:\n\n```ruby\necho $PATH\n```\n\nKt qu bn nhn c chnh l mt danh sch cc th mc m terminal s tm kim cu lnh bn g theo th t t tri qua phi. Vi mt h iu hnh thun khit cha ci t thm cc phn mm bn ngoi th PATH s c gi tr mc nh nh sau:\n\n`/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin`\n\nCn trn my tnh ca ti th PATH li c gi tr l:\n\n`/Users/admin/.rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin`\n\nC mt s khc bit nh, ta c th thy chui PATH trn my tnh ca ti c phn u chui c thm bi mt th mc .rbenv no . y chnh l mu cht ca vn , l do xut hin ca phn m rng nu trn  l ti  ci t thm Ruby vo my tnh ca mnh bng cng c rbenv.\n\nHin nhin, khi h iu hnh cn thun khit, n khng th hiu c cu lnh `ruby  v`. Vic ci t Ruby vo my tnh ng ngha vi vic ti  ti cc file lin quan vo mt th mc no , v  ch cho terminal bit phi vo u  tm kim cc lnh lin quan n Ruby va ci t, chui PATH s c ghi  b sung thm ng dn vo th mc cha cc file thc thi ca Ruby. T y, mi khi bn g bt c mt cu lnh no lin quan n Ruby, terminal s theo chui PATH vo tng th mc  tm kim v thc thi cu lnh .\n\nSuy ra, c mt li rt hay xy ra cho nhng ngi mi s dng Ruby,  l h thm v xo Ruby kh thng xuyn dn n ng dn b sai v terminal khng th tm c th mc c th thc thi cu lnh mt cch chnh xc.\n\nTrong terminal, bn c th ni thm mt th mc vo chui PATH bng cu lnh sau:\n\n`export PATH=\"$PATH:new_path\"`\n\n# 3.Mt s file quan trng trn Macos.\n\nKhi qu trnh lm vic vi terminal nhiu hn v chng ta cn ci t mt s th cn thit trong qu trnh lm vic, chng ta s dng cc `dot file`. Ni dung ca cc `dot file` ny l cc cu lnh shell script (chc nng ca cu lnh ny c th chng ta s tm hiu sau).\n\nKhi bn m mt terminal m n i hi bn phi login (v d nh khi bn remote access vo mt my tnh khc thng qua SSH, bn cn nhp tn ng nhp v mt khu) th  l mt `Login Shell`.\nVi trng hp Login Shell th `dot file` c load ln l file `.bash_profile`.\nTrong mt trng hp khc, bn m mt terminal m khng cn ng nhp th `dot file` c load l  `bashrc`.\n\nNote: Khc vi nhng ngi anh em khc, terminal trn Macos s chy `dot file` `.bash_profile` khi bn m mt ca s mi nn ti thng t nhng cu hnh cn thit vo mt file duy nht  l `.bash_profile`. Tt nhin, t `.bash_profile` ta c th load cc `dot file` khc nu cn thit (chng ta s bn v n trong tng lai).\n\nTh t cc `dot file` c khi chy trn macOS:\n\n```ruby\n#=> etc/profile\n#=> etc/bashrc\n#=> ~/.bash_profile\n#=> ~/.bash_login (nu ~/.bash_profile khng tn ti).\n#=> ~/.profile (nu ~/.bash_profile v ~/.bash_login u khng tn ti).\n```\n\n# 4.Cc file quan trng trn Linux\n\nNh  trnh by  trn, c mt s ging nhau ng k gia `macOS` v `Linux`. V vy, ti ch c mt s iu b sung nh sau: Trn Linux, thng thng chng ta s c cc `dot file` sau y:\n\n```ruby\n#=> ~/.bash_login (chy khi login shell)\n#=> ~/.bashrc (chy khi khng login)\n#=> ~/.bash_logout (chy khi logout shell)\n#=> ~/bash_history (lch s trn shell)\n```\n\n# Kt lun\n\nCn rt nhiu iu cn ni v bn lun thm trong cc bi vit tip theo.\n","source":"_posts/2019-01-30-bash-file-in-macos-and-linux.md","raw":"---\ntitle: \"Bash File Trn Unix\"\ndate: 2018-12-30\ndraft: false\ntags: [\"unix\"]\ncategories: [\"h iu hnh\"]\nmytag: \"OS\"\n# mytop: \"TOP VIEWS\"\nmytrend: \"COOL\"\n\n---\n\n# t vn \n\ny li l mt bi vit tip theo v ch  lin quan n cc h iu hnh v dng lnh. Khi mi tip xc vi my tnh, OS m ti s dng l windows, n khi ln i hc, phn ln thi gian hc tp vn gn lin vi windows, cn phn nh thi gian cn li l lm quen vi mt h iu hnh l lm mang tn Linux.\n\nVic ci t phn mm trn Linux c kh khn hn windows mt cht,  l thay v click chut ri next next next next... th phn nhiu cc phn mm phc v cng vic lp trnh u phi ci t qua dng lnh. Mi th khng c vn  g cho n khi vic copy nhng dng lnh  ri enter, bn s khng cn nhn c mt kt qu thnh cng m mn na m thay vo  l mt ng li c tr v.\n\nKhi lm vic vi Ruby, ti  tng gp nhng li lin quan n Rbenv v RVM. iu  thc s l mt cn c mng khi lin tc phi google tm kim cu tr li cho vn  gp phi, copy nhng dng lnh trn stackoverflow paste vo terminal v ch i rng vn  s c gii quyt d chng hiu dng lnh ny c ngha l g. Lu dn ti  tch lu thm c mt s hiu bit mun chia s m bt u l cc File ht thng.\n\n# Lun bn\n\n bt u chia s v nhng file k trn, c l chng ta s phi im qua mt s khi nim c bn.\n\n# 1.Mt s khi nim c bn.\n\n`Unix` l mt h iu hnh ra i  rt lu, n l tin thn ca hai nhnh h iu hnh rt ni ting khc, bn thng mi chnh l `macOS` v bn m ngun m chnh l `GNU`. Cho n nhng nm 90, c mt s kt hp gia cc phn mm ca `GNU` v phn core ca mt d n m ngun m khc tn l `Linux`  to thnh mt h iu hnh hon chnh mang tn l `GNU/Linux`, ngy nay a s chng ta ch thng gi tt l `Linux`\n\nQua  chng ta c th thy, `Linux` v cc h iu hnh con chu ca `Unix` c rt nhiu im chung.\n\n`Shell`: y cng l mt khi nim quan trng cn tm hiu. Trc khi i vo ch  chnh ca bi vit,  tm hiu mt cch su sc v Shell, c l s cn n mt bi vit khc, nn  y ti ch m t mt cch bao qut v n. `Shell` l phn nm gia ng dng v phn core ca h iu hnh.\n\nHy tng tng chng ta c mt chng sch gm ba quyn vi quyn trn cng l nhng ng dng ang chy trn my tnh ca bn v d nh word, excel, cun  di cng chnh l phn nhn ca h iu hnh.  cc ng dng ca bn c th s dng cc ti nguyn ca my tnh nh b nh, ram, IO... iu tt yu phi xy ra  l ng dng ca bn phi giao tip c vi h iu hnh.\n\nTuy nhin, vn  gp phi  l h iu hnh ch hiu m my, mt th qu phc tp  ngi dng khi s dng ng dng c th thao tc c.  l l do ra i ca quyn sch  gia m chng ta gi l `Shell`. Nhim v ca n l g?  l chuyn i cc lnh t quyn sch u tin thnh cc lnh m quyn sch th ba c th hiu v thc hin c (Thng dch).\n\nV d terminal c xem l mt `Shell CLI`, mi khi bn g mt lnh bt k trn terminal, n s chuyn i cu lnh bn vit thnh mt cu lnh khc m phn nhn h iu hnh c th hiu v thc hin c.\n\n# 2.iu g xy ra khi bn g mt lnh trn terminal?\n\n bao gi bn t hi chuyn g s xy ra tip theo khi ta g mt lnh trong terminal? V d:\n\n```ruby\nls -a\n#=> Hin th tt c file v folder nm trong current folder.\n```\n\nChng ta s thng t an i bn thn rng nhng cu lnh   c h iu hnh lu li nh mt cun t in  n khi c gi chng s bit tm cu tr li  u. Thc t suy ngh trn khng hn  sai, mi th trong Unix u l file, nu bn g dng lnh:\n\n```ruby\necho $PATH\n```\n\nKt qu bn nhn c chnh l mt danh sch cc th mc m terminal s tm kim cu lnh bn g theo th t t tri qua phi. Vi mt h iu hnh thun khit cha ci t thm cc phn mm bn ngoi th PATH s c gi tr mc nh nh sau:\n\n`/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin`\n\nCn trn my tnh ca ti th PATH li c gi tr l:\n\n`/Users/admin/.rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin`\n\nC mt s khc bit nh, ta c th thy chui PATH trn my tnh ca ti c phn u chui c thm bi mt th mc .rbenv no . y chnh l mu cht ca vn , l do xut hin ca phn m rng nu trn  l ti  ci t thm Ruby vo my tnh ca mnh bng cng c rbenv.\n\nHin nhin, khi h iu hnh cn thun khit, n khng th hiu c cu lnh `ruby  v`. Vic ci t Ruby vo my tnh ng ngha vi vic ti  ti cc file lin quan vo mt th mc no , v  ch cho terminal bit phi vo u  tm kim cc lnh lin quan n Ruby va ci t, chui PATH s c ghi  b sung thm ng dn vo th mc cha cc file thc thi ca Ruby. T y, mi khi bn g bt c mt cu lnh no lin quan n Ruby, terminal s theo chui PATH vo tng th mc  tm kim v thc thi cu lnh .\n\nSuy ra, c mt li rt hay xy ra cho nhng ngi mi s dng Ruby,  l h thm v xo Ruby kh thng xuyn dn n ng dn b sai v terminal khng th tm c th mc c th thc thi cu lnh mt cch chnh xc.\n\nTrong terminal, bn c th ni thm mt th mc vo chui PATH bng cu lnh sau:\n\n`export PATH=\"$PATH:new_path\"`\n\n# 3.Mt s file quan trng trn Macos.\n\nKhi qu trnh lm vic vi terminal nhiu hn v chng ta cn ci t mt s th cn thit trong qu trnh lm vic, chng ta s dng cc `dot file`. Ni dung ca cc `dot file` ny l cc cu lnh shell script (chc nng ca cu lnh ny c th chng ta s tm hiu sau).\n\nKhi bn m mt terminal m n i hi bn phi login (v d nh khi bn remote access vo mt my tnh khc thng qua SSH, bn cn nhp tn ng nhp v mt khu) th  l mt `Login Shell`.\nVi trng hp Login Shell th `dot file` c load ln l file `.bash_profile`.\nTrong mt trng hp khc, bn m mt terminal m khng cn ng nhp th `dot file` c load l  `bashrc`.\n\nNote: Khc vi nhng ngi anh em khc, terminal trn Macos s chy `dot file` `.bash_profile` khi bn m mt ca s mi nn ti thng t nhng cu hnh cn thit vo mt file duy nht  l `.bash_profile`. Tt nhin, t `.bash_profile` ta c th load cc `dot file` khc nu cn thit (chng ta s bn v n trong tng lai).\n\nTh t cc `dot file` c khi chy trn macOS:\n\n```ruby\n#=> etc/profile\n#=> etc/bashrc\n#=> ~/.bash_profile\n#=> ~/.bash_login (nu ~/.bash_profile khng tn ti).\n#=> ~/.profile (nu ~/.bash_profile v ~/.bash_login u khng tn ti).\n```\n\n# 4.Cc file quan trng trn Linux\n\nNh  trnh by  trn, c mt s ging nhau ng k gia `macOS` v `Linux`. V vy, ti ch c mt s iu b sung nh sau: Trn Linux, thng thng chng ta s c cc `dot file` sau y:\n\n```ruby\n#=> ~/.bash_login (chy khi login shell)\n#=> ~/.bashrc (chy khi khng login)\n#=> ~/.bash_logout (chy khi logout shell)\n#=> ~/bash_history (lch s trn shell)\n```\n\n# Kt lun\n\nCn rt nhiu iu cn ni v bn lun thm trong cc bi vit tip theo.\n","slug":"2019-01-30-bash-file-in-macos-and-linux","published":1,"updated":"2019-11-13T03:59:06.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe1q00068ers0owk9b83","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>y li l mt bi vit tip theo v ch  lin quan n cc h iu hnh v dng lnh. Khi mi tip xc vi my tnh, OS m ti s dng l windows, n khi ln i hc, phn ln thi gian hc tp vn gn lin vi windows, cn phn nh thi gian cn li l lm quen vi mt h iu hnh l lm mang tn Linux.</p>\n<p>Vic ci t phn mm trn Linux c kh khn hn windows mt cht,  l thay v click chut ri next next next next th phn nhiu cc phn mm phc v cng vic lp trnh u phi ci t qua dng lnh. Mi th khng c vn  g cho n khi vic copy nhng dng lnh  ri enter, bn s khng cn nhn c mt kt qu thnh cng m mn na m thay vo  l mt ng li c tr v.</p>\n<p>Khi lm vic vi Ruby, ti  tng gp nhng li lin quan n Rbenv v RVM. iu  thc s l mt cn c mng khi lin tc phi google tm kim cu tr li cho vn  gp phi, copy nhng dng lnh trn stackoverflow paste vo terminal v ch i rng vn  s c gii quyt d chng hiu dng lnh ny c ngha l g. Lu dn ti  tch lu thm c mt s hiu bit mun chia s m bt u l cc File ht thng.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p> bt u chia s v nhng file k trn, c l chng ta s phi im qua mt s khi nim c bn.</p>\n<h1 id=\"1-Mot-so-khai-niem-co-ban\"><a href=\"#1-Mot-so-khai-niem-co-ban\" class=\"headerlink\" title=\"1.Mt s khi nim c bn.\"></a>1.Mt s khi nim c bn.</h1><p><code>Unix</code> l mt h iu hnh ra i  rt lu, n l tin thn ca hai nhnh h iu hnh rt ni ting khc, bn thng mi chnh l <code>macOS</code> v bn m ngun m chnh l <code>GNU</code>. Cho n nhng nm 90, c mt s kt hp gia cc phn mm ca <code>GNU</code> v phn core ca mt d n m ngun m khc tn l <code>Linux</code>  to thnh mt h iu hnh hon chnh mang tn l <code>GNU/Linux</code>, ngy nay a s chng ta ch thng gi tt l <code>Linux</code></p>\n<p>Qua  chng ta c th thy, <code>Linux</code> v cc h iu hnh con chu ca <code>Unix</code> c rt nhiu im chung.</p>\n<p><code>Shell</code>: y cng l mt khi nim quan trng cn tm hiu. Trc khi i vo ch  chnh ca bi vit,  tm hiu mt cch su sc v Shell, c l s cn n mt bi vit khc, nn  y ti ch m t mt cch bao qut v n. <code>Shell</code> l phn nm gia ng dng v phn core ca h iu hnh.</p>\n<p>Hy tng tng chng ta c mt chng sch gm ba quyn vi quyn trn cng l nhng ng dng ang chy trn my tnh ca bn v d nh word, excel, cun  di cng chnh l phn nhn ca h iu hnh.  cc ng dng ca bn c th s dng cc ti nguyn ca my tnh nh b nh, ram, IO iu tt yu phi xy ra  l ng dng ca bn phi giao tip c vi h iu hnh.</p>\n<p>Tuy nhin, vn  gp phi  l h iu hnh ch hiu m my, mt th qu phc tp  ngi dng khi s dng ng dng c th thao tc c.  l l do ra i ca quyn sch  gia m chng ta gi l <code>Shell</code>. Nhim v ca n l g?  l chuyn i cc lnh t quyn sch u tin thnh cc lnh m quyn sch th ba c th hiu v thc hin c (Thng dch).</p>\n<p>V d terminal c xem l mt <code>Shell CLI</code>, mi khi bn g mt lnh bt k trn terminal, n s chuyn i cu lnh bn vit thnh mt cu lnh khc m phn nhn h iu hnh c th hiu v thc hin c.</p>\n<h1 id=\"2-Dieu-gi-xay-ra-khi-ban-go-mot-lenh-tren-terminal\"><a href=\"#2-Dieu-gi-xay-ra-khi-ban-go-mot-lenh-tren-terminal\" class=\"headerlink\" title=\"2.iu g xy ra khi bn g mt lnh trn terminal?\"></a>2.iu g xy ra khi bn g mt lnh trn terminal?</h1><p> bao gi bn t hi chuyn g s xy ra tip theo khi ta g mt lnh trong terminal? V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls -a</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Hin th tt c file v folder nm trong current folder.</span></span><br></pre></td></tr></table></figure>\n\n<p>Chng ta s thng t an i bn thn rng nhng cu lnh   c h iu hnh lu li nh mt cun t in  n khi c gi chng s bit tm cu tr li  u. Thc t suy ngh trn khng hn  sai, mi th trong Unix u l file, nu bn g dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo $PATH</span><br></pre></td></tr></table></figure>\n\n<p>Kt qu bn nhn c chnh l mt danh sch cc th mc m terminal s tm kim cu lnh bn g theo th t t tri qua phi. Vi mt h iu hnh thun khit cha ci t thm cc phn mm bn ngoi th PATH s c gi tr mc nh nh sau:</p>\n<p><code>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code></p>\n<p>Cn trn my tnh ca ti th PATH li c gi tr l:</p>\n<p><code>/Users/admin/.rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code></p>\n<p>C mt s khc bit nh, ta c th thy chui PATH trn my tnh ca ti c phn u chui c thm bi mt th mc .rbenv no . y chnh l mu cht ca vn , l do xut hin ca phn m rng nu trn  l ti  ci t thm Ruby vo my tnh ca mnh bng cng c rbenv.</p>\n<p>Hin nhin, khi h iu hnh cn thun khit, n khng th hiu c cu lnh <code>ruby  v</code>. Vic ci t Ruby vo my tnh ng ngha vi vic ti  ti cc file lin quan vo mt th mc no , v  ch cho terminal bit phi vo u  tm kim cc lnh lin quan n Ruby va ci t, chui PATH s c ghi  b sung thm ng dn vo th mc cha cc file thc thi ca Ruby. T y, mi khi bn g bt c mt cu lnh no lin quan n Ruby, terminal s theo chui PATH vo tng th mc  tm kim v thc thi cu lnh .</p>\n<p>Suy ra, c mt li rt hay xy ra cho nhng ngi mi s dng Ruby,  l h thm v xo Ruby kh thng xuyn dn n ng dn b sai v terminal khng th tm c th mc c th thc thi cu lnh mt cch chnh xc.</p>\n<p>Trong terminal, bn c th ni thm mt th mc vo chui PATH bng cu lnh sau:</p>\n<p><code>export PATH=&quot;$PATH:new_path&quot;</code></p>\n<h1 id=\"3-Mot-so-file-quan-trong-tren-Macos\"><a href=\"#3-Mot-so-file-quan-trong-tren-Macos\" class=\"headerlink\" title=\"3.Mt s file quan trng trn Macos.\"></a>3.Mt s file quan trng trn Macos.</h1><p>Khi qu trnh lm vic vi terminal nhiu hn v chng ta cn ci t mt s th cn thit trong qu trnh lm vic, chng ta s dng cc <code>dot file</code>. Ni dung ca cc <code>dot file</code> ny l cc cu lnh shell script (chc nng ca cu lnh ny c th chng ta s tm hiu sau).</p>\n<p>Khi bn m mt terminal m n i hi bn phi login (v d nh khi bn remote access vo mt my tnh khc thng qua SSH, bn cn nhp tn ng nhp v mt khu) th  l mt <code>Login Shell</code>.<br>Vi trng hp Login Shell th <code>dot file</code> c load ln l file <code>.bash_profile</code>.<br>Trong mt trng hp khc, bn m mt terminal m khng cn ng nhp th <code>dot file</code> c load l  <code>bashrc</code>.</p>\n<p>Note: Khc vi nhng ngi anh em khc, terminal trn Macos s chy <code>dot file</code> <code>.bash_profile</code> khi bn m mt ca s mi nn ti thng t nhng cu hnh cn thit vo mt file duy nht  l <code>.bash_profile</code>. Tt nhin, t <code>.bash_profile</code> ta c th load cc <code>dot file</code> khc nu cn thit (chng ta s bn v n trong tng lai).</p>\n<p>Th t cc <code>dot file</code> c khi chy trn macOS:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#=&gt; etc/profile</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; etc/bashrc</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bash_profile</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bash_login (nu ~/.bash_profile khng tn ti).</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.profile (nu ~/.bash_profile v ~/.bash_login u khng tn ti).</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-Cac-file-quan-trong-tren-Linux\"><a href=\"#4-Cac-file-quan-trong-tren-Linux\" class=\"headerlink\" title=\"4.Cc file quan trng trn Linux\"></a>4.Cc file quan trng trn Linux</h1><p>Nh  trnh by  trn, c mt s ging nhau ng k gia <code>macOS</code> v <code>Linux</code>. V vy, ti ch c mt s iu b sung nh sau: Trn Linux, thng thng chng ta s c cc <code>dot file</code> sau y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bash_login (chy khi login shell)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bashrc (chy khi khng login)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bash_logout (chy khi logout shell)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/bash_history (lch s trn shell)</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Cn rt nhiu iu cn ni v bn lun thm trong cc bi vit tip theo.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>y li l mt bi vit tip theo v ch  lin quan n cc h iu hnh v dng lnh. Khi mi tip xc vi my tnh, OS m ti s dng l windows, n khi ln i hc, phn ln thi gian hc tp vn gn lin vi windows, cn phn nh thi gian cn li l lm quen vi mt h iu hnh l lm mang tn Linux.</p>\n<p>Vic ci t phn mm trn Linux c kh khn hn windows mt cht,  l thay v click chut ri next next next next th phn nhiu cc phn mm phc v cng vic lp trnh u phi ci t qua dng lnh. Mi th khng c vn  g cho n khi vic copy nhng dng lnh  ri enter, bn s khng cn nhn c mt kt qu thnh cng m mn na m thay vo  l mt ng li c tr v.</p>\n<p>Khi lm vic vi Ruby, ti  tng gp nhng li lin quan n Rbenv v RVM. iu  thc s l mt cn c mng khi lin tc phi google tm kim cu tr li cho vn  gp phi, copy nhng dng lnh trn stackoverflow paste vo terminal v ch i rng vn  s c gii quyt d chng hiu dng lnh ny c ngha l g. Lu dn ti  tch lu thm c mt s hiu bit mun chia s m bt u l cc File ht thng.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p> bt u chia s v nhng file k trn, c l chng ta s phi im qua mt s khi nim c bn.</p>\n<h1 id=\"1-Mot-so-khai-niem-co-ban\"><a href=\"#1-Mot-so-khai-niem-co-ban\" class=\"headerlink\" title=\"1.Mt s khi nim c bn.\"></a>1.Mt s khi nim c bn.</h1><p><code>Unix</code> l mt h iu hnh ra i  rt lu, n l tin thn ca hai nhnh h iu hnh rt ni ting khc, bn thng mi chnh l <code>macOS</code> v bn m ngun m chnh l <code>GNU</code>. Cho n nhng nm 90, c mt s kt hp gia cc phn mm ca <code>GNU</code> v phn core ca mt d n m ngun m khc tn l <code>Linux</code>  to thnh mt h iu hnh hon chnh mang tn l <code>GNU/Linux</code>, ngy nay a s chng ta ch thng gi tt l <code>Linux</code></p>\n<p>Qua  chng ta c th thy, <code>Linux</code> v cc h iu hnh con chu ca <code>Unix</code> c rt nhiu im chung.</p>\n<p><code>Shell</code>: y cng l mt khi nim quan trng cn tm hiu. Trc khi i vo ch  chnh ca bi vit,  tm hiu mt cch su sc v Shell, c l s cn n mt bi vit khc, nn  y ti ch m t mt cch bao qut v n. <code>Shell</code> l phn nm gia ng dng v phn core ca h iu hnh.</p>\n<p>Hy tng tng chng ta c mt chng sch gm ba quyn vi quyn trn cng l nhng ng dng ang chy trn my tnh ca bn v d nh word, excel, cun  di cng chnh l phn nhn ca h iu hnh.  cc ng dng ca bn c th s dng cc ti nguyn ca my tnh nh b nh, ram, IO iu tt yu phi xy ra  l ng dng ca bn phi giao tip c vi h iu hnh.</p>\n<p>Tuy nhin, vn  gp phi  l h iu hnh ch hiu m my, mt th qu phc tp  ngi dng khi s dng ng dng c th thao tc c.  l l do ra i ca quyn sch  gia m chng ta gi l <code>Shell</code>. Nhim v ca n l g?  l chuyn i cc lnh t quyn sch u tin thnh cc lnh m quyn sch th ba c th hiu v thc hin c (Thng dch).</p>\n<p>V d terminal c xem l mt <code>Shell CLI</code>, mi khi bn g mt lnh bt k trn terminal, n s chuyn i cu lnh bn vit thnh mt cu lnh khc m phn nhn h iu hnh c th hiu v thc hin c.</p>\n<h1 id=\"2-Dieu-gi-xay-ra-khi-ban-go-mot-lenh-tren-terminal\"><a href=\"#2-Dieu-gi-xay-ra-khi-ban-go-mot-lenh-tren-terminal\" class=\"headerlink\" title=\"2.iu g xy ra khi bn g mt lnh trn terminal?\"></a>2.iu g xy ra khi bn g mt lnh trn terminal?</h1><p> bao gi bn t hi chuyn g s xy ra tip theo khi ta g mt lnh trong terminal? V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls -a</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Hin th tt c file v folder nm trong current folder.</span></span><br></pre></td></tr></table></figure>\n\n<p>Chng ta s thng t an i bn thn rng nhng cu lnh   c h iu hnh lu li nh mt cun t in  n khi c gi chng s bit tm cu tr li  u. Thc t suy ngh trn khng hn  sai, mi th trong Unix u l file, nu bn g dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo $PATH</span><br></pre></td></tr></table></figure>\n\n<p>Kt qu bn nhn c chnh l mt danh sch cc th mc m terminal s tm kim cu lnh bn g theo th t t tri qua phi. Vi mt h iu hnh thun khit cha ci t thm cc phn mm bn ngoi th PATH s c gi tr mc nh nh sau:</p>\n<p><code>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code></p>\n<p>Cn trn my tnh ca ti th PATH li c gi tr l:</p>\n<p><code>/Users/admin/.rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code></p>\n<p>C mt s khc bit nh, ta c th thy chui PATH trn my tnh ca ti c phn u chui c thm bi mt th mc .rbenv no . y chnh l mu cht ca vn , l do xut hin ca phn m rng nu trn  l ti  ci t thm Ruby vo my tnh ca mnh bng cng c rbenv.</p>\n<p>Hin nhin, khi h iu hnh cn thun khit, n khng th hiu c cu lnh <code>ruby  v</code>. Vic ci t Ruby vo my tnh ng ngha vi vic ti  ti cc file lin quan vo mt th mc no , v  ch cho terminal bit phi vo u  tm kim cc lnh lin quan n Ruby va ci t, chui PATH s c ghi  b sung thm ng dn vo th mc cha cc file thc thi ca Ruby. T y, mi khi bn g bt c mt cu lnh no lin quan n Ruby, terminal s theo chui PATH vo tng th mc  tm kim v thc thi cu lnh .</p>\n<p>Suy ra, c mt li rt hay xy ra cho nhng ngi mi s dng Ruby,  l h thm v xo Ruby kh thng xuyn dn n ng dn b sai v terminal khng th tm c th mc c th thc thi cu lnh mt cch chnh xc.</p>\n<p>Trong terminal, bn c th ni thm mt th mc vo chui PATH bng cu lnh sau:</p>\n<p><code>export PATH=&quot;$PATH:new_path&quot;</code></p>\n<h1 id=\"3-Mot-so-file-quan-trong-tren-Macos\"><a href=\"#3-Mot-so-file-quan-trong-tren-Macos\" class=\"headerlink\" title=\"3.Mt s file quan trng trn Macos.\"></a>3.Mt s file quan trng trn Macos.</h1><p>Khi qu trnh lm vic vi terminal nhiu hn v chng ta cn ci t mt s th cn thit trong qu trnh lm vic, chng ta s dng cc <code>dot file</code>. Ni dung ca cc <code>dot file</code> ny l cc cu lnh shell script (chc nng ca cu lnh ny c th chng ta s tm hiu sau).</p>\n<p>Khi bn m mt terminal m n i hi bn phi login (v d nh khi bn remote access vo mt my tnh khc thng qua SSH, bn cn nhp tn ng nhp v mt khu) th  l mt <code>Login Shell</code>.<br>Vi trng hp Login Shell th <code>dot file</code> c load ln l file <code>.bash_profile</code>.<br>Trong mt trng hp khc, bn m mt terminal m khng cn ng nhp th <code>dot file</code> c load l  <code>bashrc</code>.</p>\n<p>Note: Khc vi nhng ngi anh em khc, terminal trn Macos s chy <code>dot file</code> <code>.bash_profile</code> khi bn m mt ca s mi nn ti thng t nhng cu hnh cn thit vo mt file duy nht  l <code>.bash_profile</code>. Tt nhin, t <code>.bash_profile</code> ta c th load cc <code>dot file</code> khc nu cn thit (chng ta s bn v n trong tng lai).</p>\n<p>Th t cc <code>dot file</code> c khi chy trn macOS:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#=&gt; etc/profile</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; etc/bashrc</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bash_profile</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bash_login (nu ~/.bash_profile khng tn ti).</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.profile (nu ~/.bash_profile v ~/.bash_login u khng tn ti).</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-Cac-file-quan-trong-tren-Linux\"><a href=\"#4-Cac-file-quan-trong-tren-Linux\" class=\"headerlink\" title=\"4.Cc file quan trng trn Linux\"></a>4.Cc file quan trng trn Linux</h1><p>Nh  trnh by  trn, c mt s ging nhau ng k gia <code>macOS</code> v <code>Linux</code>. V vy, ti ch c mt s iu b sung nh sau: Trn Linux, thng thng chng ta s c cc <code>dot file</code> sau y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bash_login (chy khi login shell)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bashrc (chy khi khng login)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/.bash_logout (chy khi logout shell)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; ~/bash_history (lch s trn shell)</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Cn rt nhiu iu cn ni v bn lun thm trong cc bi vit tip theo.</p>\n"},{"title":"Pass Reference Vs Pass Value, Ruby!","date":"2019-02-18T17:00:00.000Z","draft":false,"mytag":"Ruby","mytrend":"COOL","_content":"\n# t vn \n\nCh  bi vit ngy hm nay vn  c khi gi m h trong ti t rt lu, nh khng nhm th  l t ngy hc mn nhp mn lp trnh ti trng KHTN, ging vin c ni lt qua v khi nim ny, n thun ch l lt qua thi,v d rng c i su vo hn na th sinh vin cng ch t ng gc. Thong ci  5,6 nm tri qua, gi ngi y khi ang chun b tht nghip, ti c hng th tm li cm gic thanh xun ni ging ng bng cch m mm li ci ch  m ngy xa ti tng hc (m hiu cha tinh tng), ri cng tng tr li khi i phng vn (m ngi phng vn cng ch hi qua). i chao! sao au u n th nh? nh lm mt bi vit y , tng minh m c qu nhiu th cn phi nghim ngm li, t phm g ri b th khng n, m vit th cng cha an tm ci mnh ni l ng, vy ti la chn cch n gin hn,  l vit mt s hiu bit ban u, nh nhng vo du dng, cn hardcore xin hn 1 ngy khc.\n\n# Lun bn\n\n# 1. Mt s  m ti c th chc chn m chng ta phi lm r nh sau:\n\n1. Khng c mt nh ngha chung no v `pass by value` v `pass by reference`, tu thuc vo tng ngn ng, chng li c cch x l v nhng nh ngha khc nhau v cch x l bin v vng nh.\n\n2. `Pass value`: Hiu mt cch n gin nht,  l khi bin bn truyn vo mt method no , d trong  logic l g v n h hip ci bin bn b vo ra lm sao, th khi ra ngoi hm , bin bn  truyn  trn vn cn nguyn seal, nguyn kin, khng h si nh (khng h thay i v gi tr).\n\n3. `Pass reference`: ngc li vi s t t trong `Pass value`, khi bn quyt nh truyn tham s di dng mt reference, ng ngha vi vic bn chp nhn rng ci bin b bng, yu t xinh xinh ca bn s tha h b logic trong hm hnh h, v khi ra khi hng n vn mang y  thng tch  b gy ra trong hm (gi tr bin truyn vo s b thay i theo logic trong hm).\n\nNote: khi cn i hc, ti  c mt s nhm ln v value v reference trong C, khi  ti  ngh truyn tn bin bnh thng thi l `Pass value`, cn truyn con tr l `Pass reference`. Nhng thc ra  l khng ng.\n\n```\nThe C language is pass-by-value without exception.\nPassing a pointer as a parameter does not mean pass-by-reference.\n```\n\n# 2. Pass value v reference trong ruby\n\n| Qua thi gian tm hiu th ti nhn thy rng trong ruby khng h c khi nim r rng v reference hay value, nn mi kt lun  y ch l mang tnh quy chiu da vo nhng  chng ta  ni trong mc 1.\n\nXem v d sau y:\n\n```ruby\ndef xinchao(a)\n  a = \"Nguyen Van A\"\nend\n\ntemp = \"Nguyen Van B\"\n\nputs \"Kq: Xin Chao #{xinchao(temp)}\"\n\n#=> \"Kq: Xin Chao Nguyen Van A\"\n```\n\nT v d trn ta c th rt ra kt lun l ruby `Pass reference`? V nh bn  thy kt qu l \"Nguyen Van A\", gi tr m chng ta gn trong hm `xinchao`.\n\nCu tr li l khng, y l mt v d cm by nu ta khng cn thn, khc vi mt s ngn ng khc bt buc phi s dng `return`  tr v kt qu trong function, ruby cho php ta s dng gi tr cui cng bn vit ra trong function . Tc kt qu tr v trn n gin l kt qu thc hin ca function xinchao, ch cn vic bin temp c thay i gi tr hay khng th chng ta phi thay th li mt cht nh di y  kim chng:\n\n```ruby\ndef xinchao(a)\n  a = \"Nguyen Van A\"\nend\n\ntemp = \"Nguyen Van B\"\n\nxinchao(temp)\n\nputs \"Kq: Xin Chao #{temp}\"\n\n#=> \"Kq: Xin Chao Nguyen Van B\"\n```\n\nOh, vy ruby l `Pass by value`? ng, nh  tng  cp, ruby khng c 1 nh ngha thun tu no v hai khi nim m chng ta ang tho lun, nn da trn nhng  chnh m chng ta  thng nht trong mc 1, ta c th gi Ruby l 1 mt ngn ng `Pass by value`.\n\nVy c trng hp ngoi l no khng? Nh C++ c c `Pass by value` v `Pass by reference`  thi? Cu tr li vn li l khng, tht tic,  n gin l s nh hng ca cha  ca tng loi ngn ng.\n\n# Kt lun\n\niu cn nh sau bi vit ny chnh l vic hiu khi qut v `Pass by value` v `Pass by reference`, mt cch tng qut, cn chi tit bn trong phi cn nhiu bi na mi c th lm r c vn .\n","source":"_posts/2019-02-19-truyen-tham-tri-va-truyen-tham-chieu.md","raw":"---\ntitle: \"Pass Reference Vs Pass Value, Ruby!\"\ndate: 2019-02-19\ndraft: false\ntags: [\"programming\", \"ruby\"]\ncategories: [\"ruby notes\", \"programming\"]\nmytag: \"Ruby\"\nmytrend: \"COOL\"\n---\n\n# t vn \n\nCh  bi vit ngy hm nay vn  c khi gi m h trong ti t rt lu, nh khng nhm th  l t ngy hc mn nhp mn lp trnh ti trng KHTN, ging vin c ni lt qua v khi nim ny, n thun ch l lt qua thi,v d rng c i su vo hn na th sinh vin cng ch t ng gc. Thong ci  5,6 nm tri qua, gi ngi y khi ang chun b tht nghip, ti c hng th tm li cm gic thanh xun ni ging ng bng cch m mm li ci ch  m ngy xa ti tng hc (m hiu cha tinh tng), ri cng tng tr li khi i phng vn (m ngi phng vn cng ch hi qua). i chao! sao au u n th nh? nh lm mt bi vit y , tng minh m c qu nhiu th cn phi nghim ngm li, t phm g ri b th khng n, m vit th cng cha an tm ci mnh ni l ng, vy ti la chn cch n gin hn,  l vit mt s hiu bit ban u, nh nhng vo du dng, cn hardcore xin hn 1 ngy khc.\n\n# Lun bn\n\n# 1. Mt s  m ti c th chc chn m chng ta phi lm r nh sau:\n\n1. Khng c mt nh ngha chung no v `pass by value` v `pass by reference`, tu thuc vo tng ngn ng, chng li c cch x l v nhng nh ngha khc nhau v cch x l bin v vng nh.\n\n2. `Pass value`: Hiu mt cch n gin nht,  l khi bin bn truyn vo mt method no , d trong  logic l g v n h hip ci bin bn b vo ra lm sao, th khi ra ngoi hm , bin bn  truyn  trn vn cn nguyn seal, nguyn kin, khng h si nh (khng h thay i v gi tr).\n\n3. `Pass reference`: ngc li vi s t t trong `Pass value`, khi bn quyt nh truyn tham s di dng mt reference, ng ngha vi vic bn chp nhn rng ci bin b bng, yu t xinh xinh ca bn s tha h b logic trong hm hnh h, v khi ra khi hng n vn mang y  thng tch  b gy ra trong hm (gi tr bin truyn vo s b thay i theo logic trong hm).\n\nNote: khi cn i hc, ti  c mt s nhm ln v value v reference trong C, khi  ti  ngh truyn tn bin bnh thng thi l `Pass value`, cn truyn con tr l `Pass reference`. Nhng thc ra  l khng ng.\n\n```\nThe C language is pass-by-value without exception.\nPassing a pointer as a parameter does not mean pass-by-reference.\n```\n\n# 2. Pass value v reference trong ruby\n\n| Qua thi gian tm hiu th ti nhn thy rng trong ruby khng h c khi nim r rng v reference hay value, nn mi kt lun  y ch l mang tnh quy chiu da vo nhng  chng ta  ni trong mc 1.\n\nXem v d sau y:\n\n```ruby\ndef xinchao(a)\n  a = \"Nguyen Van A\"\nend\n\ntemp = \"Nguyen Van B\"\n\nputs \"Kq: Xin Chao #{xinchao(temp)}\"\n\n#=> \"Kq: Xin Chao Nguyen Van A\"\n```\n\nT v d trn ta c th rt ra kt lun l ruby `Pass reference`? V nh bn  thy kt qu l \"Nguyen Van A\", gi tr m chng ta gn trong hm `xinchao`.\n\nCu tr li l khng, y l mt v d cm by nu ta khng cn thn, khc vi mt s ngn ng khc bt buc phi s dng `return`  tr v kt qu trong function, ruby cho php ta s dng gi tr cui cng bn vit ra trong function . Tc kt qu tr v trn n gin l kt qu thc hin ca function xinchao, ch cn vic bin temp c thay i gi tr hay khng th chng ta phi thay th li mt cht nh di y  kim chng:\n\n```ruby\ndef xinchao(a)\n  a = \"Nguyen Van A\"\nend\n\ntemp = \"Nguyen Van B\"\n\nxinchao(temp)\n\nputs \"Kq: Xin Chao #{temp}\"\n\n#=> \"Kq: Xin Chao Nguyen Van B\"\n```\n\nOh, vy ruby l `Pass by value`? ng, nh  tng  cp, ruby khng c 1 nh ngha thun tu no v hai khi nim m chng ta ang tho lun, nn da trn nhng  chnh m chng ta  thng nht trong mc 1, ta c th gi Ruby l 1 mt ngn ng `Pass by value`.\n\nVy c trng hp ngoi l no khng? Nh C++ c c `Pass by value` v `Pass by reference`  thi? Cu tr li vn li l khng, tht tic,  n gin l s nh hng ca cha  ca tng loi ngn ng.\n\n# Kt lun\n\niu cn nh sau bi vit ny chnh l vic hiu khi qut v `Pass by value` v `Pass by reference`, mt cch tng qut, cn chi tit bn trong phi cn nhiu bi na mi c th lm r c vn .\n","slug":"2019-02-19-truyen-tham-tri-va-truyen-tham-chieu","published":1,"updated":"2019-11-13T04:00:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe1t00078ers78zu9994","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Ch  bi vit ngy hm nay vn  c khi gi m h trong ti t rt lu, nh khng nhm th  l t ngy hc mn nhp mn lp trnh ti trng KHTN, ging vin c ni lt qua v khi nim ny, n thun ch l lt qua thi,v d rng c i su vo hn na th sinh vin cng ch t ng gc. Thong ci  5,6 nm tri qua, gi ngi y khi ang chun b tht nghip, ti c hng th tm li cm gic thanh xun ni ging ng bng cch m mm li ci ch  m ngy xa ti tng hc (m hiu cha tinh tng), ri cng tng tr li khi i phng vn (m ngi phng vn cng ch hi qua). i chao! sao au u n th nh? nh lm mt bi vit y , tng minh m c qu nhiu th cn phi nghim ngm li, t phm g ri b th khng n, m vit th cng cha an tm ci mnh ni l ng, vy ti la chn cch n gin hn,  l vit mt s hiu bit ban u, nh nhng vo du dng, cn hardcore xin hn 1 ngy khc.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Mot-so-y-ma-toi-co-the-chac-chan-ma-chung-ta-phai-lam-ro-nhu-sau\"><a href=\"#1-Mot-so-y-ma-toi-co-the-chac-chan-ma-chung-ta-phai-lam-ro-nhu-sau\" class=\"headerlink\" title=\"1. Mt s  m ti c th chc chn m chng ta phi lm r nh sau:\"></a>1. Mt s  m ti c th chc chn m chng ta phi lm r nh sau:</h1><ol>\n<li><p>Khng c mt nh ngha chung no v <code>pass by value</code> v <code>pass by reference</code>, tu thuc vo tng ngn ng, chng li c cch x l v nhng nh ngha khc nhau v cch x l bin v vng nh.</p>\n</li>\n<li><p><code>Pass value</code>: Hiu mt cch n gin nht,  l khi bin bn truyn vo mt method no , d trong  logic l g v n h hip ci bin bn b vo ra lm sao, th khi ra ngoi hm , bin bn  truyn  trn vn cn nguyn seal, nguyn kin, khng h si nh (khng h thay i v gi tr).</p>\n</li>\n<li><p><code>Pass reference</code>: ngc li vi s t t trong <code>Pass value</code>, khi bn quyt nh truyn tham s di dng mt reference, ng ngha vi vic bn chp nhn rng ci bin b bng, yu t xinh xinh ca bn s tha h b logic trong hm hnh h, v khi ra khi hng n vn mang y  thng tch  b gy ra trong hm (gi tr bin truyn vo s b thay i theo logic trong hm).</p>\n</li>\n</ol>\n<p>Note: khi cn i hc, ti  c mt s nhm ln v value v reference trong C, khi  ti  ngh truyn tn bin bnh thng thi l <code>Pass value</code>, cn truyn con tr l <code>Pass reference</code>. Nhng thc ra  l khng ng.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The C language is pass-by-value without exception.</span><br><span class=\"line\">Passing a pointer as a parameter does not mean pass-by-reference.</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2-Pass-value-va-reference-trong-ruby\"><a href=\"#2-Pass-value-va-reference-trong-ruby\" class=\"headerlink\" title=\"2. Pass value v reference trong ruby\"></a>2. Pass value v reference trong ruby</h1><p>| Qua thi gian tm hiu th ti nhn thy rng trong ruby khng h c khi nim r rng v reference hay value, nn mi kt lun  y ch l mang tnh quy chiu da vo nhng  chng ta  ni trong mc 1.</p>\n<p>Xem v d sau y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xinchao</span><span class=\"params\">(a)</span></span></span><br><span class=\"line\">  a = <span class=\"string\">\"Nguyen Van A\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = <span class=\"string\">\"Nguyen Van B\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Kq: Xin Chao <span class=\"subst\">#&#123;xinchao(temp)&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#=&gt; \"Kq: Xin Chao Nguyen Van A\"</span></span><br></pre></td></tr></table></figure>\n\n<p>T v d trn ta c th rt ra kt lun l ruby <code>Pass reference</code>? V nh bn  thy kt qu l Nguyen Van A, gi tr m chng ta gn trong hm <code>xinchao</code>.</p>\n<p>Cu tr li l khng, y l mt v d cm by nu ta khng cn thn, khc vi mt s ngn ng khc bt buc phi s dng <code>return</code>  tr v kt qu trong function, ruby cho php ta s dng gi tr cui cng bn vit ra trong function . Tc kt qu tr v trn n gin l kt qu thc hin ca function xinchao, ch cn vic bin temp c thay i gi tr hay khng th chng ta phi thay th li mt cht nh di y  kim chng:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xinchao</span><span class=\"params\">(a)</span></span></span><br><span class=\"line\">  a = <span class=\"string\">\"Nguyen Van A\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = <span class=\"string\">\"Nguyen Van B\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">xinchao(temp)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Kq: Xin Chao <span class=\"subst\">#&#123;temp&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#=&gt; \"Kq: Xin Chao Nguyen Van B\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Oh, vy ruby l <code>Pass by value</code>? ng, nh  tng  cp, ruby khng c 1 nh ngha thun tu no v hai khi nim m chng ta ang tho lun, nn da trn nhng  chnh m chng ta  thng nht trong mc 1, ta c th gi Ruby l 1 mt ngn ng <code>Pass by value</code>.</p>\n<p>Vy c trng hp ngoi l no khng? Nh C++ c c <code>Pass by value</code> v <code>Pass by reference</code>  thi? Cu tr li vn li l khng, tht tic,  n gin l s nh hng ca cha  ca tng loi ngn ng.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>iu cn nh sau bi vit ny chnh l vic hiu khi qut v <code>Pass by value</code> v <code>Pass by reference</code>, mt cch tng qut, cn chi tit bn trong phi cn nhiu bi na mi c th lm r c vn .</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Ch  bi vit ngy hm nay vn  c khi gi m h trong ti t rt lu, nh khng nhm th  l t ngy hc mn nhp mn lp trnh ti trng KHTN, ging vin c ni lt qua v khi nim ny, n thun ch l lt qua thi,v d rng c i su vo hn na th sinh vin cng ch t ng gc. Thong ci  5,6 nm tri qua, gi ngi y khi ang chun b tht nghip, ti c hng th tm li cm gic thanh xun ni ging ng bng cch m mm li ci ch  m ngy xa ti tng hc (m hiu cha tinh tng), ri cng tng tr li khi i phng vn (m ngi phng vn cng ch hi qua). i chao! sao au u n th nh? nh lm mt bi vit y , tng minh m c qu nhiu th cn phi nghim ngm li, t phm g ri b th khng n, m vit th cng cha an tm ci mnh ni l ng, vy ti la chn cch n gin hn,  l vit mt s hiu bit ban u, nh nhng vo du dng, cn hardcore xin hn 1 ngy khc.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Mot-so-y-ma-toi-co-the-chac-chan-ma-chung-ta-phai-lam-ro-nhu-sau\"><a href=\"#1-Mot-so-y-ma-toi-co-the-chac-chan-ma-chung-ta-phai-lam-ro-nhu-sau\" class=\"headerlink\" title=\"1. Mt s  m ti c th chc chn m chng ta phi lm r nh sau:\"></a>1. Mt s  m ti c th chc chn m chng ta phi lm r nh sau:</h1><ol>\n<li><p>Khng c mt nh ngha chung no v <code>pass by value</code> v <code>pass by reference</code>, tu thuc vo tng ngn ng, chng li c cch x l v nhng nh ngha khc nhau v cch x l bin v vng nh.</p>\n</li>\n<li><p><code>Pass value</code>: Hiu mt cch n gin nht,  l khi bin bn truyn vo mt method no , d trong  logic l g v n h hip ci bin bn b vo ra lm sao, th khi ra ngoi hm , bin bn  truyn  trn vn cn nguyn seal, nguyn kin, khng h si nh (khng h thay i v gi tr).</p>\n</li>\n<li><p><code>Pass reference</code>: ngc li vi s t t trong <code>Pass value</code>, khi bn quyt nh truyn tham s di dng mt reference, ng ngha vi vic bn chp nhn rng ci bin b bng, yu t xinh xinh ca bn s tha h b logic trong hm hnh h, v khi ra khi hng n vn mang y  thng tch  b gy ra trong hm (gi tr bin truyn vo s b thay i theo logic trong hm).</p>\n</li>\n</ol>\n<p>Note: khi cn i hc, ti  c mt s nhm ln v value v reference trong C, khi  ti  ngh truyn tn bin bnh thng thi l <code>Pass value</code>, cn truyn con tr l <code>Pass reference</code>. Nhng thc ra  l khng ng.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The C language is pass-by-value without exception.</span><br><span class=\"line\">Passing a pointer as a parameter does not mean pass-by-reference.</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2-Pass-value-va-reference-trong-ruby\"><a href=\"#2-Pass-value-va-reference-trong-ruby\" class=\"headerlink\" title=\"2. Pass value v reference trong ruby\"></a>2. Pass value v reference trong ruby</h1><p>| Qua thi gian tm hiu th ti nhn thy rng trong ruby khng h c khi nim r rng v reference hay value, nn mi kt lun  y ch l mang tnh quy chiu da vo nhng  chng ta  ni trong mc 1.</p>\n<p>Xem v d sau y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xinchao</span><span class=\"params\">(a)</span></span></span><br><span class=\"line\">  a = <span class=\"string\">\"Nguyen Van A\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = <span class=\"string\">\"Nguyen Van B\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Kq: Xin Chao <span class=\"subst\">#&#123;xinchao(temp)&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#=&gt; \"Kq: Xin Chao Nguyen Van A\"</span></span><br></pre></td></tr></table></figure>\n\n<p>T v d trn ta c th rt ra kt lun l ruby <code>Pass reference</code>? V nh bn  thy kt qu l Nguyen Van A, gi tr m chng ta gn trong hm <code>xinchao</code>.</p>\n<p>Cu tr li l khng, y l mt v d cm by nu ta khng cn thn, khc vi mt s ngn ng khc bt buc phi s dng <code>return</code>  tr v kt qu trong function, ruby cho php ta s dng gi tr cui cng bn vit ra trong function . Tc kt qu tr v trn n gin l kt qu thc hin ca function xinchao, ch cn vic bin temp c thay i gi tr hay khng th chng ta phi thay th li mt cht nh di y  kim chng:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xinchao</span><span class=\"params\">(a)</span></span></span><br><span class=\"line\">  a = <span class=\"string\">\"Nguyen Van A\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = <span class=\"string\">\"Nguyen Van B\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">xinchao(temp)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Kq: Xin Chao <span class=\"subst\">#&#123;temp&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#=&gt; \"Kq: Xin Chao Nguyen Van B\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Oh, vy ruby l <code>Pass by value</code>? ng, nh  tng  cp, ruby khng c 1 nh ngha thun tu no v hai khi nim m chng ta ang tho lun, nn da trn nhng  chnh m chng ta  thng nht trong mc 1, ta c th gi Ruby l 1 mt ngn ng <code>Pass by value</code>.</p>\n<p>Vy c trng hp ngoi l no khng? Nh C++ c c <code>Pass by value</code> v <code>Pass by reference</code>  thi? Cu tr li vn li l khng, tht tic,  n gin l s nh hng ca cha  ca tng loi ngn ng.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>iu cn nh sau bi vit ny chnh l vic hiu khi qut v <code>Pass by value</code> v <code>Pass by reference</code>, mt cch tng qut, cn chi tit bn trong phi cn nhiu bi na mi c th lm r c vn .</p>\n"},{"title":"Root, Sudo V Package Management","date":"2019-02-04T17:00:00.000Z","draft":false,"mytag":"OS","mytrend":"COOL","_content":"\n# t vn \n\nTrong mt bi vit gn y v ch  file permission trn Unix/Linux, ti c  cp n mt ngi dng quyn lc trn cc h thng k trn c tn gi l `root`. Bi vit ny s khi qut v ngi dng ny km theo hai khi nim c lin quan l `sudo` v `Package Management System`.\n\n# Lun bn\n\n# 1.Root\n\nXin c nhc li mt cu chuyn c ti  k trong bi vit trc vi v d v mnh t nh bn, bn s hu mnh t , v bn s hu mnh t  chung vi bn. Nhng v chng bn khng phi l nhng ngi s hu ti thng ca mnh t k trn, m quyn lc to ln ny thuc v nh nc, ngi thc ra l ang cho bn thu t c thi hn. Tng t trng Unix/Linux, s c nhng user (nh ti khon bn s dng  ng nhp, hoc ti khon khch).\n\nVic nhng ti khon ny c th ng nhp vo h thng nhng c quyn ca chng b gii hn. Khi login vo h thng, bn c th lm mt s tc v nht nh ch khng th thch lm g th lm, trong h thng ca bn ch c mt user duy nht c quyn lm bt c iu g,  l mt super user.\n\nTrn windows, ta gi  l `administrator` (c l qu quen thuc, bn cn nh nhng lc ci phn mm, bn click vo file exe nhng chng trnh khng chu ci t, google mt lt, bn nhn c mt hng dn hy click phi vo file exe  v chn `run as administrator`,  chnh l sc mnh ca super user trn windows), cn trn macOS hay Ubuntu(1 i din ca Linux), n c gi l `root` (cui cng cng ch l mt ci tn gi, n c th c t tn l mo, l ch, n c th c t tn l bt c th g, chng ta khng cn quan tm, iu duy nht chng ta cn bit  l trn cc h iu hnh con chu ca Unix s lun c mt super user quyn lc nh vy).\n\nn lc ny, bn s t hi ti sao phi thit k h thng phc tp nh vy? Ti sao khng ch dung duy nht mt loi user?\nCu tr li rt n gin, khng phi ai s dng my tnh cng l nhng ngi dung c hiu bit su sc v h iu hnh. V vy, nu trao cho h nhng quyn lc qu ln, h c th v tnh gy ra nhng hu hoi nghim trng cho h thng (quyn lc cng ln th trch nhim cng ln).\n\nMt vn  pht sinh nu vic s dng Root mang tnh ri ro qu cao nhng nhng user bnh thng li khng c cc quyn  ci t mt s phn mm nng cao th phi lm sao? Vn  ny s c gii thch  mc s 2.\n\nNote: Trn macOS v Ubuntu, `root` mc nh s c disable, chng c th s c enable tr li v re-disable. Cch thc hin th c l bn nn tm kim hng dn t trang ch ca nhng h iu hnh ny  cu lnh ca bn m bo chnh xc v khng b li thi.\n\n# 2.Sudo\n\nNh vn  ti  nu  cui mc 1, by gi ti mun ci t mt s phn mm i hi quyn ca super user, v l thuyt ti ng gia hai la chn hoc chuyn sang `root` v ci t phn mm bnh thng (rt ri ro), phng n 2 l ti vn s dng user thng v ni li tm bit vi nhng phn mm k trn.\n\nQu t, c hai gii php trn u khng n, tht may, cc nh pht trin h thng  cung cp cho chng ta mt la chn s 3,  l bn vn s dng user thng nhng c th triu hi quyn lc ca super user  thc hin nhng lnh no .\n\nCch s dng  l bn thm cu lnh `sudo` vo pha trc cu lnh cn s dng quyn ca super user. V d:\n\n`sudo apt-get update`\n\nMt nhm ln thng xuyn vi c vi ti ngy mi tm hiu,  l sau khi g nhng cu lnh c `sudo`, h thng yu cu ti nhp mt khu v ti  tng ngh  l mt khu ca `root` (nghe cng hp l y ch, ta mn quyn ca `root` th phi s dng mt khu ca `root` ch nh? Ging nh khi ti mn nh ca bn th ti phi c cha kho ca bn). Nhng khng phi nh vy, mt khu bn nhp vo n thun l chnh mt khu ca user thng bn ang login trn my.\n\nPhn a cc trng hp khi bn thm `sudo`, cc cu lnh s chy mt cch hon ho. Tuy nhin, cng c nhng khi bn khng nhn c kt qu nh mong i v l do chnh l khng phi user no cng c th triu hi quyn lc ca super user. iu bn cn lm khi  l \"ni\" vi h iu hnh rng hy cho user ca ti ang s dng c quyn triu hi sc mnh ca super user. Hy xem v d di y:\n\n```ruby\n#=> /etc/sudoers (lu tr cc user c quyn thc hin c quyn ca super user)\n#=> V d\nroot ALL=(ALL:ALL) ALL\n#=> user ang xt quyn tn l root\n#=> Ch all u tin ch ra rng rule ny c p dng cho tt c cc host\n#=> Ch all th hai ch ra, account root c th chy lnh vi quyn ca bt k user no.\n#=> Ch all th ba ch ra, account root c th chy lnh vi quyn ca bt k group no.\n#=> Ch all cui cng ch ra, account root c th chy bt k command no.\n```\n\nNote: K t khi bn nhp mt khu sau khi g lnh `sudo` ln u, thi gian c hiu lc ca mt khu ny s l 15 pht. Trong khong thi gian  bn c th chy cc lnh `sudo` khc m h iu hnh khng yu cu bn nhp li mt khu.\n\n\n# 3.Package management system\n\nKhi s dng macOS,  ci t thm cc phn mm phc v cng vic (m chng khng c support trn appstore), ti s dng `homebrew`, mt phn mm gip qun l cc phn mm khc rt hiu qu.\n\nVy cn trn Linux chng ta c g?\n\nTrc ht cn phi lm r: Package management system l mt cng c hoc mt h thng cc cng c c s dng  handle cc package.\n1.\tHandle l qun l vi y  cc chc nng nh thm mi, g b, nng cp, tm kim..v..v\n2.\tPackage l mt tin ch hoc nhng phn b tr cho mt tin ch no  (thc s cui cng n cng ch l tp hp ca cc file).\n\nMt `Package Management System` ni ting trn Linux  l `DPKG`, n l mt cng c  ci t cc package c ui .deb (cc package dnh cho cc h iu hnh thuc dng debian).\nNhim v ca `DPKG` l install hoc remove mt package (vi iu kin cc file cn thit  c trn local).\n\nn y nhiu bn c th thc mc rng t trc n gi bn cha h s dng cc dng lnh lin quan n `DPKG`, vy ti sao ti li bo l n rt ph bin? Cu tr li  l bn ang s dng cc phn mm package management system khc c xy dng da trn phn core l `DPKG`, mt trong s  l `APTGET/APT`.\n\nu im ln nht ca `APT` so vi `DPKG`  l `DPKG` ch c th ci t file khi m file   c trn local (tc l bng cch no  bn phi download hoc copy file  v my ca bn). Cn vi `APT`, n s tm kim cc package  t `remote repositories`, sau  download chng v my.\n\nim mnh th hai ca `APT` so vi `DPKG`  l n gii quyt c bi ton dependencies. Nu package bn cn ci t ph thuc vo mt vi package khc, nu s dng `DPKG` th bn s phi ci t tt c cc package k trn mt cch th cng.\nCn vi `APT`, n s t hiu c package  cn thm nhng ph tr no v t ng ci t phn ph tr.\n\niu tht s din ra  l trong `APT`, `DPKG` vn tn ti. N tn ti  mt cp thp hn v thc hin cc ch th ca `APT`.\n\nNote: Cc `remote repositories`  phn mm package management ca bn tm kim s c lu tr trong file `/etc/apt/sources.list` (a s l nh vy).\n\n# Kt lun\n\nCn rt nhiu iu cn ni v bn lun thm trong cc bi vit tip theo.\n","source":"_posts/2019-02-05-root-sudo-and-package-management-system.md","raw":"---\ntitle: \"Root, Sudo V Package Management\"\ndate: 2019-02-05\ndraft: false\ntags: [\"unix\"]\ncategories: [\"h iu hnh\"]\nmytag: \"OS\"\nmytrend: \"COOL\"\n---\n\n# t vn \n\nTrong mt bi vit gn y v ch  file permission trn Unix/Linux, ti c  cp n mt ngi dng quyn lc trn cc h thng k trn c tn gi l `root`. Bi vit ny s khi qut v ngi dng ny km theo hai khi nim c lin quan l `sudo` v `Package Management System`.\n\n# Lun bn\n\n# 1.Root\n\nXin c nhc li mt cu chuyn c ti  k trong bi vit trc vi v d v mnh t nh bn, bn s hu mnh t , v bn s hu mnh t  chung vi bn. Nhng v chng bn khng phi l nhng ngi s hu ti thng ca mnh t k trn, m quyn lc to ln ny thuc v nh nc, ngi thc ra l ang cho bn thu t c thi hn. Tng t trng Unix/Linux, s c nhng user (nh ti khon bn s dng  ng nhp, hoc ti khon khch).\n\nVic nhng ti khon ny c th ng nhp vo h thng nhng c quyn ca chng b gii hn. Khi login vo h thng, bn c th lm mt s tc v nht nh ch khng th thch lm g th lm, trong h thng ca bn ch c mt user duy nht c quyn lm bt c iu g,  l mt super user.\n\nTrn windows, ta gi  l `administrator` (c l qu quen thuc, bn cn nh nhng lc ci phn mm, bn click vo file exe nhng chng trnh khng chu ci t, google mt lt, bn nhn c mt hng dn hy click phi vo file exe  v chn `run as administrator`,  chnh l sc mnh ca super user trn windows), cn trn macOS hay Ubuntu(1 i din ca Linux), n c gi l `root` (cui cng cng ch l mt ci tn gi, n c th c t tn l mo, l ch, n c th c t tn l bt c th g, chng ta khng cn quan tm, iu duy nht chng ta cn bit  l trn cc h iu hnh con chu ca Unix s lun c mt super user quyn lc nh vy).\n\nn lc ny, bn s t hi ti sao phi thit k h thng phc tp nh vy? Ti sao khng ch dung duy nht mt loi user?\nCu tr li rt n gin, khng phi ai s dng my tnh cng l nhng ngi dung c hiu bit su sc v h iu hnh. V vy, nu trao cho h nhng quyn lc qu ln, h c th v tnh gy ra nhng hu hoi nghim trng cho h thng (quyn lc cng ln th trch nhim cng ln).\n\nMt vn  pht sinh nu vic s dng Root mang tnh ri ro qu cao nhng nhng user bnh thng li khng c cc quyn  ci t mt s phn mm nng cao th phi lm sao? Vn  ny s c gii thch  mc s 2.\n\nNote: Trn macOS v Ubuntu, `root` mc nh s c disable, chng c th s c enable tr li v re-disable. Cch thc hin th c l bn nn tm kim hng dn t trang ch ca nhng h iu hnh ny  cu lnh ca bn m bo chnh xc v khng b li thi.\n\n# 2.Sudo\n\nNh vn  ti  nu  cui mc 1, by gi ti mun ci t mt s phn mm i hi quyn ca super user, v l thuyt ti ng gia hai la chn hoc chuyn sang `root` v ci t phn mm bnh thng (rt ri ro), phng n 2 l ti vn s dng user thng v ni li tm bit vi nhng phn mm k trn.\n\nQu t, c hai gii php trn u khng n, tht may, cc nh pht trin h thng  cung cp cho chng ta mt la chn s 3,  l bn vn s dng user thng nhng c th triu hi quyn lc ca super user  thc hin nhng lnh no .\n\nCch s dng  l bn thm cu lnh `sudo` vo pha trc cu lnh cn s dng quyn ca super user. V d:\n\n`sudo apt-get update`\n\nMt nhm ln thng xuyn vi c vi ti ngy mi tm hiu,  l sau khi g nhng cu lnh c `sudo`, h thng yu cu ti nhp mt khu v ti  tng ngh  l mt khu ca `root` (nghe cng hp l y ch, ta mn quyn ca `root` th phi s dng mt khu ca `root` ch nh? Ging nh khi ti mn nh ca bn th ti phi c cha kho ca bn). Nhng khng phi nh vy, mt khu bn nhp vo n thun l chnh mt khu ca user thng bn ang login trn my.\n\nPhn a cc trng hp khi bn thm `sudo`, cc cu lnh s chy mt cch hon ho. Tuy nhin, cng c nhng khi bn khng nhn c kt qu nh mong i v l do chnh l khng phi user no cng c th triu hi quyn lc ca super user. iu bn cn lm khi  l \"ni\" vi h iu hnh rng hy cho user ca ti ang s dng c quyn triu hi sc mnh ca super user. Hy xem v d di y:\n\n```ruby\n#=> /etc/sudoers (lu tr cc user c quyn thc hin c quyn ca super user)\n#=> V d\nroot ALL=(ALL:ALL) ALL\n#=> user ang xt quyn tn l root\n#=> Ch all u tin ch ra rng rule ny c p dng cho tt c cc host\n#=> Ch all th hai ch ra, account root c th chy lnh vi quyn ca bt k user no.\n#=> Ch all th ba ch ra, account root c th chy lnh vi quyn ca bt k group no.\n#=> Ch all cui cng ch ra, account root c th chy bt k command no.\n```\n\nNote: K t khi bn nhp mt khu sau khi g lnh `sudo` ln u, thi gian c hiu lc ca mt khu ny s l 15 pht. Trong khong thi gian  bn c th chy cc lnh `sudo` khc m h iu hnh khng yu cu bn nhp li mt khu.\n\n\n# 3.Package management system\n\nKhi s dng macOS,  ci t thm cc phn mm phc v cng vic (m chng khng c support trn appstore), ti s dng `homebrew`, mt phn mm gip qun l cc phn mm khc rt hiu qu.\n\nVy cn trn Linux chng ta c g?\n\nTrc ht cn phi lm r: Package management system l mt cng c hoc mt h thng cc cng c c s dng  handle cc package.\n1.\tHandle l qun l vi y  cc chc nng nh thm mi, g b, nng cp, tm kim..v..v\n2.\tPackage l mt tin ch hoc nhng phn b tr cho mt tin ch no  (thc s cui cng n cng ch l tp hp ca cc file).\n\nMt `Package Management System` ni ting trn Linux  l `DPKG`, n l mt cng c  ci t cc package c ui .deb (cc package dnh cho cc h iu hnh thuc dng debian).\nNhim v ca `DPKG` l install hoc remove mt package (vi iu kin cc file cn thit  c trn local).\n\nn y nhiu bn c th thc mc rng t trc n gi bn cha h s dng cc dng lnh lin quan n `DPKG`, vy ti sao ti li bo l n rt ph bin? Cu tr li  l bn ang s dng cc phn mm package management system khc c xy dng da trn phn core l `DPKG`, mt trong s  l `APTGET/APT`.\n\nu im ln nht ca `APT` so vi `DPKG`  l `DPKG` ch c th ci t file khi m file   c trn local (tc l bng cch no  bn phi download hoc copy file  v my ca bn). Cn vi `APT`, n s tm kim cc package  t `remote repositories`, sau  download chng v my.\n\nim mnh th hai ca `APT` so vi `DPKG`  l n gii quyt c bi ton dependencies. Nu package bn cn ci t ph thuc vo mt vi package khc, nu s dng `DPKG` th bn s phi ci t tt c cc package k trn mt cch th cng.\nCn vi `APT`, n s t hiu c package  cn thm nhng ph tr no v t ng ci t phn ph tr.\n\niu tht s din ra  l trong `APT`, `DPKG` vn tn ti. N tn ti  mt cp thp hn v thc hin cc ch th ca `APT`.\n\nNote: Cc `remote repositories`  phn mm package management ca bn tm kim s c lu tr trong file `/etc/apt/sources.list` (a s l nh vy).\n\n# Kt lun\n\nCn rt nhiu iu cn ni v bn lun thm trong cc bi vit tip theo.\n","slug":"2019-02-05-root-sudo-and-package-management-system","published":1,"updated":"2019-11-13T03:59:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe1y000b8ers658i7vg6","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Trong mt bi vit gn y v ch  file permission trn Unix/Linux, ti c  cp n mt ngi dng quyn lc trn cc h thng k trn c tn gi l <code>root</code>. Bi vit ny s khi qut v ngi dng ny km theo hai khi nim c lin quan l <code>sudo</code> v <code>Package Management System</code>.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Root\"><a href=\"#1-Root\" class=\"headerlink\" title=\"1.Root\"></a>1.Root</h1><p>Xin c nhc li mt cu chuyn c ti  k trong bi vit trc vi v d v mnh t nh bn, bn s hu mnh t , v bn s hu mnh t  chung vi bn. Nhng v chng bn khng phi l nhng ngi s hu ti thng ca mnh t k trn, m quyn lc to ln ny thuc v nh nc, ngi thc ra l ang cho bn thu t c thi hn. Tng t trng Unix/Linux, s c nhng user (nh ti khon bn s dng  ng nhp, hoc ti khon khch).</p>\n<p>Vic nhng ti khon ny c th ng nhp vo h thng nhng c quyn ca chng b gii hn. Khi login vo h thng, bn c th lm mt s tc v nht nh ch khng th thch lm g th lm, trong h thng ca bn ch c mt user duy nht c quyn lm bt c iu g,  l mt super user.</p>\n<p>Trn windows, ta gi  l <code>administrator</code> (c l qu quen thuc, bn cn nh nhng lc ci phn mm, bn click vo file exe nhng chng trnh khng chu ci t, google mt lt, bn nhn c mt hng dn hy click phi vo file exe  v chn <code>run as administrator</code>,  chnh l sc mnh ca super user trn windows), cn trn macOS hay Ubuntu(1 i din ca Linux), n c gi l <code>root</code> (cui cng cng ch l mt ci tn gi, n c th c t tn l mo, l ch, n c th c t tn l bt c th g, chng ta khng cn quan tm, iu duy nht chng ta cn bit  l trn cc h iu hnh con chu ca Unix s lun c mt super user quyn lc nh vy).</p>\n<p>n lc ny, bn s t hi ti sao phi thit k h thng phc tp nh vy? Ti sao khng ch dung duy nht mt loi user?<br>Cu tr li rt n gin, khng phi ai s dng my tnh cng l nhng ngi dung c hiu bit su sc v h iu hnh. V vy, nu trao cho h nhng quyn lc qu ln, h c th v tnh gy ra nhng hu hoi nghim trng cho h thng (quyn lc cng ln th trch nhim cng ln).</p>\n<p>Mt vn  pht sinh nu vic s dng Root mang tnh ri ro qu cao nhng nhng user bnh thng li khng c cc quyn  ci t mt s phn mm nng cao th phi lm sao? Vn  ny s c gii thch  mc s 2.</p>\n<p>Note: Trn macOS v Ubuntu, <code>root</code> mc nh s c disable, chng c th s c enable tr li v re-disable. Cch thc hin th c l bn nn tm kim hng dn t trang ch ca nhng h iu hnh ny  cu lnh ca bn m bo chnh xc v khng b li thi.</p>\n<h1 id=\"2-Sudo\"><a href=\"#2-Sudo\" class=\"headerlink\" title=\"2.Sudo\"></a>2.Sudo</h1><p>Nh vn  ti  nu  cui mc 1, by gi ti mun ci t mt s phn mm i hi quyn ca super user, v l thuyt ti ng gia hai la chn hoc chuyn sang <code>root</code> v ci t phn mm bnh thng (rt ri ro), phng n 2 l ti vn s dng user thng v ni li tm bit vi nhng phn mm k trn.</p>\n<p>Qu t, c hai gii php trn u khng n, tht may, cc nh pht trin h thng  cung cp cho chng ta mt la chn s 3,  l bn vn s dng user thng nhng c th triu hi quyn lc ca super user  thc hin nhng lnh no .</p>\n<p>Cch s dng  l bn thm cu lnh <code>sudo</code> vo pha trc cu lnh cn s dng quyn ca super user. V d:</p>\n<p><code>sudo apt-get update</code></p>\n<p>Mt nhm ln thng xuyn vi c vi ti ngy mi tm hiu,  l sau khi g nhng cu lnh c <code>sudo</code>, h thng yu cu ti nhp mt khu v ti  tng ngh  l mt khu ca <code>root</code> (nghe cng hp l y ch, ta mn quyn ca <code>root</code> th phi s dng mt khu ca <code>root</code> ch nh? Ging nh khi ti mn nh ca bn th ti phi c cha kho ca bn). Nhng khng phi nh vy, mt khu bn nhp vo n thun l chnh mt khu ca user thng bn ang login trn my.</p>\n<p>Phn a cc trng hp khi bn thm <code>sudo</code>, cc cu lnh s chy mt cch hon ho. Tuy nhin, cng c nhng khi bn khng nhn c kt qu nh mong i v l do chnh l khng phi user no cng c th triu hi quyn lc ca super user. iu bn cn lm khi  l ni vi h iu hnh rng hy cho user ca ti ang s dng c quyn triu hi sc mnh ca super user. Hy xem v d di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#=&gt; /etc/sudoers (lu tr cc user c quyn thc hin c quyn ca super user)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; V d</span></span><br><span class=\"line\">root ALL=(<span class=\"symbol\">ALL:</span>ALL) ALL</span><br><span class=\"line\"><span class=\"comment\">#=&gt; user ang xt quyn tn l root</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all u tin ch ra rng rule ny c p dng cho tt c cc host</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all th hai ch ra, account root c th chy lnh vi quyn ca bt k user no.</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all th ba ch ra, account root c th chy lnh vi quyn ca bt k group no.</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all cui cng ch ra, account root c th chy bt k command no.</span></span><br></pre></td></tr></table></figure>\n\n<p>Note: K t khi bn nhp mt khu sau khi g lnh <code>sudo</code> ln u, thi gian c hiu lc ca mt khu ny s l 15 pht. Trong khong thi gian  bn c th chy cc lnh <code>sudo</code> khc m h iu hnh khng yu cu bn nhp li mt khu.</p>\n<h1 id=\"3-Package-management-system\"><a href=\"#3-Package-management-system\" class=\"headerlink\" title=\"3.Package management system\"></a>3.Package management system</h1><p>Khi s dng macOS,  ci t thm cc phn mm phc v cng vic (m chng khng c support trn appstore), ti s dng <code>homebrew</code>, mt phn mm gip qun l cc phn mm khc rt hiu qu.</p>\n<p>Vy cn trn Linux chng ta c g?</p>\n<p>Trc ht cn phi lm r: Package management system l mt cng c hoc mt h thng cc cng c c s dng  handle cc package.</p>\n<ol>\n<li>Handle l qun l vi y  cc chc nng nh thm mi, g b, nng cp, tm kim..v..v</li>\n<li>Package l mt tin ch hoc nhng phn b tr cho mt tin ch no  (thc s cui cng n cng ch l tp hp ca cc file).</li>\n</ol>\n<p>Mt <code>Package Management System</code> ni ting trn Linux  l <code>DPKG</code>, n l mt cng c  ci t cc package c ui .deb (cc package dnh cho cc h iu hnh thuc dng debian).<br>Nhim v ca <code>DPKG</code> l install hoc remove mt package (vi iu kin cc file cn thit  c trn local).</p>\n<p>n y nhiu bn c th thc mc rng t trc n gi bn cha h s dng cc dng lnh lin quan n <code>DPKG</code>, vy ti sao ti li bo l n rt ph bin? Cu tr li  l bn ang s dng cc phn mm package management system khc c xy dng da trn phn core l <code>DPKG</code>, mt trong s  l <code>APTGET/APT</code>.</p>\n<p>u im ln nht ca <code>APT</code> so vi <code>DPKG</code>  l <code>DPKG</code> ch c th ci t file khi m file   c trn local (tc l bng cch no  bn phi download hoc copy file  v my ca bn). Cn vi <code>APT</code>, n s tm kim cc package  t <code>remote repositories</code>, sau  download chng v my.</p>\n<p>im mnh th hai ca <code>APT</code> so vi <code>DPKG</code>  l n gii quyt c bi ton dependencies. Nu package bn cn ci t ph thuc vo mt vi package khc, nu s dng <code>DPKG</code> th bn s phi ci t tt c cc package k trn mt cch th cng.<br>Cn vi <code>APT</code>, n s t hiu c package  cn thm nhng ph tr no v t ng ci t phn ph tr.</p>\n<p>iu tht s din ra  l trong <code>APT</code>, <code>DPKG</code> vn tn ti. N tn ti  mt cp thp hn v thc hin cc ch th ca <code>APT</code>.</p>\n<p>Note: Cc <code>remote repositories</code>  phn mm package management ca bn tm kim s c lu tr trong file <code>/etc/apt/sources.list</code> (a s l nh vy).</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Cn rt nhiu iu cn ni v bn lun thm trong cc bi vit tip theo.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Trong mt bi vit gn y v ch  file permission trn Unix/Linux, ti c  cp n mt ngi dng quyn lc trn cc h thng k trn c tn gi l <code>root</code>. Bi vit ny s khi qut v ngi dng ny km theo hai khi nim c lin quan l <code>sudo</code> v <code>Package Management System</code>.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Root\"><a href=\"#1-Root\" class=\"headerlink\" title=\"1.Root\"></a>1.Root</h1><p>Xin c nhc li mt cu chuyn c ti  k trong bi vit trc vi v d v mnh t nh bn, bn s hu mnh t , v bn s hu mnh t  chung vi bn. Nhng v chng bn khng phi l nhng ngi s hu ti thng ca mnh t k trn, m quyn lc to ln ny thuc v nh nc, ngi thc ra l ang cho bn thu t c thi hn. Tng t trng Unix/Linux, s c nhng user (nh ti khon bn s dng  ng nhp, hoc ti khon khch).</p>\n<p>Vic nhng ti khon ny c th ng nhp vo h thng nhng c quyn ca chng b gii hn. Khi login vo h thng, bn c th lm mt s tc v nht nh ch khng th thch lm g th lm, trong h thng ca bn ch c mt user duy nht c quyn lm bt c iu g,  l mt super user.</p>\n<p>Trn windows, ta gi  l <code>administrator</code> (c l qu quen thuc, bn cn nh nhng lc ci phn mm, bn click vo file exe nhng chng trnh khng chu ci t, google mt lt, bn nhn c mt hng dn hy click phi vo file exe  v chn <code>run as administrator</code>,  chnh l sc mnh ca super user trn windows), cn trn macOS hay Ubuntu(1 i din ca Linux), n c gi l <code>root</code> (cui cng cng ch l mt ci tn gi, n c th c t tn l mo, l ch, n c th c t tn l bt c th g, chng ta khng cn quan tm, iu duy nht chng ta cn bit  l trn cc h iu hnh con chu ca Unix s lun c mt super user quyn lc nh vy).</p>\n<p>n lc ny, bn s t hi ti sao phi thit k h thng phc tp nh vy? Ti sao khng ch dung duy nht mt loi user?<br>Cu tr li rt n gin, khng phi ai s dng my tnh cng l nhng ngi dung c hiu bit su sc v h iu hnh. V vy, nu trao cho h nhng quyn lc qu ln, h c th v tnh gy ra nhng hu hoi nghim trng cho h thng (quyn lc cng ln th trch nhim cng ln).</p>\n<p>Mt vn  pht sinh nu vic s dng Root mang tnh ri ro qu cao nhng nhng user bnh thng li khng c cc quyn  ci t mt s phn mm nng cao th phi lm sao? Vn  ny s c gii thch  mc s 2.</p>\n<p>Note: Trn macOS v Ubuntu, <code>root</code> mc nh s c disable, chng c th s c enable tr li v re-disable. Cch thc hin th c l bn nn tm kim hng dn t trang ch ca nhng h iu hnh ny  cu lnh ca bn m bo chnh xc v khng b li thi.</p>\n<h1 id=\"2-Sudo\"><a href=\"#2-Sudo\" class=\"headerlink\" title=\"2.Sudo\"></a>2.Sudo</h1><p>Nh vn  ti  nu  cui mc 1, by gi ti mun ci t mt s phn mm i hi quyn ca super user, v l thuyt ti ng gia hai la chn hoc chuyn sang <code>root</code> v ci t phn mm bnh thng (rt ri ro), phng n 2 l ti vn s dng user thng v ni li tm bit vi nhng phn mm k trn.</p>\n<p>Qu t, c hai gii php trn u khng n, tht may, cc nh pht trin h thng  cung cp cho chng ta mt la chn s 3,  l bn vn s dng user thng nhng c th triu hi quyn lc ca super user  thc hin nhng lnh no .</p>\n<p>Cch s dng  l bn thm cu lnh <code>sudo</code> vo pha trc cu lnh cn s dng quyn ca super user. V d:</p>\n<p><code>sudo apt-get update</code></p>\n<p>Mt nhm ln thng xuyn vi c vi ti ngy mi tm hiu,  l sau khi g nhng cu lnh c <code>sudo</code>, h thng yu cu ti nhp mt khu v ti  tng ngh  l mt khu ca <code>root</code> (nghe cng hp l y ch, ta mn quyn ca <code>root</code> th phi s dng mt khu ca <code>root</code> ch nh? Ging nh khi ti mn nh ca bn th ti phi c cha kho ca bn). Nhng khng phi nh vy, mt khu bn nhp vo n thun l chnh mt khu ca user thng bn ang login trn my.</p>\n<p>Phn a cc trng hp khi bn thm <code>sudo</code>, cc cu lnh s chy mt cch hon ho. Tuy nhin, cng c nhng khi bn khng nhn c kt qu nh mong i v l do chnh l khng phi user no cng c th triu hi quyn lc ca super user. iu bn cn lm khi  l ni vi h iu hnh rng hy cho user ca ti ang s dng c quyn triu hi sc mnh ca super user. Hy xem v d di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#=&gt; /etc/sudoers (lu tr cc user c quyn thc hin c quyn ca super user)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; V d</span></span><br><span class=\"line\">root ALL=(<span class=\"symbol\">ALL:</span>ALL) ALL</span><br><span class=\"line\"><span class=\"comment\">#=&gt; user ang xt quyn tn l root</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all u tin ch ra rng rule ny c p dng cho tt c cc host</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all th hai ch ra, account root c th chy lnh vi quyn ca bt k user no.</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all th ba ch ra, account root c th chy lnh vi quyn ca bt k group no.</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all cui cng ch ra, account root c th chy bt k command no.</span></span><br></pre></td></tr></table></figure>\n\n<p>Note: K t khi bn nhp mt khu sau khi g lnh <code>sudo</code> ln u, thi gian c hiu lc ca mt khu ny s l 15 pht. Trong khong thi gian  bn c th chy cc lnh <code>sudo</code> khc m h iu hnh khng yu cu bn nhp li mt khu.</p>\n<h1 id=\"3-Package-management-system\"><a href=\"#3-Package-management-system\" class=\"headerlink\" title=\"3.Package management system\"></a>3.Package management system</h1><p>Khi s dng macOS,  ci t thm cc phn mm phc v cng vic (m chng khng c support trn appstore), ti s dng <code>homebrew</code>, mt phn mm gip qun l cc phn mm khc rt hiu qu.</p>\n<p>Vy cn trn Linux chng ta c g?</p>\n<p>Trc ht cn phi lm r: Package management system l mt cng c hoc mt h thng cc cng c c s dng  handle cc package.</p>\n<ol>\n<li>Handle l qun l vi y  cc chc nng nh thm mi, g b, nng cp, tm kim..v..v</li>\n<li>Package l mt tin ch hoc nhng phn b tr cho mt tin ch no  (thc s cui cng n cng ch l tp hp ca cc file).</li>\n</ol>\n<p>Mt <code>Package Management System</code> ni ting trn Linux  l <code>DPKG</code>, n l mt cng c  ci t cc package c ui .deb (cc package dnh cho cc h iu hnh thuc dng debian).<br>Nhim v ca <code>DPKG</code> l install hoc remove mt package (vi iu kin cc file cn thit  c trn local).</p>\n<p>n y nhiu bn c th thc mc rng t trc n gi bn cha h s dng cc dng lnh lin quan n <code>DPKG</code>, vy ti sao ti li bo l n rt ph bin? Cu tr li  l bn ang s dng cc phn mm package management system khc c xy dng da trn phn core l <code>DPKG</code>, mt trong s  l <code>APTGET/APT</code>.</p>\n<p>u im ln nht ca <code>APT</code> so vi <code>DPKG</code>  l <code>DPKG</code> ch c th ci t file khi m file   c trn local (tc l bng cch no  bn phi download hoc copy file  v my ca bn). Cn vi <code>APT</code>, n s tm kim cc package  t <code>remote repositories</code>, sau  download chng v my.</p>\n<p>im mnh th hai ca <code>APT</code> so vi <code>DPKG</code>  l n gii quyt c bi ton dependencies. Nu package bn cn ci t ph thuc vo mt vi package khc, nu s dng <code>DPKG</code> th bn s phi ci t tt c cc package k trn mt cch th cng.<br>Cn vi <code>APT</code>, n s t hiu c package  cn thm nhng ph tr no v t ng ci t phn ph tr.</p>\n<p>iu tht s din ra  l trong <code>APT</code>, <code>DPKG</code> vn tn ti. N tn ti  mt cp thp hn v thc hin cc ch th ca <code>APT</code>.</p>\n<p>Note: Cc <code>remote repositories</code>  phn mm package management ca bn tm kim s c lu tr trong file <code>/etc/apt/sources.list</code> (a s l nh vy).</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Cn rt nhiu iu cn ni v bn lun thm trong cc bi vit tip theo.</p>\n"},{"title":"Vi Trnh Thng Dch Cho Ruby","date":"2019-02-19T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n# t vn \n\ny li l mt bi vit v ch  `core`, phc tp ho nhng th m bnh thng i lm coder ta a phn l khng cn dng n. Hm nay s l cc trnh thng dch trong ruby.\n\n# Lun bn\n\n# 1. Ruby chy code ca bn nh no?\n\nTrc khi ni v cc trnh thng dch, ti xin nu khi qut v qu trnh ruby thc thi m code ca bn.\nVi bt c on m ruby no, m ngun bn vit s tri qua cc bc sau  c th ti c trnh thng dch (ch  m ta ang tm hiu).\n\n`Token`: Chuyn i m ngun ruby thnh mt dng keyword. Hiu n gin, ruby s qut qua m ngun bn vit v so snh vi mt symbol table no  (gi d nh vy),  xc nh xem trong m ngun bn vit gm nhng thnh phn no ( xc nh u l bin, u l keyword, u l t kho). V d vic t `do` xut hin trong m ngun, c th n l mt bin local, hoc n l mt keyword trong mt `block`, `Token` s qut m ngun v m bo xc nh ng `type` ca tng thnh phn trong code ca bn, ch  l `type` nh,  bc ny ruby ch quan tm n xc nh `type`.\n\n`Parse`: Qua bc u tin, ta  c mt token, n bc th hai n s chuyn i token  thnh mt AST (Abstract Syntax Tree).\n\n`Compile`: n bc ny, ruby s bin dch kt qu  bc 2 thnh `bytecode` v truyn kt qu bin dch c sang cho my o ruby (l phn m chng ta ang tm hiu trong bi vit).\n\n# 2. CRuby, MRI, YARV, KRI\n\n kim tra xem ruby trn my tnh ca bn ang s dng trnh thng dch no, hy m `irb` v s dng lnh sau:\n\n``` ruby\nRbConfig::CONFIG[\"RUBY_INSTALL_NAME\"]\n#=> kt qu tr v trn my ca ti l: ruby\n```\niu ny c ngha ti ang s dng trnh thng dch mc nh trong ruby. c gi l `MRI`/`CRuby` hay phin bn nng cp sau ny l `YARV`/`KRI`. Gii thch v vic c nhiu tn gi nh trn, ti xin trch dn cc thng tin trn wiki v trnh thng dch ny:\n\n```\nMatz's Ruby Interpreter or Ruby MRI (also called CRuby)\nwas the reference implementation of the Ruby programming language\nnamed after Ruby creator Yukihiro Matsumoto (\"Matz\")\n```\n\n```\nYARV (Yet another Ruby VM) is a bytecode interpreter that\nwas developed for the Ruby programming language by Koichi Sasada.\nThe goal of the project was to greatly reduce the execution time of Ruby programs.\n```\n\n```\nSince YARV has become the official Ruby interpreter for Ruby 1.9,\nit is also named KRI (Koichi's Ruby Interpreter),\nin the same vein as the original Ruby MRI,\nnamed for Ruby's creator Yukihiro Matsumoto.\n```\n\n```\nYARV was merged into the Ruby Subversion repository on January 1, 2007.\nIt was released as part of Ruby 1.9.0 on December 26, 2007, replacing Ruby MRI.\n```\n\nQua vi trch dn k trn, bn c th thy n gin nhng khi nim `CRuby`, `YARV`, `MRI`, `KRI` u nhm m t v mt trnh thng dch c s dng mc nh cho ruby (tu phin bn s c khc nhau, hiu theo ngha l mt s update thay v l thay th).\n\n# 3. JRuby\n\nCn mt vi trnh thng dch khc m ti  c c, nhng `JRuby` l phn cui m chng ta s tm hiu, v nhng nhng trnh thng dch cn li khng c ph bin cho lm.\n\n`JRuby` = `Java` + `Ruby`\n\nTc l dng phn java lm core  chy my o x l code ruby. S khc bit vi mc 2,chnh l  mc 2, d di tn gi hay phin bn no, th nhng trnh thng dch  u s dng `C` lm ngn ng xy dng.\n\nMt s  kin xoay quanh `JRuby`\n\n| 1: JRuby nhanh hn ng k vi trnh thng dch mc nh trong ruby, c li th mnh m khi x l a lung.\n\n| 2: Tuy nhin ng ngha vi iu  l vic `JRuby` chim dng b nh nhiu hn v mt thi gian hn  khi ng.\n\nVy s l mt thm ho nu s dng `JRuby`  lm trnh thng dch cho ruby trong nhng ng dng nh, hot ng n gin v khng cn tc  qu cao.\n\n# Kt lun\n\nTrn y l mt s khi qut v lch s v hnh trnh ca cc trnh thng dch Ruby. Nu c sai xt, xin hy  li bnh lun  di bi vit.\n","source":"_posts/2019-02-20-cac-trinh-thong-dich-trong-ruby.md","raw":"---\ntitle: \"Vi Trnh Thng Dch Cho Ruby\"\ndate: 2019-02-20\ndraft: false\ntags: [\"ruby\"]\ncategories: [\"ruby notes\"]\nmytag: \"#TIL\"\n---\n\n# t vn \n\ny li l mt bi vit v ch  `core`, phc tp ho nhng th m bnh thng i lm coder ta a phn l khng cn dng n. Hm nay s l cc trnh thng dch trong ruby.\n\n# Lun bn\n\n# 1. Ruby chy code ca bn nh no?\n\nTrc khi ni v cc trnh thng dch, ti xin nu khi qut v qu trnh ruby thc thi m code ca bn.\nVi bt c on m ruby no, m ngun bn vit s tri qua cc bc sau  c th ti c trnh thng dch (ch  m ta ang tm hiu).\n\n`Token`: Chuyn i m ngun ruby thnh mt dng keyword. Hiu n gin, ruby s qut qua m ngun bn vit v so snh vi mt symbol table no  (gi d nh vy),  xc nh xem trong m ngun bn vit gm nhng thnh phn no ( xc nh u l bin, u l keyword, u l t kho). V d vic t `do` xut hin trong m ngun, c th n l mt bin local, hoc n l mt keyword trong mt `block`, `Token` s qut m ngun v m bo xc nh ng `type` ca tng thnh phn trong code ca bn, ch  l `type` nh,  bc ny ruby ch quan tm n xc nh `type`.\n\n`Parse`: Qua bc u tin, ta  c mt token, n bc th hai n s chuyn i token  thnh mt AST (Abstract Syntax Tree).\n\n`Compile`: n bc ny, ruby s bin dch kt qu  bc 2 thnh `bytecode` v truyn kt qu bin dch c sang cho my o ruby (l phn m chng ta ang tm hiu trong bi vit).\n\n# 2. CRuby, MRI, YARV, KRI\n\n kim tra xem ruby trn my tnh ca bn ang s dng trnh thng dch no, hy m `irb` v s dng lnh sau:\n\n``` ruby\nRbConfig::CONFIG[\"RUBY_INSTALL_NAME\"]\n#=> kt qu tr v trn my ca ti l: ruby\n```\niu ny c ngha ti ang s dng trnh thng dch mc nh trong ruby. c gi l `MRI`/`CRuby` hay phin bn nng cp sau ny l `YARV`/`KRI`. Gii thch v vic c nhiu tn gi nh trn, ti xin trch dn cc thng tin trn wiki v trnh thng dch ny:\n\n```\nMatz's Ruby Interpreter or Ruby MRI (also called CRuby)\nwas the reference implementation of the Ruby programming language\nnamed after Ruby creator Yukihiro Matsumoto (\"Matz\")\n```\n\n```\nYARV (Yet another Ruby VM) is a bytecode interpreter that\nwas developed for the Ruby programming language by Koichi Sasada.\nThe goal of the project was to greatly reduce the execution time of Ruby programs.\n```\n\n```\nSince YARV has become the official Ruby interpreter for Ruby 1.9,\nit is also named KRI (Koichi's Ruby Interpreter),\nin the same vein as the original Ruby MRI,\nnamed for Ruby's creator Yukihiro Matsumoto.\n```\n\n```\nYARV was merged into the Ruby Subversion repository on January 1, 2007.\nIt was released as part of Ruby 1.9.0 on December 26, 2007, replacing Ruby MRI.\n```\n\nQua vi trch dn k trn, bn c th thy n gin nhng khi nim `CRuby`, `YARV`, `MRI`, `KRI` u nhm m t v mt trnh thng dch c s dng mc nh cho ruby (tu phin bn s c khc nhau, hiu theo ngha l mt s update thay v l thay th).\n\n# 3. JRuby\n\nCn mt vi trnh thng dch khc m ti  c c, nhng `JRuby` l phn cui m chng ta s tm hiu, v nhng nhng trnh thng dch cn li khng c ph bin cho lm.\n\n`JRuby` = `Java` + `Ruby`\n\nTc l dng phn java lm core  chy my o x l code ruby. S khc bit vi mc 2,chnh l  mc 2, d di tn gi hay phin bn no, th nhng trnh thng dch  u s dng `C` lm ngn ng xy dng.\n\nMt s  kin xoay quanh `JRuby`\n\n| 1: JRuby nhanh hn ng k vi trnh thng dch mc nh trong ruby, c li th mnh m khi x l a lung.\n\n| 2: Tuy nhin ng ngha vi iu  l vic `JRuby` chim dng b nh nhiu hn v mt thi gian hn  khi ng.\n\nVy s l mt thm ho nu s dng `JRuby`  lm trnh thng dch cho ruby trong nhng ng dng nh, hot ng n gin v khng cn tc  qu cao.\n\n# Kt lun\n\nTrn y l mt s khi qut v lch s v hnh trnh ca cc trnh thng dch Ruby. Nu c sai xt, xin hy  li bnh lun  di bi vit.\n","slug":"2019-02-20-cac-trinh-thong-dich-trong-ruby","published":1,"updated":"2019-11-13T04:00:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe20000d8ersdfwbeer6","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>y li l mt bi vit v ch  <code>core</code>, phc tp ho nhng th m bnh thng i lm coder ta a phn l khng cn dng n. Hm nay s l cc trnh thng dch trong ruby.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Ruby-chay-code-cua-ban-nhu-nao\"><a href=\"#1-Ruby-chay-code-cua-ban-nhu-nao\" class=\"headerlink\" title=\"1. Ruby chy code ca bn nh no?\"></a>1. Ruby chy code ca bn nh no?</h1><p>Trc khi ni v cc trnh thng dch, ti xin nu khi qut v qu trnh ruby thc thi m code ca bn.<br>Vi bt c on m ruby no, m ngun bn vit s tri qua cc bc sau  c th ti c trnh thng dch (ch  m ta ang tm hiu).</p>\n<p><code>Token</code>: Chuyn i m ngun ruby thnh mt dng keyword. Hiu n gin, ruby s qut qua m ngun bn vit v so snh vi mt symbol table no  (gi d nh vy),  xc nh xem trong m ngun bn vit gm nhng thnh phn no ( xc nh u l bin, u l keyword, u l t kho). V d vic t <code>do</code> xut hin trong m ngun, c th n l mt bin local, hoc n l mt keyword trong mt <code>block</code>, <code>Token</code> s qut m ngun v m bo xc nh ng <code>type</code> ca tng thnh phn trong code ca bn, ch  l <code>type</code> nh,  bc ny ruby ch quan tm n xc nh <code>type</code>.</p>\n<p><code>Parse</code>: Qua bc u tin, ta  c mt token, n bc th hai n s chuyn i token  thnh mt AST (Abstract Syntax Tree).</p>\n<p><code>Compile</code>: n bc ny, ruby s bin dch kt qu  bc 2 thnh <code>bytecode</code> v truyn kt qu bin dch c sang cho my o ruby (l phn m chng ta ang tm hiu trong bi vit).</p>\n<h1 id=\"2-CRuby-MRI-YARV-KRI\"><a href=\"#2-CRuby-MRI-YARV-KRI\" class=\"headerlink\" title=\"2. CRuby, MRI, YARV, KRI\"></a>2. CRuby, MRI, YARV, KRI</h1><p> kim tra xem ruby trn my tnh ca bn ang s dng trnh thng dch no, hy m <code>irb</code> v s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RbConfig::CONFIG[<span class=\"string\">\"RUBY_INSTALL_NAME\"</span>]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; kt qu tr v trn my ca ti l: ruby</span></span><br></pre></td></tr></table></figure>\n<p>iu ny c ngha ti ang s dng trnh thng dch mc nh trong ruby. c gi l <code>MRI</code>/<code>CRuby</code> hay phin bn nng cp sau ny l <code>YARV</code>/<code>KRI</code>. Gii thch v vic c nhiu tn gi nh trn, ti xin trch dn cc thng tin trn wiki v trnh thng dch ny:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Matz&apos;s Ruby Interpreter or Ruby MRI (also called CRuby)</span><br><span class=\"line\">was the reference implementation of the Ruby programming language</span><br><span class=\"line\">named after Ruby creator Yukihiro Matsumoto (&quot;Matz&quot;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YARV (Yet another Ruby VM) is a bytecode interpreter that</span><br><span class=\"line\">was developed for the Ruby programming language by Koichi Sasada.</span><br><span class=\"line\">The goal of the project was to greatly reduce the execution time of Ruby programs.</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Since YARV has become the official Ruby interpreter for Ruby 1.9,</span><br><span class=\"line\">it is also named KRI (Koichi&apos;s Ruby Interpreter),</span><br><span class=\"line\">in the same vein as the original Ruby MRI,</span><br><span class=\"line\">named for Ruby&apos;s creator Yukihiro Matsumoto.</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YARV was merged into the Ruby Subversion repository on January 1, 2007.</span><br><span class=\"line\">It was released as part of Ruby 1.9.0 on December 26, 2007, replacing Ruby MRI.</span><br></pre></td></tr></table></figure>\n\n<p>Qua vi trch dn k trn, bn c th thy n gin nhng khi nim <code>CRuby</code>, <code>YARV</code>, <code>MRI</code>, <code>KRI</code> u nhm m t v mt trnh thng dch c s dng mc nh cho ruby (tu phin bn s c khc nhau, hiu theo ngha l mt s update thay v l thay th).</p>\n<h1 id=\"3-JRuby\"><a href=\"#3-JRuby\" class=\"headerlink\" title=\"3. JRuby\"></a>3. JRuby</h1><p>Cn mt vi trnh thng dch khc m ti  c c, nhng <code>JRuby</code> l phn cui m chng ta s tm hiu, v nhng nhng trnh thng dch cn li khng c ph bin cho lm.</p>\n<p><code>JRuby</code> = <code>Java</code> + <code>Ruby</code></p>\n<p>Tc l dng phn java lm core  chy my o x l code ruby. S khc bit vi mc 2,chnh l  mc 2, d di tn gi hay phin bn no, th nhng trnh thng dch  u s dng <code>C</code> lm ngn ng xy dng.</p>\n<p>Mt s  kin xoay quanh <code>JRuby</code></p>\n<p>| 1: JRuby nhanh hn ng k vi trnh thng dch mc nh trong ruby, c li th mnh m khi x l a lung.</p>\n<p>| 2: Tuy nhin ng ngha vi iu  l vic <code>JRuby</code> chim dng b nh nhiu hn v mt thi gian hn  khi ng.</p>\n<p>Vy s l mt thm ho nu s dng <code>JRuby</code>  lm trnh thng dch cho ruby trong nhng ng dng nh, hot ng n gin v khng cn tc  qu cao.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Trn y l mt s khi qut v lch s v hnh trnh ca cc trnh thng dch Ruby. Nu c sai xt, xin hy  li bnh lun  di bi vit.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>y li l mt bi vit v ch  <code>core</code>, phc tp ho nhng th m bnh thng i lm coder ta a phn l khng cn dng n. Hm nay s l cc trnh thng dch trong ruby.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Ruby-chay-code-cua-ban-nhu-nao\"><a href=\"#1-Ruby-chay-code-cua-ban-nhu-nao\" class=\"headerlink\" title=\"1. Ruby chy code ca bn nh no?\"></a>1. Ruby chy code ca bn nh no?</h1><p>Trc khi ni v cc trnh thng dch, ti xin nu khi qut v qu trnh ruby thc thi m code ca bn.<br>Vi bt c on m ruby no, m ngun bn vit s tri qua cc bc sau  c th ti c trnh thng dch (ch  m ta ang tm hiu).</p>\n<p><code>Token</code>: Chuyn i m ngun ruby thnh mt dng keyword. Hiu n gin, ruby s qut qua m ngun bn vit v so snh vi mt symbol table no  (gi d nh vy),  xc nh xem trong m ngun bn vit gm nhng thnh phn no ( xc nh u l bin, u l keyword, u l t kho). V d vic t <code>do</code> xut hin trong m ngun, c th n l mt bin local, hoc n l mt keyword trong mt <code>block</code>, <code>Token</code> s qut m ngun v m bo xc nh ng <code>type</code> ca tng thnh phn trong code ca bn, ch  l <code>type</code> nh,  bc ny ruby ch quan tm n xc nh <code>type</code>.</p>\n<p><code>Parse</code>: Qua bc u tin, ta  c mt token, n bc th hai n s chuyn i token  thnh mt AST (Abstract Syntax Tree).</p>\n<p><code>Compile</code>: n bc ny, ruby s bin dch kt qu  bc 2 thnh <code>bytecode</code> v truyn kt qu bin dch c sang cho my o ruby (l phn m chng ta ang tm hiu trong bi vit).</p>\n<h1 id=\"2-CRuby-MRI-YARV-KRI\"><a href=\"#2-CRuby-MRI-YARV-KRI\" class=\"headerlink\" title=\"2. CRuby, MRI, YARV, KRI\"></a>2. CRuby, MRI, YARV, KRI</h1><p> kim tra xem ruby trn my tnh ca bn ang s dng trnh thng dch no, hy m <code>irb</code> v s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RbConfig::CONFIG[<span class=\"string\">\"RUBY_INSTALL_NAME\"</span>]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; kt qu tr v trn my ca ti l: ruby</span></span><br></pre></td></tr></table></figure>\n<p>iu ny c ngha ti ang s dng trnh thng dch mc nh trong ruby. c gi l <code>MRI</code>/<code>CRuby</code> hay phin bn nng cp sau ny l <code>YARV</code>/<code>KRI</code>. Gii thch v vic c nhiu tn gi nh trn, ti xin trch dn cc thng tin trn wiki v trnh thng dch ny:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Matz&apos;s Ruby Interpreter or Ruby MRI (also called CRuby)</span><br><span class=\"line\">was the reference implementation of the Ruby programming language</span><br><span class=\"line\">named after Ruby creator Yukihiro Matsumoto (&quot;Matz&quot;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YARV (Yet another Ruby VM) is a bytecode interpreter that</span><br><span class=\"line\">was developed for the Ruby programming language by Koichi Sasada.</span><br><span class=\"line\">The goal of the project was to greatly reduce the execution time of Ruby programs.</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Since YARV has become the official Ruby interpreter for Ruby 1.9,</span><br><span class=\"line\">it is also named KRI (Koichi&apos;s Ruby Interpreter),</span><br><span class=\"line\">in the same vein as the original Ruby MRI,</span><br><span class=\"line\">named for Ruby&apos;s creator Yukihiro Matsumoto.</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YARV was merged into the Ruby Subversion repository on January 1, 2007.</span><br><span class=\"line\">It was released as part of Ruby 1.9.0 on December 26, 2007, replacing Ruby MRI.</span><br></pre></td></tr></table></figure>\n\n<p>Qua vi trch dn k trn, bn c th thy n gin nhng khi nim <code>CRuby</code>, <code>YARV</code>, <code>MRI</code>, <code>KRI</code> u nhm m t v mt trnh thng dch c s dng mc nh cho ruby (tu phin bn s c khc nhau, hiu theo ngha l mt s update thay v l thay th).</p>\n<h1 id=\"3-JRuby\"><a href=\"#3-JRuby\" class=\"headerlink\" title=\"3. JRuby\"></a>3. JRuby</h1><p>Cn mt vi trnh thng dch khc m ti  c c, nhng <code>JRuby</code> l phn cui m chng ta s tm hiu, v nhng nhng trnh thng dch cn li khng c ph bin cho lm.</p>\n<p><code>JRuby</code> = <code>Java</code> + <code>Ruby</code></p>\n<p>Tc l dng phn java lm core  chy my o x l code ruby. S khc bit vi mc 2,chnh l  mc 2, d di tn gi hay phin bn no, th nhng trnh thng dch  u s dng <code>C</code> lm ngn ng xy dng.</p>\n<p>Mt s  kin xoay quanh <code>JRuby</code></p>\n<p>| 1: JRuby nhanh hn ng k vi trnh thng dch mc nh trong ruby, c li th mnh m khi x l a lung.</p>\n<p>| 2: Tuy nhin ng ngha vi iu  l vic <code>JRuby</code> chim dng b nh nhiu hn v mt thi gian hn  khi ng.</p>\n<p>Vy s l mt thm ho nu s dng <code>JRuby</code>  lm trnh thng dch cho ruby trong nhng ng dng nh, hot ng n gin v khng cn tc  qu cao.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Trn y l mt s khi qut v lch s v hnh trnh ca cc trnh thng dch Ruby. Nu c sai xt, xin hy  li bnh lun  di bi vit.</p>\n"},{"title":"Quy Lut 80/20","date":"2019-02-21T17:00:00.000Z","draft":false,"mytag":"#TIR","_content":"\nMi ngi hu nh ai cng bit quy lut 80/20.\n\nV cng nhiu ngi ng dng trit . H c gng dng 20% cng sc ca mnh  t c 80% gi tr, v t ho v s hiu qu ca mnh.\n\nNhng h qun mt iu.\n\nng l 20% cng sc u tin to nn 80% gi tr, nhng l 80% gi tr ph thng.\n\nChnh 20% gi tr cn li mi to nn 80% khc bit. V cng chnh 20% khc bit sau cng  mi l th to nn thnh cng.\n\nBn c th b 20% cng sc l  chi thun thc guitar 80%.\n\nNhng chnh 20%  kh cui cng mi to nn mt tay guitar thng hng.\n\nBn c th b 20% cng sc, thm ch t hn,  to nn mt trang mng x hi bng 80% Facebook.\n\nNhng chnh 20% cn li khin Facebook l Facebook.\n\nBn c th b ch 20% cng sc  tp tnh v ging ngi thnh t 80%.\n\nNhng chnh 20% cui cng mi thc s khin bn tr nn thnh t.\n\nTrong nhiu tr chi quan trng nht cuc i khng c ch cho s na vi. Hy nh rng 20% xao nhng   lm nn 80% tht bi.\n\nHy ngh li i, ti sao con s 80 li nm trc?  l v bn cht ca n nhn mnh rng 80% gian kh mi l th to nn 20% qu gi cui cng.\n\n`- trch dn Ecoblader -`\n","source":"_posts/2019-02-22-quy-luat-80-20.md","raw":"---\ntitle: \"Quy Lut 80/20\"\ndate: 2019-02-22\ndraft: false\ntags: [\"random\"]\ncategories: [\"Random\"]\nmytag: \"#TIR\"\n---\n\nMi ngi hu nh ai cng bit quy lut 80/20.\n\nV cng nhiu ngi ng dng trit . H c gng dng 20% cng sc ca mnh  t c 80% gi tr, v t ho v s hiu qu ca mnh.\n\nNhng h qun mt iu.\n\nng l 20% cng sc u tin to nn 80% gi tr, nhng l 80% gi tr ph thng.\n\nChnh 20% gi tr cn li mi to nn 80% khc bit. V cng chnh 20% khc bit sau cng  mi l th to nn thnh cng.\n\nBn c th b 20% cng sc l  chi thun thc guitar 80%.\n\nNhng chnh 20%  kh cui cng mi to nn mt tay guitar thng hng.\n\nBn c th b 20% cng sc, thm ch t hn,  to nn mt trang mng x hi bng 80% Facebook.\n\nNhng chnh 20% cn li khin Facebook l Facebook.\n\nBn c th b ch 20% cng sc  tp tnh v ging ngi thnh t 80%.\n\nNhng chnh 20% cui cng mi thc s khin bn tr nn thnh t.\n\nTrong nhiu tr chi quan trng nht cuc i khng c ch cho s na vi. Hy nh rng 20% xao nhng   lm nn 80% tht bi.\n\nHy ngh li i, ti sao con s 80 li nm trc?  l v bn cht ca n nhn mnh rng 80% gian kh mi l th to nn 20% qu gi cui cng.\n\n`- trch dn Ecoblader -`\n","slug":"2019-02-22-quy-luat-80-20","published":1,"updated":"2019-11-13T04:00:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe22000i8ersb0muac93","content":"<p>Mi ngi hu nh ai cng bit quy lut 80/20.</p>\n<p>V cng nhiu ngi ng dng trit . H c gng dng 20% cng sc ca mnh  t c 80% gi tr, v t ho v s hiu qu ca mnh.</p>\n<p>Nhng h qun mt iu.</p>\n<p>ng l 20% cng sc u tin to nn 80% gi tr, nhng l 80% gi tr ph thng.</p>\n<p>Chnh 20% gi tr cn li mi to nn 80% khc bit. V cng chnh 20% khc bit sau cng  mi l th to nn thnh cng.</p>\n<p>Bn c th b 20% cng sc l  chi thun thc guitar 80%.</p>\n<p>Nhng chnh 20%  kh cui cng mi to nn mt tay guitar thng hng.</p>\n<p>Bn c th b 20% cng sc, thm ch t hn,  to nn mt trang mng x hi bng 80% Facebook.</p>\n<p>Nhng chnh 20% cn li khin Facebook l Facebook.</p>\n<p>Bn c th b ch 20% cng sc  tp tnh v ging ngi thnh t 80%.</p>\n<p>Nhng chnh 20% cui cng mi thc s khin bn tr nn thnh t.</p>\n<p>Trong nhiu tr chi quan trng nht cuc i khng c ch cho s na vi. Hy nh rng 20% xao nhng   lm nn 80% tht bi.</p>\n<p>Hy ngh li i, ti sao con s 80 li nm trc?  l v bn cht ca n nhn mnh rng 80% gian kh mi l th to nn 20% qu gi cui cng.</p>\n<p><code>- trch dn Ecoblader -</code></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Mi ngi hu nh ai cng bit quy lut 80/20.</p>\n<p>V cng nhiu ngi ng dng trit . H c gng dng 20% cng sc ca mnh  t c 80% gi tr, v t ho v s hiu qu ca mnh.</p>\n<p>Nhng h qun mt iu.</p>\n<p>ng l 20% cng sc u tin to nn 80% gi tr, nhng l 80% gi tr ph thng.</p>\n<p>Chnh 20% gi tr cn li mi to nn 80% khc bit. V cng chnh 20% khc bit sau cng  mi l th to nn thnh cng.</p>\n<p>Bn c th b 20% cng sc l  chi thun thc guitar 80%.</p>\n<p>Nhng chnh 20%  kh cui cng mi to nn mt tay guitar thng hng.</p>\n<p>Bn c th b 20% cng sc, thm ch t hn,  to nn mt trang mng x hi bng 80% Facebook.</p>\n<p>Nhng chnh 20% cn li khin Facebook l Facebook.</p>\n<p>Bn c th b ch 20% cng sc  tp tnh v ging ngi thnh t 80%.</p>\n<p>Nhng chnh 20% cui cng mi thc s khin bn tr nn thnh t.</p>\n<p>Trong nhiu tr chi quan trng nht cuc i khng c ch cho s na vi. Hy nh rng 20% xao nhng   lm nn 80% tht bi.</p>\n<p>Hy ngh li i, ti sao con s 80 li nm trc?  l v bn cht ca n nhn mnh rng 80% gian kh mi l th to nn 20% qu gi cui cng.</p>\n<p><code>- trch dn Ecoblader -</code></p>\n"},{"title":"Lu Tr Thng Tin Bo Mt?","date":"2019-02-21T17:00:00.000Z","draft":false,"mytag":"Rails","mytrend":"COOL","_content":"\n# t vn \n\nKhi cn Interns ti Framgia, trong mt sn phm bt buc ca chng trnh thc tp, ti cn nh, mentor  yu cu ti lm chc nng gi mail cho ng dng rails. y thc s l mt task kh vi mt ngi non nt kinh nghim nh ti khi y, m rng google mt lt cng tm ra cch lm v p dng thnh cng, to PR lng hn hoan, no ng ngay sau  ti  b mentor mt st mt trn kinh hong. Nguyn nhn l do trong lc config mi trng  gi mail, ti   thng tin email ca ti vo file config v commit ln github, lc  ngh bng cng tc \"G m lm kh nhau qu vy? Interns khng lng thi m lm g gh, commit ln  th sao...\". Gi th hin nhin l ti nhn nhn c sai lm , v hiu c nhng hiu bit m m v config v bo mt s khin ng dng ca ti d tan tnh nh th no. Ngoi thng tin nh email, trong d n ca chng ta i khi cn nhng thng tin v cng quan trng nh key ca dch v lu tr m my, thng tin ng nhp bn th ba, hay mt chui b n c gi di ci tn `secret_key`. Bi vit ny s trnh by v cch x l nhng thng tin nhy cm k trn.\n\n# Lun bn\n\n# 1. Khi qut\n\nBi ton ny n gin hiu nh sau: Mt project bt k s lun c nhng thng tin cu hnh v cng quan trng, bt buc phi lun gi chng private, cn lm cch no  gi chng private trong rails?\nCu tr li l tu vo mi phin bn rails, s c (c th c) nhng cch khc nhau  x l vn  ny. Hy i n cc du mc c th di y.\n\n# 2. Rails 4.1\n\nPhin bn rails ny s dng mt file c tn `secrets.yml`, y l file s lu ton b cc thng tin nhy cm chng ta  ni  trn.\nVi thit k nh ny ta c hai la chn cho ng dng ca mnh:\n1. em ht thng tin nhy cm di ng text b vo file ny, tuy nhin file ny phi c b vo trong danh mc ca `gitignore`  m bo thng tin trong  khng b bn v tnh hay hu  commit i u .\n\n2. Thng tin nhy cm lu trong file ny thay v c lu di dng text th s c lu trong my ca bn doi dng `bin mi trng` v trong file `secrets.yml` ch s dng phng thc `ENV` m rails cung cp  gi li cc thng tin  ln, vi la chn ny bn c th commit file ny thoi mi,  cc my tnh ng nghip,  c th s dng c nhng config ny th buc h phi thit lp bin mi trng trn my tnh ca h cho ph hp.\n\nNhc im: d s dng cch no, th  ng dng hot ng c th vn phi truyn gi tr cc thng tin nhy cm ny t my ca bn ln mt con vps khi trin khai chng hn, khng cn cch no khc. C th bn phi copy tng dng thng tin nhy cm ri paste qua remote shell  thit lp (vi nhng d n ln c rt nhiu thng tin quan trng th y l 1 cng vic vt v tim tng nguy c sai st).\n\nNote: Thay v s dng file `secrets.yml`, ta c th s dng mt file khc nh `application.yml`, mc ch v chc nng ca chng l tng ng.\n\n# 3. Rails 5.1\n\nSang n phin bn rails 5.1, mt thay i ln  ti. Thay v lu thng tin dng text hoc triu hi thng qua bin mi trng, rails khi ny cung cp kh nng m ho cho cc thng tin nhy cm ny.\nCch chng hot ng nh sau:\n\nMt file tn `secrets.yml.key` s cha gi tr ca mt bin tn `RAILS_MASTER_KEY`, bin ny c gi tr l mt chui, c chc nng c s dng  m ho v gii m cc thng tin quan trng.\n\nNi dung thng tin **sau** m ho s c lu ti file `secrets.yml.enc`\n\nVy cn file `secrets.yml` trong rails 4 gi cn khng? Cu tr li l bn vn c th s dng file ny, tuy nhin trn cng mt mi trng, nu c c file `secrets.yml` v `secrets.yml.enc` th hai file ny s c merge.\n\n c th s dng tnh nng encypt ny ca rails 5.1 ta setup nh sau:\n\n```ruby\nrails secrets:setup\n```\nSau cu lnh ny hai file `secrets.yml.key` v `secrets.yml.enc` s c to ra.  thm xo sa ni dung trong `secrets.yml.enc` ta s dng lnh sau:\n\n```ruby\nrails secrets:edit\n```\n\nCu lnh ny s m ni dung file `secrets.yml.enc` di dng  gii m. Bn c th thoi mi thm xo, sa cc thng tin nhy cm, sau  khi bn save li v tt editor th file `secrets.yml.enc` s t ng c cp nhp phn m ho mi nht khi c thm thng tin.\n\nTi thch dng `vim`  chnh sa, v ti khng mun set mc nh editor nn ti s dng cu lnh sau: `EDITOR=vi rails secrets:edit`.\n\nu im:\n\n1. Thay v phi qun l nhiu bin mi trng, gi y mi th u nm trong mt file.\n\n2. Vic c th commit `secrets.yml.enc` gip chng ta nm c lch s thay i ca file ny.\n\nNote: Mt im quan trng bn cn lu ,  l ti khi vit bi vit ny th ti vn cha thy rails s gii m thng tin m ho trong file `secrets.yml.enc`, chng ta buc phi lm th cng  nhc rails lm iu  bng cch thm vo config file ca bn `config.read_encrypted_secrets = true`. Vi cu lnh setup bn trn, dng config trn  c add vo file config ca production. Nu bn mun s dng tnh nng ny cho mi trng development th hy thm dng config ny vo file `config/environments/development.rb`.\n\n# 3. Rails 5.2\n\n tng trong rails 5.2 khng thay i nhiu so vi rails 5.1. Nhng thay v lu key  encrypt/decrypt trong file secrets.yml.key gi n c lu trong file `master.key` (tuy nhin nu khng s dng file th c rails 5.2 v 5.1 u c th gi bin mi trng RAILS_MASTER_KEY  s dng).\n\nFile lu thng tin  c m ho cng c thay i t secrets.yml.enc thnh `credentials.yml.enc`.   l nhng im khc bit duy nht.\n\n chnh sa thng tin trong file m ho ta s dng lnh:\n\n```ruby\nEDITOR=vi rails credentials:edit\n```\nKhng cn dng lnh setup nh trn, v trong rails 5.2, hai file key v m ho c sinh ra cng project.\n\nTa c th truy xut gi tr c gii m trong file `credentials.yml.enc` nh sau:\n\n```ruby\nRails.application.credentials.ten_bien_trong_credentials\n```\n\nLm g khi bn mun thay th `master.key`?\n\n1. `rails credentials:show` dng lnh ny  hin th thng tin dng gii m ra editor, copy chng.\n\n2. Xo hai file `master.key` v `credentials.yml.enc` i.\n\n3. `EDITOR=vim rails credentials:edit` vi lnh sau bn s generate li hai file mi. Vic cn lm by gi l paste thng tin  bc 1 vo editor khi ny ri save li.\n\n# 4. secret_key_base\n\nNu lm theo hng dn bn trn, ta s thu c mt file m ho v d: `credentials.yml.enc` c cha ni dung ngay c khi ta mi va khi to project. iu g  xy ra? Ti cn cha kp edit th n ly thng tin g m m ho ra ni dung  vy? Cu tr li l mt th c to km project ca bn c tn l `secret_key_base` s l th u tin c t ng lu m ho vo file `credentials.yml.enc`.\n\nSao li phc tp nh vy? n vi `RAILS_MASTER_KEY`  trn c quan h g khng? Cu tr li l khng? `secret_key_base` c rails sinh ra khi to project, n m bo rng khng th c hai ng dng rails c chung mt `secet_key_base`, ci key s c s dng  o bo th nh du tnh duy nht ca mt project v n cn c dng lm nhiu vic hay ho khc ti s trnh by trong cc bi vit sp ti.\n\n to ra mt secret_key_base bn c th s dng lnh sau:\n\n```ruby\nrails secret\n```\n\n# Kt lun\n\nHy  li bnh lun bn di nu bn c  kin khc hoc phn hi v ni dung bi vit nh.\n","source":"_posts/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails.md","raw":"---\ntitle: \"Lu Tr Thng Tin Bo Mt?\"\ndate: 2019-02-22\ndraft: false\ntags: [\"secure\", \"rails\"]\ncategories: [\"rails notes\"]\nmytag: \"Rails\"\nmytrend: \"COOL\"\n---\n\n# t vn \n\nKhi cn Interns ti Framgia, trong mt sn phm bt buc ca chng trnh thc tp, ti cn nh, mentor  yu cu ti lm chc nng gi mail cho ng dng rails. y thc s l mt task kh vi mt ngi non nt kinh nghim nh ti khi y, m rng google mt lt cng tm ra cch lm v p dng thnh cng, to PR lng hn hoan, no ng ngay sau  ti  b mentor mt st mt trn kinh hong. Nguyn nhn l do trong lc config mi trng  gi mail, ti   thng tin email ca ti vo file config v commit ln github, lc  ngh bng cng tc \"G m lm kh nhau qu vy? Interns khng lng thi m lm g gh, commit ln  th sao...\". Gi th hin nhin l ti nhn nhn c sai lm , v hiu c nhng hiu bit m m v config v bo mt s khin ng dng ca ti d tan tnh nh th no. Ngoi thng tin nh email, trong d n ca chng ta i khi cn nhng thng tin v cng quan trng nh key ca dch v lu tr m my, thng tin ng nhp bn th ba, hay mt chui b n c gi di ci tn `secret_key`. Bi vit ny s trnh by v cch x l nhng thng tin nhy cm k trn.\n\n# Lun bn\n\n# 1. Khi qut\n\nBi ton ny n gin hiu nh sau: Mt project bt k s lun c nhng thng tin cu hnh v cng quan trng, bt buc phi lun gi chng private, cn lm cch no  gi chng private trong rails?\nCu tr li l tu vo mi phin bn rails, s c (c th c) nhng cch khc nhau  x l vn  ny. Hy i n cc du mc c th di y.\n\n# 2. Rails 4.1\n\nPhin bn rails ny s dng mt file c tn `secrets.yml`, y l file s lu ton b cc thng tin nhy cm chng ta  ni  trn.\nVi thit k nh ny ta c hai la chn cho ng dng ca mnh:\n1. em ht thng tin nhy cm di ng text b vo file ny, tuy nhin file ny phi c b vo trong danh mc ca `gitignore`  m bo thng tin trong  khng b bn v tnh hay hu  commit i u .\n\n2. Thng tin nhy cm lu trong file ny thay v c lu di dng text th s c lu trong my ca bn doi dng `bin mi trng` v trong file `secrets.yml` ch s dng phng thc `ENV` m rails cung cp  gi li cc thng tin  ln, vi la chn ny bn c th commit file ny thoi mi,  cc my tnh ng nghip,  c th s dng c nhng config ny th buc h phi thit lp bin mi trng trn my tnh ca h cho ph hp.\n\nNhc im: d s dng cch no, th  ng dng hot ng c th vn phi truyn gi tr cc thng tin nhy cm ny t my ca bn ln mt con vps khi trin khai chng hn, khng cn cch no khc. C th bn phi copy tng dng thng tin nhy cm ri paste qua remote shell  thit lp (vi nhng d n ln c rt nhiu thng tin quan trng th y l 1 cng vic vt v tim tng nguy c sai st).\n\nNote: Thay v s dng file `secrets.yml`, ta c th s dng mt file khc nh `application.yml`, mc ch v chc nng ca chng l tng ng.\n\n# 3. Rails 5.1\n\nSang n phin bn rails 5.1, mt thay i ln  ti. Thay v lu thng tin dng text hoc triu hi thng qua bin mi trng, rails khi ny cung cp kh nng m ho cho cc thng tin nhy cm ny.\nCch chng hot ng nh sau:\n\nMt file tn `secrets.yml.key` s cha gi tr ca mt bin tn `RAILS_MASTER_KEY`, bin ny c gi tr l mt chui, c chc nng c s dng  m ho v gii m cc thng tin quan trng.\n\nNi dung thng tin **sau** m ho s c lu ti file `secrets.yml.enc`\n\nVy cn file `secrets.yml` trong rails 4 gi cn khng? Cu tr li l bn vn c th s dng file ny, tuy nhin trn cng mt mi trng, nu c c file `secrets.yml` v `secrets.yml.enc` th hai file ny s c merge.\n\n c th s dng tnh nng encypt ny ca rails 5.1 ta setup nh sau:\n\n```ruby\nrails secrets:setup\n```\nSau cu lnh ny hai file `secrets.yml.key` v `secrets.yml.enc` s c to ra.  thm xo sa ni dung trong `secrets.yml.enc` ta s dng lnh sau:\n\n```ruby\nrails secrets:edit\n```\n\nCu lnh ny s m ni dung file `secrets.yml.enc` di dng  gii m. Bn c th thoi mi thm xo, sa cc thng tin nhy cm, sau  khi bn save li v tt editor th file `secrets.yml.enc` s t ng c cp nhp phn m ho mi nht khi c thm thng tin.\n\nTi thch dng `vim`  chnh sa, v ti khng mun set mc nh editor nn ti s dng cu lnh sau: `EDITOR=vi rails secrets:edit`.\n\nu im:\n\n1. Thay v phi qun l nhiu bin mi trng, gi y mi th u nm trong mt file.\n\n2. Vic c th commit `secrets.yml.enc` gip chng ta nm c lch s thay i ca file ny.\n\nNote: Mt im quan trng bn cn lu ,  l ti khi vit bi vit ny th ti vn cha thy rails s gii m thng tin m ho trong file `secrets.yml.enc`, chng ta buc phi lm th cng  nhc rails lm iu  bng cch thm vo config file ca bn `config.read_encrypted_secrets = true`. Vi cu lnh setup bn trn, dng config trn  c add vo file config ca production. Nu bn mun s dng tnh nng ny cho mi trng development th hy thm dng config ny vo file `config/environments/development.rb`.\n\n# 3. Rails 5.2\n\n tng trong rails 5.2 khng thay i nhiu so vi rails 5.1. Nhng thay v lu key  encrypt/decrypt trong file secrets.yml.key gi n c lu trong file `master.key` (tuy nhin nu khng s dng file th c rails 5.2 v 5.1 u c th gi bin mi trng RAILS_MASTER_KEY  s dng).\n\nFile lu thng tin  c m ho cng c thay i t secrets.yml.enc thnh `credentials.yml.enc`.   l nhng im khc bit duy nht.\n\n chnh sa thng tin trong file m ho ta s dng lnh:\n\n```ruby\nEDITOR=vi rails credentials:edit\n```\nKhng cn dng lnh setup nh trn, v trong rails 5.2, hai file key v m ho c sinh ra cng project.\n\nTa c th truy xut gi tr c gii m trong file `credentials.yml.enc` nh sau:\n\n```ruby\nRails.application.credentials.ten_bien_trong_credentials\n```\n\nLm g khi bn mun thay th `master.key`?\n\n1. `rails credentials:show` dng lnh ny  hin th thng tin dng gii m ra editor, copy chng.\n\n2. Xo hai file `master.key` v `credentials.yml.enc` i.\n\n3. `EDITOR=vim rails credentials:edit` vi lnh sau bn s generate li hai file mi. Vic cn lm by gi l paste thng tin  bc 1 vo editor khi ny ri save li.\n\n# 4. secret_key_base\n\nNu lm theo hng dn bn trn, ta s thu c mt file m ho v d: `credentials.yml.enc` c cha ni dung ngay c khi ta mi va khi to project. iu g  xy ra? Ti cn cha kp edit th n ly thng tin g m m ho ra ni dung  vy? Cu tr li l mt th c to km project ca bn c tn l `secret_key_base` s l th u tin c t ng lu m ho vo file `credentials.yml.enc`.\n\nSao li phc tp nh vy? n vi `RAILS_MASTER_KEY`  trn c quan h g khng? Cu tr li l khng? `secret_key_base` c rails sinh ra khi to project, n m bo rng khng th c hai ng dng rails c chung mt `secet_key_base`, ci key s c s dng  o bo th nh du tnh duy nht ca mt project v n cn c dng lm nhiu vic hay ho khc ti s trnh by trong cc bi vit sp ti.\n\n to ra mt secret_key_base bn c th s dng lnh sau:\n\n```ruby\nrails secret\n```\n\n# Kt lun\n\nHy  li bnh lun bn di nu bn c  kin khc hoc phn hi v ni dung bi vit nh.\n","slug":"2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails","published":1,"updated":"2019-11-13T04:01:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe25000l8ers8s6m3ksb","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Khi cn Interns ti Framgia, trong mt sn phm bt buc ca chng trnh thc tp, ti cn nh, mentor  yu cu ti lm chc nng gi mail cho ng dng rails. y thc s l mt task kh vi mt ngi non nt kinh nghim nh ti khi y, m rng google mt lt cng tm ra cch lm v p dng thnh cng, to PR lng hn hoan, no ng ngay sau  ti  b mentor mt st mt trn kinh hong. Nguyn nhn l do trong lc config mi trng  gi mail, ti   thng tin email ca ti vo file config v commit ln github, lc  ngh bng cng tc G m lm kh nhau qu vy? Interns khng lng thi m lm g gh, commit ln  th sao. Gi th hin nhin l ti nhn nhn c sai lm , v hiu c nhng hiu bit m m v config v bo mt s khin ng dng ca ti d tan tnh nh th no. Ngoi thng tin nh email, trong d n ca chng ta i khi cn nhng thng tin v cng quan trng nh key ca dch v lu tr m my, thng tin ng nhp bn th ba, hay mt chui b n c gi di ci tn <code>secret_key</code>. Bi vit ny s trnh by v cch x l nhng thng tin nhy cm k trn.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Khai-quat\"><a href=\"#1-Khai-quat\" class=\"headerlink\" title=\"1. Khi qut\"></a>1. Khi qut</h1><p>Bi ton ny n gin hiu nh sau: Mt project bt k s lun c nhng thng tin cu hnh v cng quan trng, bt buc phi lun gi chng private, cn lm cch no  gi chng private trong rails?<br>Cu tr li l tu vo mi phin bn rails, s c (c th c) nhng cch khc nhau  x l vn  ny. Hy i n cc du mc c th di y.</p>\n<h1 id=\"2-Rails-4-1\"><a href=\"#2-Rails-4-1\" class=\"headerlink\" title=\"2. Rails 4.1\"></a>2. Rails 4.1</h1><p>Phin bn rails ny s dng mt file c tn <code>secrets.yml</code>, y l file s lu ton b cc thng tin nhy cm chng ta  ni  trn.<br>Vi thit k nh ny ta c hai la chn cho ng dng ca mnh:</p>\n<ol>\n<li><p>em ht thng tin nhy cm di ng text b vo file ny, tuy nhin file ny phi c b vo trong danh mc ca <code>gitignore</code>  m bo thng tin trong  khng b bn v tnh hay hu  commit i u .</p>\n</li>\n<li><p>Thng tin nhy cm lu trong file ny thay v c lu di dng text th s c lu trong my ca bn doi dng <code>bin mi trng</code> v trong file <code>secrets.yml</code> ch s dng phng thc <code>ENV</code> m rails cung cp  gi li cc thng tin  ln, vi la chn ny bn c th commit file ny thoi mi,  cc my tnh ng nghip,  c th s dng c nhng config ny th buc h phi thit lp bin mi trng trn my tnh ca h cho ph hp.</p>\n</li>\n</ol>\n<p>Nhc im: d s dng cch no, th  ng dng hot ng c th vn phi truyn gi tr cc thng tin nhy cm ny t my ca bn ln mt con vps khi trin khai chng hn, khng cn cch no khc. C th bn phi copy tng dng thng tin nhy cm ri paste qua remote shell  thit lp (vi nhng d n ln c rt nhiu thng tin quan trng th y l 1 cng vic vt v tim tng nguy c sai st).</p>\n<p>Note: Thay v s dng file <code>secrets.yml</code>, ta c th s dng mt file khc nh <code>application.yml</code>, mc ch v chc nng ca chng l tng ng.</p>\n<h1 id=\"3-Rails-5-1\"><a href=\"#3-Rails-5-1\" class=\"headerlink\" title=\"3. Rails 5.1\"></a>3. Rails 5.1</h1><p>Sang n phin bn rails 5.1, mt thay i ln  ti. Thay v lu thng tin dng text hoc triu hi thng qua bin mi trng, rails khi ny cung cp kh nng m ho cho cc thng tin nhy cm ny.<br>Cch chng hot ng nh sau:</p>\n<p>Mt file tn <code>secrets.yml.key</code> s cha gi tr ca mt bin tn <code>RAILS_MASTER_KEY</code>, bin ny c gi tr l mt chui, c chc nng c s dng  m ho v gii m cc thng tin quan trng.</p>\n<p>Ni dung thng tin <strong>sau</strong> m ho s c lu ti file <code>secrets.yml.enc</code></p>\n<p>Vy cn file <code>secrets.yml</code> trong rails 4 gi cn khng? Cu tr li l bn vn c th s dng file ny, tuy nhin trn cng mt mi trng, nu c c file <code>secrets.yml</code> v <code>secrets.yml.enc</code> th hai file ny s c merge.</p>\n<p> c th s dng tnh nng encypt ny ca rails 5.1 ta setup nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails <span class=\"symbol\">secrets:</span>setup</span><br></pre></td></tr></table></figure>\n<p>Sau cu lnh ny hai file <code>secrets.yml.key</code> v <code>secrets.yml.enc</code> s c to ra.  thm xo sa ni dung trong <code>secrets.yml.enc</code> ta s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails <span class=\"symbol\">secrets:</span>edit</span><br></pre></td></tr></table></figure>\n\n<p>Cu lnh ny s m ni dung file <code>secrets.yml.enc</code> di dng  gii m. Bn c th thoi mi thm xo, sa cc thng tin nhy cm, sau  khi bn save li v tt editor th file <code>secrets.yml.enc</code> s t ng c cp nhp phn m ho mi nht khi c thm thng tin.</p>\n<p>Ti thch dng <code>vim</code>  chnh sa, v ti khng mun set mc nh editor nn ti s dng cu lnh sau: <code>EDITOR=vi rails secrets:edit</code>.</p>\n<p>u im:</p>\n<ol>\n<li><p>Thay v phi qun l nhiu bin mi trng, gi y mi th u nm trong mt file.</p>\n</li>\n<li><p>Vic c th commit <code>secrets.yml.enc</code> gip chng ta nm c lch s thay i ca file ny.</p>\n</li>\n</ol>\n<p>Note: Mt im quan trng bn cn lu ,  l ti khi vit bi vit ny th ti vn cha thy rails s gii m thng tin m ho trong file <code>secrets.yml.enc</code>, chng ta buc phi lm th cng  nhc rails lm iu  bng cch thm vo config file ca bn <code>config.read_encrypted_secrets = true</code>. Vi cu lnh setup bn trn, dng config trn  c add vo file config ca production. Nu bn mun s dng tnh nng ny cho mi trng development th hy thm dng config ny vo file <code>config/environments/development.rb</code>.</p>\n<h1 id=\"3-Rails-5-2\"><a href=\"#3-Rails-5-2\" class=\"headerlink\" title=\"3. Rails 5.2\"></a>3. Rails 5.2</h1><p> tng trong rails 5.2 khng thay i nhiu so vi rails 5.1. Nhng thay v lu key  encrypt/decrypt trong file secrets.yml.key gi n c lu trong file <code>master.key</code> (tuy nhin nu khng s dng file th c rails 5.2 v 5.1 u c th gi bin mi trng RAILS_MASTER_KEY  s dng).</p>\n<p>File lu thng tin  c m ho cng c thay i t secrets.yml.enc thnh <code>credentials.yml.enc</code>.   l nhng im khc bit duy nht.</p>\n<p> chnh sa thng tin trong file m ho ta s dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EDITOR=vi rails <span class=\"symbol\">credentials:</span>edit</span><br></pre></td></tr></table></figure>\n<p>Khng cn dng lnh setup nh trn, v trong rails 5.2, hai file key v m ho c sinh ra cng project.</p>\n<p>Ta c th truy xut gi tr c gii m trong file <code>credentials.yml.enc</code> nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Rails.application.credentials.ten_bien_trong_credentials</span><br></pre></td></tr></table></figure>\n\n<p>Lm g khi bn mun thay th <code>master.key</code>?</p>\n<ol>\n<li><p><code>rails credentials:show</code> dng lnh ny  hin th thng tin dng gii m ra editor, copy chng.</p>\n</li>\n<li><p>Xo hai file <code>master.key</code> v <code>credentials.yml.enc</code> i.</p>\n</li>\n<li><p><code>EDITOR=vim rails credentials:edit</code> vi lnh sau bn s generate li hai file mi. Vic cn lm by gi l paste thng tin  bc 1 vo editor khi ny ri save li.</p>\n</li>\n</ol>\n<h1 id=\"4-secret-key-base\"><a href=\"#4-secret-key-base\" class=\"headerlink\" title=\"4. secret_key_base\"></a>4. secret_key_base</h1><p>Nu lm theo hng dn bn trn, ta s thu c mt file m ho v d: <code>credentials.yml.enc</code> c cha ni dung ngay c khi ta mi va khi to project. iu g  xy ra? Ti cn cha kp edit th n ly thng tin g m m ho ra ni dung  vy? Cu tr li l mt th c to km project ca bn c tn l <code>secret_key_base</code> s l th u tin c t ng lu m ho vo file <code>credentials.yml.enc</code>.</p>\n<p>Sao li phc tp nh vy? n vi <code>RAILS_MASTER_KEY</code>  trn c quan h g khng? Cu tr li l khng? <code>secret_key_base</code> c rails sinh ra khi to project, n m bo rng khng th c hai ng dng rails c chung mt <code>secet_key_base</code>, ci key s c s dng  o bo th nh du tnh duy nht ca mt project v n cn c dng lm nhiu vic hay ho khc ti s trnh by trong cc bi vit sp ti.</p>\n<p> to ra mt secret_key_base bn c th s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails secret</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Hy  li bnh lun bn di nu bn c  kin khc hoc phn hi v ni dung bi vit nh.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Khi cn Interns ti Framgia, trong mt sn phm bt buc ca chng trnh thc tp, ti cn nh, mentor  yu cu ti lm chc nng gi mail cho ng dng rails. y thc s l mt task kh vi mt ngi non nt kinh nghim nh ti khi y, m rng google mt lt cng tm ra cch lm v p dng thnh cng, to PR lng hn hoan, no ng ngay sau  ti  b mentor mt st mt trn kinh hong. Nguyn nhn l do trong lc config mi trng  gi mail, ti   thng tin email ca ti vo file config v commit ln github, lc  ngh bng cng tc G m lm kh nhau qu vy? Interns khng lng thi m lm g gh, commit ln  th sao. Gi th hin nhin l ti nhn nhn c sai lm , v hiu c nhng hiu bit m m v config v bo mt s khin ng dng ca ti d tan tnh nh th no. Ngoi thng tin nh email, trong d n ca chng ta i khi cn nhng thng tin v cng quan trng nh key ca dch v lu tr m my, thng tin ng nhp bn th ba, hay mt chui b n c gi di ci tn <code>secret_key</code>. Bi vit ny s trnh by v cch x l nhng thng tin nhy cm k trn.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Khai-quat\"><a href=\"#1-Khai-quat\" class=\"headerlink\" title=\"1. Khi qut\"></a>1. Khi qut</h1><p>Bi ton ny n gin hiu nh sau: Mt project bt k s lun c nhng thng tin cu hnh v cng quan trng, bt buc phi lun gi chng private, cn lm cch no  gi chng private trong rails?<br>Cu tr li l tu vo mi phin bn rails, s c (c th c) nhng cch khc nhau  x l vn  ny. Hy i n cc du mc c th di y.</p>\n<h1 id=\"2-Rails-4-1\"><a href=\"#2-Rails-4-1\" class=\"headerlink\" title=\"2. Rails 4.1\"></a>2. Rails 4.1</h1><p>Phin bn rails ny s dng mt file c tn <code>secrets.yml</code>, y l file s lu ton b cc thng tin nhy cm chng ta  ni  trn.<br>Vi thit k nh ny ta c hai la chn cho ng dng ca mnh:</p>\n<ol>\n<li><p>em ht thng tin nhy cm di ng text b vo file ny, tuy nhin file ny phi c b vo trong danh mc ca <code>gitignore</code>  m bo thng tin trong  khng b bn v tnh hay hu  commit i u .</p>\n</li>\n<li><p>Thng tin nhy cm lu trong file ny thay v c lu di dng text th s c lu trong my ca bn doi dng <code>bin mi trng</code> v trong file <code>secrets.yml</code> ch s dng phng thc <code>ENV</code> m rails cung cp  gi li cc thng tin  ln, vi la chn ny bn c th commit file ny thoi mi,  cc my tnh ng nghip,  c th s dng c nhng config ny th buc h phi thit lp bin mi trng trn my tnh ca h cho ph hp.</p>\n</li>\n</ol>\n<p>Nhc im: d s dng cch no, th  ng dng hot ng c th vn phi truyn gi tr cc thng tin nhy cm ny t my ca bn ln mt con vps khi trin khai chng hn, khng cn cch no khc. C th bn phi copy tng dng thng tin nhy cm ri paste qua remote shell  thit lp (vi nhng d n ln c rt nhiu thng tin quan trng th y l 1 cng vic vt v tim tng nguy c sai st).</p>\n<p>Note: Thay v s dng file <code>secrets.yml</code>, ta c th s dng mt file khc nh <code>application.yml</code>, mc ch v chc nng ca chng l tng ng.</p>\n<h1 id=\"3-Rails-5-1\"><a href=\"#3-Rails-5-1\" class=\"headerlink\" title=\"3. Rails 5.1\"></a>3. Rails 5.1</h1><p>Sang n phin bn rails 5.1, mt thay i ln  ti. Thay v lu thng tin dng text hoc triu hi thng qua bin mi trng, rails khi ny cung cp kh nng m ho cho cc thng tin nhy cm ny.<br>Cch chng hot ng nh sau:</p>\n<p>Mt file tn <code>secrets.yml.key</code> s cha gi tr ca mt bin tn <code>RAILS_MASTER_KEY</code>, bin ny c gi tr l mt chui, c chc nng c s dng  m ho v gii m cc thng tin quan trng.</p>\n<p>Ni dung thng tin <strong>sau</strong> m ho s c lu ti file <code>secrets.yml.enc</code></p>\n<p>Vy cn file <code>secrets.yml</code> trong rails 4 gi cn khng? Cu tr li l bn vn c th s dng file ny, tuy nhin trn cng mt mi trng, nu c c file <code>secrets.yml</code> v <code>secrets.yml.enc</code> th hai file ny s c merge.</p>\n<p> c th s dng tnh nng encypt ny ca rails 5.1 ta setup nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails <span class=\"symbol\">secrets:</span>setup</span><br></pre></td></tr></table></figure>\n<p>Sau cu lnh ny hai file <code>secrets.yml.key</code> v <code>secrets.yml.enc</code> s c to ra.  thm xo sa ni dung trong <code>secrets.yml.enc</code> ta s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails <span class=\"symbol\">secrets:</span>edit</span><br></pre></td></tr></table></figure>\n\n<p>Cu lnh ny s m ni dung file <code>secrets.yml.enc</code> di dng  gii m. Bn c th thoi mi thm xo, sa cc thng tin nhy cm, sau  khi bn save li v tt editor th file <code>secrets.yml.enc</code> s t ng c cp nhp phn m ho mi nht khi c thm thng tin.</p>\n<p>Ti thch dng <code>vim</code>  chnh sa, v ti khng mun set mc nh editor nn ti s dng cu lnh sau: <code>EDITOR=vi rails secrets:edit</code>.</p>\n<p>u im:</p>\n<ol>\n<li><p>Thay v phi qun l nhiu bin mi trng, gi y mi th u nm trong mt file.</p>\n</li>\n<li><p>Vic c th commit <code>secrets.yml.enc</code> gip chng ta nm c lch s thay i ca file ny.</p>\n</li>\n</ol>\n<p>Note: Mt im quan trng bn cn lu ,  l ti khi vit bi vit ny th ti vn cha thy rails s gii m thng tin m ho trong file <code>secrets.yml.enc</code>, chng ta buc phi lm th cng  nhc rails lm iu  bng cch thm vo config file ca bn <code>config.read_encrypted_secrets = true</code>. Vi cu lnh setup bn trn, dng config trn  c add vo file config ca production. Nu bn mun s dng tnh nng ny cho mi trng development th hy thm dng config ny vo file <code>config/environments/development.rb</code>.</p>\n<h1 id=\"3-Rails-5-2\"><a href=\"#3-Rails-5-2\" class=\"headerlink\" title=\"3. Rails 5.2\"></a>3. Rails 5.2</h1><p> tng trong rails 5.2 khng thay i nhiu so vi rails 5.1. Nhng thay v lu key  encrypt/decrypt trong file secrets.yml.key gi n c lu trong file <code>master.key</code> (tuy nhin nu khng s dng file th c rails 5.2 v 5.1 u c th gi bin mi trng RAILS_MASTER_KEY  s dng).</p>\n<p>File lu thng tin  c m ho cng c thay i t secrets.yml.enc thnh <code>credentials.yml.enc</code>.   l nhng im khc bit duy nht.</p>\n<p> chnh sa thng tin trong file m ho ta s dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EDITOR=vi rails <span class=\"symbol\">credentials:</span>edit</span><br></pre></td></tr></table></figure>\n<p>Khng cn dng lnh setup nh trn, v trong rails 5.2, hai file key v m ho c sinh ra cng project.</p>\n<p>Ta c th truy xut gi tr c gii m trong file <code>credentials.yml.enc</code> nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Rails.application.credentials.ten_bien_trong_credentials</span><br></pre></td></tr></table></figure>\n\n<p>Lm g khi bn mun thay th <code>master.key</code>?</p>\n<ol>\n<li><p><code>rails credentials:show</code> dng lnh ny  hin th thng tin dng gii m ra editor, copy chng.</p>\n</li>\n<li><p>Xo hai file <code>master.key</code> v <code>credentials.yml.enc</code> i.</p>\n</li>\n<li><p><code>EDITOR=vim rails credentials:edit</code> vi lnh sau bn s generate li hai file mi. Vic cn lm by gi l paste thng tin  bc 1 vo editor khi ny ri save li.</p>\n</li>\n</ol>\n<h1 id=\"4-secret-key-base\"><a href=\"#4-secret-key-base\" class=\"headerlink\" title=\"4. secret_key_base\"></a>4. secret_key_base</h1><p>Nu lm theo hng dn bn trn, ta s thu c mt file m ho v d: <code>credentials.yml.enc</code> c cha ni dung ngay c khi ta mi va khi to project. iu g  xy ra? Ti cn cha kp edit th n ly thng tin g m m ho ra ni dung  vy? Cu tr li l mt th c to km project ca bn c tn l <code>secret_key_base</code> s l th u tin c t ng lu m ho vo file <code>credentials.yml.enc</code>.</p>\n<p>Sao li phc tp nh vy? n vi <code>RAILS_MASTER_KEY</code>  trn c quan h g khng? Cu tr li l khng? <code>secret_key_base</code> c rails sinh ra khi to project, n m bo rng khng th c hai ng dng rails c chung mt <code>secet_key_base</code>, ci key s c s dng  o bo th nh du tnh duy nht ca mt project v n cn c dng lm nhiu vic hay ho khc ti s trnh by trong cc bi vit sp ti.</p>\n<p> to ra mt secret_key_base bn c th s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails secret</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Hy  li bnh lun bn di nu bn c  kin khc hoc phn hi v ni dung bi vit nh.</p>\n"},{"title":"Cc N N + 1 V Hng X L","date":"2019-02-24T17:00:00.000Z","draft":false,"mytag":"Rails","mytrend":"COOL","_content":"\n# t vn \n\nC th bn  tng nghe qua v N+1, y l mt ch  c bn trong vn  qun l csdl trong code, bi vit ny s trnh by v n di gc  s dng trong ruby on rails vi framework `ActiveRecord`\n\n# Lun bn\n\n# N+1 query\n\nXt mt v d:\n\nTi c mt ng dng n gin, vi hai bng csdl, bng th nht l bng users, bng th hai l bng articles, mt user c th c nhiu articles nhng mt article ch thuc v user. Hy xem on m di y:\n\n```ruby\nUser.all.each do |user|\n  user.articles\nend\n```\non code trn s duyt qua tt c user c trong csdl ri ly tt c cc articles ng vi tng user. Rt tng minh v d hiu.\n\nTi c 5 user mu trong csdl nn cc cu lnh sql sinh ra sau on code trn nh sau:\n\n```ruby\n# cu lnh ly ht users ln\nSELECT \"users\".* FROM \"users\"\n# ng vi mi user query ly tt c articles ln\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 1], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 2], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 3], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 4], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 5], [\"LIMIT\", 11]]\n```\n\ny chnh l v d in hnh v `N+1`, `N` y l 5 (s lng user c trong csdl) v `1` chnh l cu lnh sql u tin dng  ly tt c user ln.\n\nNhn nh v hi, m thc ra  v d ny cng v hi tht v ch c 5 record user, nn thi gian load cng khng thm thp g, tuy nhin trong thc t th d liu c th rt ln, ln n hng triu record v nu load d liu nh ny th y l mt vn  ln cho hiu nng ca trang web. Hy c tip mc 2  tm v gii php cho tnh hung ny.\n\n# 2. Gii php\n\nVn   c, gi chng ta cn tm mt gii php lm sao  kt qu tr v khng i, nhng lng truy vn sql trong csdl phi nh hn.\n\nCc phng n:\n\n1. S dng `select in()`.\n\n2. S dng `joins`.  c k hn v joins, th nn xem  [y](https://www.w3schools.com/sql/sql_join.asp)\n\nS dng select in() s tit kim truy vn i rt nhiu, nu v d bn trn ta s dng select in() th cc sql query cn thit s l nh sau:\n\n```ruby\n# ly tt c query\nSELECT \"users\".* FROM \"users\"\n# ly articles ng vi tng user\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (1, 2, 3, 4, 5)\n```\n\nTuyt vi, t 6(N + 1) truy vn gi  tr thnh cn 2.\n\nVi cch th 2 l s dng `joins`:\n\njoins hiu n gin l ghp hai bng li vi nhau (ly mt s field cn thit  bng ny, gp vi vi field cn thit  bng kia khi m record  hai bn tho mn mt iu kin no ), ri t  thnh mt bng tm dng trong qu trnh bn s dng.\n\nQuay tr v v d ban u, cu truy vn by gi s tr thnh:\n\n```ruby\nSELECT User.name, Article.title\n      FROM User\n      INNER JOIN Article ON User.id = Article.user_id\n```\n\nLy vi field cn thit(name ca user v title ca Article).\nBng cch tho mn iu kin no (id ca user bng vi user_id ca article).\n\nVy t N+1 query ban u,  tr thnh mt query duy nht.\n\nn lc ny  c th kt lun l joins tt hn select in() c cha? Cha, cu tr li s l nh vy. Sang mc 3 chng ta s tm hiu v cch x l N+1 thng qua ActiveRecord\n\n# 3. X l N+1 query trong ActiveRecord\n\nTrong ActiveRecord cung cp 3 phng thc  loi b N+1,\n\n1) S dng `preload`\n\n```ruby\nUser.preload(:articles)\n# sql sinh ra\nUser Load (0.2ms)  SELECT  \"users\".* FROM \"users\" LIMIT ?  [[\"LIMIT\", 11]]\nArticle Load (0.4ms)  SELECT \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (?, ?, ?)  [[\"user_id\", 1], [\"user_id\", 2], [\"user_id\", 3]]\n```\nPreload s lun s dng `select in()`\n\n2) S dng `Eagerload`\n\n```ruby\nUser.eager_load(:articles)\n# sql sinh ra\nSELECT  DISTINCT \"users\".\"id\" FROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\" LIMIT ?  [[\"LIMIT\", 11]]\n\nSELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"created_at\" AS t0_r2,\n\"users\".\"updated_at\" AS t0_r3, \"articles\".\"id\" AS t1_r0, \"articles\".\"name\" AS t1_r1,\n\"articles\".\"user_id\" AS t1_r2, \"articles\".\"created_at\" AS t1_r3, \"articles\".\"updated_at\" AS t1_r4\nFROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\"\nWHERE \"users\".\"id\" IN (?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3]]\n```\n\neager_load lun s dng `joins`\n\n3) S dng `Inludes`\n\n```ruby\n# cch 1\nUser.includes(:articles)\n# sql sinh ra\nSELECT  \"users\".* FROM \"users\" LIMIT ?  [[\"LIMIT\", 11]]\nSELECT \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (?, ?, ?)  [[\"user_id\", 1], [\"user_id\", 2], [\"user_id\", 3]]\n#=> ging preload\n\n# cch 2\nUser.includes(:articles).references(:articles)\n# sql sinh ra\nSELECT  DISTINCT \"users\".\"id\" FROM \"users\" LEFT OUTER JOIN \"articles\"\nON \"articles\".\"user_id\" = \"users\".\"id\" LIMIT ?  [[\"LIMIT\", 11]]\nSELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"created_at\" AS t0_r2,\n\"users\".\"updated_at\" AS t0_r3, \"articles\".\"id\" AS t1_r0, \"articles\".\"name\" AS t1_r1,\n\"articles\".\"user_id\" AS t1_r2, \"articles\".\"created_at\" AS t1_r3, \"articles\".\"updated_at\" AS t1_r4\nFROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\"\nWHERE \"users\".\"id\" IN (?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3]]\n#=> ging eager_load\n```\nVy mc nh th `includes` s dng select in(), nhng cng c th chuyn qua s dng joins nu thm method references pha sau.\n\n# Kt lun\n\nQua v d trn, ta  tm hiu c mt s cch c bn  loi b N+1, vi vic s dng joins s t query phi thc thi nht, nhng iu ny khng m bo rng s dng joins l ti u, v vi mi query sql, thi gian v cng sc my tnh phi dng l khc nhau, khng phi cu sql no cng c thi gian thc hin ngang nhau.\n\nS dng joins trong nhiu trng hp csdl qu ln cng khng phi l mt  hay, khi bn cht ca joins l duyt tun t qua hai (nhiu) bng cn joins,  tm nhng phn t ph hp ri cho vo mt bng tm. Hai vn  thy ngay l vic phi duyt tun t hai hay nhiu bng l mt truy vn tn ti nguyn, th hai d liu c b vo mng tm hin nhin ta cn mt vng nh  lu ci bng tm ny.\n\n i su hn v vn  hiu nng, cc bi tip sau chng ta s tho lun v n.\n","source":"_posts/2019-02-25-van-de-n-1-trong-rails.md","raw":"---\ntitle: \"Cc N N + 1 V Hng X L\"\ndate: 2019-02-25\ndraft: false\ntags: [\"database\", \"rails\"]\ncategories: [\"rails notes\"]\nmytag: \"Rails\"\nmytrend: \"COOL\"\n---\n\n# t vn \n\nC th bn  tng nghe qua v N+1, y l mt ch  c bn trong vn  qun l csdl trong code, bi vit ny s trnh by v n di gc  s dng trong ruby on rails vi framework `ActiveRecord`\n\n# Lun bn\n\n# N+1 query\n\nXt mt v d:\n\nTi c mt ng dng n gin, vi hai bng csdl, bng th nht l bng users, bng th hai l bng articles, mt user c th c nhiu articles nhng mt article ch thuc v user. Hy xem on m di y:\n\n```ruby\nUser.all.each do |user|\n  user.articles\nend\n```\non code trn s duyt qua tt c user c trong csdl ri ly tt c cc articles ng vi tng user. Rt tng minh v d hiu.\n\nTi c 5 user mu trong csdl nn cc cu lnh sql sinh ra sau on code trn nh sau:\n\n```ruby\n# cu lnh ly ht users ln\nSELECT \"users\".* FROM \"users\"\n# ng vi mi user query ly tt c articles ln\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 1], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 2], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 3], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 4], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 5], [\"LIMIT\", 11]]\n```\n\ny chnh l v d in hnh v `N+1`, `N` y l 5 (s lng user c trong csdl) v `1` chnh l cu lnh sql u tin dng  ly tt c user ln.\n\nNhn nh v hi, m thc ra  v d ny cng v hi tht v ch c 5 record user, nn thi gian load cng khng thm thp g, tuy nhin trong thc t th d liu c th rt ln, ln n hng triu record v nu load d liu nh ny th y l mt vn  ln cho hiu nng ca trang web. Hy c tip mc 2  tm v gii php cho tnh hung ny.\n\n# 2. Gii php\n\nVn   c, gi chng ta cn tm mt gii php lm sao  kt qu tr v khng i, nhng lng truy vn sql trong csdl phi nh hn.\n\nCc phng n:\n\n1. S dng `select in()`.\n\n2. S dng `joins`.  c k hn v joins, th nn xem  [y](https://www.w3schools.com/sql/sql_join.asp)\n\nS dng select in() s tit kim truy vn i rt nhiu, nu v d bn trn ta s dng select in() th cc sql query cn thit s l nh sau:\n\n```ruby\n# ly tt c query\nSELECT \"users\".* FROM \"users\"\n# ly articles ng vi tng user\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (1, 2, 3, 4, 5)\n```\n\nTuyt vi, t 6(N + 1) truy vn gi  tr thnh cn 2.\n\nVi cch th 2 l s dng `joins`:\n\njoins hiu n gin l ghp hai bng li vi nhau (ly mt s field cn thit  bng ny, gp vi vi field cn thit  bng kia khi m record  hai bn tho mn mt iu kin no ), ri t  thnh mt bng tm dng trong qu trnh bn s dng.\n\nQuay tr v v d ban u, cu truy vn by gi s tr thnh:\n\n```ruby\nSELECT User.name, Article.title\n      FROM User\n      INNER JOIN Article ON User.id = Article.user_id\n```\n\nLy vi field cn thit(name ca user v title ca Article).\nBng cch tho mn iu kin no (id ca user bng vi user_id ca article).\n\nVy t N+1 query ban u,  tr thnh mt query duy nht.\n\nn lc ny  c th kt lun l joins tt hn select in() c cha? Cha, cu tr li s l nh vy. Sang mc 3 chng ta s tm hiu v cch x l N+1 thng qua ActiveRecord\n\n# 3. X l N+1 query trong ActiveRecord\n\nTrong ActiveRecord cung cp 3 phng thc  loi b N+1,\n\n1) S dng `preload`\n\n```ruby\nUser.preload(:articles)\n# sql sinh ra\nUser Load (0.2ms)  SELECT  \"users\".* FROM \"users\" LIMIT ?  [[\"LIMIT\", 11]]\nArticle Load (0.4ms)  SELECT \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (?, ?, ?)  [[\"user_id\", 1], [\"user_id\", 2], [\"user_id\", 3]]\n```\nPreload s lun s dng `select in()`\n\n2) S dng `Eagerload`\n\n```ruby\nUser.eager_load(:articles)\n# sql sinh ra\nSELECT  DISTINCT \"users\".\"id\" FROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\" LIMIT ?  [[\"LIMIT\", 11]]\n\nSELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"created_at\" AS t0_r2,\n\"users\".\"updated_at\" AS t0_r3, \"articles\".\"id\" AS t1_r0, \"articles\".\"name\" AS t1_r1,\n\"articles\".\"user_id\" AS t1_r2, \"articles\".\"created_at\" AS t1_r3, \"articles\".\"updated_at\" AS t1_r4\nFROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\"\nWHERE \"users\".\"id\" IN (?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3]]\n```\n\neager_load lun s dng `joins`\n\n3) S dng `Inludes`\n\n```ruby\n# cch 1\nUser.includes(:articles)\n# sql sinh ra\nSELECT  \"users\".* FROM \"users\" LIMIT ?  [[\"LIMIT\", 11]]\nSELECT \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (?, ?, ?)  [[\"user_id\", 1], [\"user_id\", 2], [\"user_id\", 3]]\n#=> ging preload\n\n# cch 2\nUser.includes(:articles).references(:articles)\n# sql sinh ra\nSELECT  DISTINCT \"users\".\"id\" FROM \"users\" LEFT OUTER JOIN \"articles\"\nON \"articles\".\"user_id\" = \"users\".\"id\" LIMIT ?  [[\"LIMIT\", 11]]\nSELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"created_at\" AS t0_r2,\n\"users\".\"updated_at\" AS t0_r3, \"articles\".\"id\" AS t1_r0, \"articles\".\"name\" AS t1_r1,\n\"articles\".\"user_id\" AS t1_r2, \"articles\".\"created_at\" AS t1_r3, \"articles\".\"updated_at\" AS t1_r4\nFROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\"\nWHERE \"users\".\"id\" IN (?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3]]\n#=> ging eager_load\n```\nVy mc nh th `includes` s dng select in(), nhng cng c th chuyn qua s dng joins nu thm method references pha sau.\n\n# Kt lun\n\nQua v d trn, ta  tm hiu c mt s cch c bn  loi b N+1, vi vic s dng joins s t query phi thc thi nht, nhng iu ny khng m bo rng s dng joins l ti u, v vi mi query sql, thi gian v cng sc my tnh phi dng l khc nhau, khng phi cu sql no cng c thi gian thc hin ngang nhau.\n\nS dng joins trong nhiu trng hp csdl qu ln cng khng phi l mt  hay, khi bn cht ca joins l duyt tun t qua hai (nhiu) bng cn joins,  tm nhng phn t ph hp ri cho vo mt bng tm. Hai vn  thy ngay l vic phi duyt tun t hai hay nhiu bng l mt truy vn tn ti nguyn, th hai d liu c b vo mng tm hin nhin ta cn mt vng nh  lu ci bng tm ny.\n\n i su hn v vn  hiu nng, cc bi tip sau chng ta s tho lun v n.\n","slug":"2019-02-25-van-de-n-1-trong-rails","published":1,"updated":"2019-11-13T04:02:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe28000p8ersf6ar4k0e","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>C th bn  tng nghe qua v N+1, y l mt ch  c bn trong vn  qun l csdl trong code, bi vit ny s trnh by v n di gc  s dng trong ruby on rails vi framework <code>ActiveRecord</code></p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"N-1-query\"><a href=\"#N-1-query\" class=\"headerlink\" title=\"N+1 query\"></a>N+1 query</h1><p>Xt mt v d:</p>\n<p>Ti c mt ng dng n gin, vi hai bng csdl, bng th nht l bng users, bng th hai l bng articles, mt user c th c nhiu articles nhng mt article ch thuc v user. Hy xem on m di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.all.each <span class=\"keyword\">do</span> <span class=\"params\">|user|</span></span><br><span class=\"line\">  user.articles</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<p>on code trn s duyt qua tt c user c trong csdl ri ly tt c cc articles ng vi tng user. Rt tng minh v d hiu.</p>\n<p>Ti c 5 user mu trong csdl nn cc cu lnh sql sinh ra sau on code trn nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cu lnh ly ht users ln</span></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span></span><br><span class=\"line\"><span class=\"comment\"># ng vi mi user query ly tt c articles ln</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">4</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">5</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br></pre></td></tr></table></figure>\n\n<p>y chnh l v d in hnh v <code>N+1</code>, <code>N</code> y l 5 (s lng user c trong csdl) v <code>1</code> chnh l cu lnh sql u tin dng  ly tt c user ln.</p>\n<p>Nhn nh v hi, m thc ra  v d ny cng v hi tht v ch c 5 record user, nn thi gian load cng khng thm thp g, tuy nhin trong thc t th d liu c th rt ln, ln n hng triu record v nu load d liu nh ny th y l mt vn  ln cho hiu nng ca trang web. Hy c tip mc 2  tm v gii php cho tnh hung ny.</p>\n<h1 id=\"2-Giai-phap\"><a href=\"#2-Giai-phap\" class=\"headerlink\" title=\"2. Gii php\"></a>2. Gii php</h1><p>Vn   c, gi chng ta cn tm mt gii php lm sao  kt qu tr v khng i, nhng lng truy vn sql trong csdl phi nh hn.</p>\n<p>Cc phng n:</p>\n<ol>\n<li><p>S dng <code>select in()</code>.</p>\n</li>\n<li><p>S dng <code>joins</code>.  c k hn v joins, th nn xem  <a href=\"https://www.w3schools.com/sql/sql_join.asp\" target=\"_blank\" rel=\"noopener\">y</a></p>\n</li>\n</ol>\n<p>S dng select in() s tit kim truy vn i rt nhiu, nu v d bn trn ta s dng select in() th cc sql query cn thit s l nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ly tt c query</span></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span></span><br><span class=\"line\"><span class=\"comment\"># ly articles ng vi tng user</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Tuyt vi, t 6(N + 1) truy vn gi  tr thnh cn 2.</p>\n<p>Vi cch th 2 l s dng <code>joins</code>:</p>\n<p>joins hiu n gin l ghp hai bng li vi nhau (ly mt s field cn thit  bng ny, gp vi vi field cn thit  bng kia khi m record  hai bn tho mn mt iu kin no ), ri t  thnh mt bng tm dng trong qu trnh bn s dng.</p>\n<p>Quay tr v v d ban u, cu truy vn by gi s tr thnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT User.name, Article.title</span><br><span class=\"line\">      FROM User</span><br><span class=\"line\">      INNER JOIN Article ON User.id = Article.user_id</span><br></pre></td></tr></table></figure>\n\n<p>Ly vi field cn thit(name ca user v title ca Article).<br>Bng cch tho mn iu kin no (id ca user bng vi user_id ca article).</p>\n<p>Vy t N+1 query ban u,  tr thnh mt query duy nht.</p>\n<p>n lc ny  c th kt lun l joins tt hn select in() c cha? Cha, cu tr li s l nh vy. Sang mc 3 chng ta s tm hiu v cch x l N+1 thng qua ActiveRecord</p>\n<h1 id=\"3-Xu-ly-N-1-query-trong-ActiveRecord\"><a href=\"#3-Xu-ly-N-1-query-trong-ActiveRecord\" class=\"headerlink\" title=\"3. X l N+1 query trong ActiveRecord\"></a>3. X l N+1 query trong ActiveRecord</h1><p>Trong ActiveRecord cung cp 3 phng thc  loi b N+1,</p>\n<p>1) S dng <code>preload</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.preload(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">User Load (<span class=\"number\">0</span>.<span class=\"number\">2</span>ms)  SELECT  <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">Article Load (<span class=\"number\">0</span>.<span class=\"number\">4</span>ms)  SELECT <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>]]</span><br></pre></td></tr></table></figure>\n<p>Preload s lun s dng <code>select in()</code></p>\n<p>2) S dng <code>Eagerload</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.eager_load(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  DISTINCT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> AS t0_r<span class=\"number\">0</span>, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"name\"</span> AS t0_r1, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"created_at\"</span> AS t0_r2,</span><br><span class=\"line\"><span class=\"string\">\"users\"</span>.<span class=\"string\">\"updated_at\"</span> AS t0_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"id\"</span> AS t1_r<span class=\"number\">0</span>, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"name\"</span> AS t1_r1,</span><br><span class=\"line\"><span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> AS t1_r2, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"created_at\"</span> AS t1_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"updated_at\"</span> AS t1_r4</span><br><span class=\"line\">FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span></span><br><span class=\"line\">WHERE <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">3</span>]]</span><br></pre></td></tr></table></figure>\n\n<p>eager_load lun s dng <code>joins</code></p>\n<p>3) S dng <code>Inludes</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cch 1</span></span><br><span class=\"line\">User.includes(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>]]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; ging preload</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># cch 2</span></span><br><span class=\"line\">User.includes(<span class=\"symbol\">:articles</span>).references(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  DISTINCT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span></span><br><span class=\"line\">ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> AS t0_r<span class=\"number\">0</span>, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"name\"</span> AS t0_r1, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"created_at\"</span> AS t0_r2,</span><br><span class=\"line\"><span class=\"string\">\"users\"</span>.<span class=\"string\">\"updated_at\"</span> AS t0_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"id\"</span> AS t1_r<span class=\"number\">0</span>, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"name\"</span> AS t1_r1,</span><br><span class=\"line\"><span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> AS t1_r2, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"created_at\"</span> AS t1_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"updated_at\"</span> AS t1_r4</span><br><span class=\"line\">FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span></span><br><span class=\"line\">WHERE <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">3</span>]]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; ging eager_load</span></span><br></pre></td></tr></table></figure>\n<p>Vy mc nh th <code>includes</code> s dng select in(), nhng cng c th chuyn qua s dng joins nu thm method references pha sau.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Qua v d trn, ta  tm hiu c mt s cch c bn  loi b N+1, vi vic s dng joins s t query phi thc thi nht, nhng iu ny khng m bo rng s dng joins l ti u, v vi mi query sql, thi gian v cng sc my tnh phi dng l khc nhau, khng phi cu sql no cng c thi gian thc hin ngang nhau.</p>\n<p>S dng joins trong nhiu trng hp csdl qu ln cng khng phi l mt  hay, khi bn cht ca joins l duyt tun t qua hai (nhiu) bng cn joins,  tm nhng phn t ph hp ri cho vo mt bng tm. Hai vn  thy ngay l vic phi duyt tun t hai hay nhiu bng l mt truy vn tn ti nguyn, th hai d liu c b vo mng tm hin nhin ta cn mt vng nh  lu ci bng tm ny.</p>\n<p> i su hn v vn  hiu nng, cc bi tip sau chng ta s tho lun v n.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>C th bn  tng nghe qua v N+1, y l mt ch  c bn trong vn  qun l csdl trong code, bi vit ny s trnh by v n di gc  s dng trong ruby on rails vi framework <code>ActiveRecord</code></p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"N-1-query\"><a href=\"#N-1-query\" class=\"headerlink\" title=\"N+1 query\"></a>N+1 query</h1><p>Xt mt v d:</p>\n<p>Ti c mt ng dng n gin, vi hai bng csdl, bng th nht l bng users, bng th hai l bng articles, mt user c th c nhiu articles nhng mt article ch thuc v user. Hy xem on m di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.all.each <span class=\"keyword\">do</span> <span class=\"params\">|user|</span></span><br><span class=\"line\">  user.articles</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<p>on code trn s duyt qua tt c user c trong csdl ri ly tt c cc articles ng vi tng user. Rt tng minh v d hiu.</p>\n<p>Ti c 5 user mu trong csdl nn cc cu lnh sql sinh ra sau on code trn nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cu lnh ly ht users ln</span></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span></span><br><span class=\"line\"><span class=\"comment\"># ng vi mi user query ly tt c articles ln</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">4</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">5</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br></pre></td></tr></table></figure>\n\n<p>y chnh l v d in hnh v <code>N+1</code>, <code>N</code> y l 5 (s lng user c trong csdl) v <code>1</code> chnh l cu lnh sql u tin dng  ly tt c user ln.</p>\n<p>Nhn nh v hi, m thc ra  v d ny cng v hi tht v ch c 5 record user, nn thi gian load cng khng thm thp g, tuy nhin trong thc t th d liu c th rt ln, ln n hng triu record v nu load d liu nh ny th y l mt vn  ln cho hiu nng ca trang web. Hy c tip mc 2  tm v gii php cho tnh hung ny.</p>\n<h1 id=\"2-Giai-phap\"><a href=\"#2-Giai-phap\" class=\"headerlink\" title=\"2. Gii php\"></a>2. Gii php</h1><p>Vn   c, gi chng ta cn tm mt gii php lm sao  kt qu tr v khng i, nhng lng truy vn sql trong csdl phi nh hn.</p>\n<p>Cc phng n:</p>\n<ol>\n<li><p>S dng <code>select in()</code>.</p>\n</li>\n<li><p>S dng <code>joins</code>.  c k hn v joins, th nn xem  <a href=\"https://www.w3schools.com/sql/sql_join.asp\" target=\"_blank\" rel=\"noopener\">y</a></p>\n</li>\n</ol>\n<p>S dng select in() s tit kim truy vn i rt nhiu, nu v d bn trn ta s dng select in() th cc sql query cn thit s l nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ly tt c query</span></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span></span><br><span class=\"line\"><span class=\"comment\"># ly articles ng vi tng user</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Tuyt vi, t 6(N + 1) truy vn gi  tr thnh cn 2.</p>\n<p>Vi cch th 2 l s dng <code>joins</code>:</p>\n<p>joins hiu n gin l ghp hai bng li vi nhau (ly mt s field cn thit  bng ny, gp vi vi field cn thit  bng kia khi m record  hai bn tho mn mt iu kin no ), ri t  thnh mt bng tm dng trong qu trnh bn s dng.</p>\n<p>Quay tr v v d ban u, cu truy vn by gi s tr thnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT User.name, Article.title</span><br><span class=\"line\">      FROM User</span><br><span class=\"line\">      INNER JOIN Article ON User.id = Article.user_id</span><br></pre></td></tr></table></figure>\n\n<p>Ly vi field cn thit(name ca user v title ca Article).<br>Bng cch tho mn iu kin no (id ca user bng vi user_id ca article).</p>\n<p>Vy t N+1 query ban u,  tr thnh mt query duy nht.</p>\n<p>n lc ny  c th kt lun l joins tt hn select in() c cha? Cha, cu tr li s l nh vy. Sang mc 3 chng ta s tm hiu v cch x l N+1 thng qua ActiveRecord</p>\n<h1 id=\"3-Xu-ly-N-1-query-trong-ActiveRecord\"><a href=\"#3-Xu-ly-N-1-query-trong-ActiveRecord\" class=\"headerlink\" title=\"3. X l N+1 query trong ActiveRecord\"></a>3. X l N+1 query trong ActiveRecord</h1><p>Trong ActiveRecord cung cp 3 phng thc  loi b N+1,</p>\n<p>1) S dng <code>preload</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.preload(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">User Load (<span class=\"number\">0</span>.<span class=\"number\">2</span>ms)  SELECT  <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">Article Load (<span class=\"number\">0</span>.<span class=\"number\">4</span>ms)  SELECT <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>]]</span><br></pre></td></tr></table></figure>\n<p>Preload s lun s dng <code>select in()</code></p>\n<p>2) S dng <code>Eagerload</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.eager_load(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  DISTINCT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> AS t0_r<span class=\"number\">0</span>, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"name\"</span> AS t0_r1, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"created_at\"</span> AS t0_r2,</span><br><span class=\"line\"><span class=\"string\">\"users\"</span>.<span class=\"string\">\"updated_at\"</span> AS t0_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"id\"</span> AS t1_r<span class=\"number\">0</span>, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"name\"</span> AS t1_r1,</span><br><span class=\"line\"><span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> AS t1_r2, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"created_at\"</span> AS t1_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"updated_at\"</span> AS t1_r4</span><br><span class=\"line\">FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span></span><br><span class=\"line\">WHERE <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">3</span>]]</span><br></pre></td></tr></table></figure>\n\n<p>eager_load lun s dng <code>joins</code></p>\n<p>3) S dng <code>Inludes</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cch 1</span></span><br><span class=\"line\">User.includes(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>]]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; ging preload</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># cch 2</span></span><br><span class=\"line\">User.includes(<span class=\"symbol\">:articles</span>).references(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  DISTINCT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span></span><br><span class=\"line\">ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> AS t0_r<span class=\"number\">0</span>, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"name\"</span> AS t0_r1, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"created_at\"</span> AS t0_r2,</span><br><span class=\"line\"><span class=\"string\">\"users\"</span>.<span class=\"string\">\"updated_at\"</span> AS t0_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"id\"</span> AS t1_r<span class=\"number\">0</span>, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"name\"</span> AS t1_r1,</span><br><span class=\"line\"><span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> AS t1_r2, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"created_at\"</span> AS t1_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"updated_at\"</span> AS t1_r4</span><br><span class=\"line\">FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span></span><br><span class=\"line\">WHERE <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">3</span>]]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; ging eager_load</span></span><br></pre></td></tr></table></figure>\n<p>Vy mc nh th <code>includes</code> s dng select in(), nhng cng c th chuyn qua s dng joins nu thm method references pha sau.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Qua v d trn, ta  tm hiu c mt s cch c bn  loi b N+1, vi vic s dng joins s t query phi thc thi nht, nhng iu ny khng m bo rng s dng joins l ti u, v vi mi query sql, thi gian v cng sc my tnh phi dng l khc nhau, khng phi cu sql no cng c thi gian thc hin ngang nhau.</p>\n<p>S dng joins trong nhiu trng hp csdl qu ln cng khng phi l mt  hay, khi bn cht ca joins l duyt tun t qua hai (nhiu) bng cn joins,  tm nhng phn t ph hp ri cho vo mt bng tm. Hai vn  thy ngay l vic phi duyt tun t hai hay nhiu bng l mt truy vn tn ti nguyn, th hai d liu c b vo mng tm hin nhin ta cn mt vng nh  lu ci bng tm ny.</p>\n<p> i su hn v vn  hiu nng, cc bi tip sau chng ta s tho lun v n.</p>\n"},{"title":"Ruby Method Lookup","date":"2019-02-23T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n# t vn \n\nCng nh nhiu ngn ng khc, trong ruby, khi lm vic vi mt i tng th c hai th ta phi quan tm chnh  l thuc tnh ca i tng v phng thc m i tng c th s dng ( m gn nh mi th trong ruby u l `object` nn y l mt kin thc c bn nhng cng rt quan trng cn phi nm r). Vic ta c th s dng phng thc ca i tng thng qua du `.` khng phi l g mi m, nhng c mt s iu ng ghi nh v cch m ruby tm kim phng thc.\n\n# Lun bn\n\n# 1. Method Lookup\n\n khi no bn t hi, gi s nu bn c mt class A, v class ny include thm hai module vo na, nu trong hai module  cng nh ngha mt phng thc, vy khi instance ca A gi n phng thc , iu g s xy ra? Phng thc trong module no c chy?\n\n\nCu tr li l th t cc phng thc c ruby tm kim nh sau:\n\n1. Phng thc c nh ngha trong `object's singleton class`.\n\n2. Phng thc trong `module` c mixin trong `singleton class`(Theo th t o ngc, vo sau s tm kim trc).\n\n3. Phng thc c nh ngha trong `class` ca i tng ta ang xt.\n\n4. Phng thc trong cc `module` c `include` vo class ta ang xt (Cng theo t t o ngc).\n\n5. Phng thc trong `Super class` ca class ta ang xt.\n\n lm r iu  ni hy xt v d di y:\n\n```ruby\nmodule One\n  def hello\n    \"I'm one (include in class Test)\"\n  end\nend\n\nmodule Two\n  def hello\n    \"I'm two (include in class Test)\"\n  end\nend\n\nmodule Three\n  def hello\n    \"I'm three (extend)\"\n  end\nend\n\nmodule Four\n  def hello\n    \"I'm four (extend)\"\n  end\nend\n\nclass FatherOfTest\n  def hello\n   \"I'm father of test class\"\n  end\nend\n\nclass Test < FatherOfTest\n  include One\n  include Two\n\n  def hello\n    \"It's my hello - Test class\"\n  end\nend\n\nm = Test.new\n\ndef m.hello\n  \"I'm object m\"\nend\n\nm.extend(Three)\nm.extend(Four)\n\nm.hello\n```\n\nTt nhin on m trn s c output l:\n\n`\"I'm object m\"`\n\nTheo th t tm kim  lit k  trn, khi ruby tm thy phng thc ln u n s dng tm kim v khi i ht cc th t v vn khng tm c th n s gi n mt phng thc mc inh l `method_missing`.\n\nB on code:\n\n```ruby\ndef m.hello\n  \"I'm object m\"\nend\n```\n\nChy li ta nhn c kt qu:\n\n`\"I'm four (extend)\"`\n\nLm tng t ri ta s tm ra th t u tin kt qu nh sau:\n\n``` ruby\n# phng thc hello cho ring instance m\n\"I'm object m\"\n# phng thc c extend ring cho m\n\"I'm four (extend)\"\n\"I'm three (extend)\"\n# phng thc trong chnh class Test, class ca m\n\"It's my hello - Test class\"\n# phng thc trong module c include vo Class Test\n\"I'm two (include in class Test)\"\n\"I'm one (include in class Test)\"\n# phng thc trong lp cha ca Class Test\n\"I'm father of test class\"\n```\n\nNu bn ang cn mt cht bi ri v nhng t kho v cch s dng `extend` v `include` hy c tip mc di.\n\n# 2. Extend, Include trong Ruby\n\nTrong ruby khng c a k tha, thay vo  ruby s dng `mixin`.\n\nMt class ch c k tha t mt class khc. Tuy nhin n c `mixin` nhiu `module` bng hai phng thc l `include` v `extend`.\n\n`include:` vi vic bn include moudle A vo trong class B, ng ngha vi vic instance ca class B c th s dng tt c cc `instance method` trong moudle A. Vy cn `module method` trong A th sao? Cu tr li l nhng `module method` trong A th A s dng thi.\n\n`extend:` ng vi ng ngha ca n, `m rng`, `extend` c th dng  m rng mt class hoc cng c th dng  m rng mt instance.  Trong v d trn mc 1, ti `extend` object `m`, t  gip m c m rng thm cc phng thc ng vi tt c cc `instance method` trong module n extend (y l \"m rng\" cho mt i tng). Nu ti mun m rng cho mt class, ti s extend moudle trong class , v sau  tt c cc `instance method` trong module s tr thnh nh cc `class method` cho class (y l s \"m rng\" cho mt lp). Vy cn `module method` trong moudle th sao?Cu tr li vn nh trn, nhng phng thc module th  module  s dng.\n\n# Kt lun\n\nMixin l mt chc nng mnh m trong ruby, n gip ta m rng class/object bng cc method mi. Tuy nhin, hy cn thn  m bo bn gi ng c method m bn cn.\n","source":"_posts/2019-02-24-ruby-method-lookup.md","raw":"---\ntitle: \"Ruby Method Lookup\"\ndate: 2019-02-24\ndraft: false\ntags: [\"ruby\"]\ncategories: [\"ruby notes\"]\nmytag: \"#TIL\"\n---\n\n# t vn \n\nCng nh nhiu ngn ng khc, trong ruby, khi lm vic vi mt i tng th c hai th ta phi quan tm chnh  l thuc tnh ca i tng v phng thc m i tng c th s dng ( m gn nh mi th trong ruby u l `object` nn y l mt kin thc c bn nhng cng rt quan trng cn phi nm r). Vic ta c th s dng phng thc ca i tng thng qua du `.` khng phi l g mi m, nhng c mt s iu ng ghi nh v cch m ruby tm kim phng thc.\n\n# Lun bn\n\n# 1. Method Lookup\n\n khi no bn t hi, gi s nu bn c mt class A, v class ny include thm hai module vo na, nu trong hai module  cng nh ngha mt phng thc, vy khi instance ca A gi n phng thc , iu g s xy ra? Phng thc trong module no c chy?\n\n\nCu tr li l th t cc phng thc c ruby tm kim nh sau:\n\n1. Phng thc c nh ngha trong `object's singleton class`.\n\n2. Phng thc trong `module` c mixin trong `singleton class`(Theo th t o ngc, vo sau s tm kim trc).\n\n3. Phng thc c nh ngha trong `class` ca i tng ta ang xt.\n\n4. Phng thc trong cc `module` c `include` vo class ta ang xt (Cng theo t t o ngc).\n\n5. Phng thc trong `Super class` ca class ta ang xt.\n\n lm r iu  ni hy xt v d di y:\n\n```ruby\nmodule One\n  def hello\n    \"I'm one (include in class Test)\"\n  end\nend\n\nmodule Two\n  def hello\n    \"I'm two (include in class Test)\"\n  end\nend\n\nmodule Three\n  def hello\n    \"I'm three (extend)\"\n  end\nend\n\nmodule Four\n  def hello\n    \"I'm four (extend)\"\n  end\nend\n\nclass FatherOfTest\n  def hello\n   \"I'm father of test class\"\n  end\nend\n\nclass Test < FatherOfTest\n  include One\n  include Two\n\n  def hello\n    \"It's my hello - Test class\"\n  end\nend\n\nm = Test.new\n\ndef m.hello\n  \"I'm object m\"\nend\n\nm.extend(Three)\nm.extend(Four)\n\nm.hello\n```\n\nTt nhin on m trn s c output l:\n\n`\"I'm object m\"`\n\nTheo th t tm kim  lit k  trn, khi ruby tm thy phng thc ln u n s dng tm kim v khi i ht cc th t v vn khng tm c th n s gi n mt phng thc mc inh l `method_missing`.\n\nB on code:\n\n```ruby\ndef m.hello\n  \"I'm object m\"\nend\n```\n\nChy li ta nhn c kt qu:\n\n`\"I'm four (extend)\"`\n\nLm tng t ri ta s tm ra th t u tin kt qu nh sau:\n\n``` ruby\n# phng thc hello cho ring instance m\n\"I'm object m\"\n# phng thc c extend ring cho m\n\"I'm four (extend)\"\n\"I'm three (extend)\"\n# phng thc trong chnh class Test, class ca m\n\"It's my hello - Test class\"\n# phng thc trong module c include vo Class Test\n\"I'm two (include in class Test)\"\n\"I'm one (include in class Test)\"\n# phng thc trong lp cha ca Class Test\n\"I'm father of test class\"\n```\n\nNu bn ang cn mt cht bi ri v nhng t kho v cch s dng `extend` v `include` hy c tip mc di.\n\n# 2. Extend, Include trong Ruby\n\nTrong ruby khng c a k tha, thay vo  ruby s dng `mixin`.\n\nMt class ch c k tha t mt class khc. Tuy nhin n c `mixin` nhiu `module` bng hai phng thc l `include` v `extend`.\n\n`include:` vi vic bn include moudle A vo trong class B, ng ngha vi vic instance ca class B c th s dng tt c cc `instance method` trong moudle A. Vy cn `module method` trong A th sao? Cu tr li l nhng `module method` trong A th A s dng thi.\n\n`extend:` ng vi ng ngha ca n, `m rng`, `extend` c th dng  m rng mt class hoc cng c th dng  m rng mt instance.  Trong v d trn mc 1, ti `extend` object `m`, t  gip m c m rng thm cc phng thc ng vi tt c cc `instance method` trong module n extend (y l \"m rng\" cho mt i tng). Nu ti mun m rng cho mt class, ti s extend moudle trong class , v sau  tt c cc `instance method` trong module s tr thnh nh cc `class method` cho class (y l s \"m rng\" cho mt lp). Vy cn `module method` trong moudle th sao?Cu tr li vn nh trn, nhng phng thc module th  module  s dng.\n\n# Kt lun\n\nMixin l mt chc nng mnh m trong ruby, n gip ta m rng class/object bng cc method mi. Tuy nhin, hy cn thn  m bo bn gi ng c method m bn cn.\n","slug":"2019-02-24-ruby-method-lookup","published":1,"updated":"2019-11-13T04:01:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2a000r8ers5y0e8dsh","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Cng nh nhiu ngn ng khc, trong ruby, khi lm vic vi mt i tng th c hai th ta phi quan tm chnh  l thuc tnh ca i tng v phng thc m i tng c th s dng ( m gn nh mi th trong ruby u l <code>object</code> nn y l mt kin thc c bn nhng cng rt quan trng cn phi nm r). Vic ta c th s dng phng thc ca i tng thng qua du <code>.</code> khng phi l g mi m, nhng c mt s iu ng ghi nh v cch m ruby tm kim phng thc.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Method-Lookup\"><a href=\"#1-Method-Lookup\" class=\"headerlink\" title=\"1. Method Lookup\"></a>1. Method Lookup</h1><p> khi no bn t hi, gi s nu bn c mt class A, v class ny include thm hai module vo na, nu trong hai module  cng nh ngha mt phng thc, vy khi instance ca A gi n phng thc , iu g s xy ra? Phng thc trong module no c chy?</p>\n<p>Cu tr li l th t cc phng thc c ruby tm kim nh sau:</p>\n<ol>\n<li><p>Phng thc c nh ngha trong <code>object&#39;s singleton class</code>.</p>\n</li>\n<li><p>Phng thc trong <code>module</code> c mixin trong <code>singleton class</code>(Theo th t o ngc, vo sau s tm kim trc).</p>\n</li>\n<li><p>Phng thc c nh ngha trong <code>class</code> ca i tng ta ang xt.</p>\n</li>\n<li><p>Phng thc trong cc <code>module</code> c <code>include</code> vo class ta ang xt (Cng theo t t o ngc).</p>\n</li>\n<li><p>Phng thc trong <code>Super class</code> ca class ta ang xt.</p>\n</li>\n</ol>\n<p> lm r iu  ni hy xt v d di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">One</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm one (include in class Test)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Two</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm two (include in class Test)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Three</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm three (extend)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Four</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm four (extend)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FatherOfTest</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">   <span class=\"string\">\"I'm father of test class\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> &lt; FatherOfTest</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> One</span><br><span class=\"line\">  <span class=\"keyword\">include</span> Two</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"It's my hello - Test class\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">m = Test.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">m</span>.<span class=\"title\">hello</span></span></span><br><span class=\"line\">  <span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">m.extend(Three)</span><br><span class=\"line\">m.extend(Four)</span><br><span class=\"line\"></span><br><span class=\"line\">m.hello</span><br></pre></td></tr></table></figure>\n\n<p>Tt nhin on m trn s c output l:</p>\n<p><code>&quot;I&#39;m object m&quot;</code></p>\n<p>Theo th t tm kim  lit k  trn, khi ruby tm thy phng thc ln u n s dng tm kim v khi i ht cc th t v vn khng tm c th n s gi n mt phng thc mc inh l <code>method_missing</code>.</p>\n<p>B on code:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">m</span>.<span class=\"title\">hello</span></span></span><br><span class=\"line\">  <span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy li ta nhn c kt qu:</p>\n<p><code>&quot;I&#39;m four (extend)&quot;</code></p>\n<p>Lm tng t ri ta s tm ra th t u tin kt qu nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># phng thc hello cho ring instance m</span></span><br><span class=\"line\"><span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc c extend ring cho m</span></span><br><span class=\"line\"><span class=\"string\">\"I'm four (extend)\"</span></span><br><span class=\"line\"><span class=\"string\">\"I'm three (extend)\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong chnh class Test, class ca m</span></span><br><span class=\"line\"><span class=\"string\">\"It's my hello - Test class\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong module c include vo Class Test</span></span><br><span class=\"line\"><span class=\"string\">\"I'm two (include in class Test)\"</span></span><br><span class=\"line\"><span class=\"string\">\"I'm one (include in class Test)\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong lp cha ca Class Test</span></span><br><span class=\"line\"><span class=\"string\">\"I'm father of test class\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu bn ang cn mt cht bi ri v nhng t kho v cch s dng <code>extend</code> v <code>include</code> hy c tip mc di.</p>\n<h1 id=\"2-Extend-Include-trong-Ruby\"><a href=\"#2-Extend-Include-trong-Ruby\" class=\"headerlink\" title=\"2. Extend, Include trong Ruby\"></a>2. Extend, Include trong Ruby</h1><p>Trong ruby khng c a k tha, thay vo  ruby s dng <code>mixin</code>.</p>\n<p>Mt class ch c k tha t mt class khc. Tuy nhin n c <code>mixin</code> nhiu <code>module</code> bng hai phng thc l <code>include</code> v <code>extend</code>.</p>\n<p><code>include:</code> vi vic bn include moudle A vo trong class B, ng ngha vi vic instance ca class B c th s dng tt c cc <code>instance method</code> trong moudle A. Vy cn <code>module method</code> trong A th sao? Cu tr li l nhng <code>module method</code> trong A th A s dng thi.</p>\n<p><code>extend:</code> ng vi ng ngha ca n, <code>m rng</code>, <code>extend</code> c th dng  m rng mt class hoc cng c th dng  m rng mt instance.  Trong v d trn mc 1, ti <code>extend</code> object <code>m</code>, t  gip m c m rng thm cc phng thc ng vi tt c cc <code>instance method</code> trong module n extend (y l m rng cho mt i tng). Nu ti mun m rng cho mt class, ti s extend moudle trong class , v sau  tt c cc <code>instance method</code> trong module s tr thnh nh cc <code>class method</code> cho class (y l s m rng cho mt lp). Vy cn <code>module method</code> trong moudle th sao?Cu tr li vn nh trn, nhng phng thc module th  module  s dng.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Mixin l mt chc nng mnh m trong ruby, n gip ta m rng class/object bng cc method mi. Tuy nhin, hy cn thn  m bo bn gi ng c method m bn cn.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Cng nh nhiu ngn ng khc, trong ruby, khi lm vic vi mt i tng th c hai th ta phi quan tm chnh  l thuc tnh ca i tng v phng thc m i tng c th s dng ( m gn nh mi th trong ruby u l <code>object</code> nn y l mt kin thc c bn nhng cng rt quan trng cn phi nm r). Vic ta c th s dng phng thc ca i tng thng qua du <code>.</code> khng phi l g mi m, nhng c mt s iu ng ghi nh v cch m ruby tm kim phng thc.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Method-Lookup\"><a href=\"#1-Method-Lookup\" class=\"headerlink\" title=\"1. Method Lookup\"></a>1. Method Lookup</h1><p> khi no bn t hi, gi s nu bn c mt class A, v class ny include thm hai module vo na, nu trong hai module  cng nh ngha mt phng thc, vy khi instance ca A gi n phng thc , iu g s xy ra? Phng thc trong module no c chy?</p>\n<p>Cu tr li l th t cc phng thc c ruby tm kim nh sau:</p>\n<ol>\n<li><p>Phng thc c nh ngha trong <code>object&#39;s singleton class</code>.</p>\n</li>\n<li><p>Phng thc trong <code>module</code> c mixin trong <code>singleton class</code>(Theo th t o ngc, vo sau s tm kim trc).</p>\n</li>\n<li><p>Phng thc c nh ngha trong <code>class</code> ca i tng ta ang xt.</p>\n</li>\n<li><p>Phng thc trong cc <code>module</code> c <code>include</code> vo class ta ang xt (Cng theo t t o ngc).</p>\n</li>\n<li><p>Phng thc trong <code>Super class</code> ca class ta ang xt.</p>\n</li>\n</ol>\n<p> lm r iu  ni hy xt v d di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">One</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm one (include in class Test)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Two</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm two (include in class Test)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Three</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm three (extend)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Four</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm four (extend)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FatherOfTest</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">   <span class=\"string\">\"I'm father of test class\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> &lt; FatherOfTest</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> One</span><br><span class=\"line\">  <span class=\"keyword\">include</span> Two</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"It's my hello - Test class\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">m = Test.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">m</span>.<span class=\"title\">hello</span></span></span><br><span class=\"line\">  <span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">m.extend(Three)</span><br><span class=\"line\">m.extend(Four)</span><br><span class=\"line\"></span><br><span class=\"line\">m.hello</span><br></pre></td></tr></table></figure>\n\n<p>Tt nhin on m trn s c output l:</p>\n<p><code>&quot;I&#39;m object m&quot;</code></p>\n<p>Theo th t tm kim  lit k  trn, khi ruby tm thy phng thc ln u n s dng tm kim v khi i ht cc th t v vn khng tm c th n s gi n mt phng thc mc inh l <code>method_missing</code>.</p>\n<p>B on code:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">m</span>.<span class=\"title\">hello</span></span></span><br><span class=\"line\">  <span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy li ta nhn c kt qu:</p>\n<p><code>&quot;I&#39;m four (extend)&quot;</code></p>\n<p>Lm tng t ri ta s tm ra th t u tin kt qu nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># phng thc hello cho ring instance m</span></span><br><span class=\"line\"><span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc c extend ring cho m</span></span><br><span class=\"line\"><span class=\"string\">\"I'm four (extend)\"</span></span><br><span class=\"line\"><span class=\"string\">\"I'm three (extend)\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong chnh class Test, class ca m</span></span><br><span class=\"line\"><span class=\"string\">\"It's my hello - Test class\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong module c include vo Class Test</span></span><br><span class=\"line\"><span class=\"string\">\"I'm two (include in class Test)\"</span></span><br><span class=\"line\"><span class=\"string\">\"I'm one (include in class Test)\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong lp cha ca Class Test</span></span><br><span class=\"line\"><span class=\"string\">\"I'm father of test class\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu bn ang cn mt cht bi ri v nhng t kho v cch s dng <code>extend</code> v <code>include</code> hy c tip mc di.</p>\n<h1 id=\"2-Extend-Include-trong-Ruby\"><a href=\"#2-Extend-Include-trong-Ruby\" class=\"headerlink\" title=\"2. Extend, Include trong Ruby\"></a>2. Extend, Include trong Ruby</h1><p>Trong ruby khng c a k tha, thay vo  ruby s dng <code>mixin</code>.</p>\n<p>Mt class ch c k tha t mt class khc. Tuy nhin n c <code>mixin</code> nhiu <code>module</code> bng hai phng thc l <code>include</code> v <code>extend</code>.</p>\n<p><code>include:</code> vi vic bn include moudle A vo trong class B, ng ngha vi vic instance ca class B c th s dng tt c cc <code>instance method</code> trong moudle A. Vy cn <code>module method</code> trong A th sao? Cu tr li l nhng <code>module method</code> trong A th A s dng thi.</p>\n<p><code>extend:</code> ng vi ng ngha ca n, <code>m rng</code>, <code>extend</code> c th dng  m rng mt class hoc cng c th dng  m rng mt instance.  Trong v d trn mc 1, ti <code>extend</code> object <code>m</code>, t  gip m c m rng thm cc phng thc ng vi tt c cc <code>instance method</code> trong module n extend (y l m rng cho mt i tng). Nu ti mun m rng cho mt class, ti s extend moudle trong class , v sau  tt c cc <code>instance method</code> trong module s tr thnh nh cc <code>class method</code> cho class (y l s m rng cho mt lp). Vy cn <code>module method</code> trong moudle th sao?Cu tr li vn nh trn, nhng phng thc module th  module  s dng.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Mixin l mt chc nng mnh m trong ruby, n gip ta m rng class/object bng cc method mi. Tuy nhin, hy cn thn  m bo bn gi ng c method m bn cn.</p>\n"},{"title":"SaaS, PaaS v IaaS","date":"2019-04-09T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n**SaaS:  Software as a Service**\nV d nh: TFS, Github.\nMua mt cn nh v mua xong th vo   lun ch khng cn vt v xy dng g thm.\nu: Nhanh, tin.\nNhc: khng c tnh tu chnh, v dch v s ph thng v khng th cover ht c nhu cu ca  chng ta.\n\n**PaaS:  Platform as a Service**\nV d nh: Heroku, AWS Elastic Beanstalk.\nMua mt cn nh  c mt s tin ch c bn  sng, mnh ch cn dn thm  c ca mnh(source code) vo l sng c.\nu: Tu chnh d dng hn SaaS, lm nhanh v n gin hn IaaS\nNhc: Vn khng th t thit lp cc ci t nng cao hn.\n\n**IaaS: Infrastructure as a Service**\nV d nh: EC2, DigitalOcean\nMua mt mnh t sau  th t xy nh, sm ...\nu: c t ch h thng v c th tu  cu hnh(trong gii hn ca cloud cho php).\nNhc: Phc tp nht trong 3 loi.\n","source":"_posts/2019-04-10-iaas-paas-saas.md","raw":"---\ntitle: \"SaaS, PaaS v IaaS\"\ndate: 2019-04-10\ndraft: false\ntags: [\"til\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\n---\n\n**SaaS:  Software as a Service**\nV d nh: TFS, Github.\nMua mt cn nh v mua xong th vo   lun ch khng cn vt v xy dng g thm.\nu: Nhanh, tin.\nNhc: khng c tnh tu chnh, v dch v s ph thng v khng th cover ht c nhu cu ca  chng ta.\n\n**PaaS:  Platform as a Service**\nV d nh: Heroku, AWS Elastic Beanstalk.\nMua mt cn nh  c mt s tin ch c bn  sng, mnh ch cn dn thm  c ca mnh(source code) vo l sng c.\nu: Tu chnh d dng hn SaaS, lm nhanh v n gin hn IaaS\nNhc: Vn khng th t thit lp cc ci t nng cao hn.\n\n**IaaS: Infrastructure as a Service**\nV d nh: EC2, DigitalOcean\nMua mt mnh t sau  th t xy nh, sm ...\nu: c t ch h thng v c th tu  cu hnh(trong gii hn ca cloud cho php).\nNhc: Phc tp nht trong 3 loi.\n","slug":"2019-04-10-iaas-paas-saas","published":1,"updated":"2019-11-13T04:03:14.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2e000v8ers2qkv96f3","content":"<p><strong>SaaS:  Software as a Service</strong><br>V d nh: TFS, Github.<br>Mua mt cn nh v mua xong th vo   lun ch khng cn vt v xy dng g thm.<br>u: Nhanh, tin.<br>Nhc: khng c tnh tu chnh, v dch v s ph thng v khng th cover ht c nhu cu ca  chng ta.</p>\n<p><strong>PaaS:  Platform as a Service</strong><br>V d nh: Heroku, AWS Elastic Beanstalk.<br>Mua mt cn nh  c mt s tin ch c bn  sng, mnh ch cn dn thm  c ca mnh(source code) vo l sng c.<br>u: Tu chnh d dng hn SaaS, lm nhanh v n gin hn IaaS<br>Nhc: Vn khng th t thit lp cc ci t nng cao hn.</p>\n<p><strong>IaaS: Infrastructure as a Service</strong><br>V d nh: EC2, DigitalOcean<br>Mua mt mnh t sau  th t xy nh, sm <br>u: c t ch h thng v c th tu  cu hnh(trong gii hn ca cloud cho php).<br>Nhc: Phc tp nht trong 3 loi.</p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>SaaS:  Software as a Service</strong><br>V d nh: TFS, Github.<br>Mua mt cn nh v mua xong th vo   lun ch khng cn vt v xy dng g thm.<br>u: Nhanh, tin.<br>Nhc: khng c tnh tu chnh, v dch v s ph thng v khng th cover ht c nhu cu ca  chng ta.</p>\n<p><strong>PaaS:  Platform as a Service</strong><br>V d nh: Heroku, AWS Elastic Beanstalk.<br>Mua mt cn nh  c mt s tin ch c bn  sng, mnh ch cn dn thm  c ca mnh(source code) vo l sng c.<br>u: Tu chnh d dng hn SaaS, lm nhanh v n gin hn IaaS<br>Nhc: Vn khng th t thit lp cc ci t nng cao hn.</p>\n<p><strong>IaaS: Infrastructure as a Service</strong><br>V d nh: EC2, DigitalOcean<br>Mua mt mnh t sau  th t xy nh, sm <br>u: c t ch h thng v c th tu  cu hnh(trong gii hn ca cloud cho php).<br>Nhc: Phc tp nht trong 3 loi.</p>\n"},{"title":"Immutable Vs Mutable","date":"2019-04-07T17:00:00.000Z","draft":false,"mytag":"Ruby","mytrend":"COOL","_content":"\n# t vn \n\nVn   y l ti khng c vn  g  t c, bi vit nm trong m kin thc ri bng bong ca ti, v gi ti cn vit li nh mt cch  n tp, hy vng n c th gip c ai .\n\n# Lun bn\n\n# 1. Khi nim mutable, immutable v ruby\n\ni thng vo vn , chng ta cn  cp n ba vn : `mutable`, `immutable` v cch ruby x l hai khi nim . Trc ht nu bn  qun, th ti xin c nhc li nh ngha ca chng.\n\nXin trch dn [wiki](https://en.wikipedia.org/wiki/Immutable_object):\n\n> In object-oriented and functional programming, an immutable object (unchangeable[1] object) is an object whose state cannot be modified after it is created.[2] This is in contrast to a mutable object (changeable object), which can be modified after it is created.\n\nTranslate:\n\n> Trong lp trnh hng i tng v lp trnh hm, mt i tng c coi immutable, l mt i tng **khng th thay i** trng thi sau khi n c to ln u, ngc li vi mt i tng c coi l mutable n c th **thay i** trng thi sau khi c khi to ln u.\n\nDng t qu kh hiu, what the hell is \"trng thi\"? Theo mt cch hn lm v y , trng thi ca mt i tng ngoi i tht c thit lp bi tt c nhng g to nn chng.\n\nTng t, cc trng thi ca mt i tng trong lp trnh cng c thit lp bng tt c nhng g to nn chng. V d:\n\nVi 1 bin integer c bn `x = 10` th trng thi ca n c to ra bi tn bin v gi tr,  y tn bin l `x` v gi tr l `10`, u  trong vng nh (Ram) ca bn s lu tr ci ch `x` km s `10` ny.\n\nng ngha vi  nu ti thay i c gi tr 10 ca bin x th x l mt i tng mutable v ngc li n l mt i tng immutable.\n\nTi gn `x = 11` v thnh cng\n\nT  c th a ra kt lun x l mt mutable?\n\nCu tr li l khng, mt s khi nim ri rm lm kh ta lc u. Nh  bit, th m CPU lm vic l a ch vng nh v ch a ch vng nh m thi. Nhng th khc n khng quan tm.\n\nVi cu lnh gn `x = 10`. N c h iu hnh phin dch thnh \"c mt bin tn `x` c gn gi tr bng `10`, Ram, my hy b tr thm hai slot  lu tr `x` v `10`\". Vy lc :\n\n`x`(tn bin) c lu  v tr AAA\n`10`(gi tr) c lu  v tr BBB\n\nVi lnh gn tip theo `x = 11`:\n\n`x` vn yn v nm  v tr AAA\n`10` cng vn yn tr nm  v tr BBB\n`11` gi tr mi gn cho bin x th lc ny nm  v tr CCC\n\nVy khi chy mt lnh gn mi th bin x  c gn bng gi tr trn mt vng nh khc, cn vng nh ban u **khng thay i gi tr** nn ta c th kt lun x l mt immutable.\n\nChng minh bng v d sau trong ruby, ch  l ruby l mt ngn ng script, vi trnh thng dch VM bn di  x l ca n c vit bng C, nn  lp c s ca ruby ta khng th truy xut v tr vng nh n tng thanh ghi nh trong C c (vic  c lm  lp core YARV). Tuy nhin, ta c th kim tra c v tr tng trng trn b nh ca n thng qua `object_id`.\n\n```ruby\nx = 10\nx.object_id\n#=> 21\nx = 11\nx.object_id\n#=> 23\n```\n\nNote: Nu bn gn tip x = 12 v kim tra li object_id, lc ny bn s thy n bng 25. Gi tr 10, 11, 12 tng ng vi object_id l 21, 23, 25. Liu c mt quy lut no  y? Cu tr li l c, nhng vn  ny s c  cp n trong mt bi vit tip theo.\n\nT v d trn bn  hiu v immutable, vy cn mutable? n gin nht l hy hiu ngc li vi immutable, nu gn x = 11 v x c object_id khng i th x chnh l mutable.\n\n```\nTt c cc loi d liu nguyn thu trong ruby u l immutable.\n```\n\nInteger, float, string, boolean chng u l immutable.\n\n# 2. Liu y c phi l mt kin thc cn thit?\n\nChc chn l c.\n\nTh nht: Nu trong cng vic bn khng bao gi phi dng n n, bn c th ni v n nh mt kin thc hn lm  th hin kh nng vi sp v yu cu tng lng :worried:\n\nTh hai: Xt v d sau\n\n```ruby\nstr = \"\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str += i\nend\n```\n\nT tng ca on m ny l cng tt c cc phn t trong mt mng string v cho ra kt qu cui cng l mt chui tng hp tt c cc phn t.\nC iu g bt thng trong on m ny khng nh? Cu tr li l c. Nh nhng g chng ta  ni  trn c hai iu cn lu :\n\n> 1. Cc kiu d liu nguyn thu trong ruby u l immutable v hin nhin string khng ngoi l.\n\n> 2. Khi mt object l immutable, th vic bn gn n bng mt gi tr khc ng ngha vi vic vng nh c s khng c dng n, m n s ra mt vng nh mi ri ghi kt qu mi ln , c lp li nh vy mi mi.\n\nT hai iu trn ta rt ra c kt lun:\n\n1. Trong ln gn u tin str c gi tr l chui rng v c khi to ti v tr A1\n2. Trong ln lp `each` u tin, str c gi tr l \"Hoang\" v n lu  v tr A2\n3. Trong ln lp `each` th hai, str c gi tr mi l \"HoangDuy\" v n lu  v tr mi l A3\n4. Trong ln lp cui cng th str c gi tr chng ta mong i l \"HoangDuyChinh\" v n lu  v tr A4\n\nChng minh:\n\n```ruby\nstr = \"\"\nputs \"First location: #{str.object_id}\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str += i\n  puts \"value: #{str} | location: #{str.object_id}\"\nend\n\nputs \"Final value: #{str} | location: #{str.object_id}\"\n```\n\nKt qu:\n```\nFirst location: 47434608564740\nvalue: Hoang | location: 47434608564520\nvalue: HoangDuy | location: 47434608564440\nvalue: HoangDuyChinh | location: 47434608564360\nFinal value: HoangDuyChinh | location: 47434608564360\n```\n\nV th chng ta quan tm t  v sau l v tr A4 ny. Vy cn A1, A2, A3 cng ang mang gi tr? Chng i u v u? Chnh xc, n tr thnh mt vng nh rc v s c GC dn dp nhng khng phi ngay lp tc, vy trong khong thi gian  n vn nm gi cc vng nh ca chng ta.  cng l mt trong cc l do vic bn mun chy ruby on rails trn mt chic my tnh sinh vin 2GB l v cng kh khn. Ruby n Ram nh ung nc l vy.\n\nV d trn mng ta c ba phn t v ta c 3 gi tr rc trn b nh, hy tng tng bn c mt mng mt triu phn t :worried:\n\nGii php trong trng hp ny l g?  l duyt mng nh mt `object reference` ch khng phi mt bin gi tr\n\n```ruby\nstr = \"\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str << i\nend\n```\n\nNh vy str s  ng mt vng nh v ta khng c mt ng bin rc khng mong i.\n\nChng minh:\n\n```ruby\nstr = \"\"\nputs \"First location: #{str.object_id}\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str << i\n  puts \"value: #{str} | location: #{str.object_id}\"\nend\n\nputs \"Final value: #{str} | location: #{str.object_id}\"\n```\n\nKt qu:\n```\nFirst location: 47196120971580\nvalue: Hoang | location: 47196120971580\nvalue: HoangDuy | location: 47196120971580\nvalue: HoangDuyChinh | location: 47196120971580\nFinal value: HoangDuyChinh | location: 47196120971580\n```\n# Kt lun\n\nTrong bi vit c  cp n `object_id` v `GC`, y l hai vn  nn tng trong ruby, hy vng s c kh nng vit cc bi khc v hai ch  ny, nu c thc mc hay ng gp cho thiu xt ca tc gi, hy  li bnh lun bn di :smile:.\n","source":"_posts/2019-04-08-immutable-va-mutable-trong-ruby.md","raw":"---\ntitle: \"Immutable Vs Mutable\"\ndate: 2019-04-08\ndraft: false\ntags: [\"ruby\", \"programming\"]\ncategories: [\"ruby notes\", \"programming\"]\nmytag: \"Ruby\"\nmytrend: \"COOL\"\n---\n\n# t vn \n\nVn   y l ti khng c vn  g  t c, bi vit nm trong m kin thc ri bng bong ca ti, v gi ti cn vit li nh mt cch  n tp, hy vng n c th gip c ai .\n\n# Lun bn\n\n# 1. Khi nim mutable, immutable v ruby\n\ni thng vo vn , chng ta cn  cp n ba vn : `mutable`, `immutable` v cch ruby x l hai khi nim . Trc ht nu bn  qun, th ti xin c nhc li nh ngha ca chng.\n\nXin trch dn [wiki](https://en.wikipedia.org/wiki/Immutable_object):\n\n> In object-oriented and functional programming, an immutable object (unchangeable[1] object) is an object whose state cannot be modified after it is created.[2] This is in contrast to a mutable object (changeable object), which can be modified after it is created.\n\nTranslate:\n\n> Trong lp trnh hng i tng v lp trnh hm, mt i tng c coi immutable, l mt i tng **khng th thay i** trng thi sau khi n c to ln u, ngc li vi mt i tng c coi l mutable n c th **thay i** trng thi sau khi c khi to ln u.\n\nDng t qu kh hiu, what the hell is \"trng thi\"? Theo mt cch hn lm v y , trng thi ca mt i tng ngoi i tht c thit lp bi tt c nhng g to nn chng.\n\nTng t, cc trng thi ca mt i tng trong lp trnh cng c thit lp bng tt c nhng g to nn chng. V d:\n\nVi 1 bin integer c bn `x = 10` th trng thi ca n c to ra bi tn bin v gi tr,  y tn bin l `x` v gi tr l `10`, u  trong vng nh (Ram) ca bn s lu tr ci ch `x` km s `10` ny.\n\nng ngha vi  nu ti thay i c gi tr 10 ca bin x th x l mt i tng mutable v ngc li n l mt i tng immutable.\n\nTi gn `x = 11` v thnh cng\n\nT  c th a ra kt lun x l mt mutable?\n\nCu tr li l khng, mt s khi nim ri rm lm kh ta lc u. Nh  bit, th m CPU lm vic l a ch vng nh v ch a ch vng nh m thi. Nhng th khc n khng quan tm.\n\nVi cu lnh gn `x = 10`. N c h iu hnh phin dch thnh \"c mt bin tn `x` c gn gi tr bng `10`, Ram, my hy b tr thm hai slot  lu tr `x` v `10`\". Vy lc :\n\n`x`(tn bin) c lu  v tr AAA\n`10`(gi tr) c lu  v tr BBB\n\nVi lnh gn tip theo `x = 11`:\n\n`x` vn yn v nm  v tr AAA\n`10` cng vn yn tr nm  v tr BBB\n`11` gi tr mi gn cho bin x th lc ny nm  v tr CCC\n\nVy khi chy mt lnh gn mi th bin x  c gn bng gi tr trn mt vng nh khc, cn vng nh ban u **khng thay i gi tr** nn ta c th kt lun x l mt immutable.\n\nChng minh bng v d sau trong ruby, ch  l ruby l mt ngn ng script, vi trnh thng dch VM bn di  x l ca n c vit bng C, nn  lp c s ca ruby ta khng th truy xut v tr vng nh n tng thanh ghi nh trong C c (vic  c lm  lp core YARV). Tuy nhin, ta c th kim tra c v tr tng trng trn b nh ca n thng qua `object_id`.\n\n```ruby\nx = 10\nx.object_id\n#=> 21\nx = 11\nx.object_id\n#=> 23\n```\n\nNote: Nu bn gn tip x = 12 v kim tra li object_id, lc ny bn s thy n bng 25. Gi tr 10, 11, 12 tng ng vi object_id l 21, 23, 25. Liu c mt quy lut no  y? Cu tr li l c, nhng vn  ny s c  cp n trong mt bi vit tip theo.\n\nT v d trn bn  hiu v immutable, vy cn mutable? n gin nht l hy hiu ngc li vi immutable, nu gn x = 11 v x c object_id khng i th x chnh l mutable.\n\n```\nTt c cc loi d liu nguyn thu trong ruby u l immutable.\n```\n\nInteger, float, string, boolean chng u l immutable.\n\n# 2. Liu y c phi l mt kin thc cn thit?\n\nChc chn l c.\n\nTh nht: Nu trong cng vic bn khng bao gi phi dng n n, bn c th ni v n nh mt kin thc hn lm  th hin kh nng vi sp v yu cu tng lng :worried:\n\nTh hai: Xt v d sau\n\n```ruby\nstr = \"\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str += i\nend\n```\n\nT tng ca on m ny l cng tt c cc phn t trong mt mng string v cho ra kt qu cui cng l mt chui tng hp tt c cc phn t.\nC iu g bt thng trong on m ny khng nh? Cu tr li l c. Nh nhng g chng ta  ni  trn c hai iu cn lu :\n\n> 1. Cc kiu d liu nguyn thu trong ruby u l immutable v hin nhin string khng ngoi l.\n\n> 2. Khi mt object l immutable, th vic bn gn n bng mt gi tr khc ng ngha vi vic vng nh c s khng c dng n, m n s ra mt vng nh mi ri ghi kt qu mi ln , c lp li nh vy mi mi.\n\nT hai iu trn ta rt ra c kt lun:\n\n1. Trong ln gn u tin str c gi tr l chui rng v c khi to ti v tr A1\n2. Trong ln lp `each` u tin, str c gi tr l \"Hoang\" v n lu  v tr A2\n3. Trong ln lp `each` th hai, str c gi tr mi l \"HoangDuy\" v n lu  v tr mi l A3\n4. Trong ln lp cui cng th str c gi tr chng ta mong i l \"HoangDuyChinh\" v n lu  v tr A4\n\nChng minh:\n\n```ruby\nstr = \"\"\nputs \"First location: #{str.object_id}\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str += i\n  puts \"value: #{str} | location: #{str.object_id}\"\nend\n\nputs \"Final value: #{str} | location: #{str.object_id}\"\n```\n\nKt qu:\n```\nFirst location: 47434608564740\nvalue: Hoang | location: 47434608564520\nvalue: HoangDuy | location: 47434608564440\nvalue: HoangDuyChinh | location: 47434608564360\nFinal value: HoangDuyChinh | location: 47434608564360\n```\n\nV th chng ta quan tm t  v sau l v tr A4 ny. Vy cn A1, A2, A3 cng ang mang gi tr? Chng i u v u? Chnh xc, n tr thnh mt vng nh rc v s c GC dn dp nhng khng phi ngay lp tc, vy trong khong thi gian  n vn nm gi cc vng nh ca chng ta.  cng l mt trong cc l do vic bn mun chy ruby on rails trn mt chic my tnh sinh vin 2GB l v cng kh khn. Ruby n Ram nh ung nc l vy.\n\nV d trn mng ta c ba phn t v ta c 3 gi tr rc trn b nh, hy tng tng bn c mt mng mt triu phn t :worried:\n\nGii php trong trng hp ny l g?  l duyt mng nh mt `object reference` ch khng phi mt bin gi tr\n\n```ruby\nstr = \"\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str << i\nend\n```\n\nNh vy str s  ng mt vng nh v ta khng c mt ng bin rc khng mong i.\n\nChng minh:\n\n```ruby\nstr = \"\"\nputs \"First location: #{str.object_id}\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str << i\n  puts \"value: #{str} | location: #{str.object_id}\"\nend\n\nputs \"Final value: #{str} | location: #{str.object_id}\"\n```\n\nKt qu:\n```\nFirst location: 47196120971580\nvalue: Hoang | location: 47196120971580\nvalue: HoangDuy | location: 47196120971580\nvalue: HoangDuyChinh | location: 47196120971580\nFinal value: HoangDuyChinh | location: 47196120971580\n```\n# Kt lun\n\nTrong bi vit c  cp n `object_id` v `GC`, y l hai vn  nn tng trong ruby, hy vng s c kh nng vit cc bi khc v hai ch  ny, nu c thc mc hay ng gp cho thiu xt ca tc gi, hy  li bnh lun bn di :smile:.\n","slug":"2019-04-08-immutable-va-mutable-trong-ruby","published":1,"updated":"2019-11-13T04:02:44.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2g000x8ersg4xp146k","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Vn   y l ti khng c vn  g  t c, bi vit nm trong m kin thc ri bng bong ca ti, v gi ti cn vit li nh mt cch  n tp, hy vng n c th gip c ai .</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Khai-niem-mutable-immutable-va-ruby\"><a href=\"#1-Khai-niem-mutable-immutable-va-ruby\" class=\"headerlink\" title=\"1. Khi nim mutable, immutable v ruby\"></a>1. Khi nim mutable, immutable v ruby</h1><p>i thng vo vn , chng ta cn  cp n ba vn : <code>mutable</code>, <code>immutable</code> v cch ruby x l hai khi nim . Trc ht nu bn  qun, th ti xin c nhc li nh ngha ca chng.</p>\n<p>Xin trch dn <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" target=\"_blank\" rel=\"noopener\">wiki</a>:</p>\n<blockquote>\n<p>In object-oriented and functional programming, an immutable object (unchangeable[1] object) is an object whose state cannot be modified after it is created.[2] This is in contrast to a mutable object (changeable object), which can be modified after it is created.</p>\n</blockquote>\n<p>Translate:</p>\n<blockquote>\n<p>Trong lp trnh hng i tng v lp trnh hm, mt i tng c coi immutable, l mt i tng <strong>khng th thay i</strong> trng thi sau khi n c to ln u, ngc li vi mt i tng c coi l mutable n c th <strong>thay i</strong> trng thi sau khi c khi to ln u.</p>\n</blockquote>\n<p>Dng t qu kh hiu, what the hell is trng thi? Theo mt cch hn lm v y , trng thi ca mt i tng ngoi i tht c thit lp bi tt c nhng g to nn chng.</p>\n<p>Tng t, cc trng thi ca mt i tng trong lp trnh cng c thit lp bng tt c nhng g to nn chng. V d:</p>\n<p>Vi 1 bin integer c bn <code>x = 10</code> th trng thi ca n c to ra bi tn bin v gi tr,  y tn bin l <code>x</code> v gi tr l <code>10</code>, u  trong vng nh (Ram) ca bn s lu tr ci ch <code>x</code> km s <code>10</code> ny.</p>\n<p>ng ngha vi  nu ti thay i c gi tr 10 ca bin x th x l mt i tng mutable v ngc li n l mt i tng immutable.</p>\n<p>Ti gn <code>x = 11</code> v thnh cng</p>\n<p>T  c th a ra kt lun x l mt mutable?</p>\n<p>Cu tr li l khng, mt s khi nim ri rm lm kh ta lc u. Nh  bit, th m CPU lm vic l a ch vng nh v ch a ch vng nh m thi. Nhng th khc n khng quan tm.</p>\n<p>Vi cu lnh gn <code>x = 10</code>. N c h iu hnh phin dch thnh c mt bin tn <code>x</code> c gn gi tr bng <code>10</code>, Ram, my hy b tr thm hai slot  lu tr <code>x</code> v <code>10</code>. Vy lc :</p>\n<p><code>x</code>(tn bin) c lu  v tr AAA<br><code>10</code>(gi tr) c lu  v tr BBB</p>\n<p>Vi lnh gn tip theo <code>x = 11</code>:</p>\n<p><code>x</code> vn yn v nm  v tr AAA<br><code>10</code> cng vn yn tr nm  v tr BBB<br><code>11</code> gi tr mi gn cho bin x th lc ny nm  v tr CCC</p>\n<p>Vy khi chy mt lnh gn mi th bin x  c gn bng gi tr trn mt vng nh khc, cn vng nh ban u <strong>khng thay i gi tr</strong> nn ta c th kt lun x l mt immutable.</p>\n<p>Chng minh bng v d sau trong ruby, ch  l ruby l mt ngn ng script, vi trnh thng dch VM bn di  x l ca n c vit bng C, nn  lp c s ca ruby ta khng th truy xut v tr vng nh n tng thanh ghi nh trong C c (vic  c lm  lp core YARV). Tuy nhin, ta c th kim tra c v tr tng trng trn b nh ca n thng qua <code>object_id</code>.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = <span class=\"number\">10</span></span><br><span class=\"line\">x.object_id</span><br><span class=\"line\"><span class=\"comment\">#=&gt; 21</span></span><br><span class=\"line\">x = <span class=\"number\">11</span></span><br><span class=\"line\">x.object_id</span><br><span class=\"line\"><span class=\"comment\">#=&gt; 23</span></span><br></pre></td></tr></table></figure>\n\n<p>Note: Nu bn gn tip x = 12 v kim tra li object_id, lc ny bn s thy n bng 25. Gi tr 10, 11, 12 tng ng vi object_id l 21, 23, 25. Liu c mt quy lut no  y? Cu tr li l c, nhng vn  ny s c  cp n trong mt bi vit tip theo.</p>\n<p>T v d trn bn  hiu v immutable, vy cn mutable? n gin nht l hy hiu ngc li vi immutable, nu gn x = 11 v x c object_id khng i th x chnh l mutable.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Tt c cc loi d liu nguyn thu trong ruby u l immutable.</span><br></pre></td></tr></table></figure>\n\n<p>Integer, float, string, boolean chng u l immutable.</p>\n<h1 id=\"2-Lieu-day-co-phai-la-mot-kien-thuc-can-thiet\"><a href=\"#2-Lieu-day-co-phai-la-mot-kien-thuc-can-thiet\" class=\"headerlink\" title=\"2. Liu y c phi l mt kin thc cn thit?\"></a>2. Liu y c phi l mt kin thc cn thit?</h1><p>Chc chn l c.</p>\n<p>Th nht: Nu trong cng vic bn khng bao gi phi dng n n, bn c th ni v n nh mt kin thc hn lm  th hin kh nng vi sp v yu cu tng lng :worried:</p>\n<p>Th hai: Xt v d sau</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str += i</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>T tng ca on m ny l cng tt c cc phn t trong mt mng string v cho ra kt qu cui cng l mt chui tng hp tt c cc phn t.<br>C iu g bt thng trong on m ny khng nh? Cu tr li l c. Nh nhng g chng ta  ni  trn c hai iu cn lu :</p>\n<blockquote>\n<ol>\n<li>Cc kiu d liu nguyn thu trong ruby u l immutable v hin nhin string khng ngoi l.</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol start=\"2\">\n<li>Khi mt object l immutable, th vic bn gn n bng mt gi tr khc ng ngha vi vic vng nh c s khng c dng n, m n s ra mt vng nh mi ri ghi kt qu mi ln , c lp li nh vy mi mi.</li>\n</ol>\n</blockquote>\n<p>T hai iu trn ta rt ra c kt lun:</p>\n<ol>\n<li>Trong ln gn u tin str c gi tr l chui rng v c khi to ti v tr A1</li>\n<li>Trong ln lp <code>each</code> u tin, str c gi tr l Hoang v n lu  v tr A2</li>\n<li>Trong ln lp <code>each</code> th hai, str c gi tr mi l HoangDuy v n lu  v tr mi l A3</li>\n<li>Trong ln lp cui cng th str c gi tr chng ta mong i l HoangDuyChinh v n lu  v tr A4</li>\n</ol>\n<p>Chng minh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">puts <span class=\"string\">\"First location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str += i</span><br><span class=\"line\">  puts <span class=\"string\">\"value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Final value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">First location: 47434608564740</span><br><span class=\"line\">value: Hoang | location: 47434608564520</span><br><span class=\"line\">value: HoangDuy | location: 47434608564440</span><br><span class=\"line\">value: HoangDuyChinh | location: 47434608564360</span><br><span class=\"line\">Final value: HoangDuyChinh | location: 47434608564360</span><br></pre></td></tr></table></figure>\n\n<p>V th chng ta quan tm t  v sau l v tr A4 ny. Vy cn A1, A2, A3 cng ang mang gi tr? Chng i u v u? Chnh xc, n tr thnh mt vng nh rc v s c GC dn dp nhng khng phi ngay lp tc, vy trong khong thi gian  n vn nm gi cc vng nh ca chng ta.  cng l mt trong cc l do vic bn mun chy ruby on rails trn mt chic my tnh sinh vin 2GB l v cng kh khn. Ruby n Ram nh ung nc l vy.</p>\n<p>V d trn mng ta c ba phn t v ta c 3 gi tr rc trn b nh, hy tng tng bn c mt mng mt triu phn t :worried:</p>\n<p>Gii php trong trng hp ny l g?  l duyt mng nh mt <code>object reference</code> ch khng phi mt bin gi tr</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str &lt;&lt; i</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh vy str s  ng mt vng nh v ta khng c mt ng bin rc khng mong i.</p>\n<p>Chng minh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">puts <span class=\"string\">\"First location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str &lt;&lt; i</span><br><span class=\"line\">  puts <span class=\"string\">\"value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Final value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">First location: 47196120971580</span><br><span class=\"line\">value: Hoang | location: 47196120971580</span><br><span class=\"line\">value: HoangDuy | location: 47196120971580</span><br><span class=\"line\">value: HoangDuyChinh | location: 47196120971580</span><br><span class=\"line\">Final value: HoangDuyChinh | location: 47196120971580</span><br></pre></td></tr></table></figure>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Trong bi vit c  cp n <code>object_id</code> v <code>GC</code>, y l hai vn  nn tng trong ruby, hy vng s c kh nng vit cc bi khc v hai ch  ny, nu c thc mc hay ng gp cho thiu xt ca tc gi, hy  li bnh lun bn di :smile:.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Vn   y l ti khng c vn  g  t c, bi vit nm trong m kin thc ri bng bong ca ti, v gi ti cn vit li nh mt cch  n tp, hy vng n c th gip c ai .</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Khai-niem-mutable-immutable-va-ruby\"><a href=\"#1-Khai-niem-mutable-immutable-va-ruby\" class=\"headerlink\" title=\"1. Khi nim mutable, immutable v ruby\"></a>1. Khi nim mutable, immutable v ruby</h1><p>i thng vo vn , chng ta cn  cp n ba vn : <code>mutable</code>, <code>immutable</code> v cch ruby x l hai khi nim . Trc ht nu bn  qun, th ti xin c nhc li nh ngha ca chng.</p>\n<p>Xin trch dn <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" target=\"_blank\" rel=\"noopener\">wiki</a>:</p>\n<blockquote>\n<p>In object-oriented and functional programming, an immutable object (unchangeable[1] object) is an object whose state cannot be modified after it is created.[2] This is in contrast to a mutable object (changeable object), which can be modified after it is created.</p>\n</blockquote>\n<p>Translate:</p>\n<blockquote>\n<p>Trong lp trnh hng i tng v lp trnh hm, mt i tng c coi immutable, l mt i tng <strong>khng th thay i</strong> trng thi sau khi n c to ln u, ngc li vi mt i tng c coi l mutable n c th <strong>thay i</strong> trng thi sau khi c khi to ln u.</p>\n</blockquote>\n<p>Dng t qu kh hiu, what the hell is trng thi? Theo mt cch hn lm v y , trng thi ca mt i tng ngoi i tht c thit lp bi tt c nhng g to nn chng.</p>\n<p>Tng t, cc trng thi ca mt i tng trong lp trnh cng c thit lp bng tt c nhng g to nn chng. V d:</p>\n<p>Vi 1 bin integer c bn <code>x = 10</code> th trng thi ca n c to ra bi tn bin v gi tr,  y tn bin l <code>x</code> v gi tr l <code>10</code>, u  trong vng nh (Ram) ca bn s lu tr ci ch <code>x</code> km s <code>10</code> ny.</p>\n<p>ng ngha vi  nu ti thay i c gi tr 10 ca bin x th x l mt i tng mutable v ngc li n l mt i tng immutable.</p>\n<p>Ti gn <code>x = 11</code> v thnh cng</p>\n<p>T  c th a ra kt lun x l mt mutable?</p>\n<p>Cu tr li l khng, mt s khi nim ri rm lm kh ta lc u. Nh  bit, th m CPU lm vic l a ch vng nh v ch a ch vng nh m thi. Nhng th khc n khng quan tm.</p>\n<p>Vi cu lnh gn <code>x = 10</code>. N c h iu hnh phin dch thnh c mt bin tn <code>x</code> c gn gi tr bng <code>10</code>, Ram, my hy b tr thm hai slot  lu tr <code>x</code> v <code>10</code>. Vy lc :</p>\n<p><code>x</code>(tn bin) c lu  v tr AAA<br><code>10</code>(gi tr) c lu  v tr BBB</p>\n<p>Vi lnh gn tip theo <code>x = 11</code>:</p>\n<p><code>x</code> vn yn v nm  v tr AAA<br><code>10</code> cng vn yn tr nm  v tr BBB<br><code>11</code> gi tr mi gn cho bin x th lc ny nm  v tr CCC</p>\n<p>Vy khi chy mt lnh gn mi th bin x  c gn bng gi tr trn mt vng nh khc, cn vng nh ban u <strong>khng thay i gi tr</strong> nn ta c th kt lun x l mt immutable.</p>\n<p>Chng minh bng v d sau trong ruby, ch  l ruby l mt ngn ng script, vi trnh thng dch VM bn di  x l ca n c vit bng C, nn  lp c s ca ruby ta khng th truy xut v tr vng nh n tng thanh ghi nh trong C c (vic  c lm  lp core YARV). Tuy nhin, ta c th kim tra c v tr tng trng trn b nh ca n thng qua <code>object_id</code>.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = <span class=\"number\">10</span></span><br><span class=\"line\">x.object_id</span><br><span class=\"line\"><span class=\"comment\">#=&gt; 21</span></span><br><span class=\"line\">x = <span class=\"number\">11</span></span><br><span class=\"line\">x.object_id</span><br><span class=\"line\"><span class=\"comment\">#=&gt; 23</span></span><br></pre></td></tr></table></figure>\n\n<p>Note: Nu bn gn tip x = 12 v kim tra li object_id, lc ny bn s thy n bng 25. Gi tr 10, 11, 12 tng ng vi object_id l 21, 23, 25. Liu c mt quy lut no  y? Cu tr li l c, nhng vn  ny s c  cp n trong mt bi vit tip theo.</p>\n<p>T v d trn bn  hiu v immutable, vy cn mutable? n gin nht l hy hiu ngc li vi immutable, nu gn x = 11 v x c object_id khng i th x chnh l mutable.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Tt c cc loi d liu nguyn thu trong ruby u l immutable.</span><br></pre></td></tr></table></figure>\n\n<p>Integer, float, string, boolean chng u l immutable.</p>\n<h1 id=\"2-Lieu-day-co-phai-la-mot-kien-thuc-can-thiet\"><a href=\"#2-Lieu-day-co-phai-la-mot-kien-thuc-can-thiet\" class=\"headerlink\" title=\"2. Liu y c phi l mt kin thc cn thit?\"></a>2. Liu y c phi l mt kin thc cn thit?</h1><p>Chc chn l c.</p>\n<p>Th nht: Nu trong cng vic bn khng bao gi phi dng n n, bn c th ni v n nh mt kin thc hn lm  th hin kh nng vi sp v yu cu tng lng :worried:</p>\n<p>Th hai: Xt v d sau</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str += i</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>T tng ca on m ny l cng tt c cc phn t trong mt mng string v cho ra kt qu cui cng l mt chui tng hp tt c cc phn t.<br>C iu g bt thng trong on m ny khng nh? Cu tr li l c. Nh nhng g chng ta  ni  trn c hai iu cn lu :</p>\n<blockquote>\n<ol>\n<li>Cc kiu d liu nguyn thu trong ruby u l immutable v hin nhin string khng ngoi l.</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol start=\"2\">\n<li>Khi mt object l immutable, th vic bn gn n bng mt gi tr khc ng ngha vi vic vng nh c s khng c dng n, m n s ra mt vng nh mi ri ghi kt qu mi ln , c lp li nh vy mi mi.</li>\n</ol>\n</blockquote>\n<p>T hai iu trn ta rt ra c kt lun:</p>\n<ol>\n<li>Trong ln gn u tin str c gi tr l chui rng v c khi to ti v tr A1</li>\n<li>Trong ln lp <code>each</code> u tin, str c gi tr l Hoang v n lu  v tr A2</li>\n<li>Trong ln lp <code>each</code> th hai, str c gi tr mi l HoangDuy v n lu  v tr mi l A3</li>\n<li>Trong ln lp cui cng th str c gi tr chng ta mong i l HoangDuyChinh v n lu  v tr A4</li>\n</ol>\n<p>Chng minh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">puts <span class=\"string\">\"First location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str += i</span><br><span class=\"line\">  puts <span class=\"string\">\"value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Final value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">First location: 47434608564740</span><br><span class=\"line\">value: Hoang | location: 47434608564520</span><br><span class=\"line\">value: HoangDuy | location: 47434608564440</span><br><span class=\"line\">value: HoangDuyChinh | location: 47434608564360</span><br><span class=\"line\">Final value: HoangDuyChinh | location: 47434608564360</span><br></pre></td></tr></table></figure>\n\n<p>V th chng ta quan tm t  v sau l v tr A4 ny. Vy cn A1, A2, A3 cng ang mang gi tr? Chng i u v u? Chnh xc, n tr thnh mt vng nh rc v s c GC dn dp nhng khng phi ngay lp tc, vy trong khong thi gian  n vn nm gi cc vng nh ca chng ta.  cng l mt trong cc l do vic bn mun chy ruby on rails trn mt chic my tnh sinh vin 2GB l v cng kh khn. Ruby n Ram nh ung nc l vy.</p>\n<p>V d trn mng ta c ba phn t v ta c 3 gi tr rc trn b nh, hy tng tng bn c mt mng mt triu phn t :worried:</p>\n<p>Gii php trong trng hp ny l g?  l duyt mng nh mt <code>object reference</code> ch khng phi mt bin gi tr</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str &lt;&lt; i</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh vy str s  ng mt vng nh v ta khng c mt ng bin rc khng mong i.</p>\n<p>Chng minh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">puts <span class=\"string\">\"First location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str &lt;&lt; i</span><br><span class=\"line\">  puts <span class=\"string\">\"value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Final value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">First location: 47196120971580</span><br><span class=\"line\">value: Hoang | location: 47196120971580</span><br><span class=\"line\">value: HoangDuy | location: 47196120971580</span><br><span class=\"line\">value: HoangDuyChinh | location: 47196120971580</span><br><span class=\"line\">Final value: HoangDuyChinh | location: 47196120971580</span><br></pre></td></tr></table></figure>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Trong bi vit c  cp n <code>object_id</code> v <code>GC</code>, y l hai vn  nn tng trong ruby, hy vng s c kh nng vit cc bi khc v hai ch  ny, nu c thc mc hay ng gp cho thiu xt ca tc gi, hy  li bnh lun bn di :smile:.</p>\n"},{"title":"Upload Vi S3 Trong Rails","date":"2019-04-09T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\nGhi ch ny c tham kho t bi vit [Lu tr file trn Amazon S3](https://viblo.asia/p/ror-luu-tru-file-tren-amazon-s3-BMvRpNXEzwY#_cau-hinh-connect-toi-dich-vu-s3-trong-ung-dung-rails-3) ca tc gi `@duyth1993` trn website `viblo.com`.\n\nBi ton: Hin ti ti ang cn tm mt dch v lu tr file, trc gi ti khng s dng v cha c nhu cu. Tm kim mt lc th ti quyt nh s dng S3 v sn cng ang cn ti khon free ca ca AWS, tham kho bi vit bn trn mt s lu  khi s dng ny m ti rt ra nh sau:\n\n1. Bi vit trn ca tc gi vit rt chi tit, tuy nhin hng dn  l trn rails 4 v cn ch  thay i mt s config  ph hp vi rails 5 m ti ang s dng.  l v vic s dng `credentials` thay th cho `secret`, thng tin y hn c th tham kho ti bi vit [Rails v bo mt thng tin quan trng](https://hdchinh.github.io/ruby/2019/02/22/xu-ly-thong-tin-quan-trong-trong-rails.html).\n\n2. C 4 thng tin quan trng  cu hnh n S3  l: `access_key_id`, `secret_access_key`, `region` v `bucket_name`.\n\n3. Mt s config  connect ti server S3 l do th vin `aws-sdk-rails` quy nh v vy n gin l lm theo v khng thc mc ti sao.\n\n4. Cn ch  bc config cho file trc khi upload vi cc thng tin nh: `content_type`(nh dng file, vic s dng nh dng file dng khng tng thch vi nh bn upload ln dn  vic khng th hin th view bc nh .), `acl`(access control list: quy nh v vic ai c th access khi c url ca file) v `server_side_encryption`(la chn ny  m ha file bn ti ln, i km  l gim hiu nng v thm 1 bc cn x l.)\n\nSource demo xem ti [y](https://github.com/hdchinh/S3_with_rails_5.2)\n","source":"_posts/2019-04-10-upload-file-len-aws-s3-va-nhung-van-de-can-luu-y.md","raw":"---\ntitle: \"Upload Vi S3 Trong Rails\"\ndate: 2019-04-10\ndraft: false\ntags: [\"aws\", \"rails\", \"til\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\n---\n\nGhi ch ny c tham kho t bi vit [Lu tr file trn Amazon S3](https://viblo.asia/p/ror-luu-tru-file-tren-amazon-s3-BMvRpNXEzwY#_cau-hinh-connect-toi-dich-vu-s3-trong-ung-dung-rails-3) ca tc gi `@duyth1993` trn website `viblo.com`.\n\nBi ton: Hin ti ti ang cn tm mt dch v lu tr file, trc gi ti khng s dng v cha c nhu cu. Tm kim mt lc th ti quyt nh s dng S3 v sn cng ang cn ti khon free ca ca AWS, tham kho bi vit bn trn mt s lu  khi s dng ny m ti rt ra nh sau:\n\n1. Bi vit trn ca tc gi vit rt chi tit, tuy nhin hng dn  l trn rails 4 v cn ch  thay i mt s config  ph hp vi rails 5 m ti ang s dng.  l v vic s dng `credentials` thay th cho `secret`, thng tin y hn c th tham kho ti bi vit [Rails v bo mt thng tin quan trng](https://hdchinh.github.io/ruby/2019/02/22/xu-ly-thong-tin-quan-trong-trong-rails.html).\n\n2. C 4 thng tin quan trng  cu hnh n S3  l: `access_key_id`, `secret_access_key`, `region` v `bucket_name`.\n\n3. Mt s config  connect ti server S3 l do th vin `aws-sdk-rails` quy nh v vy n gin l lm theo v khng thc mc ti sao.\n\n4. Cn ch  bc config cho file trc khi upload vi cc thng tin nh: `content_type`(nh dng file, vic s dng nh dng file dng khng tng thch vi nh bn upload ln dn  vic khng th hin th view bc nh .), `acl`(access control list: quy nh v vic ai c th access khi c url ca file) v `server_side_encryption`(la chn ny  m ha file bn ti ln, i km  l gim hiu nng v thm 1 bc cn x l.)\n\nSource demo xem ti [y](https://github.com/hdchinh/S3_with_rails_5.2)\n","slug":"2019-04-10-upload-file-len-aws-s3-va-nhung-van-de-can-luu-y","published":1,"updated":"2019-11-13T04:03:44.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2j00118ers5gsagjk9","content":"<p>Ghi ch ny c tham kho t bi vit <a href=\"https://viblo.asia/p/ror-luu-tru-file-tren-amazon-s3-BMvRpNXEzwY#_cau-hinh-connect-toi-dich-vu-s3-trong-ung-dung-rails-3\" target=\"_blank\" rel=\"noopener\">Lu tr file trn Amazon S3</a> ca tc gi <code>@duyth1993</code> trn website <code>viblo.com</code>.</p>\n<p>Bi ton: Hin ti ti ang cn tm mt dch v lu tr file, trc gi ti khng s dng v cha c nhu cu. Tm kim mt lc th ti quyt nh s dng S3 v sn cng ang cn ti khon free ca ca AWS, tham kho bi vit bn trn mt s lu  khi s dng ny m ti rt ra nh sau:</p>\n<ol>\n<li><p>Bi vit trn ca tc gi vit rt chi tit, tuy nhin hng dn  l trn rails 4 v cn ch  thay i mt s config  ph hp vi rails 5 m ti ang s dng.  l v vic s dng <code>credentials</code> thay th cho <code>secret</code>, thng tin y hn c th tham kho ti bi vit <a href=\"https://hdchinh.github.io/ruby/2019/02/22/xu-ly-thong-tin-quan-trong-trong-rails.html\">Rails v bo mt thng tin quan trng</a>.</p>\n</li>\n<li><p>C 4 thng tin quan trng  cu hnh n S3  l: <code>access_key_id</code>, <code>secret_access_key</code>, <code>region</code> v <code>bucket_name</code>.</p>\n</li>\n<li><p>Mt s config  connect ti server S3 l do th vin <code>aws-sdk-rails</code> quy nh v vy n gin l lm theo v khng thc mc ti sao.</p>\n</li>\n<li><p>Cn ch  bc config cho file trc khi upload vi cc thng tin nh: <code>content_type</code>(nh dng file, vic s dng nh dng file dng khng tng thch vi nh bn upload ln dn  vic khng th hin th view bc nh .), <code>acl</code>(access control list: quy nh v vic ai c th access khi c url ca file) v <code>server_side_encryption</code>(la chn ny  m ha file bn ti ln, i km  l gim hiu nng v thm 1 bc cn x l.)</p>\n</li>\n</ol>\n<p>Source demo xem ti <a href=\"https://github.com/hdchinh/S3_with_rails_5.2\" target=\"_blank\" rel=\"noopener\">y</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Ghi ch ny c tham kho t bi vit <a href=\"https://viblo.asia/p/ror-luu-tru-file-tren-amazon-s3-BMvRpNXEzwY#_cau-hinh-connect-toi-dich-vu-s3-trong-ung-dung-rails-3\" target=\"_blank\" rel=\"noopener\">Lu tr file trn Amazon S3</a> ca tc gi <code>@duyth1993</code> trn website <code>viblo.com</code>.</p>\n<p>Bi ton: Hin ti ti ang cn tm mt dch v lu tr file, trc gi ti khng s dng v cha c nhu cu. Tm kim mt lc th ti quyt nh s dng S3 v sn cng ang cn ti khon free ca ca AWS, tham kho bi vit bn trn mt s lu  khi s dng ny m ti rt ra nh sau:</p>\n<ol>\n<li><p>Bi vit trn ca tc gi vit rt chi tit, tuy nhin hng dn  l trn rails 4 v cn ch  thay i mt s config  ph hp vi rails 5 m ti ang s dng.  l v vic s dng <code>credentials</code> thay th cho <code>secret</code>, thng tin y hn c th tham kho ti bi vit <a href=\"https://hdchinh.github.io/ruby/2019/02/22/xu-ly-thong-tin-quan-trong-trong-rails.html\">Rails v bo mt thng tin quan trng</a>.</p>\n</li>\n<li><p>C 4 thng tin quan trng  cu hnh n S3  l: <code>access_key_id</code>, <code>secret_access_key</code>, <code>region</code> v <code>bucket_name</code>.</p>\n</li>\n<li><p>Mt s config  connect ti server S3 l do th vin <code>aws-sdk-rails</code> quy nh v vy n gin l lm theo v khng thc mc ti sao.</p>\n</li>\n<li><p>Cn ch  bc config cho file trc khi upload vi cc thng tin nh: <code>content_type</code>(nh dng file, vic s dng nh dng file dng khng tng thch vi nh bn upload ln dn  vic khng th hin th view bc nh .), <code>acl</code>(access control list: quy nh v vic ai c th access khi c url ca file) v <code>server_side_encryption</code>(la chn ny  m ha file bn ti ln, i km  l gim hiu nng v thm 1 bc cn x l.)</p>\n</li>\n</ol>\n<p>Source demo xem ti <a href=\"https://github.com/hdchinh/S3_with_rails_5.2\" target=\"_blank\" rel=\"noopener\">y</a></p>\n"},{"title":"S Dng Carrierwave Vi S3","date":"2019-04-10T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n# Gemfile\n\n```ruby\ngem 'fog', require: 'fog/aws'\ngem 'carrierwave'\n```\n# Class Uploader\n\n```ruby\nstorage :fog\n```\n\n# File cu hnh config/initializers/carrierwave.rb\n\n```ruby\nrequire 'carrierwave/storage/fog'\n\nCarrierWave.configure do |config|\n  config.fog_credentials = {\n    :provider              => 'AWS',\n    :aws_access_key_id     => Rails.application.credentials.access_key_id,\n    :aws_secret_access_key => Rails.application.credentials.secret_access_key,\n    :region                => Rails.application.credentials.s3_region,\n    :path_style            => true,\n    :host                  => 's3.us-east-2.amazonaws.com',\n    :endpoint              => 'https://s3.us-east-2.amazonaws.com'\n  }\n  config.cache_dir = \"#{Rails.root}/tmp/uploads\"\n  config.fog_directory  = Rails.application.credentials.s3_bucket\n  config.fog_public     = true\n  config.fog_attributes = { 'Cache-Control' => \"max-age=#{10.day.to_i}\" }\n  config.storage = :fog\nend\n```\n\n# Acess File uploaded\n\n`Instance.field_name_image.url` (get link s3)\n\n# Source demo\n\n[Ti y](https://github.com/hdchinh/s3_carrierwave)\n","source":"_posts/2019-04-11-su-dung-carrierwave-voi-s3.md","raw":"---\ntitle: \"S Dng Carrierwave Vi S3\"\ndate: 2019-04-11\ndraft: false\ntags: [\"rails\", \"aws\", \"carrierwave\", \"til\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\n---\n\n# Gemfile\n\n```ruby\ngem 'fog', require: 'fog/aws'\ngem 'carrierwave'\n```\n# Class Uploader\n\n```ruby\nstorage :fog\n```\n\n# File cu hnh config/initializers/carrierwave.rb\n\n```ruby\nrequire 'carrierwave/storage/fog'\n\nCarrierWave.configure do |config|\n  config.fog_credentials = {\n    :provider              => 'AWS',\n    :aws_access_key_id     => Rails.application.credentials.access_key_id,\n    :aws_secret_access_key => Rails.application.credentials.secret_access_key,\n    :region                => Rails.application.credentials.s3_region,\n    :path_style            => true,\n    :host                  => 's3.us-east-2.amazonaws.com',\n    :endpoint              => 'https://s3.us-east-2.amazonaws.com'\n  }\n  config.cache_dir = \"#{Rails.root}/tmp/uploads\"\n  config.fog_directory  = Rails.application.credentials.s3_bucket\n  config.fog_public     = true\n  config.fog_attributes = { 'Cache-Control' => \"max-age=#{10.day.to_i}\" }\n  config.storage = :fog\nend\n```\n\n# Acess File uploaded\n\n`Instance.field_name_image.url` (get link s3)\n\n# Source demo\n\n[Ti y](https://github.com/hdchinh/s3_carrierwave)\n","slug":"2019-04-11-su-dung-carrierwave-voi-s3","published":1,"updated":"2019-11-13T04:04:06.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2l00148ersevxu0s21","content":"<h1 id=\"Gemfile\"><a href=\"#Gemfile\" class=\"headerlink\" title=\"Gemfile\"></a>Gemfile</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gem <span class=\"string\">'fog'</span>, <span class=\"symbol\">require:</span> <span class=\"string\">'fog/aws'</span></span><br><span class=\"line\">gem <span class=\"string\">'carrierwave'</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"Class-Uploader\"><a href=\"#Class-Uploader\" class=\"headerlink\" title=\"Class Uploader\"></a>Class Uploader</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">storage <span class=\"symbol\">:fog</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"File-cau-hinh-config-initializers-carrierwave-rb\"><a href=\"#File-cau-hinh-config-initializers-carrierwave-rb\" class=\"headerlink\" title=\"File cu hnh config/initializers/carrierwave.rb\"></a>File cu hnh config/initializers/carrierwave.rb</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'carrierwave/storage/fog'</span></span><br><span class=\"line\"></span><br><span class=\"line\">CarrierWave.configure <span class=\"keyword\">do</span> <span class=\"params\">|config|</span></span><br><span class=\"line\">  config.fog_credentials = &#123;</span><br><span class=\"line\">    <span class=\"symbol\">:provider</span>              =&gt; <span class=\"string\">'AWS'</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:aws_access_key_id</span>     =&gt; Rails.application.credentials.access_key_id,</span><br><span class=\"line\">    <span class=\"symbol\">:aws_secret_access_key</span> =&gt; Rails.application.credentials.secret_access_key,</span><br><span class=\"line\">    <span class=\"symbol\">:region</span>                =&gt; Rails.application.credentials.s3_region,</span><br><span class=\"line\">    <span class=\"symbol\">:path_style</span>            =&gt; <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:host</span>                  =&gt; <span class=\"string\">'s3.us-east-2.amazonaws.com'</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:endpoint</span>              =&gt; <span class=\"string\">'https://s3.us-east-2.amazonaws.com'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  config.cache_dir = <span class=\"string\">\"<span class=\"subst\">#&#123;Rails.root&#125;</span>/tmp/uploads\"</span></span><br><span class=\"line\">  config.fog_directory  = Rails.application.credentials.s3_bucket</span><br><span class=\"line\">  config.fog_public     = <span class=\"literal\">true</span></span><br><span class=\"line\">  config.fog_attributes = &#123; <span class=\"string\">'Cache-Control'</span> =&gt; <span class=\"string\">\"max-age=<span class=\"subst\">#&#123;<span class=\"number\">10</span>.day.to_i&#125;</span>\"</span> &#125;</span><br><span class=\"line\">  config.storage = <span class=\"symbol\">:fog</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Acess-File-uploaded\"><a href=\"#Acess-File-uploaded\" class=\"headerlink\" title=\"Acess File uploaded\"></a>Acess File uploaded</h1><p><code>Instance.field_name_image.url</code> (get link s3)</p>\n<h1 id=\"Source-demo\"><a href=\"#Source-demo\" class=\"headerlink\" title=\"Source demo\"></a>Source demo</h1><p><a href=\"https://github.com/hdchinh/s3_carrierwave\" target=\"_blank\" rel=\"noopener\">Ti y</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Gemfile\"><a href=\"#Gemfile\" class=\"headerlink\" title=\"Gemfile\"></a>Gemfile</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gem <span class=\"string\">'fog'</span>, <span class=\"symbol\">require:</span> <span class=\"string\">'fog/aws'</span></span><br><span class=\"line\">gem <span class=\"string\">'carrierwave'</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"Class-Uploader\"><a href=\"#Class-Uploader\" class=\"headerlink\" title=\"Class Uploader\"></a>Class Uploader</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">storage <span class=\"symbol\">:fog</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"File-cau-hinh-config-initializers-carrierwave-rb\"><a href=\"#File-cau-hinh-config-initializers-carrierwave-rb\" class=\"headerlink\" title=\"File cu hnh config/initializers/carrierwave.rb\"></a>File cu hnh config/initializers/carrierwave.rb</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'carrierwave/storage/fog'</span></span><br><span class=\"line\"></span><br><span class=\"line\">CarrierWave.configure <span class=\"keyword\">do</span> <span class=\"params\">|config|</span></span><br><span class=\"line\">  config.fog_credentials = &#123;</span><br><span class=\"line\">    <span class=\"symbol\">:provider</span>              =&gt; <span class=\"string\">'AWS'</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:aws_access_key_id</span>     =&gt; Rails.application.credentials.access_key_id,</span><br><span class=\"line\">    <span class=\"symbol\">:aws_secret_access_key</span> =&gt; Rails.application.credentials.secret_access_key,</span><br><span class=\"line\">    <span class=\"symbol\">:region</span>                =&gt; Rails.application.credentials.s3_region,</span><br><span class=\"line\">    <span class=\"symbol\">:path_style</span>            =&gt; <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:host</span>                  =&gt; <span class=\"string\">'s3.us-east-2.amazonaws.com'</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:endpoint</span>              =&gt; <span class=\"string\">'https://s3.us-east-2.amazonaws.com'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  config.cache_dir = <span class=\"string\">\"<span class=\"subst\">#&#123;Rails.root&#125;</span>/tmp/uploads\"</span></span><br><span class=\"line\">  config.fog_directory  = Rails.application.credentials.s3_bucket</span><br><span class=\"line\">  config.fog_public     = <span class=\"literal\">true</span></span><br><span class=\"line\">  config.fog_attributes = &#123; <span class=\"string\">'Cache-Control'</span> =&gt; <span class=\"string\">\"max-age=<span class=\"subst\">#&#123;<span class=\"number\">10</span>.day.to_i&#125;</span>\"</span> &#125;</span><br><span class=\"line\">  config.storage = <span class=\"symbol\">:fog</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Acess-File-uploaded\"><a href=\"#Acess-File-uploaded\" class=\"headerlink\" title=\"Acess File uploaded\"></a>Acess File uploaded</h1><p><code>Instance.field_name_image.url</code> (get link s3)</p>\n<h1 id=\"Source-demo\"><a href=\"#Source-demo\" class=\"headerlink\" title=\"Source demo\"></a>Source demo</h1><p><a href=\"https://github.com/hdchinh/s3_carrierwave\" target=\"_blank\" rel=\"noopener\">Ti y</a></p>\n"},{"title":"Tm Hiu V Ch S Trong Https","date":"2019-05-03T17:00:00.000Z","draft":false,"mytag":"Secure","mytrend":"COOL","_content":"\n# t vn \n\ni lun vo ch , khi mi bt u vi mn mng my tnh  trng i hc, s mp m khi cn ngi trn gh nh trng khin chng ta i khi  nhm ln v `http` v `https`, nh ngy  ti  tng ngh chng l 2 giao thc khc nhau,  m ngy  ti c hiu giao thc l g khng nh :fearful: thi dp qua mt bn, bn cht ca `https` cng l giao thc `http` nhng thm c ch `s` ng vi `secure`. Nghe thi  thy bo mt ri, `https` ra i nhm mc ch lm cho giao thc `http` tr nn an ton hn, vy n lm cho `http` tr nn an ton hn nh th no?\n\n# Lun bn\n\n# 1. Http hiu n gin th hot ng th no?\n\nMc ch cui cng ca m hn n ri rm ny cng l truyn nhn thng tin, ti c mt website ti mun gi n ln mng internet  bn, mt ai  m ti khng quen c th v tnh lt qua c c.\nHttp l mt giao thc, hiu n gin l mt b quy tc  chung  ngi s dng dng trnh duyt c th truy cp ti 1 trang web, v trang web  hiu c yu cu  ri tr v ni dung m trnh duyt c th hiu c, v nh c nhiu ngn ng trn th gii, vy gia 2 ngi c 2 ting ni khc nhau  giao tip c h phi cng nhau s dng mt b ngn ng chung m c hai cng hiu c.\n\nMt c im c bn ca `http` l n truyn nhn thng tin di dng **text** thng thng, khng h m ho, iu ny dn ti vn   l thng tin c truyn nhn nhanh chng, nh nhng, ni dung rt thn thin vi ngi dng (v n l text m).\n\nMi th c v good? khng hn nh vy, vic d liu truyn gi c lu di dng text khin n qu thn thin vi ngi dng, m ngi dng th khng phi ai cng tt :smirk: . C nhng ngi dng m mc ch h ti vi website ca bn l  ph hoi, h s d dng tn cng bng cch no  ly c request ca bn ri c c ni dung trong request  1 cch d dng.\n\nBi hc: Khng phi lc no cng nn qu thn thin vi ngi dng cui :worried:\n\n# 2. Https khc phc vn  ca http nh th no?\n\nChng ta  nm c khi qut vn  bo mt gp phi khi s dng `http`. Vi nhng website gii tr thun tu vi ni dung ch yu l hnh nh, m thanh v khng c thng tin cn bo mt th s dng https hnh nh cng ch  tt cho SEO, ngoi ra cng khng cn gi tr g. Nhng nu bn s dng **Internet Banking** vi http, ri bn ng nhp vi ti khon ngn hng ca mnh trn , mi thng tin bn gi i u di dng nhng gi tin c ni dung plain/text trn tri, vy iu g bo v c ti khon ca bn nu request k trn b nhng k xu dng nhng th thut hay phn mm chuyn dng  bt c?\n\nHttps gii bi ton trn bng cch rt n gin, ni dung dng plain/text gip k gian c th bt v c d dng, vy chng ta hy m ho ni dung  k gian  khng th hiu c, v c bt c gi tin cng v dng?.\n\n# 3. Https v vn  m ho d liu\n\nTrc tin phi lm r l:\n\n**`https = http + ssl`**\n\nTrong :\n\n1. http l giao thc tryn ti.\n\n2. ssl l c ch bo mt thng tin.\n\n![tam the tu tin](/images/7.gif)\n\nFlow ti thiu ca `https` s nh sau:\n\n1. `Client hello`, ngi dng s dng trnh duyt s request ti google.com.\n\n2. `Server hello`, request  bc mt  ti ni, server s gi tr client 2 thng tin quan trng  l **ssl certificate** ( chng minh \", tao l google.com tht nha, not fake\") v 1 **Public key** (Gi l Public-key-1. *Vy ta c th hiu l  Server google.com n ang gi Private key 1 ng vi Public key 1 kia*).\n\n3. Browser s xc minh **ssl certificate** nhn c  xem n c phi l hng real hay khng. Vy cn lm sao m browser c th phn nh tht gi? Chng ta s tm hiu trong 1 bi vit khc.\n\n4. Sau khi browser xc minh v  tin tng my ch google.com, browser s to 1 cp kho bo mt RSA th 2, ta gi l **Public key 2 v Private key 2**.\n\n5. Browser dng **Public key 1**  nhn c t bc 3,  m ho *Public key 2 v Private key 2* sinh ra trong bc 4, ri gi cp kho ny di dng  m ho ti my ch google.com.\n\n6. Nh bn nh, th my ch google.com ang gi **Private key 1** v th l n c th gii m v ly c cp key  bc 5.\n\n7. Vy l c my ch google.com v client u c cp kho RSA th 2, mi thng tin truyn gi t c 2 pha by gi u c m ho bng Public key 2.\n\nNote: Nh c ch m ho RSA (Ch c th m ho bng public key v gii m ni dung bng private key) k trn. Server v client  c th lin lc vi nhau mt cch an ton. Trong qu trnh trn, k c k th c c bt c gi tin  bc 2, bn trong c public key 1, th cng khng phi vn , bi v vi public key  th hn khng th c c thng tin m client gi  bc 5.\n\n# Kt lun\n\nKhng c kt lun :)\n","source":"_posts/2019-05-04-https-vai-dieu-can-nho.md","raw":"---\ntitle: \"Tm Hiu V Ch S Trong Https\"\ndate: 2019-05-04\ndraft: false\ntags: [\"https\", \"secure\"]\ncategories: [\"rails notes\"]\nmytag: \"Secure\"\nmytrend: \"COOL\"\n\n---\n\n# t vn \n\ni lun vo ch , khi mi bt u vi mn mng my tnh  trng i hc, s mp m khi cn ngi trn gh nh trng khin chng ta i khi  nhm ln v `http` v `https`, nh ngy  ti  tng ngh chng l 2 giao thc khc nhau,  m ngy  ti c hiu giao thc l g khng nh :fearful: thi dp qua mt bn, bn cht ca `https` cng l giao thc `http` nhng thm c ch `s` ng vi `secure`. Nghe thi  thy bo mt ri, `https` ra i nhm mc ch lm cho giao thc `http` tr nn an ton hn, vy n lm cho `http` tr nn an ton hn nh th no?\n\n# Lun bn\n\n# 1. Http hiu n gin th hot ng th no?\n\nMc ch cui cng ca m hn n ri rm ny cng l truyn nhn thng tin, ti c mt website ti mun gi n ln mng internet  bn, mt ai  m ti khng quen c th v tnh lt qua c c.\nHttp l mt giao thc, hiu n gin l mt b quy tc  chung  ngi s dng dng trnh duyt c th truy cp ti 1 trang web, v trang web  hiu c yu cu  ri tr v ni dung m trnh duyt c th hiu c, v nh c nhiu ngn ng trn th gii, vy gia 2 ngi c 2 ting ni khc nhau  giao tip c h phi cng nhau s dng mt b ngn ng chung m c hai cng hiu c.\n\nMt c im c bn ca `http` l n truyn nhn thng tin di dng **text** thng thng, khng h m ho, iu ny dn ti vn   l thng tin c truyn nhn nhanh chng, nh nhng, ni dung rt thn thin vi ngi dng (v n l text m).\n\nMi th c v good? khng hn nh vy, vic d liu truyn gi c lu di dng text khin n qu thn thin vi ngi dng, m ngi dng th khng phi ai cng tt :smirk: . C nhng ngi dng m mc ch h ti vi website ca bn l  ph hoi, h s d dng tn cng bng cch no  ly c request ca bn ri c c ni dung trong request  1 cch d dng.\n\nBi hc: Khng phi lc no cng nn qu thn thin vi ngi dng cui :worried:\n\n# 2. Https khc phc vn  ca http nh th no?\n\nChng ta  nm c khi qut vn  bo mt gp phi khi s dng `http`. Vi nhng website gii tr thun tu vi ni dung ch yu l hnh nh, m thanh v khng c thng tin cn bo mt th s dng https hnh nh cng ch  tt cho SEO, ngoi ra cng khng cn gi tr g. Nhng nu bn s dng **Internet Banking** vi http, ri bn ng nhp vi ti khon ngn hng ca mnh trn , mi thng tin bn gi i u di dng nhng gi tin c ni dung plain/text trn tri, vy iu g bo v c ti khon ca bn nu request k trn b nhng k xu dng nhng th thut hay phn mm chuyn dng  bt c?\n\nHttps gii bi ton trn bng cch rt n gin, ni dung dng plain/text gip k gian c th bt v c d dng, vy chng ta hy m ho ni dung  k gian  khng th hiu c, v c bt c gi tin cng v dng?.\n\n# 3. Https v vn  m ho d liu\n\nTrc tin phi lm r l:\n\n**`https = http + ssl`**\n\nTrong :\n\n1. http l giao thc tryn ti.\n\n2. ssl l c ch bo mt thng tin.\n\n![tam the tu tin](/images/7.gif)\n\nFlow ti thiu ca `https` s nh sau:\n\n1. `Client hello`, ngi dng s dng trnh duyt s request ti google.com.\n\n2. `Server hello`, request  bc mt  ti ni, server s gi tr client 2 thng tin quan trng  l **ssl certificate** ( chng minh \", tao l google.com tht nha, not fake\") v 1 **Public key** (Gi l Public-key-1. *Vy ta c th hiu l  Server google.com n ang gi Private key 1 ng vi Public key 1 kia*).\n\n3. Browser s xc minh **ssl certificate** nhn c  xem n c phi l hng real hay khng. Vy cn lm sao m browser c th phn nh tht gi? Chng ta s tm hiu trong 1 bi vit khc.\n\n4. Sau khi browser xc minh v  tin tng my ch google.com, browser s to 1 cp kho bo mt RSA th 2, ta gi l **Public key 2 v Private key 2**.\n\n5. Browser dng **Public key 1**  nhn c t bc 3,  m ho *Public key 2 v Private key 2* sinh ra trong bc 4, ri gi cp kho ny di dng  m ho ti my ch google.com.\n\n6. Nh bn nh, th my ch google.com ang gi **Private key 1** v th l n c th gii m v ly c cp key  bc 5.\n\n7. Vy l c my ch google.com v client u c cp kho RSA th 2, mi thng tin truyn gi t c 2 pha by gi u c m ho bng Public key 2.\n\nNote: Nh c ch m ho RSA (Ch c th m ho bng public key v gii m ni dung bng private key) k trn. Server v client  c th lin lc vi nhau mt cch an ton. Trong qu trnh trn, k c k th c c bt c gi tin  bc 2, bn trong c public key 1, th cng khng phi vn , bi v vi public key  th hn khng th c c thng tin m client gi  bc 5.\n\n# Kt lun\n\nKhng c kt lun :)\n","slug":"2019-05-04-https-vai-dieu-can-nho","published":1,"updated":"2019-11-13T04:05:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2o00198ers9je536am","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>i lun vo ch , khi mi bt u vi mn mng my tnh  trng i hc, s mp m khi cn ngi trn gh nh trng khin chng ta i khi  nhm ln v <code>http</code> v <code>https</code>, nh ngy  ti  tng ngh chng l 2 giao thc khc nhau,  m ngy  ti c hiu giao thc l g khng nh :fearful: thi dp qua mt bn, bn cht ca <code>https</code> cng l giao thc <code>http</code> nhng thm c ch <code>s</code> ng vi <code>secure</code>. Nghe thi  thy bo mt ri, <code>https</code> ra i nhm mc ch lm cho giao thc <code>http</code> tr nn an ton hn, vy n lm cho <code>http</code> tr nn an ton hn nh th no?</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Http-hieu-don-gian-thi-hoat-dong-the-nao\"><a href=\"#1-Http-hieu-don-gian-thi-hoat-dong-the-nao\" class=\"headerlink\" title=\"1. Http hiu n gin th hot ng th no?\"></a>1. Http hiu n gin th hot ng th no?</h1><p>Mc ch cui cng ca m hn n ri rm ny cng l truyn nhn thng tin, ti c mt website ti mun gi n ln mng internet  bn, mt ai  m ti khng quen c th v tnh lt qua c c.<br>Http l mt giao thc, hiu n gin l mt b quy tc  chung  ngi s dng dng trnh duyt c th truy cp ti 1 trang web, v trang web  hiu c yu cu  ri tr v ni dung m trnh duyt c th hiu c, v nh c nhiu ngn ng trn th gii, vy gia 2 ngi c 2 ting ni khc nhau  giao tip c h phi cng nhau s dng mt b ngn ng chung m c hai cng hiu c.</p>\n<p>Mt c im c bn ca <code>http</code> l n truyn nhn thng tin di dng <strong>text</strong> thng thng, khng h m ho, iu ny dn ti vn   l thng tin c truyn nhn nhanh chng, nh nhng, ni dung rt thn thin vi ngi dng (v n l text m).</p>\n<p>Mi th c v good? khng hn nh vy, vic d liu truyn gi c lu di dng text khin n qu thn thin vi ngi dng, m ngi dng th khng phi ai cng tt :smirk: . C nhng ngi dng m mc ch h ti vi website ca bn l  ph hoi, h s d dng tn cng bng cch no  ly c request ca bn ri c c ni dung trong request  1 cch d dng.</p>\n<p>Bi hc: Khng phi lc no cng nn qu thn thin vi ngi dng cui :worried:</p>\n<h1 id=\"2-Https-khac-phuc-van-de-cua-http-nhu-the-nao\"><a href=\"#2-Https-khac-phuc-van-de-cua-http-nhu-the-nao\" class=\"headerlink\" title=\"2. Https khc phc vn  ca http nh th no?\"></a>2. Https khc phc vn  ca http nh th no?</h1><p>Chng ta  nm c khi qut vn  bo mt gp phi khi s dng <code>http</code>. Vi nhng website gii tr thun tu vi ni dung ch yu l hnh nh, m thanh v khng c thng tin cn bo mt th s dng https hnh nh cng ch  tt cho SEO, ngoi ra cng khng cn gi tr g. Nhng nu bn s dng <strong>Internet Banking</strong> vi http, ri bn ng nhp vi ti khon ngn hng ca mnh trn , mi thng tin bn gi i u di dng nhng gi tin c ni dung plain/text trn tri, vy iu g bo v c ti khon ca bn nu request k trn b nhng k xu dng nhng th thut hay phn mm chuyn dng  bt c?</p>\n<p>Https gii bi ton trn bng cch rt n gin, ni dung dng plain/text gip k gian c th bt v c d dng, vy chng ta hy m ho ni dung  k gian  khng th hiu c, v c bt c gi tin cng v dng?.</p>\n<h1 id=\"3-Https-va-van-de-ma-hoa-du-lieu\"><a href=\"#3-Https-va-van-de-ma-hoa-du-lieu\" class=\"headerlink\" title=\"3. Https v vn  m ho d liu\"></a>3. Https v vn  m ho d liu</h1><p>Trc tin phi lm r l:</p>\n<p><strong><code>https = http + ssl</code></strong></p>\n<p>Trong :</p>\n<ol>\n<li><p>http l giao thc tryn ti.</p>\n</li>\n<li><p>ssl l c ch bo mt thng tin.</p>\n</li>\n</ol>\n<p><img src=\"/images/7.gif\" alt=\"tam the tu tin\"></p>\n<p>Flow ti thiu ca <code>https</code> s nh sau:</p>\n<ol>\n<li><p><code>Client hello</code>, ngi dng s dng trnh duyt s request ti google.com.</p>\n</li>\n<li><p><code>Server hello</code>, request  bc mt  ti ni, server s gi tr client 2 thng tin quan trng  l <strong>ssl certificate</strong> ( chng minh , tao l google.com tht nha, not fake) v 1 <strong>Public key</strong> (Gi l Public-key-1. <em>Vy ta c th hiu l  Server google.com n ang gi Private key 1 ng vi Public key 1 kia</em>).</p>\n</li>\n<li><p>Browser s xc minh <strong>ssl certificate</strong> nhn c  xem n c phi l hng real hay khng. Vy cn lm sao m browser c th phn nh tht gi? Chng ta s tm hiu trong 1 bi vit khc.</p>\n</li>\n<li><p>Sau khi browser xc minh v  tin tng my ch google.com, browser s to 1 cp kho bo mt RSA th 2, ta gi l <strong>Public key 2 v Private key 2</strong>.</p>\n</li>\n<li><p>Browser dng <strong>Public key 1</strong>  nhn c t bc 3,  m ho <em>Public key 2 v Private key 2</em> sinh ra trong bc 4, ri gi cp kho ny di dng  m ho ti my ch google.com.</p>\n</li>\n<li><p>Nh bn nh, th my ch google.com ang gi <strong>Private key 1</strong> v th l n c th gii m v ly c cp key  bc 5.</p>\n</li>\n<li><p>Vy l c my ch google.com v client u c cp kho RSA th 2, mi thng tin truyn gi t c 2 pha by gi u c m ho bng Public key 2.</p>\n</li>\n</ol>\n<p>Note: Nh c ch m ho RSA (Ch c th m ho bng public key v gii m ni dung bng private key) k trn. Server v client  c th lin lc vi nhau mt cch an ton. Trong qu trnh trn, k c k th c c bt c gi tin  bc 2, bn trong c public key 1, th cng khng phi vn , bi v vi public key  th hn khng th c c thng tin m client gi  bc 5.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Khng c kt lun :)</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>i lun vo ch , khi mi bt u vi mn mng my tnh  trng i hc, s mp m khi cn ngi trn gh nh trng khin chng ta i khi  nhm ln v <code>http</code> v <code>https</code>, nh ngy  ti  tng ngh chng l 2 giao thc khc nhau,  m ngy  ti c hiu giao thc l g khng nh :fearful: thi dp qua mt bn, bn cht ca <code>https</code> cng l giao thc <code>http</code> nhng thm c ch <code>s</code> ng vi <code>secure</code>. Nghe thi  thy bo mt ri, <code>https</code> ra i nhm mc ch lm cho giao thc <code>http</code> tr nn an ton hn, vy n lm cho <code>http</code> tr nn an ton hn nh th no?</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Http-hieu-don-gian-thi-hoat-dong-the-nao\"><a href=\"#1-Http-hieu-don-gian-thi-hoat-dong-the-nao\" class=\"headerlink\" title=\"1. Http hiu n gin th hot ng th no?\"></a>1. Http hiu n gin th hot ng th no?</h1><p>Mc ch cui cng ca m hn n ri rm ny cng l truyn nhn thng tin, ti c mt website ti mun gi n ln mng internet  bn, mt ai  m ti khng quen c th v tnh lt qua c c.<br>Http l mt giao thc, hiu n gin l mt b quy tc  chung  ngi s dng dng trnh duyt c th truy cp ti 1 trang web, v trang web  hiu c yu cu  ri tr v ni dung m trnh duyt c th hiu c, v nh c nhiu ngn ng trn th gii, vy gia 2 ngi c 2 ting ni khc nhau  giao tip c h phi cng nhau s dng mt b ngn ng chung m c hai cng hiu c.</p>\n<p>Mt c im c bn ca <code>http</code> l n truyn nhn thng tin di dng <strong>text</strong> thng thng, khng h m ho, iu ny dn ti vn   l thng tin c truyn nhn nhanh chng, nh nhng, ni dung rt thn thin vi ngi dng (v n l text m).</p>\n<p>Mi th c v good? khng hn nh vy, vic d liu truyn gi c lu di dng text khin n qu thn thin vi ngi dng, m ngi dng th khng phi ai cng tt :smirk: . C nhng ngi dng m mc ch h ti vi website ca bn l  ph hoi, h s d dng tn cng bng cch no  ly c request ca bn ri c c ni dung trong request  1 cch d dng.</p>\n<p>Bi hc: Khng phi lc no cng nn qu thn thin vi ngi dng cui :worried:</p>\n<h1 id=\"2-Https-khac-phuc-van-de-cua-http-nhu-the-nao\"><a href=\"#2-Https-khac-phuc-van-de-cua-http-nhu-the-nao\" class=\"headerlink\" title=\"2. Https khc phc vn  ca http nh th no?\"></a>2. Https khc phc vn  ca http nh th no?</h1><p>Chng ta  nm c khi qut vn  bo mt gp phi khi s dng <code>http</code>. Vi nhng website gii tr thun tu vi ni dung ch yu l hnh nh, m thanh v khng c thng tin cn bo mt th s dng https hnh nh cng ch  tt cho SEO, ngoi ra cng khng cn gi tr g. Nhng nu bn s dng <strong>Internet Banking</strong> vi http, ri bn ng nhp vi ti khon ngn hng ca mnh trn , mi thng tin bn gi i u di dng nhng gi tin c ni dung plain/text trn tri, vy iu g bo v c ti khon ca bn nu request k trn b nhng k xu dng nhng th thut hay phn mm chuyn dng  bt c?</p>\n<p>Https gii bi ton trn bng cch rt n gin, ni dung dng plain/text gip k gian c th bt v c d dng, vy chng ta hy m ho ni dung  k gian  khng th hiu c, v c bt c gi tin cng v dng?.</p>\n<h1 id=\"3-Https-va-van-de-ma-hoa-du-lieu\"><a href=\"#3-Https-va-van-de-ma-hoa-du-lieu\" class=\"headerlink\" title=\"3. Https v vn  m ho d liu\"></a>3. Https v vn  m ho d liu</h1><p>Trc tin phi lm r l:</p>\n<p><strong><code>https = http + ssl</code></strong></p>\n<p>Trong :</p>\n<ol>\n<li><p>http l giao thc tryn ti.</p>\n</li>\n<li><p>ssl l c ch bo mt thng tin.</p>\n</li>\n</ol>\n<p><img src=\"/images/7.gif\" alt=\"tam the tu tin\"></p>\n<p>Flow ti thiu ca <code>https</code> s nh sau:</p>\n<ol>\n<li><p><code>Client hello</code>, ngi dng s dng trnh duyt s request ti google.com.</p>\n</li>\n<li><p><code>Server hello</code>, request  bc mt  ti ni, server s gi tr client 2 thng tin quan trng  l <strong>ssl certificate</strong> ( chng minh , tao l google.com tht nha, not fake) v 1 <strong>Public key</strong> (Gi l Public-key-1. <em>Vy ta c th hiu l  Server google.com n ang gi Private key 1 ng vi Public key 1 kia</em>).</p>\n</li>\n<li><p>Browser s xc minh <strong>ssl certificate</strong> nhn c  xem n c phi l hng real hay khng. Vy cn lm sao m browser c th phn nh tht gi? Chng ta s tm hiu trong 1 bi vit khc.</p>\n</li>\n<li><p>Sau khi browser xc minh v  tin tng my ch google.com, browser s to 1 cp kho bo mt RSA th 2, ta gi l <strong>Public key 2 v Private key 2</strong>.</p>\n</li>\n<li><p>Browser dng <strong>Public key 1</strong>  nhn c t bc 3,  m ho <em>Public key 2 v Private key 2</em> sinh ra trong bc 4, ri gi cp kho ny di dng  m ho ti my ch google.com.</p>\n</li>\n<li><p>Nh bn nh, th my ch google.com ang gi <strong>Private key 1</strong> v th l n c th gii m v ly c cp key  bc 5.</p>\n</li>\n<li><p>Vy l c my ch google.com v client u c cp kho RSA th 2, mi thng tin truyn gi t c 2 pha by gi u c m ho bng Public key 2.</p>\n</li>\n</ol>\n<p>Note: Nh c ch m ho RSA (Ch c th m ho bng public key v gii m ni dung bng private key) k trn. Server v client  c th lin lc vi nhau mt cch an ton. Trong qu trnh trn, k c k th c c bt c gi tin  bc 2, bn trong c public key 1, th cng khng phi vn , bi v vi public key  th hn khng th c c thng tin m client gi  bc 5.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Khng c kt lun :)</p>\n"},{"title":"Session Vs Cookies Trong Rails","date":"2019-04-16T17:00:00.000Z","draft":false,"mytag":"Rails","mytrend":"COOL","_content":"\n# t vn \n`session[:user_id] = @user.id`, dng code ny tht quen thuc? khi lm chc nng ng nhp trong nhng ngy nhp mn, hn ai cng  tng lm qua hoc lm gn ging nh vy, ta c dy rng, `http` l 1 giao thc khng c trng thi nn request th `N + 1` s chng th bit c request th `N`  lm g, vy nu  ln request th `N` chng ta  thc hin hnh vi ng nhp, v `http` th khng c lu vt li iu , h qu l  ln request tip theo, website hiu nh bn cha ng nhp, rt ng bun.\n\nCng theo nhng g c dy, `session/cookies` c to ra vi mc ch lm cho http request c \"trng thi\". V sao li  t trng thi trong nhy kp, v thc s l `http` khng bao gi c trng thi c, m `session/cookies` vi kh nng lu vt ca mnh c th gip website nm c mt s **thng tin** t client  request trc  v lm chng ging nh `http`  c trng thi.\n\nQu m h? ng vy, khi c dy iu ny ti cng thy tht m h, wth is trng thi? phi trng thi? lu vt?... Hy vng bi vit ny s gip ngi c c 1 ci nhn d hiu hn v 2 i tng ny trong ruby on rails.\n# Lun bn\n\n# 1. Flow hot ng\n\nMt cch ngn gn cookies s c vn hnh nh sau:\n\n**Step 1**: Ln u bn request n web ABC.com, nh nhng ta my bay, bn khng mang theo thng tin g ca ABC.com c\n\n**Step 2**: ABC.com nhn request ca bn, n nhn ra bn khng mang theo cookies ca website, nn n trong response tr v n set mt hoc mt vi cookies mc nh cho bn.\n\n**Step 3**: Bn nhn c response ca ABC.com, ri bn tip tc request ln ABC.com ln th 2, ln ny i theo request ca bn l ton b s cookies  c khi to  bc 2.\n\n**Step 4**: ABC.com li nhn c request ca bn, v ln ny n  thy bn mang cookies ca ABC.com nn n s c ni dung trong cookies  (nu cn).\n\n# 2. Mt vi loi cookies quan trng trong rails\n\n1. `Normal cookies`: Mt dng cookie m d liu c lu tr di dng text.\n\n2. `Signed cookies`: Mt dng cookie m d liu lu tr s c \"k\" bi 1 `digest`, v `digest` ny c to ra bi `secret_key_base` trong app ca bn, sau  n s c chuyn sang dng `base64` code. iu ny c ngha l nu ai  c c `signed cookies` ca bn, th h hon ton c th c c ni dung bn trong (decode base64 l c th c c). Tuy nhin nu h sa li ni dung ca cookies  v gi ln server th lc ny, cookies ny tr thnh 1 cookies khng hp l, v sao? V nh  trnh by, n c k bi 1 digest sinh ra qua `secret_key_base`, vy nn cookies loi ny nu b sa i ni dung  client th khi kim tra tnh ton vn trn server thng qua digest s khng cn ng na. V n tr thnh 1 cookies khng hp l.\n\n3. `Encrypted cookies`: Mt dng cookies m d liu c m ha qua mt qu trnh m ha vi 1 kha quan trng l `secret_key_base`, mt cch n gin nht  hiu l khng c `secret_key_base` th ta khng th no **c** hay sa i d liu ca cookies ny c.\n\nV d:\n\n```ruby\ncookies.signed[:signed] = \"Duy Chinh\"\ncookies.encrypted[:encrypted] = \"Duy Chinh\"\ncookies[:normal] = \"Duy Chinh\"\n\n```\nTi  to 3 cookies ng vi 3 dng cookies nu  trn, gi tr ca chng u ging nhau (u c gn bng \"Duy Chinh\").\n\nHy xem gi tr  client nhn c:\n\n```ruby\nnormal = \"Duy+Chinh\"\nsigned = \"IkR1eSBDaGluaCI%3D--a3af2bfd61abcd20cc3b8ac714968d0aaf578fe5\"\nencrypted = \"%2BVulShtBgFR2I18%3D--zQP8FmCAW4%2FZUwar--CQ%2FH6HFHSVlox5H8QC4CTg%3D%3D\"\n```\n\nNhn xt:\n\n1. Kiu cookies thng thng, d liu lu dng text nn  client ta d dng c c ni dung cng nh sa i d liu ca chng.\n\n2. Nhn signed cookies v encrypted cookies u khng thn thin vi ngi dng cui, v chng gm nhng k t khng c ng ngha vi end user.\n\n3. Nu decode `base64` ta thu c gi tr ca signed cookies  trn l: `\"Duy Chinh\"7f7oi`, d mt s k t pha sau khng th hiu c, tuy nhin khng quan trng v ni dung cookies vn c gii m (ng vi tnh cht, c th c nhng khng th sa i).\n\n4. Vic decode encrypted cookies l v vng khi khng c `secret_key_base`.\n\n**NOTE:**\n\nVic s dng loi cookies no s ng trong nhng trng hp c th, vi nhng d liu v hi v khng h quan trng th s dng cookies thng thng v lu mi th di dng text l kh d hn c. B qua cc bc m ha gip n hot ng vi performance tt hn hn 2 dng cookies cn li.\nNgc li, encrypted cookies l dng cookies tn cng sc  x l nht, v vy hy ch s dng n cho nhng thng tin thc s quan trng v khng th  l (nhng thng tin bt quan trng hn v ch cn m bo tnh ton vn ca d liu ch khng cn bo mt thng tin th hy dng signed cookies).\n\n# 3. Gii m cookies v tm hiu v session trong rails\n\nSau kh nhiu cng sc tm kim, ti  tm ra cch  gii m cookies trong rails 5.2, ni dung n gin nh sau:\n\n```ruby\nrequire 'cgi'\nrequire 'active_support'\n\ndef verify_and_decrypt_session_cookie(cookie, secret_key_base)\n  cookie                  = CGI::unescape(cookie)\n  salt                    = 'authenticated encrypted cookie'\n  encrypted_cookie_cipher = 'aes-256-gcm'\n  serializer              = ActiveSupport::MessageEncryptor::NullSerializer\n\n  key_generator           = ActiveSupport::KeyGenerator.new(secret_key_base, iterations: 1000)\n  key_len                 = ActiveSupport::MessageEncryptor.key_len(encrypted_cookie_cipher)\n  secret                  = key_generator.generate_key(salt, key_len)\n  encryptor               = ActiveSupport::MessageEncryptor.new(secret, cipher: encrypted_cookie_cipher, serializer: serializer)\n\n  encryptor.decrypt_and_verify(cookie)\nend\n\ncookie         = \"QkS0eMMxz8z0Kso%3D--4opNQwT5tGUsnn90--5fXye0VQJX%2BXMVkUmK69gw%3D%3D\"\nskb            = \"2fc48081a207cbe98379b2ed33b5072125d6f80a55997494b021bde37cec4d9c8f17f90357d6ade926b02a3bc271ccecaf6894af1410d6ef8f6c9b3b0d871fba\"\ncookie_session = \"ahp9AcIyl%2BhLvQW695lhNUCnI7bF2iNZY8e4bM%2B2Lrx%2FlnbVXkYF3nL493dMM7eslFJKAyBNJKZlY5ugZpUuznCxO%2BpNXudnOdQVuDyvVBLxA8gQ4t48Gs%2BqOS7e%2FlSjBedhFKAaoBRdVI06QL8%3D--enarz3Hu%2FZ2n1Ys%2B--YdTghGWd4ZFef9Lf7WM%2FMQ%3D%3D\"\nputs verify_and_decrypt_session_cookie(cookie_session, skb)\n\n```\n\nNi dung c tham kho t nhiu ngun (v khng mt ngun c th no copy v chy lun c :unamused:), nhng ch yu c tm hiu [ti y](https://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html), cc bn c th vo trang ny  tm hiu k hn.\n\n**NOTE:** Mt im ht sc cn ch   l bin `skb` ti s dng  trn chnh l `secret_key_base` ca project m ti s dng  demo, v y ch l mt project test nn ti c th vit dng text vo file sau  commit ln github nh ny, trong tt c cc trng hp khc th y l mt hnh ng v cng **ti t**, vic b l `secret_key_base` s khin ng dng ca bn trn tri trc hacker. Vy nn hy tht cn thn!\n\non m trn work tt trn rails 5.2, ch  l cch m ha  cc phin bn rails khc nhau hon ton c kh nng khc nhau, nn nu on m ny khng th chy c vi rails 4 chng hn th  l iu ht sc bnh thng.\n\nTr li vn  chnh, nu bn   th trong ln u tin request khi bn cha h lm g v code trn server ca bn cng cha h set bt k gi tr cookies no th trong response tr v vn s c mt cookies (m ti  ni  trn, trong ln u request server s khi to v gi v cho bn mt hoc mt vi cookies).\n\nTrong trng hp ny l mt, cookies  c th c tn dng `_app_name_session`. Ni dung ca cookies ny cng c m ha, th decode bng `base64` khng c ta c th hiu y l 1 cookies  c encrypted.\n\nGi tr ca cookies ny trong trng hp ti test l:\n\n```\n\"aW2fSskgCyZ20Fi6E68xRGl0%2FR%2FzeFWoWU5YdhgkVhB%2FMtWSsX0rf3JuRgsfPPgQXjYYNygaRSxRjXAmOcsjohN28JQJnjej0Grfpwx52cZ5qjIRdMfOS9aXdTmedpuJ7T99aObbv75D3dsPtdQ%3D--FW10HzOu9FIoKK%2B8--9sMKANggTvi%2BlBjFwpIHEg%3D%3D\"\n```\n\nS dng on m ta  vit  trn, ta gii m ra c gi tr ca cookies ny l:\n\n```ruby\n{\n  \"session_id\":\"52cc440e209ad03d306e550c2ca2dd78\",\n  \"_csrf_token\":\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"\n}\n```\n\nVy trong ln u request ti 1 website ruby on rails, n s to ra cho chng ta 1 session, session lc khi to khng c gi tr g ngoi `session_id` v `_csrf_token`.\n\n**a sai sai, ti nh l ngy xa i hc c dy rng im khc bit ca session v cookies l session c lu  server cn cookies c lu  client c m**\n\nng, ti cng c hc nh vy, nhng  khng phi l cch m rails x l, `Rails c config mc nh l lu session bng cookies`, nu khng mun ta c th lu trn `redis`, `database`... Tuy nhin nu khng thy ngi v gii hn khng qu `4KB` ca cookies th ti khng thy l do g  chuyn v tr lu tr ca session i c. :smiley:\n\nBy gi ti add thm 1 gi tr vo session vi cu lnh `session[:user_id] = 1`, lc ny gi tr ca cookies cng thay i theo, li decrypt ta thu c:\n\n```ruby\n{\n  \"session_id\":\"52cc440e209ad03d306e550c2ca2dd78\",\n  \"_csrf_token\":\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\",\n  \"user_id\":1\n}\n```\n\nSession by gi  c thm mt key mi l `user_id` vi gi tr l `1`.  vy cui cng th session cng l 1 `hash` thi nh.\n\n# Kt lun\n\n phn bit cc client khc nhau, server s da vo `session_id` c lu trong cookies, v vy nu chim c cookies ng nhp trn website ABC.com ca bn, cc hacker c th dng n  gi mo bn v request ln server, ng bun thay server s c cookies c hacker request ln, s dng `secret_key_base`  gii m cookies v c ni dung bn trong, on code x l login li c t session[:user_id], lc ny th cookies kia c gi tr `session[:user_id] = 1` v th l server  tng rng hacker chnh l bn.\n\nTrong cc bi tip theo chng ta s tm hiu v mt s kiu tn cng thng thng cng nh cch phng trnh trong rails.\n","source":"_posts/2019-04-17-doi-dieu-ve-session-va-cookie-trong-rails.md","raw":"---\ntitle: \"Session Vs Cookies Trong Rails\"\ndate: 2019-04-17\ndraft: false\ntags: [\"rails\", \"secure\"]\ncategories: [\"rails notes\"]\nmytag: \"Rails\"\nmytrend: \"COOL\"\n---\n\n# t vn \n`session[:user_id] = @user.id`, dng code ny tht quen thuc? khi lm chc nng ng nhp trong nhng ngy nhp mn, hn ai cng  tng lm qua hoc lm gn ging nh vy, ta c dy rng, `http` l 1 giao thc khng c trng thi nn request th `N + 1` s chng th bit c request th `N`  lm g, vy nu  ln request th `N` chng ta  thc hin hnh vi ng nhp, v `http` th khng c lu vt li iu , h qu l  ln request tip theo, website hiu nh bn cha ng nhp, rt ng bun.\n\nCng theo nhng g c dy, `session/cookies` c to ra vi mc ch lm cho http request c \"trng thi\". V sao li  t trng thi trong nhy kp, v thc s l `http` khng bao gi c trng thi c, m `session/cookies` vi kh nng lu vt ca mnh c th gip website nm c mt s **thng tin** t client  request trc  v lm chng ging nh `http`  c trng thi.\n\nQu m h? ng vy, khi c dy iu ny ti cng thy tht m h, wth is trng thi? phi trng thi? lu vt?... Hy vng bi vit ny s gip ngi c c 1 ci nhn d hiu hn v 2 i tng ny trong ruby on rails.\n# Lun bn\n\n# 1. Flow hot ng\n\nMt cch ngn gn cookies s c vn hnh nh sau:\n\n**Step 1**: Ln u bn request n web ABC.com, nh nhng ta my bay, bn khng mang theo thng tin g ca ABC.com c\n\n**Step 2**: ABC.com nhn request ca bn, n nhn ra bn khng mang theo cookies ca website, nn n trong response tr v n set mt hoc mt vi cookies mc nh cho bn.\n\n**Step 3**: Bn nhn c response ca ABC.com, ri bn tip tc request ln ABC.com ln th 2, ln ny i theo request ca bn l ton b s cookies  c khi to  bc 2.\n\n**Step 4**: ABC.com li nhn c request ca bn, v ln ny n  thy bn mang cookies ca ABC.com nn n s c ni dung trong cookies  (nu cn).\n\n# 2. Mt vi loi cookies quan trng trong rails\n\n1. `Normal cookies`: Mt dng cookie m d liu c lu tr di dng text.\n\n2. `Signed cookies`: Mt dng cookie m d liu lu tr s c \"k\" bi 1 `digest`, v `digest` ny c to ra bi `secret_key_base` trong app ca bn, sau  n s c chuyn sang dng `base64` code. iu ny c ngha l nu ai  c c `signed cookies` ca bn, th h hon ton c th c c ni dung bn trong (decode base64 l c th c c). Tuy nhin nu h sa li ni dung ca cookies  v gi ln server th lc ny, cookies ny tr thnh 1 cookies khng hp l, v sao? V nh  trnh by, n c k bi 1 digest sinh ra qua `secret_key_base`, vy nn cookies loi ny nu b sa i ni dung  client th khi kim tra tnh ton vn trn server thng qua digest s khng cn ng na. V n tr thnh 1 cookies khng hp l.\n\n3. `Encrypted cookies`: Mt dng cookies m d liu c m ha qua mt qu trnh m ha vi 1 kha quan trng l `secret_key_base`, mt cch n gin nht  hiu l khng c `secret_key_base` th ta khng th no **c** hay sa i d liu ca cookies ny c.\n\nV d:\n\n```ruby\ncookies.signed[:signed] = \"Duy Chinh\"\ncookies.encrypted[:encrypted] = \"Duy Chinh\"\ncookies[:normal] = \"Duy Chinh\"\n\n```\nTi  to 3 cookies ng vi 3 dng cookies nu  trn, gi tr ca chng u ging nhau (u c gn bng \"Duy Chinh\").\n\nHy xem gi tr  client nhn c:\n\n```ruby\nnormal = \"Duy+Chinh\"\nsigned = \"IkR1eSBDaGluaCI%3D--a3af2bfd61abcd20cc3b8ac714968d0aaf578fe5\"\nencrypted = \"%2BVulShtBgFR2I18%3D--zQP8FmCAW4%2FZUwar--CQ%2FH6HFHSVlox5H8QC4CTg%3D%3D\"\n```\n\nNhn xt:\n\n1. Kiu cookies thng thng, d liu lu dng text nn  client ta d dng c c ni dung cng nh sa i d liu ca chng.\n\n2. Nhn signed cookies v encrypted cookies u khng thn thin vi ngi dng cui, v chng gm nhng k t khng c ng ngha vi end user.\n\n3. Nu decode `base64` ta thu c gi tr ca signed cookies  trn l: `\"Duy Chinh\"7f7oi`, d mt s k t pha sau khng th hiu c, tuy nhin khng quan trng v ni dung cookies vn c gii m (ng vi tnh cht, c th c nhng khng th sa i).\n\n4. Vic decode encrypted cookies l v vng khi khng c `secret_key_base`.\n\n**NOTE:**\n\nVic s dng loi cookies no s ng trong nhng trng hp c th, vi nhng d liu v hi v khng h quan trng th s dng cookies thng thng v lu mi th di dng text l kh d hn c. B qua cc bc m ha gip n hot ng vi performance tt hn hn 2 dng cookies cn li.\nNgc li, encrypted cookies l dng cookies tn cng sc  x l nht, v vy hy ch s dng n cho nhng thng tin thc s quan trng v khng th  l (nhng thng tin bt quan trng hn v ch cn m bo tnh ton vn ca d liu ch khng cn bo mt thng tin th hy dng signed cookies).\n\n# 3. Gii m cookies v tm hiu v session trong rails\n\nSau kh nhiu cng sc tm kim, ti  tm ra cch  gii m cookies trong rails 5.2, ni dung n gin nh sau:\n\n```ruby\nrequire 'cgi'\nrequire 'active_support'\n\ndef verify_and_decrypt_session_cookie(cookie, secret_key_base)\n  cookie                  = CGI::unescape(cookie)\n  salt                    = 'authenticated encrypted cookie'\n  encrypted_cookie_cipher = 'aes-256-gcm'\n  serializer              = ActiveSupport::MessageEncryptor::NullSerializer\n\n  key_generator           = ActiveSupport::KeyGenerator.new(secret_key_base, iterations: 1000)\n  key_len                 = ActiveSupport::MessageEncryptor.key_len(encrypted_cookie_cipher)\n  secret                  = key_generator.generate_key(salt, key_len)\n  encryptor               = ActiveSupport::MessageEncryptor.new(secret, cipher: encrypted_cookie_cipher, serializer: serializer)\n\n  encryptor.decrypt_and_verify(cookie)\nend\n\ncookie         = \"QkS0eMMxz8z0Kso%3D--4opNQwT5tGUsnn90--5fXye0VQJX%2BXMVkUmK69gw%3D%3D\"\nskb            = \"2fc48081a207cbe98379b2ed33b5072125d6f80a55997494b021bde37cec4d9c8f17f90357d6ade926b02a3bc271ccecaf6894af1410d6ef8f6c9b3b0d871fba\"\ncookie_session = \"ahp9AcIyl%2BhLvQW695lhNUCnI7bF2iNZY8e4bM%2B2Lrx%2FlnbVXkYF3nL493dMM7eslFJKAyBNJKZlY5ugZpUuznCxO%2BpNXudnOdQVuDyvVBLxA8gQ4t48Gs%2BqOS7e%2FlSjBedhFKAaoBRdVI06QL8%3D--enarz3Hu%2FZ2n1Ys%2B--YdTghGWd4ZFef9Lf7WM%2FMQ%3D%3D\"\nputs verify_and_decrypt_session_cookie(cookie_session, skb)\n\n```\n\nNi dung c tham kho t nhiu ngun (v khng mt ngun c th no copy v chy lun c :unamused:), nhng ch yu c tm hiu [ti y](https://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html), cc bn c th vo trang ny  tm hiu k hn.\n\n**NOTE:** Mt im ht sc cn ch   l bin `skb` ti s dng  trn chnh l `secret_key_base` ca project m ti s dng  demo, v y ch l mt project test nn ti c th vit dng text vo file sau  commit ln github nh ny, trong tt c cc trng hp khc th y l mt hnh ng v cng **ti t**, vic b l `secret_key_base` s khin ng dng ca bn trn tri trc hacker. Vy nn hy tht cn thn!\n\non m trn work tt trn rails 5.2, ch  l cch m ha  cc phin bn rails khc nhau hon ton c kh nng khc nhau, nn nu on m ny khng th chy c vi rails 4 chng hn th  l iu ht sc bnh thng.\n\nTr li vn  chnh, nu bn   th trong ln u tin request khi bn cha h lm g v code trn server ca bn cng cha h set bt k gi tr cookies no th trong response tr v vn s c mt cookies (m ti  ni  trn, trong ln u request server s khi to v gi v cho bn mt hoc mt vi cookies).\n\nTrong trng hp ny l mt, cookies  c th c tn dng `_app_name_session`. Ni dung ca cookies ny cng c m ha, th decode bng `base64` khng c ta c th hiu y l 1 cookies  c encrypted.\n\nGi tr ca cookies ny trong trng hp ti test l:\n\n```\n\"aW2fSskgCyZ20Fi6E68xRGl0%2FR%2FzeFWoWU5YdhgkVhB%2FMtWSsX0rf3JuRgsfPPgQXjYYNygaRSxRjXAmOcsjohN28JQJnjej0Grfpwx52cZ5qjIRdMfOS9aXdTmedpuJ7T99aObbv75D3dsPtdQ%3D--FW10HzOu9FIoKK%2B8--9sMKANggTvi%2BlBjFwpIHEg%3D%3D\"\n```\n\nS dng on m ta  vit  trn, ta gii m ra c gi tr ca cookies ny l:\n\n```ruby\n{\n  \"session_id\":\"52cc440e209ad03d306e550c2ca2dd78\",\n  \"_csrf_token\":\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"\n}\n```\n\nVy trong ln u request ti 1 website ruby on rails, n s to ra cho chng ta 1 session, session lc khi to khng c gi tr g ngoi `session_id` v `_csrf_token`.\n\n**a sai sai, ti nh l ngy xa i hc c dy rng im khc bit ca session v cookies l session c lu  server cn cookies c lu  client c m**\n\nng, ti cng c hc nh vy, nhng  khng phi l cch m rails x l, `Rails c config mc nh l lu session bng cookies`, nu khng mun ta c th lu trn `redis`, `database`... Tuy nhin nu khng thy ngi v gii hn khng qu `4KB` ca cookies th ti khng thy l do g  chuyn v tr lu tr ca session i c. :smiley:\n\nBy gi ti add thm 1 gi tr vo session vi cu lnh `session[:user_id] = 1`, lc ny gi tr ca cookies cng thay i theo, li decrypt ta thu c:\n\n```ruby\n{\n  \"session_id\":\"52cc440e209ad03d306e550c2ca2dd78\",\n  \"_csrf_token\":\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\",\n  \"user_id\":1\n}\n```\n\nSession by gi  c thm mt key mi l `user_id` vi gi tr l `1`.  vy cui cng th session cng l 1 `hash` thi nh.\n\n# Kt lun\n\n phn bit cc client khc nhau, server s da vo `session_id` c lu trong cookies, v vy nu chim c cookies ng nhp trn website ABC.com ca bn, cc hacker c th dng n  gi mo bn v request ln server, ng bun thay server s c cookies c hacker request ln, s dng `secret_key_base`  gii m cookies v c ni dung bn trong, on code x l login li c t session[:user_id], lc ny th cookies kia c gi tr `session[:user_id] = 1` v th l server  tng rng hacker chnh l bn.\n\nTrong cc bi tip theo chng ta s tm hiu v mt s kiu tn cng thng thng cng nh cch phng trnh trong rails.\n","slug":"2019-04-17-doi-dieu-ve-session-va-cookie-trong-rails","published":1,"updated":"2019-11-13T04:04:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2q001b8ers5lr2b4c6","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p><code>session[:user_id] = @user.id</code>, dng code ny tht quen thuc? khi lm chc nng ng nhp trong nhng ngy nhp mn, hn ai cng  tng lm qua hoc lm gn ging nh vy, ta c dy rng, <code>http</code> l 1 giao thc khng c trng thi nn request th <code>N + 1</code> s chng th bit c request th <code>N</code>  lm g, vy nu  ln request th <code>N</code> chng ta  thc hin hnh vi ng nhp, v <code>http</code> th khng c lu vt li iu , h qu l  ln request tip theo, website hiu nh bn cha ng nhp, rt ng bun.</p>\n<p>Cng theo nhng g c dy, <code>session/cookies</code> c to ra vi mc ch lm cho http request c trng thi. V sao li  t trng thi trong nhy kp, v thc s l <code>http</code> khng bao gi c trng thi c, m <code>session/cookies</code> vi kh nng lu vt ca mnh c th gip website nm c mt s <strong>thng tin</strong> t client  request trc  v lm chng ging nh <code>http</code>  c trng thi.</p>\n<p>Qu m h? ng vy, khi c dy iu ny ti cng thy tht m h, wth is trng thi? phi trng thi? lu vt? Hy vng bi vit ny s gip ngi c c 1 ci nhn d hiu hn v 2 i tng ny trong ruby on rails.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Flow-hoat-dong\"><a href=\"#1-Flow-hoat-dong\" class=\"headerlink\" title=\"1. Flow hot ng\"></a>1. Flow hot ng</h1><p>Mt cch ngn gn cookies s c vn hnh nh sau:</p>\n<p><strong>Step 1</strong>: Ln u bn request n web ABC.com, nh nhng ta my bay, bn khng mang theo thng tin g ca ABC.com c</p>\n<p><strong>Step 2</strong>: ABC.com nhn request ca bn, n nhn ra bn khng mang theo cookies ca website, nn n trong response tr v n set mt hoc mt vi cookies mc nh cho bn.</p>\n<p><strong>Step 3</strong>: Bn nhn c response ca ABC.com, ri bn tip tc request ln ABC.com ln th 2, ln ny i theo request ca bn l ton b s cookies  c khi to  bc 2.</p>\n<p><strong>Step 4</strong>: ABC.com li nhn c request ca bn, v ln ny n  thy bn mang cookies ca ABC.com nn n s c ni dung trong cookies  (nu cn).</p>\n<h1 id=\"2-Mot-vai-loai-cookies-quan-trong-trong-rails\"><a href=\"#2-Mot-vai-loai-cookies-quan-trong-trong-rails\" class=\"headerlink\" title=\"2. Mt vi loi cookies quan trng trong rails\"></a>2. Mt vi loi cookies quan trng trong rails</h1><ol>\n<li><p><code>Normal cookies</code>: Mt dng cookie m d liu c lu tr di dng text.</p>\n</li>\n<li><p><code>Signed cookies</code>: Mt dng cookie m d liu lu tr s c k bi 1 <code>digest</code>, v <code>digest</code> ny c to ra bi <code>secret_key_base</code> trong app ca bn, sau  n s c chuyn sang dng <code>base64</code> code. iu ny c ngha l nu ai  c c <code>signed cookies</code> ca bn, th h hon ton c th c c ni dung bn trong (decode base64 l c th c c). Tuy nhin nu h sa li ni dung ca cookies  v gi ln server th lc ny, cookies ny tr thnh 1 cookies khng hp l, v sao? V nh  trnh by, n c k bi 1 digest sinh ra qua <code>secret_key_base</code>, vy nn cookies loi ny nu b sa i ni dung  client th khi kim tra tnh ton vn trn server thng qua digest s khng cn ng na. V n tr thnh 1 cookies khng hp l.</p>\n</li>\n<li><p><code>Encrypted cookies</code>: Mt dng cookies m d liu c m ha qua mt qu trnh m ha vi 1 kha quan trng l <code>secret_key_base</code>, mt cch n gin nht  hiu l khng c <code>secret_key_base</code> th ta khng th no <strong>c</strong> hay sa i d liu ca cookies ny c.</p>\n</li>\n</ol>\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cookies.signed[<span class=\"symbol\">:signed</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\">cookies.encrypted[<span class=\"symbol\">:encrypted</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\">cookies[<span class=\"symbol\">:normal</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br></pre></td></tr></table></figure>\n<p>Ti  to 3 cookies ng vi 3 dng cookies nu  trn, gi tr ca chng u ging nhau (u c gn bng Duy Chinh).</p>\n<p>Hy xem gi tr  client nhn c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">normal = <span class=\"string\">\"Duy+Chinh\"</span></span><br><span class=\"line\">signed = <span class=\"string\">\"IkR1eSBDaGluaCI%3D--a3af2bfd61abcd20cc3b8ac714968d0aaf578fe5\"</span></span><br><span class=\"line\">encrypted = <span class=\"string\">\"%2BVulShtBgFR2I18%3D--zQP8FmCAW4%2FZUwar--CQ%2FH6HFHSVlox5H8QC4CTg%3D%3D\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nhn xt:</p>\n<ol>\n<li><p>Kiu cookies thng thng, d liu lu dng text nn  client ta d dng c c ni dung cng nh sa i d liu ca chng.</p>\n</li>\n<li><p>Nhn signed cookies v encrypted cookies u khng thn thin vi ngi dng cui, v chng gm nhng k t khng c ng ngha vi end user.</p>\n</li>\n<li><p>Nu decode <code>base64</code> ta thu c gi tr ca signed cookies  trn l: <code>&quot;Duy Chinh&quot;7f7oi</code>, d mt s k t pha sau khng th hiu c, tuy nhin khng quan trng v ni dung cookies vn c gii m (ng vi tnh cht, c th c nhng khng th sa i).</p>\n</li>\n<li><p>Vic decode encrypted cookies l v vng khi khng c <code>secret_key_base</code>.</p>\n</li>\n</ol>\n<p><strong>NOTE:</strong></p>\n<p>Vic s dng loi cookies no s ng trong nhng trng hp c th, vi nhng d liu v hi v khng h quan trng th s dng cookies thng thng v lu mi th di dng text l kh d hn c. B qua cc bc m ha gip n hot ng vi performance tt hn hn 2 dng cookies cn li.<br>Ngc li, encrypted cookies l dng cookies tn cng sc  x l nht, v vy hy ch s dng n cho nhng thng tin thc s quan trng v khng th  l (nhng thng tin bt quan trng hn v ch cn m bo tnh ton vn ca d liu ch khng cn bo mt thng tin th hy dng signed cookies).</p>\n<h1 id=\"3-Giai-ma-cookies-va-tim-hieu-ve-session-trong-rails\"><a href=\"#3-Giai-ma-cookies-va-tim-hieu-ve-session-trong-rails\" class=\"headerlink\" title=\"3. Gii m cookies v tm hiu v session trong rails\"></a>3. Gii m cookies v tm hiu v session trong rails</h1><p>Sau kh nhiu cng sc tm kim, ti  tm ra cch  gii m cookies trong rails 5.2, ni dung n gin nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'cgi'</span></span><br><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'active_support'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">verify_and_decrypt_session_cookie</span><span class=\"params\">(cookie, secret_key_base)</span></span></span><br><span class=\"line\">  cookie                  = CGI::unescape(cookie)</span><br><span class=\"line\">  salt                    = <span class=\"string\">'authenticated encrypted cookie'</span></span><br><span class=\"line\">  encrypted_cookie_cipher = <span class=\"string\">'aes-256-gcm'</span></span><br><span class=\"line\">  serializer              = ActiveSupport::MessageEncryptor::NullSerializer</span><br><span class=\"line\"></span><br><span class=\"line\">  key_generator           = ActiveSupport::KeyGenerator.new(secret_key_base, <span class=\"symbol\">iterations:</span> <span class=\"number\">1000</span>)</span><br><span class=\"line\">  key_len                 = ActiveSupport::MessageEncryptor.key_len(encrypted_cookie_cipher)</span><br><span class=\"line\">  secret                  = key_generator.generate_key(salt, key_len)</span><br><span class=\"line\">  encryptor               = ActiveSupport::MessageEncryptor.new(secret, <span class=\"symbol\">cipher:</span> encrypted_cookie_cipher, <span class=\"symbol\">serializer:</span> serializer)</span><br><span class=\"line\"></span><br><span class=\"line\">  encryptor.decrypt_and_verify(cookie)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">cookie         = <span class=\"string\">\"QkS0eMMxz8z0Kso%3D--4opNQwT5tGUsnn90--5fXye0VQJX%2BXMVkUmK69gw%3D%3D\"</span></span><br><span class=\"line\">skb            = <span class=\"string\">\"2fc48081a207cbe98379b2ed33b5072125d6f80a55997494b021bde37cec4d9c8f17f90357d6ade926b02a3bc271ccecaf6894af1410d6ef8f6c9b3b0d871fba\"</span></span><br><span class=\"line\">cookie_session = <span class=\"string\">\"ahp9AcIyl%2BhLvQW695lhNUCnI7bF2iNZY8e4bM%2B2Lrx%2FlnbVXkYF3nL493dMM7eslFJKAyBNJKZlY5ugZpUuznCxO%2BpNXudnOdQVuDyvVBLxA8gQ4t48Gs%2BqOS7e%2FlSjBedhFKAaoBRdVI06QL8%3D--enarz3Hu%2FZ2n1Ys%2B--YdTghGWd4ZFef9Lf7WM%2FMQ%3D%3D\"</span></span><br><span class=\"line\">puts verify_and_decrypt_session_cookie(cookie_session, skb)</span><br></pre></td></tr></table></figure>\n\n<p>Ni dung c tham kho t nhiu ngun (v khng mt ngun c th no copy v chy lun c :unamused:), nhng ch yu c tm hiu <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html\" target=\"_blank\" rel=\"noopener\">ti y</a>, cc bn c th vo trang ny  tm hiu k hn.</p>\n<p><strong>NOTE:</strong> Mt im ht sc cn ch   l bin <code>skb</code> ti s dng  trn chnh l <code>secret_key_base</code> ca project m ti s dng  demo, v y ch l mt project test nn ti c th vit dng text vo file sau  commit ln github nh ny, trong tt c cc trng hp khc th y l mt hnh ng v cng <strong>ti t</strong>, vic b l <code>secret_key_base</code> s khin ng dng ca bn trn tri trc hacker. Vy nn hy tht cn thn!</p>\n<p>on m trn work tt trn rails 5.2, ch  l cch m ha  cc phin bn rails khc nhau hon ton c kh nng khc nhau, nn nu on m ny khng th chy c vi rails 4 chng hn th  l iu ht sc bnh thng.</p>\n<p>Tr li vn  chnh, nu bn   th trong ln u tin request khi bn cha h lm g v code trn server ca bn cng cha h set bt k gi tr cookies no th trong response tr v vn s c mt cookies (m ti  ni  trn, trong ln u request server s khi to v gi v cho bn mt hoc mt vi cookies).</p>\n<p>Trong trng hp ny l mt, cookies  c th c tn dng <code>_app_name_session</code>. Ni dung ca cookies ny cng c m ha, th decode bng <code>base64</code> khng c ta c th hiu y l 1 cookies  c encrypted.</p>\n<p>Gi tr ca cookies ny trong trng hp ti test l:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;aW2fSskgCyZ20Fi6E68xRGl0%2FR%2FzeFWoWU5YdhgkVhB%2FMtWSsX0rf3JuRgsfPPgQXjYYNygaRSxRjXAmOcsjohN28JQJnjej0Grfpwx52cZ5qjIRdMfOS9aXdTmedpuJ7T99aObbv75D3dsPtdQ%3D--FW10HzOu9FIoKK%2B8--9sMKANggTvi%2BlBjFwpIHEg%3D%3D&quot;</span><br></pre></td></tr></table></figure>\n\n<p>S dng on m ta  vit  trn, ta gii m ra c gi tr ca cookies ny l:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"session_id\"</span><span class=\"symbol\">:<span class=\"string\">\"52cc440e209ad03d306e550c2ca2dd78\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"_csrf_token\"</span><span class=\"symbol\">:<span class=\"string\">\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Vy trong ln u request ti 1 website ruby on rails, n s to ra cho chng ta 1 session, session lc khi to khng c gi tr g ngoi <code>session_id</code> v <code>_csrf_token</code>.</p>\n<p><strong>a sai sai, ti nh l ngy xa i hc c dy rng im khc bit ca session v cookies l session c lu  server cn cookies c lu  client c m</strong></p>\n<p>ng, ti cng c hc nh vy, nhng  khng phi l cch m rails x l, <code>Rails c config mc nh l lu session bng cookies</code>, nu khng mun ta c th lu trn <code>redis</code>, <code>database</code> Tuy nhin nu khng thy ngi v gii hn khng qu <code>4KB</code> ca cookies th ti khng thy l do g  chuyn v tr lu tr ca session i c. :smiley:</p>\n<p>By gi ti add thm 1 gi tr vo session vi cu lnh <code>session[:user_id] = 1</code>, lc ny gi tr ca cookies cng thay i theo, li decrypt ta thu c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"session_id\"</span><span class=\"symbol\">:<span class=\"string\">\"52cc440e209ad03d306e550c2ca2dd78\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"_csrf_token\"</span><span class=\"symbol\">:<span class=\"string\">\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"user_id\"</span><span class=\"symbol\">:</span><span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Session by gi  c thm mt key mi l <code>user_id</code> vi gi tr l <code>1</code>.  vy cui cng th session cng l 1 <code>hash</code> thi nh.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p> phn bit cc client khc nhau, server s da vo <code>session_id</code> c lu trong cookies, v vy nu chim c cookies ng nhp trn website ABC.com ca bn, cc hacker c th dng n  gi mo bn v request ln server, ng bun thay server s c cookies c hacker request ln, s dng <code>secret_key_base</code>  gii m cookies v c ni dung bn trong, on code x l login li c t session[:user_id], lc ny th cookies kia c gi tr <code>session[:user_id] = 1</code> v th l server  tng rng hacker chnh l bn.</p>\n<p>Trong cc bi tip theo chng ta s tm hiu v mt s kiu tn cng thng thng cng nh cch phng trnh trong rails.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p><code>session[:user_id] = @user.id</code>, dng code ny tht quen thuc? khi lm chc nng ng nhp trong nhng ngy nhp mn, hn ai cng  tng lm qua hoc lm gn ging nh vy, ta c dy rng, <code>http</code> l 1 giao thc khng c trng thi nn request th <code>N + 1</code> s chng th bit c request th <code>N</code>  lm g, vy nu  ln request th <code>N</code> chng ta  thc hin hnh vi ng nhp, v <code>http</code> th khng c lu vt li iu , h qu l  ln request tip theo, website hiu nh bn cha ng nhp, rt ng bun.</p>\n<p>Cng theo nhng g c dy, <code>session/cookies</code> c to ra vi mc ch lm cho http request c trng thi. V sao li  t trng thi trong nhy kp, v thc s l <code>http</code> khng bao gi c trng thi c, m <code>session/cookies</code> vi kh nng lu vt ca mnh c th gip website nm c mt s <strong>thng tin</strong> t client  request trc  v lm chng ging nh <code>http</code>  c trng thi.</p>\n<p>Qu m h? ng vy, khi c dy iu ny ti cng thy tht m h, wth is trng thi? phi trng thi? lu vt? Hy vng bi vit ny s gip ngi c c 1 ci nhn d hiu hn v 2 i tng ny trong ruby on rails.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Flow-hoat-dong\"><a href=\"#1-Flow-hoat-dong\" class=\"headerlink\" title=\"1. Flow hot ng\"></a>1. Flow hot ng</h1><p>Mt cch ngn gn cookies s c vn hnh nh sau:</p>\n<p><strong>Step 1</strong>: Ln u bn request n web ABC.com, nh nhng ta my bay, bn khng mang theo thng tin g ca ABC.com c</p>\n<p><strong>Step 2</strong>: ABC.com nhn request ca bn, n nhn ra bn khng mang theo cookies ca website, nn n trong response tr v n set mt hoc mt vi cookies mc nh cho bn.</p>\n<p><strong>Step 3</strong>: Bn nhn c response ca ABC.com, ri bn tip tc request ln ABC.com ln th 2, ln ny i theo request ca bn l ton b s cookies  c khi to  bc 2.</p>\n<p><strong>Step 4</strong>: ABC.com li nhn c request ca bn, v ln ny n  thy bn mang cookies ca ABC.com nn n s c ni dung trong cookies  (nu cn).</p>\n<h1 id=\"2-Mot-vai-loai-cookies-quan-trong-trong-rails\"><a href=\"#2-Mot-vai-loai-cookies-quan-trong-trong-rails\" class=\"headerlink\" title=\"2. Mt vi loi cookies quan trng trong rails\"></a>2. Mt vi loi cookies quan trng trong rails</h1><ol>\n<li><p><code>Normal cookies</code>: Mt dng cookie m d liu c lu tr di dng text.</p>\n</li>\n<li><p><code>Signed cookies</code>: Mt dng cookie m d liu lu tr s c k bi 1 <code>digest</code>, v <code>digest</code> ny c to ra bi <code>secret_key_base</code> trong app ca bn, sau  n s c chuyn sang dng <code>base64</code> code. iu ny c ngha l nu ai  c c <code>signed cookies</code> ca bn, th h hon ton c th c c ni dung bn trong (decode base64 l c th c c). Tuy nhin nu h sa li ni dung ca cookies  v gi ln server th lc ny, cookies ny tr thnh 1 cookies khng hp l, v sao? V nh  trnh by, n c k bi 1 digest sinh ra qua <code>secret_key_base</code>, vy nn cookies loi ny nu b sa i ni dung  client th khi kim tra tnh ton vn trn server thng qua digest s khng cn ng na. V n tr thnh 1 cookies khng hp l.</p>\n</li>\n<li><p><code>Encrypted cookies</code>: Mt dng cookies m d liu c m ha qua mt qu trnh m ha vi 1 kha quan trng l <code>secret_key_base</code>, mt cch n gin nht  hiu l khng c <code>secret_key_base</code> th ta khng th no <strong>c</strong> hay sa i d liu ca cookies ny c.</p>\n</li>\n</ol>\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cookies.signed[<span class=\"symbol\">:signed</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\">cookies.encrypted[<span class=\"symbol\">:encrypted</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\">cookies[<span class=\"symbol\">:normal</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br></pre></td></tr></table></figure>\n<p>Ti  to 3 cookies ng vi 3 dng cookies nu  trn, gi tr ca chng u ging nhau (u c gn bng Duy Chinh).</p>\n<p>Hy xem gi tr  client nhn c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">normal = <span class=\"string\">\"Duy+Chinh\"</span></span><br><span class=\"line\">signed = <span class=\"string\">\"IkR1eSBDaGluaCI%3D--a3af2bfd61abcd20cc3b8ac714968d0aaf578fe5\"</span></span><br><span class=\"line\">encrypted = <span class=\"string\">\"%2BVulShtBgFR2I18%3D--zQP8FmCAW4%2FZUwar--CQ%2FH6HFHSVlox5H8QC4CTg%3D%3D\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nhn xt:</p>\n<ol>\n<li><p>Kiu cookies thng thng, d liu lu dng text nn  client ta d dng c c ni dung cng nh sa i d liu ca chng.</p>\n</li>\n<li><p>Nhn signed cookies v encrypted cookies u khng thn thin vi ngi dng cui, v chng gm nhng k t khng c ng ngha vi end user.</p>\n</li>\n<li><p>Nu decode <code>base64</code> ta thu c gi tr ca signed cookies  trn l: <code>&quot;Duy Chinh&quot;7f7oi</code>, d mt s k t pha sau khng th hiu c, tuy nhin khng quan trng v ni dung cookies vn c gii m (ng vi tnh cht, c th c nhng khng th sa i).</p>\n</li>\n<li><p>Vic decode encrypted cookies l v vng khi khng c <code>secret_key_base</code>.</p>\n</li>\n</ol>\n<p><strong>NOTE:</strong></p>\n<p>Vic s dng loi cookies no s ng trong nhng trng hp c th, vi nhng d liu v hi v khng h quan trng th s dng cookies thng thng v lu mi th di dng text l kh d hn c. B qua cc bc m ha gip n hot ng vi performance tt hn hn 2 dng cookies cn li.<br>Ngc li, encrypted cookies l dng cookies tn cng sc  x l nht, v vy hy ch s dng n cho nhng thng tin thc s quan trng v khng th  l (nhng thng tin bt quan trng hn v ch cn m bo tnh ton vn ca d liu ch khng cn bo mt thng tin th hy dng signed cookies).</p>\n<h1 id=\"3-Giai-ma-cookies-va-tim-hieu-ve-session-trong-rails\"><a href=\"#3-Giai-ma-cookies-va-tim-hieu-ve-session-trong-rails\" class=\"headerlink\" title=\"3. Gii m cookies v tm hiu v session trong rails\"></a>3. Gii m cookies v tm hiu v session trong rails</h1><p>Sau kh nhiu cng sc tm kim, ti  tm ra cch  gii m cookies trong rails 5.2, ni dung n gin nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'cgi'</span></span><br><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'active_support'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">verify_and_decrypt_session_cookie</span><span class=\"params\">(cookie, secret_key_base)</span></span></span><br><span class=\"line\">  cookie                  = CGI::unescape(cookie)</span><br><span class=\"line\">  salt                    = <span class=\"string\">'authenticated encrypted cookie'</span></span><br><span class=\"line\">  encrypted_cookie_cipher = <span class=\"string\">'aes-256-gcm'</span></span><br><span class=\"line\">  serializer              = ActiveSupport::MessageEncryptor::NullSerializer</span><br><span class=\"line\"></span><br><span class=\"line\">  key_generator           = ActiveSupport::KeyGenerator.new(secret_key_base, <span class=\"symbol\">iterations:</span> <span class=\"number\">1000</span>)</span><br><span class=\"line\">  key_len                 = ActiveSupport::MessageEncryptor.key_len(encrypted_cookie_cipher)</span><br><span class=\"line\">  secret                  = key_generator.generate_key(salt, key_len)</span><br><span class=\"line\">  encryptor               = ActiveSupport::MessageEncryptor.new(secret, <span class=\"symbol\">cipher:</span> encrypted_cookie_cipher, <span class=\"symbol\">serializer:</span> serializer)</span><br><span class=\"line\"></span><br><span class=\"line\">  encryptor.decrypt_and_verify(cookie)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">cookie         = <span class=\"string\">\"QkS0eMMxz8z0Kso%3D--4opNQwT5tGUsnn90--5fXye0VQJX%2BXMVkUmK69gw%3D%3D\"</span></span><br><span class=\"line\">skb            = <span class=\"string\">\"2fc48081a207cbe98379b2ed33b5072125d6f80a55997494b021bde37cec4d9c8f17f90357d6ade926b02a3bc271ccecaf6894af1410d6ef8f6c9b3b0d871fba\"</span></span><br><span class=\"line\">cookie_session = <span class=\"string\">\"ahp9AcIyl%2BhLvQW695lhNUCnI7bF2iNZY8e4bM%2B2Lrx%2FlnbVXkYF3nL493dMM7eslFJKAyBNJKZlY5ugZpUuznCxO%2BpNXudnOdQVuDyvVBLxA8gQ4t48Gs%2BqOS7e%2FlSjBedhFKAaoBRdVI06QL8%3D--enarz3Hu%2FZ2n1Ys%2B--YdTghGWd4ZFef9Lf7WM%2FMQ%3D%3D\"</span></span><br><span class=\"line\">puts verify_and_decrypt_session_cookie(cookie_session, skb)</span><br></pre></td></tr></table></figure>\n\n<p>Ni dung c tham kho t nhiu ngun (v khng mt ngun c th no copy v chy lun c :unamused:), nhng ch yu c tm hiu <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html\" target=\"_blank\" rel=\"noopener\">ti y</a>, cc bn c th vo trang ny  tm hiu k hn.</p>\n<p><strong>NOTE:</strong> Mt im ht sc cn ch   l bin <code>skb</code> ti s dng  trn chnh l <code>secret_key_base</code> ca project m ti s dng  demo, v y ch l mt project test nn ti c th vit dng text vo file sau  commit ln github nh ny, trong tt c cc trng hp khc th y l mt hnh ng v cng <strong>ti t</strong>, vic b l <code>secret_key_base</code> s khin ng dng ca bn trn tri trc hacker. Vy nn hy tht cn thn!</p>\n<p>on m trn work tt trn rails 5.2, ch  l cch m ha  cc phin bn rails khc nhau hon ton c kh nng khc nhau, nn nu on m ny khng th chy c vi rails 4 chng hn th  l iu ht sc bnh thng.</p>\n<p>Tr li vn  chnh, nu bn   th trong ln u tin request khi bn cha h lm g v code trn server ca bn cng cha h set bt k gi tr cookies no th trong response tr v vn s c mt cookies (m ti  ni  trn, trong ln u request server s khi to v gi v cho bn mt hoc mt vi cookies).</p>\n<p>Trong trng hp ny l mt, cookies  c th c tn dng <code>_app_name_session</code>. Ni dung ca cookies ny cng c m ha, th decode bng <code>base64</code> khng c ta c th hiu y l 1 cookies  c encrypted.</p>\n<p>Gi tr ca cookies ny trong trng hp ti test l:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;aW2fSskgCyZ20Fi6E68xRGl0%2FR%2FzeFWoWU5YdhgkVhB%2FMtWSsX0rf3JuRgsfPPgQXjYYNygaRSxRjXAmOcsjohN28JQJnjej0Grfpwx52cZ5qjIRdMfOS9aXdTmedpuJ7T99aObbv75D3dsPtdQ%3D--FW10HzOu9FIoKK%2B8--9sMKANggTvi%2BlBjFwpIHEg%3D%3D&quot;</span><br></pre></td></tr></table></figure>\n\n<p>S dng on m ta  vit  trn, ta gii m ra c gi tr ca cookies ny l:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"session_id\"</span><span class=\"symbol\">:<span class=\"string\">\"52cc440e209ad03d306e550c2ca2dd78\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"_csrf_token\"</span><span class=\"symbol\">:<span class=\"string\">\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Vy trong ln u request ti 1 website ruby on rails, n s to ra cho chng ta 1 session, session lc khi to khng c gi tr g ngoi <code>session_id</code> v <code>_csrf_token</code>.</p>\n<p><strong>a sai sai, ti nh l ngy xa i hc c dy rng im khc bit ca session v cookies l session c lu  server cn cookies c lu  client c m</strong></p>\n<p>ng, ti cng c hc nh vy, nhng  khng phi l cch m rails x l, <code>Rails c config mc nh l lu session bng cookies</code>, nu khng mun ta c th lu trn <code>redis</code>, <code>database</code> Tuy nhin nu khng thy ngi v gii hn khng qu <code>4KB</code> ca cookies th ti khng thy l do g  chuyn v tr lu tr ca session i c. :smiley:</p>\n<p>By gi ti add thm 1 gi tr vo session vi cu lnh <code>session[:user_id] = 1</code>, lc ny gi tr ca cookies cng thay i theo, li decrypt ta thu c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"session_id\"</span><span class=\"symbol\">:<span class=\"string\">\"52cc440e209ad03d306e550c2ca2dd78\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"_csrf_token\"</span><span class=\"symbol\">:<span class=\"string\">\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"user_id\"</span><span class=\"symbol\">:</span><span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Session by gi  c thm mt key mi l <code>user_id</code> vi gi tr l <code>1</code>.  vy cui cng th session cng l 1 <code>hash</code> thi nh.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p> phn bit cc client khc nhau, server s da vo <code>session_id</code> c lu trong cookies, v vy nu chim c cookies ng nhp trn website ABC.com ca bn, cc hacker c th dng n  gi mo bn v request ln server, ng bun thay server s c cookies c hacker request ln, s dng <code>secret_key_base</code>  gii m cookies v c ni dung bn trong, on code x l login li c t session[:user_id], lc ny th cookies kia c gi tr <code>session[:user_id] = 1</code> v th l server  tng rng hacker chnh l bn.</p>\n<p>Trong cc bi tip theo chng ta s tm hiu v mt s kiu tn cng thng thng cng nh cch phng trnh trong rails.</p>\n"},{"title":"C Ch Autoloading V Reloading","date":"2019-04-16T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n# t vn \n\n```ruby\nclass CatsController < ApplicationController\n  # do something\nend\n```\n\non m trn l mt on m rt quen thuc khi s dng rails framework, mt cu hi  l ti sao trong class CatsController khng require file cha class ApplicationController nhng ta vn c th s dng. Cu tr li nm  vic rails c c ch autoloading mt s folder nht nh  support cho vic coding v vn hnh, bi vit ny s nu mt cch khi qut v gii php ny trong rails.\n\n# Lun bn\n\nNh bi vit trc   cp v cch m phng thc require hot ng:\n\n1. Tm file c require theo cc ng dn c lu trong bin $LOAD_PATH (bin ny l 1 mng cc ng dn).\n\n2. Khi tm c file tng ng th dng qu trnh tm file v bt u load file tm c vo b nh.\n\n3. Nu tm ht cc ng dn v khng thy th gi ti LoadError.\n\n**autoload_paths** l mt tp hp cc th mc c t ng load m khng cn require. Mc nh th autoload_paths s cha cc th mc sau:\n\n1. Tt c cc th mc con cp 1 ca th mc app, v d nh app/controllers, app/views...\n\n2. Tt c cc th mc cp 2 tn l concerns trong app, v d nh app/helpers/concerns, app/lib/concerns...\n\n3. Th mc test/mailers/previews.\n\nTa c th xem danh sch ny bng cu lnh:\n\n`bin/rails r 'puts ActiveSupport::Dependencies.autoload_paths'`\n\n**eager_load_paths** hon ton ging nh khi nim v autoload_paths  nu  trn. im chng ta cn lu   l:\n\n1. Nhng th mc nm trong eager_load_paths s c load mt ln duy nht TRC khi ng dng ca bn khi chy.\n\n2. Nhng th mc nm trong autoload_paths s c s dng  tm kim khi chng trnh ANG CHY v gp 1 t kho cha c nh ngha trong file hin ti.\n\nTa c 2 t in hoa,  l phn quan trng,  m bo tnh nht qun v hot ng mt cch n nh v chnh xc, trong mi trng production ta s dng eager_load_paths  load ton b nhng file cn thit cho cc h thng cn th s dng, cn  mi trng pht trin,  khi chy ng dng nhanh chng hn v d dng cp nht cc thay i th ta s dng autoload_paths.\n\nVic thit lp ny ph thuc vo cu hnh ca bn trong th mc `app/config/envirements/...` vi 2 cu hnh l:\n\n- config.cache_classes\n\n- config.eager_load\n\n# Kt lun\n\nTham kho:\n\n[1] [autoloading_and_reloading_constants](https://guides.rubyonrails.org/autoloading_and_reloading_constants.html)\n","source":"_posts/2019-05-16-autoloading-va-reloading-constants-trong-rails.md","raw":"---\ntitle: \"C Ch Autoloading V Reloading\"\ndate: 2019-04-17\ndraft: false\ntags: [\"rails\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\n---\n\n# t vn \n\n```ruby\nclass CatsController < ApplicationController\n  # do something\nend\n```\n\non m trn l mt on m rt quen thuc khi s dng rails framework, mt cu hi  l ti sao trong class CatsController khng require file cha class ApplicationController nhng ta vn c th s dng. Cu tr li nm  vic rails c c ch autoloading mt s folder nht nh  support cho vic coding v vn hnh, bi vit ny s nu mt cch khi qut v gii php ny trong rails.\n\n# Lun bn\n\nNh bi vit trc   cp v cch m phng thc require hot ng:\n\n1. Tm file c require theo cc ng dn c lu trong bin $LOAD_PATH (bin ny l 1 mng cc ng dn).\n\n2. Khi tm c file tng ng th dng qu trnh tm file v bt u load file tm c vo b nh.\n\n3. Nu tm ht cc ng dn v khng thy th gi ti LoadError.\n\n**autoload_paths** l mt tp hp cc th mc c t ng load m khng cn require. Mc nh th autoload_paths s cha cc th mc sau:\n\n1. Tt c cc th mc con cp 1 ca th mc app, v d nh app/controllers, app/views...\n\n2. Tt c cc th mc cp 2 tn l concerns trong app, v d nh app/helpers/concerns, app/lib/concerns...\n\n3. Th mc test/mailers/previews.\n\nTa c th xem danh sch ny bng cu lnh:\n\n`bin/rails r 'puts ActiveSupport::Dependencies.autoload_paths'`\n\n**eager_load_paths** hon ton ging nh khi nim v autoload_paths  nu  trn. im chng ta cn lu   l:\n\n1. Nhng th mc nm trong eager_load_paths s c load mt ln duy nht TRC khi ng dng ca bn khi chy.\n\n2. Nhng th mc nm trong autoload_paths s c s dng  tm kim khi chng trnh ANG CHY v gp 1 t kho cha c nh ngha trong file hin ti.\n\nTa c 2 t in hoa,  l phn quan trng,  m bo tnh nht qun v hot ng mt cch n nh v chnh xc, trong mi trng production ta s dng eager_load_paths  load ton b nhng file cn thit cho cc h thng cn th s dng, cn  mi trng pht trin,  khi chy ng dng nhanh chng hn v d dng cp nht cc thay i th ta s dng autoload_paths.\n\nVic thit lp ny ph thuc vo cu hnh ca bn trong th mc `app/config/envirements/...` vi 2 cu hnh l:\n\n- config.cache_classes\n\n- config.eager_load\n\n# Kt lun\n\nTham kho:\n\n[1] [autoloading_and_reloading_constants](https://guides.rubyonrails.org/autoloading_and_reloading_constants.html)\n","slug":"2019-05-16-autoloading-va-reloading-constants-trong-rails","published":1,"updated":"2019-11-13T04:06:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2u001g8ers1uw1bt3u","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CatsController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>on m trn l mt on m rt quen thuc khi s dng rails framework, mt cu hi  l ti sao trong class CatsController khng require file cha class ApplicationController nhng ta vn c th s dng. Cu tr li nm  vic rails c c ch autoloading mt s folder nht nh  support cho vic coding v vn hnh, bi vit ny s nu mt cch khi qut v gii php ny trong rails.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p>Nh bi vit trc   cp v cch m phng thc require hot ng:</p>\n<ol>\n<li><p>Tm file c require theo cc ng dn c lu trong bin $LOAD_PATH (bin ny l 1 mng cc ng dn).</p>\n</li>\n<li><p>Khi tm c file tng ng th dng qu trnh tm file v bt u load file tm c vo b nh.</p>\n</li>\n<li><p>Nu tm ht cc ng dn v khng thy th gi ti LoadError.</p>\n</li>\n</ol>\n<p><strong>autoload_paths</strong> l mt tp hp cc th mc c t ng load m khng cn require. Mc nh th autoload_paths s cha cc th mc sau:</p>\n<ol>\n<li><p>Tt c cc th mc con cp 1 ca th mc app, v d nh app/controllers, app/views</p>\n</li>\n<li><p>Tt c cc th mc cp 2 tn l concerns trong app, v d nh app/helpers/concerns, app/lib/concerns</p>\n</li>\n<li><p>Th mc test/mailers/previews.</p>\n</li>\n</ol>\n<p>Ta c th xem danh sch ny bng cu lnh:</p>\n<p><code>bin/rails r &#39;puts ActiveSupport::Dependencies.autoload_paths&#39;</code></p>\n<p><strong>eager_load_paths</strong> hon ton ging nh khi nim v autoload_paths  nu  trn. im chng ta cn lu   l:</p>\n<ol>\n<li><p>Nhng th mc nm trong eager_load_paths s c load mt ln duy nht TRC khi ng dng ca bn khi chy.</p>\n</li>\n<li><p>Nhng th mc nm trong autoload_paths s c s dng  tm kim khi chng trnh ANG CHY v gp 1 t kho cha c nh ngha trong file hin ti.</p>\n</li>\n</ol>\n<p>Ta c 2 t in hoa,  l phn quan trng,  m bo tnh nht qun v hot ng mt cch n nh v chnh xc, trong mi trng production ta s dng eager_load_paths  load ton b nhng file cn thit cho cc h thng cn th s dng, cn  mi trng pht trin,  khi chy ng dng nhanh chng hn v d dng cp nht cc thay i th ta s dng autoload_paths.</p>\n<p>Vic thit lp ny ph thuc vo cu hnh ca bn trong th mc <code>app/config/envirements/...</code> vi 2 cu hnh l:</p>\n<ul>\n<li><p>config.cache_classes</p>\n</li>\n<li><p>config.eager_load</p>\n</li>\n</ul>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Tham kho:</p>\n<p>[1] <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" target=\"_blank\" rel=\"noopener\">autoloading_and_reloading_constants</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CatsController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>on m trn l mt on m rt quen thuc khi s dng rails framework, mt cu hi  l ti sao trong class CatsController khng require file cha class ApplicationController nhng ta vn c th s dng. Cu tr li nm  vic rails c c ch autoloading mt s folder nht nh  support cho vic coding v vn hnh, bi vit ny s nu mt cch khi qut v gii php ny trong rails.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p>Nh bi vit trc   cp v cch m phng thc require hot ng:</p>\n<ol>\n<li><p>Tm file c require theo cc ng dn c lu trong bin $LOAD_PATH (bin ny l 1 mng cc ng dn).</p>\n</li>\n<li><p>Khi tm c file tng ng th dng qu trnh tm file v bt u load file tm c vo b nh.</p>\n</li>\n<li><p>Nu tm ht cc ng dn v khng thy th gi ti LoadError.</p>\n</li>\n</ol>\n<p><strong>autoload_paths</strong> l mt tp hp cc th mc c t ng load m khng cn require. Mc nh th autoload_paths s cha cc th mc sau:</p>\n<ol>\n<li><p>Tt c cc th mc con cp 1 ca th mc app, v d nh app/controllers, app/views</p>\n</li>\n<li><p>Tt c cc th mc cp 2 tn l concerns trong app, v d nh app/helpers/concerns, app/lib/concerns</p>\n</li>\n<li><p>Th mc test/mailers/previews.</p>\n</li>\n</ol>\n<p>Ta c th xem danh sch ny bng cu lnh:</p>\n<p><code>bin/rails r &#39;puts ActiveSupport::Dependencies.autoload_paths&#39;</code></p>\n<p><strong>eager_load_paths</strong> hon ton ging nh khi nim v autoload_paths  nu  trn. im chng ta cn lu   l:</p>\n<ol>\n<li><p>Nhng th mc nm trong eager_load_paths s c load mt ln duy nht TRC khi ng dng ca bn khi chy.</p>\n</li>\n<li><p>Nhng th mc nm trong autoload_paths s c s dng  tm kim khi chng trnh ANG CHY v gp 1 t kho cha c nh ngha trong file hin ti.</p>\n</li>\n</ol>\n<p>Ta c 2 t in hoa,  l phn quan trng,  m bo tnh nht qun v hot ng mt cch n nh v chnh xc, trong mi trng production ta s dng eager_load_paths  load ton b nhng file cn thit cho cc h thng cn th s dng, cn  mi trng pht trin,  khi chy ng dng nhanh chng hn v d dng cp nht cc thay i th ta s dng autoload_paths.</p>\n<p>Vic thit lp ny ph thuc vo cu hnh ca bn trong th mc <code>app/config/envirements/...</code> vi 2 cu hnh l:</p>\n<ul>\n<li><p>config.cache_classes</p>\n</li>\n<li><p>config.eager_load</p>\n</li>\n</ul>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Tham kho:</p>\n<p>[1] <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" target=\"_blank\" rel=\"noopener\">autoloading_and_reloading_constants</a></p>\n"},{"title":"Cp Nht D Liu Vi ActiveRecord","date":"2019-05-07T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n# t vn \n\nNgoi phng thc thng dng `update`  cp nht d liu. Rails ni chung hay Activerecord ni ring cn cung cp 1 s phng thc khc  thay i d liu hin c, hy cng tm hiu v chng.\n\n# Lun bn\n\n**Chun b:**\n\n1. Ti c mt model `Cat` vi 2 thuc tnh l `age` v `name`.\n\n2. Trong model Cat ti c 1 `validation` v 1 `callback` n gin.\n\n** so snh cc phng thc chng ta ch  n mt s im sau:**\n\n1. Phng thc nhn mt field cn update hay nhiu field?\n\n2. Phng thc update c cho mt hay nhiu record?\n\n3. Validate method c chy hay khng?\n\n4. Callback c chy hay khng?\n\n5. Trng update_at c c cp nht hay khng?\n\n# 1. Phng thc update\n\n**Instance method:**\n\nL phng thc c gi thng qua mt instance. Ta truyn vo field name cn cp nht v gi tr mi sau cp nht. Ta c th truyn tham s di dng hash.\n\nV d:\n\n```ruby\ncat = Cat.first\ncat.update(name: 'change name')\n```\n\nNhiu tham s\n\n```ruby\ncat = Cat.first\ncat.update(name: 'change name', age: 100)\n```\n\nTruyn di dng hash\n\n```ruby\ncat = Cat.first\ncat.update({:name => 'change name', :age => 1})\n```\n\n**Class method**\n\nL phng thc c gi thng qua class model. Nhn vo 2 tham s, th nht l id hoc mt mng cc id ca record thuc class cn cp nht, th hai l mt hash key-value cc field name cn cp nht v gi tr ca chng sau cp nht.\n\nCp nht 1 record\n\n```ruby\nCat.update(1, {:name => 'change name'})\n```\n\nCp nht nhiu record\n\n```ruby\nCat.update([1, 2, 3], {:name => 'change name'})\n```\n\nNote:\n\n1. Trng updated_at u c cp nht li khi dng 2 phng thc trn.\n\n2. Validate v callback u c chy.\n\n3. Class method `update` th c th cp nht nhiu record mt lc.\n\n# 2. Phng thc update_attribute v update_attributes\n\nPhng thc update_attribute nhn 2 tham s truyn vo, vi tham s th nht l field cn cp nht v tham s th 2 l gi tr cp nht (Khc vi update, th tham s truyn vo khng th  di dng hash).\n\n```ruby\ncat = Cat.first\ncat.update_attribute(:name, 'change name')\n```\n\nPhng thc update_attributes khc vi update_attribute l n nhn 1 tham s ch khng phi 2. Ta truyn tham s di hng mt hash cho phng ny vi gi tr key-value tng ng field cn update v gi tr cn cp nht.\n\n```ruby\ncat = Cat.first\ncat.update_attributes({ :name => 'change name', :age => 20 })\n# cch khc\ncat.update_attributes({ name: 'meo tam the 2', age: 20 })\n```\n\nNote:\n\n1. Trng updated_at c c cp nht li.\n\n2. Callback vn chy nhng **khng** chy validate.\n\n3. update_attribute dng cho cp nht 1 field cn update_attributes cn khi cp nht nhiu field.\n\n# 3. Phng update_column v update_columns\n\nPhng thc update_column c c php ging nh update_attribute, cn phng thc update_columns th c c php tng t nh update_attributes.\n\n```ruby\ncat = Cat.first\ncat.update_column(:name, 'change name')\n\n# vi update_columns\ncat.update_columns(name: 'change name', age: 10)\n# or\ncat.update_columns(:name => 'change name', :age => 10)\n```\n\nTuy nhin ta c mt s im khc bit c bn cn lu  vi update_attribute v update_attributes cn lu .\n\nNote: Vi phng thc update_column v update_columns\n\n1. Trng updated_at khng c cp nht.\n\n2. Callback v validate u **khng** c chy.\n\n# Kt lun\n\nTrn y l mt s ni dung c bn cn nm bt v cch cp nht c s d liu vi activerecord trong rails. Nhn qua th nhng phng thc ny c v kh ging nhau v i lc bn t hi l l do g khin phi sinh ra nhiu phng thc nh vy trong khi ch ring phng thc `update`  gn nh lm c tt c nhng g m chng ta ngh l cn.\n\nCch y t lu ti c lm 1 ng dng nh, trong  c mt model chnh gi l X, trong model ny ti c vit mt callback tn Y c thc hin sau khi record c save (vi method after_save). Trong callback Y ti s dng method `update`.\n\nng bun thay l on code ca ti khng hot ng mt cch bnh thng, sau khi save record th terminal b crash vi mt vng lp bt tn, cht nhn ra l khi s dng `update` th callback c gi li, vy l n to ra mt vng lp vnh vin, save record(1) -> callback c gi(2) -> trong callback c phng thc update(3) -> update c gi(4) -> update li gi li callback(2).\n khc phc th cn chuyn `update` thnh `update_column` hoc `update_columns`.\n\ny l mt v d nh v vic cn thit cu nhng phng thc k trn, mi phng thc s l tt hoc l duy nht c th trong tng trng hp. Hy cn nhc k.\n","source":"_posts/2019-05-08-phan-biet-update-update-column-va-update-attribute-trong-rails.md","raw":"---\ntitle: \"Cp Nht D Liu Vi ActiveRecord\"\ndate: 2019-05-08\ndraft: false\ntags: [\"activerecord\", \"rails\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\n\n---\n\n# t vn \n\nNgoi phng thc thng dng `update`  cp nht d liu. Rails ni chung hay Activerecord ni ring cn cung cp 1 s phng thc khc  thay i d liu hin c, hy cng tm hiu v chng.\n\n# Lun bn\n\n**Chun b:**\n\n1. Ti c mt model `Cat` vi 2 thuc tnh l `age` v `name`.\n\n2. Trong model Cat ti c 1 `validation` v 1 `callback` n gin.\n\n** so snh cc phng thc chng ta ch  n mt s im sau:**\n\n1. Phng thc nhn mt field cn update hay nhiu field?\n\n2. Phng thc update c cho mt hay nhiu record?\n\n3. Validate method c chy hay khng?\n\n4. Callback c chy hay khng?\n\n5. Trng update_at c c cp nht hay khng?\n\n# 1. Phng thc update\n\n**Instance method:**\n\nL phng thc c gi thng qua mt instance. Ta truyn vo field name cn cp nht v gi tr mi sau cp nht. Ta c th truyn tham s di dng hash.\n\nV d:\n\n```ruby\ncat = Cat.first\ncat.update(name: 'change name')\n```\n\nNhiu tham s\n\n```ruby\ncat = Cat.first\ncat.update(name: 'change name', age: 100)\n```\n\nTruyn di dng hash\n\n```ruby\ncat = Cat.first\ncat.update({:name => 'change name', :age => 1})\n```\n\n**Class method**\n\nL phng thc c gi thng qua class model. Nhn vo 2 tham s, th nht l id hoc mt mng cc id ca record thuc class cn cp nht, th hai l mt hash key-value cc field name cn cp nht v gi tr ca chng sau cp nht.\n\nCp nht 1 record\n\n```ruby\nCat.update(1, {:name => 'change name'})\n```\n\nCp nht nhiu record\n\n```ruby\nCat.update([1, 2, 3], {:name => 'change name'})\n```\n\nNote:\n\n1. Trng updated_at u c cp nht li khi dng 2 phng thc trn.\n\n2. Validate v callback u c chy.\n\n3. Class method `update` th c th cp nht nhiu record mt lc.\n\n# 2. Phng thc update_attribute v update_attributes\n\nPhng thc update_attribute nhn 2 tham s truyn vo, vi tham s th nht l field cn cp nht v tham s th 2 l gi tr cp nht (Khc vi update, th tham s truyn vo khng th  di dng hash).\n\n```ruby\ncat = Cat.first\ncat.update_attribute(:name, 'change name')\n```\n\nPhng thc update_attributes khc vi update_attribute l n nhn 1 tham s ch khng phi 2. Ta truyn tham s di hng mt hash cho phng ny vi gi tr key-value tng ng field cn update v gi tr cn cp nht.\n\n```ruby\ncat = Cat.first\ncat.update_attributes({ :name => 'change name', :age => 20 })\n# cch khc\ncat.update_attributes({ name: 'meo tam the 2', age: 20 })\n```\n\nNote:\n\n1. Trng updated_at c c cp nht li.\n\n2. Callback vn chy nhng **khng** chy validate.\n\n3. update_attribute dng cho cp nht 1 field cn update_attributes cn khi cp nht nhiu field.\n\n# 3. Phng update_column v update_columns\n\nPhng thc update_column c c php ging nh update_attribute, cn phng thc update_columns th c c php tng t nh update_attributes.\n\n```ruby\ncat = Cat.first\ncat.update_column(:name, 'change name')\n\n# vi update_columns\ncat.update_columns(name: 'change name', age: 10)\n# or\ncat.update_columns(:name => 'change name', :age => 10)\n```\n\nTuy nhin ta c mt s im khc bit c bn cn lu  vi update_attribute v update_attributes cn lu .\n\nNote: Vi phng thc update_column v update_columns\n\n1. Trng updated_at khng c cp nht.\n\n2. Callback v validate u **khng** c chy.\n\n# Kt lun\n\nTrn y l mt s ni dung c bn cn nm bt v cch cp nht c s d liu vi activerecord trong rails. Nhn qua th nhng phng thc ny c v kh ging nhau v i lc bn t hi l l do g khin phi sinh ra nhiu phng thc nh vy trong khi ch ring phng thc `update`  gn nh lm c tt c nhng g m chng ta ngh l cn.\n\nCch y t lu ti c lm 1 ng dng nh, trong  c mt model chnh gi l X, trong model ny ti c vit mt callback tn Y c thc hin sau khi record c save (vi method after_save). Trong callback Y ti s dng method `update`.\n\nng bun thay l on code ca ti khng hot ng mt cch bnh thng, sau khi save record th terminal b crash vi mt vng lp bt tn, cht nhn ra l khi s dng `update` th callback c gi li, vy l n to ra mt vng lp vnh vin, save record(1) -> callback c gi(2) -> trong callback c phng thc update(3) -> update c gi(4) -> update li gi li callback(2).\n khc phc th cn chuyn `update` thnh `update_column` hoc `update_columns`.\n\ny l mt v d nh v vic cn thit cu nhng phng thc k trn, mi phng thc s l tt hoc l duy nht c th trong tng trng hp. Hy cn nhc k.\n","slug":"2019-05-08-phan-biet-update-update-column-va-update-attribute-trong-rails","published":1,"updated":"2019-11-13T04:05:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2w001i8ers2jpf5p9q","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Ngoi phng thc thng dng <code>update</code>  cp nht d liu. Rails ni chung hay Activerecord ni ring cn cung cp 1 s phng thc khc  thay i d liu hin c, hy cng tm hiu v chng.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p><strong>Chun b:</strong></p>\n<ol>\n<li><p>Ti c mt model <code>Cat</code> vi 2 thuc tnh l <code>age</code> v <code>name</code>.</p>\n</li>\n<li><p>Trong model Cat ti c 1 <code>validation</code> v 1 <code>callback</code> n gin.</p>\n</li>\n</ol>\n<p><strong> so snh cc phng thc chng ta ch  n mt s im sau:</strong></p>\n<ol>\n<li><p>Phng thc nhn mt field cn update hay nhiu field?</p>\n</li>\n<li><p>Phng thc update c cho mt hay nhiu record?</p>\n</li>\n<li><p>Validate method c chy hay khng?</p>\n</li>\n<li><p>Callback c chy hay khng?</p>\n</li>\n<li><p>Trng update_at c c cp nht hay khng?</p>\n</li>\n</ol>\n<h1 id=\"1-Phuong-thuc-update\"><a href=\"#1-Phuong-thuc-update\" class=\"headerlink\" title=\"1. Phng thc update\"></a>1. Phng thc update</h1><p><strong>Instance method:</strong></p>\n<p>L phng thc c gi thng qua mt instance. Ta truyn vo field name cn cp nht v gi tr mi sau cp nht. Ta c th truyn tham s di dng hash.</p>\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Nhiu tham s</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">100</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Truyn di dng hash</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(&#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">1</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>Class method</strong></p>\n<p>L phng thc c gi thng qua class model. Nhn vo 2 tham s, th nht l id hoc mt mng cc id ca record thuc class cn cp nht, th hai l mt hash key-value cc field name cn cp nht v gi tr ca chng sau cp nht.</p>\n<p>Cp nht 1 record</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.update(<span class=\"number\">1</span>, &#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Cp nht nhiu record</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.update([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], &#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Note:</p>\n<ol>\n<li><p>Trng updated_at u c cp nht li khi dng 2 phng thc trn.</p>\n</li>\n<li><p>Validate v callback u c chy.</p>\n</li>\n<li><p>Class method <code>update</code> th c th cp nht nhiu record mt lc.</p>\n</li>\n</ol>\n<h1 id=\"2-Phuong-thuc-update-attribute-va-update-attributes\"><a href=\"#2-Phuong-thuc-update-attribute-va-update-attributes\" class=\"headerlink\" title=\"2. Phng thc update_attribute v update_attributes\"></a>2. Phng thc update_attribute v update_attributes</h1><p>Phng thc update_attribute nhn 2 tham s truyn vo, vi tham s th nht l field cn cp nht v tham s th 2 l gi tr cp nht (Khc vi update, th tham s truyn vo khng th  di dng hash).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_attribute(<span class=\"symbol\">:name</span>, <span class=\"string\">'change name'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Phng thc update_attributes khc vi update_attribute l n nhn 1 tham s ch khng phi 2. Ta truyn tham s di hng mt hash cho phng ny vi gi tr key-value tng ng field cn update v gi tr cn cp nht.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_attributes(&#123; <span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">20</span> &#125;)</span><br><span class=\"line\"><span class=\"comment\"># cch khc</span></span><br><span class=\"line\">cat.update_attributes(&#123; <span class=\"symbol\">name:</span> <span class=\"string\">'meo tam the 2'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">20</span> &#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Note:</p>\n<ol>\n<li><p>Trng updated_at c c cp nht li.</p>\n</li>\n<li><p>Callback vn chy nhng <strong>khng</strong> chy validate.</p>\n</li>\n<li><p>update_attribute dng cho cp nht 1 field cn update_attributes cn khi cp nht nhiu field.</p>\n</li>\n</ol>\n<h1 id=\"3-Phuong-update-column-va-update-columns\"><a href=\"#3-Phuong-update-column-va-update-columns\" class=\"headerlink\" title=\"3. Phng update_column v update_columns\"></a>3. Phng update_column v update_columns</h1><p>Phng thc update_column c c php ging nh update_attribute, cn phng thc update_columns th c c php tng t nh update_attributes.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_column(<span class=\"symbol\">:name</span>, <span class=\"string\">'change name'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># vi update_columns</span></span><br><span class=\"line\">cat.update_columns(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># or</span></span><br><span class=\"line\">cat.update_columns(<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">10</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Tuy nhin ta c mt s im khc bit c bn cn lu  vi update_attribute v update_attributes cn lu .</p>\n<p>Note: Vi phng thc update_column v update_columns</p>\n<ol>\n<li><p>Trng updated_at khng c cp nht.</p>\n</li>\n<li><p>Callback v validate u <strong>khng</strong> c chy.</p>\n</li>\n</ol>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Trn y l mt s ni dung c bn cn nm bt v cch cp nht c s d liu vi activerecord trong rails. Nhn qua th nhng phng thc ny c v kh ging nhau v i lc bn t hi l l do g khin phi sinh ra nhiu phng thc nh vy trong khi ch ring phng thc <code>update</code>  gn nh lm c tt c nhng g m chng ta ngh l cn.</p>\n<p>Cch y t lu ti c lm 1 ng dng nh, trong  c mt model chnh gi l X, trong model ny ti c vit mt callback tn Y c thc hin sau khi record c save (vi method after_save). Trong callback Y ti s dng method <code>update</code>.</p>\n<p>ng bun thay l on code ca ti khng hot ng mt cch bnh thng, sau khi save record th terminal b crash vi mt vng lp bt tn, cht nhn ra l khi s dng <code>update</code> th callback c gi li, vy l n to ra mt vng lp vnh vin, save record(1) -&gt; callback c gi(2) -&gt; trong callback c phng thc update(3) -&gt; update c gi(4) -&gt; update li gi li callback(2).<br> khc phc th cn chuyn <code>update</code> thnh <code>update_column</code> hoc <code>update_columns</code>.</p>\n<p>y l mt v d nh v vic cn thit cu nhng phng thc k trn, mi phng thc s l tt hoc l duy nht c th trong tng trng hp. Hy cn nhc k.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Ngoi phng thc thng dng <code>update</code>  cp nht d liu. Rails ni chung hay Activerecord ni ring cn cung cp 1 s phng thc khc  thay i d liu hin c, hy cng tm hiu v chng.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p><strong>Chun b:</strong></p>\n<ol>\n<li><p>Ti c mt model <code>Cat</code> vi 2 thuc tnh l <code>age</code> v <code>name</code>.</p>\n</li>\n<li><p>Trong model Cat ti c 1 <code>validation</code> v 1 <code>callback</code> n gin.</p>\n</li>\n</ol>\n<p><strong> so snh cc phng thc chng ta ch  n mt s im sau:</strong></p>\n<ol>\n<li><p>Phng thc nhn mt field cn update hay nhiu field?</p>\n</li>\n<li><p>Phng thc update c cho mt hay nhiu record?</p>\n</li>\n<li><p>Validate method c chy hay khng?</p>\n</li>\n<li><p>Callback c chy hay khng?</p>\n</li>\n<li><p>Trng update_at c c cp nht hay khng?</p>\n</li>\n</ol>\n<h1 id=\"1-Phuong-thuc-update\"><a href=\"#1-Phuong-thuc-update\" class=\"headerlink\" title=\"1. Phng thc update\"></a>1. Phng thc update</h1><p><strong>Instance method:</strong></p>\n<p>L phng thc c gi thng qua mt instance. Ta truyn vo field name cn cp nht v gi tr mi sau cp nht. Ta c th truyn tham s di dng hash.</p>\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Nhiu tham s</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">100</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Truyn di dng hash</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(&#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">1</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>Class method</strong></p>\n<p>L phng thc c gi thng qua class model. Nhn vo 2 tham s, th nht l id hoc mt mng cc id ca record thuc class cn cp nht, th hai l mt hash key-value cc field name cn cp nht v gi tr ca chng sau cp nht.</p>\n<p>Cp nht 1 record</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.update(<span class=\"number\">1</span>, &#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Cp nht nhiu record</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.update([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], &#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Note:</p>\n<ol>\n<li><p>Trng updated_at u c cp nht li khi dng 2 phng thc trn.</p>\n</li>\n<li><p>Validate v callback u c chy.</p>\n</li>\n<li><p>Class method <code>update</code> th c th cp nht nhiu record mt lc.</p>\n</li>\n</ol>\n<h1 id=\"2-Phuong-thuc-update-attribute-va-update-attributes\"><a href=\"#2-Phuong-thuc-update-attribute-va-update-attributes\" class=\"headerlink\" title=\"2. Phng thc update_attribute v update_attributes\"></a>2. Phng thc update_attribute v update_attributes</h1><p>Phng thc update_attribute nhn 2 tham s truyn vo, vi tham s th nht l field cn cp nht v tham s th 2 l gi tr cp nht (Khc vi update, th tham s truyn vo khng th  di dng hash).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_attribute(<span class=\"symbol\">:name</span>, <span class=\"string\">'change name'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Phng thc update_attributes khc vi update_attribute l n nhn 1 tham s ch khng phi 2. Ta truyn tham s di hng mt hash cho phng ny vi gi tr key-value tng ng field cn update v gi tr cn cp nht.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_attributes(&#123; <span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">20</span> &#125;)</span><br><span class=\"line\"><span class=\"comment\"># cch khc</span></span><br><span class=\"line\">cat.update_attributes(&#123; <span class=\"symbol\">name:</span> <span class=\"string\">'meo tam the 2'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">20</span> &#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Note:</p>\n<ol>\n<li><p>Trng updated_at c c cp nht li.</p>\n</li>\n<li><p>Callback vn chy nhng <strong>khng</strong> chy validate.</p>\n</li>\n<li><p>update_attribute dng cho cp nht 1 field cn update_attributes cn khi cp nht nhiu field.</p>\n</li>\n</ol>\n<h1 id=\"3-Phuong-update-column-va-update-columns\"><a href=\"#3-Phuong-update-column-va-update-columns\" class=\"headerlink\" title=\"3. Phng update_column v update_columns\"></a>3. Phng update_column v update_columns</h1><p>Phng thc update_column c c php ging nh update_attribute, cn phng thc update_columns th c c php tng t nh update_attributes.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_column(<span class=\"symbol\">:name</span>, <span class=\"string\">'change name'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># vi update_columns</span></span><br><span class=\"line\">cat.update_columns(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># or</span></span><br><span class=\"line\">cat.update_columns(<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">10</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Tuy nhin ta c mt s im khc bit c bn cn lu  vi update_attribute v update_attributes cn lu .</p>\n<p>Note: Vi phng thc update_column v update_columns</p>\n<ol>\n<li><p>Trng updated_at khng c cp nht.</p>\n</li>\n<li><p>Callback v validate u <strong>khng</strong> c chy.</p>\n</li>\n</ol>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Trn y l mt s ni dung c bn cn nm bt v cch cp nht c s d liu vi activerecord trong rails. Nhn qua th nhng phng thc ny c v kh ging nhau v i lc bn t hi l l do g khin phi sinh ra nhiu phng thc nh vy trong khi ch ring phng thc <code>update</code>  gn nh lm c tt c nhng g m chng ta ngh l cn.</p>\n<p>Cch y t lu ti c lm 1 ng dng nh, trong  c mt model chnh gi l X, trong model ny ti c vit mt callback tn Y c thc hin sau khi record c save (vi method after_save). Trong callback Y ti s dng method <code>update</code>.</p>\n<p>ng bun thay l on code ca ti khng hot ng mt cch bnh thng, sau khi save record th terminal b crash vi mt vng lp bt tn, cht nhn ra l khi s dng <code>update</code> th callback c gi li, vy l n to ra mt vng lp vnh vin, save record(1) -&gt; callback c gi(2) -&gt; trong callback c phng thc update(3) -&gt; update c gi(4) -&gt; update li gi li callback(2).<br> khc phc th cn chuyn <code>update</code> thnh <code>update_column</code> hoc <code>update_columns</code>.</p>\n<p>y l mt v d nh v vic cn thit cu nhng phng thc k trn, mi phng thc s l tt hoc l duy nht c th trong tng trng hp. Hy cn nhc k.</p>\n"},{"title":"Require V Load Trong Ruby","date":"2019-05-14T17:00:00.000Z","draft":false,"mytag":"Ruby","mytrend":"COOL","_content":"# t vn \n\nKhc vi rails, mt framework  c h tr autoloading, mt chng trnh ruby n thun khng c c ch .  s dng nhng m ngun ph thuc ta phi \"gi\" chng ti file hin ti bng method `require` hoc `load`. V d:\n\n```ruby\nrequire 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\n mt vn  khc trong ruby,  l ngn ng ny khng h tr a k tha, thay vo  chng c 1 c ch gi l `mixin`  c th s dng cc phng thc trong nhiu `moudle` khc nhau. Ta s dng 2 method l `include` v `extend`  hin thc ho iu ny.\n\n# Lun bn\n\n# 1. So snh require v require_relative\n\nTrong tiu  bi vit khng h  cp n `require_relative` vy sao gi phi tm hiu v n? Cu tr li nm  cch m phng thc `require` hot ng.\n\nTr li v d trong mc t vn , gi s c 2 file `cat.rb` v `animal.rb` nm trong cng mt th mc:\n\n```\n- app\n  - cat.rb\n  - animal.rb\n```\n\nCu hi t ra l liu on m trong phn t vn  c work vi cu trc file nh ny hay khng? C hoc khng,  l cu tr li.\n\nKhc vi mng tng ban u rng phng thc require cng s bt u tm file t th mc gc (th mc cha file gi method) th thc t reuire tm kim file bng mt cch khc.\n\nN s tm n bin global `$LOAD_PATH`, bin ny l mt ng dn, phng thc require s tm n ng dn ny v coi th mc  l gc, n s tm kim nhng file c reque bt u t th mc . Trong ln u tin n tm thy th ruby s dng chng trnh  y v load file va tm c ln. Nu tm ht cc ng dn trong $LOAD_PATH v vn khng thy th `LoadError` s c gi ti.\n\nTr v vi cu hi bn trn, on code ca chng ta work khi bin `$LOAD_PATH` c nh ngha, v n l ng dn ti th mc ang lm vic (chnh l folder app).\n\nTrong tt c cc trng hp cn li, nh khi bin ny cha c nh ngha hay n li li mt ng dn n mt folder khc, th on m khi u ca chng ta khng th chy (v require khng tm c file tng ng theo yu cu).\n\nTh bn nhn c khi ny ch l mt thng bo li `cannot load such file -- animal.rb (LoadError)`.\n\n**Gii quyt vn  trn bng cch no?**\n\nTa s c th dng 2 cch:\n\nCch 1: in thm th mc ang lm vic vo gi tr ca bin `$LOAD_PATH`, khi ny th on m chng ta s sa li nh sau:\n\n```ruby\n# ni thm ng dn th mc hin ti vo gi tr hin ti ca bin $LOAD_PATH\n$LOAD_PATH << File.join(File.dirname(__FILE__)\nrequire 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\nCch 2: S dng `require_relative` thay th cho require, sa li on m nh sau:\n\n```ruby\nrequire_relative 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\nC hai phng php trn u hot ng bnh thng.\n\n> $: l mt cch vit tt cho $LOAD_PATH\n\n# 2. So snh require v load\n\nNh trong mc 1  ni v require, thc cht load c cch hot ng v mc ch s dng rt ging vi require. C 2 u c dng  \"gi\" nhng on m cn thit vo file hin ti ang lm vic, nh vic bn mun import thm mt file js vo file html ang lm vic no .\n\nTuy nhin gia chng c mt im khc nhau c bn, m t   dn ti mt li khuyn v vic s dng chng nh sau:\n\n```\nMoreover, Kernel#require loads files once, but development is much more smooth\nif code gets refreshed when it changes without restarting the server.\nIt would be nice to be able to use Kernel#load in development,\nand Kernel#require in production.\n```\n\n`- trch dn guides.rubyonrails -`\n\n:arrow_right: iu rt ra  y l:\n\n:one: require s c v load file c gi mt ln duy nht.\n\n:two: load s c v load file c gi mi khi file  c chy.\n\nT  dn n vic l load s hu dng khi lm vic ti mi trng development hn, ni m thay i din ra lin tc, cn require thch hp khi trin khai ln production.\n\nNote: Sau khi bn chy ti method require, n s c file bn require v lu ti b nh, nhng ln tip theo khi bn chy ti file , n s c ni dung t b nh (m n  lu li ti ln load u tin), iu ny gip tng performance v khng phi lood li file ln na, nhng ng ngha vi  l nhng thay i sau  ti file require s khng c load khi chy.\n\n# 3. So snh include v extend\n\nKhng c nhiu lin h vi hai mc u, 2 phng thc c  cp trong mc 3  gii quyt bi tan mixin trong ruby, nh  c ln ti trnh by khi qut [ti y](https://hdchinh.com/post/2019-02-24-ruby-method-lookup/).\n\nC v v cao hng chm gi title qu, m ti qun mt  vit v hai phng thc ny mt ln, v hin ti vn cha c g  b sung thm, nu cn hy c li bi vit tham kho bn trn nh.\n\n# Kt lun\n\nTham kho:\n\n[1] [autoloading_and_reloading_constants](https://guides.rubyonrails.org/autoloading_and_reloading_constants.html)\n","source":"_posts/2019-05-15-require-load-include-va-extend-trong-ruby.md","raw":"---\ntitle: \"Require V Load Trong Ruby\"\ndate: 2019-05-15\ndraft: false\ntags: [\"ruby\"]\ncategories: [\"ruby notes\"]\nmytag: \"Ruby\"\nmytrend: \"COOL\"\n\n---\n# t vn \n\nKhc vi rails, mt framework  c h tr autoloading, mt chng trnh ruby n thun khng c c ch .  s dng nhng m ngun ph thuc ta phi \"gi\" chng ti file hin ti bng method `require` hoc `load`. V d:\n\n```ruby\nrequire 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\n mt vn  khc trong ruby,  l ngn ng ny khng h tr a k tha, thay vo  chng c 1 c ch gi l `mixin`  c th s dng cc phng thc trong nhiu `moudle` khc nhau. Ta s dng 2 method l `include` v `extend`  hin thc ho iu ny.\n\n# Lun bn\n\n# 1. So snh require v require_relative\n\nTrong tiu  bi vit khng h  cp n `require_relative` vy sao gi phi tm hiu v n? Cu tr li nm  cch m phng thc `require` hot ng.\n\nTr li v d trong mc t vn , gi s c 2 file `cat.rb` v `animal.rb` nm trong cng mt th mc:\n\n```\n- app\n  - cat.rb\n  - animal.rb\n```\n\nCu hi t ra l liu on m trong phn t vn  c work vi cu trc file nh ny hay khng? C hoc khng,  l cu tr li.\n\nKhc vi mng tng ban u rng phng thc require cng s bt u tm file t th mc gc (th mc cha file gi method) th thc t reuire tm kim file bng mt cch khc.\n\nN s tm n bin global `$LOAD_PATH`, bin ny l mt ng dn, phng thc require s tm n ng dn ny v coi th mc  l gc, n s tm kim nhng file c reque bt u t th mc . Trong ln u tin n tm thy th ruby s dng chng trnh  y v load file va tm c ln. Nu tm ht cc ng dn trong $LOAD_PATH v vn khng thy th `LoadError` s c gi ti.\n\nTr v vi cu hi bn trn, on code ca chng ta work khi bin `$LOAD_PATH` c nh ngha, v n l ng dn ti th mc ang lm vic (chnh l folder app).\n\nTrong tt c cc trng hp cn li, nh khi bin ny cha c nh ngha hay n li li mt ng dn n mt folder khc, th on m khi u ca chng ta khng th chy (v require khng tm c file tng ng theo yu cu).\n\nTh bn nhn c khi ny ch l mt thng bo li `cannot load such file -- animal.rb (LoadError)`.\n\n**Gii quyt vn  trn bng cch no?**\n\nTa s c th dng 2 cch:\n\nCch 1: in thm th mc ang lm vic vo gi tr ca bin `$LOAD_PATH`, khi ny th on m chng ta s sa li nh sau:\n\n```ruby\n# ni thm ng dn th mc hin ti vo gi tr hin ti ca bin $LOAD_PATH\n$LOAD_PATH << File.join(File.dirname(__FILE__)\nrequire 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\nCch 2: S dng `require_relative` thay th cho require, sa li on m nh sau:\n\n```ruby\nrequire_relative 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\nC hai phng php trn u hot ng bnh thng.\n\n> $: l mt cch vit tt cho $LOAD_PATH\n\n# 2. So snh require v load\n\nNh trong mc 1  ni v require, thc cht load c cch hot ng v mc ch s dng rt ging vi require. C 2 u c dng  \"gi\" nhng on m cn thit vo file hin ti ang lm vic, nh vic bn mun import thm mt file js vo file html ang lm vic no .\n\nTuy nhin gia chng c mt im khc nhau c bn, m t   dn ti mt li khuyn v vic s dng chng nh sau:\n\n```\nMoreover, Kernel#require loads files once, but development is much more smooth\nif code gets refreshed when it changes without restarting the server.\nIt would be nice to be able to use Kernel#load in development,\nand Kernel#require in production.\n```\n\n`- trch dn guides.rubyonrails -`\n\n:arrow_right: iu rt ra  y l:\n\n:one: require s c v load file c gi mt ln duy nht.\n\n:two: load s c v load file c gi mi khi file  c chy.\n\nT  dn n vic l load s hu dng khi lm vic ti mi trng development hn, ni m thay i din ra lin tc, cn require thch hp khi trin khai ln production.\n\nNote: Sau khi bn chy ti method require, n s c file bn require v lu ti b nh, nhng ln tip theo khi bn chy ti file , n s c ni dung t b nh (m n  lu li ti ln load u tin), iu ny gip tng performance v khng phi lood li file ln na, nhng ng ngha vi  l nhng thay i sau  ti file require s khng c load khi chy.\n\n# 3. So snh include v extend\n\nKhng c nhiu lin h vi hai mc u, 2 phng thc c  cp trong mc 3  gii quyt bi tan mixin trong ruby, nh  c ln ti trnh by khi qut [ti y](https://hdchinh.com/post/2019-02-24-ruby-method-lookup/).\n\nC v v cao hng chm gi title qu, m ti qun mt  vit v hai phng thc ny mt ln, v hin ti vn cha c g  b sung thm, nu cn hy c li bi vit tham kho bn trn nh.\n\n# Kt lun\n\nTham kho:\n\n[1] [autoloading_and_reloading_constants](https://guides.rubyonrails.org/autoloading_and_reloading_constants.html)\n","slug":"2019-05-15-require-load-include-va-extend-trong-ruby","published":1,"updated":"2019-11-13T04:05:52.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe2y001m8ersb2my8yvq","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Khc vi rails, mt framework  c h tr autoloading, mt chng trnh ruby n thun khng c c ch .  s dng nhng m ngun ph thuc ta phi gi chng ti file hin ti bng method <code>require</code> hoc <code>load</code>. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p> mt vn  khc trong ruby,  l ngn ng ny khng h tr a k tha, thay vo  chng c 1 c ch gi l <code>mixin</code>  c th s dng cc phng thc trong nhiu <code>moudle</code> khc nhau. Ta s dng 2 method l <code>include</code> v <code>extend</code>  hin thc ho iu ny.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-So-sanh-require-va-require-relative\"><a href=\"#1-So-sanh-require-va-require-relative\" class=\"headerlink\" title=\"1. So snh require v require_relative\"></a>1. So snh require v require_relative</h1><p>Trong tiu  bi vit khng h  cp n <code>require_relative</code> vy sao gi phi tm hiu v n? Cu tr li nm  cch m phng thc <code>require</code> hot ng.</p>\n<p>Tr li v d trong mc t vn , gi s c 2 file <code>cat.rb</code> v <code>animal.rb</code> nm trong cng mt th mc:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - cat.rb</span><br><span class=\"line\">  - animal.rb</span><br></pre></td></tr></table></figure>\n\n<p>Cu hi t ra l liu on m trong phn t vn  c work vi cu trc file nh ny hay khng? C hoc khng,  l cu tr li.</p>\n<p>Khc vi mng tng ban u rng phng thc require cng s bt u tm file t th mc gc (th mc cha file gi method) th thc t reuire tm kim file bng mt cch khc.</p>\n<p>N s tm n bin global <code>$LOAD_PATH</code>, bin ny l mt ng dn, phng thc require s tm n ng dn ny v coi th mc  l gc, n s tm kim nhng file c reque bt u t th mc . Trong ln u tin n tm thy th ruby s dng chng trnh  y v load file va tm c ln. Nu tm ht cc ng dn trong $LOAD_PATH v vn khng thy th <code>LoadError</code> s c gi ti.</p>\n<p>Tr v vi cu hi bn trn, on code ca chng ta work khi bin <code>$LOAD_PATH</code> c nh ngha, v n l ng dn ti th mc ang lm vic (chnh l folder app).</p>\n<p>Trong tt c cc trng hp cn li, nh khi bin ny cha c nh ngha hay n li li mt ng dn n mt folder khc, th on m khi u ca chng ta khng th chy (v require khng tm c file tng ng theo yu cu).</p>\n<p>Th bn nhn c khi ny ch l mt thng bo li <code>cannot load such file -- animal.rb (LoadError)</code>.</p>\n<p><strong>Gii quyt vn  trn bng cch no?</strong></p>\n<p>Ta s c th dng 2 cch:</p>\n<p>Cch 1: in thm th mc ang lm vic vo gi tr ca bin <code>$LOAD_PATH</code>, khi ny th on m chng ta s sa li nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ni thm ng dn th mc hin ti vo gi tr hin ti ca bin $LOAD_PATH</span></span><br><span class=\"line\">$LOAD_PATH &lt;&lt; File.join(File.dirname(__FILE_<span class=\"number\">_</span>)</span><br><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Cch 2: S dng <code>require_relative</code> thay th cho require, sa li on m nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>C hai phng php trn u hot ng bnh thng.</p>\n<blockquote>\n<p>$: l mt cch vit tt cho $LOAD_PATH</p>\n</blockquote>\n<h1 id=\"2-So-sanh-require-va-load\"><a href=\"#2-So-sanh-require-va-load\" class=\"headerlink\" title=\"2. So snh require v load\"></a>2. So snh require v load</h1><p>Nh trong mc 1  ni v require, thc cht load c cch hot ng v mc ch s dng rt ging vi require. C 2 u c dng  gi nhng on m cn thit vo file hin ti ang lm vic, nh vic bn mun import thm mt file js vo file html ang lm vic no .</p>\n<p>Tuy nhin gia chng c mt im khc nhau c bn, m t   dn ti mt li khuyn v vic s dng chng nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Moreover, Kernel#require loads files once, but development is much more smooth</span><br><span class=\"line\">if code gets refreshed when it changes without restarting the server.</span><br><span class=\"line\">It would be nice to be able to use Kernel#load in development,</span><br><span class=\"line\">and Kernel#require in production.</span><br></pre></td></tr></table></figure>\n\n<p><code>- trch dn guides.rubyonrails -</code></p>\n<p>:arrow_right: iu rt ra  y l:</p>\n<p>:one: require s c v load file c gi mt ln duy nht.</p>\n<p>:two: load s c v load file c gi mi khi file  c chy.</p>\n<p>T  dn n vic l load s hu dng khi lm vic ti mi trng development hn, ni m thay i din ra lin tc, cn require thch hp khi trin khai ln production.</p>\n<p>Note: Sau khi bn chy ti method require, n s c file bn require v lu ti b nh, nhng ln tip theo khi bn chy ti file , n s c ni dung t b nh (m n  lu li ti ln load u tin), iu ny gip tng performance v khng phi lood li file ln na, nhng ng ngha vi  l nhng thay i sau  ti file require s khng c load khi chy.</p>\n<h1 id=\"3-So-sanh-include-va-extend\"><a href=\"#3-So-sanh-include-va-extend\" class=\"headerlink\" title=\"3. So snh include v extend\"></a>3. So snh include v extend</h1><p>Khng c nhiu lin h vi hai mc u, 2 phng thc c  cp trong mc 3  gii quyt bi tan mixin trong ruby, nh  c ln ti trnh by khi qut <a href=\"https://hdchinh.com/post/2019-02-24-ruby-method-lookup/\" target=\"_blank\" rel=\"noopener\">ti y</a>.</p>\n<p>C v v cao hng chm gi title qu, m ti qun mt  vit v hai phng thc ny mt ln, v hin ti vn cha c g  b sung thm, nu cn hy c li bi vit tham kho bn trn nh.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Tham kho:</p>\n<p>[1] <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" target=\"_blank\" rel=\"noopener\">autoloading_and_reloading_constants</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Khc vi rails, mt framework  c h tr autoloading, mt chng trnh ruby n thun khng c c ch .  s dng nhng m ngun ph thuc ta phi gi chng ti file hin ti bng method <code>require</code> hoc <code>load</code>. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p> mt vn  khc trong ruby,  l ngn ng ny khng h tr a k tha, thay vo  chng c 1 c ch gi l <code>mixin</code>  c th s dng cc phng thc trong nhiu <code>moudle</code> khc nhau. Ta s dng 2 method l <code>include</code> v <code>extend</code>  hin thc ho iu ny.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-So-sanh-require-va-require-relative\"><a href=\"#1-So-sanh-require-va-require-relative\" class=\"headerlink\" title=\"1. So snh require v require_relative\"></a>1. So snh require v require_relative</h1><p>Trong tiu  bi vit khng h  cp n <code>require_relative</code> vy sao gi phi tm hiu v n? Cu tr li nm  cch m phng thc <code>require</code> hot ng.</p>\n<p>Tr li v d trong mc t vn , gi s c 2 file <code>cat.rb</code> v <code>animal.rb</code> nm trong cng mt th mc:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - cat.rb</span><br><span class=\"line\">  - animal.rb</span><br></pre></td></tr></table></figure>\n\n<p>Cu hi t ra l liu on m trong phn t vn  c work vi cu trc file nh ny hay khng? C hoc khng,  l cu tr li.</p>\n<p>Khc vi mng tng ban u rng phng thc require cng s bt u tm file t th mc gc (th mc cha file gi method) th thc t reuire tm kim file bng mt cch khc.</p>\n<p>N s tm n bin global <code>$LOAD_PATH</code>, bin ny l mt ng dn, phng thc require s tm n ng dn ny v coi th mc  l gc, n s tm kim nhng file c reque bt u t th mc . Trong ln u tin n tm thy th ruby s dng chng trnh  y v load file va tm c ln. Nu tm ht cc ng dn trong $LOAD_PATH v vn khng thy th <code>LoadError</code> s c gi ti.</p>\n<p>Tr v vi cu hi bn trn, on code ca chng ta work khi bin <code>$LOAD_PATH</code> c nh ngha, v n l ng dn ti th mc ang lm vic (chnh l folder app).</p>\n<p>Trong tt c cc trng hp cn li, nh khi bin ny cha c nh ngha hay n li li mt ng dn n mt folder khc, th on m khi u ca chng ta khng th chy (v require khng tm c file tng ng theo yu cu).</p>\n<p>Th bn nhn c khi ny ch l mt thng bo li <code>cannot load such file -- animal.rb (LoadError)</code>.</p>\n<p><strong>Gii quyt vn  trn bng cch no?</strong></p>\n<p>Ta s c th dng 2 cch:</p>\n<p>Cch 1: in thm th mc ang lm vic vo gi tr ca bin <code>$LOAD_PATH</code>, khi ny th on m chng ta s sa li nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ni thm ng dn th mc hin ti vo gi tr hin ti ca bin $LOAD_PATH</span></span><br><span class=\"line\">$LOAD_PATH &lt;&lt; File.join(File.dirname(__FILE_<span class=\"number\">_</span>)</span><br><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Cch 2: S dng <code>require_relative</code> thay th cho require, sa li on m nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>C hai phng php trn u hot ng bnh thng.</p>\n<blockquote>\n<p>$: l mt cch vit tt cho $LOAD_PATH</p>\n</blockquote>\n<h1 id=\"2-So-sanh-require-va-load\"><a href=\"#2-So-sanh-require-va-load\" class=\"headerlink\" title=\"2. So snh require v load\"></a>2. So snh require v load</h1><p>Nh trong mc 1  ni v require, thc cht load c cch hot ng v mc ch s dng rt ging vi require. C 2 u c dng  gi nhng on m cn thit vo file hin ti ang lm vic, nh vic bn mun import thm mt file js vo file html ang lm vic no .</p>\n<p>Tuy nhin gia chng c mt im khc nhau c bn, m t   dn ti mt li khuyn v vic s dng chng nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Moreover, Kernel#require loads files once, but development is much more smooth</span><br><span class=\"line\">if code gets refreshed when it changes without restarting the server.</span><br><span class=\"line\">It would be nice to be able to use Kernel#load in development,</span><br><span class=\"line\">and Kernel#require in production.</span><br></pre></td></tr></table></figure>\n\n<p><code>- trch dn guides.rubyonrails -</code></p>\n<p>:arrow_right: iu rt ra  y l:</p>\n<p>:one: require s c v load file c gi mt ln duy nht.</p>\n<p>:two: load s c v load file c gi mi khi file  c chy.</p>\n<p>T  dn n vic l load s hu dng khi lm vic ti mi trng development hn, ni m thay i din ra lin tc, cn require thch hp khi trin khai ln production.</p>\n<p>Note: Sau khi bn chy ti method require, n s c file bn require v lu ti b nh, nhng ln tip theo khi bn chy ti file , n s c ni dung t b nh (m n  lu li ti ln load u tin), iu ny gip tng performance v khng phi lood li file ln na, nhng ng ngha vi  l nhng thay i sau  ti file require s khng c load khi chy.</p>\n<h1 id=\"3-So-sanh-include-va-extend\"><a href=\"#3-So-sanh-include-va-extend\" class=\"headerlink\" title=\"3. So snh include v extend\"></a>3. So snh include v extend</h1><p>Khng c nhiu lin h vi hai mc u, 2 phng thc c  cp trong mc 3  gii quyt bi tan mixin trong ruby, nh  c ln ti trnh by khi qut <a href=\"https://hdchinh.com/post/2019-02-24-ruby-method-lookup/\" target=\"_blank\" rel=\"noopener\">ti y</a>.</p>\n<p>C v v cao hng chm gi title qu, m ti qun mt  vit v hai phng thc ny mt ln, v hin ti vn cha c g  b sung thm, nu cn hy c li bi vit tham kho bn trn nh.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Tham kho:</p>\n<p>[1] <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" target=\"_blank\" rel=\"noopener\">autoloading_and_reloading_constants</a></p>\n"},{"title":"Tng Quan Nguyn L SOLID","date":"2019-05-16T17:00:00.000Z","draft":false,"_content":"## t vn \n\nCch y mt thi gian, ti c lm mt ng dng nh vi vn vn tng cng tm 500 dng code. Khi bt u ti  mng tng rng y ch l mt chng trnh n gin nn khng cn phn chia g cho tn cng sc mu m. V vy ti ch code trn vi file nht nh.\n\nMt thi gian sau, ti cn m rng thm 1 vi chc nng na, rt t l lc ny ti  gn nh qun lun cc logic mnh  lm trong ng code c, cn rng c li tng dng, tng dng, v tn thi gian gp 3 gp 4 ln  h thng li cho d hiu hn. Mt bi hc khng phi cay ng lm cho ti, n ch ti hiu rng vic cu trc v cch tip cn khi lp trnh quan trng n th no.\n\nPhn ln thi gian mt ng dng trn tay dev l  maintain, vy nn vic ngy hm nay bn lm n ra sao nh hng rt ln n sau ny.  l mt phn l do m ti phi tm ng cch mng qua SOLID v nhng mu design pattern, nhng th vn v m ngy xa ti rt ght v thy tha thi, nhng gi y n nh mt bu tri chn l sng chi lo qua tim.\n\n## Lun bn\n\n## 1. nh ngha v mc tiu s dng\n\n![hoa](/images/solid.png)\n\nTrc tin, hy xem SOLID l vit tt ca nhng cm t g.\n\n:one: **S**ingle Responsibility Principle\n\n:two: **O**pen/Closed Principle\n\n:three: **L**iskov Substitution Principle\n\n:four: **I**nterface Segregation Principle\n\n:five: **D**ependency Inversion Principle\n\nHn lm l vy nhng  d nh th ti gi chng ngn gn l: **S**ingle, **O**pen, **L**iskov, **I**nterface v **D**ependency.\n\nV mc tiu  ci nguyn l ny c mt trn ci i, u cng l xut pht t nhu cu lm t hn ca con ngi, vic code khng c h thng khin cc nh pht trin tn nhiu thi gian bo tr v d pht sinh li trong qu trnh s dng.\n gim bt gnh nng ny cc nh pht trin  c ng li mt s khun kh, cch thc lp trnh m di gc nhn v kinh nghim ca nhiu ngi, cc khun kh cch thc  gip cho vic bo tr tr nn d dng hn, h thng t pht sinh li ngoi  mun hn. Mt trong s  l h thng cc nguyn tc trong SOLID.\n\nGi s ti phi x l mt bi ton tnh promotion cho mt ng dng thng mi in t. y s l v d ta dng n trong cc phn pha di. Gi s cu trc d n hin ti nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n```\n\nTrong  signin cha m ngun thc hin chc nng ng nhp, signup cha m thc hin chc nng ng k v checkout cha m thc hin chc nng thanh ton.\n\n## 2. **S**ingle Responsibility Principle\n\n![hoa](/images/srp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> Every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class.\n\niu cn quan tm  y l single responsibility c th hiu l g? Ngha ca responsibility l 'trch nhim', vy 'trch nhim' trong code l g?\n\nTa c th hiu n ng ngha vi 'chc nng' hay khng? C gi s nh ta c th hiu n l 'chc nng' vy khi  th nguyn l ny c th pht biu li thnh nh sau:\n\n> Mi class nn ch mang mt chc nng nht nh, v chc nng  phi c ng gi trong class ny.\n\nBy gi th  d hiu hn nhiu, quay tr v v d, chng ta cn vit mt chc nng tnh promotion. Ta c th  vit chc nng ny vo u?\n\nCu tr li n gin nht l chng ta vit chc nng ny lun vo file checkout.rb, khi thc hin chc nng thanh ton th s dng lun cc method tnh promotion trong . Mi chuyn tht n gin phi khng? iu ny c vi phm nguyn tc SRP khng?\n\nNu ti ni l khng vi phm? Din gii ca ti nh sau: Trch nhim ca ci module/class Checkout l thanh ton nhng mt hng bn  b vo cart, vy promotion cng ch mt step trong qu trnh thanh ton, nn nu ti vit code promotion trong module/class Checkout th ti vi phm nguyn tc SRP ch no?  Checkout vn ang lm ng v duy nht mt 'trch nhim'  l gip thanh ton n hng v promotion ch l phn ph tr cho qu trnh  hay ni cch khc promotion ch l mt bc trong nhiu bc ca qu trnh thanh ton.\n\nVy ti c sai khi ni vy khng? Bn c th chng minh l ti sai nguyn l SRP c hay khng?\n\n1. Ti nghe nhiu ngi ni y l nguyn tc d nht trong SOLID, theo ti n ch l nguyn tc m nh ngha d hc thuc nht m thi.\n\n2. Responsibility th hy hiu n l responsibility (hay hiu n l ng ng ngha l trch nhim). Khng nh ng responsibility thnh 'chc nng' nh trn.\n\n3. Ni dung nguyn l ch c tnh tng i, n ph thuc hon ton vo ci m bn xem l mt responsibility.\n\n nh gi u, ci g l mt responsibility th c l iu kin cn l phi c  kinh nghim. Tr li v d, ti c th coi promotion l mt responsibility ring r vi chc nng thanh ton. Khi  t chc code ca ti nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion.rb\n```\n\nNh ny  phi l cch tt nht? Cu tr li l tu ng iu hon cnh, gi s nu chc nng promotion c nhiu rule khc nhau th vic b tt c function tnh promotion vo 1 file promotion.rb c v khng phi l mt cch hay. Khi  ta t chc li nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion\n    - promotion_type_a.rb\n    - promotion_type_b.rb\n    - promotion_type_c.rb\n```\n\nCch t chc ny  l tt nht hay cha? cu tr li l cha chc, mi th li ph thuc vo ng cnh.\nNguyn l SRP c th sai hay ng trong mt s trng hp l rt mp m, tu theo ci m nh pht trin nh ngha cho responsibility m h xy dng.\n\nNote: Nhng cui cng nguyn l SRP cng ch c mt mc ch duy nht  cu trc d n d sa i v bo tr, v vy trong tng tnh hung s c nhng cch khc nhau  phn chia t chc m ngun, da vo chc nng, da vo yu cu khch hng, da vo tim nng pht trin d n...\n\n## 3. **O**pen/Closed Principle\n\n![hoa](/images/ocp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> One software entity (class/module) must be open for extension but closed for modification.\n\nHiu n gin:\n\n> Mt class/module cn phi c th m rng, nhng khng/khng nn sa i n.\n\nV sao nguyn l ny li yu cu nh vy? vic ti mun m rng hay ti sa i mt ci class th c nh hng g u m cng nh?\n\nng l nh vy, trong phn ln qu trnh pht trin nhng ng dng c nhn n gin th vic chng ta c thm, xo, sa hay m rng mt class/module a phn u khng mang li hu qu g ngoi  mun.\n\nNhng ng cnh m nguyn l ny hng ti l nhng ng dng thc s trong cuc sng,   nhng ng dng ny s ln, ri rm v c business khng h n gin. Mt im na l d n  khi ti tay bn  c th tri qua 5, 7 ln i team pht trin v nhng g bn thy l thnh qu ca c mt qu trnh pht trin tnh nng v maintain trong n v tnh bng nm.\n\nLiu bn c nm ht c flow hot ng ca tng on m, tng file tng class hay khng? Nht nh l khng ri.\n\n chnh l l do m nguyn l OCP ra i, khi h thng phc tp v bn khng nm c ht tt c nhng g s xy ra sau khi bn thay i m ngun ti mt class/module. Hy ng thay i,  trnh lm nh hng n mt phn logic tim tng no . Thay vo  hy m rng class/module , m rng  b sung tnh nng bn cn m cn gip khng nh hng n nhng phn code c khng sai lch v logic lun l (V n c th vn ang s dng chc nng c, liu bn c cover c ht  sa i tt c cc trng hp c th xy ra hay khng?).\n\n> V vy hy u tin m rng mt class/module khi cn pht trin thm hay thay i tnh nng, hn ch v hy tht cn thn khi cn sa i m ngun c sn (chnh l sa i class/module).\n\nMc tiu ca nguyn l l vy, rt d hiu, hy cng tho lun v mt v d trc khi sang phn tip theo:\n\nLi quay tr li v d v bi ton promotion, gi s ti l chn cu trc chng trnh nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion.rb\n```\n\nNh  trnh by  trn, cu trc nh ny v l thuyt th cng ch ai bo l ti vi phm nguyn tc s 1 SRP c. Gi s ni dung ca file promotion.rb nh sau:\n\n```ruby\nclass Promotion\n  def promotion_type_a\n    # implement rule promotion type a\n  end\n\n  def promotion_type_b\n    # implement rule promotion type b\n  end\nend\n```\n\nVy by gi khi ti mun thm mt rule tnh promotion mi, th ti s phi sa i file promotion.rb ny, v nguyn tc n  vi phm nguyn l s 2 OCP (m  m rng ch khng phi  sa i).\n\n khc phc ta c th cu trc li m ngun nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion\n    - promotion.rb\n    - promotion_type_a.rb\n    - promotion_type_b.rb\n    - promotion_type_c.rb\n```\n\nV khi ny, khi ti cn thm mi 1 rule promotion, ti s to mt file mi trong th mc promotion, vi ni dung k tha t class Promotion.\n\nV d b sung thm rule promotion_type_x.rb vi ni dung:\n\n```ruby\nclass PromotionTypeX < Promotion\n  # do something\nend\n```\n\n## 4. **L**iskov Substitution Principle\n\n![hoa](/images/lsp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).\n\nHiu n gin l:\n\n> Bn c class A l con ca class B, th instance ca class A phi thay th c cho instance ca class B trong m ngun m khng gy ra sai xt no (khng li v khng sai ng ngha).\n\nMt v d n gin nh sau:\n\n```ruby\nclass Animal\n  def animal_hello\n    puts \"Animal say hello\"\n  end\nend\n\nclass Cat < Animal\n  def cat_hello\n    puts \"Cat say hello\"\n  end\nend\n```\n\non m trn l mt on m hp l vi nguyn l Liskov v:\n\n```ruby\ntemp = Animal.new\ntemp.animal_hello\n# kt qu tr v l: \"Animal say hello\"\n\ntemp = Cat.new\ntemp.animal_hello\n# kt qu tr v vn l: \"Animal say hello\"\n```\n\nNh bn thy, kt qu tr v khng thay i khi ta dng instance ca class Cat thay cho instance class cha ca n l Animal, v vy l nguyn l Liskov c bo ton tnh ng n ca n.\n\nHy th mt on m ngun khc nh sau:\n\n```ruby\nclass Animal\n  def animal_hello\n    puts \"Animal say hello\"\n  end\nend\n\nclass Cat < Animal\n  def animal_hello\n    puts \"Cat say hello\"\n  end\nend\n```\n\ny l on m vi phm nguyn tc ca Liskov, khi ny ta c:\n\n```ruby\ntemp = Animal.new\ntemp.animal_hello\n# kt qu tr v l: \"Animal say hello\"\n\ntemp = Cat.new\ntemp.animal_hello\n# kt qu tr v l: \"Cat say hello\"\n```\n\nTa c th thy, instance ca class Cat khi gi ti method animal_hello  khng cn tr v kt qu tng t nh mt instance Animal na ri, v l do  class Cat, class ny  override li phng thc animal_hello, v t  dn ti vi phm nguyn tc Liskov.\n\n## 5. **I**nterface Segregation Principle\n\n![hoa](/images/isp.png)\n\nNguyn l ny c pht biu nh sau:\n\n> No client should be forced to depend on methods it does not use.\n\nHiu n gin l:\n\n> Nu bn l mt i tng no  trong m ngun, hy m bo l bn phi/ch lm nhng cng vic m bn phi/c th lm. Khng trao cho bn nhng kh nng m bn khng cn.\n\nTh mt v d n gin, bn l mt hc sinh c giao nhim v trc nht lp, c gio bn phi m bo rng bn ch c trao cha kho m ca phng hc ca bn, ch khng trao cho bn nhng cha kho khc (nh cha kho cc lp hc khc, phng tin hc, phng gio vin...), y l nhng cng vic ca nhng c nhn khc.\n\nNu bn c trao nhng cng vic ca ngi khc, c th bn s to ra nhng sai lm khng th sa i c. V vy hy lm ng cng vic ca mnh.\n\nHy bt u vi mt v d:\n\nTa c mt class Animal.\n\n```ruby\nclass Animal\n  include AnimalHelper\n  # do something\nend\n```\n\nClass Animal bn trn include module di y.\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\nend\n```\n\nMi chuyn n ch? Rt n, 3 method hin c trong module AnimalHelper l 3 method h tr cho class Animal.\n\nVy by gi ti c thm mt class na nh sau:\n\n```ruby\nclass YellowCat\n  # do something\nend\n```\n\nClass ny cn mt phng thc support tn l `yellow_cat_helper`, ti s vit thm method ny vo module AnimalHelper v include module AnimalHelper vo class YellowCat vy l ng v  yu cu. Khi ny module AnimalHelper v class YellowCat s tr thnh nh sau:\n\nClass YellowCat\n\n```ruby\nclass YellowCat\n  include AnimalHelper\n  # do something\nend\n```\n\nModule AnimalHelper\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\n\n  # add new method for YellowCat\n  def yellow_cat_helper\n    # do something\n  end\nend\n```\n\nMi chuyn gi vn n ch? Khng, by gi th khng n na ri n  vi phm nguyn tc SOLID th 4, ch \"I\" m chng ta ang xt.\n\nV sao?\n\nV class Animal u c cn method `yellow_cat_helper`, cn class YellowCat u c cn 3 method `animal_helper_a`, `animal_helper_b`, `animal_helper_c` ny u?\n\nVy m chng vn c th s dng nhng method m chng vn khng cn, v l do ta vit chung tt c method vo mt module v include module vo tng class.\n\nY nh v d bn trn: Bn cn trc nht lp 1A thi m, c gio bn a cho bn trm cha kho ca c trng lm g? Cm th nng, m nh u bn ~~tt mt~~ nghch di th hu qu khn lng.\n\nVy  khng vi phm nguyn tc ny ta c th sa li m ngun nh sau:\n\nClass Animal\n\n```ruby\nclass Animal\n  include AnimalHelper\n  # do something\nend\n```\n\nModule Animal\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\nend\n```\n\nClass YellowCat\n\n```ruby\nclass YellowCat\n  include YellowCatHelper\n  # do something\nend\n```\n\nV gi ta to mt module mi  YellowCat include\n\n```ruby\nmodule YellowCatHelper\n  def yellow_cat_helper\n    # do something\n  end\nend\n```\n\nOk, vy l look good ri :smile: Lc ny class Animal ch c include nhng method m n cn v class YellowCat cng vy.\n\n## 6. **D**ependency Inversion Principle\n\n![hoa](/images/dip.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> 1. High-level modules should not depend on low-level modules. Both should depend on abstractions.\n> 2. Abstractions should not depend upon details. Details should depend upon abstractions.\n\nDch st ngha s l:\n\n> 1. Module cp cao khng nn ph thuc vo module cp thp hn. C hai nn ph thuc vo abstractions.\n> 2. Abstractions khng nn ph thuc vo details. Details nn ph thuc vo abstractions\n\nQuay tr li v d promotion ban u, gi s ta vit m ngun nh sau:\n\n```ruby\n# app/checkout.rb\nclass Checkout\n  def get_bill(cart)\n    PromotionTypeA.promotion_type_a(cart)\n  end\nend\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeA\n  def self.promotion_type_a(cart)\n    # do something\n  end\nend\n```\n\nTrong on m ngun trn y, method get_bill trong class Checkout ph thuc vo class PromotionTypeA. R rng l nh vy, cu hi l nu ta c PromotionTypeB, PromotionTypeC... Th phi lm sao?\n\nChng ta s phi vit 3 method get_bill ng vi PromotionTypeA, PromotionTypeB v PromotionTypeC hay sao?\n\n cng l mt cch, nhng  l cch  vi phm nguyn l DIP, khi m cc module ph thuc ln nhau.\n\n gii quyt vn  ny ta c th vit li m ngun nh sau:\n\n```ruby\n# app/checkout.rb\nclass Checkout\n  def get_bill(cart, PromotionType)\n    PromotionType.get_promotion(cart)\n  end\nend\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeA\n  def self.get_promotion(cart)\n    # do something\n  end\nend\n\n# get_bill vi PromotionTypeA\nCheckout.new.get_bill(cart, PromotionTypeA)\n\n#  vit thm PromotionTypeB, ta vit thm mt class PromotionTypeB v truyn PromotionTypeB vo get_bill method.\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeB\n  def self.get_promotion(cart)\n    # do something\n  end\nend\n\nCheckout.new.get_bill(cart, PromotionTypeB)\n```\n\n## Kt lun\n\nTrn y l 1 ci nhn tng quan v h thng nguyn l SOLID ni ting, vic p dng nguyn l ny s khng chc gip m ngun bn thnh cng, nhng n s gim thiu ri ro hn l khi code bt chp, l thuyt ch l mt phn nh, nm l thuyt gip chng ta c ci nhn tng qut, trch rt li th th lm cho nguyn l ny c gi tr nm  kinh nghim s dng ca nh pht trin, khng phi lun lun tun th mi quy tc  l tt trong mi trng hp.\n\nNgun tham kho:\n\n[1] [https://en.wikipedia.org/wiki/SOLID](https://en.wikipedia.org/wiki/SOLID)\n","source":"_posts/2019-05-17-nguyen-ly-solid-trong-code-ruby.md","raw":"---\ntitle: \"Tng Quan Nguyn L SOLID\"\ndate: 2019-05-17\ndraft: false\ntags: [\"SOLID\", \"RUBY\"]\ncategories: [\"RUBY\", \"PROGRAMMING\"]\n---\n## t vn \n\nCch y mt thi gian, ti c lm mt ng dng nh vi vn vn tng cng tm 500 dng code. Khi bt u ti  mng tng rng y ch l mt chng trnh n gin nn khng cn phn chia g cho tn cng sc mu m. V vy ti ch code trn vi file nht nh.\n\nMt thi gian sau, ti cn m rng thm 1 vi chc nng na, rt t l lc ny ti  gn nh qun lun cc logic mnh  lm trong ng code c, cn rng c li tng dng, tng dng, v tn thi gian gp 3 gp 4 ln  h thng li cho d hiu hn. Mt bi hc khng phi cay ng lm cho ti, n ch ti hiu rng vic cu trc v cch tip cn khi lp trnh quan trng n th no.\n\nPhn ln thi gian mt ng dng trn tay dev l  maintain, vy nn vic ngy hm nay bn lm n ra sao nh hng rt ln n sau ny.  l mt phn l do m ti phi tm ng cch mng qua SOLID v nhng mu design pattern, nhng th vn v m ngy xa ti rt ght v thy tha thi, nhng gi y n nh mt bu tri chn l sng chi lo qua tim.\n\n## Lun bn\n\n## 1. nh ngha v mc tiu s dng\n\n![hoa](/images/solid.png)\n\nTrc tin, hy xem SOLID l vit tt ca nhng cm t g.\n\n:one: **S**ingle Responsibility Principle\n\n:two: **O**pen/Closed Principle\n\n:three: **L**iskov Substitution Principle\n\n:four: **I**nterface Segregation Principle\n\n:five: **D**ependency Inversion Principle\n\nHn lm l vy nhng  d nh th ti gi chng ngn gn l: **S**ingle, **O**pen, **L**iskov, **I**nterface v **D**ependency.\n\nV mc tiu  ci nguyn l ny c mt trn ci i, u cng l xut pht t nhu cu lm t hn ca con ngi, vic code khng c h thng khin cc nh pht trin tn nhiu thi gian bo tr v d pht sinh li trong qu trnh s dng.\n gim bt gnh nng ny cc nh pht trin  c ng li mt s khun kh, cch thc lp trnh m di gc nhn v kinh nghim ca nhiu ngi, cc khun kh cch thc  gip cho vic bo tr tr nn d dng hn, h thng t pht sinh li ngoi  mun hn. Mt trong s  l h thng cc nguyn tc trong SOLID.\n\nGi s ti phi x l mt bi ton tnh promotion cho mt ng dng thng mi in t. y s l v d ta dng n trong cc phn pha di. Gi s cu trc d n hin ti nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n```\n\nTrong  signin cha m ngun thc hin chc nng ng nhp, signup cha m thc hin chc nng ng k v checkout cha m thc hin chc nng thanh ton.\n\n## 2. **S**ingle Responsibility Principle\n\n![hoa](/images/srp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> Every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class.\n\niu cn quan tm  y l single responsibility c th hiu l g? Ngha ca responsibility l 'trch nhim', vy 'trch nhim' trong code l g?\n\nTa c th hiu n ng ngha vi 'chc nng' hay khng? C gi s nh ta c th hiu n l 'chc nng' vy khi  th nguyn l ny c th pht biu li thnh nh sau:\n\n> Mi class nn ch mang mt chc nng nht nh, v chc nng  phi c ng gi trong class ny.\n\nBy gi th  d hiu hn nhiu, quay tr v v d, chng ta cn vit mt chc nng tnh promotion. Ta c th  vit chc nng ny vo u?\n\nCu tr li n gin nht l chng ta vit chc nng ny lun vo file checkout.rb, khi thc hin chc nng thanh ton th s dng lun cc method tnh promotion trong . Mi chuyn tht n gin phi khng? iu ny c vi phm nguyn tc SRP khng?\n\nNu ti ni l khng vi phm? Din gii ca ti nh sau: Trch nhim ca ci module/class Checkout l thanh ton nhng mt hng bn  b vo cart, vy promotion cng ch mt step trong qu trnh thanh ton, nn nu ti vit code promotion trong module/class Checkout th ti vi phm nguyn tc SRP ch no?  Checkout vn ang lm ng v duy nht mt 'trch nhim'  l gip thanh ton n hng v promotion ch l phn ph tr cho qu trnh  hay ni cch khc promotion ch l mt bc trong nhiu bc ca qu trnh thanh ton.\n\nVy ti c sai khi ni vy khng? Bn c th chng minh l ti sai nguyn l SRP c hay khng?\n\n1. Ti nghe nhiu ngi ni y l nguyn tc d nht trong SOLID, theo ti n ch l nguyn tc m nh ngha d hc thuc nht m thi.\n\n2. Responsibility th hy hiu n l responsibility (hay hiu n l ng ng ngha l trch nhim). Khng nh ng responsibility thnh 'chc nng' nh trn.\n\n3. Ni dung nguyn l ch c tnh tng i, n ph thuc hon ton vo ci m bn xem l mt responsibility.\n\n nh gi u, ci g l mt responsibility th c l iu kin cn l phi c  kinh nghim. Tr li v d, ti c th coi promotion l mt responsibility ring r vi chc nng thanh ton. Khi  t chc code ca ti nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion.rb\n```\n\nNh ny  phi l cch tt nht? Cu tr li l tu ng iu hon cnh, gi s nu chc nng promotion c nhiu rule khc nhau th vic b tt c function tnh promotion vo 1 file promotion.rb c v khng phi l mt cch hay. Khi  ta t chc li nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion\n    - promotion_type_a.rb\n    - promotion_type_b.rb\n    - promotion_type_c.rb\n```\n\nCch t chc ny  l tt nht hay cha? cu tr li l cha chc, mi th li ph thuc vo ng cnh.\nNguyn l SRP c th sai hay ng trong mt s trng hp l rt mp m, tu theo ci m nh pht trin nh ngha cho responsibility m h xy dng.\n\nNote: Nhng cui cng nguyn l SRP cng ch c mt mc ch duy nht  cu trc d n d sa i v bo tr, v vy trong tng tnh hung s c nhng cch khc nhau  phn chia t chc m ngun, da vo chc nng, da vo yu cu khch hng, da vo tim nng pht trin d n...\n\n## 3. **O**pen/Closed Principle\n\n![hoa](/images/ocp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> One software entity (class/module) must be open for extension but closed for modification.\n\nHiu n gin:\n\n> Mt class/module cn phi c th m rng, nhng khng/khng nn sa i n.\n\nV sao nguyn l ny li yu cu nh vy? vic ti mun m rng hay ti sa i mt ci class th c nh hng g u m cng nh?\n\nng l nh vy, trong phn ln qu trnh pht trin nhng ng dng c nhn n gin th vic chng ta c thm, xo, sa hay m rng mt class/module a phn u khng mang li hu qu g ngoi  mun.\n\nNhng ng cnh m nguyn l ny hng ti l nhng ng dng thc s trong cuc sng,   nhng ng dng ny s ln, ri rm v c business khng h n gin. Mt im na l d n  khi ti tay bn  c th tri qua 5, 7 ln i team pht trin v nhng g bn thy l thnh qu ca c mt qu trnh pht trin tnh nng v maintain trong n v tnh bng nm.\n\nLiu bn c nm ht c flow hot ng ca tng on m, tng file tng class hay khng? Nht nh l khng ri.\n\n chnh l l do m nguyn l OCP ra i, khi h thng phc tp v bn khng nm c ht tt c nhng g s xy ra sau khi bn thay i m ngun ti mt class/module. Hy ng thay i,  trnh lm nh hng n mt phn logic tim tng no . Thay vo  hy m rng class/module , m rng  b sung tnh nng bn cn m cn gip khng nh hng n nhng phn code c khng sai lch v logic lun l (V n c th vn ang s dng chc nng c, liu bn c cover c ht  sa i tt c cc trng hp c th xy ra hay khng?).\n\n> V vy hy u tin m rng mt class/module khi cn pht trin thm hay thay i tnh nng, hn ch v hy tht cn thn khi cn sa i m ngun c sn (chnh l sa i class/module).\n\nMc tiu ca nguyn l l vy, rt d hiu, hy cng tho lun v mt v d trc khi sang phn tip theo:\n\nLi quay tr li v d v bi ton promotion, gi s ti l chn cu trc chng trnh nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion.rb\n```\n\nNh  trnh by  trn, cu trc nh ny v l thuyt th cng ch ai bo l ti vi phm nguyn tc s 1 SRP c. Gi s ni dung ca file promotion.rb nh sau:\n\n```ruby\nclass Promotion\n  def promotion_type_a\n    # implement rule promotion type a\n  end\n\n  def promotion_type_b\n    # implement rule promotion type b\n  end\nend\n```\n\nVy by gi khi ti mun thm mt rule tnh promotion mi, th ti s phi sa i file promotion.rb ny, v nguyn tc n  vi phm nguyn l s 2 OCP (m  m rng ch khng phi  sa i).\n\n khc phc ta c th cu trc li m ngun nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion\n    - promotion.rb\n    - promotion_type_a.rb\n    - promotion_type_b.rb\n    - promotion_type_c.rb\n```\n\nV khi ny, khi ti cn thm mi 1 rule promotion, ti s to mt file mi trong th mc promotion, vi ni dung k tha t class Promotion.\n\nV d b sung thm rule promotion_type_x.rb vi ni dung:\n\n```ruby\nclass PromotionTypeX < Promotion\n  # do something\nend\n```\n\n## 4. **L**iskov Substitution Principle\n\n![hoa](/images/lsp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).\n\nHiu n gin l:\n\n> Bn c class A l con ca class B, th instance ca class A phi thay th c cho instance ca class B trong m ngun m khng gy ra sai xt no (khng li v khng sai ng ngha).\n\nMt v d n gin nh sau:\n\n```ruby\nclass Animal\n  def animal_hello\n    puts \"Animal say hello\"\n  end\nend\n\nclass Cat < Animal\n  def cat_hello\n    puts \"Cat say hello\"\n  end\nend\n```\n\non m trn l mt on m hp l vi nguyn l Liskov v:\n\n```ruby\ntemp = Animal.new\ntemp.animal_hello\n# kt qu tr v l: \"Animal say hello\"\n\ntemp = Cat.new\ntemp.animal_hello\n# kt qu tr v vn l: \"Animal say hello\"\n```\n\nNh bn thy, kt qu tr v khng thay i khi ta dng instance ca class Cat thay cho instance class cha ca n l Animal, v vy l nguyn l Liskov c bo ton tnh ng n ca n.\n\nHy th mt on m ngun khc nh sau:\n\n```ruby\nclass Animal\n  def animal_hello\n    puts \"Animal say hello\"\n  end\nend\n\nclass Cat < Animal\n  def animal_hello\n    puts \"Cat say hello\"\n  end\nend\n```\n\ny l on m vi phm nguyn tc ca Liskov, khi ny ta c:\n\n```ruby\ntemp = Animal.new\ntemp.animal_hello\n# kt qu tr v l: \"Animal say hello\"\n\ntemp = Cat.new\ntemp.animal_hello\n# kt qu tr v l: \"Cat say hello\"\n```\n\nTa c th thy, instance ca class Cat khi gi ti method animal_hello  khng cn tr v kt qu tng t nh mt instance Animal na ri, v l do  class Cat, class ny  override li phng thc animal_hello, v t  dn ti vi phm nguyn tc Liskov.\n\n## 5. **I**nterface Segregation Principle\n\n![hoa](/images/isp.png)\n\nNguyn l ny c pht biu nh sau:\n\n> No client should be forced to depend on methods it does not use.\n\nHiu n gin l:\n\n> Nu bn l mt i tng no  trong m ngun, hy m bo l bn phi/ch lm nhng cng vic m bn phi/c th lm. Khng trao cho bn nhng kh nng m bn khng cn.\n\nTh mt v d n gin, bn l mt hc sinh c giao nhim v trc nht lp, c gio bn phi m bo rng bn ch c trao cha kho m ca phng hc ca bn, ch khng trao cho bn nhng cha kho khc (nh cha kho cc lp hc khc, phng tin hc, phng gio vin...), y l nhng cng vic ca nhng c nhn khc.\n\nNu bn c trao nhng cng vic ca ngi khc, c th bn s to ra nhng sai lm khng th sa i c. V vy hy lm ng cng vic ca mnh.\n\nHy bt u vi mt v d:\n\nTa c mt class Animal.\n\n```ruby\nclass Animal\n  include AnimalHelper\n  # do something\nend\n```\n\nClass Animal bn trn include module di y.\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\nend\n```\n\nMi chuyn n ch? Rt n, 3 method hin c trong module AnimalHelper l 3 method h tr cho class Animal.\n\nVy by gi ti c thm mt class na nh sau:\n\n```ruby\nclass YellowCat\n  # do something\nend\n```\n\nClass ny cn mt phng thc support tn l `yellow_cat_helper`, ti s vit thm method ny vo module AnimalHelper v include module AnimalHelper vo class YellowCat vy l ng v  yu cu. Khi ny module AnimalHelper v class YellowCat s tr thnh nh sau:\n\nClass YellowCat\n\n```ruby\nclass YellowCat\n  include AnimalHelper\n  # do something\nend\n```\n\nModule AnimalHelper\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\n\n  # add new method for YellowCat\n  def yellow_cat_helper\n    # do something\n  end\nend\n```\n\nMi chuyn gi vn n ch? Khng, by gi th khng n na ri n  vi phm nguyn tc SOLID th 4, ch \"I\" m chng ta ang xt.\n\nV sao?\n\nV class Animal u c cn method `yellow_cat_helper`, cn class YellowCat u c cn 3 method `animal_helper_a`, `animal_helper_b`, `animal_helper_c` ny u?\n\nVy m chng vn c th s dng nhng method m chng vn khng cn, v l do ta vit chung tt c method vo mt module v include module vo tng class.\n\nY nh v d bn trn: Bn cn trc nht lp 1A thi m, c gio bn a cho bn trm cha kho ca c trng lm g? Cm th nng, m nh u bn ~~tt mt~~ nghch di th hu qu khn lng.\n\nVy  khng vi phm nguyn tc ny ta c th sa li m ngun nh sau:\n\nClass Animal\n\n```ruby\nclass Animal\n  include AnimalHelper\n  # do something\nend\n```\n\nModule Animal\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\nend\n```\n\nClass YellowCat\n\n```ruby\nclass YellowCat\n  include YellowCatHelper\n  # do something\nend\n```\n\nV gi ta to mt module mi  YellowCat include\n\n```ruby\nmodule YellowCatHelper\n  def yellow_cat_helper\n    # do something\n  end\nend\n```\n\nOk, vy l look good ri :smile: Lc ny class Animal ch c include nhng method m n cn v class YellowCat cng vy.\n\n## 6. **D**ependency Inversion Principle\n\n![hoa](/images/dip.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> 1. High-level modules should not depend on low-level modules. Both should depend on abstractions.\n> 2. Abstractions should not depend upon details. Details should depend upon abstractions.\n\nDch st ngha s l:\n\n> 1. Module cp cao khng nn ph thuc vo module cp thp hn. C hai nn ph thuc vo abstractions.\n> 2. Abstractions khng nn ph thuc vo details. Details nn ph thuc vo abstractions\n\nQuay tr li v d promotion ban u, gi s ta vit m ngun nh sau:\n\n```ruby\n# app/checkout.rb\nclass Checkout\n  def get_bill(cart)\n    PromotionTypeA.promotion_type_a(cart)\n  end\nend\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeA\n  def self.promotion_type_a(cart)\n    # do something\n  end\nend\n```\n\nTrong on m ngun trn y, method get_bill trong class Checkout ph thuc vo class PromotionTypeA. R rng l nh vy, cu hi l nu ta c PromotionTypeB, PromotionTypeC... Th phi lm sao?\n\nChng ta s phi vit 3 method get_bill ng vi PromotionTypeA, PromotionTypeB v PromotionTypeC hay sao?\n\n cng l mt cch, nhng  l cch  vi phm nguyn l DIP, khi m cc module ph thuc ln nhau.\n\n gii quyt vn  ny ta c th vit li m ngun nh sau:\n\n```ruby\n# app/checkout.rb\nclass Checkout\n  def get_bill(cart, PromotionType)\n    PromotionType.get_promotion(cart)\n  end\nend\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeA\n  def self.get_promotion(cart)\n    # do something\n  end\nend\n\n# get_bill vi PromotionTypeA\nCheckout.new.get_bill(cart, PromotionTypeA)\n\n#  vit thm PromotionTypeB, ta vit thm mt class PromotionTypeB v truyn PromotionTypeB vo get_bill method.\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeB\n  def self.get_promotion(cart)\n    # do something\n  end\nend\n\nCheckout.new.get_bill(cart, PromotionTypeB)\n```\n\n## Kt lun\n\nTrn y l 1 ci nhn tng quan v h thng nguyn l SOLID ni ting, vic p dng nguyn l ny s khng chc gip m ngun bn thnh cng, nhng n s gim thiu ri ro hn l khi code bt chp, l thuyt ch l mt phn nh, nm l thuyt gip chng ta c ci nhn tng qut, trch rt li th th lm cho nguyn l ny c gi tr nm  kinh nghim s dng ca nh pht trin, khng phi lun lun tun th mi quy tc  l tt trong mi trng hp.\n\nNgun tham kho:\n\n[1] [https://en.wikipedia.org/wiki/SOLID](https://en.wikipedia.org/wiki/SOLID)\n","slug":"2019-05-17-nguyen-ly-solid-trong-code-ruby","published":1,"updated":"2019-12-06T15:39:12.027Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe31001q8ers9yphfyuu","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Cch y mt thi gian, ti c lm mt ng dng nh vi vn vn tng cng tm 500 dng code. Khi bt u ti  mng tng rng y ch l mt chng trnh n gin nn khng cn phn chia g cho tn cng sc mu m. V vy ti ch code trn vi file nht nh.</p>\n<p>Mt thi gian sau, ti cn m rng thm 1 vi chc nng na, rt t l lc ny ti  gn nh qun lun cc logic mnh  lm trong ng code c, cn rng c li tng dng, tng dng, v tn thi gian gp 3 gp 4 ln  h thng li cho d hiu hn. Mt bi hc khng phi cay ng lm cho ti, n ch ti hiu rng vic cu trc v cch tip cn khi lp trnh quan trng n th no.</p>\n<p>Phn ln thi gian mt ng dng trn tay dev l  maintain, vy nn vic ngy hm nay bn lm n ra sao nh hng rt ln n sau ny.  l mt phn l do m ti phi tm ng cch mng qua SOLID v nhng mu design pattern, nhng th vn v m ngy xa ti rt ght v thy tha thi, nhng gi y n nh mt bu tri chn l sng chi lo qua tim.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Dinh-nghia-va-muc-tieu-su-dung\"><a href=\"#1-Dinh-nghia-va-muc-tieu-su-dung\" class=\"headerlink\" title=\"1. nh ngha v mc tiu s dng\"></a>1. nh ngha v mc tiu s dng</h2><p><img src=\"/images/solid.png\" alt=\"hoa\"></p>\n<p>Trc tin, hy xem SOLID l vit tt ca nhng cm t g.</p>\n<p>:one: <strong>S</strong>ingle Responsibility Principle</p>\n<p>:two: <strong>O</strong>pen/Closed Principle</p>\n<p>:three: <strong>L</strong>iskov Substitution Principle</p>\n<p>:four: <strong>I</strong>nterface Segregation Principle</p>\n<p>:five: <strong>D</strong>ependency Inversion Principle</p>\n<p>Hn lm l vy nhng  d nh th ti gi chng ngn gn l: <strong>S</strong>ingle, <strong>O</strong>pen, <strong>L</strong>iskov, <strong>I</strong>nterface v <strong>D</strong>ependency.</p>\n<p>V mc tiu  ci nguyn l ny c mt trn ci i, u cng l xut pht t nhu cu lm t hn ca con ngi, vic code khng c h thng khin cc nh pht trin tn nhiu thi gian bo tr v d pht sinh li trong qu trnh s dng.<br> gim bt gnh nng ny cc nh pht trin  c ng li mt s khun kh, cch thc lp trnh m di gc nhn v kinh nghim ca nhiu ngi, cc khun kh cch thc  gip cho vic bo tr tr nn d dng hn, h thng t pht sinh li ngoi  mun hn. Mt trong s  l h thng cc nguyn tc trong SOLID.</p>\n<p>Gi s ti phi x l mt bi ton tnh promotion cho mt ng dng thng mi in t. y s l v d ta dng n trong cc phn pha di. Gi s cu trc d n hin ti nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br></pre></td></tr></table></figure>\n\n<p>Trong  signin cha m ngun thc hin chc nng ng nhp, signup cha m thc hin chc nng ng k v checkout cha m thc hin chc nng thanh ton.</p>\n<h2 id=\"2-Single-Responsibility-Principle\"><a href=\"#2-Single-Responsibility-Principle\" class=\"headerlink\" title=\"2. Single Responsibility Principle\"></a>2. <strong>S</strong>ingle Responsibility Principle</h2><p><img src=\"/images/srp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>Every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class.</p>\n</blockquote>\n<p>iu cn quan tm  y l single responsibility c th hiu l g? Ngha ca responsibility l trch nhim, vy trch nhim trong code l g?</p>\n<p>Ta c th hiu n ng ngha vi chc nng hay khng? C gi s nh ta c th hiu n l chc nng vy khi  th nguyn l ny c th pht biu li thnh nh sau:</p>\n<blockquote>\n<p>Mi class nn ch mang mt chc nng nht nh, v chc nng  phi c ng gi trong class ny.</p>\n</blockquote>\n<p>By gi th  d hiu hn nhiu, quay tr v v d, chng ta cn vit mt chc nng tnh promotion. Ta c th  vit chc nng ny vo u?</p>\n<p>Cu tr li n gin nht l chng ta vit chc nng ny lun vo file checkout.rb, khi thc hin chc nng thanh ton th s dng lun cc method tnh promotion trong . Mi chuyn tht n gin phi khng? iu ny c vi phm nguyn tc SRP khng?</p>\n<p>Nu ti ni l khng vi phm? Din gii ca ti nh sau: Trch nhim ca ci module/class Checkout l thanh ton nhng mt hng bn  b vo cart, vy promotion cng ch mt step trong qu trnh thanh ton, nn nu ti vit code promotion trong module/class Checkout th ti vi phm nguyn tc SRP ch no?  Checkout vn ang lm ng v duy nht mt trch nhim  l gip thanh ton n hng v promotion ch l phn ph tr cho qu trnh  hay ni cch khc promotion ch l mt bc trong nhiu bc ca qu trnh thanh ton.</p>\n<p>Vy ti c sai khi ni vy khng? Bn c th chng minh l ti sai nguyn l SRP c hay khng?</p>\n<ol>\n<li><p>Ti nghe nhiu ngi ni y l nguyn tc d nht trong SOLID, theo ti n ch l nguyn tc m nh ngha d hc thuc nht m thi.</p>\n</li>\n<li><p>Responsibility th hy hiu n l responsibility (hay hiu n l ng ng ngha l trch nhim). Khng nh ng responsibility thnh chc nng nh trn.</p>\n</li>\n<li><p>Ni dung nguyn l ch c tnh tng i, n ph thuc hon ton vo ci m bn xem l mt responsibility.</p>\n</li>\n</ol>\n<p> nh gi u, ci g l mt responsibility th c l iu kin cn l phi c  kinh nghim. Tr li v d, ti c th coi promotion l mt responsibility ring r vi chc nng thanh ton. Khi  t chc code ca ti nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br><span class=\"line\">  - promotion.rb</span><br></pre></td></tr></table></figure>\n\n<p>Nh ny  phi l cch tt nht? Cu tr li l tu ng iu hon cnh, gi s nu chc nng promotion c nhiu rule khc nhau th vic b tt c function tnh promotion vo 1 file promotion.rb c v khng phi l mt cch hay. Khi  ta t chc li nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br><span class=\"line\">  - promotion</span><br><span class=\"line\">    - promotion_type_a.rb</span><br><span class=\"line\">    - promotion_type_b.rb</span><br><span class=\"line\">    - promotion_type_c.rb</span><br></pre></td></tr></table></figure>\n\n<p>Cch t chc ny  l tt nht hay cha? cu tr li l cha chc, mi th li ph thuc vo ng cnh.<br>Nguyn l SRP c th sai hay ng trong mt s trng hp l rt mp m, tu theo ci m nh pht trin nh ngha cho responsibility m h xy dng.</p>\n<p>Note: Nhng cui cng nguyn l SRP cng ch c mt mc ch duy nht  cu trc d n d sa i v bo tr, v vy trong tng tnh hung s c nhng cch khc nhau  phn chia t chc m ngun, da vo chc nng, da vo yu cu khch hng, da vo tim nng pht trin d n</p>\n<h2 id=\"3-Open-Closed-Principle\"><a href=\"#3-Open-Closed-Principle\" class=\"headerlink\" title=\"3. Open/Closed Principle\"></a>3. <strong>O</strong>pen/Closed Principle</h2><p><img src=\"/images/ocp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>One software entity (class/module) must be open for extension but closed for modification.</p>\n</blockquote>\n<p>Hiu n gin:</p>\n<blockquote>\n<p>Mt class/module cn phi c th m rng, nhng khng/khng nn sa i n.</p>\n</blockquote>\n<p>V sao nguyn l ny li yu cu nh vy? vic ti mun m rng hay ti sa i mt ci class th c nh hng g u m cng nh?</p>\n<p>ng l nh vy, trong phn ln qu trnh pht trin nhng ng dng c nhn n gin th vic chng ta c thm, xo, sa hay m rng mt class/module a phn u khng mang li hu qu g ngoi  mun.</p>\n<p>Nhng ng cnh m nguyn l ny hng ti l nhng ng dng thc s trong cuc sng,   nhng ng dng ny s ln, ri rm v c business khng h n gin. Mt im na l d n  khi ti tay bn  c th tri qua 5, 7 ln i team pht trin v nhng g bn thy l thnh qu ca c mt qu trnh pht trin tnh nng v maintain trong n v tnh bng nm.</p>\n<p>Liu bn c nm ht c flow hot ng ca tng on m, tng file tng class hay khng? Nht nh l khng ri.</p>\n<p> chnh l l do m nguyn l OCP ra i, khi h thng phc tp v bn khng nm c ht tt c nhng g s xy ra sau khi bn thay i m ngun ti mt class/module. Hy ng thay i,  trnh lm nh hng n mt phn logic tim tng no . Thay vo  hy m rng class/module , m rng  b sung tnh nng bn cn m cn gip khng nh hng n nhng phn code c khng sai lch v logic lun l (V n c th vn ang s dng chc nng c, liu bn c cover c ht  sa i tt c cc trng hp c th xy ra hay khng?).</p>\n<blockquote>\n<p>V vy hy u tin m rng mt class/module khi cn pht trin thm hay thay i tnh nng, hn ch v hy tht cn thn khi cn sa i m ngun c sn (chnh l sa i class/module).</p>\n</blockquote>\n<p>Mc tiu ca nguyn l l vy, rt d hiu, hy cng tho lun v mt v d trc khi sang phn tip theo:</p>\n<p>Li quay tr li v d v bi ton promotion, gi s ti l chn cu trc chng trnh nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br><span class=\"line\">  - promotion.rb</span><br></pre></td></tr></table></figure>\n\n<p>Nh  trnh by  trn, cu trc nh ny v l thuyt th cng ch ai bo l ti vi phm nguyn tc s 1 SRP c. Gi s ni dung ca file promotion.rb nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Promotion</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion_type_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># implement rule promotion type a</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion_type_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># implement rule promotion type b</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy by gi khi ti mun thm mt rule tnh promotion mi, th ti s phi sa i file promotion.rb ny, v nguyn tc n  vi phm nguyn l s 2 OCP (m  m rng ch khng phi  sa i).</p>\n<p> khc phc ta c th cu trc li m ngun nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br><span class=\"line\">  - promotion</span><br><span class=\"line\">    - promotion.rb</span><br><span class=\"line\">    - promotion_type_a.rb</span><br><span class=\"line\">    - promotion_type_b.rb</span><br><span class=\"line\">    - promotion_type_c.rb</span><br></pre></td></tr></table></figure>\n\n<p>V khi ny, khi ti cn thm mi 1 rule promotion, ti s to mt file mi trong th mc promotion, vi ni dung k tha t class Promotion.</p>\n<p>V d b sung thm rule promotion_type_x.rb vi ni dung:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeX</span> &lt; Promotion</span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Liskov-Substitution-Principle\"><a href=\"#4-Liskov-Substitution-Principle\" class=\"headerlink\" title=\"4. Liskov Substitution Principle\"></a>4. <strong>L</strong>iskov Substitution Principle</h2><p><img src=\"/images/lsp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).</p>\n</blockquote>\n<p>Hiu n gin l:</p>\n<blockquote>\n<p>Bn c class A l con ca class B, th instance ca class A phi thay th c cho instance ca class B trong m ngun m khng gy ra sai xt no (khng li v khng sai ng ngha).</p>\n</blockquote>\n<p>Mt v d n gin nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Animal say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Cat say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>on m trn l mt on m hp l vi nguyn l Liskov v:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">temp = Animal.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Animal say hello\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = Cat.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v vn l: \"Animal say hello\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh bn thy, kt qu tr v khng thay i khi ta dng instance ca class Cat thay cho instance class cha ca n l Animal, v vy l nguyn l Liskov c bo ton tnh ng n ca n.</p>\n<p>Hy th mt on m ngun khc nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Animal say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Cat say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l on m vi phm nguyn tc ca Liskov, khi ny ta c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">temp = Animal.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Animal say hello\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = Cat.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Cat say hello\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Ta c th thy, instance ca class Cat khi gi ti method animal_hello  khng cn tr v kt qu tng t nh mt instance Animal na ri, v l do  class Cat, class ny  override li phng thc animal_hello, v t  dn ti vi phm nguyn tc Liskov.</p>\n<h2 id=\"5-Interface-Segregation-Principle\"><a href=\"#5-Interface-Segregation-Principle\" class=\"headerlink\" title=\"5. Interface Segregation Principle\"></a>5. <strong>I</strong>nterface Segregation Principle</h2><p><img src=\"/images/isp.png\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>No client should be forced to depend on methods it does not use.</p>\n</blockquote>\n<p>Hiu n gin l:</p>\n<blockquote>\n<p>Nu bn l mt i tng no  trong m ngun, hy m bo l bn phi/ch lm nhng cng vic m bn phi/c th lm. Khng trao cho bn nhng kh nng m bn khng cn.</p>\n</blockquote>\n<p>Th mt v d n gin, bn l mt hc sinh c giao nhim v trc nht lp, c gio bn phi m bo rng bn ch c trao cha kho m ca phng hc ca bn, ch khng trao cho bn nhng cha kho khc (nh cha kho cc lp hc khc, phng tin hc, phng gio vin), y l nhng cng vic ca nhng c nhn khc.</p>\n<p>Nu bn c trao nhng cng vic ca ngi khc, c th bn s to ra nhng sai lm khng th sa i c. V vy hy lm ng cng vic ca mnh.</p>\n<p>Hy bt u vi mt v d:</p>\n<p>Ta c mt class Animal.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class Animal bn trn include module di y.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Mi chuyn n ch? Rt n, 3 method hin c trong module AnimalHelper l 3 method h tr cho class Animal.</p>\n<p>Vy by gi ti c thm mt class na nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class ny cn mt phng thc support tn l <code>yellow_cat_helper</code>, ti s vit thm method ny vo module AnimalHelper v include module AnimalHelper vo class YellowCat vy l ng v  yu cu. Khi ny module AnimalHelper v class YellowCat s tr thnh nh sau:</p>\n<p>Class YellowCat</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Module AnimalHelper</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># add new method for YellowCat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat_helper</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Mi chuyn gi vn n ch? Khng, by gi th khng n na ri n  vi phm nguyn tc SOLID th 4, ch I m chng ta ang xt.</p>\n<p>V sao?</p>\n<p>V class Animal u c cn method <code>yellow_cat_helper</code>, cn class YellowCat u c cn 3 method <code>animal_helper_a</code>, <code>animal_helper_b</code>, <code>animal_helper_c</code> ny u?</p>\n<p>Vy m chng vn c th s dng nhng method m chng vn khng cn, v l do ta vit chung tt c method vo mt module v include module vo tng class.</p>\n<p>Y nh v d bn trn: Bn cn trc nht lp 1A thi m, c gio bn a cho bn trm cha kho ca c trng lm g? Cm th nng, m nh u bn <del>tt mt</del> nghch di th hu qu khn lng.</p>\n<p>Vy  khng vi phm nguyn tc ny ta c th sa li m ngun nh sau:</p>\n<p>Class Animal</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Module Animal</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class YellowCat</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> YellowCatHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>V gi ta to mt module mi  YellowCat include</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">YellowCatHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat_helper</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Ok, vy l look good ri :smile: Lc ny class Animal ch c include nhng method m n cn v class YellowCat cng vy.</p>\n<h2 id=\"6-Dependency-Inversion-Principle\"><a href=\"#6-Dependency-Inversion-Principle\" class=\"headerlink\" title=\"6. Dependency Inversion Principle\"></a>6. <strong>D</strong>ependency Inversion Principle</h2><p><img src=\"/images/dip.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<ol>\n<li>High-level modules should not depend on low-level modules. Both should depend on abstractions.</li>\n<li>Abstractions should not depend upon details. Details should depend upon abstractions.</li>\n</ol>\n</blockquote>\n<p>Dch st ngha s l:</p>\n<blockquote>\n<ol>\n<li>Module cp cao khng nn ph thuc vo module cp thp hn. C hai nn ph thuc vo abstractions.</li>\n<li>Abstractions khng nn ph thuc vo details. Details nn ph thuc vo abstractions</li>\n</ol>\n</blockquote>\n<p>Quay tr li v d promotion ban u, gi s ta vit m ngun nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># app/checkout.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Checkout</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_bill</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    PromotionTypeA.promotion_type_a(cart)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeA</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">promotion_type_a</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Trong on m ngun trn y, method get_bill trong class Checkout ph thuc vo class PromotionTypeA. R rng l nh vy, cu hi l nu ta c PromotionTypeB, PromotionTypeC Th phi lm sao?</p>\n<p>Chng ta s phi vit 3 method get_bill ng vi PromotionTypeA, PromotionTypeB v PromotionTypeC hay sao?</p>\n<p> cng l mt cch, nhng  l cch  vi phm nguyn l DIP, khi m cc module ph thuc ln nhau.</p>\n<p> gii quyt vn  ny ta c th vit li m ngun nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># app/checkout.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Checkout</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_bill</span><span class=\"params\">(cart, PromotionType)</span></span></span><br><span class=\"line\">    PromotionType.get_promotion(cart)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeA</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">get_promotion</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># get_bill vi PromotionTypeA</span></span><br><span class=\"line\">Checkout.new.get_bill(cart, PromotionTypeA)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  vit thm PromotionTypeB, ta vit thm mt class PromotionTypeB v truyn PromotionTypeB vo get_bill method.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeB</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">get_promotion</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Checkout.new.get_bill(cart, PromotionTypeB)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p>Trn y l 1 ci nhn tng quan v h thng nguyn l SOLID ni ting, vic p dng nguyn l ny s khng chc gip m ngun bn thnh cng, nhng n s gim thiu ri ro hn l khi code bt chp, l thuyt ch l mt phn nh, nm l thuyt gip chng ta c ci nhn tng qut, trch rt li th th lm cho nguyn l ny c gi tr nm  kinh nghim s dng ca nh pht trin, khng phi lun lun tun th mi quy tc  l tt trong mi trng hp.</p>\n<p>Ngun tham kho:</p>\n<p>[1] <a href=\"https://en.wikipedia.org/wiki/SOLID\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/SOLID</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Cch y mt thi gian, ti c lm mt ng dng nh vi vn vn tng cng tm 500 dng code. Khi bt u ti  mng tng rng y ch l mt chng trnh n gin nn khng cn phn chia g cho tn cng sc mu m. V vy ti ch code trn vi file nht nh.</p>\n<p>Mt thi gian sau, ti cn m rng thm 1 vi chc nng na, rt t l lc ny ti  gn nh qun lun cc logic mnh  lm trong ng code c, cn rng c li tng dng, tng dng, v tn thi gian gp 3 gp 4 ln  h thng li cho d hiu hn. Mt bi hc khng phi cay ng lm cho ti, n ch ti hiu rng vic cu trc v cch tip cn khi lp trnh quan trng n th no.</p>\n<p>Phn ln thi gian mt ng dng trn tay dev l  maintain, vy nn vic ngy hm nay bn lm n ra sao nh hng rt ln n sau ny.  l mt phn l do m ti phi tm ng cch mng qua SOLID v nhng mu design pattern, nhng th vn v m ngy xa ti rt ght v thy tha thi, nhng gi y n nh mt bu tri chn l sng chi lo qua tim.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Dinh-nghia-va-muc-tieu-su-dung\"><a href=\"#1-Dinh-nghia-va-muc-tieu-su-dung\" class=\"headerlink\" title=\"1. nh ngha v mc tiu s dng\"></a>1. nh ngha v mc tiu s dng</h2><p><img src=\"/images/solid.png\" alt=\"hoa\"></p>\n<p>Trc tin, hy xem SOLID l vit tt ca nhng cm t g.</p>\n<p>:one: <strong>S</strong>ingle Responsibility Principle</p>\n<p>:two: <strong>O</strong>pen/Closed Principle</p>\n<p>:three: <strong>L</strong>iskov Substitution Principle</p>\n<p>:four: <strong>I</strong>nterface Segregation Principle</p>\n<p>:five: <strong>D</strong>ependency Inversion Principle</p>\n<p>Hn lm l vy nhng  d nh th ti gi chng ngn gn l: <strong>S</strong>ingle, <strong>O</strong>pen, <strong>L</strong>iskov, <strong>I</strong>nterface v <strong>D</strong>ependency.</p>\n<p>V mc tiu  ci nguyn l ny c mt trn ci i, u cng l xut pht t nhu cu lm t hn ca con ngi, vic code khng c h thng khin cc nh pht trin tn nhiu thi gian bo tr v d pht sinh li trong qu trnh s dng.<br> gim bt gnh nng ny cc nh pht trin  c ng li mt s khun kh, cch thc lp trnh m di gc nhn v kinh nghim ca nhiu ngi, cc khun kh cch thc  gip cho vic bo tr tr nn d dng hn, h thng t pht sinh li ngoi  mun hn. Mt trong s  l h thng cc nguyn tc trong SOLID.</p>\n<p>Gi s ti phi x l mt bi ton tnh promotion cho mt ng dng thng mi in t. y s l v d ta dng n trong cc phn pha di. Gi s cu trc d n hin ti nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br></pre></td></tr></table></figure>\n\n<p>Trong  signin cha m ngun thc hin chc nng ng nhp, signup cha m thc hin chc nng ng k v checkout cha m thc hin chc nng thanh ton.</p>\n<h2 id=\"2-Single-Responsibility-Principle\"><a href=\"#2-Single-Responsibility-Principle\" class=\"headerlink\" title=\"2. Single Responsibility Principle\"></a>2. <strong>S</strong>ingle Responsibility Principle</h2><p><img src=\"/images/srp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>Every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class.</p>\n</blockquote>\n<p>iu cn quan tm  y l single responsibility c th hiu l g? Ngha ca responsibility l trch nhim, vy trch nhim trong code l g?</p>\n<p>Ta c th hiu n ng ngha vi chc nng hay khng? C gi s nh ta c th hiu n l chc nng vy khi  th nguyn l ny c th pht biu li thnh nh sau:</p>\n<blockquote>\n<p>Mi class nn ch mang mt chc nng nht nh, v chc nng  phi c ng gi trong class ny.</p>\n</blockquote>\n<p>By gi th  d hiu hn nhiu, quay tr v v d, chng ta cn vit mt chc nng tnh promotion. Ta c th  vit chc nng ny vo u?</p>\n<p>Cu tr li n gin nht l chng ta vit chc nng ny lun vo file checkout.rb, khi thc hin chc nng thanh ton th s dng lun cc method tnh promotion trong . Mi chuyn tht n gin phi khng? iu ny c vi phm nguyn tc SRP khng?</p>\n<p>Nu ti ni l khng vi phm? Din gii ca ti nh sau: Trch nhim ca ci module/class Checkout l thanh ton nhng mt hng bn  b vo cart, vy promotion cng ch mt step trong qu trnh thanh ton, nn nu ti vit code promotion trong module/class Checkout th ti vi phm nguyn tc SRP ch no?  Checkout vn ang lm ng v duy nht mt trch nhim  l gip thanh ton n hng v promotion ch l phn ph tr cho qu trnh  hay ni cch khc promotion ch l mt bc trong nhiu bc ca qu trnh thanh ton.</p>\n<p>Vy ti c sai khi ni vy khng? Bn c th chng minh l ti sai nguyn l SRP c hay khng?</p>\n<ol>\n<li><p>Ti nghe nhiu ngi ni y l nguyn tc d nht trong SOLID, theo ti n ch l nguyn tc m nh ngha d hc thuc nht m thi.</p>\n</li>\n<li><p>Responsibility th hy hiu n l responsibility (hay hiu n l ng ng ngha l trch nhim). Khng nh ng responsibility thnh chc nng nh trn.</p>\n</li>\n<li><p>Ni dung nguyn l ch c tnh tng i, n ph thuc hon ton vo ci m bn xem l mt responsibility.</p>\n</li>\n</ol>\n<p> nh gi u, ci g l mt responsibility th c l iu kin cn l phi c  kinh nghim. Tr li v d, ti c th coi promotion l mt responsibility ring r vi chc nng thanh ton. Khi  t chc code ca ti nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br><span class=\"line\">  - promotion.rb</span><br></pre></td></tr></table></figure>\n\n<p>Nh ny  phi l cch tt nht? Cu tr li l tu ng iu hon cnh, gi s nu chc nng promotion c nhiu rule khc nhau th vic b tt c function tnh promotion vo 1 file promotion.rb c v khng phi l mt cch hay. Khi  ta t chc li nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br><span class=\"line\">  - promotion</span><br><span class=\"line\">    - promotion_type_a.rb</span><br><span class=\"line\">    - promotion_type_b.rb</span><br><span class=\"line\">    - promotion_type_c.rb</span><br></pre></td></tr></table></figure>\n\n<p>Cch t chc ny  l tt nht hay cha? cu tr li l cha chc, mi th li ph thuc vo ng cnh.<br>Nguyn l SRP c th sai hay ng trong mt s trng hp l rt mp m, tu theo ci m nh pht trin nh ngha cho responsibility m h xy dng.</p>\n<p>Note: Nhng cui cng nguyn l SRP cng ch c mt mc ch duy nht  cu trc d n d sa i v bo tr, v vy trong tng tnh hung s c nhng cch khc nhau  phn chia t chc m ngun, da vo chc nng, da vo yu cu khch hng, da vo tim nng pht trin d n</p>\n<h2 id=\"3-Open-Closed-Principle\"><a href=\"#3-Open-Closed-Principle\" class=\"headerlink\" title=\"3. Open/Closed Principle\"></a>3. <strong>O</strong>pen/Closed Principle</h2><p><img src=\"/images/ocp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>One software entity (class/module) must be open for extension but closed for modification.</p>\n</blockquote>\n<p>Hiu n gin:</p>\n<blockquote>\n<p>Mt class/module cn phi c th m rng, nhng khng/khng nn sa i n.</p>\n</blockquote>\n<p>V sao nguyn l ny li yu cu nh vy? vic ti mun m rng hay ti sa i mt ci class th c nh hng g u m cng nh?</p>\n<p>ng l nh vy, trong phn ln qu trnh pht trin nhng ng dng c nhn n gin th vic chng ta c thm, xo, sa hay m rng mt class/module a phn u khng mang li hu qu g ngoi  mun.</p>\n<p>Nhng ng cnh m nguyn l ny hng ti l nhng ng dng thc s trong cuc sng,   nhng ng dng ny s ln, ri rm v c business khng h n gin. Mt im na l d n  khi ti tay bn  c th tri qua 5, 7 ln i team pht trin v nhng g bn thy l thnh qu ca c mt qu trnh pht trin tnh nng v maintain trong n v tnh bng nm.</p>\n<p>Liu bn c nm ht c flow hot ng ca tng on m, tng file tng class hay khng? Nht nh l khng ri.</p>\n<p> chnh l l do m nguyn l OCP ra i, khi h thng phc tp v bn khng nm c ht tt c nhng g s xy ra sau khi bn thay i m ngun ti mt class/module. Hy ng thay i,  trnh lm nh hng n mt phn logic tim tng no . Thay vo  hy m rng class/module , m rng  b sung tnh nng bn cn m cn gip khng nh hng n nhng phn code c khng sai lch v logic lun l (V n c th vn ang s dng chc nng c, liu bn c cover c ht  sa i tt c cc trng hp c th xy ra hay khng?).</p>\n<blockquote>\n<p>V vy hy u tin m rng mt class/module khi cn pht trin thm hay thay i tnh nng, hn ch v hy tht cn thn khi cn sa i m ngun c sn (chnh l sa i class/module).</p>\n</blockquote>\n<p>Mc tiu ca nguyn l l vy, rt d hiu, hy cng tho lun v mt v d trc khi sang phn tip theo:</p>\n<p>Li quay tr li v d v bi ton promotion, gi s ti l chn cu trc chng trnh nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br><span class=\"line\">  - promotion.rb</span><br></pre></td></tr></table></figure>\n\n<p>Nh  trnh by  trn, cu trc nh ny v l thuyt th cng ch ai bo l ti vi phm nguyn tc s 1 SRP c. Gi s ni dung ca file promotion.rb nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Promotion</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion_type_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># implement rule promotion type a</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion_type_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># implement rule promotion type b</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy by gi khi ti mun thm mt rule tnh promotion mi, th ti s phi sa i file promotion.rb ny, v nguyn tc n  vi phm nguyn l s 2 OCP (m  m rng ch khng phi  sa i).</p>\n<p> khc phc ta c th cu trc li m ngun nh sau:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- app</span><br><span class=\"line\">  - signin.rb</span><br><span class=\"line\">  - signup.rb</span><br><span class=\"line\">  - checkout.rb</span><br><span class=\"line\">  - promotion</span><br><span class=\"line\">    - promotion.rb</span><br><span class=\"line\">    - promotion_type_a.rb</span><br><span class=\"line\">    - promotion_type_b.rb</span><br><span class=\"line\">    - promotion_type_c.rb</span><br></pre></td></tr></table></figure>\n\n<p>V khi ny, khi ti cn thm mi 1 rule promotion, ti s to mt file mi trong th mc promotion, vi ni dung k tha t class Promotion.</p>\n<p>V d b sung thm rule promotion_type_x.rb vi ni dung:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeX</span> &lt; Promotion</span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Liskov-Substitution-Principle\"><a href=\"#4-Liskov-Substitution-Principle\" class=\"headerlink\" title=\"4. Liskov Substitution Principle\"></a>4. <strong>L</strong>iskov Substitution Principle</h2><p><img src=\"/images/lsp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).</p>\n</blockquote>\n<p>Hiu n gin l:</p>\n<blockquote>\n<p>Bn c class A l con ca class B, th instance ca class A phi thay th c cho instance ca class B trong m ngun m khng gy ra sai xt no (khng li v khng sai ng ngha).</p>\n</blockquote>\n<p>Mt v d n gin nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Animal say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Cat say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>on m trn l mt on m hp l vi nguyn l Liskov v:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">temp = Animal.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Animal say hello\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = Cat.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v vn l: \"Animal say hello\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh bn thy, kt qu tr v khng thay i khi ta dng instance ca class Cat thay cho instance class cha ca n l Animal, v vy l nguyn l Liskov c bo ton tnh ng n ca n.</p>\n<p>Hy th mt on m ngun khc nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Animal say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Cat say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l on m vi phm nguyn tc ca Liskov, khi ny ta c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">temp = Animal.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Animal say hello\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = Cat.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Cat say hello\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Ta c th thy, instance ca class Cat khi gi ti method animal_hello  khng cn tr v kt qu tng t nh mt instance Animal na ri, v l do  class Cat, class ny  override li phng thc animal_hello, v t  dn ti vi phm nguyn tc Liskov.</p>\n<h2 id=\"5-Interface-Segregation-Principle\"><a href=\"#5-Interface-Segregation-Principle\" class=\"headerlink\" title=\"5. Interface Segregation Principle\"></a>5. <strong>I</strong>nterface Segregation Principle</h2><p><img src=\"/images/isp.png\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>No client should be forced to depend on methods it does not use.</p>\n</blockquote>\n<p>Hiu n gin l:</p>\n<blockquote>\n<p>Nu bn l mt i tng no  trong m ngun, hy m bo l bn phi/ch lm nhng cng vic m bn phi/c th lm. Khng trao cho bn nhng kh nng m bn khng cn.</p>\n</blockquote>\n<p>Th mt v d n gin, bn l mt hc sinh c giao nhim v trc nht lp, c gio bn phi m bo rng bn ch c trao cha kho m ca phng hc ca bn, ch khng trao cho bn nhng cha kho khc (nh cha kho cc lp hc khc, phng tin hc, phng gio vin), y l nhng cng vic ca nhng c nhn khc.</p>\n<p>Nu bn c trao nhng cng vic ca ngi khc, c th bn s to ra nhng sai lm khng th sa i c. V vy hy lm ng cng vic ca mnh.</p>\n<p>Hy bt u vi mt v d:</p>\n<p>Ta c mt class Animal.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class Animal bn trn include module di y.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Mi chuyn n ch? Rt n, 3 method hin c trong module AnimalHelper l 3 method h tr cho class Animal.</p>\n<p>Vy by gi ti c thm mt class na nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class ny cn mt phng thc support tn l <code>yellow_cat_helper</code>, ti s vit thm method ny vo module AnimalHelper v include module AnimalHelper vo class YellowCat vy l ng v  yu cu. Khi ny module AnimalHelper v class YellowCat s tr thnh nh sau:</p>\n<p>Class YellowCat</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Module AnimalHelper</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># add new method for YellowCat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat_helper</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Mi chuyn gi vn n ch? Khng, by gi th khng n na ri n  vi phm nguyn tc SOLID th 4, ch I m chng ta ang xt.</p>\n<p>V sao?</p>\n<p>V class Animal u c cn method <code>yellow_cat_helper</code>, cn class YellowCat u c cn 3 method <code>animal_helper_a</code>, <code>animal_helper_b</code>, <code>animal_helper_c</code> ny u?</p>\n<p>Vy m chng vn c th s dng nhng method m chng vn khng cn, v l do ta vit chung tt c method vo mt module v include module vo tng class.</p>\n<p>Y nh v d bn trn: Bn cn trc nht lp 1A thi m, c gio bn a cho bn trm cha kho ca c trng lm g? Cm th nng, m nh u bn <del>tt mt</del> nghch di th hu qu khn lng.</p>\n<p>Vy  khng vi phm nguyn tc ny ta c th sa li m ngun nh sau:</p>\n<p>Class Animal</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Module Animal</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class YellowCat</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> YellowCatHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>V gi ta to mt module mi  YellowCat include</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">YellowCatHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat_helper</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Ok, vy l look good ri :smile: Lc ny class Animal ch c include nhng method m n cn v class YellowCat cng vy.</p>\n<h2 id=\"6-Dependency-Inversion-Principle\"><a href=\"#6-Dependency-Inversion-Principle\" class=\"headerlink\" title=\"6. Dependency Inversion Principle\"></a>6. <strong>D</strong>ependency Inversion Principle</h2><p><img src=\"/images/dip.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<ol>\n<li>High-level modules should not depend on low-level modules. Both should depend on abstractions.</li>\n<li>Abstractions should not depend upon details. Details should depend upon abstractions.</li>\n</ol>\n</blockquote>\n<p>Dch st ngha s l:</p>\n<blockquote>\n<ol>\n<li>Module cp cao khng nn ph thuc vo module cp thp hn. C hai nn ph thuc vo abstractions.</li>\n<li>Abstractions khng nn ph thuc vo details. Details nn ph thuc vo abstractions</li>\n</ol>\n</blockquote>\n<p>Quay tr li v d promotion ban u, gi s ta vit m ngun nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># app/checkout.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Checkout</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_bill</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    PromotionTypeA.promotion_type_a(cart)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeA</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">promotion_type_a</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Trong on m ngun trn y, method get_bill trong class Checkout ph thuc vo class PromotionTypeA. R rng l nh vy, cu hi l nu ta c PromotionTypeB, PromotionTypeC Th phi lm sao?</p>\n<p>Chng ta s phi vit 3 method get_bill ng vi PromotionTypeA, PromotionTypeB v PromotionTypeC hay sao?</p>\n<p> cng l mt cch, nhng  l cch  vi phm nguyn l DIP, khi m cc module ph thuc ln nhau.</p>\n<p> gii quyt vn  ny ta c th vit li m ngun nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># app/checkout.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Checkout</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_bill</span><span class=\"params\">(cart, PromotionType)</span></span></span><br><span class=\"line\">    PromotionType.get_promotion(cart)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeA</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">get_promotion</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># get_bill vi PromotionTypeA</span></span><br><span class=\"line\">Checkout.new.get_bill(cart, PromotionTypeA)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  vit thm PromotionTypeB, ta vit thm mt class PromotionTypeB v truyn PromotionTypeB vo get_bill method.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeB</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">get_promotion</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Checkout.new.get_bill(cart, PromotionTypeB)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p>Trn y l 1 ci nhn tng quan v h thng nguyn l SOLID ni ting, vic p dng nguyn l ny s khng chc gip m ngun bn thnh cng, nhng n s gim thiu ri ro hn l khi code bt chp, l thuyt ch l mt phn nh, nm l thuyt gip chng ta c ci nhn tng qut, trch rt li th th lm cho nguyn l ny c gi tr nm  kinh nghim s dng ca nh pht trin, khng phi lun lun tun th mi quy tc  l tt trong mi trng hp.</p>\n<p>Ngun tham kho:</p>\n<p>[1] <a href=\"https://en.wikipedia.org/wiki/SOLID\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/SOLID</a></p>\n"},{"title":"Tn Cng SQL Injection","date":"2019-06-07T17:00:00.000Z","draft":false,"_content":"\n# t vn \n\nTrong project ca bn,  bao gi bn s dng cu lnh c dng nh:\n\n```ruby\n  Product.where(\"product_name = 'Meo con di lon ton' \")\n```\n\nNu c, th bn  v tnh to mt l hng v an ton cho website ca mnh. Hy cng tm hiu v sao li nh vy.\n\n# Lun bn\n\n# 1. Tm hiu v Sql Injection\n\nQuay li v d bn trn, ni dung cu lnh ny nhm ly ra sn phm c tn l `Meo con di lon ton`. Vy c g sai nh?\n\n ni r hn, th cu lnh ny l mt cu lnh c support bi 1 th vin ORM mc nh trong rails tn l ActiveRecord. N s c phin dch thnh m sql nh sau:\n\n```sql\n  SELECT  \"products\".* FROM \"products\" WHERE (product_name = 'Meo con di lon ton')\n```\n\ny vn l mt cu lnh quen thuc, v nhn qua th khng thy g sai tri c.\n\nFlow hot ng ca website ca ti bnh yn nh vy m ta.\n\n1. Ngi dng submit ln server product_name.\n\n2. Code x l  server s ly product_name ngi dng truyn ln v thc hin truy vn nh trn.\n\n3. Tr v kt qu cho ngi dng.\n\nVy c g m khng n?\n\nVi nhng ngi dng thng thng th. ng, m ngun ca chng ta hon ton n. Nhng nu bn l mt ng ch giu c ca mt website ni ting, v c nhiu k ght bn v bn giu hoc nhn mt bn thy ght v mun tm cch ph hoi website bn th sao?\n\n**Vy l thay v gi mt product_name thng thng nh \"iphone x\", \"gh tnh yu\"...Th h li gi mt product_name c dng nh  `chinh' or '' = '`**\n\nLc ny truy vn ca chng ta s tr thnh:\n\n```ruby\n  Product.where(\"product_name = 'chinh' OR ''=''\")\n```\n\nChuyn sang dng Sql:\n\n```sql\n  SELECT  \"products\".* FROM \"products\" WHERE (product_name = 'chinh' or '' = '')\n```\n\nV iu kin trong where lun tr v true bt k product_name c bng 'xxx' hay khng (v '' th lun lun bng '' :smile:). Nn cu truy vn ny s tr v ton b bng products.\n\nV nh vy d liu website ca bn  b l trc nhng k khng ly g lm tt p.\n\nTrn y ch l mt v d s si, trong thc t d liu ca bn s quan trng hn nhiu l ci products information nh trn. C th l thng tin lin lc, a ch nh, thng tin ti khon ngn hng...\n\n# 2. Cch phng trnh Sql Injection trong rails.\n\nC th thy khi  query dng string nh trn th rt d b khai thc, v ActiveRecord s khng th validate gi tr input m ngi dng nhp vo c hp l hay khng. Vy cch tt nht  chng li Sql injection chnh l s dng query theo params thay v s dng chui nh trn.\n\nThay v vit:\n\n```ruby\n  Product.where(\"product_name  = 'Meo con di lon ton'\")\n```\n\nTa c th vit di dng params query nh sau:\n\n```ruby\n  Product.where(product_name: 'Meo con di lon ton')\n  # hoc\n  Product.where('product_name = ?', ['Meo con di lon ton'])\n  # hoc\n  Product.where('product_name = :product_name', {:product_name => 'Meo con di lon ton'})\n```\n\nVi cc cch thay th, gi tr ngi dng truyn vo s c m bo hp l trc khi c d liu tr v...\n\n\n# Kt lun.\n\ny l mt bi s si, ngn gn v khi qut cho ngi mi tm hiu v sql injection. Khng phi bi vit chuyn su dnh cho ngi c nhiu kinh nghim. Hy  li tho lun nu bn c thc mc.\n","source":"_posts/2019-06-08-tan-cong-sql-injection-va-cach-phong-chong-trong-rails.md","raw":"---\ntitle: \"Tn Cng SQL Injection\"\ndate: 2019-06-08\ndraft: false\ntags: [\"SECURE\", \"RAILS\"]\ncategories: [\"RAILS\"]\n\n---\n\n# t vn \n\nTrong project ca bn,  bao gi bn s dng cu lnh c dng nh:\n\n```ruby\n  Product.where(\"product_name = 'Meo con di lon ton' \")\n```\n\nNu c, th bn  v tnh to mt l hng v an ton cho website ca mnh. Hy cng tm hiu v sao li nh vy.\n\n# Lun bn\n\n# 1. Tm hiu v Sql Injection\n\nQuay li v d bn trn, ni dung cu lnh ny nhm ly ra sn phm c tn l `Meo con di lon ton`. Vy c g sai nh?\n\n ni r hn, th cu lnh ny l mt cu lnh c support bi 1 th vin ORM mc nh trong rails tn l ActiveRecord. N s c phin dch thnh m sql nh sau:\n\n```sql\n  SELECT  \"products\".* FROM \"products\" WHERE (product_name = 'Meo con di lon ton')\n```\n\ny vn l mt cu lnh quen thuc, v nhn qua th khng thy g sai tri c.\n\nFlow hot ng ca website ca ti bnh yn nh vy m ta.\n\n1. Ngi dng submit ln server product_name.\n\n2. Code x l  server s ly product_name ngi dng truyn ln v thc hin truy vn nh trn.\n\n3. Tr v kt qu cho ngi dng.\n\nVy c g m khng n?\n\nVi nhng ngi dng thng thng th. ng, m ngun ca chng ta hon ton n. Nhng nu bn l mt ng ch giu c ca mt website ni ting, v c nhiu k ght bn v bn giu hoc nhn mt bn thy ght v mun tm cch ph hoi website bn th sao?\n\n**Vy l thay v gi mt product_name thng thng nh \"iphone x\", \"gh tnh yu\"...Th h li gi mt product_name c dng nh  `chinh' or '' = '`**\n\nLc ny truy vn ca chng ta s tr thnh:\n\n```ruby\n  Product.where(\"product_name = 'chinh' OR ''=''\")\n```\n\nChuyn sang dng Sql:\n\n```sql\n  SELECT  \"products\".* FROM \"products\" WHERE (product_name = 'chinh' or '' = '')\n```\n\nV iu kin trong where lun tr v true bt k product_name c bng 'xxx' hay khng (v '' th lun lun bng '' :smile:). Nn cu truy vn ny s tr v ton b bng products.\n\nV nh vy d liu website ca bn  b l trc nhng k khng ly g lm tt p.\n\nTrn y ch l mt v d s si, trong thc t d liu ca bn s quan trng hn nhiu l ci products information nh trn. C th l thng tin lin lc, a ch nh, thng tin ti khon ngn hng...\n\n# 2. Cch phng trnh Sql Injection trong rails.\n\nC th thy khi  query dng string nh trn th rt d b khai thc, v ActiveRecord s khng th validate gi tr input m ngi dng nhp vo c hp l hay khng. Vy cch tt nht  chng li Sql injection chnh l s dng query theo params thay v s dng chui nh trn.\n\nThay v vit:\n\n```ruby\n  Product.where(\"product_name  = 'Meo con di lon ton'\")\n```\n\nTa c th vit di dng params query nh sau:\n\n```ruby\n  Product.where(product_name: 'Meo con di lon ton')\n  # hoc\n  Product.where('product_name = ?', ['Meo con di lon ton'])\n  # hoc\n  Product.where('product_name = :product_name', {:product_name => 'Meo con di lon ton'})\n```\n\nVi cc cch thay th, gi tr ngi dng truyn vo s c m bo hp l trc khi c d liu tr v...\n\n\n# Kt lun.\n\ny l mt bi s si, ngn gn v khi qut cho ngi mi tm hiu v sql injection. Khng phi bi vit chuyn su dnh cho ngi c nhiu kinh nghim. Hy  li tho lun nu bn c thc mc.\n","slug":"2019-06-08-tan-cong-sql-injection-va-cach-phong-chong-trong-rails","published":1,"updated":"2019-12-06T15:38:25.177Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe33001t8erserfmhzj8","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Trong project ca bn,  bao gi bn s dng cu lnh c dng nh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name = 'Meo con di lon ton' \"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Nu c, th bn  v tnh to mt l hng v an ton cho website ca mnh. Hy cng tm hiu v sao li nh vy.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Tim-hieu-ve-Sql-Injection\"><a href=\"#1-Tim-hieu-ve-Sql-Injection\" class=\"headerlink\" title=\"1. Tm hiu v Sql Injection\"></a>1. Tm hiu v Sql Injection</h1><p>Quay li v d bn trn, ni dung cu lnh ny nhm ly ra sn phm c tn l <code>Meo con di lon ton</code>. Vy c g sai nh?</p>\n<p> ni r hn, th cu lnh ny l mt cu lnh c support bi 1 th vin ORM mc nh trong rails tn l ActiveRecord. N s c phin dch thnh m sql nh sau:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"string\">\"products\"</span>.* <span class=\"keyword\">FROM</span> <span class=\"string\">\"products\"</span> <span class=\"keyword\">WHERE</span> (product_name = <span class=\"string\">'Meo con di lon ton'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>y vn l mt cu lnh quen thuc, v nhn qua th khng thy g sai tri c.</p>\n<p>Flow hot ng ca website ca ti bnh yn nh vy m ta.</p>\n<ol>\n<li><p>Ngi dng submit ln server product_name.</p>\n</li>\n<li><p>Code x l  server s ly product_name ngi dng truyn ln v thc hin truy vn nh trn.</p>\n</li>\n<li><p>Tr v kt qu cho ngi dng.</p>\n</li>\n</ol>\n<p>Vy c g m khng n?</p>\n<p>Vi nhng ngi dng thng thng th. ng, m ngun ca chng ta hon ton n. Nhng nu bn l mt ng ch giu c ca mt website ni ting, v c nhiu k ght bn v bn giu hoc nhn mt bn thy ght v mun tm cch ph hoi website bn th sao?</p>\n<p><strong>Vy l thay v gi mt product_name thng thng nh iphone x, gh tnh yuTh h li gi mt product_name c dng nh  <code>chinh&#39; or &#39;&#39; = &#39;</code></strong></p>\n<p>Lc ny truy vn ca chng ta s tr thnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name = 'chinh' OR ''=''\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Chuyn sang dng Sql:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"string\">\"products\"</span>.* <span class=\"keyword\">FROM</span> <span class=\"string\">\"products\"</span> <span class=\"keyword\">WHERE</span> (product_name = <span class=\"string\">'chinh'</span> <span class=\"keyword\">or</span> <span class=\"string\">''</span> = <span class=\"string\">''</span>)</span><br></pre></td></tr></table></figure>\n\n<p>V iu kin trong where lun tr v true bt k product_name c bng xxx hay khng (v  th lun lun bng  :smile:). Nn cu truy vn ny s tr v ton b bng products.</p>\n<p>V nh vy d liu website ca bn  b l trc nhng k khng ly g lm tt p.</p>\n<p>Trn y ch l mt v d s si, trong thc t d liu ca bn s quan trng hn nhiu l ci products information nh trn. C th l thng tin lin lc, a ch nh, thng tin ti khon ngn hng</p>\n<h1 id=\"2-Cach-phong-tranh-Sql-Injection-trong-rails\"><a href=\"#2-Cach-phong-tranh-Sql-Injection-trong-rails\" class=\"headerlink\" title=\"2. Cch phng trnh Sql Injection trong rails.\"></a>2. Cch phng trnh Sql Injection trong rails.</h1><p>C th thy khi  query dng string nh trn th rt d b khai thc, v ActiveRecord s khng th validate gi tr input m ngi dng nhp vo c hp l hay khng. Vy cch tt nht  chng li Sql injection chnh l s dng query theo params thay v s dng chui nh trn.</p>\n<p>Thay v vit:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name  = 'Meo con di lon ton'\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Ta c th vit di dng params query nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"symbol\">product_name:</span> <span class=\"string\">'Meo con di lon ton'</span>)</span><br><span class=\"line\"><span class=\"comment\"># hoc</span></span><br><span class=\"line\">Product.where(<span class=\"string\">'product_name = ?'</span>, [<span class=\"string\">'Meo con di lon ton'</span>])</span><br><span class=\"line\"><span class=\"comment\"># hoc</span></span><br><span class=\"line\">Product.where(<span class=\"string\">'product_name = :product_name'</span>, &#123;<span class=\"symbol\">:product_name</span> =&gt; <span class=\"string\">'Meo con di lon ton'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Vi cc cch thay th, gi tr ngi dng truyn vo s c m bo hp l trc khi c d liu tr v</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun.\"></a>Kt lun.</h1><p>y l mt bi s si, ngn gn v khi qut cho ngi mi tm hiu v sql injection. Khng phi bi vit chuyn su dnh cho ngi c nhiu kinh nghim. Hy  li tho lun nu bn c thc mc.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Trong project ca bn,  bao gi bn s dng cu lnh c dng nh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name = 'Meo con di lon ton' \"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Nu c, th bn  v tnh to mt l hng v an ton cho website ca mnh. Hy cng tm hiu v sao li nh vy.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Tim-hieu-ve-Sql-Injection\"><a href=\"#1-Tim-hieu-ve-Sql-Injection\" class=\"headerlink\" title=\"1. Tm hiu v Sql Injection\"></a>1. Tm hiu v Sql Injection</h1><p>Quay li v d bn trn, ni dung cu lnh ny nhm ly ra sn phm c tn l <code>Meo con di lon ton</code>. Vy c g sai nh?</p>\n<p> ni r hn, th cu lnh ny l mt cu lnh c support bi 1 th vin ORM mc nh trong rails tn l ActiveRecord. N s c phin dch thnh m sql nh sau:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"string\">\"products\"</span>.* <span class=\"keyword\">FROM</span> <span class=\"string\">\"products\"</span> <span class=\"keyword\">WHERE</span> (product_name = <span class=\"string\">'Meo con di lon ton'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>y vn l mt cu lnh quen thuc, v nhn qua th khng thy g sai tri c.</p>\n<p>Flow hot ng ca website ca ti bnh yn nh vy m ta.</p>\n<ol>\n<li><p>Ngi dng submit ln server product_name.</p>\n</li>\n<li><p>Code x l  server s ly product_name ngi dng truyn ln v thc hin truy vn nh trn.</p>\n</li>\n<li><p>Tr v kt qu cho ngi dng.</p>\n</li>\n</ol>\n<p>Vy c g m khng n?</p>\n<p>Vi nhng ngi dng thng thng th. ng, m ngun ca chng ta hon ton n. Nhng nu bn l mt ng ch giu c ca mt website ni ting, v c nhiu k ght bn v bn giu hoc nhn mt bn thy ght v mun tm cch ph hoi website bn th sao?</p>\n<p><strong>Vy l thay v gi mt product_name thng thng nh iphone x, gh tnh yuTh h li gi mt product_name c dng nh  <code>chinh&#39; or &#39;&#39; = &#39;</code></strong></p>\n<p>Lc ny truy vn ca chng ta s tr thnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name = 'chinh' OR ''=''\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Chuyn sang dng Sql:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"string\">\"products\"</span>.* <span class=\"keyword\">FROM</span> <span class=\"string\">\"products\"</span> <span class=\"keyword\">WHERE</span> (product_name = <span class=\"string\">'chinh'</span> <span class=\"keyword\">or</span> <span class=\"string\">''</span> = <span class=\"string\">''</span>)</span><br></pre></td></tr></table></figure>\n\n<p>V iu kin trong where lun tr v true bt k product_name c bng xxx hay khng (v  th lun lun bng  :smile:). Nn cu truy vn ny s tr v ton b bng products.</p>\n<p>V nh vy d liu website ca bn  b l trc nhng k khng ly g lm tt p.</p>\n<p>Trn y ch l mt v d s si, trong thc t d liu ca bn s quan trng hn nhiu l ci products information nh trn. C th l thng tin lin lc, a ch nh, thng tin ti khon ngn hng</p>\n<h1 id=\"2-Cach-phong-tranh-Sql-Injection-trong-rails\"><a href=\"#2-Cach-phong-tranh-Sql-Injection-trong-rails\" class=\"headerlink\" title=\"2. Cch phng trnh Sql Injection trong rails.\"></a>2. Cch phng trnh Sql Injection trong rails.</h1><p>C th thy khi  query dng string nh trn th rt d b khai thc, v ActiveRecord s khng th validate gi tr input m ngi dng nhp vo c hp l hay khng. Vy cch tt nht  chng li Sql injection chnh l s dng query theo params thay v s dng chui nh trn.</p>\n<p>Thay v vit:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name  = 'Meo con di lon ton'\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Ta c th vit di dng params query nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"symbol\">product_name:</span> <span class=\"string\">'Meo con di lon ton'</span>)</span><br><span class=\"line\"><span class=\"comment\"># hoc</span></span><br><span class=\"line\">Product.where(<span class=\"string\">'product_name = ?'</span>, [<span class=\"string\">'Meo con di lon ton'</span>])</span><br><span class=\"line\"><span class=\"comment\"># hoc</span></span><br><span class=\"line\">Product.where(<span class=\"string\">'product_name = :product_name'</span>, &#123;<span class=\"symbol\">:product_name</span> =&gt; <span class=\"string\">'Meo con di lon ton'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Vi cc cch thay th, gi tr ngi dng truyn vo s c m bo hp l trc khi c d liu tr v</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun.\"></a>Kt lun.</h1><p>y l mt bi s si, ngn gn v khi qut cho ngi mi tm hiu v sql injection. Khng phi bi vit chuyn su dnh cho ngi c nhiu kinh nghim. Hy  li tho lun nu bn c thc mc.</p>\n"},{"title":"So Snh Class Method V Scope","date":"2019-06-08T17:00:00.000Z","draft":false,"_content":"# t vn \n\nTrong mt thi gian rt lu, t khi mi hc n khi lm nhng ng dng u tin. Ti lun cho rng Scope v v Class Method hon ton ging nhau. V l do Scope xut hin l  gip m ngun ngn gn hn.\n\nNhng r rng y l mt suy ngh cha ng, di y l im cn ch  v 2 phng thc ny.\n\n# Lun bn\n\nTi c 1 scope:\n\n```ruby\nclass Product < ActiveRecord::Base\n  scope :is_active, -> { where is_active: true }\nend\n\n# Ly cc products c thuc tnh is_active l true.\n```\n\nTi c 1 class method:\n\n```ruby\nclass Product < ActiveRecord::Base\n  def self.is_active\n    where is_active: true\n  end\nend\n```\n\n2 method ny l hon ton tng ng nhau, kt qu tr v cng vy. By gi th 1 v d khc.\n\n```ruby\nclass Product < ActiveRecord::Base\n  # ly cc products ang active\n  scope :is_active, -> { where is_active: true }\n  # ly cc products c type bng type c truyn vo scope, v m bo type c truyn vo c gi tr\n  scope :by_type, -> type { where type: type if type.present? }\nend\n\n```\n\nVit v d trn di dng Class Method:\n\n```ruby\nclass Product < ActiveRecord::Base\n  # ly cc products ang active\n  def self.is_active\n    where is_active: true\n  end\n  # ly cc products c type bng type c truyn vo scope v m bo type truyn vo c gi tr\n  def self.by_type(type)\n    where type: type if type.present?\n  end\nend\n```\n\nTin hnh gi lin tip Scope:\n\n```ruby\nProduct.by_type(nil).is_active\n# truyn vo type khng hp l, nhng scope is_active vn work bnh thng\n```\n\nTin hnh gi lin tip Class Method:\n\n```ruby\nProduct.by_type(nil).is_active\n\n# Trn v mt error method is_active khng c nh ngha cho nil.\n```\n\na vy chuyn ny l sao? Ti sao Scope vn work bnh thng trong khi Class Method li bn v mt exception?\n\ny chnh l im khc bit quan trng ca Scopy v Class Method.\n\nScope lun lun tr v mt `ActiveRecord Relation`. Cn Class Method th sao? Nu bn khng cover trng hp **nil/blank** th n s vng v **nil/blank** nh vy khng th chy Class Method pha sau, v method  khng th chy **vi nil/blank**. :smile:\n\n# Kt lun\n\ny l mt kt lun s si c ti rt ra trong qu trnh lm vic. Nu c sai xt hy  li bnh lun di y.\n","source":"_posts/2019-06-09-luu-y-ngan-gon-ve-scope-va-class-method.md","raw":"---\ntitle: \"So Snh Class Method V Scope\"\ndate: 2019-06-09\ndraft: false\ntags: [\"RUBY\", \"RAILS\"]\ncategories: [\"RAILS\"]\n---\n# t vn \n\nTrong mt thi gian rt lu, t khi mi hc n khi lm nhng ng dng u tin. Ti lun cho rng Scope v v Class Method hon ton ging nhau. V l do Scope xut hin l  gip m ngun ngn gn hn.\n\nNhng r rng y l mt suy ngh cha ng, di y l im cn ch  v 2 phng thc ny.\n\n# Lun bn\n\nTi c 1 scope:\n\n```ruby\nclass Product < ActiveRecord::Base\n  scope :is_active, -> { where is_active: true }\nend\n\n# Ly cc products c thuc tnh is_active l true.\n```\n\nTi c 1 class method:\n\n```ruby\nclass Product < ActiveRecord::Base\n  def self.is_active\n    where is_active: true\n  end\nend\n```\n\n2 method ny l hon ton tng ng nhau, kt qu tr v cng vy. By gi th 1 v d khc.\n\n```ruby\nclass Product < ActiveRecord::Base\n  # ly cc products ang active\n  scope :is_active, -> { where is_active: true }\n  # ly cc products c type bng type c truyn vo scope, v m bo type c truyn vo c gi tr\n  scope :by_type, -> type { where type: type if type.present? }\nend\n\n```\n\nVit v d trn di dng Class Method:\n\n```ruby\nclass Product < ActiveRecord::Base\n  # ly cc products ang active\n  def self.is_active\n    where is_active: true\n  end\n  # ly cc products c type bng type c truyn vo scope v m bo type truyn vo c gi tr\n  def self.by_type(type)\n    where type: type if type.present?\n  end\nend\n```\n\nTin hnh gi lin tip Scope:\n\n```ruby\nProduct.by_type(nil).is_active\n# truyn vo type khng hp l, nhng scope is_active vn work bnh thng\n```\n\nTin hnh gi lin tip Class Method:\n\n```ruby\nProduct.by_type(nil).is_active\n\n# Trn v mt error method is_active khng c nh ngha cho nil.\n```\n\na vy chuyn ny l sao? Ti sao Scope vn work bnh thng trong khi Class Method li bn v mt exception?\n\ny chnh l im khc bit quan trng ca Scopy v Class Method.\n\nScope lun lun tr v mt `ActiveRecord Relation`. Cn Class Method th sao? Nu bn khng cover trng hp **nil/blank** th n s vng v **nil/blank** nh vy khng th chy Class Method pha sau, v method  khng th chy **vi nil/blank**. :smile:\n\n# Kt lun\n\ny l mt kt lun s si c ti rt ra trong qu trnh lm vic. Nu c sai xt hy  li bnh lun di y.\n","slug":"2019-06-09-luu-y-ngan-gon-ve-scope-va-class-method","published":1,"updated":"2019-12-06T15:38:42.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe36001y8ersdiecbiip","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Trong mt thi gian rt lu, t khi mi hc n khi lm nhng ng dng u tin. Ti lun cho rng Scope v v Class Method hon ton ging nhau. V l do Scope xut hin l  gip m ngun ngn gn hn.</p>\n<p>Nhng r rng y l mt suy ngh cha ng, di y l im cn ch  v 2 phng thc ny.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p>Ti c 1 scope:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:is_active</span>, -&gt; &#123; where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Ly cc products c thuc tnh is_active l true.</span></span><br></pre></td></tr></table></figure>\n\n<p>Ti c 1 class method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">is_active</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>2 method ny l hon ton tng ng nhau, kt qu tr v cng vy. By gi th 1 v d khc.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products ang active</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:is_active</span>, -&gt; &#123; where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">  <span class=\"comment\"># ly cc products c type bng type c truyn vo scope, v m bo type c truyn vo c gi tr</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:by_type</span>, -&gt; type &#123; where <span class=\"symbol\">type:</span> type <span class=\"keyword\">if</span> type.present? &#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vit v d trn di dng Class Method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products ang active</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">is_active</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products c type bng type c truyn vo scope v m bo type truyn vo c gi tr</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">by_type</span><span class=\"params\">(type)</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">type:</span> type <span class=\"keyword\">if</span> type.present?</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Tin hnh gi lin tip Scope:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.by_type(<span class=\"literal\">nil</span>).is_active</span><br><span class=\"line\"><span class=\"comment\"># truyn vo type khng hp l, nhng scope is_active vn work bnh thng</span></span><br></pre></td></tr></table></figure>\n\n<p>Tin hnh gi lin tip Class Method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.by_type(<span class=\"literal\">nil</span>).is_active</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Trn v mt error method is_active khng c nh ngha cho nil.</span></span><br></pre></td></tr></table></figure>\n\n<p>a vy chuyn ny l sao? Ti sao Scope vn work bnh thng trong khi Class Method li bn v mt exception?</p>\n<p>y chnh l im khc bit quan trng ca Scopy v Class Method.</p>\n<p>Scope lun lun tr v mt <code>ActiveRecord Relation</code>. Cn Class Method th sao? Nu bn khng cover trng hp <strong>nil/blank</strong> th n s vng v <strong>nil/blank</strong> nh vy khng th chy Class Method pha sau, v method  khng th chy <strong>vi nil/blank</strong>. :smile:</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>y l mt kt lun s si c ti rt ra trong qu trnh lm vic. Nu c sai xt hy  li bnh lun di y.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Trong mt thi gian rt lu, t khi mi hc n khi lm nhng ng dng u tin. Ti lun cho rng Scope v v Class Method hon ton ging nhau. V l do Scope xut hin l  gip m ngun ngn gn hn.</p>\n<p>Nhng r rng y l mt suy ngh cha ng, di y l im cn ch  v 2 phng thc ny.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p>Ti c 1 scope:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:is_active</span>, -&gt; &#123; where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Ly cc products c thuc tnh is_active l true.</span></span><br></pre></td></tr></table></figure>\n\n<p>Ti c 1 class method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">is_active</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>2 method ny l hon ton tng ng nhau, kt qu tr v cng vy. By gi th 1 v d khc.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products ang active</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:is_active</span>, -&gt; &#123; where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">  <span class=\"comment\"># ly cc products c type bng type c truyn vo scope, v m bo type c truyn vo c gi tr</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:by_type</span>, -&gt; type &#123; where <span class=\"symbol\">type:</span> type <span class=\"keyword\">if</span> type.present? &#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vit v d trn di dng Class Method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products ang active</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">is_active</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products c type bng type c truyn vo scope v m bo type truyn vo c gi tr</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">by_type</span><span class=\"params\">(type)</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">type:</span> type <span class=\"keyword\">if</span> type.present?</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Tin hnh gi lin tip Scope:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.by_type(<span class=\"literal\">nil</span>).is_active</span><br><span class=\"line\"><span class=\"comment\"># truyn vo type khng hp l, nhng scope is_active vn work bnh thng</span></span><br></pre></td></tr></table></figure>\n\n<p>Tin hnh gi lin tip Class Method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.by_type(<span class=\"literal\">nil</span>).is_active</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Trn v mt error method is_active khng c nh ngha cho nil.</span></span><br></pre></td></tr></table></figure>\n\n<p>a vy chuyn ny l sao? Ti sao Scope vn work bnh thng trong khi Class Method li bn v mt exception?</p>\n<p>y chnh l im khc bit quan trng ca Scopy v Class Method.</p>\n<p>Scope lun lun tr v mt <code>ActiveRecord Relation</code>. Cn Class Method th sao? Nu bn khng cover trng hp <strong>nil/blank</strong> th n s vng v <strong>nil/blank</strong> nh vy khng th chy Class Method pha sau, v method  khng th chy <strong>vi nil/blank</strong>. :smile:</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>y l mt kt lun s si c ti rt ra trong qu trnh lm vic. Nu c sai xt hy  li bnh lun di y.</p>\n"},{"title":"Exception Trong Rails","date":"2019-06-09T17:00:00.000Z","draft":false,"_content":"\n# t vn \n\nTi c mt s tnh hung din ra hng ngy v con mo ca ti. Nu n i ti cho n n, nu n i vs lung tung ti s dn dp chng.\n\nNhng bng mt ngy con mo stupid ca ti b \"ngi ngoi hnh tinh bt cc\", wtf?. y l mt tnh hung khng bnh thng v ti khng c mt `HNH NG THNG NHT` no  i ph vi 1 tnh hung nh vy, ti c th khc, c th bo cng an, nhng chc chn khng th c mt cch gii quyt trit . Trong lp trnh ta gi nhng tnh hung m logic lun l sai lch khng cn i theo logic bnh thng nh ny l mt exception.\n\nV d nh my tnh ca bn khng c thit k  thc hin php chia cho s 0. Vy khi bn bt n thc hin php chia cho s 0, n s ngh \"wtf is going on?\" v nh qung ra cho bn mt thng bo v vic bn  bt n lm mt vic m n khng c thit k  lm.\n\nTrong bi vit ny chng ta s tm hiu v exception trong ruby.\n\n# Lun bn\n\n# 1. Tm hiu v Exception\n\nu tin chng ta phi ghi nh rng khi mt exception c gi, chng trnh ca bn s ngng v on code pha sau khng th chy c na.\n\n1. Ti n trng n con mo.\n\n2. Ti em con mo i bn vo qun tiu h.\n\nNu  `bc 1`, thay v n thnh cng con mo, ti li dnh mt exception \"MeoMissing\" v l do n b ngi ngoi hnh tinh bt cc.\n\nKhi ny d nhin chng trnh s dng li, v ti lm g cn con mo  m em n i bn   `bc 2`.\n\nQuay v vi v d n gin l chia cho s 0:\n\n```ruby\n10/0\n# => ZeroDivisionError (divided by 0)\n```\n\n`ZeroDivisionError` l mt exception c ruby to ra  tr v khi bn c chia mt s cho s 0.\n\n```\n  if (chia ng hong)\n    thc hin php tnh.\n  else\n    if (chia cho s 0)\n      tr v exception ZeroDivisionError\n    end\n  end\n```\n\nFlow logic n gin v exception nh trn.\n\n# 2. Lm sao  ly v i tng Exception\n\nNh chng ta  bit, gn nh mi th trong ruby u l object(Ngoi tr method v block). Vy nn Exception cng l mt i tng.\n\nZeroDivisionError  trn l mt Class, vy khi bn thc hin mt php chia cho s 0, bn  ri vo trng hp m ZeroDivisionError qun l v n s tr v mt i tng ZeroDivisionError.\n\nVy tc l  2 ln chia cho s 0 khc nhau, n s tr v cho bn 2 object exception khc nhau ch l cng mt class ZeroDivisionError.\n\nVy cch no  bt c i tng ny? C php  thc hin vic ny s nh sau:\n\n```ruby\nbegin\n  meo = 10\n  meo/0\nrescue ZeroDivisionError => e\n  puts \"Exception Class: #{ e.class.name }\"\n  puts \"Exception Message: #{ e.message }\"\nend\n```\n\n`rescue` l t kho s gip bn ly c i tng exception tr v. Nh v d trn ti ly i tng exeption tr v (nu exception  l dng ZeroDivisionError) v truyn n vo bin `e`. T y `e` chnh l object exception nu exception  xy ra.\n\nTi c th dng e  xut ra cc thng tin m ti cn nh class name hay message thng bo li.\n\n# 3. Xy dng mt class Exception\n\nMt s tht hin nhin l nhng thit k c sn khng bao gi c th cover cho tt c cc trng hp c th xy ra trong thc tin. i lc bn mun thm mt exception  cover cho trng hp ca ring d n ca bn th sao?\n\nCu tr li m ti mi tm c kh th v v cng rt quen thuc.  l Exception cng c th c to ra nh mt class bnh thng. Hy  n k tha lp `StandardError` l c.\n\n```ruby\nclass MeoException < StandardError; end\n\n```\n\nVy l ta  c mt class exception ca ring mnh. Khi cn gi n exception ny th ta s gi s dng phng thc `raise`  gi mt i tng.\n\n```ruby\nraise MeoException.new(params_gi_do_ma_ban_muon)\n```\n\nVy trong class class `MeoException` ta s thit k nhng g? :smile: Ti cng cha tm hiu.\n\n# 4. Cc lp Exception c sn trong Ruby\n\n![hoa](/images/ruby-exception.jpg)\n\ny l s  v cc lp exception trong ruby, nu ta rescue mt exception X, X li c dm 3 exception con, th ch cn chng trnh ca bn pht sinh vn  v tr ra mt exception con no  th X c gi.\n\n# 5. Cch bt Exception hp l\n\n**Cch 1:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue Exception => e\n  # do something\nend\n```\n\ny l mt cch t v khi rescue vi Exception, lp cha ca tt c cc Exception khc th n cover qu nhiu trng hp cng tr ra exception, hy nh li  trn chng ta  ni mt khi Exception c tr v th chng trnh ca bn s dng li. Vy nn khng s dng cch ny.\n\n**Cch 2:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue StandardError => e\n  # do something\nend\n```\n\ny l cch lm tt hn, v ta ch cover cc li standard, t ra chng trnh ca bn s khng thi thong b shutdown m khng bit v sao nh cch u tin.\n\n**Cch 3:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue MeoBiBatCoc, MeoBiDauChan => e\n  # do something\nend\n```\n\ny l cch tt nht, ta goi trc tip n trng hp ngoi l m ta cn bt ly v x l.\n\n# Kt lun\n\nNu c phn hi hy  li bnh lun bn di bi vit.\n","source":"_posts/2019-06-10-xu-ly-ngoai-le-trong-rails.md","raw":"---\ntitle: \"Exception Trong Rails\"\ndate: 2019-06-10\ndraft: false\ntags: [\"RAILS\"]\ncategories: [\"RAILS\"]\n---\n\n# t vn \n\nTi c mt s tnh hung din ra hng ngy v con mo ca ti. Nu n i ti cho n n, nu n i vs lung tung ti s dn dp chng.\n\nNhng bng mt ngy con mo stupid ca ti b \"ngi ngoi hnh tinh bt cc\", wtf?. y l mt tnh hung khng bnh thng v ti khng c mt `HNH NG THNG NHT` no  i ph vi 1 tnh hung nh vy, ti c th khc, c th bo cng an, nhng chc chn khng th c mt cch gii quyt trit . Trong lp trnh ta gi nhng tnh hung m logic lun l sai lch khng cn i theo logic bnh thng nh ny l mt exception.\n\nV d nh my tnh ca bn khng c thit k  thc hin php chia cho s 0. Vy khi bn bt n thc hin php chia cho s 0, n s ngh \"wtf is going on?\" v nh qung ra cho bn mt thng bo v vic bn  bt n lm mt vic m n khng c thit k  lm.\n\nTrong bi vit ny chng ta s tm hiu v exception trong ruby.\n\n# Lun bn\n\n# 1. Tm hiu v Exception\n\nu tin chng ta phi ghi nh rng khi mt exception c gi, chng trnh ca bn s ngng v on code pha sau khng th chy c na.\n\n1. Ti n trng n con mo.\n\n2. Ti em con mo i bn vo qun tiu h.\n\nNu  `bc 1`, thay v n thnh cng con mo, ti li dnh mt exception \"MeoMissing\" v l do n b ngi ngoi hnh tinh bt cc.\n\nKhi ny d nhin chng trnh s dng li, v ti lm g cn con mo  m em n i bn   `bc 2`.\n\nQuay v vi v d n gin l chia cho s 0:\n\n```ruby\n10/0\n# => ZeroDivisionError (divided by 0)\n```\n\n`ZeroDivisionError` l mt exception c ruby to ra  tr v khi bn c chia mt s cho s 0.\n\n```\n  if (chia ng hong)\n    thc hin php tnh.\n  else\n    if (chia cho s 0)\n      tr v exception ZeroDivisionError\n    end\n  end\n```\n\nFlow logic n gin v exception nh trn.\n\n# 2. Lm sao  ly v i tng Exception\n\nNh chng ta  bit, gn nh mi th trong ruby u l object(Ngoi tr method v block). Vy nn Exception cng l mt i tng.\n\nZeroDivisionError  trn l mt Class, vy khi bn thc hin mt php chia cho s 0, bn  ri vo trng hp m ZeroDivisionError qun l v n s tr v mt i tng ZeroDivisionError.\n\nVy tc l  2 ln chia cho s 0 khc nhau, n s tr v cho bn 2 object exception khc nhau ch l cng mt class ZeroDivisionError.\n\nVy cch no  bt c i tng ny? C php  thc hin vic ny s nh sau:\n\n```ruby\nbegin\n  meo = 10\n  meo/0\nrescue ZeroDivisionError => e\n  puts \"Exception Class: #{ e.class.name }\"\n  puts \"Exception Message: #{ e.message }\"\nend\n```\n\n`rescue` l t kho s gip bn ly c i tng exception tr v. Nh v d trn ti ly i tng exeption tr v (nu exception  l dng ZeroDivisionError) v truyn n vo bin `e`. T y `e` chnh l object exception nu exception  xy ra.\n\nTi c th dng e  xut ra cc thng tin m ti cn nh class name hay message thng bo li.\n\n# 3. Xy dng mt class Exception\n\nMt s tht hin nhin l nhng thit k c sn khng bao gi c th cover cho tt c cc trng hp c th xy ra trong thc tin. i lc bn mun thm mt exception  cover cho trng hp ca ring d n ca bn th sao?\n\nCu tr li m ti mi tm c kh th v v cng rt quen thuc.  l Exception cng c th c to ra nh mt class bnh thng. Hy  n k tha lp `StandardError` l c.\n\n```ruby\nclass MeoException < StandardError; end\n\n```\n\nVy l ta  c mt class exception ca ring mnh. Khi cn gi n exception ny th ta s gi s dng phng thc `raise`  gi mt i tng.\n\n```ruby\nraise MeoException.new(params_gi_do_ma_ban_muon)\n```\n\nVy trong class class `MeoException` ta s thit k nhng g? :smile: Ti cng cha tm hiu.\n\n# 4. Cc lp Exception c sn trong Ruby\n\n![hoa](/images/ruby-exception.jpg)\n\ny l s  v cc lp exception trong ruby, nu ta rescue mt exception X, X li c dm 3 exception con, th ch cn chng trnh ca bn pht sinh vn  v tr ra mt exception con no  th X c gi.\n\n# 5. Cch bt Exception hp l\n\n**Cch 1:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue Exception => e\n  # do something\nend\n```\n\ny l mt cch t v khi rescue vi Exception, lp cha ca tt c cc Exception khc th n cover qu nhiu trng hp cng tr ra exception, hy nh li  trn chng ta  ni mt khi Exception c tr v th chng trnh ca bn s dng li. Vy nn khng s dng cch ny.\n\n**Cch 2:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue StandardError => e\n  # do something\nend\n```\n\ny l cch lm tt hn, v ta ch cover cc li standard, t ra chng trnh ca bn s khng thi thong b shutdown m khng bit v sao nh cch u tin.\n\n**Cch 3:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue MeoBiBatCoc, MeoBiDauChan => e\n  # do something\nend\n```\n\ny l cch tt nht, ta goi trc tip n trng hp ngoi l m ta cn bt ly v x l.\n\n# Kt lun\n\nNu c phn hi hy  li bnh lun bn di bi vit.\n","slug":"2019-06-10-xu-ly-ngoai-le-trong-rails","published":1,"updated":"2019-12-06T15:39:27.947Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3800208ers1a3u60ix","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Ti c mt s tnh hung din ra hng ngy v con mo ca ti. Nu n i ti cho n n, nu n i vs lung tung ti s dn dp chng.</p>\n<p>Nhng bng mt ngy con mo stupid ca ti b ngi ngoi hnh tinh bt cc, wtf?. y l mt tnh hung khng bnh thng v ti khng c mt <code>HNH NG THNG NHT</code> no  i ph vi 1 tnh hung nh vy, ti c th khc, c th bo cng an, nhng chc chn khng th c mt cch gii quyt trit . Trong lp trnh ta gi nhng tnh hung m logic lun l sai lch khng cn i theo logic bnh thng nh ny l mt exception.</p>\n<p>V d nh my tnh ca bn khng c thit k  thc hin php chia cho s 0. Vy khi bn bt n thc hin php chia cho s 0, n s ngh wtf is going on? v nh qung ra cho bn mt thng bo v vic bn  bt n lm mt vic m n khng c thit k  lm.</p>\n<p>Trong bi vit ny chng ta s tm hiu v exception trong ruby.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Tim-hieu-ve-Exception\"><a href=\"#1-Tim-hieu-ve-Exception\" class=\"headerlink\" title=\"1. Tm hiu v Exception\"></a>1. Tm hiu v Exception</h1><p>u tin chng ta phi ghi nh rng khi mt exception c gi, chng trnh ca bn s ngng v on code pha sau khng th chy c na.</p>\n<ol>\n<li><p>Ti n trng n con mo.</p>\n</li>\n<li><p>Ti em con mo i bn vo qun tiu h.</p>\n</li>\n</ol>\n<p>Nu  <code>bc 1</code>, thay v n thnh cng con mo, ti li dnh mt exception MeoMissing v l do n b ngi ngoi hnh tinh bt cc.</p>\n<p>Khi ny d nhin chng trnh s dng li, v ti lm g cn con mo  m em n i bn   <code>bc 2</code>.</p>\n<p>Quay v vi v d n gin l chia cho s 0:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">10</span>/<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ZeroDivisionError (divided by 0)</span></span><br></pre></td></tr></table></figure>\n\n<p><code>ZeroDivisionError</code> l mt exception c ruby to ra  tr v khi bn c chia mt s cho s 0.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (chia ng hong)</span><br><span class=\"line\">  thc hin php tnh.</span><br><span class=\"line\">else</span><br><span class=\"line\">  if (chia cho s 0)</span><br><span class=\"line\">    tr v exception ZeroDivisionError</span><br><span class=\"line\">  end</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure>\n\n<p>Flow logic n gin v exception nh trn.</p>\n<h1 id=\"2-Lam-sao-de-lay-ve-doi-tuong-Exception\"><a href=\"#2-Lam-sao-de-lay-ve-doi-tuong-Exception\" class=\"headerlink\" title=\"2. Lm sao  ly v i tng Exception\"></a>2. Lm sao  ly v i tng Exception</h1><p>Nh chng ta  bit, gn nh mi th trong ruby u l object(Ngoi tr method v block). Vy nn Exception cng l mt i tng.</p>\n<p>ZeroDivisionError  trn l mt Class, vy khi bn thc hin mt php chia cho s 0, bn  ri vo trng hp m ZeroDivisionError qun l v n s tr v mt i tng ZeroDivisionError.</p>\n<p>Vy tc l  2 ln chia cho s 0 khc nhau, n s tr v cho bn 2 object exception khc nhau ch l cng mt class ZeroDivisionError.</p>\n<p>Vy cch no  bt c i tng ny? C php  thc hin vic ny s nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  meo = <span class=\"number\">10</span></span><br><span class=\"line\">  meo/<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">rescue</span> ZeroDivisionError =&gt; e</span><br><span class=\"line\">  puts <span class=\"string\">\"Exception Class: <span class=\"subst\">#&#123; e<span class=\"class\">.<span class=\"keyword\">class</span>.<span class=\"title\">name</span> &#125;\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">  puts <span class=\"string\">\"Exception Message: <span class=\"subst\">#&#123; e.message &#125;</span>\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"keyword\">end</span></span></span></span><br></pre></td></tr></table></figure>\n\n<p><code>rescue</code> l t kho s gip bn ly c i tng exception tr v. Nh v d trn ti ly i tng exeption tr v (nu exception  l dng ZeroDivisionError) v truyn n vo bin <code>e</code>. T y <code>e</code> chnh l object exception nu exception  xy ra.</p>\n<p>Ti c th dng e  xut ra cc thng tin m ti cn nh class name hay message thng bo li.</p>\n<h1 id=\"3-Xay-dung-mot-class-Exception\"><a href=\"#3-Xay-dung-mot-class-Exception\" class=\"headerlink\" title=\"3. Xy dng mt class Exception\"></a>3. Xy dng mt class Exception</h1><p>Mt s tht hin nhin l nhng thit k c sn khng bao gi c th cover cho tt c cc trng hp c th xy ra trong thc tin. i lc bn mun thm mt exception  cover cho trng hp ca ring d n ca bn th sao?</p>\n<p>Cu tr li m ti mi tm c kh th v v cng rt quen thuc.  l Exception cng c th c to ra nh mt class bnh thng. Hy  n k tha lp <code>StandardError</code> l c.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MeoException</span> &lt; StandardError;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy l ta  c mt class exception ca ring mnh. Khi cn gi n exception ny th ta s gi s dng phng thc <code>raise</code>  gi mt i tng.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">raise MeoException.new(params_gi_do_ma_ban_muon)</span><br></pre></td></tr></table></figure>\n\n<p>Vy trong class class <code>MeoException</code> ta s thit k nhng g? :smile: Ti cng cha tm hiu.</p>\n<h1 id=\"4-Cac-lop-Exception-co-san-trong-Ruby\"><a href=\"#4-Cac-lop-Exception-co-san-trong-Ruby\" class=\"headerlink\" title=\"4. Cc lp Exception c sn trong Ruby\"></a>4. Cc lp Exception c sn trong Ruby</h1><p><img src=\"/images/ruby-exception.jpg\" alt=\"hoa\"></p>\n<p>y l s  v cc lp exception trong ruby, nu ta rescue mt exception X, X li c dm 3 exception con, th ch cn chng trnh ca bn pht sinh vn  v tr ra mt exception con no  th X c gi.</p>\n<h1 id=\"5-Cach-bat-Exception-hop-ly\"><a href=\"#5-Cach-bat-Exception-hop-ly\" class=\"headerlink\" title=\"5. Cch bt Exception hp l\"></a>5. Cch bt Exception hp l</h1><p><strong>Cch 1:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> Exception =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l mt cch t v khi rescue vi Exception, lp cha ca tt c cc Exception khc th n cover qu nhiu trng hp cng tr ra exception, hy nh li  trn chng ta  ni mt khi Exception c tr v th chng trnh ca bn s dng li. Vy nn khng s dng cch ny.</p>\n<p><strong>Cch 2:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> StandardError =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l cch lm tt hn, v ta ch cover cc li standard, t ra chng trnh ca bn s khng thi thong b shutdown m khng bit v sao nh cch u tin.</p>\n<p><strong>Cch 3:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> MeoBiBatCoc, MeoBiDauChan =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l cch tt nht, ta goi trc tip n trng hp ngoi l m ta cn bt ly v x l.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Nu c phn hi hy  li bnh lun bn di bi vit.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Ti c mt s tnh hung din ra hng ngy v con mo ca ti. Nu n i ti cho n n, nu n i vs lung tung ti s dn dp chng.</p>\n<p>Nhng bng mt ngy con mo stupid ca ti b ngi ngoi hnh tinh bt cc, wtf?. y l mt tnh hung khng bnh thng v ti khng c mt <code>HNH NG THNG NHT</code> no  i ph vi 1 tnh hung nh vy, ti c th khc, c th bo cng an, nhng chc chn khng th c mt cch gii quyt trit . Trong lp trnh ta gi nhng tnh hung m logic lun l sai lch khng cn i theo logic bnh thng nh ny l mt exception.</p>\n<p>V d nh my tnh ca bn khng c thit k  thc hin php chia cho s 0. Vy khi bn bt n thc hin php chia cho s 0, n s ngh wtf is going on? v nh qung ra cho bn mt thng bo v vic bn  bt n lm mt vic m n khng c thit k  lm.</p>\n<p>Trong bi vit ny chng ta s tm hiu v exception trong ruby.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Tim-hieu-ve-Exception\"><a href=\"#1-Tim-hieu-ve-Exception\" class=\"headerlink\" title=\"1. Tm hiu v Exception\"></a>1. Tm hiu v Exception</h1><p>u tin chng ta phi ghi nh rng khi mt exception c gi, chng trnh ca bn s ngng v on code pha sau khng th chy c na.</p>\n<ol>\n<li><p>Ti n trng n con mo.</p>\n</li>\n<li><p>Ti em con mo i bn vo qun tiu h.</p>\n</li>\n</ol>\n<p>Nu  <code>bc 1</code>, thay v n thnh cng con mo, ti li dnh mt exception MeoMissing v l do n b ngi ngoi hnh tinh bt cc.</p>\n<p>Khi ny d nhin chng trnh s dng li, v ti lm g cn con mo  m em n i bn   <code>bc 2</code>.</p>\n<p>Quay v vi v d n gin l chia cho s 0:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">10</span>/<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ZeroDivisionError (divided by 0)</span></span><br></pre></td></tr></table></figure>\n\n<p><code>ZeroDivisionError</code> l mt exception c ruby to ra  tr v khi bn c chia mt s cho s 0.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (chia ng hong)</span><br><span class=\"line\">  thc hin php tnh.</span><br><span class=\"line\">else</span><br><span class=\"line\">  if (chia cho s 0)</span><br><span class=\"line\">    tr v exception ZeroDivisionError</span><br><span class=\"line\">  end</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure>\n\n<p>Flow logic n gin v exception nh trn.</p>\n<h1 id=\"2-Lam-sao-de-lay-ve-doi-tuong-Exception\"><a href=\"#2-Lam-sao-de-lay-ve-doi-tuong-Exception\" class=\"headerlink\" title=\"2. Lm sao  ly v i tng Exception\"></a>2. Lm sao  ly v i tng Exception</h1><p>Nh chng ta  bit, gn nh mi th trong ruby u l object(Ngoi tr method v block). Vy nn Exception cng l mt i tng.</p>\n<p>ZeroDivisionError  trn l mt Class, vy khi bn thc hin mt php chia cho s 0, bn  ri vo trng hp m ZeroDivisionError qun l v n s tr v mt i tng ZeroDivisionError.</p>\n<p>Vy tc l  2 ln chia cho s 0 khc nhau, n s tr v cho bn 2 object exception khc nhau ch l cng mt class ZeroDivisionError.</p>\n<p>Vy cch no  bt c i tng ny? C php  thc hin vic ny s nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  meo = <span class=\"number\">10</span></span><br><span class=\"line\">  meo/<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">rescue</span> ZeroDivisionError =&gt; e</span><br><span class=\"line\">  puts <span class=\"string\">\"Exception Class: <span class=\"subst\">#&#123; e<span class=\"class\">.<span class=\"keyword\">class</span>.<span class=\"title\">name</span> &#125;\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">  puts <span class=\"string\">\"Exception Message: <span class=\"subst\">#&#123; e.message &#125;</span>\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"keyword\">end</span></span></span></span><br></pre></td></tr></table></figure>\n\n<p><code>rescue</code> l t kho s gip bn ly c i tng exception tr v. Nh v d trn ti ly i tng exeption tr v (nu exception  l dng ZeroDivisionError) v truyn n vo bin <code>e</code>. T y <code>e</code> chnh l object exception nu exception  xy ra.</p>\n<p>Ti c th dng e  xut ra cc thng tin m ti cn nh class name hay message thng bo li.</p>\n<h1 id=\"3-Xay-dung-mot-class-Exception\"><a href=\"#3-Xay-dung-mot-class-Exception\" class=\"headerlink\" title=\"3. Xy dng mt class Exception\"></a>3. Xy dng mt class Exception</h1><p>Mt s tht hin nhin l nhng thit k c sn khng bao gi c th cover cho tt c cc trng hp c th xy ra trong thc tin. i lc bn mun thm mt exception  cover cho trng hp ca ring d n ca bn th sao?</p>\n<p>Cu tr li m ti mi tm c kh th v v cng rt quen thuc.  l Exception cng c th c to ra nh mt class bnh thng. Hy  n k tha lp <code>StandardError</code> l c.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MeoException</span> &lt; StandardError;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy l ta  c mt class exception ca ring mnh. Khi cn gi n exception ny th ta s gi s dng phng thc <code>raise</code>  gi mt i tng.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">raise MeoException.new(params_gi_do_ma_ban_muon)</span><br></pre></td></tr></table></figure>\n\n<p>Vy trong class class <code>MeoException</code> ta s thit k nhng g? :smile: Ti cng cha tm hiu.</p>\n<h1 id=\"4-Cac-lop-Exception-co-san-trong-Ruby\"><a href=\"#4-Cac-lop-Exception-co-san-trong-Ruby\" class=\"headerlink\" title=\"4. Cc lp Exception c sn trong Ruby\"></a>4. Cc lp Exception c sn trong Ruby</h1><p><img src=\"/images/ruby-exception.jpg\" alt=\"hoa\"></p>\n<p>y l s  v cc lp exception trong ruby, nu ta rescue mt exception X, X li c dm 3 exception con, th ch cn chng trnh ca bn pht sinh vn  v tr ra mt exception con no  th X c gi.</p>\n<h1 id=\"5-Cach-bat-Exception-hop-ly\"><a href=\"#5-Cach-bat-Exception-hop-ly\" class=\"headerlink\" title=\"5. Cch bt Exception hp l\"></a>5. Cch bt Exception hp l</h1><p><strong>Cch 1:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> Exception =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l mt cch t v khi rescue vi Exception, lp cha ca tt c cc Exception khc th n cover qu nhiu trng hp cng tr ra exception, hy nh li  trn chng ta  ni mt khi Exception c tr v th chng trnh ca bn s dng li. Vy nn khng s dng cch ny.</p>\n<p><strong>Cch 2:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> StandardError =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l cch lm tt hn, v ta ch cover cc li standard, t ra chng trnh ca bn s khng thi thong b shutdown m khng bit v sao nh cch u tin.</p>\n<p><strong>Cch 3:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> MeoBiBatCoc, MeoBiDauChan =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l cch tt nht, ta goi trc tip n trng hp ngoi l m ta cn bt ly v x l.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Nu c phn hi hy  li bnh lun bn di bi vit.</p>\n"},{"title":"Symbol V String Trong Ruby","date":"2019-06-08T17:00:00.000Z","draft":false,"_content":"\n# t vn \n\nSymbol l khi nim rt quen tai v quen tay vi lp trnh vin ruby, t hn ai cng  tng nghe khng t th nhiu, bn thn symbol cng xut hin rt thng xuyn trong rails framework.\n\nKhi ti l thc tp sinh, ti nhn c nhiu li khuyn v vic nn s dng symbol nhng cha tng c nghe 1 l gii  r rng v vic v sao nn s dng n, m c l ti cng khng thch n, s xut hin ca symbol lm c php trong rails khng thng nht khi c th vit nhiu kiu  biu hin cng mt  ngha. Ti khng thch vic khng ng b  cht no.\n\nC mt l gii n gin v d nh  phn bit gia 2 i tng ny  l: Symbol m gi tr ging nhau th c cng object_id, cn String th d gi tr ging nhau, mi chui vn s c mt object_id khc nhau.\nLiu l gii ny  ? Hy cng tm hiu.\n\n# Lun bn\n\n# 1. Khai bo v t tng\n\n khai bo mt symbol bn thm du `:` ng trc.\n\n```ruby\n:meo\n\n:\"meo\"\n```\n\nn gin nh trn, ta  khai bo bng 2 cch khc nhau. Nhng thc t ruby hiu l chng cng l 1 symbol.\n\nim cn phi ni r trc khi i xung cc phn sau  l:\n\n1. Symbol thc cht cng l mt String.\n\n2. Symbol l mt [immutable](https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html).\n\n# 2. Mutable v Immutable\n\nTi  tng trnh by mt bi vit v ch  ny. Cc bn c th tham kho ti [y](https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html).\n\nNhng ni mt cch vn tt th bin X l mt immutable khi m vng nh lu gi tr ca X khng th c thay i gi tr.\n\nNh trnh by  mc 1, symbol l immutable (khc vi string th l mutable).\n\nChng ta c th kt lun rng, symbol thc cht l mt string c tnh cht bt bin gi tr (immutable).\n\nCu hi t ra l: Ti sao ti li cn nhng bin khng th thay i gi tr?\n\n1. Trong qu trnh lp trnh, chng ta cn mt s bin khng th b thay i gi tr trong qu trnh s dng,  m bo tnh ng n ca chng trnh. (Ti khng c v d c th no).\n\n2. V l mutable, nn mi khi mt string c gi, bt k l cc chui c ging nhau hay khng, ruby lun to ra mt vng nh mi cho chng.\n\n```ruby\n\"Chinh\".object_id\n#  => 70159285001700\n\"Chinh\".object_id\n# => 70159284996100\n\"Chinh\".object_id\n# => 70159289079920\n```\n\nBa chui cng mt ni dung, nhng khi c gi th li c 3 object_id khc nhau, chng t rng d cng gi tr nhng ruby coi chng l 3 i tng khc nhau v lu tr mi vng nh ring cho tng chui.\n\n**Vn  pht sinh t y khi m  vng nh b lng ph.**\n\nHy cng th vi symbol.\n\n```ruby\n:\"Chinh\".object_id\n# => 1271588\n:\"Chinh\".object_id\n# => 1271588\n:\"Chinh\".object_id\n# => 1271588\n```\n\nTht tuyt, vy l bng mt cch no , khi s dng symbol, ruby bit c symbol ny  tn ti hay cha, nu tn ti ri th khi c gi chng s dng li i tng  c ch khng to thm vng nh mi.\n\n# 3. Symbol v String c lu tr nh no.\n\nMt tiu  c v bun ci, v ci i tng trong ruby tt nhin c lu  b nh trong vi phn vng gi l heap.\n\nHin nhin String khng ngoi l.\n\nNu String c lu tr mt cch bnh thng v khng th kim sot xem n lu nhng g (v n l mutable). Nn khi to ra mt i tng String mi, Ruby s tm mt vng nh trng v lu n ti  v khng quan tm xem l c bao nhiu String ang hot ng trong chng trnh c ni dung ging nhau.\n\nVy Symbol th sao? Nh  trnh by  mc trn th bng cch no  m ruby c th bit c symbol  tn ti hay cha, nu tn ti th xi li cn cha th mi to ra vng nh mi. Vy chng lm vy bng cch no?\n\nThc ra khng h c php mu no  y c, mun truy vt symbol nh ni  trn th chng buc phi c lu tr v qun l di 1 dng c s d liu no .\n\nS tht l Symbol c lu tr thnh mt table (thi c tm gi l vy), trong sut qu trnh vn hnh mt chng trnh. C tng tng nh vic bn c 1 bng trong excel, v khi c mt d liu mi c yu cu, bn s tra trong bng excel ny trc coi c cha, nu c ri th ly ra xi li. Cn nu khng c? th s lm 2 vic:\n\n1. To d liu .\n2. Lu li trong bng  ln sau tra cu.\n\n ly gi tr trong table lu symbol ni trn ta c th dng lnh:\n\n```ruby\nputs Symbol.all_symbols\n# hoc ly tng s symbol  c lu tr trong chng trnh.\nputs Symbol.all_symbols.size\n```\n\n# 4. V tc  thc thi\n\nQua nhng g  phn tch. Ta rt ra mt kt lun l Symbol th tit kim vng nh mt cch ng k so vi String (xem li c ch lu vo table bn trn).\n\nNhng vy ngoi ra th chng cn g khc bit na khng? V performance th sao?\n\nCu tr li l Symbol vn ni tri hn String  tc  thc thi:\n\n- Trong trng hp to mt i tng mi: Symbol c th s dng li, cn String th lun lun to mi. a vy th to mi String phi nhanh hn ch ta. V n khng cn qut li bng table symbols m lun lun to i tng mi, trong khi  th Symbol phi qut li trc ri nu khng c mi to i tng.\n\nNhng mi th khng n gin nh vy, Trong ruby c mt module gi tt l GC c chc nng thu gm \"rc\", rc  y l cc string c khai bo nhng khng cn s dng, GC s thu hi vng nh ca chng  ly khng gian cho cc i tng khc. y l mt cng vic vt v.\n\nFlow n gin ca n s l:  GC qut cc i tng => nh du cc i tng khng c s dng => Khi chng trnh trong thi gian rnh ri th GC s thu gm vng nh ca cc i tng b nh du. S tt khng t thi gian cho cng on ny.\n\nV vy v mt performance khi to i tng mi, Symbol vn ginh chin thng.\n\n- Trong trng hp so snh 2 i tng: Chin thng mt ln na thuc v Symbol.\n\nL do th ln ny kh n gin: Khi cn so snh 2 symbol, ruby s vo symbols table v so snh l xong. Trong khi ngi anh em String th khng th v  so snh 2 chui, ruby s phi so snh tng k t trong chui ny vi tng k t trong chui kia. y li l mt cng vic vt v.\n\nV th l ta  hiu performance, Symbol win ez.\n\n th nghim bn c th s dng th vin benchmark  kim nghim kt lun.\n\n# 5. im yu ca Symbol\n\nNu Symbol ton nng, ton thin th  khng c l do g n khng thay th lun String. Bn cht ca im yu ca Symbol cng chnh l im mnh ca n.\n\n chnh l tnh cht immutable.\n\nV khng phi khi no cng cn mt i tng immutable, ti c mt input l tn ngi dng nhp vo. Ti mun chc chn l s lu tn ngi dng di dng ch hoa trong csdl. V vy ti chy method `upcase!`.\n\nTuy nhin, Symbol l immutable m phng thc `upcase!` li c mc tiu thay i gi tr ca i tng v th l chng trnh bn ra mt error v vic bn ang c thay i gi tr ca symbol.\n\nTrong trng hp ny r rng s dng String l iu hin nhin.\n\n# Kt lun\n\nNu c nhn xt hoc phn hi hy  li phn hi bn di nh.\n","source":"_posts/2019-06-09-so-sanh-symbol-va-string-trong-ruby.md","raw":"---\ntitle: \"Symbol V String Trong Ruby\"\ndate: 2019-06-09\ndraft: false\ntags: [\"RUBY\"]\ncategories: [\"RUBY\"]\n---\n\n# t vn \n\nSymbol l khi nim rt quen tai v quen tay vi lp trnh vin ruby, t hn ai cng  tng nghe khng t th nhiu, bn thn symbol cng xut hin rt thng xuyn trong rails framework.\n\nKhi ti l thc tp sinh, ti nhn c nhiu li khuyn v vic nn s dng symbol nhng cha tng c nghe 1 l gii  r rng v vic v sao nn s dng n, m c l ti cng khng thch n, s xut hin ca symbol lm c php trong rails khng thng nht khi c th vit nhiu kiu  biu hin cng mt  ngha. Ti khng thch vic khng ng b  cht no.\n\nC mt l gii n gin v d nh  phn bit gia 2 i tng ny  l: Symbol m gi tr ging nhau th c cng object_id, cn String th d gi tr ging nhau, mi chui vn s c mt object_id khc nhau.\nLiu l gii ny  ? Hy cng tm hiu.\n\n# Lun bn\n\n# 1. Khai bo v t tng\n\n khai bo mt symbol bn thm du `:` ng trc.\n\n```ruby\n:meo\n\n:\"meo\"\n```\n\nn gin nh trn, ta  khai bo bng 2 cch khc nhau. Nhng thc t ruby hiu l chng cng l 1 symbol.\n\nim cn phi ni r trc khi i xung cc phn sau  l:\n\n1. Symbol thc cht cng l mt String.\n\n2. Symbol l mt [immutable](https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html).\n\n# 2. Mutable v Immutable\n\nTi  tng trnh by mt bi vit v ch  ny. Cc bn c th tham kho ti [y](https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html).\n\nNhng ni mt cch vn tt th bin X l mt immutable khi m vng nh lu gi tr ca X khng th c thay i gi tr.\n\nNh trnh by  mc 1, symbol l immutable (khc vi string th l mutable).\n\nChng ta c th kt lun rng, symbol thc cht l mt string c tnh cht bt bin gi tr (immutable).\n\nCu hi t ra l: Ti sao ti li cn nhng bin khng th thay i gi tr?\n\n1. Trong qu trnh lp trnh, chng ta cn mt s bin khng th b thay i gi tr trong qu trnh s dng,  m bo tnh ng n ca chng trnh. (Ti khng c v d c th no).\n\n2. V l mutable, nn mi khi mt string c gi, bt k l cc chui c ging nhau hay khng, ruby lun to ra mt vng nh mi cho chng.\n\n```ruby\n\"Chinh\".object_id\n#  => 70159285001700\n\"Chinh\".object_id\n# => 70159284996100\n\"Chinh\".object_id\n# => 70159289079920\n```\n\nBa chui cng mt ni dung, nhng khi c gi th li c 3 object_id khc nhau, chng t rng d cng gi tr nhng ruby coi chng l 3 i tng khc nhau v lu tr mi vng nh ring cho tng chui.\n\n**Vn  pht sinh t y khi m  vng nh b lng ph.**\n\nHy cng th vi symbol.\n\n```ruby\n:\"Chinh\".object_id\n# => 1271588\n:\"Chinh\".object_id\n# => 1271588\n:\"Chinh\".object_id\n# => 1271588\n```\n\nTht tuyt, vy l bng mt cch no , khi s dng symbol, ruby bit c symbol ny  tn ti hay cha, nu tn ti ri th khi c gi chng s dng li i tng  c ch khng to thm vng nh mi.\n\n# 3. Symbol v String c lu tr nh no.\n\nMt tiu  c v bun ci, v ci i tng trong ruby tt nhin c lu  b nh trong vi phn vng gi l heap.\n\nHin nhin String khng ngoi l.\n\nNu String c lu tr mt cch bnh thng v khng th kim sot xem n lu nhng g (v n l mutable). Nn khi to ra mt i tng String mi, Ruby s tm mt vng nh trng v lu n ti  v khng quan tm xem l c bao nhiu String ang hot ng trong chng trnh c ni dung ging nhau.\n\nVy Symbol th sao? Nh  trnh by  mc trn th bng cch no  m ruby c th bit c symbol  tn ti hay cha, nu tn ti th xi li cn cha th mi to ra vng nh mi. Vy chng lm vy bng cch no?\n\nThc ra khng h c php mu no  y c, mun truy vt symbol nh ni  trn th chng buc phi c lu tr v qun l di 1 dng c s d liu no .\n\nS tht l Symbol c lu tr thnh mt table (thi c tm gi l vy), trong sut qu trnh vn hnh mt chng trnh. C tng tng nh vic bn c 1 bng trong excel, v khi c mt d liu mi c yu cu, bn s tra trong bng excel ny trc coi c cha, nu c ri th ly ra xi li. Cn nu khng c? th s lm 2 vic:\n\n1. To d liu .\n2. Lu li trong bng  ln sau tra cu.\n\n ly gi tr trong table lu symbol ni trn ta c th dng lnh:\n\n```ruby\nputs Symbol.all_symbols\n# hoc ly tng s symbol  c lu tr trong chng trnh.\nputs Symbol.all_symbols.size\n```\n\n# 4. V tc  thc thi\n\nQua nhng g  phn tch. Ta rt ra mt kt lun l Symbol th tit kim vng nh mt cch ng k so vi String (xem li c ch lu vo table bn trn).\n\nNhng vy ngoi ra th chng cn g khc bit na khng? V performance th sao?\n\nCu tr li l Symbol vn ni tri hn String  tc  thc thi:\n\n- Trong trng hp to mt i tng mi: Symbol c th s dng li, cn String th lun lun to mi. a vy th to mi String phi nhanh hn ch ta. V n khng cn qut li bng table symbols m lun lun to i tng mi, trong khi  th Symbol phi qut li trc ri nu khng c mi to i tng.\n\nNhng mi th khng n gin nh vy, Trong ruby c mt module gi tt l GC c chc nng thu gm \"rc\", rc  y l cc string c khai bo nhng khng cn s dng, GC s thu hi vng nh ca chng  ly khng gian cho cc i tng khc. y l mt cng vic vt v.\n\nFlow n gin ca n s l:  GC qut cc i tng => nh du cc i tng khng c s dng => Khi chng trnh trong thi gian rnh ri th GC s thu gm vng nh ca cc i tng b nh du. S tt khng t thi gian cho cng on ny.\n\nV vy v mt performance khi to i tng mi, Symbol vn ginh chin thng.\n\n- Trong trng hp so snh 2 i tng: Chin thng mt ln na thuc v Symbol.\n\nL do th ln ny kh n gin: Khi cn so snh 2 symbol, ruby s vo symbols table v so snh l xong. Trong khi ngi anh em String th khng th v  so snh 2 chui, ruby s phi so snh tng k t trong chui ny vi tng k t trong chui kia. y li l mt cng vic vt v.\n\nV th l ta  hiu performance, Symbol win ez.\n\n th nghim bn c th s dng th vin benchmark  kim nghim kt lun.\n\n# 5. im yu ca Symbol\n\nNu Symbol ton nng, ton thin th  khng c l do g n khng thay th lun String. Bn cht ca im yu ca Symbol cng chnh l im mnh ca n.\n\n chnh l tnh cht immutable.\n\nV khng phi khi no cng cn mt i tng immutable, ti c mt input l tn ngi dng nhp vo. Ti mun chc chn l s lu tn ngi dng di dng ch hoa trong csdl. V vy ti chy method `upcase!`.\n\nTuy nhin, Symbol l immutable m phng thc `upcase!` li c mc tiu thay i gi tr ca i tng v th l chng trnh bn ra mt error v vic bn ang c thay i gi tr ca symbol.\n\nTrong trng hp ny r rng s dng String l iu hin nhin.\n\n# Kt lun\n\nNu c nhn xt hoc phn hi hy  li phn hi bn di nh.\n","slug":"2019-06-09-so-sanh-symbol-va-string-trong-ruby","published":1,"updated":"2019-12-06T15:39:14.224Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3b00248ers08rxcu7m","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Symbol l khi nim rt quen tai v quen tay vi lp trnh vin ruby, t hn ai cng  tng nghe khng t th nhiu, bn thn symbol cng xut hin rt thng xuyn trong rails framework.</p>\n<p>Khi ti l thc tp sinh, ti nhn c nhiu li khuyn v vic nn s dng symbol nhng cha tng c nghe 1 l gii  r rng v vic v sao nn s dng n, m c l ti cng khng thch n, s xut hin ca symbol lm c php trong rails khng thng nht khi c th vit nhiu kiu  biu hin cng mt  ngha. Ti khng thch vic khng ng b  cht no.</p>\n<p>C mt l gii n gin v d nh  phn bit gia 2 i tng ny  l: Symbol m gi tr ging nhau th c cng object_id, cn String th d gi tr ging nhau, mi chui vn s c mt object_id khc nhau.<br>Liu l gii ny  ? Hy cng tm hiu.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Khai-bao-va-tu-tuong\"><a href=\"#1-Khai-bao-va-tu-tuong\" class=\"headerlink\" title=\"1. Khai bo v t tng\"></a>1. Khai bo v t tng</h1><p> khai bo mt symbol bn thm du <code>:</code> ng trc.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">:meo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"meo\"</span></span></span><br></pre></td></tr></table></figure>\n\n<p>n gin nh trn, ta  khai bo bng 2 cch khc nhau. Nhng thc t ruby hiu l chng cng l 1 symbol.</p>\n<p>im cn phi ni r trc khi i xung cc phn sau  l:</p>\n<ol>\n<li><p>Symbol thc cht cng l mt String.</p>\n</li>\n<li><p>Symbol l mt <a href=\"https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html\" target=\"_blank\" rel=\"noopener\">immutable</a>.</p>\n</li>\n</ol>\n<h1 id=\"2-Mutable-va-Immutable\"><a href=\"#2-Mutable-va-Immutable\" class=\"headerlink\" title=\"2. Mutable v Immutable\"></a>2. Mutable v Immutable</h1><p>Ti  tng trnh by mt bi vit v ch  ny. Cc bn c th tham kho ti <a href=\"https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html\" target=\"_blank\" rel=\"noopener\">y</a>.</p>\n<p>Nhng ni mt cch vn tt th bin X l mt immutable khi m vng nh lu gi tr ca X khng th c thay i gi tr.</p>\n<p>Nh trnh by  mc 1, symbol l immutable (khc vi string th l mutable).</p>\n<p>Chng ta c th kt lun rng, symbol thc cht l mt string c tnh cht bt bin gi tr (immutable).</p>\n<p>Cu hi t ra l: Ti sao ti li cn nhng bin khng th thay i gi tr?</p>\n<ol>\n<li><p>Trong qu trnh lp trnh, chng ta cn mt s bin khng th b thay i gi tr trong qu trnh s dng,  m bo tnh ng n ca chng trnh. (Ti khng c v d c th no).</p>\n</li>\n<li><p>V l mutable, nn mi khi mt string c gi, bt k l cc chui c ging nhau hay khng, ruby lun to ra mt vng nh mi cho chng.</p>\n</li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\">#  =&gt; 70159285001700</span></span><br><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 70159284996100</span></span><br><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 70159289079920</span></span><br></pre></td></tr></table></figure>\n\n<p>Ba chui cng mt ni dung, nhng khi c gi th li c 3 object_id khc nhau, chng t rng d cng gi tr nhng ruby coi chng l 3 i tng khc nhau v lu tr mi vng nh ring cho tng chui.</p>\n<p><strong>Vn  pht sinh t y khi m  vng nh b lng ph.</strong></p>\n<p>Hy cng th vi symbol.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br></pre></td></tr></table></figure>\n\n<p>Tht tuyt, vy l bng mt cch no , khi s dng symbol, ruby bit c symbol ny  tn ti hay cha, nu tn ti ri th khi c gi chng s dng li i tng  c ch khng to thm vng nh mi.</p>\n<h1 id=\"3-Symbol-va-String-duoc-luu-tru-nhu-nao\"><a href=\"#3-Symbol-va-String-duoc-luu-tru-nhu-nao\" class=\"headerlink\" title=\"3. Symbol v String c lu tr nh no.\"></a>3. Symbol v String c lu tr nh no.</h1><p>Mt tiu  c v bun ci, v ci i tng trong ruby tt nhin c lu  b nh trong vi phn vng gi l heap.</p>\n<p>Hin nhin String khng ngoi l.</p>\n<p>Nu String c lu tr mt cch bnh thng v khng th kim sot xem n lu nhng g (v n l mutable). Nn khi to ra mt i tng String mi, Ruby s tm mt vng nh trng v lu n ti  v khng quan tm xem l c bao nhiu String ang hot ng trong chng trnh c ni dung ging nhau.</p>\n<p>Vy Symbol th sao? Nh  trnh by  mc trn th bng cch no  m ruby c th bit c symbol  tn ti hay cha, nu tn ti th xi li cn cha th mi to ra vng nh mi. Vy chng lm vy bng cch no?</p>\n<p>Thc ra khng h c php mu no  y c, mun truy vt symbol nh ni  trn th chng buc phi c lu tr v qun l di 1 dng c s d liu no .</p>\n<p>S tht l Symbol c lu tr thnh mt table (thi c tm gi l vy), trong sut qu trnh vn hnh mt chng trnh. C tng tng nh vic bn c 1 bng trong excel, v khi c mt d liu mi c yu cu, bn s tra trong bng excel ny trc coi c cha, nu c ri th ly ra xi li. Cn nu khng c? th s lm 2 vic:</p>\n<ol>\n<li>To d liu .</li>\n<li>Lu li trong bng  ln sau tra cu.</li>\n</ol>\n<p> ly gi tr trong table lu symbol ni trn ta c th dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">puts Symbol.all_symbols</span><br><span class=\"line\"><span class=\"comment\"># hoc ly tng s symbol  c lu tr trong chng trnh.</span></span><br><span class=\"line\">puts Symbol.all_symbols.size</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-Ve-toc-do-thuc-thi\"><a href=\"#4-Ve-toc-do-thuc-thi\" class=\"headerlink\" title=\"4. V tc  thc thi\"></a>4. V tc  thc thi</h1><p>Qua nhng g  phn tch. Ta rt ra mt kt lun l Symbol th tit kim vng nh mt cch ng k so vi String (xem li c ch lu vo table bn trn).</p>\n<p>Nhng vy ngoi ra th chng cn g khc bit na khng? V performance th sao?</p>\n<p>Cu tr li l Symbol vn ni tri hn String  tc  thc thi:</p>\n<ul>\n<li>Trong trng hp to mt i tng mi: Symbol c th s dng li, cn String th lun lun to mi. a vy th to mi String phi nhanh hn ch ta. V n khng cn qut li bng table symbols m lun lun to i tng mi, trong khi  th Symbol phi qut li trc ri nu khng c mi to i tng.</li>\n</ul>\n<p>Nhng mi th khng n gin nh vy, Trong ruby c mt module gi tt l GC c chc nng thu gm rc, rc  y l cc string c khai bo nhng khng cn s dng, GC s thu hi vng nh ca chng  ly khng gian cho cc i tng khc. y l mt cng vic vt v.</p>\n<p>Flow n gin ca n s l:  GC qut cc i tng =&gt; nh du cc i tng khng c s dng =&gt; Khi chng trnh trong thi gian rnh ri th GC s thu gm vng nh ca cc i tng b nh du. S tt khng t thi gian cho cng on ny.</p>\n<p>V vy v mt performance khi to i tng mi, Symbol vn ginh chin thng.</p>\n<ul>\n<li>Trong trng hp so snh 2 i tng: Chin thng mt ln na thuc v Symbol.</li>\n</ul>\n<p>L do th ln ny kh n gin: Khi cn so snh 2 symbol, ruby s vo symbols table v so snh l xong. Trong khi ngi anh em String th khng th v  so snh 2 chui, ruby s phi so snh tng k t trong chui ny vi tng k t trong chui kia. y li l mt cng vic vt v.</p>\n<p>V th l ta  hiu performance, Symbol win ez.</p>\n<p> th nghim bn c th s dng th vin benchmark  kim nghim kt lun.</p>\n<h1 id=\"5-Diem-yeu-cua-Symbol\"><a href=\"#5-Diem-yeu-cua-Symbol\" class=\"headerlink\" title=\"5. im yu ca Symbol\"></a>5. im yu ca Symbol</h1><p>Nu Symbol ton nng, ton thin th  khng c l do g n khng thay th lun String. Bn cht ca im yu ca Symbol cng chnh l im mnh ca n.</p>\n<p> chnh l tnh cht immutable.</p>\n<p>V khng phi khi no cng cn mt i tng immutable, ti c mt input l tn ngi dng nhp vo. Ti mun chc chn l s lu tn ngi dng di dng ch hoa trong csdl. V vy ti chy method <code>upcase!</code>.</p>\n<p>Tuy nhin, Symbol l immutable m phng thc <code>upcase!</code> li c mc tiu thay i gi tr ca i tng v th l chng trnh bn ra mt error v vic bn ang c thay i gi tr ca symbol.</p>\n<p>Trong trng hp ny r rng s dng String l iu hin nhin.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Nu c nhn xt hoc phn hi hy  li phn hi bn di nh.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Symbol l khi nim rt quen tai v quen tay vi lp trnh vin ruby, t hn ai cng  tng nghe khng t th nhiu, bn thn symbol cng xut hin rt thng xuyn trong rails framework.</p>\n<p>Khi ti l thc tp sinh, ti nhn c nhiu li khuyn v vic nn s dng symbol nhng cha tng c nghe 1 l gii  r rng v vic v sao nn s dng n, m c l ti cng khng thch n, s xut hin ca symbol lm c php trong rails khng thng nht khi c th vit nhiu kiu  biu hin cng mt  ngha. Ti khng thch vic khng ng b  cht no.</p>\n<p>C mt l gii n gin v d nh  phn bit gia 2 i tng ny  l: Symbol m gi tr ging nhau th c cng object_id, cn String th d gi tr ging nhau, mi chui vn s c mt object_id khc nhau.<br>Liu l gii ny  ? Hy cng tm hiu.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Khai-bao-va-tu-tuong\"><a href=\"#1-Khai-bao-va-tu-tuong\" class=\"headerlink\" title=\"1. Khai bo v t tng\"></a>1. Khai bo v t tng</h1><p> khai bo mt symbol bn thm du <code>:</code> ng trc.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">:meo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"meo\"</span></span></span><br></pre></td></tr></table></figure>\n\n<p>n gin nh trn, ta  khai bo bng 2 cch khc nhau. Nhng thc t ruby hiu l chng cng l 1 symbol.</p>\n<p>im cn phi ni r trc khi i xung cc phn sau  l:</p>\n<ol>\n<li><p>Symbol thc cht cng l mt String.</p>\n</li>\n<li><p>Symbol l mt <a href=\"https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html\" target=\"_blank\" rel=\"noopener\">immutable</a>.</p>\n</li>\n</ol>\n<h1 id=\"2-Mutable-va-Immutable\"><a href=\"#2-Mutable-va-Immutable\" class=\"headerlink\" title=\"2. Mutable v Immutable\"></a>2. Mutable v Immutable</h1><p>Ti  tng trnh by mt bi vit v ch  ny. Cc bn c th tham kho ti <a href=\"https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html\" target=\"_blank\" rel=\"noopener\">y</a>.</p>\n<p>Nhng ni mt cch vn tt th bin X l mt immutable khi m vng nh lu gi tr ca X khng th c thay i gi tr.</p>\n<p>Nh trnh by  mc 1, symbol l immutable (khc vi string th l mutable).</p>\n<p>Chng ta c th kt lun rng, symbol thc cht l mt string c tnh cht bt bin gi tr (immutable).</p>\n<p>Cu hi t ra l: Ti sao ti li cn nhng bin khng th thay i gi tr?</p>\n<ol>\n<li><p>Trong qu trnh lp trnh, chng ta cn mt s bin khng th b thay i gi tr trong qu trnh s dng,  m bo tnh ng n ca chng trnh. (Ti khng c v d c th no).</p>\n</li>\n<li><p>V l mutable, nn mi khi mt string c gi, bt k l cc chui c ging nhau hay khng, ruby lun to ra mt vng nh mi cho chng.</p>\n</li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\">#  =&gt; 70159285001700</span></span><br><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 70159284996100</span></span><br><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 70159289079920</span></span><br></pre></td></tr></table></figure>\n\n<p>Ba chui cng mt ni dung, nhng khi c gi th li c 3 object_id khc nhau, chng t rng d cng gi tr nhng ruby coi chng l 3 i tng khc nhau v lu tr mi vng nh ring cho tng chui.</p>\n<p><strong>Vn  pht sinh t y khi m  vng nh b lng ph.</strong></p>\n<p>Hy cng th vi symbol.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br></pre></td></tr></table></figure>\n\n<p>Tht tuyt, vy l bng mt cch no , khi s dng symbol, ruby bit c symbol ny  tn ti hay cha, nu tn ti ri th khi c gi chng s dng li i tng  c ch khng to thm vng nh mi.</p>\n<h1 id=\"3-Symbol-va-String-duoc-luu-tru-nhu-nao\"><a href=\"#3-Symbol-va-String-duoc-luu-tru-nhu-nao\" class=\"headerlink\" title=\"3. Symbol v String c lu tr nh no.\"></a>3. Symbol v String c lu tr nh no.</h1><p>Mt tiu  c v bun ci, v ci i tng trong ruby tt nhin c lu  b nh trong vi phn vng gi l heap.</p>\n<p>Hin nhin String khng ngoi l.</p>\n<p>Nu String c lu tr mt cch bnh thng v khng th kim sot xem n lu nhng g (v n l mutable). Nn khi to ra mt i tng String mi, Ruby s tm mt vng nh trng v lu n ti  v khng quan tm xem l c bao nhiu String ang hot ng trong chng trnh c ni dung ging nhau.</p>\n<p>Vy Symbol th sao? Nh  trnh by  mc trn th bng cch no  m ruby c th bit c symbol  tn ti hay cha, nu tn ti th xi li cn cha th mi to ra vng nh mi. Vy chng lm vy bng cch no?</p>\n<p>Thc ra khng h c php mu no  y c, mun truy vt symbol nh ni  trn th chng buc phi c lu tr v qun l di 1 dng c s d liu no .</p>\n<p>S tht l Symbol c lu tr thnh mt table (thi c tm gi l vy), trong sut qu trnh vn hnh mt chng trnh. C tng tng nh vic bn c 1 bng trong excel, v khi c mt d liu mi c yu cu, bn s tra trong bng excel ny trc coi c cha, nu c ri th ly ra xi li. Cn nu khng c? th s lm 2 vic:</p>\n<ol>\n<li>To d liu .</li>\n<li>Lu li trong bng  ln sau tra cu.</li>\n</ol>\n<p> ly gi tr trong table lu symbol ni trn ta c th dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">puts Symbol.all_symbols</span><br><span class=\"line\"><span class=\"comment\"># hoc ly tng s symbol  c lu tr trong chng trnh.</span></span><br><span class=\"line\">puts Symbol.all_symbols.size</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-Ve-toc-do-thuc-thi\"><a href=\"#4-Ve-toc-do-thuc-thi\" class=\"headerlink\" title=\"4. V tc  thc thi\"></a>4. V tc  thc thi</h1><p>Qua nhng g  phn tch. Ta rt ra mt kt lun l Symbol th tit kim vng nh mt cch ng k so vi String (xem li c ch lu vo table bn trn).</p>\n<p>Nhng vy ngoi ra th chng cn g khc bit na khng? V performance th sao?</p>\n<p>Cu tr li l Symbol vn ni tri hn String  tc  thc thi:</p>\n<ul>\n<li>Trong trng hp to mt i tng mi: Symbol c th s dng li, cn String th lun lun to mi. a vy th to mi String phi nhanh hn ch ta. V n khng cn qut li bng table symbols m lun lun to i tng mi, trong khi  th Symbol phi qut li trc ri nu khng c mi to i tng.</li>\n</ul>\n<p>Nhng mi th khng n gin nh vy, Trong ruby c mt module gi tt l GC c chc nng thu gm rc, rc  y l cc string c khai bo nhng khng cn s dng, GC s thu hi vng nh ca chng  ly khng gian cho cc i tng khc. y l mt cng vic vt v.</p>\n<p>Flow n gin ca n s l:  GC qut cc i tng =&gt; nh du cc i tng khng c s dng =&gt; Khi chng trnh trong thi gian rnh ri th GC s thu gm vng nh ca cc i tng b nh du. S tt khng t thi gian cho cng on ny.</p>\n<p>V vy v mt performance khi to i tng mi, Symbol vn ginh chin thng.</p>\n<ul>\n<li>Trong trng hp so snh 2 i tng: Chin thng mt ln na thuc v Symbol.</li>\n</ul>\n<p>L do th ln ny kh n gin: Khi cn so snh 2 symbol, ruby s vo symbols table v so snh l xong. Trong khi ngi anh em String th khng th v  so snh 2 chui, ruby s phi so snh tng k t trong chui ny vi tng k t trong chui kia. y li l mt cng vic vt v.</p>\n<p>V th l ta  hiu performance, Symbol win ez.</p>\n<p> th nghim bn c th s dng th vin benchmark  kim nghim kt lun.</p>\n<h1 id=\"5-Diem-yeu-cua-Symbol\"><a href=\"#5-Diem-yeu-cua-Symbol\" class=\"headerlink\" title=\"5. im yu ca Symbol\"></a>5. im yu ca Symbol</h1><p>Nu Symbol ton nng, ton thin th  khng c l do g n khng thay th lun String. Bn cht ca im yu ca Symbol cng chnh l im mnh ca n.</p>\n<p> chnh l tnh cht immutable.</p>\n<p>V khng phi khi no cng cn mt i tng immutable, ti c mt input l tn ngi dng nhp vo. Ti mun chc chn l s lu tn ngi dng di dng ch hoa trong csdl. V vy ti chy method <code>upcase!</code>.</p>\n<p>Tuy nhin, Symbol l immutable m phng thc <code>upcase!</code> li c mc tiu thay i gi tr ca i tng v th l chng trnh bn ra mt error v vic bn ang c thay i gi tr ca symbol.</p>\n<p>Trong trng hp ny r rng s dng String l iu hin nhin.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Nu c nhn xt hoc phn hi hy  li phn hi bn di nh.</p>\n"},{"title":"Public, Private V Protected","date":"2019-06-10T17:00:00.000Z","draft":false,"_content":"\n# t vn \n\nKhi cn hc i hc, chng ta c hc v tm vc ca cc phng thc nh sau:\n\n1. Public phng thc, gi  u cng c ch cn m bo  include ci class khai bo phng thc  l c.\n\n2. Protected phng thc, gi  chnh class khai bo n, ngoi ra cn c th gi  cc lp k tha class khai bo phng thc ny.\n\n3. Private phng thc, gi  chnh class m n c khai bo, ngoi ra... m qun khng c ngoi ra, ch vy thi.\n\nNhng trch rt trn da theo ngn ng m chng ta cng theo ui ngy i hc C++. Vy vi Ruby? Liu nhng pht biu trn liu cn ng?\n\n# Lun bn\n\nKhng, nhng trch rt trn khng cn ng n hon ton vi ngn ng Ruby. C mt s khc bit. Trong bi vit ny chng ta s i s qua v n.\n\n\"M sao li l s qua? sao bi no cng dng t i s qua m khng phi l \"p  rai tu\" g , vit blog kiu cm ngui nh ny vit lm g (angry).\"\n\n=> V y khng phi kin thc cao siu g c, c v vn ti liu anh ng  cp n n ri v ti khng thy ci l do g  c c ti liu tht nhiu, translate tht  tay, ri vietsub ra mt bi vit di nh sng Hng  ni v mt ch  v cng normal  th hin bn thn c :smile:\n\n# Ly mt v d\n\n```ruby\nclass Cat\n  # default public method\n  def cat_hello_public\n    puts \"T*o ngao ngao public mot cach quy toc\"\n  end\n\n  protected\n\n  def cat_hello_protected\n    puts \"T*o ngao ngao protected mot cach sexy\"\n  end\n\n  private\n\n  def cat_hello_private\n    puts \"T*o ngao ngao private mot  cach len lut\"\n  end\nend\n```\n\nRa ngoi scope ca class ny ri chy:\n\n```ruby\nCat.new.cat_hello_public\n# => T*o ngao ngao public mot cach quy toc.\nCat.new.cat_hello_protected\n# => error\nCat.new.cat_hello_private\n# => error\n```\n\n**Note:** public c th gi ngoi tm vc ca mt class, nhng method cn li th khng. ng ngha vi vic bn ch cn m bo ref c file cha class c phng thc public  th bn c th thoi mi gi phng thc ny.\n\n# Thm mt class con k tha\n\n```ruby\nclass YellowCat < Cat; end\n```\n\nChy:\n\n```ruby\nYellowCat.new.cat_hello_public\n# => T*o ngao ngao public mot cach quy toc.\n```\n\n**Note:** Phng thc public c th c gi cng khai bi class k tha ca class cha phng thc .\n\n# Gi 3 phng thc Cat trong mt method thuc YellowCat\n\n```ruby\nclass YellowCat < Cat\n  def yellow_cat\n    cat_hello_public\n    cat_hello_protected\n    cat_hello_private\n  end\nend\n```\n\nChy:\n\n```ruby\nYellowCat.new.yellow_cat\n# => T*o ngao ngao public mot cach quy toc\n# => T*o ngao ngao protected mot cach sexy\n# => T*o ngao ngao private mot  cach len lut\n```\n\n**Note:** C 3 dng phng thc u c th c gi trong lp con (Trong lp con nh).\n\n# Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc\n\n```ruby\nclass YellowCat < Cat\n  def yellow_cat\n    cat = Cat.new\n    cat.cat_hello_public\n    cat.cat_hello_protected\n    cat.cat_hello_private\n  end\nend\n```\n\nChy:\n\n```ruby\nYellowCat.new.yellow_cat\n# => T*o ngao ngao public mot cach quy toc\n# => T*o ngao ngao protected mot cach sexy\n# =>  error\n```\n\n:arrow_right: **Note:** Trong mt lp con k tha t lp cha, public v protected method ca lp cha c th c lp con access thng qua `implicit receiver` and `explicit receiver`. Cn private method th ch c th c access thng qua `implicit receiver`.\n\n:one: **Implicit receiver**: Khng ch nh i tng s thc hin phng thc.\n\n:two: **Explicit receiver**: Ch nh r rng i tng s thc hin phng thc.\n\n# Kt lun\n\nNu c ng gp v bi vit hoc ght thi  tc gi vit bi s si hi ht th hy  li bnh lun nh.\n","source":"_posts/2019-06-11-public-private-va-protected-method-trong-ruby.md","raw":"---\ntitle: \"Public, Private V Protected\"\ndate: 2019-06-11\ndraft: false\ntags: [\"RUBY\"]\ncategories: [\"RUBY\"]\n\n---\n\n# t vn \n\nKhi cn hc i hc, chng ta c hc v tm vc ca cc phng thc nh sau:\n\n1. Public phng thc, gi  u cng c ch cn m bo  include ci class khai bo phng thc  l c.\n\n2. Protected phng thc, gi  chnh class khai bo n, ngoi ra cn c th gi  cc lp k tha class khai bo phng thc ny.\n\n3. Private phng thc, gi  chnh class m n c khai bo, ngoi ra... m qun khng c ngoi ra, ch vy thi.\n\nNhng trch rt trn da theo ngn ng m chng ta cng theo ui ngy i hc C++. Vy vi Ruby? Liu nhng pht biu trn liu cn ng?\n\n# Lun bn\n\nKhng, nhng trch rt trn khng cn ng n hon ton vi ngn ng Ruby. C mt s khc bit. Trong bi vit ny chng ta s i s qua v n.\n\n\"M sao li l s qua? sao bi no cng dng t i s qua m khng phi l \"p  rai tu\" g , vit blog kiu cm ngui nh ny vit lm g (angry).\"\n\n=> V y khng phi kin thc cao siu g c, c v vn ti liu anh ng  cp n n ri v ti khng thy ci l do g  c c ti liu tht nhiu, translate tht  tay, ri vietsub ra mt bi vit di nh sng Hng  ni v mt ch  v cng normal  th hin bn thn c :smile:\n\n# Ly mt v d\n\n```ruby\nclass Cat\n  # default public method\n  def cat_hello_public\n    puts \"T*o ngao ngao public mot cach quy toc\"\n  end\n\n  protected\n\n  def cat_hello_protected\n    puts \"T*o ngao ngao protected mot cach sexy\"\n  end\n\n  private\n\n  def cat_hello_private\n    puts \"T*o ngao ngao private mot  cach len lut\"\n  end\nend\n```\n\nRa ngoi scope ca class ny ri chy:\n\n```ruby\nCat.new.cat_hello_public\n# => T*o ngao ngao public mot cach quy toc.\nCat.new.cat_hello_protected\n# => error\nCat.new.cat_hello_private\n# => error\n```\n\n**Note:** public c th gi ngoi tm vc ca mt class, nhng method cn li th khng. ng ngha vi vic bn ch cn m bo ref c file cha class c phng thc public  th bn c th thoi mi gi phng thc ny.\n\n# Thm mt class con k tha\n\n```ruby\nclass YellowCat < Cat; end\n```\n\nChy:\n\n```ruby\nYellowCat.new.cat_hello_public\n# => T*o ngao ngao public mot cach quy toc.\n```\n\n**Note:** Phng thc public c th c gi cng khai bi class k tha ca class cha phng thc .\n\n# Gi 3 phng thc Cat trong mt method thuc YellowCat\n\n```ruby\nclass YellowCat < Cat\n  def yellow_cat\n    cat_hello_public\n    cat_hello_protected\n    cat_hello_private\n  end\nend\n```\n\nChy:\n\n```ruby\nYellowCat.new.yellow_cat\n# => T*o ngao ngao public mot cach quy toc\n# => T*o ngao ngao protected mot cach sexy\n# => T*o ngao ngao private mot  cach len lut\n```\n\n**Note:** C 3 dng phng thc u c th c gi trong lp con (Trong lp con nh).\n\n# Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc\n\n```ruby\nclass YellowCat < Cat\n  def yellow_cat\n    cat = Cat.new\n    cat.cat_hello_public\n    cat.cat_hello_protected\n    cat.cat_hello_private\n  end\nend\n```\n\nChy:\n\n```ruby\nYellowCat.new.yellow_cat\n# => T*o ngao ngao public mot cach quy toc\n# => T*o ngao ngao protected mot cach sexy\n# =>  error\n```\n\n:arrow_right: **Note:** Trong mt lp con k tha t lp cha, public v protected method ca lp cha c th c lp con access thng qua `implicit receiver` and `explicit receiver`. Cn private method th ch c th c access thng qua `implicit receiver`.\n\n:one: **Implicit receiver**: Khng ch nh i tng s thc hin phng thc.\n\n:two: **Explicit receiver**: Ch nh r rng i tng s thc hin phng thc.\n\n# Kt lun\n\nNu c ng gp v bi vit hoc ght thi  tc gi vit bi s si hi ht th hy  li bnh lun nh.\n","slug":"2019-06-11-public-private-va-protected-method-trong-ruby","published":1,"updated":"2019-12-06T15:39:42.434Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3d00278ers6an84kc3","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Khi cn hc i hc, chng ta c hc v tm vc ca cc phng thc nh sau:</p>\n<ol>\n<li><p>Public phng thc, gi  u cng c ch cn m bo  include ci class khai bo phng thc  l c.</p>\n</li>\n<li><p>Protected phng thc, gi  chnh class khai bo n, ngoi ra cn c th gi  cc lp k tha class khai bo phng thc ny.</p>\n</li>\n<li><p>Private phng thc, gi  chnh class m n c khai bo, ngoi ra m qun khng c ngoi ra, ch vy thi.</p>\n</li>\n</ol>\n<p>Nhng trch rt trn da theo ngn ng m chng ta cng theo ui ngy i hc C++. Vy vi Ruby? Liu nhng pht biu trn liu cn ng?</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p>Khng, nhng trch rt trn khng cn ng n hon ton vi ngn ng Ruby. C mt s khc bit. Trong bi vit ny chng ta s i s qua v n.</p>\n<p>M sao li l s qua? sao bi no cng dng t i s qua m khng phi l p  rai tu g , vit blog kiu cm ngui nh ny vit lm g (angry).</p>\n<p>=&gt; V y khng phi kin thc cao siu g c, c v vn ti liu anh ng  cp n n ri v ti khng thy ci l do g  c c ti liu tht nhiu, translate tht  tay, ri vietsub ra mt bi vit di nh sng Hng  ni v mt ch  v cng normal  th hin bn thn c :smile:</p>\n<h1 id=\"Lay-mot-vi-du\"><a href=\"#Lay-mot-vi-du\" class=\"headerlink\" title=\"Ly mt v d\"></a>Ly mt v d</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"comment\"># default public method</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_public</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao public mot cach quy toc\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  protected</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_protected</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao protected mot cach sexy\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_private</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao private mot  cach len lut\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Ra ngoi scope ca class ny ri chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.new.cat_hello_public</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc.</span></span><br><span class=\"line\">Cat.new.cat_hello_protected</span><br><span class=\"line\"><span class=\"comment\"># =&gt; error</span></span><br><span class=\"line\">Cat.new.cat_hello_private</span><br><span class=\"line\"><span class=\"comment\"># =&gt; error</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> public c th gi ngoi tm vc ca mt class, nhng method cn li th khng. ng ngha vi vic bn ch cn m bo ref c file cha class c phng thc public  th bn c th thoi mi gi phng thc ny.</p>\n<h1 id=\"Them-mot-class-con-ke-thua\"><a href=\"#Them-mot-class-con-ke-thua\" class=\"headerlink\" title=\"Thm mt class con k tha\"></a>Thm mt class con k tha</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.cat_hello_public</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc.</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> Phng thc public c th c gi cng khai bi class k tha ca class cha phng thc .</p>\n<h1 id=\"Goi-3-phuong-thuc-Cat-trong-mot-method-thuoc-YellowCat\"><a href=\"#Goi-3-phuong-thuc-Cat-trong-mot-method-thuoc-YellowCat\" class=\"headerlink\" title=\"Gi 3 phng thc Cat trong mt method thuc YellowCat\"></a>Gi 3 phng thc Cat trong mt method thuc YellowCat</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat</span></span></span><br><span class=\"line\">    cat_hello_public</span><br><span class=\"line\">    cat_hello_protected</span><br><span class=\"line\">    cat_hello_private</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.yellow_cat</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao protected mot cach sexy</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao private mot  cach len lut</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> C 3 dng phng thc u c th c gi trong lp con (Trong lp con nh).</p>\n<h1 id=\"Trong-phuong-thuc-yellow-cat-khai-bao-mot-doi-tuong-Cat-va-goi-toi-3-phuong-thuc\"><a href=\"#Trong-phuong-thuc-yellow-cat-khai-bao-mot-doi-tuong-Cat-va-goi-toi-3-phuong-thuc\" class=\"headerlink\" title=\"Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc\"></a>Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat</span></span></span><br><span class=\"line\">    cat = Cat.new</span><br><span class=\"line\">    cat.cat_hello_public</span><br><span class=\"line\">    cat.cat_hello_protected</span><br><span class=\"line\">    cat.cat_hello_private</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.yellow_cat</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao protected mot cach sexy</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt;  error</span></span><br></pre></td></tr></table></figure>\n\n<p>:arrow_right: <strong>Note:</strong> Trong mt lp con k tha t lp cha, public v protected method ca lp cha c th c lp con access thng qua <code>implicit receiver</code> and <code>explicit receiver</code>. Cn private method th ch c th c access thng qua <code>implicit receiver</code>.</p>\n<p>:one: <strong>Implicit receiver</strong>: Khng ch nh i tng s thc hin phng thc.</p>\n<p>:two: <strong>Explicit receiver</strong>: Ch nh r rng i tng s thc hin phng thc.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Nu c ng gp v bi vit hoc ght thi  tc gi vit bi s si hi ht th hy  li bnh lun nh.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>Khi cn hc i hc, chng ta c hc v tm vc ca cc phng thc nh sau:</p>\n<ol>\n<li><p>Public phng thc, gi  u cng c ch cn m bo  include ci class khai bo phng thc  l c.</p>\n</li>\n<li><p>Protected phng thc, gi  chnh class khai bo n, ngoi ra cn c th gi  cc lp k tha class khai bo phng thc ny.</p>\n</li>\n<li><p>Private phng thc, gi  chnh class m n c khai bo, ngoi ra m qun khng c ngoi ra, ch vy thi.</p>\n</li>\n</ol>\n<p>Nhng trch rt trn da theo ngn ng m chng ta cng theo ui ngy i hc C++. Vy vi Ruby? Liu nhng pht biu trn liu cn ng?</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><p>Khng, nhng trch rt trn khng cn ng n hon ton vi ngn ng Ruby. C mt s khc bit. Trong bi vit ny chng ta s i s qua v n.</p>\n<p>M sao li l s qua? sao bi no cng dng t i s qua m khng phi l p  rai tu g , vit blog kiu cm ngui nh ny vit lm g (angry).</p>\n<p>=&gt; V y khng phi kin thc cao siu g c, c v vn ti liu anh ng  cp n n ri v ti khng thy ci l do g  c c ti liu tht nhiu, translate tht  tay, ri vietsub ra mt bi vit di nh sng Hng  ni v mt ch  v cng normal  th hin bn thn c :smile:</p>\n<h1 id=\"Lay-mot-vi-du\"><a href=\"#Lay-mot-vi-du\" class=\"headerlink\" title=\"Ly mt v d\"></a>Ly mt v d</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"comment\"># default public method</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_public</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao public mot cach quy toc\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  protected</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_protected</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao protected mot cach sexy\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_private</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao private mot  cach len lut\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Ra ngoi scope ca class ny ri chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.new.cat_hello_public</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc.</span></span><br><span class=\"line\">Cat.new.cat_hello_protected</span><br><span class=\"line\"><span class=\"comment\"># =&gt; error</span></span><br><span class=\"line\">Cat.new.cat_hello_private</span><br><span class=\"line\"><span class=\"comment\"># =&gt; error</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> public c th gi ngoi tm vc ca mt class, nhng method cn li th khng. ng ngha vi vic bn ch cn m bo ref c file cha class c phng thc public  th bn c th thoi mi gi phng thc ny.</p>\n<h1 id=\"Them-mot-class-con-ke-thua\"><a href=\"#Them-mot-class-con-ke-thua\" class=\"headerlink\" title=\"Thm mt class con k tha\"></a>Thm mt class con k tha</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.cat_hello_public</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc.</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> Phng thc public c th c gi cng khai bi class k tha ca class cha phng thc .</p>\n<h1 id=\"Goi-3-phuong-thuc-Cat-trong-mot-method-thuoc-YellowCat\"><a href=\"#Goi-3-phuong-thuc-Cat-trong-mot-method-thuoc-YellowCat\" class=\"headerlink\" title=\"Gi 3 phng thc Cat trong mt method thuc YellowCat\"></a>Gi 3 phng thc Cat trong mt method thuc YellowCat</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat</span></span></span><br><span class=\"line\">    cat_hello_public</span><br><span class=\"line\">    cat_hello_protected</span><br><span class=\"line\">    cat_hello_private</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.yellow_cat</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao protected mot cach sexy</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao private mot  cach len lut</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> C 3 dng phng thc u c th c gi trong lp con (Trong lp con nh).</p>\n<h1 id=\"Trong-phuong-thuc-yellow-cat-khai-bao-mot-doi-tuong-Cat-va-goi-toi-3-phuong-thuc\"><a href=\"#Trong-phuong-thuc-yellow-cat-khai-bao-mot-doi-tuong-Cat-va-goi-toi-3-phuong-thuc\" class=\"headerlink\" title=\"Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc\"></a>Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat</span></span></span><br><span class=\"line\">    cat = Cat.new</span><br><span class=\"line\">    cat.cat_hello_public</span><br><span class=\"line\">    cat.cat_hello_protected</span><br><span class=\"line\">    cat.cat_hello_private</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.yellow_cat</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao protected mot cach sexy</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt;  error</span></span><br></pre></td></tr></table></figure>\n\n<p>:arrow_right: <strong>Note:</strong> Trong mt lp con k tha t lp cha, public v protected method ca lp cha c th c lp con access thng qua <code>implicit receiver</code> and <code>explicit receiver</code>. Cn private method th ch c th c access thng qua <code>implicit receiver</code>.</p>\n<p>:one: <strong>Implicit receiver</strong>: Khng ch nh i tng s thc hin phng thc.</p>\n<p>:two: <strong>Explicit receiver</strong>: Ch nh r rng i tng s thc hin phng thc.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Nu c ng gp v bi vit hoc ght thi  tc gi vit bi s si hi ht th hy  li bnh lun nh.</p>\n"},{"title":"T Kho Super Trong Ruby?","date":"2019-06-15T17:00:00.000Z","draft":false,"_content":"\n# t vn \n\nK tha l mt 1 trong 4 yu t ct li to nn c tnh hng i tng ca mt ngn ng (nh nhng g chng ta  c dy  trng). Ring iu  thi    th hin tm quan trng ca n (c tht khng nh :grimacing:).\n\nTrong ngn ng ruby c mt t kho thng xuyn xut hin khi cn k tha hay override li phng thc lp cha  l `super`.\n\nQua bi vit chng ta s cng tm hiu v n.\n\n# Lun bn\n\n# 1. nh ngha\n\n```\nIt calls a method on the parent class with the same name as the method that calls super.\n```\n\nV d:\n\n```ruby\nclass Dog < Pig\n  def testing\n    super\n  end\nend\n```\n\n=> Khi ta gi phng thc `testing` vi mt instance ca lp Dog, ruby s i n class cha/ng/c/k... ca `Dog`  tm v chy phng thc `testing` c implement  lp cha/ng/c/k... .\n\n# 2. So snh super v super()\n\nVi nhng bn mi hc, chng ta i lc s nhm ln l 2 cch gi ny thc cht l mt, cng bi v ruby cho php s dng `()` nh mt optional, tc l c cng c m khng c cng c.\n\nNhng thc ra khng phi vy, 2 cch s dng ny s dn n cc kt qa khc nhau.\n\nCng xt mt v d: Gi s ti c class Cat v mt class con ca Cat tn l YellowCat, m ngun nh sau.\n\nS dng super\n\n```ruby\nclass Cat\n  def initialize\n    puts \"i'm meo\"\n  end\nend\n\nclass YellowCat < Cat\n  def initialize\n    super\n  end\nend\n\nYellowCat.new\n\n# => i'm meo\n```\n\nS dng super()\n\n```ruby\nclass Cat\n  def initialize\n    puts \"i'm meo\"\n  end\nend\n\nclass YellowCat < Cat\n  def initialize\n    super\n  end\nend\n\nYellowCat.new\n\n# => i'm meo\n```\n\n**Kt qu l tng t nhau, iu ny gip chng ta ghi nh mt ,  l khi khng c tham s truyn vo method th dng `super` hay `super()` l tng ng nhau**\n\nTa xt mt v d khc:\n\nS dng super\n\n```ruby\nclass Cat\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n\nclass YellowCat < Cat\n  def initialize(name)\n    super\n  end\nend\n\nmeo = YellowCat.new('mi mi')\n\nputs \"ten meo: #{meo.name}\"\n# => ten meo: mi mi\n```\n\nS dng super()\n\n```ruby\nclass Cat\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n\nclass YellowCat < Cat\n  def initialize(name)\n    super()\n  end\nend\n\nmeo = YellowCat.new('mi mi')\n\nputs \"ten meo: #{meo.name}\"\n# => ten meo: mi mi\n```\n\nn by gi chng ta  pht sinh mt li `wrong number of arguments (given 0, expected 1)`.\niu ny xy ra l v:\n\n**Vi t kho `super` bn s truyn TT C tham s ln method   lp cha. Cn vi `super()` bn ch truyn ln lp cha nhng tham s m bn b vo trong `super()`.**\n\nNh ta thy trong v d trn, ta khng b g vo `super()` => khi ln lp cha (lp Cat) method initialize yu cu tham s name nhng chng ta khng truyn g ln v t  dn n li wrong number of arguments.\n\n khc phc chng ta ch cn truyn tham s vo super()  lp Cat nhn c tham s .\n\n```ruby\nclass YellowCat < Cat\n  def initialize(name)\n    super(name)\n  end\nend\n```\n\n# 3. S hu ch ca super()\n\nTi c mt bi ton:\n\n:one: Ti c 1 lp Cat vi 2 instance variable l name v age.\n:two: Lp YellowCat l lp con ca Cat.\n:three: Lp YellowCat c thm 1 instance variable l role.\n\nXy dng lp Cat c v n gin, ta lm nh sau:\n\n```ruby\nclass Cat < Animal\n  attr_accessor :name, :age\n\n  def initialize(name, age)\n    @name = name\n    @age = age\n  end\nend\n\n# => hon thnh yu cu\n```\n\nTip theo n lp  YellowCat, xem chng cng khng kh:\n\n```ruby\nclass YellowCat < Cat\n  attr_accessor :yellow_cat_name, :yellow_cat_age, :role\n\n  def initialize(yellow_cat_name, yellow_cat_age, role)\n    @yellow_cat_name = yellow_cat_name\n    @yellow_cat_age = yellow_cat_age\n    @role = role\n  end\nend\n\n# => Cng hon thnh yu cu.\n```\n\nCch ny cng hon thnh c yu cu ca bi ton, nhng n khng n t no. V sao? V khi bn to mt instance thuc lp YellowCat n s c tng cng 5 instance variable bao gm 3 instance variable khai bo trong lp YellowCat, v 2 trong lp Cat (b tha 2 instance variable).\n\niu ny i ngc li vi cc quy tc lp trnh quan trng chng ta cn tun th nh DRY.\n\nn y sc mnh `super()` s c thi c  th hin. Ta s optimize li m ngun ca YellowCat nh sau:\n\n```ruby\nclass YellowCat < Cat\n  # thm mt instance variable\n  attr_accessor :role\n\n  def initialize(name, age, role)\n    super(name, age)\n    @role = role\n  end\nend\n\nmeo2 = YellowCat.new('ni ni', 10, 'admin')\nputs \"ten meo la: #{meo2.name} \\ntuoi meo la: #{meo2.age} \\nrole cua meo la: #{meo2.role}\"\n\n# => ten meo la: ni ni\n# => tuoi meo la: 10\n# => role cua meo la: admin\n```\n\n lp con chng ta c thm 1 instance variable, chng ta khai bo cho mnh n v duy nht mi n :arrow_right: khng lng ph vng nh v tn dng c m ngun c.\n\nTrong phng thc khi to i tng YellowCat chng ta khi to bin instance mi, cn 2 instance variable c k tha t lp cha th ta truyn tham s vo `super()`  truyn ln lp cha v mc k lp cha x l th no th tu.\n\n# Kt lun\n\nTi liu tham kho:\n[1] [odetocode.com](https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx)\n","source":"_posts/2019-06-16-tu-khoa-super-trong-ruby.md","raw":"---\ntitle: \"T Kho Super Trong Ruby?\"\ndate: 2019-06-16\ndraft: false\ntags: [\"RUBY\"]\ncategories: [\"RUBY\"]\n\n---\n\n# t vn \n\nK tha l mt 1 trong 4 yu t ct li to nn c tnh hng i tng ca mt ngn ng (nh nhng g chng ta  c dy  trng). Ring iu  thi    th hin tm quan trng ca n (c tht khng nh :grimacing:).\n\nTrong ngn ng ruby c mt t kho thng xuyn xut hin khi cn k tha hay override li phng thc lp cha  l `super`.\n\nQua bi vit chng ta s cng tm hiu v n.\n\n# Lun bn\n\n# 1. nh ngha\n\n```\nIt calls a method on the parent class with the same name as the method that calls super.\n```\n\nV d:\n\n```ruby\nclass Dog < Pig\n  def testing\n    super\n  end\nend\n```\n\n=> Khi ta gi phng thc `testing` vi mt instance ca lp Dog, ruby s i n class cha/ng/c/k... ca `Dog`  tm v chy phng thc `testing` c implement  lp cha/ng/c/k... .\n\n# 2. So snh super v super()\n\nVi nhng bn mi hc, chng ta i lc s nhm ln l 2 cch gi ny thc cht l mt, cng bi v ruby cho php s dng `()` nh mt optional, tc l c cng c m khng c cng c.\n\nNhng thc ra khng phi vy, 2 cch s dng ny s dn n cc kt qa khc nhau.\n\nCng xt mt v d: Gi s ti c class Cat v mt class con ca Cat tn l YellowCat, m ngun nh sau.\n\nS dng super\n\n```ruby\nclass Cat\n  def initialize\n    puts \"i'm meo\"\n  end\nend\n\nclass YellowCat < Cat\n  def initialize\n    super\n  end\nend\n\nYellowCat.new\n\n# => i'm meo\n```\n\nS dng super()\n\n```ruby\nclass Cat\n  def initialize\n    puts \"i'm meo\"\n  end\nend\n\nclass YellowCat < Cat\n  def initialize\n    super\n  end\nend\n\nYellowCat.new\n\n# => i'm meo\n```\n\n**Kt qu l tng t nhau, iu ny gip chng ta ghi nh mt ,  l khi khng c tham s truyn vo method th dng `super` hay `super()` l tng ng nhau**\n\nTa xt mt v d khc:\n\nS dng super\n\n```ruby\nclass Cat\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n\nclass YellowCat < Cat\n  def initialize(name)\n    super\n  end\nend\n\nmeo = YellowCat.new('mi mi')\n\nputs \"ten meo: #{meo.name}\"\n# => ten meo: mi mi\n```\n\nS dng super()\n\n```ruby\nclass Cat\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n\nclass YellowCat < Cat\n  def initialize(name)\n    super()\n  end\nend\n\nmeo = YellowCat.new('mi mi')\n\nputs \"ten meo: #{meo.name}\"\n# => ten meo: mi mi\n```\n\nn by gi chng ta  pht sinh mt li `wrong number of arguments (given 0, expected 1)`.\niu ny xy ra l v:\n\n**Vi t kho `super` bn s truyn TT C tham s ln method   lp cha. Cn vi `super()` bn ch truyn ln lp cha nhng tham s m bn b vo trong `super()`.**\n\nNh ta thy trong v d trn, ta khng b g vo `super()` => khi ln lp cha (lp Cat) method initialize yu cu tham s name nhng chng ta khng truyn g ln v t  dn n li wrong number of arguments.\n\n khc phc chng ta ch cn truyn tham s vo super()  lp Cat nhn c tham s .\n\n```ruby\nclass YellowCat < Cat\n  def initialize(name)\n    super(name)\n  end\nend\n```\n\n# 3. S hu ch ca super()\n\nTi c mt bi ton:\n\n:one: Ti c 1 lp Cat vi 2 instance variable l name v age.\n:two: Lp YellowCat l lp con ca Cat.\n:three: Lp YellowCat c thm 1 instance variable l role.\n\nXy dng lp Cat c v n gin, ta lm nh sau:\n\n```ruby\nclass Cat < Animal\n  attr_accessor :name, :age\n\n  def initialize(name, age)\n    @name = name\n    @age = age\n  end\nend\n\n# => hon thnh yu cu\n```\n\nTip theo n lp  YellowCat, xem chng cng khng kh:\n\n```ruby\nclass YellowCat < Cat\n  attr_accessor :yellow_cat_name, :yellow_cat_age, :role\n\n  def initialize(yellow_cat_name, yellow_cat_age, role)\n    @yellow_cat_name = yellow_cat_name\n    @yellow_cat_age = yellow_cat_age\n    @role = role\n  end\nend\n\n# => Cng hon thnh yu cu.\n```\n\nCch ny cng hon thnh c yu cu ca bi ton, nhng n khng n t no. V sao? V khi bn to mt instance thuc lp YellowCat n s c tng cng 5 instance variable bao gm 3 instance variable khai bo trong lp YellowCat, v 2 trong lp Cat (b tha 2 instance variable).\n\niu ny i ngc li vi cc quy tc lp trnh quan trng chng ta cn tun th nh DRY.\n\nn y sc mnh `super()` s c thi c  th hin. Ta s optimize li m ngun ca YellowCat nh sau:\n\n```ruby\nclass YellowCat < Cat\n  # thm mt instance variable\n  attr_accessor :role\n\n  def initialize(name, age, role)\n    super(name, age)\n    @role = role\n  end\nend\n\nmeo2 = YellowCat.new('ni ni', 10, 'admin')\nputs \"ten meo la: #{meo2.name} \\ntuoi meo la: #{meo2.age} \\nrole cua meo la: #{meo2.role}\"\n\n# => ten meo la: ni ni\n# => tuoi meo la: 10\n# => role cua meo la: admin\n```\n\n lp con chng ta c thm 1 instance variable, chng ta khai bo cho mnh n v duy nht mi n :arrow_right: khng lng ph vng nh v tn dng c m ngun c.\n\nTrong phng thc khi to i tng YellowCat chng ta khi to bin instance mi, cn 2 instance variable c k tha t lp cha th ta truyn tham s vo `super()`  truyn ln lp cha v mc k lp cha x l th no th tu.\n\n# Kt lun\n\nTi liu tham kho:\n[1] [odetocode.com](https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx)\n","slug":"2019-06-16-tu-khoa-super-trong-ruby","published":1,"updated":"2019-12-06T15:39:52.594Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3g002c8ers13aj9ifp","content":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>K tha l mt 1 trong 4 yu t ct li to nn c tnh hng i tng ca mt ngn ng (nh nhng g chng ta  c dy  trng). Ring iu  thi    th hin tm quan trng ca n (c tht khng nh :grimacing:).</p>\n<p>Trong ngn ng ruby c mt t kho thng xuyn xut hin khi cn k tha hay override li phng thc lp cha  l <code>super</code>.</p>\n<p>Qua bi vit chng ta s cng tm hiu v n.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Dinh-nghia\"><a href=\"#1-Dinh-nghia\" class=\"headerlink\" title=\"1. nh ngha\"></a>1. nh ngha</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">It calls a method on the parent class with the same name as the method that calls super.</span><br></pre></td></tr></table></figure>\n\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> &lt; Pig</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">testing</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>=&gt; Khi ta gi phng thc <code>testing</code> vi mt instance ca lp Dog, ruby s i n class cha/ng/c/k ca <code>Dog</code>  tm v chy phng thc <code>testing</code> c implement  lp cha/ng/c/k .</p>\n<h1 id=\"2-So-sanh-super-va-super\"><a href=\"#2-So-sanh-super-va-super\" class=\"headerlink\" title=\"2. So snh super v super()\"></a>2. So snh super v super()</h1><p>Vi nhng bn mi hc, chng ta i lc s nhm ln l 2 cch gi ny thc cht l mt, cng bi v ruby cho php s dng <code>()</code> nh mt optional, tc l c cng c m khng c cng c.</p>\n<p>Nhng thc ra khng phi vy, 2 cch s dng ny s dn n cc kt qa khc nhau.</p>\n<p>Cng xt mt v d: Gi s ti c class Cat v mt class con ca Cat tn l YellowCat, m ngun nh sau.</p>\n<p>S dng super</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"i'm meo\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">YellowCat.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; i'm meo</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng super()</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"i'm meo\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">YellowCat.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; i'm meo</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Kt qu l tng t nhau, iu ny gip chng ta ghi nh mt ,  l khi khng c tham s truyn vo method th dng <code>super</code> hay <code>super()</code> l tng ng nhau</strong></p>\n<p>Ta xt mt v d khc:</p>\n<p>S dng super</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo = YellowCat.new(<span class=\"string\">'mi mi'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"ten meo: <span class=\"subst\">#&#123;meo.name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo: mi mi</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng super()</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>()</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo = YellowCat.new(<span class=\"string\">'mi mi'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"ten meo: <span class=\"subst\">#&#123;meo.name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo: mi mi</span></span><br></pre></td></tr></table></figure>\n\n<p>n by gi chng ta  pht sinh mt li <code>wrong number of arguments (given 0, expected 1)</code>.<br>iu ny xy ra l v:</p>\n<p><strong>Vi t kho <code>super</code> bn s truyn TT C tham s ln method   lp cha. Cn vi <code>super()</code> bn ch truyn ln lp cha nhng tham s m bn b vo trong <code>super()</code>.</strong></p>\n<p>Nh ta thy trong v d trn, ta khng b g vo <code>super()</code> =&gt; khi ln lp cha (lp Cat) method initialize yu cu tham s name nhng chng ta khng truyn g ln v t  dn n li wrong number of arguments.</p>\n<p> khc phc chng ta ch cn truyn tham s vo super()  lp Cat nhn c tham s .</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-Su-huu-ich-cua-super\"><a href=\"#3-Su-huu-ich-cua-super\" class=\"headerlink\" title=\"3. S hu ch ca super()\"></a>3. S hu ch ca super()</h1><p>Ti c mt bi ton:</p>\n<p>:one: Ti c 1 lp Cat vi 2 instance variable l name v age.<br>:two: Lp YellowCat l lp con ca Cat.<br>:three: Lp YellowCat c thm 1 instance variable l role.</p>\n<p>Xy dng lp Cat c v n gin, ta lm nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span>, <span class=\"symbol\">:age</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name, age)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">    @age = age</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; hon thnh yu cu</span></span><br></pre></td></tr></table></figure>\n\n<p>Tip theo n lp  YellowCat, xem chng cng khng kh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:yellow_cat_name</span>, <span class=\"symbol\">:yellow_cat_age</span>, <span class=\"symbol\">:role</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(yellow_cat_name, yellow_cat_age, role)</span></span></span><br><span class=\"line\">    @yellow_cat_name = yellow_cat_name</span><br><span class=\"line\">    @yellow_cat_age = yellow_cat_age</span><br><span class=\"line\">    @role = role</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; Cng hon thnh yu cu.</span></span><br></pre></td></tr></table></figure>\n\n<p>Cch ny cng hon thnh c yu cu ca bi ton, nhng n khng n t no. V sao? V khi bn to mt instance thuc lp YellowCat n s c tng cng 5 instance variable bao gm 3 instance variable khai bo trong lp YellowCat, v 2 trong lp Cat (b tha 2 instance variable).</p>\n<p>iu ny i ngc li vi cc quy tc lp trnh quan trng chng ta cn tun th nh DRY.</p>\n<p>n y sc mnh <code>super()</code> s c thi c  th hin. Ta s optimize li m ngun ca YellowCat nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"comment\"># thm mt instance variable</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:role</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name, age, role)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name, age)</span><br><span class=\"line\">    @role = role</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo2 = YellowCat.new(<span class=\"string\">'ni ni'</span>, <span class=\"number\">10</span>, <span class=\"string\">'admin'</span>)</span><br><span class=\"line\">puts <span class=\"string\">\"ten meo la: <span class=\"subst\">#&#123;meo2.name&#125;</span> \\ntuoi meo la: <span class=\"subst\">#&#123;meo2.age&#125;</span> \\nrole cua meo la: <span class=\"subst\">#&#123;meo2.role&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo la: ni ni</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; tuoi meo la: 10</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; role cua meo la: admin</span></span><br></pre></td></tr></table></figure>\n\n<p> lp con chng ta c thm 1 instance variable, chng ta khai bo cho mnh n v duy nht mi n :arrow_right: khng lng ph vng nh v tn dng c m ngun c.</p>\n<p>Trong phng thc khi to i tng YellowCat chng ta khi to bin instance mi, cn 2 instance variable c k tha t lp cha th ta truyn tham s vo <code>super()</code>  truyn ln lp cha v mc k lp cha x l th no th tu.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Ti liu tham kho:<br>[1] <a href=\"https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx\" target=\"_blank\" rel=\"noopener\">odetocode.com</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h1><p>K tha l mt 1 trong 4 yu t ct li to nn c tnh hng i tng ca mt ngn ng (nh nhng g chng ta  c dy  trng). Ring iu  thi    th hin tm quan trng ca n (c tht khng nh :grimacing:).</p>\n<p>Trong ngn ng ruby c mt t kho thng xuyn xut hin khi cn k tha hay override li phng thc lp cha  l <code>super</code>.</p>\n<p>Qua bi vit chng ta s cng tm hiu v n.</p>\n<h1 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h1><h1 id=\"1-Dinh-nghia\"><a href=\"#1-Dinh-nghia\" class=\"headerlink\" title=\"1. nh ngha\"></a>1. nh ngha</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">It calls a method on the parent class with the same name as the method that calls super.</span><br></pre></td></tr></table></figure>\n\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> &lt; Pig</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">testing</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>=&gt; Khi ta gi phng thc <code>testing</code> vi mt instance ca lp Dog, ruby s i n class cha/ng/c/k ca <code>Dog</code>  tm v chy phng thc <code>testing</code> c implement  lp cha/ng/c/k .</p>\n<h1 id=\"2-So-sanh-super-va-super\"><a href=\"#2-So-sanh-super-va-super\" class=\"headerlink\" title=\"2. So snh super v super()\"></a>2. So snh super v super()</h1><p>Vi nhng bn mi hc, chng ta i lc s nhm ln l 2 cch gi ny thc cht l mt, cng bi v ruby cho php s dng <code>()</code> nh mt optional, tc l c cng c m khng c cng c.</p>\n<p>Nhng thc ra khng phi vy, 2 cch s dng ny s dn n cc kt qa khc nhau.</p>\n<p>Cng xt mt v d: Gi s ti c class Cat v mt class con ca Cat tn l YellowCat, m ngun nh sau.</p>\n<p>S dng super</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"i'm meo\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">YellowCat.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; i'm meo</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng super()</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"i'm meo\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">YellowCat.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; i'm meo</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Kt qu l tng t nhau, iu ny gip chng ta ghi nh mt ,  l khi khng c tham s truyn vo method th dng <code>super</code> hay <code>super()</code> l tng ng nhau</strong></p>\n<p>Ta xt mt v d khc:</p>\n<p>S dng super</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo = YellowCat.new(<span class=\"string\">'mi mi'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"ten meo: <span class=\"subst\">#&#123;meo.name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo: mi mi</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng super()</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>()</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo = YellowCat.new(<span class=\"string\">'mi mi'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"ten meo: <span class=\"subst\">#&#123;meo.name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo: mi mi</span></span><br></pre></td></tr></table></figure>\n\n<p>n by gi chng ta  pht sinh mt li <code>wrong number of arguments (given 0, expected 1)</code>.<br>iu ny xy ra l v:</p>\n<p><strong>Vi t kho <code>super</code> bn s truyn TT C tham s ln method   lp cha. Cn vi <code>super()</code> bn ch truyn ln lp cha nhng tham s m bn b vo trong <code>super()</code>.</strong></p>\n<p>Nh ta thy trong v d trn, ta khng b g vo <code>super()</code> =&gt; khi ln lp cha (lp Cat) method initialize yu cu tham s name nhng chng ta khng truyn g ln v t  dn n li wrong number of arguments.</p>\n<p> khc phc chng ta ch cn truyn tham s vo super()  lp Cat nhn c tham s .</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-Su-huu-ich-cua-super\"><a href=\"#3-Su-huu-ich-cua-super\" class=\"headerlink\" title=\"3. S hu ch ca super()\"></a>3. S hu ch ca super()</h1><p>Ti c mt bi ton:</p>\n<p>:one: Ti c 1 lp Cat vi 2 instance variable l name v age.<br>:two: Lp YellowCat l lp con ca Cat.<br>:three: Lp YellowCat c thm 1 instance variable l role.</p>\n<p>Xy dng lp Cat c v n gin, ta lm nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span>, <span class=\"symbol\">:age</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name, age)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">    @age = age</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; hon thnh yu cu</span></span><br></pre></td></tr></table></figure>\n\n<p>Tip theo n lp  YellowCat, xem chng cng khng kh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:yellow_cat_name</span>, <span class=\"symbol\">:yellow_cat_age</span>, <span class=\"symbol\">:role</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(yellow_cat_name, yellow_cat_age, role)</span></span></span><br><span class=\"line\">    @yellow_cat_name = yellow_cat_name</span><br><span class=\"line\">    @yellow_cat_age = yellow_cat_age</span><br><span class=\"line\">    @role = role</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; Cng hon thnh yu cu.</span></span><br></pre></td></tr></table></figure>\n\n<p>Cch ny cng hon thnh c yu cu ca bi ton, nhng n khng n t no. V sao? V khi bn to mt instance thuc lp YellowCat n s c tng cng 5 instance variable bao gm 3 instance variable khai bo trong lp YellowCat, v 2 trong lp Cat (b tha 2 instance variable).</p>\n<p>iu ny i ngc li vi cc quy tc lp trnh quan trng chng ta cn tun th nh DRY.</p>\n<p>n y sc mnh <code>super()</code> s c thi c  th hin. Ta s optimize li m ngun ca YellowCat nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"comment\"># thm mt instance variable</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:role</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name, age, role)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name, age)</span><br><span class=\"line\">    @role = role</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo2 = YellowCat.new(<span class=\"string\">'ni ni'</span>, <span class=\"number\">10</span>, <span class=\"string\">'admin'</span>)</span><br><span class=\"line\">puts <span class=\"string\">\"ten meo la: <span class=\"subst\">#&#123;meo2.name&#125;</span> \\ntuoi meo la: <span class=\"subst\">#&#123;meo2.age&#125;</span> \\nrole cua meo la: <span class=\"subst\">#&#123;meo2.role&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo la: ni ni</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; tuoi meo la: 10</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; role cua meo la: admin</span></span><br></pre></td></tr></table></figure>\n\n<p> lp con chng ta c thm 1 instance variable, chng ta khai bo cho mnh n v duy nht mi n :arrow_right: khng lng ph vng nh v tn dng c m ngun c.</p>\n<p>Trong phng thc khi to i tng YellowCat chng ta khi to bin instance mi, cn 2 instance variable c k tha t lp cha th ta truyn tham s vo <code>super()</code>  truyn ln lp cha v mc k lp cha x l th no th tu.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Ti liu tham kho:<br>[1] <a href=\"https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx\" target=\"_blank\" rel=\"noopener\">odetocode.com</a></p>\n"},{"title":"A Simple Rack Application","date":"2019-06-23T17:00:00.000Z","draft":false,"_content":"\n# 1. t vn \nC l cng nh ti, khi mi tip cn vi mt framework ruby nh Rails chng hn, bn  nghe v Rack? hoc t ra cng tng thy ci `gem rack` trong Gemfile. Nhng c khi no bn dng n chng? Khng ? Ti cng ngh vy, ti cng k, ti cng ch quan tm, cuc sng khng  high hay sao m li m u vo ci kh :alien:.\n\nNhng lm vic hng ngy vi n m khng hiu n l g lun lm cho ta cm gic bt an v nh, cp nht CV l Developer m i phng vn c hi rack l g, li tr li \"em...em..em hng bit\" th liu c b nh xung rank junior hay khng? Thi th c tm hiu coi n ra sao.\n\nV th l ti  c docs trn trang ch ca Rack, ni chung c qua th c hiu, m ci hiu n mng lung nh mt tr a, cht na th nh phi \"anh xin gi tay rt lui thi\".\n\nVy nn ti s vit mt ng dng Rack (chy trn Rack) very..very simple,  ti v c th c bn c ci nhn thong qua v Rack trc , ch ti thy hiu bit hin ti ca mnh cha   chm gi hn lm v ch  ny (hy vng tng lai gn s c bi chm gi hn lm).\n\n# 2. Tham kho?\n\n1. Bi vit ny ti tham kho cch s dng Rack trn trang ch ca Rack [ti y](https://rack.github.io/) v trn mc docs ca ruby [ti y](https://www.rubydoc.info/github/rack/rack/).\n\n2. ng dng rt th s v KHNG s dng \"bt p rch tt\" no c.\n\n\n# 3. Kin thc cn chun b trc.\n\nD t d nhiu th vn phi nh qua l thuyt mt cht trc khi my m lm g . Mt s khi nim/quy trnh chng ta nn nm trc nh sau:\n\n1) Rack l mt lp nm gia web/app server v ng dng.\n\nEx: Nu ti s dng Rails vi app server l Puma, web server l Nginx th ng i ca mt request s nh sau:\n\n![hoa](/images/rack.jpeg)\n\nNote: Khi nim `web server` v `app server` chng ta s bn ti sau.\n\n2) Nh hnh trn, ta c th thy Rack s giao tip vi `app server`, nn Rack s nhn request t app server gi qua, vi ni dung lng nhng ri rm g , sau  Rack s `lm g ` vi ci request ri rm kia, ri gi kt qu m Rails c th hiu v thc thi c. Sau  Rails s gi v cho Rack kt qu cng ri rm khng km v nhim v ca Rack li l tip tc `lm g ` ci kt qu t Rails, sao cho chuyn kt qu  thnh 1 th g  m app server c th hiu, cui cng app server qung kt qu v cho ngi dng.\n\nNote: Vy Rack nh mt phin dch vin  truyn t gia ng dng v app server (Khng tht s ng v bn cht nhng ta c tm chp nhn lin tng ny).\n\n# 4. Build mt simple Rack application\n\n- To 1 Folder vi 1 file tn `Gemfile` c ni dung nh sau:\n\n```ruby\nsource 'https://rubygems.org'\n\ngem 'rack'\n```\n\n- Ci t gem vi lnh `bundle install`\n\n- To file `config.ru`.\n\nNote: y s l file main  x l request.\n\n- Chy project vi lnh `bundle exec rackup`\n\n> Project demo [ti y!](https://github.com/hdchinh/simple-rack-app)\n\n# 5. Gii thch ni dung m ngun ca app demo\n\n```ruby\nmap '/signup_user' do\n  run SignUpUser.new\nend\n\nmap '/signup' do\n  run MySignUp.new\nend\n\nmap '/signin' do\n  run MySignIn.new\nend\n\nmap '/signin_user' do\n  run SignInUser.new\nend\n\nmap '/' do\n  run HomePage.new\nend\n\nrun MyNotFound.new\n```\n\nChc bn cng c th on ra  ngha ca n, nu map chng ng dn th s chy lnh trong .\n\nEx:\n\n```ruby\nmap '/' do\n  run HomePage.new\nend\n```\n\nNu truy cp theo trang ch th s chy lnh `run HomePage.new`.\n\nNu url ngi dng request khng trng bt c trng hp no th chy lnh `run MyNotFound.new`  cui.\n\nMt class s c dng nh sau:\n\n```ruby\nclass SignInUser\n  def call(env)\n    # read file data\n    file = File.read('data.txt')\n\n    # get params\n    data =  Rack::Utils.parse_nested_query(env['QUERY_STRING'])\n    email = data['email']\n    pass = data['password']\n\n    # convert file data from string to hash\n    hash_data = eval(file)\n    # init variable for user login\n    user_email = nil\n\n    # loop hash to find email params\n    hash_data.each do |k, val|\n      if k == email\n        if val = pass\n          user_email = k\n        end\n      end\n    end\n\n    if user_email\n      body = [\"<h1>email: #{user_email}<h/1>\"]\n    else\n      body = [\"<h1>Email or Password Invalid</h1>\"]\n    end\n\n    [200, {'Content-Type' => 'text/html'}, body]\n  end\nend\n```\n\nBn thy phc tp? Khng sao c, ch cn ch  n dng cui cng trong method call. Ta ch cn nh:\n\n- Mi class s dng method call  ci t (yu cu ca Rack).\n\n- Trong method ny nhn vo mt params, y chnh l request i ti.\n\n- Kt qu tr v ca method call ny l mt mng gm 3 phn t:\n\n  1. Status code (V d nh: 200 -> success, 404 -> not found).\n  2. Mt hash,  y chnh l header, cha nhng thng tin m trnh duyt cn.\n  3. Phn t cui cng l mt mng, chnh l phn body ca kt qu tr v.\n\n# 6. Kt lun\n\nTrn l mt basic app xy dng vi Rack, v nh ngha ch c khng lm s rt kh hiu, nn ti lm demo trc, hy vng trong thi gian ti nu kin thc thu lm   vit v cch vn hnh ca Rack mt cch su sc, ti c th tip tc ch  ny.\n","source":"_posts/2019-06-24-simple-rack-application.md","raw":"---\ntitle: \"A Simple Rack Application\"\ndate: 2019-06-24\ndraft: false\ntags: [\"RACK\", \"RUBY\"]\ncategories: [\"RUBY\"]\n---\n\n# 1. t vn \nC l cng nh ti, khi mi tip cn vi mt framework ruby nh Rails chng hn, bn  nghe v Rack? hoc t ra cng tng thy ci `gem rack` trong Gemfile. Nhng c khi no bn dng n chng? Khng ? Ti cng ngh vy, ti cng k, ti cng ch quan tm, cuc sng khng  high hay sao m li m u vo ci kh :alien:.\n\nNhng lm vic hng ngy vi n m khng hiu n l g lun lm cho ta cm gic bt an v nh, cp nht CV l Developer m i phng vn c hi rack l g, li tr li \"em...em..em hng bit\" th liu c b nh xung rank junior hay khng? Thi th c tm hiu coi n ra sao.\n\nV th l ti  c docs trn trang ch ca Rack, ni chung c qua th c hiu, m ci hiu n mng lung nh mt tr a, cht na th nh phi \"anh xin gi tay rt lui thi\".\n\nVy nn ti s vit mt ng dng Rack (chy trn Rack) very..very simple,  ti v c th c bn c ci nhn thong qua v Rack trc , ch ti thy hiu bit hin ti ca mnh cha   chm gi hn lm v ch  ny (hy vng tng lai gn s c bi chm gi hn lm).\n\n# 2. Tham kho?\n\n1. Bi vit ny ti tham kho cch s dng Rack trn trang ch ca Rack [ti y](https://rack.github.io/) v trn mc docs ca ruby [ti y](https://www.rubydoc.info/github/rack/rack/).\n\n2. ng dng rt th s v KHNG s dng \"bt p rch tt\" no c.\n\n\n# 3. Kin thc cn chun b trc.\n\nD t d nhiu th vn phi nh qua l thuyt mt cht trc khi my m lm g . Mt s khi nim/quy trnh chng ta nn nm trc nh sau:\n\n1) Rack l mt lp nm gia web/app server v ng dng.\n\nEx: Nu ti s dng Rails vi app server l Puma, web server l Nginx th ng i ca mt request s nh sau:\n\n![hoa](/images/rack.jpeg)\n\nNote: Khi nim `web server` v `app server` chng ta s bn ti sau.\n\n2) Nh hnh trn, ta c th thy Rack s giao tip vi `app server`, nn Rack s nhn request t app server gi qua, vi ni dung lng nhng ri rm g , sau  Rack s `lm g ` vi ci request ri rm kia, ri gi kt qu m Rails c th hiu v thc thi c. Sau  Rails s gi v cho Rack kt qu cng ri rm khng km v nhim v ca Rack li l tip tc `lm g ` ci kt qu t Rails, sao cho chuyn kt qu  thnh 1 th g  m app server c th hiu, cui cng app server qung kt qu v cho ngi dng.\n\nNote: Vy Rack nh mt phin dch vin  truyn t gia ng dng v app server (Khng tht s ng v bn cht nhng ta c tm chp nhn lin tng ny).\n\n# 4. Build mt simple Rack application\n\n- To 1 Folder vi 1 file tn `Gemfile` c ni dung nh sau:\n\n```ruby\nsource 'https://rubygems.org'\n\ngem 'rack'\n```\n\n- Ci t gem vi lnh `bundle install`\n\n- To file `config.ru`.\n\nNote: y s l file main  x l request.\n\n- Chy project vi lnh `bundle exec rackup`\n\n> Project demo [ti y!](https://github.com/hdchinh/simple-rack-app)\n\n# 5. Gii thch ni dung m ngun ca app demo\n\n```ruby\nmap '/signup_user' do\n  run SignUpUser.new\nend\n\nmap '/signup' do\n  run MySignUp.new\nend\n\nmap '/signin' do\n  run MySignIn.new\nend\n\nmap '/signin_user' do\n  run SignInUser.new\nend\n\nmap '/' do\n  run HomePage.new\nend\n\nrun MyNotFound.new\n```\n\nChc bn cng c th on ra  ngha ca n, nu map chng ng dn th s chy lnh trong .\n\nEx:\n\n```ruby\nmap '/' do\n  run HomePage.new\nend\n```\n\nNu truy cp theo trang ch th s chy lnh `run HomePage.new`.\n\nNu url ngi dng request khng trng bt c trng hp no th chy lnh `run MyNotFound.new`  cui.\n\nMt class s c dng nh sau:\n\n```ruby\nclass SignInUser\n  def call(env)\n    # read file data\n    file = File.read('data.txt')\n\n    # get params\n    data =  Rack::Utils.parse_nested_query(env['QUERY_STRING'])\n    email = data['email']\n    pass = data['password']\n\n    # convert file data from string to hash\n    hash_data = eval(file)\n    # init variable for user login\n    user_email = nil\n\n    # loop hash to find email params\n    hash_data.each do |k, val|\n      if k == email\n        if val = pass\n          user_email = k\n        end\n      end\n    end\n\n    if user_email\n      body = [\"<h1>email: #{user_email}<h/1>\"]\n    else\n      body = [\"<h1>Email or Password Invalid</h1>\"]\n    end\n\n    [200, {'Content-Type' => 'text/html'}, body]\n  end\nend\n```\n\nBn thy phc tp? Khng sao c, ch cn ch  n dng cui cng trong method call. Ta ch cn nh:\n\n- Mi class s dng method call  ci t (yu cu ca Rack).\n\n- Trong method ny nhn vo mt params, y chnh l request i ti.\n\n- Kt qu tr v ca method call ny l mt mng gm 3 phn t:\n\n  1. Status code (V d nh: 200 -> success, 404 -> not found).\n  2. Mt hash,  y chnh l header, cha nhng thng tin m trnh duyt cn.\n  3. Phn t cui cng l mt mng, chnh l phn body ca kt qu tr v.\n\n# 6. Kt lun\n\nTrn l mt basic app xy dng vi Rack, v nh ngha ch c khng lm s rt kh hiu, nn ti lm demo trc, hy vng trong thi gian ti nu kin thc thu lm   vit v cch vn hnh ca Rack mt cch su sc, ti c th tip tc ch  ny.\n","slug":"2019-06-24-simple-rack-application","published":1,"updated":"2019-12-06T15:40:06.678Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3h002f8ersdpwl4k9t","content":"<h1 id=\"1-Dat-van-de\"><a href=\"#1-Dat-van-de\" class=\"headerlink\" title=\"1. t vn \"></a>1. t vn </h1><p>C l cng nh ti, khi mi tip cn vi mt framework ruby nh Rails chng hn, bn  nghe v Rack? hoc t ra cng tng thy ci <code>gem rack</code> trong Gemfile. Nhng c khi no bn dng n chng? Khng ? Ti cng ngh vy, ti cng k, ti cng ch quan tm, cuc sng khng  high hay sao m li m u vo ci kh :alien:.</p>\n<p>Nhng lm vic hng ngy vi n m khng hiu n l g lun lm cho ta cm gic bt an v nh, cp nht CV l Developer m i phng vn c hi rack l g, li tr li emem..em hng bit th liu c b nh xung rank junior hay khng? Thi th c tm hiu coi n ra sao.</p>\n<p>V th l ti  c docs trn trang ch ca Rack, ni chung c qua th c hiu, m ci hiu n mng lung nh mt tr a, cht na th nh phi anh xin gi tay rt lui thi.</p>\n<p>Vy nn ti s vit mt ng dng Rack (chy trn Rack) very..very simple,  ti v c th c bn c ci nhn thong qua v Rack trc , ch ti thy hiu bit hin ti ca mnh cha   chm gi hn lm v ch  ny (hy vng tng lai gn s c bi chm gi hn lm).</p>\n<h1 id=\"2-Tham-khao\"><a href=\"#2-Tham-khao\" class=\"headerlink\" title=\"2. Tham kho?\"></a>2. Tham kho?</h1><ol>\n<li><p>Bi vit ny ti tham kho cch s dng Rack trn trang ch ca Rack <a href=\"https://rack.github.io/\" target=\"_blank\" rel=\"noopener\">ti y</a> v trn mc docs ca ruby <a href=\"https://www.rubydoc.info/github/rack/rack/\" target=\"_blank\" rel=\"noopener\">ti y</a>.</p>\n</li>\n<li><p>ng dng rt th s v KHNG s dng bt p rch tt no c.</p>\n</li>\n</ol>\n<h1 id=\"3-Kien-thuc-can-chuan-bi-truoc\"><a href=\"#3-Kien-thuc-can-chuan-bi-truoc\" class=\"headerlink\" title=\"3. Kin thc cn chun b trc.\"></a>3. Kin thc cn chun b trc.</h1><p>D t d nhiu th vn phi nh qua l thuyt mt cht trc khi my m lm g . Mt s khi nim/quy trnh chng ta nn nm trc nh sau:</p>\n<p>1) Rack l mt lp nm gia web/app server v ng dng.</p>\n<p>Ex: Nu ti s dng Rails vi app server l Puma, web server l Nginx th ng i ca mt request s nh sau:</p>\n<p><img src=\"/images/rack.jpeg\" alt=\"hoa\"></p>\n<p>Note: Khi nim <code>web server</code> v <code>app server</code> chng ta s bn ti sau.</p>\n<p>2) Nh hnh trn, ta c th thy Rack s giao tip vi <code>app server</code>, nn Rack s nhn request t app server gi qua, vi ni dung lng nhng ri rm g , sau  Rack s <code>lm g </code> vi ci request ri rm kia, ri gi kt qu m Rails c th hiu v thc thi c. Sau  Rails s gi v cho Rack kt qu cng ri rm khng km v nhim v ca Rack li l tip tc <code>lm g </code> ci kt qu t Rails, sao cho chuyn kt qu  thnh 1 th g  m app server c th hiu, cui cng app server qung kt qu v cho ngi dng.</p>\n<p>Note: Vy Rack nh mt phin dch vin  truyn t gia ng dng v app server (Khng tht s ng v bn cht nhng ta c tm chp nhn lin tng ny).</p>\n<h1 id=\"4-Build-mot-simple-Rack-application\"><a href=\"#4-Build-mot-simple-Rack-application\" class=\"headerlink\" title=\"4. Build mt simple Rack application\"></a>4. Build mt simple Rack application</h1><ul>\n<li>To 1 Folder vi 1 file tn <code>Gemfile</code> c ni dung nh sau:</li>\n</ul>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source <span class=\"string\">'https://rubygems.org'</span></span><br><span class=\"line\"></span><br><span class=\"line\">gem <span class=\"string\">'rack'</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Ci t gem vi lnh <code>bundle install</code></p>\n</li>\n<li><p>To file <code>config.ru</code>.</p>\n</li>\n</ul>\n<p>Note: y s l file main  x l request.</p>\n<ul>\n<li>Chy project vi lnh <code>bundle exec rackup</code></li>\n</ul>\n<blockquote>\n<p>Project demo <a href=\"https://github.com/hdchinh/simple-rack-app\" target=\"_blank\" rel=\"noopener\">ti y!</a></p>\n</blockquote>\n<h1 id=\"5-Giai-thich-noi-dung-ma-nguon-cua-app-demo\"><a href=\"#5-Giai-thich-noi-dung-ma-nguon-cua-app-demo\" class=\"headerlink\" title=\"5. Gii thch ni dung m ngun ca app demo\"></a>5. Gii thch ni dung m ngun ca app demo</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map <span class=\"string\">'/signup_user'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run SignUpUser.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signup'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run MySignUp.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signin'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run MySignIn.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signin_user'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run SignInUser.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run HomePage.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">run MyNotFound.new</span><br></pre></td></tr></table></figure>\n\n<p>Chc bn cng c th on ra  ngha ca n, nu map chng ng dn th s chy lnh trong .</p>\n<p>Ex:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map <span class=\"string\">'/'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run HomePage.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu truy cp theo trang ch th s chy lnh <code>run HomePage.new</code>.</p>\n<p>Nu url ngi dng request khng trng bt c trng hp no th chy lnh <code>run MyNotFound.new</code>  cui.</p>\n<p>Mt class s c dng nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SignInUser</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">call</span><span class=\"params\">(env)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># read file data</span></span><br><span class=\"line\">    file = File.read(<span class=\"string\">'data.txt'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># get params</span></span><br><span class=\"line\">    data =  Rack::Utils.parse_nested_query(env[<span class=\"string\">'QUERY_STRING'</span>])</span><br><span class=\"line\">    email = data[<span class=\"string\">'email'</span>]</span><br><span class=\"line\">    pass = data[<span class=\"string\">'password'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># convert file data from string to hash</span></span><br><span class=\"line\">    hash_data = eval(file)</span><br><span class=\"line\">    <span class=\"comment\"># init variable for user login</span></span><br><span class=\"line\">    user_email = <span class=\"literal\">nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># loop hash to find email params</span></span><br><span class=\"line\">    hash_data.each <span class=\"keyword\">do</span> <span class=\"params\">|k, val|</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> k == email</span><br><span class=\"line\">        <span class=\"keyword\">if</span> val = pass</span><br><span class=\"line\">          user_email = k</span><br><span class=\"line\">        <span class=\"keyword\">end</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> user_email</span><br><span class=\"line\">      body = [<span class=\"string\">\"&lt;h1&gt;email: <span class=\"subst\">#&#123;user_email&#125;</span>&lt;h/1&gt;\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      body = [<span class=\"string\">\"&lt;h1&gt;Email or Password Invalid&lt;/h1&gt;\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"number\">200</span>, &#123;<span class=\"string\">'Content-Type'</span> =&gt; <span class=\"string\">'text/html'</span>&#125;, body]</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Bn thy phc tp? Khng sao c, ch cn ch  n dng cui cng trong method call. Ta ch cn nh:</p>\n<ul>\n<li><p>Mi class s dng method call  ci t (yu cu ca Rack).</p>\n</li>\n<li><p>Trong method ny nhn vo mt params, y chnh l request i ti.</p>\n</li>\n<li><p>Kt qu tr v ca method call ny l mt mng gm 3 phn t:</p>\n<ol>\n<li>Status code (V d nh: 200 -&gt; success, 404 -&gt; not found).</li>\n<li>Mt hash,  y chnh l header, cha nhng thng tin m trnh duyt cn.</li>\n<li>Phn t cui cng l mt mng, chnh l phn body ca kt qu tr v.</li>\n</ol>\n</li>\n</ul>\n<h1 id=\"6-Ket-luan\"><a href=\"#6-Ket-luan\" class=\"headerlink\" title=\"6. Kt lun\"></a>6. Kt lun</h1><p>Trn l mt basic app xy dng vi Rack, v nh ngha ch c khng lm s rt kh hiu, nn ti lm demo trc, hy vng trong thi gian ti nu kin thc thu lm   vit v cch vn hnh ca Rack mt cch su sc, ti c th tip tc ch  ny.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"1-Dat-van-de\"><a href=\"#1-Dat-van-de\" class=\"headerlink\" title=\"1. t vn \"></a>1. t vn </h1><p>C l cng nh ti, khi mi tip cn vi mt framework ruby nh Rails chng hn, bn  nghe v Rack? hoc t ra cng tng thy ci <code>gem rack</code> trong Gemfile. Nhng c khi no bn dng n chng? Khng ? Ti cng ngh vy, ti cng k, ti cng ch quan tm, cuc sng khng  high hay sao m li m u vo ci kh :alien:.</p>\n<p>Nhng lm vic hng ngy vi n m khng hiu n l g lun lm cho ta cm gic bt an v nh, cp nht CV l Developer m i phng vn c hi rack l g, li tr li emem..em hng bit th liu c b nh xung rank junior hay khng? Thi th c tm hiu coi n ra sao.</p>\n<p>V th l ti  c docs trn trang ch ca Rack, ni chung c qua th c hiu, m ci hiu n mng lung nh mt tr a, cht na th nh phi anh xin gi tay rt lui thi.</p>\n<p>Vy nn ti s vit mt ng dng Rack (chy trn Rack) very..very simple,  ti v c th c bn c ci nhn thong qua v Rack trc , ch ti thy hiu bit hin ti ca mnh cha   chm gi hn lm v ch  ny (hy vng tng lai gn s c bi chm gi hn lm).</p>\n<h1 id=\"2-Tham-khao\"><a href=\"#2-Tham-khao\" class=\"headerlink\" title=\"2. Tham kho?\"></a>2. Tham kho?</h1><ol>\n<li><p>Bi vit ny ti tham kho cch s dng Rack trn trang ch ca Rack <a href=\"https://rack.github.io/\" target=\"_blank\" rel=\"noopener\">ti y</a> v trn mc docs ca ruby <a href=\"https://www.rubydoc.info/github/rack/rack/\" target=\"_blank\" rel=\"noopener\">ti y</a>.</p>\n</li>\n<li><p>ng dng rt th s v KHNG s dng bt p rch tt no c.</p>\n</li>\n</ol>\n<h1 id=\"3-Kien-thuc-can-chuan-bi-truoc\"><a href=\"#3-Kien-thuc-can-chuan-bi-truoc\" class=\"headerlink\" title=\"3. Kin thc cn chun b trc.\"></a>3. Kin thc cn chun b trc.</h1><p>D t d nhiu th vn phi nh qua l thuyt mt cht trc khi my m lm g . Mt s khi nim/quy trnh chng ta nn nm trc nh sau:</p>\n<p>1) Rack l mt lp nm gia web/app server v ng dng.</p>\n<p>Ex: Nu ti s dng Rails vi app server l Puma, web server l Nginx th ng i ca mt request s nh sau:</p>\n<p><img src=\"/images/rack.jpeg\" alt=\"hoa\"></p>\n<p>Note: Khi nim <code>web server</code> v <code>app server</code> chng ta s bn ti sau.</p>\n<p>2) Nh hnh trn, ta c th thy Rack s giao tip vi <code>app server</code>, nn Rack s nhn request t app server gi qua, vi ni dung lng nhng ri rm g , sau  Rack s <code>lm g </code> vi ci request ri rm kia, ri gi kt qu m Rails c th hiu v thc thi c. Sau  Rails s gi v cho Rack kt qu cng ri rm khng km v nhim v ca Rack li l tip tc <code>lm g </code> ci kt qu t Rails, sao cho chuyn kt qu  thnh 1 th g  m app server c th hiu, cui cng app server qung kt qu v cho ngi dng.</p>\n<p>Note: Vy Rack nh mt phin dch vin  truyn t gia ng dng v app server (Khng tht s ng v bn cht nhng ta c tm chp nhn lin tng ny).</p>\n<h1 id=\"4-Build-mot-simple-Rack-application\"><a href=\"#4-Build-mot-simple-Rack-application\" class=\"headerlink\" title=\"4. Build mt simple Rack application\"></a>4. Build mt simple Rack application</h1><ul>\n<li>To 1 Folder vi 1 file tn <code>Gemfile</code> c ni dung nh sau:</li>\n</ul>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source <span class=\"string\">'https://rubygems.org'</span></span><br><span class=\"line\"></span><br><span class=\"line\">gem <span class=\"string\">'rack'</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Ci t gem vi lnh <code>bundle install</code></p>\n</li>\n<li><p>To file <code>config.ru</code>.</p>\n</li>\n</ul>\n<p>Note: y s l file main  x l request.</p>\n<ul>\n<li>Chy project vi lnh <code>bundle exec rackup</code></li>\n</ul>\n<blockquote>\n<p>Project demo <a href=\"https://github.com/hdchinh/simple-rack-app\" target=\"_blank\" rel=\"noopener\">ti y!</a></p>\n</blockquote>\n<h1 id=\"5-Giai-thich-noi-dung-ma-nguon-cua-app-demo\"><a href=\"#5-Giai-thich-noi-dung-ma-nguon-cua-app-demo\" class=\"headerlink\" title=\"5. Gii thch ni dung m ngun ca app demo\"></a>5. Gii thch ni dung m ngun ca app demo</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map <span class=\"string\">'/signup_user'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run SignUpUser.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signup'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run MySignUp.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signin'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run MySignIn.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signin_user'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run SignInUser.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run HomePage.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">run MyNotFound.new</span><br></pre></td></tr></table></figure>\n\n<p>Chc bn cng c th on ra  ngha ca n, nu map chng ng dn th s chy lnh trong .</p>\n<p>Ex:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map <span class=\"string\">'/'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run HomePage.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu truy cp theo trang ch th s chy lnh <code>run HomePage.new</code>.</p>\n<p>Nu url ngi dng request khng trng bt c trng hp no th chy lnh <code>run MyNotFound.new</code>  cui.</p>\n<p>Mt class s c dng nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SignInUser</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">call</span><span class=\"params\">(env)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># read file data</span></span><br><span class=\"line\">    file = File.read(<span class=\"string\">'data.txt'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># get params</span></span><br><span class=\"line\">    data =  Rack::Utils.parse_nested_query(env[<span class=\"string\">'QUERY_STRING'</span>])</span><br><span class=\"line\">    email = data[<span class=\"string\">'email'</span>]</span><br><span class=\"line\">    pass = data[<span class=\"string\">'password'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># convert file data from string to hash</span></span><br><span class=\"line\">    hash_data = eval(file)</span><br><span class=\"line\">    <span class=\"comment\"># init variable for user login</span></span><br><span class=\"line\">    user_email = <span class=\"literal\">nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># loop hash to find email params</span></span><br><span class=\"line\">    hash_data.each <span class=\"keyword\">do</span> <span class=\"params\">|k, val|</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> k == email</span><br><span class=\"line\">        <span class=\"keyword\">if</span> val = pass</span><br><span class=\"line\">          user_email = k</span><br><span class=\"line\">        <span class=\"keyword\">end</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> user_email</span><br><span class=\"line\">      body = [<span class=\"string\">\"&lt;h1&gt;email: <span class=\"subst\">#&#123;user_email&#125;</span>&lt;h/1&gt;\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      body = [<span class=\"string\">\"&lt;h1&gt;Email or Password Invalid&lt;/h1&gt;\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"number\">200</span>, &#123;<span class=\"string\">'Content-Type'</span> =&gt; <span class=\"string\">'text/html'</span>&#125;, body]</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Bn thy phc tp? Khng sao c, ch cn ch  n dng cui cng trong method call. Ta ch cn nh:</p>\n<ul>\n<li><p>Mi class s dng method call  ci t (yu cu ca Rack).</p>\n</li>\n<li><p>Trong method ny nhn vo mt params, y chnh l request i ti.</p>\n</li>\n<li><p>Kt qu tr v ca method call ny l mt mng gm 3 phn t:</p>\n<ol>\n<li>Status code (V d nh: 200 -&gt; success, 404 -&gt; not found).</li>\n<li>Mt hash,  y chnh l header, cha nhng thng tin m trnh duyt cn.</li>\n<li>Phn t cui cng l mt mng, chnh l phn body ca kt qu tr v.</li>\n</ol>\n</li>\n</ul>\n<h1 id=\"6-Ket-luan\"><a href=\"#6-Ket-luan\" class=\"headerlink\" title=\"6. Kt lun\"></a>6. Kt lun</h1><p>Trn l mt basic app xy dng vi Rack, v nh ngha ch c khng lm s rt kh hiu, nn ti lm demo trc, hy vng trong thi gian ti nu kin thc thu lm   vit v cch vn hnh ca Rack mt cch su sc, ti c th tip tc ch  ny.</p>\n"},{"title":"Build A Simple ORM","date":"2019-06-25T17:00:00.000Z","draft":false,"_content":"\n## 1. Intro\n\nDoes ROR is a great framework? Yes, it does, to me, it's lighting and very powerful. Although, the ROR project needs more RAM than most other frameworks and also difficult to scale up.\n\nBut ROR is stale, high security and has very very library supported. And the last one, ROR is the first technology I learn after I graduated from university, therefore I love Rails.\n\none of the reasons why many people love and use Rails today is ActiveRecord. The default ORM of Rails, more powerful and easy to use. It helps too much for us when we want to build a web app without deep experiences in SQL.\n\nLike many developers, when I start to learn Rails, I used a few methods of ActiveRecord and don't care what's happening after these methods.  Not bad for a beginner, but if I want to become a   good developer, I need to know more details behind these methods, know deep enough to use them better.\n\n## 2. Source Code\n\n> The resource of this post you can see [here](https://github.com/hdchinh/simple-orm-ruby)\n\n## 3. Explaintion\n\n> The first action we need to do after read more is known what is ORM. You can read more about ORM by [article](https://en.wikipedia.org/wiki/Object-relational_mapping).\n\nTo build a simple ORM and run a few basic methods, we need to do 2 things:\n\n1. Connect database (I use Postgresql for my example).\n2. Create Class using any languages that you familiar with, for me I use Ruby.\n\n**STEP 1: Create project**\n\nCreate an empty project with single Gemfile with the content below:\n\n```ruby\nsource 'https://rubygems.org'\n\ngem 'pg'\n```\n\nInstall gem by command **bundle install**\n\nIf you get errors. let's read more about bundler gem.\n\n**STEP 2: Connect to Database.**\n\nCreate a file for the connection. I named this file is **connection.rb**:\n\n```ruby\nrequire 'pg'\n\n$conn = PG::Connection.connect(\n  :hostaddr=>\"127.0.0.1\", :port=>5432,\n  :dbname=>\"test-psql_development\",\n  :user=>\"admin\",\n  :password=>''\n)\n```\n\nNote: The content above is my info login of my Database, You must change for your Database.\n\nAt this time, our project has the structure:\n\n```\n-- simple-orm\n  -- Gemfile\n  -- Gemfile.lock (sinh ra sau lnh `bundle install`)\n  -- connection.rb\n```\n\n**STEP 3: Create Main Class.**\n\nCreate the main class, I named this file is **mybase.rb**. You can name it with any names you like, don't matter:\n\n```ruby\nrequire_relative 'connection.rb'\n\nclass MyBase\n  def self.all\n    term = \"SELECT * FROM #{self.name.downcase}\"\n    res = $conn.exec(term)\n\n    res.each{ |row|\n      puts \"#{row}\\n\"\n    }\n  end\n\n  def self.find(id)\n    term = \"SELECT * FROM #{self.name.downcase} where id = #{id}\"\n    res = $conn.exec(term)\n\n    res.each{ |row|\n      puts \"#{row}\\n\"\n    }\n  end\nend\n```\n\nIn this example above, I create two methods:\n\n**all**: To return all records of this Class.\n**find**: To find a record by ID.\n\n**STEP 4: Create Child Class Of Main Class.**\n\nIn my Database, I have a table called comics. So I create a file named **comics.rb** to handle the comics table:\n\n```ruby\nrequire_relative 'mybase.rb'\n\nclass Comics < MyBase; end\n\nputs \"All record in comics table:\\n\"\nComics.all\nputs \"Find record has id is 6:\\n\"\nComics.find(6)\n```\n\nFinally, my project has the structure below:\n\n```\n-- simple-orm\n  -- Gemfile\n  -- Gemfile.lock (sinh ra sau lnh `bundle install`)\n  -- connection.rb\n  -- mybase.rb (main chnh cha cc phng thc)\n  -- comics.rb (class ng vi table comics trong csdl, k tha MyBase)\n```\n\nRun **comics.rb** file with command **ruby comics.rb** to see what's happening (please create your sample data first.)\n\n## References\n\n[1][https://en.wikipedia.org/wiki/Object-relational_mapping](https://en.wikipedia.org/wiki/Object-relational_mapping)\n\n[2][https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e](https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e)\n\n[3][https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails](https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails)\n","source":"_posts/2019-06-25-build-a-simple-orm-with-ruby.md","raw":"---\ntitle: \"Build A Simple ORM\"\ndate: 2019-06-26\ndraft: false\ntags: [\"ORM\", \"RUBY\"]\ncategories: [\"RUBY\"]\n---\n\n## 1. Intro\n\nDoes ROR is a great framework? Yes, it does, to me, it's lighting and very powerful. Although, the ROR project needs more RAM than most other frameworks and also difficult to scale up.\n\nBut ROR is stale, high security and has very very library supported. And the last one, ROR is the first technology I learn after I graduated from university, therefore I love Rails.\n\none of the reasons why many people love and use Rails today is ActiveRecord. The default ORM of Rails, more powerful and easy to use. It helps too much for us when we want to build a web app without deep experiences in SQL.\n\nLike many developers, when I start to learn Rails, I used a few methods of ActiveRecord and don't care what's happening after these methods.  Not bad for a beginner, but if I want to become a   good developer, I need to know more details behind these methods, know deep enough to use them better.\n\n## 2. Source Code\n\n> The resource of this post you can see [here](https://github.com/hdchinh/simple-orm-ruby)\n\n## 3. Explaintion\n\n> The first action we need to do after read more is known what is ORM. You can read more about ORM by [article](https://en.wikipedia.org/wiki/Object-relational_mapping).\n\nTo build a simple ORM and run a few basic methods, we need to do 2 things:\n\n1. Connect database (I use Postgresql for my example).\n2. Create Class using any languages that you familiar with, for me I use Ruby.\n\n**STEP 1: Create project**\n\nCreate an empty project with single Gemfile with the content below:\n\n```ruby\nsource 'https://rubygems.org'\n\ngem 'pg'\n```\n\nInstall gem by command **bundle install**\n\nIf you get errors. let's read more about bundler gem.\n\n**STEP 2: Connect to Database.**\n\nCreate a file for the connection. I named this file is **connection.rb**:\n\n```ruby\nrequire 'pg'\n\n$conn = PG::Connection.connect(\n  :hostaddr=>\"127.0.0.1\", :port=>5432,\n  :dbname=>\"test-psql_development\",\n  :user=>\"admin\",\n  :password=>''\n)\n```\n\nNote: The content above is my info login of my Database, You must change for your Database.\n\nAt this time, our project has the structure:\n\n```\n-- simple-orm\n  -- Gemfile\n  -- Gemfile.lock (sinh ra sau lnh `bundle install`)\n  -- connection.rb\n```\n\n**STEP 3: Create Main Class.**\n\nCreate the main class, I named this file is **mybase.rb**. You can name it with any names you like, don't matter:\n\n```ruby\nrequire_relative 'connection.rb'\n\nclass MyBase\n  def self.all\n    term = \"SELECT * FROM #{self.name.downcase}\"\n    res = $conn.exec(term)\n\n    res.each{ |row|\n      puts \"#{row}\\n\"\n    }\n  end\n\n  def self.find(id)\n    term = \"SELECT * FROM #{self.name.downcase} where id = #{id}\"\n    res = $conn.exec(term)\n\n    res.each{ |row|\n      puts \"#{row}\\n\"\n    }\n  end\nend\n```\n\nIn this example above, I create two methods:\n\n**all**: To return all records of this Class.\n**find**: To find a record by ID.\n\n**STEP 4: Create Child Class Of Main Class.**\n\nIn my Database, I have a table called comics. So I create a file named **comics.rb** to handle the comics table:\n\n```ruby\nrequire_relative 'mybase.rb'\n\nclass Comics < MyBase; end\n\nputs \"All record in comics table:\\n\"\nComics.all\nputs \"Find record has id is 6:\\n\"\nComics.find(6)\n```\n\nFinally, my project has the structure below:\n\n```\n-- simple-orm\n  -- Gemfile\n  -- Gemfile.lock (sinh ra sau lnh `bundle install`)\n  -- connection.rb\n  -- mybase.rb (main chnh cha cc phng thc)\n  -- comics.rb (class ng vi table comics trong csdl, k tha MyBase)\n```\n\nRun **comics.rb** file with command **ruby comics.rb** to see what's happening (please create your sample data first.)\n\n## References\n\n[1][https://en.wikipedia.org/wiki/Object-relational_mapping](https://en.wikipedia.org/wiki/Object-relational_mapping)\n\n[2][https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e](https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e)\n\n[3][https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails](https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails)\n","slug":"2019-06-25-build-a-simple-orm-with-ruby","published":1,"updated":"2019-12-29T07:00:18.962Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3k002k8ersd6414wvf","content":"<h2 id=\"1-Intro\"><a href=\"#1-Intro\" class=\"headerlink\" title=\"1. Intro\"></a>1. Intro</h2><p>Does ROR is a great framework? Yes, it does, to me, its lighting and very powerful. Although, the ROR project needs more RAM than most other frameworks and also difficult to scale up.</p>\n<p>But ROR is stale, high security and has very very library supported. And the last one, ROR is the first technology I learn after I graduated from university, therefore I love Rails.</p>\n<p>one of the reasons why many people love and use Rails today is ActiveRecord. The default ORM of Rails, more powerful and easy to use. It helps too much for us when we want to build a web app without deep experiences in SQL.</p>\n<p>Like many developers, when I start to learn Rails, I used a few methods of ActiveRecord and dont care whats happening after these methods.  Not bad for a beginner, but if I want to become a   good developer, I need to know more details behind these methods, know deep enough to use them better.</p>\n<h2 id=\"2-Source-Code\"><a href=\"#2-Source-Code\" class=\"headerlink\" title=\"2. Source Code\"></a>2. Source Code</h2><blockquote>\n<p>The resource of this post you can see <a href=\"https://github.com/hdchinh/simple-orm-ruby\" target=\"_blank\" rel=\"noopener\">here</a></p>\n</blockquote>\n<h2 id=\"3-Explaintion\"><a href=\"#3-Explaintion\" class=\"headerlink\" title=\"3. Explaintion\"></a>3. Explaintion</h2><blockquote>\n<p>The first action we need to do after read more is known what is ORM. You can read more about ORM by <a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\" target=\"_blank\" rel=\"noopener\">article</a>.</p>\n</blockquote>\n<p>To build a simple ORM and run a few basic methods, we need to do 2 things:</p>\n<ol>\n<li>Connect database (I use Postgresql for my example).</li>\n<li>Create Class using any languages that you familiar with, for me I use Ruby.</li>\n</ol>\n<p><strong>STEP 1: Create project</strong></p>\n<p>Create an empty project with single Gemfile with the content below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source <span class=\"string\">'https://rubygems.org'</span></span><br><span class=\"line\"></span><br><span class=\"line\">gem <span class=\"string\">'pg'</span></span><br></pre></td></tr></table></figure>\n\n<p>Install gem by command <strong>bundle install</strong></p>\n<p>If you get errors. lets read more about bundler gem.</p>\n<p><strong>STEP 2: Connect to Database.</strong></p>\n<p>Create a file for the connection. I named this file is <strong>connection.rb</strong>:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'pg'</span></span><br><span class=\"line\"></span><br><span class=\"line\">$conn = PG::Connection.connect(</span><br><span class=\"line\">  <span class=\"symbol\">:hostaddr=&gt;<span class=\"string\">\"127.0.0.1\"</span></span>, <span class=\"symbol\">:port=&gt;</span><span class=\"number\">5432</span>,</span><br><span class=\"line\">  <span class=\"symbol\">:dbname=&gt;<span class=\"string\">\"test-psql_development\"</span></span>,</span><br><span class=\"line\">  <span class=\"symbol\">:user=&gt;<span class=\"string\">\"admin\"</span></span>,</span><br><span class=\"line\">  <span class=\"symbol\">:password=&gt;<span class=\"string\">''</span></span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>Note: The content above is my info login of my Database, You must change for your Database.</p>\n<p>At this time, our project has the structure:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- simple-orm</span><br><span class=\"line\">  -- Gemfile</span><br><span class=\"line\">  -- Gemfile.lock (sinh ra sau lnh `bundle install`)</span><br><span class=\"line\">  -- connection.rb</span><br></pre></td></tr></table></figure>\n\n<p><strong>STEP 3: Create Main Class.</strong></p>\n<p>Create the main class, I named this file is <strong>mybase.rb</strong>. You can name it with any names you like, dont matter:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'connection.rb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBase</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">all</span></span></span><br><span class=\"line\">    term = <span class=\"string\">\"SELECT * FROM <span class=\"subst\">#&#123;<span class=\"keyword\">self</span>.name.downcase&#125;</span>\"</span></span><br><span class=\"line\">    res = $conn.exec(term)</span><br><span class=\"line\"></span><br><span class=\"line\">    res.each&#123; <span class=\"params\">|row|</span></span><br><span class=\"line\">      puts <span class=\"string\">\"<span class=\"subst\">#&#123;row&#125;</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">find</span><span class=\"params\">(id)</span></span></span><br><span class=\"line\">    term = <span class=\"string\">\"SELECT * FROM <span class=\"subst\">#&#123;<span class=\"keyword\">self</span>.name.downcase&#125;</span> where id = <span class=\"subst\">#&#123;id&#125;</span>\"</span></span><br><span class=\"line\">    res = $conn.exec(term)</span><br><span class=\"line\"></span><br><span class=\"line\">    res.each&#123; <span class=\"params\">|row|</span></span><br><span class=\"line\">      puts <span class=\"string\">\"<span class=\"subst\">#&#123;row&#125;</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>In this example above, I create two methods:</p>\n<p><strong>all</strong>: To return all records of this Class.<br><strong>find</strong>: To find a record by ID.</p>\n<p><strong>STEP 4: Create Child Class Of Main Class.</strong></p>\n<p>In my Database, I have a table called comics. So I create a file named <strong>comics.rb</strong> to handle the comics table:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'mybase.rb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Comics</span> &lt; MyBase;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"All record in comics table:\\n\"</span></span><br><span class=\"line\">Comics.all</span><br><span class=\"line\">puts <span class=\"string\">\"Find record has id is 6:\\n\"</span></span><br><span class=\"line\">Comics.find(<span class=\"number\">6</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Finally, my project has the structure below:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- simple-orm</span><br><span class=\"line\">  -- Gemfile</span><br><span class=\"line\">  -- Gemfile.lock (sinh ra sau lnh `bundle install`)</span><br><span class=\"line\">  -- connection.rb</span><br><span class=\"line\">  -- mybase.rb (main chnh cha cc phng thc)</span><br><span class=\"line\">  -- comics.rb (class ng vi table comics trong csdl, k tha MyBase)</span><br></pre></td></tr></table></figure>\n\n<p>Run <strong>comics.rb</strong> file with command <strong>ruby comics.rb</strong> to see whats happening (please create your sample data first.)</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Object-relational_mapping</a></p>\n<p>[2]<a href=\"https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e\" target=\"_blank\" rel=\"noopener\">https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e</a></p>\n<p>[3]<a href=\"https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Intro\"><a href=\"#1-Intro\" class=\"headerlink\" title=\"1. Intro\"></a>1. Intro</h2><p>Does ROR is a great framework? Yes, it does, to me, its lighting and very powerful. Although, the ROR project needs more RAM than most other frameworks and also difficult to scale up.</p>\n<p>But ROR is stale, high security and has very very library supported. And the last one, ROR is the first technology I learn after I graduated from university, therefore I love Rails.</p>\n<p>one of the reasons why many people love and use Rails today is ActiveRecord. The default ORM of Rails, more powerful and easy to use. It helps too much for us when we want to build a web app without deep experiences in SQL.</p>\n<p>Like many developers, when I start to learn Rails, I used a few methods of ActiveRecord and dont care whats happening after these methods.  Not bad for a beginner, but if I want to become a   good developer, I need to know more details behind these methods, know deep enough to use them better.</p>\n<h2 id=\"2-Source-Code\"><a href=\"#2-Source-Code\" class=\"headerlink\" title=\"2. Source Code\"></a>2. Source Code</h2><blockquote>\n<p>The resource of this post you can see <a href=\"https://github.com/hdchinh/simple-orm-ruby\" target=\"_blank\" rel=\"noopener\">here</a></p>\n</blockquote>\n<h2 id=\"3-Explaintion\"><a href=\"#3-Explaintion\" class=\"headerlink\" title=\"3. Explaintion\"></a>3. Explaintion</h2><blockquote>\n<p>The first action we need to do after read more is known what is ORM. You can read more about ORM by <a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\" target=\"_blank\" rel=\"noopener\">article</a>.</p>\n</blockquote>\n<p>To build a simple ORM and run a few basic methods, we need to do 2 things:</p>\n<ol>\n<li>Connect database (I use Postgresql for my example).</li>\n<li>Create Class using any languages that you familiar with, for me I use Ruby.</li>\n</ol>\n<p><strong>STEP 1: Create project</strong></p>\n<p>Create an empty project with single Gemfile with the content below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source <span class=\"string\">'https://rubygems.org'</span></span><br><span class=\"line\"></span><br><span class=\"line\">gem <span class=\"string\">'pg'</span></span><br></pre></td></tr></table></figure>\n\n<p>Install gem by command <strong>bundle install</strong></p>\n<p>If you get errors. lets read more about bundler gem.</p>\n<p><strong>STEP 2: Connect to Database.</strong></p>\n<p>Create a file for the connection. I named this file is <strong>connection.rb</strong>:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'pg'</span></span><br><span class=\"line\"></span><br><span class=\"line\">$conn = PG::Connection.connect(</span><br><span class=\"line\">  <span class=\"symbol\">:hostaddr=&gt;<span class=\"string\">\"127.0.0.1\"</span></span>, <span class=\"symbol\">:port=&gt;</span><span class=\"number\">5432</span>,</span><br><span class=\"line\">  <span class=\"symbol\">:dbname=&gt;<span class=\"string\">\"test-psql_development\"</span></span>,</span><br><span class=\"line\">  <span class=\"symbol\">:user=&gt;<span class=\"string\">\"admin\"</span></span>,</span><br><span class=\"line\">  <span class=\"symbol\">:password=&gt;<span class=\"string\">''</span></span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>Note: The content above is my info login of my Database, You must change for your Database.</p>\n<p>At this time, our project has the structure:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- simple-orm</span><br><span class=\"line\">  -- Gemfile</span><br><span class=\"line\">  -- Gemfile.lock (sinh ra sau lnh `bundle install`)</span><br><span class=\"line\">  -- connection.rb</span><br></pre></td></tr></table></figure>\n\n<p><strong>STEP 3: Create Main Class.</strong></p>\n<p>Create the main class, I named this file is <strong>mybase.rb</strong>. You can name it with any names you like, dont matter:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'connection.rb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBase</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">all</span></span></span><br><span class=\"line\">    term = <span class=\"string\">\"SELECT * FROM <span class=\"subst\">#&#123;<span class=\"keyword\">self</span>.name.downcase&#125;</span>\"</span></span><br><span class=\"line\">    res = $conn.exec(term)</span><br><span class=\"line\"></span><br><span class=\"line\">    res.each&#123; <span class=\"params\">|row|</span></span><br><span class=\"line\">      puts <span class=\"string\">\"<span class=\"subst\">#&#123;row&#125;</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">find</span><span class=\"params\">(id)</span></span></span><br><span class=\"line\">    term = <span class=\"string\">\"SELECT * FROM <span class=\"subst\">#&#123;<span class=\"keyword\">self</span>.name.downcase&#125;</span> where id = <span class=\"subst\">#&#123;id&#125;</span>\"</span></span><br><span class=\"line\">    res = $conn.exec(term)</span><br><span class=\"line\"></span><br><span class=\"line\">    res.each&#123; <span class=\"params\">|row|</span></span><br><span class=\"line\">      puts <span class=\"string\">\"<span class=\"subst\">#&#123;row&#125;</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>In this example above, I create two methods:</p>\n<p><strong>all</strong>: To return all records of this Class.<br><strong>find</strong>: To find a record by ID.</p>\n<p><strong>STEP 4: Create Child Class Of Main Class.</strong></p>\n<p>In my Database, I have a table called comics. So I create a file named <strong>comics.rb</strong> to handle the comics table:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'mybase.rb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Comics</span> &lt; MyBase;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"All record in comics table:\\n\"</span></span><br><span class=\"line\">Comics.all</span><br><span class=\"line\">puts <span class=\"string\">\"Find record has id is 6:\\n\"</span></span><br><span class=\"line\">Comics.find(<span class=\"number\">6</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Finally, my project has the structure below:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- simple-orm</span><br><span class=\"line\">  -- Gemfile</span><br><span class=\"line\">  -- Gemfile.lock (sinh ra sau lnh `bundle install`)</span><br><span class=\"line\">  -- connection.rb</span><br><span class=\"line\">  -- mybase.rb (main chnh cha cc phng thc)</span><br><span class=\"line\">  -- comics.rb (class ng vi table comics trong csdl, k tha MyBase)</span><br></pre></td></tr></table></figure>\n\n<p>Run <strong>comics.rb</strong> file with command <strong>ruby comics.rb</strong> to see whats happening (please create your sample data first.)</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Object-relational_mapping</a></p>\n<p>[2]<a href=\"https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e\" target=\"_blank\" rel=\"noopener\">https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e</a></p>\n<p>[3]<a href=\"https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails</a></p>\n"},{"title":"Terminal macOS Tricks","date":"2019-08-04T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n## 1. Config to show branch in Terminal\n\nOpen `.bash_profile` file then add:\n\n```shell\nparse_git_branch() {\n    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'\n}\n\nexport PS1=\"\\u@\\h \\[\\033[32m\\]\\w - \\$(parse_git_branch)\\[\\033[00m\\] $ \"\n```\n\n## 2. Setup to use *subl* command in macOS\n\nRun:\n\n```\nsudo ln -s /Applications/Sublime\\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl\n```\n\n## 3. Setup to use code command in macOS\n\nIn VSCode Window, press `command` + `shift` + `P` to open package install. Type `shell` to find package `Shell Command : Install code in PATH`, install and done.\n\nReferences:\n\n[1][https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal](https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal)\n\n[2][https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/](https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/)\n","source":"_posts/2019-08-05-setup-terminal-macos.md","raw":"---\ntitle: \"Terminal macOS Tricks\"\ndate: 2019-08-05\ndraft: false\ntags: [\"TIl\"]\ncategories: [\"TIL\"]\nmytag: \"#TIL\"\n---\n\n## 1. Config to show branch in Terminal\n\nOpen `.bash_profile` file then add:\n\n```shell\nparse_git_branch() {\n    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'\n}\n\nexport PS1=\"\\u@\\h \\[\\033[32m\\]\\w - \\$(parse_git_branch)\\[\\033[00m\\] $ \"\n```\n\n## 2. Setup to use *subl* command in macOS\n\nRun:\n\n```\nsudo ln -s /Applications/Sublime\\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl\n```\n\n## 3. Setup to use code command in macOS\n\nIn VSCode Window, press `command` + `shift` + `P` to open package install. Type `shell` to find package `Shell Command : Install code in PATH`, install and done.\n\nReferences:\n\n[1][https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal](https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal)\n\n[2][https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/](https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/)\n","slug":"2019-08-05-setup-terminal-macos","published":1,"updated":"2019-12-06T15:40:34.080Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3m002n8ershzdm46m0","content":"<h2 id=\"1-Config-to-show-branch-in-Terminal\"><a href=\"#1-Config-to-show-branch-in-Terminal\" class=\"headerlink\" title=\"1. Config to show branch in Terminal\"></a>1. Config to show branch in Terminal</h2><p>Open <code>.bash_profile</code> file then add:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">parse_git_branch() &#123;</span><br><span class=\"line\">    git branch 2&gt; /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export PS1=\"\\u@\\h \\[\\033[32m\\]\\w - \\$(parse_git_branch)\\[\\033[00m\\] $ \"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Setup-to-use-subl-command-in-macOS\"><a href=\"#2-Setup-to-use-subl-command-in-macOS\" class=\"headerlink\" title=\"2. Setup to use subl command in macOS\"></a>2. Setup to use <em>subl</em> command in macOS</h2><p>Run:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ln -s /Applications/Sublime\\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Setup-to-use-code-command-in-macOS\"><a href=\"#3-Setup-to-use-code-command-in-macOS\" class=\"headerlink\" title=\"3. Setup to use code command in macOS\"></a>3. Setup to use code command in macOS</h2><p>In VSCode Window, press <code>command</code> + <code>shift</code> + <code>P</code> to open package install. Type <code>shell</code> to find package <code>Shell Command : Install code in PATH</code>, install and done.</p>\n<p>References:</p>\n<p>[1]<a href=\"https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal</a></p>\n<p>[2]<a href=\"https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/\" target=\"_blank\" rel=\"noopener\">https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Config-to-show-branch-in-Terminal\"><a href=\"#1-Config-to-show-branch-in-Terminal\" class=\"headerlink\" title=\"1. Config to show branch in Terminal\"></a>1. Config to show branch in Terminal</h2><p>Open <code>.bash_profile</code> file then add:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">parse_git_branch() &#123;</span><br><span class=\"line\">    git branch 2&gt; /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export PS1=\"\\u@\\h \\[\\033[32m\\]\\w - \\$(parse_git_branch)\\[\\033[00m\\] $ \"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Setup-to-use-subl-command-in-macOS\"><a href=\"#2-Setup-to-use-subl-command-in-macOS\" class=\"headerlink\" title=\"2. Setup to use subl command in macOS\"></a>2. Setup to use <em>subl</em> command in macOS</h2><p>Run:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ln -s /Applications/Sublime\\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Setup-to-use-code-command-in-macOS\"><a href=\"#3-Setup-to-use-code-command-in-macOS\" class=\"headerlink\" title=\"3. Setup to use code command in macOS\"></a>3. Setup to use code command in macOS</h2><p>In VSCode Window, press <code>command</code> + <code>shift</code> + <code>P</code> to open package install. Type <code>shell</code> to find package <code>Shell Command : Install code in PATH</code>, install and done.</p>\n<p>References:</p>\n<p>[1]<a href=\"https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal</a></p>\n<p>[2]<a href=\"https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/\" target=\"_blank\" rel=\"noopener\">https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/</a></p>\n"},{"title":"My Favourite Vscode Extensions","date":"2019-09-19T17:00:00.000Z","draft":false,"_content":"\n1. Leetcode (https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode)\n2. Turbo console log ( https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log)\n3. Polacode ( https://marketplace.visualstudio.com/items?itemName=pnp.polacode)\n4. Path intellisence (https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense)\n5. Vscode-iocns (https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons)\n6. Ident-rainbow (https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow)\n7. Bracket Pair Colorizer 2 (https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2)\n8. Markdown preview (https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced)\n","source":"_posts/2019-09-20-vscode-extension.md","raw":"---\ntitle: \"My Favourite Vscode Extensions\"\ndate: 2019-09-20\ndraft: false\ntags: [\"TIl\"]\ncategories: [\"TIL\"]\n---\n\n1. Leetcode (https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode)\n2. Turbo console log ( https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log)\n3. Polacode ( https://marketplace.visualstudio.com/items?itemName=pnp.polacode)\n4. Path intellisence (https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense)\n5. Vscode-iocns (https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons)\n6. Ident-rainbow (https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow)\n7. Bracket Pair Colorizer 2 (https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2)\n8. Markdown preview (https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced)\n","slug":"2019-09-20-vscode-extension","published":1,"updated":"2019-12-06T15:40:40.390Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3p002q8ers2biccbnc","content":"<ol>\n<li>Leetcode (<a href=\"https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode</a>)</li>\n<li>Turbo console log ( <a href=\"https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log</a>)</li>\n<li>Polacode ( <a href=\"https://marketplace.visualstudio.com/items?itemName=pnp.polacode\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=pnp.polacode</a>)</li>\n<li>Path intellisence (<a href=\"https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense</a>)</li>\n<li>Vscode-iocns (<a href=\"https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons</a>)</li>\n<li>Ident-rainbow (<a href=\"https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow</a>)</li>\n<li>Bracket Pair Colorizer 2 (<a href=\"https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2</a>)</li>\n<li>Markdown preview (<a href=\"https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced</a>)</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>Leetcode (<a href=\"https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode</a>)</li>\n<li>Turbo console log ( <a href=\"https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log</a>)</li>\n<li>Polacode ( <a href=\"https://marketplace.visualstudio.com/items?itemName=pnp.polacode\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=pnp.polacode</a>)</li>\n<li>Path intellisence (<a href=\"https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense</a>)</li>\n<li>Vscode-iocns (<a href=\"https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons</a>)</li>\n<li>Ident-rainbow (<a href=\"https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow</a>)</li>\n<li>Bracket Pair Colorizer 2 (<a href=\"https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2</a>)</li>\n<li>Markdown preview (<a href=\"https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced</a>)</li>\n</ol>\n"},{"title":"Deploy My Blog Use Script","date":"2019-11-30T17:00:00.000Z","_content":"\n## 1. Example\n\n```bash\n#!/bin/bash\nGREEN='\\033[0;32m'\nNC='\\033[0m'\n\nhexo_clean=\"hexo clean\"\nhexo_generate=\"hexo generate\"\ncd_public=\"cd public\"\ncreate_file=\"touch CNAME\"\nadd_content=\"echo \"hdchinh.com\" >> CNAME\"\ndeploy=\"hexo deploy\"\n\necho \"${GREEN}============ Starting Gengerate ===============${NC}\"\neval $hexo_clean\neval $hexo_generate\neval $cd_public\n\necho \"${GREEN}============ Starting Create CNAME ============${NC}\"\neval $create_file\neval $add_content\n\necho \"${GREEN}============ Starting Deploy ==================${NC}\"\neval $deploy\necho \"${GREEN}============ Done =============================${NC}\"\n\n```\n\n## 2. Use multiple command in oneline\n\nWe have two commands need to execute:\n\neg: A, B\n\nWe have three ways to execute A, B in one line.\n\n```bash\nA; B (always run A, B)\n\nA && B (run B if A execute successful)\n\nA || B (run B if A execute failure)\n```\n","source":"_posts/2019-12-01-basic-bash-file-to-deploy-my-blog.md","raw":"---\ntitle: Deploy My Blog Use Script\ndate: 2019-12-01\ntags: [\"TIL\"]\n---\n\n## 1. Example\n\n```bash\n#!/bin/bash\nGREEN='\\033[0;32m'\nNC='\\033[0m'\n\nhexo_clean=\"hexo clean\"\nhexo_generate=\"hexo generate\"\ncd_public=\"cd public\"\ncreate_file=\"touch CNAME\"\nadd_content=\"echo \"hdchinh.com\" >> CNAME\"\ndeploy=\"hexo deploy\"\n\necho \"${GREEN}============ Starting Gengerate ===============${NC}\"\neval $hexo_clean\neval $hexo_generate\neval $cd_public\n\necho \"${GREEN}============ Starting Create CNAME ============${NC}\"\neval $create_file\neval $add_content\n\necho \"${GREEN}============ Starting Deploy ==================${NC}\"\neval $deploy\necho \"${GREEN}============ Done =============================${NC}\"\n\n```\n\n## 2. Use multiple command in oneline\n\nWe have two commands need to execute:\n\neg: A, B\n\nWe have three ways to execute A, B in one line.\n\n```bash\nA; B (always run A, B)\n\nA && B (run B if A execute successful)\n\nA || B (run B if A execute failure)\n```\n","slug":"2019-12-01-basic-bash-file-to-deploy-my-blog","published":1,"updated":"2019-12-03T11:29:48.900Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3s002t8ersbzo0174k","content":"<h2 id=\"1-Example\"><a href=\"#1-Example\" class=\"headerlink\" title=\"1. Example\"></a>1. Example</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">GREEN=<span class=\"string\">'\\033[0;32m'</span></span><br><span class=\"line\">NC=<span class=\"string\">'\\033[0m'</span></span><br><span class=\"line\"></span><br><span class=\"line\">hexo_clean=<span class=\"string\">\"hexo clean\"</span></span><br><span class=\"line\">hexo_generate=<span class=\"string\">\"hexo generate\"</span></span><br><span class=\"line\">cd_public=<span class=\"string\">\"cd public\"</span></span><br><span class=\"line\">create_file=<span class=\"string\">\"touch CNAME\"</span></span><br><span class=\"line\">add_content=<span class=\"string\">\"echo \"</span>hdchinh.com<span class=\"string\">\" &gt;&gt; CNAME\"</span></span><br><span class=\"line\">deploy=<span class=\"string\">\"hexo deploy\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Gengerate ===============<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$hexo_clean</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$hexo_generate</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$cd_public</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Create CNAME ============<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$create_file</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$add_content</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Deploy ==================<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$deploy</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Done =============================<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Use-multiple-command-in-oneline\"><a href=\"#2-Use-multiple-command-in-oneline\" class=\"headerlink\" title=\"2. Use multiple command in oneline\"></a>2. Use multiple command in oneline</h2><p>We have two commands need to execute:</p>\n<p>eg: A, B</p>\n<p>We have three ways to execute A, B in one line.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A; B (always run A, B)</span><br><span class=\"line\"></span><br><span class=\"line\">A &amp;&amp; B (run B <span class=\"keyword\">if</span> A execute successful)</span><br><span class=\"line\"></span><br><span class=\"line\">A || B (run B <span class=\"keyword\">if</span> A execute failure)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Example\"><a href=\"#1-Example\" class=\"headerlink\" title=\"1. Example\"></a>1. Example</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">GREEN=<span class=\"string\">'\\033[0;32m'</span></span><br><span class=\"line\">NC=<span class=\"string\">'\\033[0m'</span></span><br><span class=\"line\"></span><br><span class=\"line\">hexo_clean=<span class=\"string\">\"hexo clean\"</span></span><br><span class=\"line\">hexo_generate=<span class=\"string\">\"hexo generate\"</span></span><br><span class=\"line\">cd_public=<span class=\"string\">\"cd public\"</span></span><br><span class=\"line\">create_file=<span class=\"string\">\"touch CNAME\"</span></span><br><span class=\"line\">add_content=<span class=\"string\">\"echo \"</span>hdchinh.com<span class=\"string\">\" &gt;&gt; CNAME\"</span></span><br><span class=\"line\">deploy=<span class=\"string\">\"hexo deploy\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Gengerate ===============<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$hexo_clean</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$hexo_generate</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$cd_public</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Create CNAME ============<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$create_file</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$add_content</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Deploy ==================<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$deploy</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Done =============================<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Use-multiple-command-in-oneline\"><a href=\"#2-Use-multiple-command-in-oneline\" class=\"headerlink\" title=\"2. Use multiple command in oneline\"></a>2. Use multiple command in oneline</h2><p>We have two commands need to execute:</p>\n<p>eg: A, B</p>\n<p>We have three ways to execute A, B in one line.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A; B (always run A, B)</span><br><span class=\"line\"></span><br><span class=\"line\">A &amp;&amp; B (run B <span class=\"keyword\">if</span> A execute successful)</span><br><span class=\"line\"></span><br><span class=\"line\">A || B (run B <span class=\"keyword\">if</span> A execute failure)</span><br></pre></td></tr></table></figure>\n"},{"title":"Use multiple accounts with SSH","date":"2019-11-30T17:00:00.000Z","_content":"\n## 1. Generate keys\n\n```bash\nssh-keygen -t rsa -C \"YOUr_EMAIL_OR_YOUR_INFO\" -f \"YOUR_NAME_YOU_WANT_TO_SET_FOR_THIS_KEY\"\n```\n\neg.\n```bash\nssh-keygen -t rsa -C \"hduychinh@gmail.com\" -f \"primary_github\"\n```\n\n\n## 2. Add key\n\neg.\n```bash\nssh-add ~/.ssh/primary_github\n```\n\n## 3. Cache\n\nRemove cache:\n```bash\nssh-add -D\n```\n\nShow cache:\n```bash\nssh-add -l\n```\n\n## 4. Create config file\n\n> ~/.ssh/config\n\neg:\n\n```\nHost primary_github.github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/primary_github\n\nHost secondary_github.github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/secondary_github\n```\n## 5. Add remote with prefix\n\neg:\n```bash\ngit remote add origin git@primary_github.github.com:1312047/nus-overview.git\n```\n","source":"_posts/2019-12-01-how-to-use-multi-account-with-ssh.md","raw":"---\ntitle: Use multiple accounts with SSH\ndate: 2019-12-01\ntags: [\"TIL\"]\n---\n\n## 1. Generate keys\n\n```bash\nssh-keygen -t rsa -C \"YOUr_EMAIL_OR_YOUR_INFO\" -f \"YOUR_NAME_YOU_WANT_TO_SET_FOR_THIS_KEY\"\n```\n\neg.\n```bash\nssh-keygen -t rsa -C \"hduychinh@gmail.com\" -f \"primary_github\"\n```\n\n\n## 2. Add key\n\neg.\n```bash\nssh-add ~/.ssh/primary_github\n```\n\n## 3. Cache\n\nRemove cache:\n```bash\nssh-add -D\n```\n\nShow cache:\n```bash\nssh-add -l\n```\n\n## 4. Create config file\n\n> ~/.ssh/config\n\neg:\n\n```\nHost primary_github.github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/primary_github\n\nHost secondary_github.github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/secondary_github\n```\n## 5. Add remote with prefix\n\neg:\n```bash\ngit remote add origin git@primary_github.github.com:1312047/nus-overview.git\n```\n","slug":"2019-12-01-how-to-use-multi-account-with-ssh","published":1,"updated":"2019-12-03T11:32:31.401Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3w002w8ersadet98oc","content":"<h2 id=\"1-Generate-keys\"><a href=\"#1-Generate-keys\" class=\"headerlink\" title=\"1. Generate keys\"></a>1. Generate keys</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"YOUr_EMAIL_OR_YOUR_INFO\"</span> -f <span class=\"string\">\"YOUR_NAME_YOU_WANT_TO_SET_FOR_THIS_KEY\"</span></span><br></pre></td></tr></table></figure>\n\n<p>eg.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"hduychinh@gmail.com\"</span> -f <span class=\"string\">\"primary_github\"</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"2-Add-key\"><a href=\"#2-Add-key\" class=\"headerlink\" title=\"2. Add key\"></a>2. Add key</h2><p>eg.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add ~/.ssh/primary_github</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Cache\"><a href=\"#3-Cache\" class=\"headerlink\" title=\"3. Cache\"></a>3. Cache</h2><p>Remove cache:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add -D</span><br></pre></td></tr></table></figure>\n\n<p>Show cache:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add -l</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Create-config-file\"><a href=\"#4-Create-config-file\" class=\"headerlink\" title=\"4. Create config file\"></a>4. Create config file</h2><blockquote>\n<p>~/.ssh/config</p>\n</blockquote>\n<p>eg:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host primary_github.github.com</span><br><span class=\"line\">HostName github.com</span><br><span class=\"line\">PreferredAuthentications publickey</span><br><span class=\"line\">IdentityFile ~/.ssh/primary_github</span><br><span class=\"line\"></span><br><span class=\"line\">Host secondary_github.github.com</span><br><span class=\"line\">HostName github.com</span><br><span class=\"line\">PreferredAuthentications publickey</span><br><span class=\"line\">IdentityFile ~/.ssh/secondary_github</span><br></pre></td></tr></table></figure>\n<h2 id=\"5-Add-remote-with-prefix\"><a href=\"#5-Add-remote-with-prefix\" class=\"headerlink\" title=\"5. Add remote with prefix\"></a>5. Add remote with prefix</h2><p>eg:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin git@primary_github.github.com:1312047/nus-overview.git</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Generate-keys\"><a href=\"#1-Generate-keys\" class=\"headerlink\" title=\"1. Generate keys\"></a>1. Generate keys</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"YOUr_EMAIL_OR_YOUR_INFO\"</span> -f <span class=\"string\">\"YOUR_NAME_YOU_WANT_TO_SET_FOR_THIS_KEY\"</span></span><br></pre></td></tr></table></figure>\n\n<p>eg.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"hduychinh@gmail.com\"</span> -f <span class=\"string\">\"primary_github\"</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"2-Add-key\"><a href=\"#2-Add-key\" class=\"headerlink\" title=\"2. Add key\"></a>2. Add key</h2><p>eg.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add ~/.ssh/primary_github</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Cache\"><a href=\"#3-Cache\" class=\"headerlink\" title=\"3. Cache\"></a>3. Cache</h2><p>Remove cache:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add -D</span><br></pre></td></tr></table></figure>\n\n<p>Show cache:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add -l</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Create-config-file\"><a href=\"#4-Create-config-file\" class=\"headerlink\" title=\"4. Create config file\"></a>4. Create config file</h2><blockquote>\n<p>~/.ssh/config</p>\n</blockquote>\n<p>eg:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host primary_github.github.com</span><br><span class=\"line\">HostName github.com</span><br><span class=\"line\">PreferredAuthentications publickey</span><br><span class=\"line\">IdentityFile ~/.ssh/primary_github</span><br><span class=\"line\"></span><br><span class=\"line\">Host secondary_github.github.com</span><br><span class=\"line\">HostName github.com</span><br><span class=\"line\">PreferredAuthentications publickey</span><br><span class=\"line\">IdentityFile ~/.ssh/secondary_github</span><br></pre></td></tr></table></figure>\n<h2 id=\"5-Add-remote-with-prefix\"><a href=\"#5-Add-remote-with-prefix\" class=\"headerlink\" title=\"5. Add remote with prefix\"></a>5. Add remote with prefix</h2><p>eg:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin git@primary_github.github.com:1312047/nus-overview.git</span><br></pre></td></tr></table></figure>\n"},{"title":"Simple BST With Ruby","date":"2019-11-30T17:00:00.000Z","_content":"\n![vang con](/../images/vangcon.jpeg)\n\n## Init\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\nend\n```\n\n## Display Tree\n\n```ruby\ndef get_tree\n  puts \"#{value}\\n\"\n  @left.get_tree() if @left\n  @right.get_tree() if @right\nend\n```\n\n## Add Node\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def add(new_val)\n    return if @value == new_val\n    if(@value > new_val)\n      add_left(new_val)\n    else\n      add_right(new_val)\n    end\n  end\n\n  private\n\n  def add_left(val)\n    if(@left)\n      @left.add(val)\n    else\n      @left = Node.new(val)\n    end\n  end\n\n  def add_right(val)\n    if(@right)\n      @right.add(val)\n    else\n      @right = Node.new(val)\n    end\n  end\n\nend\n```\n\n## Check existing?\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def include?(val)\n    return true if(@value == val)\n\n    if(@value > val)\n      return false if !@left\n      @left.include?(val)\n    else\n      return false if !@right\n      @right.include?(val)\n    end\n  end\nend\n```\n\n## Update Node\n\n```ruby\ndef update(current_value, new_value)\n  if(@value == current_value)\n    @value = new_value\n    return true\n  end\n\n  if(@value > current_value)\n    return false if !@left\n    @left.update(current_value, new_value)\n  else\n    return false if !@right\n    @right.update(current_value, new_value)\n  end\nend\n```\n\n## Get Depth\n\n```ruby\ndef max_depth(root)\n  return 0 if root.nil?\n  return [max_depth(root.left), max_depth(root.right)].max + 1\nend\n```\n\n## Example\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def get_tree\n    puts \"#{value}\\n\"\n    @left.get_tree() if @left\n    @right.get_tree() if @right\n  end\n\n  def add(new_val)\n    return if @value == new_val\n    if(@value > new_val)\n      add_left(new_val)\n    else\n      add_right(new_val)\n    end\n  end\n\n  def include?(val)\n    return true if(@value == val)\n\n    if(@value > val)\n      return false if !@left\n      @left.include?(val)\n    else\n      return false if !@right\n      @right.include?(val)\n    end\n  end\n\n  def update(current_value, new_value)\n    if(@value == current_value)\n      @value = new_value\n      return true\n    end\n\n    if(@value > current_value)\n      return false if !@left\n      @left.update(current_value, new_value)\n    else\n      return false if !@right\n      @right.update(current_value, new_value)\n    end\n  end\n\n  private\n\n  def add_left(val)\n    if(@left)\n      @left.add(val)\n    else\n      @left = Node.new(val)\n    end\n  end\n\n  def add_right(val)\n    if(@right)\n      @right.add(val)\n    else\n      @right = Node.new(val)\n    end\n  end\n\nend\n\na = Node.new(5)\nputs \"#{a.value} | #{a.left ? a.left.value : nil} | #{a.right ? a.right.value : nil}\"\n\na.add(2)\na.add(7)\na.add(9)\n\na.get_tree()\n\na.update(7, 6)\n\nputs \"#{a.value} | #{a.left ? a.left.value : nil} | #{a.right ? a.right.value : nil}\"\n\na.get_tree()\n\nb = a.right\nputs \"#{b.value} | #{b.left ? b.left.value : nil} | #{b.right ? b.right.value : nil}\"\n\n```\n\n-----\n","source":"_posts/2019-12-01-simple-bst-in-ruby.md","raw":"---\ntitle: Simple BST With Ruby\ndate: 2019-12-01\ntags: [\"RUBY\"]\n---\n\n![vang con](/../images/vangcon.jpeg)\n\n## Init\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\nend\n```\n\n## Display Tree\n\n```ruby\ndef get_tree\n  puts \"#{value}\\n\"\n  @left.get_tree() if @left\n  @right.get_tree() if @right\nend\n```\n\n## Add Node\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def add(new_val)\n    return if @value == new_val\n    if(@value > new_val)\n      add_left(new_val)\n    else\n      add_right(new_val)\n    end\n  end\n\n  private\n\n  def add_left(val)\n    if(@left)\n      @left.add(val)\n    else\n      @left = Node.new(val)\n    end\n  end\n\n  def add_right(val)\n    if(@right)\n      @right.add(val)\n    else\n      @right = Node.new(val)\n    end\n  end\n\nend\n```\n\n## Check existing?\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def include?(val)\n    return true if(@value == val)\n\n    if(@value > val)\n      return false if !@left\n      @left.include?(val)\n    else\n      return false if !@right\n      @right.include?(val)\n    end\n  end\nend\n```\n\n## Update Node\n\n```ruby\ndef update(current_value, new_value)\n  if(@value == current_value)\n    @value = new_value\n    return true\n  end\n\n  if(@value > current_value)\n    return false if !@left\n    @left.update(current_value, new_value)\n  else\n    return false if !@right\n    @right.update(current_value, new_value)\n  end\nend\n```\n\n## Get Depth\n\n```ruby\ndef max_depth(root)\n  return 0 if root.nil?\n  return [max_depth(root.left), max_depth(root.right)].max + 1\nend\n```\n\n## Example\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def get_tree\n    puts \"#{value}\\n\"\n    @left.get_tree() if @left\n    @right.get_tree() if @right\n  end\n\n  def add(new_val)\n    return if @value == new_val\n    if(@value > new_val)\n      add_left(new_val)\n    else\n      add_right(new_val)\n    end\n  end\n\n  def include?(val)\n    return true if(@value == val)\n\n    if(@value > val)\n      return false if !@left\n      @left.include?(val)\n    else\n      return false if !@right\n      @right.include?(val)\n    end\n  end\n\n  def update(current_value, new_value)\n    if(@value == current_value)\n      @value = new_value\n      return true\n    end\n\n    if(@value > current_value)\n      return false if !@left\n      @left.update(current_value, new_value)\n    else\n      return false if !@right\n      @right.update(current_value, new_value)\n    end\n  end\n\n  private\n\n  def add_left(val)\n    if(@left)\n      @left.add(val)\n    else\n      @left = Node.new(val)\n    end\n  end\n\n  def add_right(val)\n    if(@right)\n      @right.add(val)\n    else\n      @right = Node.new(val)\n    end\n  end\n\nend\n\na = Node.new(5)\nputs \"#{a.value} | #{a.left ? a.left.value : nil} | #{a.right ? a.right.value : nil}\"\n\na.add(2)\na.add(7)\na.add(9)\n\na.get_tree()\n\na.update(7, 6)\n\nputs \"#{a.value} | #{a.left ? a.left.value : nil} | #{a.right ? a.right.value : nil}\"\n\na.get_tree()\n\nb = a.right\nputs \"#{b.value} | #{b.left ? b.left.value : nil} | #{b.right ? b.right.value : nil}\"\n\n```\n\n-----\n","slug":"2019-12-01-simple-bst-in-ruby","published":1,"updated":"2019-12-15T05:09:27.159Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe3y002z8ershn068w2a","content":"<p><img src=\"/../images/vangcon.jpeg\" alt=\"vang con\"></p>\n<h2 id=\"Init\"><a href=\"#Init\" class=\"headerlink\" title=\"Init\"></a>Init</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Display-Tree\"><a href=\"#Display-Tree\" class=\"headerlink\" title=\"Display Tree\"></a>Display Tree</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_tree</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"<span class=\"subst\">#&#123;value&#125;</span>\\n\"</span></span><br><span class=\"line\">  @left.get_tree() <span class=\"keyword\">if</span> @left</span><br><span class=\"line\">  @right.get_tree() <span class=\"keyword\">if</span> @right</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Add-Node\"><a href=\"#Add-Node\" class=\"headerlink\" title=\"Add Node\"></a>Add Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(new_val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> @value == new_val</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; new_val)</span><br><span class=\"line\">      add_left(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      add_right(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_left</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@left)</span><br><span class=\"line\">      @left.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @left = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_right</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@right)</span><br><span class=\"line\">      @right.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @right = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Check-existing\"><a href=\"#Check-existing\" class=\"headerlink\" title=\"Check existing?\"></a>Check existing?</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">include?</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">if</span>(@value == val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; val)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Update-Node\"><a href=\"#Update-Node\" class=\"headerlink\" title=\"Update Node\"></a>Update Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(current_value, new_value)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(@value == current_value)</span><br><span class=\"line\">    @value = new_value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(@value &gt; current_value)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">    @left.update(current_value, new_value)</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">    @right.update(current_value, new_value)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Get-Depth\"><a href=\"#Get-Depth\" class=\"headerlink\" title=\"Get Depth\"></a>Get Depth</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">max_depth</span><span class=\"params\">(root)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span> <span class=\"keyword\">if</span> root.<span class=\"literal\">nil</span>?</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [max_depth(root.left), max_depth(root.right)].max + <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_tree</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"<span class=\"subst\">#&#123;value&#125;</span>\\n\"</span></span><br><span class=\"line\">    @left.get_tree() <span class=\"keyword\">if</span> @left</span><br><span class=\"line\">    @right.get_tree() <span class=\"keyword\">if</span> @right</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(new_val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> @value == new_val</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; new_val)</span><br><span class=\"line\">      add_left(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      add_right(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">include?</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">if</span>(@value == val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; val)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(current_value, new_value)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value == current_value)</span><br><span class=\"line\">      @value = new_value</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; current_value)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.update(current_value, new_value)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.update(current_value, new_value)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_left</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@left)</span><br><span class=\"line\">      @left.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @left = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_right</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@right)</span><br><span class=\"line\">      @right.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @right = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">a = Node.new(<span class=\"number\">5</span>)</span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;a.value&#125;</span> | <span class=\"subst\">#&#123;a.left ? a.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;a.right ? a.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.add(<span class=\"number\">2</span>)</span><br><span class=\"line\">a.add(<span class=\"number\">7</span>)</span><br><span class=\"line\">a.add(<span class=\"number\">9</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">a.get_tree()</span><br><span class=\"line\"></span><br><span class=\"line\">a.update(<span class=\"number\">7</span>, <span class=\"number\">6</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;a.value&#125;</span> | <span class=\"subst\">#&#123;a.left ? a.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;a.right ? a.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.get_tree()</span><br><span class=\"line\"></span><br><span class=\"line\">b = a.right</span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;b.value&#125;</span> | <span class=\"subst\">#&#123;b.left ? b.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;b.right ? b.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/../images/vangcon.jpeg\" alt=\"vang con\"></p>\n<h2 id=\"Init\"><a href=\"#Init\" class=\"headerlink\" title=\"Init\"></a>Init</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Display-Tree\"><a href=\"#Display-Tree\" class=\"headerlink\" title=\"Display Tree\"></a>Display Tree</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_tree</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"<span class=\"subst\">#&#123;value&#125;</span>\\n\"</span></span><br><span class=\"line\">  @left.get_tree() <span class=\"keyword\">if</span> @left</span><br><span class=\"line\">  @right.get_tree() <span class=\"keyword\">if</span> @right</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Add-Node\"><a href=\"#Add-Node\" class=\"headerlink\" title=\"Add Node\"></a>Add Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(new_val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> @value == new_val</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; new_val)</span><br><span class=\"line\">      add_left(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      add_right(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_left</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@left)</span><br><span class=\"line\">      @left.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @left = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_right</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@right)</span><br><span class=\"line\">      @right.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @right = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Check-existing\"><a href=\"#Check-existing\" class=\"headerlink\" title=\"Check existing?\"></a>Check existing?</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">include?</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">if</span>(@value == val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; val)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Update-Node\"><a href=\"#Update-Node\" class=\"headerlink\" title=\"Update Node\"></a>Update Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(current_value, new_value)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(@value == current_value)</span><br><span class=\"line\">    @value = new_value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(@value &gt; current_value)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">    @left.update(current_value, new_value)</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">    @right.update(current_value, new_value)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Get-Depth\"><a href=\"#Get-Depth\" class=\"headerlink\" title=\"Get Depth\"></a>Get Depth</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">max_depth</span><span class=\"params\">(root)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span> <span class=\"keyword\">if</span> root.<span class=\"literal\">nil</span>?</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [max_depth(root.left), max_depth(root.right)].max + <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_tree</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"<span class=\"subst\">#&#123;value&#125;</span>\\n\"</span></span><br><span class=\"line\">    @left.get_tree() <span class=\"keyword\">if</span> @left</span><br><span class=\"line\">    @right.get_tree() <span class=\"keyword\">if</span> @right</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(new_val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> @value == new_val</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; new_val)</span><br><span class=\"line\">      add_left(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      add_right(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">include?</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">if</span>(@value == val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; val)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(current_value, new_value)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value == current_value)</span><br><span class=\"line\">      @value = new_value</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; current_value)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.update(current_value, new_value)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.update(current_value, new_value)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_left</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@left)</span><br><span class=\"line\">      @left.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @left = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_right</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@right)</span><br><span class=\"line\">      @right.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @right = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">a = Node.new(<span class=\"number\">5</span>)</span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;a.value&#125;</span> | <span class=\"subst\">#&#123;a.left ? a.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;a.right ? a.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.add(<span class=\"number\">2</span>)</span><br><span class=\"line\">a.add(<span class=\"number\">7</span>)</span><br><span class=\"line\">a.add(<span class=\"number\">9</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">a.get_tree()</span><br><span class=\"line\"></span><br><span class=\"line\">a.update(<span class=\"number\">7</span>, <span class=\"number\">6</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;a.value&#125;</span> | <span class=\"subst\">#&#123;a.left ? a.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;a.right ? a.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.get_tree()</span><br><span class=\"line\"></span><br><span class=\"line\">b = a.right</span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;b.value&#125;</span> | <span class=\"subst\">#&#123;b.left ? b.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;b.right ? b.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n"},{"title":"Implement Linked List With Ruby","date":"2019-12-05T17:00:00.000Z","_content":"\n## Define Node\n\n```ruby\nclass Node\n  attr_accessor :next, :value\n\n  def initialize(value)\n    @value = value\n    @next  = nil\n  end\nend\n```\n\n## Define Linked List\n\n```ruby\nclass LinkedList\n  attr_accessor :head, :length\n\n  def initialize\n    @head = nil\n    @length = 0\n  end\nend\n```\n\n## Display Linked List\n\n```ruby\ndef show_all\n  current_node = @head\n  puts \":----- Linked List: ----->\"\n\n  while(current_node)\n    puts \"object_id: #{current_node.object_id} - value: #{current_node.value}\\n\"\n    current_node = current_node.next\n  end\nend\n```\n\n## Add New Node\n\n```ruby\ndef add(value)\n  current_node = @head\n\n  if current_node\n    while(current_node.next)\n      current_node = current_node.next\n    end\n    current_node.next = Node.new(value)\n  else\n    @head = Node.new(value)\n  end\n\n  @length += 1\nend\n```\n\n## Delete A Node At Position\n\n```ruby\ndef delete(position)\n  return false if(!@head || position > @length)\n\n  prev_node = current_node = @head\n  i = 0\n\n  while(current_node)\n    if(i == position)\n      prev_node.next = current_node.next\n      return true\n    end\n\n    prev_node = current_node\n    current_node = current_node.next\n    i += 1\n  end\n\n  return false\nend\n```\n\n## Reverse Linked List\n\n```ruby\ndef reverse\n  mid = @length / 2\n  i = 1\n  current_node = @head\n\n  while(i <= mid)\n    swap(current_node, find_nth_from_end_list(i))\n    current_node = current_node.next\n    i += 1\n  end\nend\n```\n\n## Check Circular Linked List\n\n```ruby\ndef is_circular_linked_list?\n  return false if !@head\n  hash = {}\n\n  current_node = @head\n  while(current_node)\n    return false if(hash.key?(current_node.object_id))\n\n    hash[current_node.object_id] = true\n    current_node = current_node.next\n  end\n\n  return false\nend\n```\n\n## Full Example\n\n```ruby\nclass Node\n  attr_accessor :next, :value\n\n  def initialize(value)\n    @value = value\n    @next  = nil\n  end\nend\n\nclass LinkedList\n  attr_accessor :head, :length\n\n  def initialize\n    @head = nil\n    @length = 0\n  end\n\n  def show_all\n    current_node = @head\n    puts \":----- Linked List: ----->\"\n\n    while(current_node)\n      puts \"object_id: #{current_node.object_id} - value: #{current_node.value}\\n\"\n      current_node = current_node.next\n    end\n  end\n\n  def add(value)\n    current_node = @head\n\n    if current_node\n      while(current_node.next)\n        current_node = current_node.next\n      end\n      current_node.next = Node.new(value)\n    else\n      @head = Node.new(value)\n    end\n\n    @length += 1\n  end\n\n  def delete(position)\n    return false if(!@head || position > @length)\n\n    prev_node = current_node = @head\n    i = 0\n\n    while(current_node)\n      if(i == position)\n        prev_node.next = current_node.next\n        return true\n      end\n\n      prev_node = current_node\n      current_node = current_node.next\n      i += 1\n    end\n\n    return false\n  end\n\n  # find node nth from the end of linked list\n  def find_nth_from_end_list(n)\n    return nil if (n < 0 || n > @length || !@head)\n\n    current_node = @head\n    i = 0\n\n    while(current_node)\n      if(i + n == @length)\n        return current_node\n      else\n        i += 1\n        current_node = current_node.next\n      end\n    end\n  end\n\n  # remove duplicate node\n  def remove_duplicate\n    current_node = @head\n    hash = {}\n    i = 0\n    sum_of_deleted = 0\n\n    while(current_node)\n      if(hash.key?(current_node.value))\n        # position in the next duplicate  will change after we remove any items\n        delete(i - sum_of_deleted)\n        sum_of_deleted += 1\n      else\n        hash[current_node.value] = true\n      end\n\n      i += 1\n      current_node = current_node.next\n    end\n  end\n\n  # remove middle node\n  def remove_middle_node\n    position = @length/2\n\n    i = 0\n    prev_node = current_node = @head\n\n    while(current_node)\n      if(i == position)\n        prev_node.next = current_node.next\n        break\n      else\n        prev_node = current_node\n        current_node = current_node.next\n        i += 1\n      end\n    end\n  end\n\n  def reverse\n    mid = @length / 2\n    i = 1\n    current_node = @head\n\n    while(i <= mid)\n      swap(current_node, find_nth_from_end_list(i))\n      current_node = current_node.next\n      i += 1\n    end\n  end\n\n  # plus two linked list\n  def plus(l2)\n    result = LinkedList.new\n    curr1 = @head\n    curr2 = l2.head\n    remember_number = 0\n\n    while(curr1 || curr2)\n      val1 = curr1 ? curr1.value : 0\n      val2 = curr2 ? curr2.value : 0\n\n      sum = val1 + val2 + remember_number\n\n      if sum >= 10\n        sum %= 10\n        remember_number = 1\n      end\n\n      result.add(sum)\n\n      curr1 = curr1.next\n      curr2 = curr2.next\n    end\n\n    result\n  end\n\n  def is_circular_linked_list?\n    return false if !@head\n    hash = {}\n\n    current_node = @head\n    while(current_node)\n      return false if(hash.key?(current_node.object_id))\n\n      hash[current_node.object_id] = true\n      current_node = current_node.next\n    end\n\n    return false\n  end\n\n  private\n\n  def swap(node1, node2)\n    tmp_value = node2.value\n    node2.value = node1.value\n    node1.value = tmp_value\n  end\nend\n```\n\n## Source\n\n> [https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists](https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists)\n","source":"_posts/2019-12-06-linked-list-with-ruby.md","raw":"---\ntitle: Implement Linked List With Ruby\ndate: 2019-12-06\ntags: [\"RUBY\"]\n---\n\n## Define Node\n\n```ruby\nclass Node\n  attr_accessor :next, :value\n\n  def initialize(value)\n    @value = value\n    @next  = nil\n  end\nend\n```\n\n## Define Linked List\n\n```ruby\nclass LinkedList\n  attr_accessor :head, :length\n\n  def initialize\n    @head = nil\n    @length = 0\n  end\nend\n```\n\n## Display Linked List\n\n```ruby\ndef show_all\n  current_node = @head\n  puts \":----- Linked List: ----->\"\n\n  while(current_node)\n    puts \"object_id: #{current_node.object_id} - value: #{current_node.value}\\n\"\n    current_node = current_node.next\n  end\nend\n```\n\n## Add New Node\n\n```ruby\ndef add(value)\n  current_node = @head\n\n  if current_node\n    while(current_node.next)\n      current_node = current_node.next\n    end\n    current_node.next = Node.new(value)\n  else\n    @head = Node.new(value)\n  end\n\n  @length += 1\nend\n```\n\n## Delete A Node At Position\n\n```ruby\ndef delete(position)\n  return false if(!@head || position > @length)\n\n  prev_node = current_node = @head\n  i = 0\n\n  while(current_node)\n    if(i == position)\n      prev_node.next = current_node.next\n      return true\n    end\n\n    prev_node = current_node\n    current_node = current_node.next\n    i += 1\n  end\n\n  return false\nend\n```\n\n## Reverse Linked List\n\n```ruby\ndef reverse\n  mid = @length / 2\n  i = 1\n  current_node = @head\n\n  while(i <= mid)\n    swap(current_node, find_nth_from_end_list(i))\n    current_node = current_node.next\n    i += 1\n  end\nend\n```\n\n## Check Circular Linked List\n\n```ruby\ndef is_circular_linked_list?\n  return false if !@head\n  hash = {}\n\n  current_node = @head\n  while(current_node)\n    return false if(hash.key?(current_node.object_id))\n\n    hash[current_node.object_id] = true\n    current_node = current_node.next\n  end\n\n  return false\nend\n```\n\n## Full Example\n\n```ruby\nclass Node\n  attr_accessor :next, :value\n\n  def initialize(value)\n    @value = value\n    @next  = nil\n  end\nend\n\nclass LinkedList\n  attr_accessor :head, :length\n\n  def initialize\n    @head = nil\n    @length = 0\n  end\n\n  def show_all\n    current_node = @head\n    puts \":----- Linked List: ----->\"\n\n    while(current_node)\n      puts \"object_id: #{current_node.object_id} - value: #{current_node.value}\\n\"\n      current_node = current_node.next\n    end\n  end\n\n  def add(value)\n    current_node = @head\n\n    if current_node\n      while(current_node.next)\n        current_node = current_node.next\n      end\n      current_node.next = Node.new(value)\n    else\n      @head = Node.new(value)\n    end\n\n    @length += 1\n  end\n\n  def delete(position)\n    return false if(!@head || position > @length)\n\n    prev_node = current_node = @head\n    i = 0\n\n    while(current_node)\n      if(i == position)\n        prev_node.next = current_node.next\n        return true\n      end\n\n      prev_node = current_node\n      current_node = current_node.next\n      i += 1\n    end\n\n    return false\n  end\n\n  # find node nth from the end of linked list\n  def find_nth_from_end_list(n)\n    return nil if (n < 0 || n > @length || !@head)\n\n    current_node = @head\n    i = 0\n\n    while(current_node)\n      if(i + n == @length)\n        return current_node\n      else\n        i += 1\n        current_node = current_node.next\n      end\n    end\n  end\n\n  # remove duplicate node\n  def remove_duplicate\n    current_node = @head\n    hash = {}\n    i = 0\n    sum_of_deleted = 0\n\n    while(current_node)\n      if(hash.key?(current_node.value))\n        # position in the next duplicate  will change after we remove any items\n        delete(i - sum_of_deleted)\n        sum_of_deleted += 1\n      else\n        hash[current_node.value] = true\n      end\n\n      i += 1\n      current_node = current_node.next\n    end\n  end\n\n  # remove middle node\n  def remove_middle_node\n    position = @length/2\n\n    i = 0\n    prev_node = current_node = @head\n\n    while(current_node)\n      if(i == position)\n        prev_node.next = current_node.next\n        break\n      else\n        prev_node = current_node\n        current_node = current_node.next\n        i += 1\n      end\n    end\n  end\n\n  def reverse\n    mid = @length / 2\n    i = 1\n    current_node = @head\n\n    while(i <= mid)\n      swap(current_node, find_nth_from_end_list(i))\n      current_node = current_node.next\n      i += 1\n    end\n  end\n\n  # plus two linked list\n  def plus(l2)\n    result = LinkedList.new\n    curr1 = @head\n    curr2 = l2.head\n    remember_number = 0\n\n    while(curr1 || curr2)\n      val1 = curr1 ? curr1.value : 0\n      val2 = curr2 ? curr2.value : 0\n\n      sum = val1 + val2 + remember_number\n\n      if sum >= 10\n        sum %= 10\n        remember_number = 1\n      end\n\n      result.add(sum)\n\n      curr1 = curr1.next\n      curr2 = curr2.next\n    end\n\n    result\n  end\n\n  def is_circular_linked_list?\n    return false if !@head\n    hash = {}\n\n    current_node = @head\n    while(current_node)\n      return false if(hash.key?(current_node.object_id))\n\n      hash[current_node.object_id] = true\n      current_node = current_node.next\n    end\n\n    return false\n  end\n\n  private\n\n  def swap(node1, node2)\n    tmp_value = node2.value\n    node2.value = node1.value\n    node1.value = tmp_value\n  end\nend\n```\n\n## Source\n\n> [https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists](https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists)\n","slug":"2019-12-06-linked-list-with-ruby","published":1,"updated":"2019-12-06T14:07:22.063Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe4100328ershksdbluv","content":"<h2 id=\"Define-Node\"><a href=\"#Define-Node\" class=\"headerlink\" title=\"Define Node\"></a>Define Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:next</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    @value = value</span><br><span class=\"line\">    @next  = <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Define-Linked-List\"><a href=\"#Define-Linked-List\" class=\"headerlink\" title=\"Define Linked List\"></a>Define Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:head</span>, <span class=\"symbol\">:length</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    @head = <span class=\"literal\">nil</span></span><br><span class=\"line\">    @length = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Display-Linked-List\"><a href=\"#Display-Linked-List\" class=\"headerlink\" title=\"Display Linked List\"></a>Display Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_all</span></span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\">  puts <span class=\"string\">\":----- Linked List: -----&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    puts <span class=\"string\">\"object_id: <span class=\"subst\">#&#123;current_node.object_id&#125;</span> - value: <span class=\"subst\">#&#123;current_node.value&#125;</span>\\n\"</span></span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Add-New-Node\"><a href=\"#Add-New-Node\" class=\"headerlink\" title=\"Add New Node\"></a>Add New Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> current_node</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node.<span class=\"keyword\">next</span>)</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">    current_node.<span class=\"keyword\">next</span> = Node.new(value)</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    @head = Node.new(value)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  @length += <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Delete-A-Node-At-Position\"><a href=\"#Delete-A-Node-At-Position\" class=\"headerlink\" title=\"Delete A Node At Position\"></a>Delete A Node At Position</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span><span class=\"params\">(position)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(!@head <span class=\"params\">||</span> position &gt; @length)</span><br><span class=\"line\"></span><br><span class=\"line\">  prev_node = current_node = @head</span><br><span class=\"line\">  i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">      prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    prev_node = current_node</span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Reverse-Linked-List\"><a href=\"#Reverse-Linked-List\" class=\"headerlink\" title=\"Reverse Linked List\"></a>Reverse Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reverse</span></span></span><br><span class=\"line\">  mid = @length / <span class=\"number\">2</span></span><br><span class=\"line\">  i = <span class=\"number\">1</span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt;= mid)</span><br><span class=\"line\">    swap(current_node, find_nth_from_end_list(i))</span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Check-Circular-Linked-List\"><a href=\"#Check-Circular-Linked-List\" class=\"headerlink\" title=\"Check Circular Linked List\"></a>Check Circular Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_circular_linked_list?</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@head</span><br><span class=\"line\">  hash = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(hash.key?(current_node.object_id))</span><br><span class=\"line\"></span><br><span class=\"line\">    hash[current_node.object_id] = <span class=\"literal\">true</span></span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Full-Example\"><a href=\"#Full-Example\" class=\"headerlink\" title=\"Full Example\"></a>Full Example</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:next</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    @value = value</span><br><span class=\"line\">    @next  = <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:head</span>, <span class=\"symbol\">:length</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    @head = <span class=\"literal\">nil</span></span><br><span class=\"line\">    @length = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_all</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    puts <span class=\"string\">\":----- Linked List: -----&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      puts <span class=\"string\">\"object_id: <span class=\"subst\">#&#123;current_node.object_id&#125;</span> - value: <span class=\"subst\">#&#123;current_node.value&#125;</span>\\n\"</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> current_node</span><br><span class=\"line\">      <span class=\"keyword\">while</span>(current_node.<span class=\"keyword\">next</span>)</span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">      current_node.<span class=\"keyword\">next</span> = Node.new(value)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @head = Node.new(value)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @length += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span><span class=\"params\">(position)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(!@head <span class=\"params\">||</span> position &gt; @length)</span><br><span class=\"line\"></span><br><span class=\"line\">    prev_node = current_node = @head</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">        prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      prev_node = current_node</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># find node nth from the end of linked list</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">find_nth_from_end_list</span><span class=\"params\">(n)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">nil</span> <span class=\"keyword\">if</span> (n &lt; <span class=\"number\">0</span> <span class=\"params\">||</span> n &gt; @length <span class=\"params\">||</span> !@head)</span><br><span class=\"line\"></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i + n == @length)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> current_node</span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># remove duplicate node</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">remove_duplicate</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    hash = &#123;&#125;</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    sum_of_deleted = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(hash.key?(current_node.value))</span><br><span class=\"line\">        <span class=\"comment\"># position in the next duplicate  will change after we remove any items</span></span><br><span class=\"line\">        delete(i - sum_of_deleted)</span><br><span class=\"line\">        sum_of_deleted += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        hash[current_node.value] = <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># remove middle node</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">remove_middle_node</span></span></span><br><span class=\"line\">    position = @length/<span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    prev_node = current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">        prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        prev_node = current_node</span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reverse</span></span></span><br><span class=\"line\">    mid = @length / <span class=\"number\">2</span></span><br><span class=\"line\">    i = <span class=\"number\">1</span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt;= mid)</span><br><span class=\"line\">      swap(current_node, find_nth_from_end_list(i))</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># plus two linked list</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">plus</span><span class=\"params\">(l2)</span></span></span><br><span class=\"line\">    result = LinkedList.new</span><br><span class=\"line\">    curr1 = @head</span><br><span class=\"line\">    curr2 = l2.head</span><br><span class=\"line\">    remember_number = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(curr1 <span class=\"params\">||</span> curr2)</span><br><span class=\"line\">      val1 = curr1 ? curr1.value : <span class=\"number\">0</span></span><br><span class=\"line\">      val2 = curr2 ? curr2.value : <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">      sum = val1 + val2 + remember_number</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> sum &gt;= <span class=\"number\">10</span></span><br><span class=\"line\">        sum %= <span class=\"number\">10</span></span><br><span class=\"line\">        remember_number = <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      result.add(sum)</span><br><span class=\"line\"></span><br><span class=\"line\">      curr1 = curr1.<span class=\"keyword\">next</span></span><br><span class=\"line\">      curr2 = curr2.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_circular_linked_list?</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@head</span><br><span class=\"line\">    hash = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(hash.key?(current_node.object_id))</span><br><span class=\"line\"></span><br><span class=\"line\">      hash[current_node.object_id] = <span class=\"literal\">true</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">swap</span><span class=\"params\">(node1, node2)</span></span></span><br><span class=\"line\">    tmp_value = node2.value</span><br><span class=\"line\">    node2.value = node1.value</span><br><span class=\"line\">    node1.value = tmp_value</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Source\"><a href=\"#Source\" class=\"headerlink\" title=\"Source\"></a>Source</h2><blockquote>\n<p><a href=\"https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists\" target=\"_blank\" rel=\"noopener\">https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Define-Node\"><a href=\"#Define-Node\" class=\"headerlink\" title=\"Define Node\"></a>Define Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:next</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    @value = value</span><br><span class=\"line\">    @next  = <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Define-Linked-List\"><a href=\"#Define-Linked-List\" class=\"headerlink\" title=\"Define Linked List\"></a>Define Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:head</span>, <span class=\"symbol\">:length</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    @head = <span class=\"literal\">nil</span></span><br><span class=\"line\">    @length = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Display-Linked-List\"><a href=\"#Display-Linked-List\" class=\"headerlink\" title=\"Display Linked List\"></a>Display Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_all</span></span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\">  puts <span class=\"string\">\":----- Linked List: -----&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    puts <span class=\"string\">\"object_id: <span class=\"subst\">#&#123;current_node.object_id&#125;</span> - value: <span class=\"subst\">#&#123;current_node.value&#125;</span>\\n\"</span></span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Add-New-Node\"><a href=\"#Add-New-Node\" class=\"headerlink\" title=\"Add New Node\"></a>Add New Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> current_node</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node.<span class=\"keyword\">next</span>)</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">    current_node.<span class=\"keyword\">next</span> = Node.new(value)</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    @head = Node.new(value)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  @length += <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Delete-A-Node-At-Position\"><a href=\"#Delete-A-Node-At-Position\" class=\"headerlink\" title=\"Delete A Node At Position\"></a>Delete A Node At Position</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span><span class=\"params\">(position)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(!@head <span class=\"params\">||</span> position &gt; @length)</span><br><span class=\"line\"></span><br><span class=\"line\">  prev_node = current_node = @head</span><br><span class=\"line\">  i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">      prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    prev_node = current_node</span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Reverse-Linked-List\"><a href=\"#Reverse-Linked-List\" class=\"headerlink\" title=\"Reverse Linked List\"></a>Reverse Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reverse</span></span></span><br><span class=\"line\">  mid = @length / <span class=\"number\">2</span></span><br><span class=\"line\">  i = <span class=\"number\">1</span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt;= mid)</span><br><span class=\"line\">    swap(current_node, find_nth_from_end_list(i))</span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Check-Circular-Linked-List\"><a href=\"#Check-Circular-Linked-List\" class=\"headerlink\" title=\"Check Circular Linked List\"></a>Check Circular Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_circular_linked_list?</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@head</span><br><span class=\"line\">  hash = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(hash.key?(current_node.object_id))</span><br><span class=\"line\"></span><br><span class=\"line\">    hash[current_node.object_id] = <span class=\"literal\">true</span></span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Full-Example\"><a href=\"#Full-Example\" class=\"headerlink\" title=\"Full Example\"></a>Full Example</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:next</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    @value = value</span><br><span class=\"line\">    @next  = <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:head</span>, <span class=\"symbol\">:length</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    @head = <span class=\"literal\">nil</span></span><br><span class=\"line\">    @length = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_all</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    puts <span class=\"string\">\":----- Linked List: -----&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      puts <span class=\"string\">\"object_id: <span class=\"subst\">#&#123;current_node.object_id&#125;</span> - value: <span class=\"subst\">#&#123;current_node.value&#125;</span>\\n\"</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> current_node</span><br><span class=\"line\">      <span class=\"keyword\">while</span>(current_node.<span class=\"keyword\">next</span>)</span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">      current_node.<span class=\"keyword\">next</span> = Node.new(value)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @head = Node.new(value)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @length += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span><span class=\"params\">(position)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(!@head <span class=\"params\">||</span> position &gt; @length)</span><br><span class=\"line\"></span><br><span class=\"line\">    prev_node = current_node = @head</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">        prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      prev_node = current_node</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># find node nth from the end of linked list</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">find_nth_from_end_list</span><span class=\"params\">(n)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">nil</span> <span class=\"keyword\">if</span> (n &lt; <span class=\"number\">0</span> <span class=\"params\">||</span> n &gt; @length <span class=\"params\">||</span> !@head)</span><br><span class=\"line\"></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i + n == @length)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> current_node</span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># remove duplicate node</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">remove_duplicate</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    hash = &#123;&#125;</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    sum_of_deleted = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(hash.key?(current_node.value))</span><br><span class=\"line\">        <span class=\"comment\"># position in the next duplicate  will change after we remove any items</span></span><br><span class=\"line\">        delete(i - sum_of_deleted)</span><br><span class=\"line\">        sum_of_deleted += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        hash[current_node.value] = <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># remove middle node</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">remove_middle_node</span></span></span><br><span class=\"line\">    position = @length/<span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    prev_node = current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">        prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        prev_node = current_node</span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reverse</span></span></span><br><span class=\"line\">    mid = @length / <span class=\"number\">2</span></span><br><span class=\"line\">    i = <span class=\"number\">1</span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt;= mid)</span><br><span class=\"line\">      swap(current_node, find_nth_from_end_list(i))</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># plus two linked list</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">plus</span><span class=\"params\">(l2)</span></span></span><br><span class=\"line\">    result = LinkedList.new</span><br><span class=\"line\">    curr1 = @head</span><br><span class=\"line\">    curr2 = l2.head</span><br><span class=\"line\">    remember_number = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(curr1 <span class=\"params\">||</span> curr2)</span><br><span class=\"line\">      val1 = curr1 ? curr1.value : <span class=\"number\">0</span></span><br><span class=\"line\">      val2 = curr2 ? curr2.value : <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">      sum = val1 + val2 + remember_number</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> sum &gt;= <span class=\"number\">10</span></span><br><span class=\"line\">        sum %= <span class=\"number\">10</span></span><br><span class=\"line\">        remember_number = <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      result.add(sum)</span><br><span class=\"line\"></span><br><span class=\"line\">      curr1 = curr1.<span class=\"keyword\">next</span></span><br><span class=\"line\">      curr2 = curr2.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_circular_linked_list?</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@head</span><br><span class=\"line\">    hash = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(hash.key?(current_node.object_id))</span><br><span class=\"line\"></span><br><span class=\"line\">      hash[current_node.object_id] = <span class=\"literal\">true</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">swap</span><span class=\"params\">(node1, node2)</span></span></span><br><span class=\"line\">    tmp_value = node2.value</span><br><span class=\"line\">    node2.value = node1.value</span><br><span class=\"line\">    node1.value = tmp_value</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Source\"><a href=\"#Source\" class=\"headerlink\" title=\"Source\"></a>Source</h2><blockquote>\n<p><a href=\"https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists\" target=\"_blank\" rel=\"noopener\">https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists</a></p>\n</blockquote>\n"},{"title":"How To Use Arguments In Ruby","date":"2019-12-04T17:00:00.000Z","_content":"\n## How Many Kind Of Arguments In Ruby?\n\nWe can answer: **Three**\n\n1. Required arguments\n\neg:\n\n```ruby\ndef hello(name)\n  puts \"Hello #{name}\"\nend\n```\n\nIn there, *name* is a required argument. it mean if you call **hello** method and do not pass an argument, the output that you see should like:\n\n```ruby\nhello()\n\n=> ArgumentError: wrong number of arguments (given 0, expected 1)\n\n```\n\nLet pass an argument and this error will gone.\n\n```ruby\nhello('Meo Meo')\n\n=> \"Hello Meo Meo\"\n```\n\nIt's very simple, I think we are make sence now.\n\n2. Default arguments\n\nAlmost like **Required arguments**. It has one more thing different:\n\nThat is when we pass argument in a method, we can set default value for it, and then when you call this method and unlucky forgot pass arguments for this method, your method still working, if it's not received arguments when it is called, it will use the default value.\n\neg:\n\n```ruby\ndef hello(name = \"Meo Meo\")\n  puts \"Hello #{name}\"\nend\n\nhello(\"Chinh\")\n=> \"Hello Chinh\"\n\n# if you don't pass an argument\nhello()\n=> \"Hello Meo Meo\"\n```\n\n3. Optional arguments\n\nDo you ever want to create a method and have no idea how many arguments does this method need?\n\nYes, we use optional arguments for this case, take a looke at the example below:\n\n```ruby\ndef hello(*family)\n  family.each do |name|\n    puts \"Hello #{name}\\n\"\n  end\nend\n\nhello('Chinh', 'Chuot', 'Cho')\n\n# The output:\n# Hello Chinh\n# Hello Chuot\n# Hello Cho\n```\n\n## Keyword Arguments\n\nIt's a new feature has come from ruby 2.0 to higher. It like pass arguments as a hash but more powerful.\n\neg:\n\n```ruby\ndef hello(name: 'Chinh', age: 25)\n  puts \"Name: #{name} - Age: #{age}\\n\"\nend\n```\n\nif you call **hello** method with no arguments:\n\n```ruby\nhello()\n```\n\nIt will use default value.\n\nAnd then\n\nIf you pass argumets for it:\n\n```ruby\nhello('Chinh', 25)\n```\n\nwhat will it return?\n\n**Error**: yes, it will response an error, but why?\n\nBecause, with **keyword arguments**, you need to pass argumetns like a hash you declare when initial method. (**same key**).\n\n```ruby\nhello(name: 'Meo')\n# Hello Meo - Age: 25\n\nhello(age: 10)\n# Hello Chinh - Age: 10\n\nhello(name: 'Chuot', age: 11)\n# Hello Chuot - Age: 11\n```\n\nIf you want to required an argument with no default value, try this:\n\n```ruby\ndef hello(name:, age:)\n  puts \"Name: #{name} - Age: #{age}\\n\"\nend\n```\n\nIt mean the method need to receive \"a hash\" with two key *name* and *age*. if it does not revieve, error will raise.\n","source":"_posts/2019-12-05-ruby-argument.md","raw":"---\ntitle: How To Use Arguments In Ruby\ndate: 2019-12-05\ntags: [\"RUBY\", \"TIL\"]\n---\n\n## How Many Kind Of Arguments In Ruby?\n\nWe can answer: **Three**\n\n1. Required arguments\n\neg:\n\n```ruby\ndef hello(name)\n  puts \"Hello #{name}\"\nend\n```\n\nIn there, *name* is a required argument. it mean if you call **hello** method and do not pass an argument, the output that you see should like:\n\n```ruby\nhello()\n\n=> ArgumentError: wrong number of arguments (given 0, expected 1)\n\n```\n\nLet pass an argument and this error will gone.\n\n```ruby\nhello('Meo Meo')\n\n=> \"Hello Meo Meo\"\n```\n\nIt's very simple, I think we are make sence now.\n\n2. Default arguments\n\nAlmost like **Required arguments**. It has one more thing different:\n\nThat is when we pass argument in a method, we can set default value for it, and then when you call this method and unlucky forgot pass arguments for this method, your method still working, if it's not received arguments when it is called, it will use the default value.\n\neg:\n\n```ruby\ndef hello(name = \"Meo Meo\")\n  puts \"Hello #{name}\"\nend\n\nhello(\"Chinh\")\n=> \"Hello Chinh\"\n\n# if you don't pass an argument\nhello()\n=> \"Hello Meo Meo\"\n```\n\n3. Optional arguments\n\nDo you ever want to create a method and have no idea how many arguments does this method need?\n\nYes, we use optional arguments for this case, take a looke at the example below:\n\n```ruby\ndef hello(*family)\n  family.each do |name|\n    puts \"Hello #{name}\\n\"\n  end\nend\n\nhello('Chinh', 'Chuot', 'Cho')\n\n# The output:\n# Hello Chinh\n# Hello Chuot\n# Hello Cho\n```\n\n## Keyword Arguments\n\nIt's a new feature has come from ruby 2.0 to higher. It like pass arguments as a hash but more powerful.\n\neg:\n\n```ruby\ndef hello(name: 'Chinh', age: 25)\n  puts \"Name: #{name} - Age: #{age}\\n\"\nend\n```\n\nif you call **hello** method with no arguments:\n\n```ruby\nhello()\n```\n\nIt will use default value.\n\nAnd then\n\nIf you pass argumets for it:\n\n```ruby\nhello('Chinh', 25)\n```\n\nwhat will it return?\n\n**Error**: yes, it will response an error, but why?\n\nBecause, with **keyword arguments**, you need to pass argumetns like a hash you declare when initial method. (**same key**).\n\n```ruby\nhello(name: 'Meo')\n# Hello Meo - Age: 25\n\nhello(age: 10)\n# Hello Chinh - Age: 10\n\nhello(name: 'Chuot', age: 11)\n# Hello Chuot - Age: 11\n```\n\nIf you want to required an argument with no default value, try this:\n\n```ruby\ndef hello(name:, age:)\n  puts \"Name: #{name} - Age: #{age}\\n\"\nend\n```\n\nIt mean the method need to receive \"a hash\" with two key *name* and *age*. if it does not revieve, error will raise.\n","slug":"2019-12-05-ruby-argument","published":1,"updated":"2019-12-28T06:59:01.238Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe4200358ersbnf472kt","content":"<h2 id=\"How-Many-Kind-Of-Arguments-In-Ruby\"><a href=\"#How-Many-Kind-Of-Arguments-In-Ruby\" class=\"headerlink\" title=\"How Many Kind Of Arguments In Ruby?\"></a>How Many Kind Of Arguments In Ruby?</h2><p>We can answer: <strong>Three</strong></p>\n<ol>\n<li>Required arguments</li>\n</ol>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>In there, <em>name</em> is a required argument. it mean if you call <strong>hello</strong> method and do not pass an argument, the output that you see should like:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello()</span><br><span class=\"line\"></span><br><span class=\"line\">=&gt; <span class=\"symbol\">ArgumentError:</span> wrong number of arguments (given <span class=\"number\">0</span>, expected <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Let pass an argument and this error will gone.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"string\">'Meo Meo'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Meo Meo\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Its very simple, I think we are make sence now.</p>\n<ol start=\"2\">\n<li>Default arguments</li>\n</ol>\n<p>Almost like <strong>Required arguments</strong>. It has one more thing different:</p>\n<p>That is when we pass argument in a method, we can set default value for it, and then when you call this method and unlucky forgot pass arguments for this method, your method still working, if its not received arguments when it is called, it will use the default value.</p>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(name = <span class=\"string\">\"Meo Meo\"</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"string\">\"Chinh\"</span>)</span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Chinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># if you don't pass an argument</span></span><br><span class=\"line\">hello()</span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Meo Meo\"</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>Optional arguments</li>\n</ol>\n<p>Do you ever want to create a method and have no idea how many arguments does this method need?</p>\n<p>Yes, we use optional arguments for this case, take a looke at the example below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(*family)</span></span></span><br><span class=\"line\">  family.each <span class=\"keyword\">do</span> <span class=\"params\">|name|</span></span><br><span class=\"line\">    puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\\n\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"string\">'Chinh'</span>, <span class=\"string\">'Chuot'</span>, <span class=\"string\">'Cho'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The output:</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Chinh</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Chuot</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Cho</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Keyword-Arguments\"><a href=\"#Keyword-Arguments\" class=\"headerlink\" title=\"Keyword Arguments\"></a>Keyword Arguments</h2><p>Its a new feature has come from ruby 2.0 to higher. It like pass arguments as a hash but more powerful.</p>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(<span class=\"symbol\">name:</span> <span class=\"string\">'Chinh'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">25</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Name: <span class=\"subst\">#&#123;name&#125;</span> - Age: <span class=\"subst\">#&#123;age&#125;</span>\\n\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>if you call <strong>hello</strong> method with no arguments:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello()</span><br></pre></td></tr></table></figure>\n\n<p>It will use default value.</p>\n<p>And then</p>\n<p>If you pass argumets for it:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"string\">'Chinh'</span>, <span class=\"number\">25</span>)</span><br></pre></td></tr></table></figure>\n\n<p>what will it return?</p>\n<p><strong>Error</strong>: yes, it will response an error, but why?</p>\n<p>Because, with <strong>keyword arguments</strong>, you need to pass argumetns like a hash you declare when initial method. (<strong>same key</strong>).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"symbol\">name:</span> <span class=\"string\">'Meo'</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Meo - Age: 25</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"symbol\">age:</span> <span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Chinh - Age: 10</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"symbol\">name:</span> <span class=\"string\">'Chuot'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">11</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Chuot - Age: 11</span></span><br></pre></td></tr></table></figure>\n\n<p>If you want to required an argument with no default value, try this:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(<span class=\"symbol\">name:</span>, <span class=\"symbol\">age:</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Name: <span class=\"subst\">#&#123;name&#125;</span> - Age: <span class=\"subst\">#&#123;age&#125;</span>\\n\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>It mean the method need to receive a hash with two key <em>name</em> and <em>age</em>. if it does not revieve, error will raise.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"How-Many-Kind-Of-Arguments-In-Ruby\"><a href=\"#How-Many-Kind-Of-Arguments-In-Ruby\" class=\"headerlink\" title=\"How Many Kind Of Arguments In Ruby?\"></a>How Many Kind Of Arguments In Ruby?</h2><p>We can answer: <strong>Three</strong></p>\n<ol>\n<li>Required arguments</li>\n</ol>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>In there, <em>name</em> is a required argument. it mean if you call <strong>hello</strong> method and do not pass an argument, the output that you see should like:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello()</span><br><span class=\"line\"></span><br><span class=\"line\">=&gt; <span class=\"symbol\">ArgumentError:</span> wrong number of arguments (given <span class=\"number\">0</span>, expected <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Let pass an argument and this error will gone.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"string\">'Meo Meo'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Meo Meo\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Its very simple, I think we are make sence now.</p>\n<ol start=\"2\">\n<li>Default arguments</li>\n</ol>\n<p>Almost like <strong>Required arguments</strong>. It has one more thing different:</p>\n<p>That is when we pass argument in a method, we can set default value for it, and then when you call this method and unlucky forgot pass arguments for this method, your method still working, if its not received arguments when it is called, it will use the default value.</p>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(name = <span class=\"string\">\"Meo Meo\"</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"string\">\"Chinh\"</span>)</span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Chinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># if you don't pass an argument</span></span><br><span class=\"line\">hello()</span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Meo Meo\"</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>Optional arguments</li>\n</ol>\n<p>Do you ever want to create a method and have no idea how many arguments does this method need?</p>\n<p>Yes, we use optional arguments for this case, take a looke at the example below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(*family)</span></span></span><br><span class=\"line\">  family.each <span class=\"keyword\">do</span> <span class=\"params\">|name|</span></span><br><span class=\"line\">    puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\\n\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"string\">'Chinh'</span>, <span class=\"string\">'Chuot'</span>, <span class=\"string\">'Cho'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The output:</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Chinh</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Chuot</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Cho</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Keyword-Arguments\"><a href=\"#Keyword-Arguments\" class=\"headerlink\" title=\"Keyword Arguments\"></a>Keyword Arguments</h2><p>Its a new feature has come from ruby 2.0 to higher. It like pass arguments as a hash but more powerful.</p>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(<span class=\"symbol\">name:</span> <span class=\"string\">'Chinh'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">25</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Name: <span class=\"subst\">#&#123;name&#125;</span> - Age: <span class=\"subst\">#&#123;age&#125;</span>\\n\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>if you call <strong>hello</strong> method with no arguments:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello()</span><br></pre></td></tr></table></figure>\n\n<p>It will use default value.</p>\n<p>And then</p>\n<p>If you pass argumets for it:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"string\">'Chinh'</span>, <span class=\"number\">25</span>)</span><br></pre></td></tr></table></figure>\n\n<p>what will it return?</p>\n<p><strong>Error</strong>: yes, it will response an error, but why?</p>\n<p>Because, with <strong>keyword arguments</strong>, you need to pass argumetns like a hash you declare when initial method. (<strong>same key</strong>).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"symbol\">name:</span> <span class=\"string\">'Meo'</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Meo - Age: 25</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"symbol\">age:</span> <span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Chinh - Age: 10</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"symbol\">name:</span> <span class=\"string\">'Chuot'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">11</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Chuot - Age: 11</span></span><br></pre></td></tr></table></figure>\n\n<p>If you want to required an argument with no default value, try this:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(<span class=\"symbol\">name:</span>, <span class=\"symbol\">age:</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Name: <span class=\"subst\">#&#123;name&#125;</span> - Age: <span class=\"subst\">#&#123;age&#125;</span>\\n\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>It mean the method need to receive a hash with two key <em>name</em> and <em>age</em>. if it does not revieve, error will raise.</p>\n"},{"title":"Searching In Array","date":"2019-12-15T17:00:00.000Z","_content":"\n## Binary Search\n\n```ruby\na = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\ndef binary_search(nums, left, right, target)\n  while left <= right\n    mid = (left + right) / 2\n\n    return mid if nums[mid] == target\n\n    if target < nums[mid]\n      right = mid - 1\n      return binary_search(nums, left, right, target)\n    else\n      left = mid + 1\n      return binary_search(nums, left, right, target)\n    end\n  end\n\n  return -1\nend\n\nbinary_search(a, 0, 8, 5)\n\n```\n\n> ...\n","source":"_posts/2019-12-16-search-in-array.md","raw":"---\ntitle: Searching In Array\ndate: 2019-12-16\ntags: [\"RUBY\"]\n---\n\n## Binary Search\n\n```ruby\na = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\ndef binary_search(nums, left, right, target)\n  while left <= right\n    mid = (left + right) / 2\n\n    return mid if nums[mid] == target\n\n    if target < nums[mid]\n      right = mid - 1\n      return binary_search(nums, left, right, target)\n    else\n      left = mid + 1\n      return binary_search(nums, left, right, target)\n    end\n  end\n\n  return -1\nend\n\nbinary_search(a, 0, 8, 5)\n\n```\n\n> ...\n","slug":"2019-12-16-search-in-array","published":1,"updated":"2019-12-20T13:45:57.967Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe4500388ersh1ykbi87","content":"<h2 id=\"Binary-Search\"><a href=\"#Binary-Search\" class=\"headerlink\" title=\"Binary Search\"></a>Binary Search</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">binary_search</span><span class=\"params\">(nums, left, right, target)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> left &lt;= right</span><br><span class=\"line\">    mid = (left + right) / <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> mid <span class=\"keyword\">if</span> nums[mid] == target</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> target &lt; nums[mid]</span><br><span class=\"line\">      right = mid - <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> binary_search(nums, left, right, target)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      left = mid + <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> binary_search(nums, left, right, target)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">binary_search(a, <span class=\"number\">0</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Binary-Search\"><a href=\"#Binary-Search\" class=\"headerlink\" title=\"Binary Search\"></a>Binary Search</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">binary_search</span><span class=\"params\">(nums, left, right, target)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> left &lt;= right</span><br><span class=\"line\">    mid = (left + right) / <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> mid <span class=\"keyword\">if</span> nums[mid] == target</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> target &lt; nums[mid]</span><br><span class=\"line\">      right = mid - <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> binary_search(nums, left, right, target)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      left = mid + <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> binary_search(nums, left, right, target)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">binary_search(a, <span class=\"number\">0</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p></p>\n</blockquote>\n"},{"title":"Example Of Two Pointer With Ruby","date":"2019-12-19T17:00:00.000Z","_content":"\n## [3sum-closest](https://leetcode.com/problems/3sum-closest/submissions/)\n\n![bai giai](/../images/3sum_2.jpeg)\n\n```ruby\ndef three_sum_closest(nums, target)\n  nums.sort!\n\n  length = nums.size\n  kq = nums[0] + nums[1] + nums[length - 1]\n\n  0.upto(length - 2) do |i|\n    ptr1 = i + 1\n    ptr2 = length - 1\n\n    while ptr1 < ptr2\n      sum = nums[i] + nums[ptr1] + nums[ptr2]\n\n      return target if (target - sum).abs == 0\n\n      kq = sum if (target - sum).abs < (target - kq).abs\n\n      if sum > target\n        ptr2 -= 1\n      else\n        ptr1 += 1\n      end\n    end\n\n  end\n\n  kq\nend\n```\n\n\n## [container-with-most-water](https://leetcode.com/problems/container-with-most-water/submissions/)\n\n![bai giai](/../images/question_11.jpg)\n\n```ruby\ndef get_container_water(arr, a, b)\n  h = arr[a] >= arr[b] ? arr[b] : arr[a]\n  h * (b - a).abs\nend\n\ndef max_area(height)\n  start = 0\n  finish = height.size - 1\n\n  max = get_container_water(height, start, finish)\n\n  while start < finish\n    if height[start] >= height[finish]\n      finish -= 1\n      return max if finish <= start\n    else\n      start += 1\n      return max if start >= finish\n    end\n\n    max = get_container_water(height, start, finish) if get_container_water(height, start, finish) > max\n  end\n\n  max\nend\n```\n","source":"_posts/2019-12-20-example-of-two-pointer.md","raw":"---\ntitle: Example Of Two Pointer With Ruby\ndate: 2019-12-20\ntags: [\"RUBY\"]\n---\n\n## [3sum-closest](https://leetcode.com/problems/3sum-closest/submissions/)\n\n![bai giai](/../images/3sum_2.jpeg)\n\n```ruby\ndef three_sum_closest(nums, target)\n  nums.sort!\n\n  length = nums.size\n  kq = nums[0] + nums[1] + nums[length - 1]\n\n  0.upto(length - 2) do |i|\n    ptr1 = i + 1\n    ptr2 = length - 1\n\n    while ptr1 < ptr2\n      sum = nums[i] + nums[ptr1] + nums[ptr2]\n\n      return target if (target - sum).abs == 0\n\n      kq = sum if (target - sum).abs < (target - kq).abs\n\n      if sum > target\n        ptr2 -= 1\n      else\n        ptr1 += 1\n      end\n    end\n\n  end\n\n  kq\nend\n```\n\n\n## [container-with-most-water](https://leetcode.com/problems/container-with-most-water/submissions/)\n\n![bai giai](/../images/question_11.jpg)\n\n```ruby\ndef get_container_water(arr, a, b)\n  h = arr[a] >= arr[b] ? arr[b] : arr[a]\n  h * (b - a).abs\nend\n\ndef max_area(height)\n  start = 0\n  finish = height.size - 1\n\n  max = get_container_water(height, start, finish)\n\n  while start < finish\n    if height[start] >= height[finish]\n      finish -= 1\n      return max if finish <= start\n    else\n      start += 1\n      return max if start >= finish\n    end\n\n    max = get_container_water(height, start, finish) if get_container_water(height, start, finish) > max\n  end\n\n  max\nend\n```\n","slug":"2019-12-20-example-of-two-pointer","published":1,"updated":"2019-12-20T13:57:28.610Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe47003a8ers4vr09tz9","content":"<h2 id=\"3sum-closest\"><a href=\"#3sum-closest\" class=\"headerlink\" title=\"3sum-closest\"></a><a href=\"https://leetcode.com/problems/3sum-closest/submissions/\" target=\"_blank\" rel=\"noopener\">3sum-closest</a></h2><p><img src=\"/../images/3sum_2.jpeg\" alt=\"bai giai\"></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">three_sum_closest</span><span class=\"params\">(nums, target)</span></span></span><br><span class=\"line\">  nums.sort!</span><br><span class=\"line\"></span><br><span class=\"line\">  length = nums.size</span><br><span class=\"line\">  kq = nums[<span class=\"number\">0</span>] + nums[<span class=\"number\">1</span>] + nums[length - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">0</span>.upto(length - <span class=\"number\">2</span>) <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">    ptr1 = i + <span class=\"number\">1</span></span><br><span class=\"line\">    ptr2 = length - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ptr1 &lt; ptr2</span><br><span class=\"line\">      sum = nums[i] + nums[ptr1] + nums[ptr2]</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> target <span class=\"keyword\">if</span> (target - sum).abs == <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">      kq = sum <span class=\"keyword\">if</span> (target - sum).abs &lt; (target - kq).abs</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> sum &gt; target</span><br><span class=\"line\">        ptr2 -= <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        ptr1 += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  kq</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"container-with-most-water\"><a href=\"#container-with-most-water\" class=\"headerlink\" title=\"container-with-most-water\"></a><a href=\"https://leetcode.com/problems/container-with-most-water/submissions/\" target=\"_blank\" rel=\"noopener\">container-with-most-water</a></h2><p><img src=\"/../images/question_11.jpg\" alt=\"bai giai\"></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_container_water</span><span class=\"params\">(arr, a, b)</span></span></span><br><span class=\"line\">  h = arr[a] &gt;= arr[b] ? arr[b] : arr[a]</span><br><span class=\"line\">  h * (b - a).abs</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">max_area</span><span class=\"params\">(height)</span></span></span><br><span class=\"line\">  start = <span class=\"number\">0</span></span><br><span class=\"line\">  finish = height.size - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  max = get_container_water(height, start, finish)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span> start &lt; finish</span><br><span class=\"line\">    <span class=\"keyword\">if</span> height[start] &gt;= height[finish]</span><br><span class=\"line\">      finish -= <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> max <span class=\"keyword\">if</span> finish &lt;= start</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      start += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> max <span class=\"keyword\">if</span> start &gt;= finish</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    max = get_container_water(height, start, finish) <span class=\"keyword\">if</span> get_container_water(height, start, finish) &gt; max</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  max</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"3sum-closest\"><a href=\"#3sum-closest\" class=\"headerlink\" title=\"3sum-closest\"></a><a href=\"https://leetcode.com/problems/3sum-closest/submissions/\" target=\"_blank\" rel=\"noopener\">3sum-closest</a></h2><p><img src=\"/../images/3sum_2.jpeg\" alt=\"bai giai\"></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">three_sum_closest</span><span class=\"params\">(nums, target)</span></span></span><br><span class=\"line\">  nums.sort!</span><br><span class=\"line\"></span><br><span class=\"line\">  length = nums.size</span><br><span class=\"line\">  kq = nums[<span class=\"number\">0</span>] + nums[<span class=\"number\">1</span>] + nums[length - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">0</span>.upto(length - <span class=\"number\">2</span>) <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">    ptr1 = i + <span class=\"number\">1</span></span><br><span class=\"line\">    ptr2 = length - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ptr1 &lt; ptr2</span><br><span class=\"line\">      sum = nums[i] + nums[ptr1] + nums[ptr2]</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> target <span class=\"keyword\">if</span> (target - sum).abs == <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">      kq = sum <span class=\"keyword\">if</span> (target - sum).abs &lt; (target - kq).abs</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> sum &gt; target</span><br><span class=\"line\">        ptr2 -= <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        ptr1 += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  kq</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"container-with-most-water\"><a href=\"#container-with-most-water\" class=\"headerlink\" title=\"container-with-most-water\"></a><a href=\"https://leetcode.com/problems/container-with-most-water/submissions/\" target=\"_blank\" rel=\"noopener\">container-with-most-water</a></h2><p><img src=\"/../images/question_11.jpg\" alt=\"bai giai\"></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_container_water</span><span class=\"params\">(arr, a, b)</span></span></span><br><span class=\"line\">  h = arr[a] &gt;= arr[b] ? arr[b] : arr[a]</span><br><span class=\"line\">  h * (b - a).abs</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">max_area</span><span class=\"params\">(height)</span></span></span><br><span class=\"line\">  start = <span class=\"number\">0</span></span><br><span class=\"line\">  finish = height.size - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  max = get_container_water(height, start, finish)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span> start &lt; finish</span><br><span class=\"line\">    <span class=\"keyword\">if</span> height[start] &gt;= height[finish]</span><br><span class=\"line\">      finish -= <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> max <span class=\"keyword\">if</span> finish &lt;= start</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      start += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> max <span class=\"keyword\">if</span> start &gt;= finish</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    max = get_container_water(height, start, finish) <span class=\"keyword\">if</span> get_container_water(height, start, finish) &gt; max</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  max</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Clone Object And Array In JS","date":"2019-12-27T17:00:00.000Z","_content":"\n> Recommend from some developers who have more exp than me: 'Should use LoDash library'\n\n## Why do we have to clone?\n\nIn fact, when we working on our projects, many times we need to get data from an object or an array and use it for some features what we want. In some cases, we need to change data from original object, but some other cases we need a version copy because we must keep original data not change.\n\nSo, in this case, what do you do? Do you ever think we can do it easy by some code below:\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = obj\n```\n\nAnd we now can free to change **copy_obj** without fear of changing **obj**?\n\nSo sad, the above way cannot work right. Why? why it is wrong? Everything same like fine, what's problem we have?\n\n> The problem at here is **Objects(array is an object) are reference types**.\n\nWhat does that mean?\n\nThat mean: Reference types doesn't hold any data, it's only contains a pointer to the value of object in memory.\n\nWhen you use **=**, **copy_obj** will contains a pointer to the value of **obj**. So, if you change anything in **copy_obj** or **obj**, the other variable will change too.\n\n## Clone Object and Array\n> We have many ways to clone an object, but there are three main ways need to know.\n\n1. Use spread syntax.\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = {...obj}\n```\n\n2. Use Object.assign\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = Object.assign({}, obj)\n```\n\n3. Use JSON\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = JSON.parse(JSON.stringify(obj))\n```\n\n> We know in javascript, array is also an object, thus all approach that we use for object above can apply for array too.\n\n## Deep Clone And Shallow Clone\n\n> Deep Clone is mean copy everything to another memory.\n\n> Shallow Clone is mean it's only copy first level of original object to another memory.From second level it's references to original object.\n\n> Use Object.asign or JSON are deep clone. In the most cases, using Object.assign show a lot faster than JSON.\n\n> Use spread is shallow clone.\n\nTake a look to the sample code below to know why use spread is shallow clone:\n\n```javascript\nobj = {\n  name: 'Chinh',\n  age: 25\n  location: {\n    city: 'Saigon'\n  }\n}\n\nclone_obj = {...obj}\n\nclone_obj.name = \"Duy Chinh\"\n\nclone_obj.location.city = \"Nam Dinh\"\n\nconsole.log(obj)\n// result look like:\n\n// {\n//   name: \"Chinh\",\n//   age: 25,\n//   location: {\n//     city: \"Nam Dinh\"\n//   }\n// }\n\n// city in original object has changed\n```\n\n## References\n\n[1][https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array](https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array)\n[2][https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects](https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects)\n","source":"_posts/2019-12-28-clone-object-and-array-in-javascript.md","raw":"---\ntitle: Clone Object And Array In JS\ndate: 2019-12-28\ntags: [\"JS\"]\n---\n\n> Recommend from some developers who have more exp than me: 'Should use LoDash library'\n\n## Why do we have to clone?\n\nIn fact, when we working on our projects, many times we need to get data from an object or an array and use it for some features what we want. In some cases, we need to change data from original object, but some other cases we need a version copy because we must keep original data not change.\n\nSo, in this case, what do you do? Do you ever think we can do it easy by some code below:\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = obj\n```\n\nAnd we now can free to change **copy_obj** without fear of changing **obj**?\n\nSo sad, the above way cannot work right. Why? why it is wrong? Everything same like fine, what's problem we have?\n\n> The problem at here is **Objects(array is an object) are reference types**.\n\nWhat does that mean?\n\nThat mean: Reference types doesn't hold any data, it's only contains a pointer to the value of object in memory.\n\nWhen you use **=**, **copy_obj** will contains a pointer to the value of **obj**. So, if you change anything in **copy_obj** or **obj**, the other variable will change too.\n\n## Clone Object and Array\n> We have many ways to clone an object, but there are three main ways need to know.\n\n1. Use spread syntax.\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = {...obj}\n```\n\n2. Use Object.assign\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = Object.assign({}, obj)\n```\n\n3. Use JSON\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = JSON.parse(JSON.stringify(obj))\n```\n\n> We know in javascript, array is also an object, thus all approach that we use for object above can apply for array too.\n\n## Deep Clone And Shallow Clone\n\n> Deep Clone is mean copy everything to another memory.\n\n> Shallow Clone is mean it's only copy first level of original object to another memory.From second level it's references to original object.\n\n> Use Object.asign or JSON are deep clone. In the most cases, using Object.assign show a lot faster than JSON.\n\n> Use spread is shallow clone.\n\nTake a look to the sample code below to know why use spread is shallow clone:\n\n```javascript\nobj = {\n  name: 'Chinh',\n  age: 25\n  location: {\n    city: 'Saigon'\n  }\n}\n\nclone_obj = {...obj}\n\nclone_obj.name = \"Duy Chinh\"\n\nclone_obj.location.city = \"Nam Dinh\"\n\nconsole.log(obj)\n// result look like:\n\n// {\n//   name: \"Chinh\",\n//   age: 25,\n//   location: {\n//     city: \"Nam Dinh\"\n//   }\n// }\n\n// city in original object has changed\n```\n\n## References\n\n[1][https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array](https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array)\n[2][https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects](https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects)\n","slug":"2019-12-28-clone-object-and-array-in-javascript","published":1,"updated":"2019-12-28T07:35:10.364Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe4a003d8erscch6ct46","content":"<blockquote>\n<p>Recommend from some developers who have more exp than me: Should use LoDash library</p>\n</blockquote>\n<h2 id=\"Why-do-we-have-to-clone\"><a href=\"#Why-do-we-have-to-clone\" class=\"headerlink\" title=\"Why do we have to clone?\"></a>Why do we have to clone?</h2><p>In fact, when we working on our projects, many times we need to get data from an object or an array and use it for some features what we want. In some cases, we need to change data from original object, but some other cases we need a version copy because we must keep original data not change.</p>\n<p>So, in this case, what do you do? Do you ever think we can do it easy by some code below:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = obj</span><br></pre></td></tr></table></figure>\n\n<p>And we now can free to change <strong>copy_obj</strong> without fear of changing <strong>obj</strong>?</p>\n<p>So sad, the above way cannot work right. Why? why it is wrong? Everything same like fine, whats problem we have?</p>\n<blockquote>\n<p>The problem at here is <strong>Objects(array is an object) are reference types</strong>.</p>\n</blockquote>\n<p>What does that mean?</p>\n<p>That mean: Reference types doesnt hold any data, its only contains a pointer to the value of object in memory.</p>\n<p>When you use <strong>=</strong>, <strong>copy_obj</strong> will contains a pointer to the value of <strong>obj</strong>. So, if you change anything in <strong>copy_obj</strong> or <strong>obj</strong>, the other variable will change too.</p>\n<h2 id=\"Clone-Object-and-Array\"><a href=\"#Clone-Object-and-Array\" class=\"headerlink\" title=\"Clone Object and Array\"></a>Clone Object and Array</h2><blockquote>\n<p>We have many ways to clone an object, but there are three main ways need to know.</p>\n</blockquote>\n<ol>\n<li>Use spread syntax.</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = &#123;...obj&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>Use Object.assign</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>Use JSON</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">JSON</span>.stringify(obj))</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>We know in javascript, array is also an object, thus all approach that we use for object above can apply for array too.</p>\n</blockquote>\n<h2 id=\"Deep-Clone-And-Shallow-Clone\"><a href=\"#Deep-Clone-And-Shallow-Clone\" class=\"headerlink\" title=\"Deep Clone And Shallow Clone\"></a>Deep Clone And Shallow Clone</h2><blockquote>\n<p>Deep Clone is mean copy everything to another memory.</p>\n</blockquote>\n<blockquote>\n<p>Shallow Clone is mean its only copy first level of original object to another memory.From second level its references to original object.</p>\n</blockquote>\n<blockquote>\n<p>Use Object.asign or JSON are deep clone. In the most cases, using Object.assign show a lot faster than JSON.</p>\n</blockquote>\n<blockquote>\n<p>Use spread is shallow clone.</p>\n</blockquote>\n<p>Take a look to the sample code below to know why use spread is shallow clone:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">obj = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Chinh'</span>,</span><br><span class=\"line\">  age: <span class=\"number\">25</span></span><br><span class=\"line\">  location: &#123;</span><br><span class=\"line\">    city: <span class=\"string\">'Saigon'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj = &#123;...obj&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj.name = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj.location.city = <span class=\"string\">\"Nam Dinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj)</span><br><span class=\"line\"><span class=\"comment\">// result look like:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   name: \"Chinh\",</span></span><br><span class=\"line\"><span class=\"comment\">//   age: 25,</span></span><br><span class=\"line\"><span class=\"comment\">//   location: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     city: \"Nam Dinh\"</span></span><br><span class=\"line\"><span class=\"comment\">//   &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// city in original object has changed</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array\" target=\"_blank\" rel=\"noopener\">https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array</a><br>[2]<a href=\"https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects\" target=\"_blank\" rel=\"noopener\">https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects</a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>Recommend from some developers who have more exp than me: Should use LoDash library</p>\n</blockquote>\n<h2 id=\"Why-do-we-have-to-clone\"><a href=\"#Why-do-we-have-to-clone\" class=\"headerlink\" title=\"Why do we have to clone?\"></a>Why do we have to clone?</h2><p>In fact, when we working on our projects, many times we need to get data from an object or an array and use it for some features what we want. In some cases, we need to change data from original object, but some other cases we need a version copy because we must keep original data not change.</p>\n<p>So, in this case, what do you do? Do you ever think we can do it easy by some code below:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = obj</span><br></pre></td></tr></table></figure>\n\n<p>And we now can free to change <strong>copy_obj</strong> without fear of changing <strong>obj</strong>?</p>\n<p>So sad, the above way cannot work right. Why? why it is wrong? Everything same like fine, whats problem we have?</p>\n<blockquote>\n<p>The problem at here is <strong>Objects(array is an object) are reference types</strong>.</p>\n</blockquote>\n<p>What does that mean?</p>\n<p>That mean: Reference types doesnt hold any data, its only contains a pointer to the value of object in memory.</p>\n<p>When you use <strong>=</strong>, <strong>copy_obj</strong> will contains a pointer to the value of <strong>obj</strong>. So, if you change anything in <strong>copy_obj</strong> or <strong>obj</strong>, the other variable will change too.</p>\n<h2 id=\"Clone-Object-and-Array\"><a href=\"#Clone-Object-and-Array\" class=\"headerlink\" title=\"Clone Object and Array\"></a>Clone Object and Array</h2><blockquote>\n<p>We have many ways to clone an object, but there are three main ways need to know.</p>\n</blockquote>\n<ol>\n<li>Use spread syntax.</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = &#123;...obj&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>Use Object.assign</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>Use JSON</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">JSON</span>.stringify(obj))</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>We know in javascript, array is also an object, thus all approach that we use for object above can apply for array too.</p>\n</blockquote>\n<h2 id=\"Deep-Clone-And-Shallow-Clone\"><a href=\"#Deep-Clone-And-Shallow-Clone\" class=\"headerlink\" title=\"Deep Clone And Shallow Clone\"></a>Deep Clone And Shallow Clone</h2><blockquote>\n<p>Deep Clone is mean copy everything to another memory.</p>\n</blockquote>\n<blockquote>\n<p>Shallow Clone is mean its only copy first level of original object to another memory.From second level its references to original object.</p>\n</blockquote>\n<blockquote>\n<p>Use Object.asign or JSON are deep clone. In the most cases, using Object.assign show a lot faster than JSON.</p>\n</blockquote>\n<blockquote>\n<p>Use spread is shallow clone.</p>\n</blockquote>\n<p>Take a look to the sample code below to know why use spread is shallow clone:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">obj = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Chinh'</span>,</span><br><span class=\"line\">  age: <span class=\"number\">25</span></span><br><span class=\"line\">  location: &#123;</span><br><span class=\"line\">    city: <span class=\"string\">'Saigon'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj = &#123;...obj&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj.name = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj.location.city = <span class=\"string\">\"Nam Dinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj)</span><br><span class=\"line\"><span class=\"comment\">// result look like:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   name: \"Chinh\",</span></span><br><span class=\"line\"><span class=\"comment\">//   age: 25,</span></span><br><span class=\"line\"><span class=\"comment\">//   location: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     city: \"Nam Dinh\"</span></span><br><span class=\"line\"><span class=\"comment\">//   &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// city in original object has changed</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array\" target=\"_blank\" rel=\"noopener\">https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array</a><br>[2]<a href=\"https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects\" target=\"_blank\" rel=\"noopener\">https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects</a></p>\n"},{"title":"Basic Vim Setup","date":"2019-09-19T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n1. Plugin management: https://github.com/junegunn/vim-plug#installation\n2. Tree project: https://github.com/scrooloose/nerdtree\n3. Code complete: https://github.com/ycm-core/YouCompleteMe#installation\n4. Control + P: https://github.com/ctrlpvim/ctrlp.vim\n5. Monakai theme: https://github.com/sickill/vim-monokai\n6. Vimfile:\n\n```vim\ncall plug#begin('~/.vim/plugged')\n\nPlug 'https://github.com/scrooloose/nerdtree.git'\nPlug 'morhetz/gruvbox'\nPlug 'vim-airline/vim-airline'\nPlug 'scrooloose/nerdcommenter'\n\" Plug 'dracula/vim', { 'as': 'dracula' }\n\n\" Initialize plugin system\ncall plug#end()\n\n\" Set colorscheme\n\" colorscheme gruvbox\n\n\" Set dark background\n\"set background=dark\n\n\" Use monokai\n\" syntax enable\ncolorscheme monokai\n\n\" Copy clibboard\nset clipboard=unnamedplus\n\n\" Use ctrlp\nset runtimepath^=~/.vim/bundle/ctrlp.vim\n\nif has('mouse')\n  set mouse=a\nendif\n\nset nu\n\nset autoindent\nset si \"smart indent\"\n\nsyntax on\n\nautocmd StdinReadPre * let s:std_in=1\nautocmd VimEnter * if argc() == 0 && !exists(\"s:std_in\") | NERDTree | endif\n\nautocmd bufenter * if (winnr(\"$\") == 1 && exists(\"b:NERDTree\") && b:NERDTree.isTabTree()) | q | endif\nmap <C-n> :NERDTreeToggle<CR>\n\nset expandtab\nset tabstop=2\nset softtabstop=2\n\n```\n","source":"_posts/basic-vim-setup.md","raw":"---\ntitle: \"Basic Vim Setup\"\ndate: 2019-09-20\ndraft: false\ntags: [\"TIl\"]\ncategories: [\"til\"]\nmytag: \"#TIL\"\n---\n\n1. Plugin management: https://github.com/junegunn/vim-plug#installation\n2. Tree project: https://github.com/scrooloose/nerdtree\n3. Code complete: https://github.com/ycm-core/YouCompleteMe#installation\n4. Control + P: https://github.com/ctrlpvim/ctrlp.vim\n5. Monakai theme: https://github.com/sickill/vim-monokai\n6. Vimfile:\n\n```vim\ncall plug#begin('~/.vim/plugged')\n\nPlug 'https://github.com/scrooloose/nerdtree.git'\nPlug 'morhetz/gruvbox'\nPlug 'vim-airline/vim-airline'\nPlug 'scrooloose/nerdcommenter'\n\" Plug 'dracula/vim', { 'as': 'dracula' }\n\n\" Initialize plugin system\ncall plug#end()\n\n\" Set colorscheme\n\" colorscheme gruvbox\n\n\" Set dark background\n\"set background=dark\n\n\" Use monokai\n\" syntax enable\ncolorscheme monokai\n\n\" Copy clibboard\nset clipboard=unnamedplus\n\n\" Use ctrlp\nset runtimepath^=~/.vim/bundle/ctrlp.vim\n\nif has('mouse')\n  set mouse=a\nendif\n\nset nu\n\nset autoindent\nset si \"smart indent\"\n\nsyntax on\n\nautocmd StdinReadPre * let s:std_in=1\nautocmd VimEnter * if argc() == 0 && !exists(\"s:std_in\") | NERDTree | endif\n\nautocmd bufenter * if (winnr(\"$\") == 1 && exists(\"b:NERDTree\") && b:NERDTree.isTabTree()) | q | endif\nmap <C-n> :NERDTreeToggle<CR>\n\nset expandtab\nset tabstop=2\nset softtabstop=2\n\n```\n","slug":"basic-vim-setup","published":1,"updated":"2019-11-13T11:58:59.536Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe4c003f8ers78855d30","content":"<ol>\n<li>Plugin management: <a href=\"https://github.com/junegunn/vim-plug#installation\" target=\"_blank\" rel=\"noopener\">https://github.com/junegunn/vim-plug#installation</a></li>\n<li>Tree project: <a href=\"https://github.com/scrooloose/nerdtree\" target=\"_blank\" rel=\"noopener\">https://github.com/scrooloose/nerdtree</a></li>\n<li>Code complete: <a href=\"https://github.com/ycm-core/YouCompleteMe#installation\" target=\"_blank\" rel=\"noopener\">https://github.com/ycm-core/YouCompleteMe#installation</a></li>\n<li>Control + P: <a href=\"https://github.com/ctrlpvim/ctrlp.vim\" target=\"_blank\" rel=\"noopener\">https://github.com/ctrlpvim/ctrlp.vim</a></li>\n<li>Monakai theme: <a href=\"https://github.com/sickill/vim-monokai\" target=\"_blank\" rel=\"noopener\">https://github.com/sickill/vim-monokai</a></li>\n<li>Vimfile:</li>\n</ol>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">call</span> plug#begin(<span class=\"string\">'~/.vim/plugged'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">Plug <span class=\"string\">'https://github.com/scrooloose/nerdtree.git'</span></span><br><span class=\"line\">Plug <span class=\"string\">'morhetz/gruvbox'</span></span><br><span class=\"line\">Plug <span class=\"string\">'vim-airline/vim-airline'</span></span><br><span class=\"line\">Plug <span class=\"string\">'scrooloose/nerdcommenter'</span></span><br><span class=\"line\"><span class=\"comment\">\" Plug 'dracula/vim', &#123; 'as': 'dracula' &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Initialize plugin system</span></span><br><span class=\"line\"><span class=\"keyword\">call</span> plug#end()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Set colorscheme</span></span><br><span class=\"line\"><span class=\"comment\">\" colorscheme gruvbox</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Set dark background</span></span><br><span class=\"line\"><span class=\"comment\">\"set background=dark</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Use monokai</span></span><br><span class=\"line\"><span class=\"comment\">\" syntax enable</span></span><br><span class=\"line\"><span class=\"keyword\">colorscheme</span> monokai</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Copy clibboard</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> clipboard=unnamedplus</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Use ctrlp</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> runtimepath^=~/.<span class=\"keyword\">vim</span>/bundle/ctrlp.<span class=\"keyword\">vim</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">has</span>(<span class=\"string\">'mouse'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">set</span> mouse=<span class=\"keyword\">a</span></span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">nu</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> autoindent</span><br><span class=\"line\"><span class=\"keyword\">set</span> si <span class=\"string\">\"smart indent\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">syntax</span> <span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> StdinReadPre * <span class=\"keyword\">let</span> <span class=\"variable\">s:std_in</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> VimEnter * <span class=\"keyword\">if</span> <span class=\"built_in\">argc</span>() == <span class=\"number\">0</span> &amp;&amp; !exists(<span class=\"string\">\"s:std_in\"</span>) | NERDTree | <span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> bufenter * <span class=\"keyword\">if</span> (<span class=\"built_in\">winnr</span>(<span class=\"string\">\"$\"</span>) == <span class=\"number\">1</span> &amp;&amp; <span class=\"built_in\">exists</span>(<span class=\"string\">\"b:NERDTree\"</span>) &amp;&amp; <span class=\"variable\">b:NERDTree</span>.isTabTree()) | q | <span class=\"keyword\">endif</span></span><br><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;C-n&gt;</span> :NERDTreeToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> expandtab</span><br><span class=\"line\"><span class=\"keyword\">set</span> tabstop=<span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> softtabstop=<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>Plugin management: <a href=\"https://github.com/junegunn/vim-plug#installation\" target=\"_blank\" rel=\"noopener\">https://github.com/junegunn/vim-plug#installation</a></li>\n<li>Tree project: <a href=\"https://github.com/scrooloose/nerdtree\" target=\"_blank\" rel=\"noopener\">https://github.com/scrooloose/nerdtree</a></li>\n<li>Code complete: <a href=\"https://github.com/ycm-core/YouCompleteMe#installation\" target=\"_blank\" rel=\"noopener\">https://github.com/ycm-core/YouCompleteMe#installation</a></li>\n<li>Control + P: <a href=\"https://github.com/ctrlpvim/ctrlp.vim\" target=\"_blank\" rel=\"noopener\">https://github.com/ctrlpvim/ctrlp.vim</a></li>\n<li>Monakai theme: <a href=\"https://github.com/sickill/vim-monokai\" target=\"_blank\" rel=\"noopener\">https://github.com/sickill/vim-monokai</a></li>\n<li>Vimfile:</li>\n</ol>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">call</span> plug#begin(<span class=\"string\">'~/.vim/plugged'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">Plug <span class=\"string\">'https://github.com/scrooloose/nerdtree.git'</span></span><br><span class=\"line\">Plug <span class=\"string\">'morhetz/gruvbox'</span></span><br><span class=\"line\">Plug <span class=\"string\">'vim-airline/vim-airline'</span></span><br><span class=\"line\">Plug <span class=\"string\">'scrooloose/nerdcommenter'</span></span><br><span class=\"line\"><span class=\"comment\">\" Plug 'dracula/vim', &#123; 'as': 'dracula' &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Initialize plugin system</span></span><br><span class=\"line\"><span class=\"keyword\">call</span> plug#end()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Set colorscheme</span></span><br><span class=\"line\"><span class=\"comment\">\" colorscheme gruvbox</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Set dark background</span></span><br><span class=\"line\"><span class=\"comment\">\"set background=dark</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Use monokai</span></span><br><span class=\"line\"><span class=\"comment\">\" syntax enable</span></span><br><span class=\"line\"><span class=\"keyword\">colorscheme</span> monokai</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Copy clibboard</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> clipboard=unnamedplus</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Use ctrlp</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> runtimepath^=~/.<span class=\"keyword\">vim</span>/bundle/ctrlp.<span class=\"keyword\">vim</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">has</span>(<span class=\"string\">'mouse'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">set</span> mouse=<span class=\"keyword\">a</span></span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">nu</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> autoindent</span><br><span class=\"line\"><span class=\"keyword\">set</span> si <span class=\"string\">\"smart indent\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">syntax</span> <span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> StdinReadPre * <span class=\"keyword\">let</span> <span class=\"variable\">s:std_in</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> VimEnter * <span class=\"keyword\">if</span> <span class=\"built_in\">argc</span>() == <span class=\"number\">0</span> &amp;&amp; !exists(<span class=\"string\">\"s:std_in\"</span>) | NERDTree | <span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> bufenter * <span class=\"keyword\">if</span> (<span class=\"built_in\">winnr</span>(<span class=\"string\">\"$\"</span>) == <span class=\"number\">1</span> &amp;&amp; <span class=\"built_in\">exists</span>(<span class=\"string\">\"b:NERDTree\"</span>) &amp;&amp; <span class=\"variable\">b:NERDTree</span>.isTabTree()) | q | <span class=\"keyword\">endif</span></span><br><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;C-n&gt;</span> :NERDTreeToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> expandtab</span><br><span class=\"line\"><span class=\"keyword\">set</span> tabstop=<span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> softtabstop=<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Hello Hexo!","date":"2019-11-12T03:38:22.000Z","_content":"\n![the con](/../images/thecon.jpg)\n\n1. `hexo init new_project`\n\n2. `hexo s`\n\n3. `hexo clean` (remove public folder)\n\n4. `hexo generate` (generate static site from your post and something related)\n\n5. `hexo deploy` (install and use hexo-deployer-git)\n\n6. Config _config.yml to use hexo-deployer-git and add some information\n\n-----\n","source":"_posts/hello-hexo.md","raw":"---\ntitle: Hello Hexo!\ndate: 2019-11-12 10:38:22\ntags:\n---\n\n![the con](/../images/thecon.jpg)\n\n1. `hexo init new_project`\n\n2. `hexo s`\n\n3. `hexo clean` (remove public folder)\n\n4. `hexo generate` (generate static site from your post and something related)\n\n5. `hexo deploy` (install and use hexo-deployer-git)\n\n6. Config _config.yml to use hexo-deployer-git and add some information\n\n-----\n","slug":"hello-hexo","published":1,"updated":"2019-11-30T10:59:00.003Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe4f003j8ers70db4h20","content":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<ol>\n<li><p><code>hexo init new_project</code></p>\n</li>\n<li><p><code>hexo s</code></p>\n</li>\n<li><p><code>hexo clean</code> (remove public folder)</p>\n</li>\n<li><p><code>hexo generate</code> (generate static site from your post and something related)</p>\n</li>\n<li><p><code>hexo deploy</code> (install and use hexo-deployer-git)</p>\n</li>\n<li><p>Config _config.yml to use hexo-deployer-git and add some information</p>\n</li>\n</ol>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<ol>\n<li><p><code>hexo init new_project</code></p>\n</li>\n<li><p><code>hexo s</code></p>\n</li>\n<li><p><code>hexo clean</code> (remove public folder)</p>\n</li>\n<li><p><code>hexo generate</code> (generate static site from your post and something related)</p>\n</li>\n<li><p><code>hexo deploy</code> (install and use hexo-deployer-git)</p>\n</li>\n<li><p>Config _config.yml to use hexo-deployer-git and add some information</p>\n</li>\n</ol>\n<hr>\n"},{"title":"Book Notes: Mateprograming Ruby 2","date":"2019-09-20T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n## IMAGES\n\n![hoa](/images/meta2/1.png)\n\n![hoa](/images/meta2/2.png)\n\n![hoa](/images/meta2/3.png)\n\n![hoa](/images/meta2/4.png)\n\n![hoa](/images/meta2/5.png)\n\n<!-- ![hoa](/images/meta2/6.png) -->\n\n![hoa](/images/meta2/7.png)\n\n![hoa](/images/meta2/8.png)\n\n![hoa](/images/meta2/9.png)\n\n\n\n## RUBY OBJECT MODEL\n\n### Open Classes\n\n\n`rails g model Movie title:string director:string`\n\n```ruby\nclass Movie < ActiveRecord:Base; end\n```\n\n1) What about methods such as `title=` and title, which access object attributes (accessor methods for short)? This is where metaprogramming comes in: Bob doesnt have to write those methods. Active Record defines them automatically, after inferring their names from the database schema. ActiveRecord::Base reads the schema at runtime, discovers that the movies table has two columns named title and director, and defines accessor methods for two attributes of the same name. This means that Active Record defines methods such as `Movie#title` and `Movie#director=` out of thin air while the program runs.\n\nOpen Class\n```ruby\nclass Numeric\n  def to_money(currency = nil)\n    Money.from_numeric(self, currency || Money.default_currency)\n  end\nend\n```\n\n2) As cool as they are, however, Open Classes have a dark sideone that youre about to experience.\n\n| This can override the method of superclass and make wrong result in somewhere (monkeypath). So we need be careful when set the name for the override method.\n\n### Inside the Object Model\n\n3) Objects that share the same class also share the same methods, so the methods must be stored in the class, not the object.\n\n4) The \"false\" argument here means: ignore inherited methods Class.instance_methods(false) # => [:allocate, :new, :superclass]\n\n5) The superclass of Class is Modulewhich is to say, every class is also a module.\nTo be precise, a class is a module with three additional instance methods (new, allocate, and superclass)\n\n6) All the constants in a program are arranged in a tree similar to a file system.\n\n7) The Module class also provides an instance method and a class method that, confusingly, are both called constants.\n\n8) Whats an object? Its a bunch of instance variables, plus a link to a class. The objects methods dont live in the objectthey live in the objects class, where theyre called the instance methods of the class.\n\n9) Whats a class? Its an object (an instance of Class), plus a list of instance methods and a link to a superclass. Class is a subclass of Module, so a class is also a module\n\n10) These are instance methods of the Class class. Like any object, a class has its own methods, such as new. Also like any object, classes must be accessed through references. You already have a constant reference to each class: the classs name.\n\n11) Using load, however, has a side effect. The motd.rb file probably defines variables and classes. Although variables fall out of scope when the file has finished loading, constants dont. As a result, motd.rb can pollute your program with the names of its own constantsin particular, class names. You can force motd.rb to keep its constants to itself by passing a second, optional argument to load: `load('motd.rb', true)` If you load a file this way, Ruby creates **an anonymous module**, uses that module as a Namespace to contain all the constants from motd.rb, and then destroys the module. The require method is quite similar to load, but its meant for a different purpose. You use load to execute code, and you use require to import libraries. Thats why require has no second argument: those leftover class names are probably the reason why you imported the file in the first place. Also, thats why require tries only once to load each file, while load executes the file again every time you call it.\n\nWhats the class of Object?\nWhats the superclass of Module?\nWhats the class of Class?\n\n### What Happens When You Call a Method?\n\n12) When you call a method, Ruby does two things:\n1. It finds the method. This is a process called method lookup.\n2. It executes the method. To do that, Ruby needs something called self.\n\n13) Before you look at a more complicated example, though, you need to know about two new concepts: the receiver and the ancestors chain.The receiver is the object that you call a method on. For example, if you write `my_string.reverse()`, then `my_string` is the receiver. To understand the concept of an ancestors chain, look at any Ruby class. Then imagine moving from the class into its superclass, then into the superclasss superclass, and so on, until you reach BasicObject, the root of the Ruby class hierarchy. The path of classes you just traversed is the ancestors chain of the class.\nMySubclass.ancestors # => [MySubclass, MyClass, Object, Kernel, BasicObject]\n\n14) When you include a module in a class (or even in another module), Ruby inserts the module in the ancestors chain, right above the including class itself:\n\n15) Starting from Ruby 2.0, you also have a second way to insert a module in a classs chain of ancestors: **the prepend method**. It works like include, but it inserts the module below the including class (sometimes called the includer).\n\n```ruby\nclass C2\n prepend M2\nend\nclass D2 < C2; end\nD2.ancestors # => [D2, M2, C2, Object, Kernel, BasicObject]\n```\n\n16) This is true every time you include or prepend a module: if that module is already in the chain, Ruby silently ignores the second inclusion.\n\nKernel.private_instance_methods.grep(/^pr/) # => [:printf, :print, :proc]\n\n17) The trick here is that class Object includes Kernel, so Kernel gets into every objects ancestors chain. Every line of Ruby is always executed inside an object, so you can call the instance methods in Kernel from anywhere.\n\n18) You can take advantage of this mechanism yourself: if you add a method to Spell: Kernel Method Kernel, this Kernel Method will be available to all objects. To prove that Kernel Methods are actually useful, you can look at the way some Ruby libraries use them.\n\n19) Every line of Ruby code is executed inside an objectthe so-called current object. The current object is also known as self, because you can access it with the self keyword.\n\n20) Only one object can take the role of self at a given time, but no object holds that role for a long time. In particular, when you call a method, the receiver becomes self. From that moment on, all instance variables are instance variables of self, and all methods called without an explicit receiver are called on self.\n\n21) As soon as you start a Ruby program, youre sitting within an object named main that the Ruby interpreter created for you. This object is sometimes called the top-level context, because its the object youre in when youre at the top level of the call stack: either you havent called any method yet or all the methods that you called have returned.\n\n22) This code refines the String class with a new to_alphanumeric method. Differently from a regular Open Class, however, a Refinement is not active by default. If you try to call   `String#to_alphanumeric`, youll get an error: `\"my *1st* refinement!\".to_alphanumeric  NoMethodError: undefined method 'to_alphanumeric' [...]` To activate the changes, you have to do so explicitly, with the using method: using StringExtensions\n\n23) you can call refine in a regular module, but you cannot call it in a class, even if a class is itself a module.\n\n## METHODS\n\n### Dynamic Methods\n\n24) If that kind of breaching of encapsulation makes you uneasy, you can use public_send instead. Its like send, but it makes a point of respecting the receivers privacy. Be prepared, however, for the fact that Ruby code in the wild rarely bothers with this concern. If anything, a lot of Ruby programmers use send exactly because it allows calling private methods, not in spite of that\n\n```ruby\nclassDS\n  definitialize#connecttodatasource...\ndefget_cpu_info(workstation_id)#...\ndefget_cpu_price(workstation_id)#...\ndefget_mouse_info(workstation_id)#...\ndefget_mouse_price(workstation_id)#...\ndefget_keyboard_info(workstation_id)#...\ndefget_keyboard_price(workstation_id)#...\ndefget_display_info(workstation_id)#...\ndefget_display_price(workstation_id)#...\n#...andsoon\nend\n```\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmouse\n  info=@data_source.get_mouse_info(@id)\n  price=@data_source.get_mouse_price(@id)\n  result=\"Mouse:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n\n  defcpu\n  info=@data_source.get_cpu_info(@id)\n  price=@data_source.get_cpu_price(@id)\n  result=\"Cpu:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n\n  defkeyboard\n  info=@data_source.get_keyboard_info(@id)\n  price=@data_source.get_keyboard_price(@id)\n  result=\"Keyboard:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n#...\nend\n```\n\nDYNAMIC DISPATCH\n\n```ruby\nclassComputer\n  definitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmouse\n  component:mouse\nend\n\ndefcpu\n  component:cpu\nend\n\ndefkeyboard\n  component:keyboard\nend\n\ndefcomponent(name)\ninfo=@data_source.send\"get_#{name}_info\",@id\nprice=@data_source.send\"get_#{name}_price\",@id\nresult=\"#{name.capitalize}:#{info}($#{price})\"\nreturn\"*#{result}\"ifprice>=100\nresult\nend\nend\n```\n\nDYNAMIC METHOD\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defself.define_component(name)\ndefine_method(name)do\n  info=@data_source.send\"get_#{name}_info\",@id\n  price=@data_source.send\"get_#{name}_price\",@id\n  result=\"#{name.capitalize}:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\nend\nend\n\n  define_component:mouse\ndefine_component:cpu\ndefine_component:keyboard\nend\n\n```\n\nBEST WAY\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\ndata_source.methods.grep(/^get_(.*)_info$/){Computer.define_component$1}\nend\n\n  defself.define_component(name)\ndefine_method(name)do\n  #...\n  end\nend\nend\n```\n\n### method_missing\n\n25) The Hashie gem contains a little bit of magic called Hashie::Mash. A Mash is a more powerful version of Rubys standard OpenStruct class: a hash-like object whose attributes work like Ruby variables. If you want a new attribute, just assign a value to the attribute, and it will spring into existence:\n\n```ruby\nrequire'hashie'\nicecream=Hashie::Mash.new\nicecream.flavor=\"strawberry\"\nicecream.flavor#=>\"strawberry\"\n```\n\nWhat hanppen inside?\n\n```ruby\nmoduleHashie\nclassMash<Hashie::Hash\ndefmethod_missing(method_name,*args,&blk)\n  returnself.[](method_name,&blk)ifkey?(method_name)\n  match=method_name.to_s.match(/(.*?)([?=!]?)$/)\n  casematch[2]\n  when\"=\"\n  self[match[1]]=args.first\n  #...\n  else\n  default(method_name,*args,&blk)\n  end\n    end\n#...\n  end\nend\n```\n\n26) **Ghost Methods** (57) are usually icing on the cake, but some objects actually rely almost exclusively on them. These objects are often wrappers for something elsemaybe another object, a web service, or code written in a different language. They collect method calls through method_missing and forward them to the wrapped object. Lets look at a complex real-life example.\n\nRefactor:\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmethod_missing(name)\nsuperif!@data_source.respond_to?(\"get_#{name}_info\")\ninfo=@data_source.send(\"get_#{name}_info\",@id)\nprice=@data_source.send(\"get_#{name}_price\",@id)\nresult=\"#{name.capitalize}:#{info}($#{price})\"\nreturn\"*#{result}\"ifprice>=100\nresult\nend\nend\n```\n\n27) Khi dng ghost method, gi s trong method_missing chng ta mun to ra 1 method x, tuy nhin x li c trong cy k tha => x trong method missing s khng c gi. Lc ny ta cn Blank Slates.\n\n### Blank Slates\n\n28) If you dont need the inherited method, you can fix the problem by removing it. While youre at it, you might want to remove most methods from the class, preventing such name clashes from ever happening again. A skinny class Spell: Blank Slate with a minimal number of methods is called a Blank Slate. As it turns out, Ruby has a ready-made Blank Slate for you to use\n\n29) If you dont specify a superclass, your classes inherit by default from Object, which is itself a subclass of BasicObject. If you want a Blank Slate (66), you can inherit directly from BasicObject instead. For example, if Computer inherited directly from BasicObject, then it wouldnt have a problematic display method.\n=> khng ly nhm method trong class Object, v lp Computer c k tha trc tip t BasicObject\n\n30) Inheriting from BasicObject is the quicker way to define a Blank Slate in Ruby.\n`class Computer < BasicObject`\n\n31) You can remove a method from a class by using either Module#undef_method or Module#remove_method. The drastic undef_method removes any method, including the inherited ones. The kinder remove_method removes the method from the receiver, but it leaves inherited methods alone. Lets look at a real-life library that uses undef_method to create a Blank Slate.\n\n```ruby\nclassBlankSlate\n#Hidethemethodnamed+name+intheBlankSlateclass.Don't\n#hide+instance_eval+oranymethodbeginningwith\"__\".\ndefself.hide(name)\n  #...\n  ifinstance_methods.include?(name._blankslate_as_name)&&\n    name!~/^(__|instance_eval$)/\n    undef_methodname\n  end\nend\n#...\ninstance_methods.each{|m|hide(m)}\nend\n```\n\n32) **use Dynamic Methods if you can and Ghost Methods if you have to**\n\n\n## BLOCKS\n\n### Blocks Are Closures\n\n```ruby\ndefmy_method\nx=\"Goodbye\"\nyield(\"cruel\")\nend\n\nx=\"Hello\"\nmy_method{|y|\"#{x},#{y}world\"}#=>\"Hello,cruelworld\"\n```\n\n33) When you create the block, you capture the local bindings, such as x. Then you pass the block to a method that has its own separate set of bindings. In the previous example, those bindings also include a variable named x. Still, the code in the block sees the x that was around when the block was defined, not the methods x, which is not visible at all in the block.\n\n34) khi gi 1 block, n lu vt li cc rng buc cc b ni block c gi, sau  block c truyn cho 1 method, m method  s c cc rng cuc cc b ca ring n, v block s s dng rng buc ca mnh (v d nh bin x  trn).\n\n```ruby\ndefjust_yield\nyield\nend\n\ntop_level_variable=1\njust_yielddo\ntop_level_variable+=1\nlocal_to_block=1\nend\n\ntop_level_variable#=>2\nlocal_to_block#=>Error!\n```\nTrong v d ny th local_to_block l 1 binding thuc block, v ra ngoi ng cnh block n khng c gi tr.\n\n35) This example shows how scope changes as your program runs, tracking the names of bindings with the Kernel#local_variables method:\n\n```ruby\nv1=1\n\nclassMyClass\nv2=2\nlocal_variables#=>[:v2]\ndefmy_method\n  v3=3\n  local_variables\nend\n  local_variables#=>[:v2]\nend\n\nobj=MyClass.new\nobj.my_method#=>[:v3]\nobj.my_method#=>[:v3]\nlocal_variables#=>[:v1,:obj]\n```\n\n36) There are exactly three places where a program leaves the previous scope behind and opens a new one:\nClass definitions\nModule definitions\nMethods\n\n37) Scope changes whenever the program enters (or exits) a class or module definition or a method. These three borders are marked by the keywords class, module, and def, respectively. Each of these keywords acts like a **Scope Gate**.\n\n```ruby\nv1=1\nclassMyClass#SCOPEGATE:enteringclass\n  v2=2\nlocal_variables#=>[\"v2\"]\ndefmy_method#SCOPEGATE:enteringdef\n  v3=3\n  local_variables\nend#SCOPEGATE:leavingdef\n\n  local_variables#=>[\"v2\"]\nend#SCOPEGATE:leavingclass\n\nobj=MyClass.new\nobj.my_method#=>[:v3]\nlocal_variables#=>[:v1,:obj]\n```\n\n```ruby\nmy_var=\"Success\"\n\nMyClass=Class.newdo\n\"#{my_var}intheclassdefinition\"\n\n  define_method:my_methoddo\n  \"#{my_var}inthemethod\"\n end\nend\n```\n\nkhai bo thng thng th my_var khng th s dng trong class hoc def (v n m ra  1 scope mi). Nn dng call method gi l **flat scope**.\n\n38) If you replace Scope Gates with method calls, you allow one scope to see variables from another scope. Technically, this trick should be called nested lexical scopes, but many Ruby coders refer to it simply as flattening the scope, meaning that the two scopes share variables as if the scopes were squeezed together. For short, you can call this spell a Flat Scope.\n\n39) Once you know about Flat Scopes (83), you can do pretty much whatever you want with scopes. For example, assume that you want to share a variable among a few methods, and you dont want anybody else to see that variable. You can do that by defining all the methods in the same Flat Scope as the variable:\n\n```ruby\ndefdefine_methods\nshared=0\nKernel.send:define_method,:counterdo\nshared\nend\n\nKernel.send:define_method,:incdo|x|\nshared+=x\nend\nend\n\nMun ch share variable cho 1 vi method nht nh, dng cc phng thc support bi kernel v gi y l **Flat Scope**.\n\n```\n\n### instance_eval()\n\n```ruby\nv=2\nobj.instance_eval{@v=v}\nobj.instance_eval{@v}#=>2\n```\n\n40) The three lines in the previous example are evaluated in the same Flat Scope (83), so they can all access the local variable vbut the blocks are evaluated with the object as self, so they can also access objs instance variable @v. In all these cases, you can call the block that you pass to instance_eval a Context Probe, because its like a snippet of code that you dip inside an object to do Spell: Context Probe something in there\n\n41) Tosolvethisproblem RubyprovidesthestandardlibraryclassProc.\nAProcisablockthathasbeenturnedintoanobject.YoucancreateaProcbypassing\ntheblocktoProc.new\n\n### Callable Objects\n\n42) To attach a binding to the block, you can add one special argument to the method. This argument must be the last in the list of arguments and prefixed by an & sign.\n\n```ruby\ndefmy_method(&the_proc)\nthe_proc\nend\n\np=my_method{|name|\"Hello,#{name}!\"}\np.class#=>Proc\np.call(\"Bill\")#=>\"Hello,Bill!\"\n\n\ndefmy_method(greeting)\n\"#{greeting},#{yield}!\"\nend\n\nmy_proc=proc{\"Bill\"}\nmy_method(\"Hello\",&my_proc)\n```\nWhenyoucallmy_method,the&convertsmy_proctoablockandpassesthat blocktothemethod.\n\n43) There are two differences between procs and lambdas. One has to do with the return keyword, and the other concerns the checking of arguments.\n\nIn a lambda, return just returns from the lambda.\nIn a proc, return behaves differently. Rather than return from the proc, it returns from the scope where the proc itself was defined:\n\nlambdas tend to be less tolerant than procs (and regular blocks) when it comes to arguments. Call a lambda with the wrong arity, and it fails with an ArgumentError. On the other hand, a proc fits the argument list to its own expectations:\n\n```ruby\nclassMyClass\ndefinitialize(value)\n@x=value\nend\n\n  defmy_method\n@x\nend\nend\n\nobject=MyClass.new(1)\nm=object.method:my_method\nm.call#=>1\n```\n\n44) By calling Kernel#method, you get the method itself as a Method object, which you can later execute with Method#call.\n\n### Writing a Domain-Specific Language\n\nN/A\n\n## CLASS DEFINITIONS\n\n### Class Definitions Demystified\n\n### Singleton Methods\n\n### Singleton Classes\n\n### Method Wrappers\n\n45) At the top level of your program, the current class is Object, the class of main. (**Thats why, if you define a method at the top level, that method becomes an instance method of Object.**)\n\n46) Module#class_eval is very different from BasicObject#instance_eval, which you learned about earlier in instance_eval(), on page 85. instance_eval only changes self, **while class_eval changes both self and the current class.**\n\n```ruby\ndefadd_method_to(a_class)\n  a_class.class_evaldo\ndefm;'Hello!';end\nend\nend\n\nadd_method_toString\n\"abc\".m#=>\"Hello!\"\n```\n","source":"_posts/meta-programming-ruby.md","raw":"---\ntitle: \"Book Notes: Mateprograming Ruby 2\"\ndate: 2019-09-21\ndraft: false\ntags: [\"ruby\"]\ncategories: [\"til\"]\nmytag: \"#TIL\"\n---\n\n## IMAGES\n\n![hoa](/images/meta2/1.png)\n\n![hoa](/images/meta2/2.png)\n\n![hoa](/images/meta2/3.png)\n\n![hoa](/images/meta2/4.png)\n\n![hoa](/images/meta2/5.png)\n\n<!-- ![hoa](/images/meta2/6.png) -->\n\n![hoa](/images/meta2/7.png)\n\n![hoa](/images/meta2/8.png)\n\n![hoa](/images/meta2/9.png)\n\n\n\n## RUBY OBJECT MODEL\n\n### Open Classes\n\n\n`rails g model Movie title:string director:string`\n\n```ruby\nclass Movie < ActiveRecord:Base; end\n```\n\n1) What about methods such as `title=` and title, which access object attributes (accessor methods for short)? This is where metaprogramming comes in: Bob doesnt have to write those methods. Active Record defines them automatically, after inferring their names from the database schema. ActiveRecord::Base reads the schema at runtime, discovers that the movies table has two columns named title and director, and defines accessor methods for two attributes of the same name. This means that Active Record defines methods such as `Movie#title` and `Movie#director=` out of thin air while the program runs.\n\nOpen Class\n```ruby\nclass Numeric\n  def to_money(currency = nil)\n    Money.from_numeric(self, currency || Money.default_currency)\n  end\nend\n```\n\n2) As cool as they are, however, Open Classes have a dark sideone that youre about to experience.\n\n| This can override the method of superclass and make wrong result in somewhere (monkeypath). So we need be careful when set the name for the override method.\n\n### Inside the Object Model\n\n3) Objects that share the same class also share the same methods, so the methods must be stored in the class, not the object.\n\n4) The \"false\" argument here means: ignore inherited methods Class.instance_methods(false) # => [:allocate, :new, :superclass]\n\n5) The superclass of Class is Modulewhich is to say, every class is also a module.\nTo be precise, a class is a module with three additional instance methods (new, allocate, and superclass)\n\n6) All the constants in a program are arranged in a tree similar to a file system.\n\n7) The Module class also provides an instance method and a class method that, confusingly, are both called constants.\n\n8) Whats an object? Its a bunch of instance variables, plus a link to a class. The objects methods dont live in the objectthey live in the objects class, where theyre called the instance methods of the class.\n\n9) Whats a class? Its an object (an instance of Class), plus a list of instance methods and a link to a superclass. Class is a subclass of Module, so a class is also a module\n\n10) These are instance methods of the Class class. Like any object, a class has its own methods, such as new. Also like any object, classes must be accessed through references. You already have a constant reference to each class: the classs name.\n\n11) Using load, however, has a side effect. The motd.rb file probably defines variables and classes. Although variables fall out of scope when the file has finished loading, constants dont. As a result, motd.rb can pollute your program with the names of its own constantsin particular, class names. You can force motd.rb to keep its constants to itself by passing a second, optional argument to load: `load('motd.rb', true)` If you load a file this way, Ruby creates **an anonymous module**, uses that module as a Namespace to contain all the constants from motd.rb, and then destroys the module. The require method is quite similar to load, but its meant for a different purpose. You use load to execute code, and you use require to import libraries. Thats why require has no second argument: those leftover class names are probably the reason why you imported the file in the first place. Also, thats why require tries only once to load each file, while load executes the file again every time you call it.\n\nWhats the class of Object?\nWhats the superclass of Module?\nWhats the class of Class?\n\n### What Happens When You Call a Method?\n\n12) When you call a method, Ruby does two things:\n1. It finds the method. This is a process called method lookup.\n2. It executes the method. To do that, Ruby needs something called self.\n\n13) Before you look at a more complicated example, though, you need to know about two new concepts: the receiver and the ancestors chain.The receiver is the object that you call a method on. For example, if you write `my_string.reverse()`, then `my_string` is the receiver. To understand the concept of an ancestors chain, look at any Ruby class. Then imagine moving from the class into its superclass, then into the superclasss superclass, and so on, until you reach BasicObject, the root of the Ruby class hierarchy. The path of classes you just traversed is the ancestors chain of the class.\nMySubclass.ancestors # => [MySubclass, MyClass, Object, Kernel, BasicObject]\n\n14) When you include a module in a class (or even in another module), Ruby inserts the module in the ancestors chain, right above the including class itself:\n\n15) Starting from Ruby 2.0, you also have a second way to insert a module in a classs chain of ancestors: **the prepend method**. It works like include, but it inserts the module below the including class (sometimes called the includer).\n\n```ruby\nclass C2\n prepend M2\nend\nclass D2 < C2; end\nD2.ancestors # => [D2, M2, C2, Object, Kernel, BasicObject]\n```\n\n16) This is true every time you include or prepend a module: if that module is already in the chain, Ruby silently ignores the second inclusion.\n\nKernel.private_instance_methods.grep(/^pr/) # => [:printf, :print, :proc]\n\n17) The trick here is that class Object includes Kernel, so Kernel gets into every objects ancestors chain. Every line of Ruby is always executed inside an object, so you can call the instance methods in Kernel from anywhere.\n\n18) You can take advantage of this mechanism yourself: if you add a method to Spell: Kernel Method Kernel, this Kernel Method will be available to all objects. To prove that Kernel Methods are actually useful, you can look at the way some Ruby libraries use them.\n\n19) Every line of Ruby code is executed inside an objectthe so-called current object. The current object is also known as self, because you can access it with the self keyword.\n\n20) Only one object can take the role of self at a given time, but no object holds that role for a long time. In particular, when you call a method, the receiver becomes self. From that moment on, all instance variables are instance variables of self, and all methods called without an explicit receiver are called on self.\n\n21) As soon as you start a Ruby program, youre sitting within an object named main that the Ruby interpreter created for you. This object is sometimes called the top-level context, because its the object youre in when youre at the top level of the call stack: either you havent called any method yet or all the methods that you called have returned.\n\n22) This code refines the String class with a new to_alphanumeric method. Differently from a regular Open Class, however, a Refinement is not active by default. If you try to call   `String#to_alphanumeric`, youll get an error: `\"my *1st* refinement!\".to_alphanumeric  NoMethodError: undefined method 'to_alphanumeric' [...]` To activate the changes, you have to do so explicitly, with the using method: using StringExtensions\n\n23) you can call refine in a regular module, but you cannot call it in a class, even if a class is itself a module.\n\n## METHODS\n\n### Dynamic Methods\n\n24) If that kind of breaching of encapsulation makes you uneasy, you can use public_send instead. Its like send, but it makes a point of respecting the receivers privacy. Be prepared, however, for the fact that Ruby code in the wild rarely bothers with this concern. If anything, a lot of Ruby programmers use send exactly because it allows calling private methods, not in spite of that\n\n```ruby\nclassDS\n  definitialize#connecttodatasource...\ndefget_cpu_info(workstation_id)#...\ndefget_cpu_price(workstation_id)#...\ndefget_mouse_info(workstation_id)#...\ndefget_mouse_price(workstation_id)#...\ndefget_keyboard_info(workstation_id)#...\ndefget_keyboard_price(workstation_id)#...\ndefget_display_info(workstation_id)#...\ndefget_display_price(workstation_id)#...\n#...andsoon\nend\n```\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmouse\n  info=@data_source.get_mouse_info(@id)\n  price=@data_source.get_mouse_price(@id)\n  result=\"Mouse:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n\n  defcpu\n  info=@data_source.get_cpu_info(@id)\n  price=@data_source.get_cpu_price(@id)\n  result=\"Cpu:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n\n  defkeyboard\n  info=@data_source.get_keyboard_info(@id)\n  price=@data_source.get_keyboard_price(@id)\n  result=\"Keyboard:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n#...\nend\n```\n\nDYNAMIC DISPATCH\n\n```ruby\nclassComputer\n  definitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmouse\n  component:mouse\nend\n\ndefcpu\n  component:cpu\nend\n\ndefkeyboard\n  component:keyboard\nend\n\ndefcomponent(name)\ninfo=@data_source.send\"get_#{name}_info\",@id\nprice=@data_source.send\"get_#{name}_price\",@id\nresult=\"#{name.capitalize}:#{info}($#{price})\"\nreturn\"*#{result}\"ifprice>=100\nresult\nend\nend\n```\n\nDYNAMIC METHOD\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defself.define_component(name)\ndefine_method(name)do\n  info=@data_source.send\"get_#{name}_info\",@id\n  price=@data_source.send\"get_#{name}_price\",@id\n  result=\"#{name.capitalize}:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\nend\nend\n\n  define_component:mouse\ndefine_component:cpu\ndefine_component:keyboard\nend\n\n```\n\nBEST WAY\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\ndata_source.methods.grep(/^get_(.*)_info$/){Computer.define_component$1}\nend\n\n  defself.define_component(name)\ndefine_method(name)do\n  #...\n  end\nend\nend\n```\n\n### method_missing\n\n25) The Hashie gem contains a little bit of magic called Hashie::Mash. A Mash is a more powerful version of Rubys standard OpenStruct class: a hash-like object whose attributes work like Ruby variables. If you want a new attribute, just assign a value to the attribute, and it will spring into existence:\n\n```ruby\nrequire'hashie'\nicecream=Hashie::Mash.new\nicecream.flavor=\"strawberry\"\nicecream.flavor#=>\"strawberry\"\n```\n\nWhat hanppen inside?\n\n```ruby\nmoduleHashie\nclassMash<Hashie::Hash\ndefmethod_missing(method_name,*args,&blk)\n  returnself.[](method_name,&blk)ifkey?(method_name)\n  match=method_name.to_s.match(/(.*?)([?=!]?)$/)\n  casematch[2]\n  when\"=\"\n  self[match[1]]=args.first\n  #...\n  else\n  default(method_name,*args,&blk)\n  end\n    end\n#...\n  end\nend\n```\n\n26) **Ghost Methods** (57) are usually icing on the cake, but some objects actually rely almost exclusively on them. These objects are often wrappers for something elsemaybe another object, a web service, or code written in a different language. They collect method calls through method_missing and forward them to the wrapped object. Lets look at a complex real-life example.\n\nRefactor:\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmethod_missing(name)\nsuperif!@data_source.respond_to?(\"get_#{name}_info\")\ninfo=@data_source.send(\"get_#{name}_info\",@id)\nprice=@data_source.send(\"get_#{name}_price\",@id)\nresult=\"#{name.capitalize}:#{info}($#{price})\"\nreturn\"*#{result}\"ifprice>=100\nresult\nend\nend\n```\n\n27) Khi dng ghost method, gi s trong method_missing chng ta mun to ra 1 method x, tuy nhin x li c trong cy k tha => x trong method missing s khng c gi. Lc ny ta cn Blank Slates.\n\n### Blank Slates\n\n28) If you dont need the inherited method, you can fix the problem by removing it. While youre at it, you might want to remove most methods from the class, preventing such name clashes from ever happening again. A skinny class Spell: Blank Slate with a minimal number of methods is called a Blank Slate. As it turns out, Ruby has a ready-made Blank Slate for you to use\n\n29) If you dont specify a superclass, your classes inherit by default from Object, which is itself a subclass of BasicObject. If you want a Blank Slate (66), you can inherit directly from BasicObject instead. For example, if Computer inherited directly from BasicObject, then it wouldnt have a problematic display method.\n=> khng ly nhm method trong class Object, v lp Computer c k tha trc tip t BasicObject\n\n30) Inheriting from BasicObject is the quicker way to define a Blank Slate in Ruby.\n`class Computer < BasicObject`\n\n31) You can remove a method from a class by using either Module#undef_method or Module#remove_method. The drastic undef_method removes any method, including the inherited ones. The kinder remove_method removes the method from the receiver, but it leaves inherited methods alone. Lets look at a real-life library that uses undef_method to create a Blank Slate.\n\n```ruby\nclassBlankSlate\n#Hidethemethodnamed+name+intheBlankSlateclass.Don't\n#hide+instance_eval+oranymethodbeginningwith\"__\".\ndefself.hide(name)\n  #...\n  ifinstance_methods.include?(name._blankslate_as_name)&&\n    name!~/^(__|instance_eval$)/\n    undef_methodname\n  end\nend\n#...\ninstance_methods.each{|m|hide(m)}\nend\n```\n\n32) **use Dynamic Methods if you can and Ghost Methods if you have to**\n\n\n## BLOCKS\n\n### Blocks Are Closures\n\n```ruby\ndefmy_method\nx=\"Goodbye\"\nyield(\"cruel\")\nend\n\nx=\"Hello\"\nmy_method{|y|\"#{x},#{y}world\"}#=>\"Hello,cruelworld\"\n```\n\n33) When you create the block, you capture the local bindings, such as x. Then you pass the block to a method that has its own separate set of bindings. In the previous example, those bindings also include a variable named x. Still, the code in the block sees the x that was around when the block was defined, not the methods x, which is not visible at all in the block.\n\n34) khi gi 1 block, n lu vt li cc rng buc cc b ni block c gi, sau  block c truyn cho 1 method, m method  s c cc rng cuc cc b ca ring n, v block s s dng rng buc ca mnh (v d nh bin x  trn).\n\n```ruby\ndefjust_yield\nyield\nend\n\ntop_level_variable=1\njust_yielddo\ntop_level_variable+=1\nlocal_to_block=1\nend\n\ntop_level_variable#=>2\nlocal_to_block#=>Error!\n```\nTrong v d ny th local_to_block l 1 binding thuc block, v ra ngoi ng cnh block n khng c gi tr.\n\n35) This example shows how scope changes as your program runs, tracking the names of bindings with the Kernel#local_variables method:\n\n```ruby\nv1=1\n\nclassMyClass\nv2=2\nlocal_variables#=>[:v2]\ndefmy_method\n  v3=3\n  local_variables\nend\n  local_variables#=>[:v2]\nend\n\nobj=MyClass.new\nobj.my_method#=>[:v3]\nobj.my_method#=>[:v3]\nlocal_variables#=>[:v1,:obj]\n```\n\n36) There are exactly three places where a program leaves the previous scope behind and opens a new one:\nClass definitions\nModule definitions\nMethods\n\n37) Scope changes whenever the program enters (or exits) a class or module definition or a method. These three borders are marked by the keywords class, module, and def, respectively. Each of these keywords acts like a **Scope Gate**.\n\n```ruby\nv1=1\nclassMyClass#SCOPEGATE:enteringclass\n  v2=2\nlocal_variables#=>[\"v2\"]\ndefmy_method#SCOPEGATE:enteringdef\n  v3=3\n  local_variables\nend#SCOPEGATE:leavingdef\n\n  local_variables#=>[\"v2\"]\nend#SCOPEGATE:leavingclass\n\nobj=MyClass.new\nobj.my_method#=>[:v3]\nlocal_variables#=>[:v1,:obj]\n```\n\n```ruby\nmy_var=\"Success\"\n\nMyClass=Class.newdo\n\"#{my_var}intheclassdefinition\"\n\n  define_method:my_methoddo\n  \"#{my_var}inthemethod\"\n end\nend\n```\n\nkhai bo thng thng th my_var khng th s dng trong class hoc def (v n m ra  1 scope mi). Nn dng call method gi l **flat scope**.\n\n38) If you replace Scope Gates with method calls, you allow one scope to see variables from another scope. Technically, this trick should be called nested lexical scopes, but many Ruby coders refer to it simply as flattening the scope, meaning that the two scopes share variables as if the scopes were squeezed together. For short, you can call this spell a Flat Scope.\n\n39) Once you know about Flat Scopes (83), you can do pretty much whatever you want with scopes. For example, assume that you want to share a variable among a few methods, and you dont want anybody else to see that variable. You can do that by defining all the methods in the same Flat Scope as the variable:\n\n```ruby\ndefdefine_methods\nshared=0\nKernel.send:define_method,:counterdo\nshared\nend\n\nKernel.send:define_method,:incdo|x|\nshared+=x\nend\nend\n\nMun ch share variable cho 1 vi method nht nh, dng cc phng thc support bi kernel v gi y l **Flat Scope**.\n\n```\n\n### instance_eval()\n\n```ruby\nv=2\nobj.instance_eval{@v=v}\nobj.instance_eval{@v}#=>2\n```\n\n40) The three lines in the previous example are evaluated in the same Flat Scope (83), so they can all access the local variable vbut the blocks are evaluated with the object as self, so they can also access objs instance variable @v. In all these cases, you can call the block that you pass to instance_eval a Context Probe, because its like a snippet of code that you dip inside an object to do Spell: Context Probe something in there\n\n41) Tosolvethisproblem RubyprovidesthestandardlibraryclassProc.\nAProcisablockthathasbeenturnedintoanobject.YoucancreateaProcbypassing\ntheblocktoProc.new\n\n### Callable Objects\n\n42) To attach a binding to the block, you can add one special argument to the method. This argument must be the last in the list of arguments and prefixed by an & sign.\n\n```ruby\ndefmy_method(&the_proc)\nthe_proc\nend\n\np=my_method{|name|\"Hello,#{name}!\"}\np.class#=>Proc\np.call(\"Bill\")#=>\"Hello,Bill!\"\n\n\ndefmy_method(greeting)\n\"#{greeting},#{yield}!\"\nend\n\nmy_proc=proc{\"Bill\"}\nmy_method(\"Hello\",&my_proc)\n```\nWhenyoucallmy_method,the&convertsmy_proctoablockandpassesthat blocktothemethod.\n\n43) There are two differences between procs and lambdas. One has to do with the return keyword, and the other concerns the checking of arguments.\n\nIn a lambda, return just returns from the lambda.\nIn a proc, return behaves differently. Rather than return from the proc, it returns from the scope where the proc itself was defined:\n\nlambdas tend to be less tolerant than procs (and regular blocks) when it comes to arguments. Call a lambda with the wrong arity, and it fails with an ArgumentError. On the other hand, a proc fits the argument list to its own expectations:\n\n```ruby\nclassMyClass\ndefinitialize(value)\n@x=value\nend\n\n  defmy_method\n@x\nend\nend\n\nobject=MyClass.new(1)\nm=object.method:my_method\nm.call#=>1\n```\n\n44) By calling Kernel#method, you get the method itself as a Method object, which you can later execute with Method#call.\n\n### Writing a Domain-Specific Language\n\nN/A\n\n## CLASS DEFINITIONS\n\n### Class Definitions Demystified\n\n### Singleton Methods\n\n### Singleton Classes\n\n### Method Wrappers\n\n45) At the top level of your program, the current class is Object, the class of main. (**Thats why, if you define a method at the top level, that method becomes an instance method of Object.**)\n\n46) Module#class_eval is very different from BasicObject#instance_eval, which you learned about earlier in instance_eval(), on page 85. instance_eval only changes self, **while class_eval changes both self and the current class.**\n\n```ruby\ndefadd_method_to(a_class)\n  a_class.class_evaldo\ndefm;'Hello!';end\nend\nend\n\nadd_method_toString\n\"abc\".m#=>\"Hello!\"\n```\n","slug":"meta-programming-ruby","published":1,"updated":"2019-11-13T11:59:42.647Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck4qvfe4i003m8ersfaui5hzb","content":"<h2 id=\"IMAGES\"><a href=\"#IMAGES\" class=\"headerlink\" title=\"IMAGES\"></a>IMAGES</h2><p><img src=\"/images/meta2/1.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/2.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/3.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/4.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/5.png\" alt=\"hoa\"></p>\n<!-- ![hoa](/images/meta2/6.png) -->\n\n<p><img src=\"/images/meta2/7.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/8.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/9.png\" alt=\"hoa\"></p>\n<h2 id=\"RUBY-OBJECT-MODEL\"><a href=\"#RUBY-OBJECT-MODEL\" class=\"headerlink\" title=\"RUBY OBJECT MODEL\"></a>RUBY OBJECT MODEL</h2><h3 id=\"Open-Classes\"><a href=\"#Open-Classes\" class=\"headerlink\" title=\"Open Classes\"></a>Open Classes</h3><p><code>rails g model Movie title:string director:string</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Movie</span> &lt; ActiveRecord:<span class=\"title\">Base</span>;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>1) What about methods such as <code>title=</code> and title, which access object attributes (accessor methods for short)? This is where metaprogramming comes in: Bob doesnt have to write those methods. Active Record defines them automatically, after inferring their names from the database schema. ActiveRecord::Base reads the schema at runtime, discovers that the movies table has two columns named title and director, and defines accessor methods for two attributes of the same name. This means that Active Record defines methods such as <code>Movie#title</code> and <code>Movie#director=</code> out of thin air while the program runs.</p>\n<p>Open Class</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Numeric</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">to_money</span><span class=\"params\">(currency = <span class=\"literal\">nil</span>)</span></span></span><br><span class=\"line\">    Money.from_numeric(<span class=\"keyword\">self</span>, currency <span class=\"params\">||</span> Money.default_currency)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>2) As cool as they are, however, Open Classes have a dark sideone that youre about to experience.</p>\n<p>| This can override the method of superclass and make wrong result in somewhere (monkeypath). So we need be careful when set the name for the override method.</p>\n<h3 id=\"Inside-the-Object-Model\"><a href=\"#Inside-the-Object-Model\" class=\"headerlink\" title=\"Inside the Object Model\"></a>Inside the Object Model</h3><p>3) Objects that share the same class also share the same methods, so the methods must be stored in the class, not the object.</p>\n<p>4) The false argument here means: ignore inherited methods Class.instance_methods(false) # =&gt; [:allocate, :new, :superclass]</p>\n<p>5) The superclass of Class is Modulewhich is to say, every class is also a module.<br>To be precise, a class is a module with three additional instance methods (new, allocate, and superclass)</p>\n<p>6) All the constants in a program are arranged in a tree similar to a file system.</p>\n<p>7) The Module class also provides an instance method and a class method that, confusingly, are both called constants.</p>\n<p>8) Whats an object? Its a bunch of instance variables, plus a link to a class. The objects methods dont live in the objectthey live in the objects class, where theyre called the instance methods of the class.</p>\n<p>9) Whats a class? Its an object (an instance of Class), plus a list of instance methods and a link to a superclass. Class is a subclass of Module, so a class is also a module</p>\n<p>10) These are instance methods of the Class class. Like any object, a class has its own methods, such as new. Also like any object, classes must be accessed through references. You already have a constant reference to each class: the classs name.</p>\n<p>11) Using load, however, has a side effect. The motd.rb file probably defines variables and classes. Although variables fall out of scope when the file has finished loading, constants dont. As a result, motd.rb can pollute your program with the names of its own constantsin particular, class names. You can force motd.rb to keep its constants to itself by passing a second, optional argument to load: <code>load(&#39;motd.rb&#39;, true)</code> If you load a file this way, Ruby creates <strong>an anonymous module</strong>, uses that module as a Namespace to contain all the constants from motd.rb, and then destroys the module. The require method is quite similar to load, but its meant for a different purpose. You use load to execute code, and you use require to import libraries. Thats why require has no second argument: those leftover class names are probably the reason why you imported the file in the first place. Also, thats why require tries only once to load each file, while load executes the file again every time you call it.</p>\n<p>Whats the class of Object?<br>Whats the superclass of Module?<br>Whats the class of Class?</p>\n<h3 id=\"What-Happens-When-You-Call-a-Method\"><a href=\"#What-Happens-When-You-Call-a-Method\" class=\"headerlink\" title=\"What Happens When You Call a Method?\"></a>What Happens When You Call a Method?</h3><p>12) When you call a method, Ruby does two things:</p>\n<ol>\n<li>It finds the method. This is a process called method lookup.</li>\n<li>It executes the method. To do that, Ruby needs something called self.</li>\n</ol>\n<p>13) Before you look at a more complicated example, though, you need to know about two new concepts: the receiver and the ancestors chain.The receiver is the object that you call a method on. For example, if you write <code>my_string.reverse()</code>, then <code>my_string</code> is the receiver. To understand the concept of an ancestors chain, look at any Ruby class. Then imagine moving from the class into its superclass, then into the superclasss superclass, and so on, until you reach BasicObject, the root of the Ruby class hierarchy. The path of classes you just traversed is the ancestors chain of the class.<br>MySubclass.ancestors # =&gt; [MySubclass, MyClass, Object, Kernel, BasicObject]</p>\n<p>14) When you include a module in a class (or even in another module), Ruby inserts the module in the ancestors chain, right above the including class itself:</p>\n<p>15) Starting from Ruby 2.0, you also have a second way to insert a module in a classs chain of ancestors: <strong>the prepend method</strong>. It works like include, but it inserts the module below the including class (sometimes called the includer).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C2</span></span></span><br><span class=\"line\"> prepend M2</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D2</span> &lt; C2;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\">D2.ancestors <span class=\"comment\"># =&gt; [D2, M2, C2, Object, Kernel, BasicObject]</span></span><br></pre></td></tr></table></figure>\n\n<p>16) This is true every time you include or prepend a module: if that module is already in the chain, Ruby silently ignores the second inclusion.</p>\n<p>Kernel.private_instance_methods.grep(/^pr/) # =&gt; [:printf, :print, :proc]</p>\n<p>17) The trick here is that class Object includes Kernel, so Kernel gets into every objects ancestors chain. Every line of Ruby is always executed inside an object, so you can call the instance methods in Kernel from anywhere.</p>\n<p>18) You can take advantage of this mechanism yourself: if you add a method to Spell: Kernel Method Kernel, this Kernel Method will be available to all objects. To prove that Kernel Methods are actually useful, you can look at the way some Ruby libraries use them.</p>\n<p>19) Every line of Ruby code is executed inside an objectthe so-called current object. The current object is also known as self, because you can access it with the self keyword.</p>\n<p>20) Only one object can take the role of self at a given time, but no object holds that role for a long time. In particular, when you call a method, the receiver becomes self. From that moment on, all instance variables are instance variables of self, and all methods called without an explicit receiver are called on self.</p>\n<p>21) As soon as you start a Ruby program, youre sitting within an object named main that the Ruby interpreter created for you. This object is sometimes called the top-level context, because its the object youre in when youre at the top level of the call stack: either you havent called any method yet or all the methods that you called have returned.</p>\n<p>22) This code refines the String class with a new to_alphanumeric method. Differently from a regular Open Class, however, a Refinement is not active by default. If you try to call   <code>String#to_alphanumeric</code>, youll get an error: <code>&quot;my *1st* refinement!&quot;.to_alphanumeric  NoMethodError: undefined method &#39;to_alphanumeric&#39; [...]</code> To activate the changes, you have to do so explicitly, with the using method: using StringExtensions</p>\n<p>23) you can call refine in a regular module, but you cannot call it in a class, even if a class is itself a module.</p>\n<h2 id=\"METHODS\"><a href=\"#METHODS\" class=\"headerlink\" title=\"METHODS\"></a>METHODS</h2><h3 id=\"Dynamic-Methods\"><a href=\"#Dynamic-Methods\" class=\"headerlink\" title=\"Dynamic Methods\"></a>Dynamic Methods</h3><p>24) If that kind of breaching of encapsulation makes you uneasy, you can use public_send instead. Its like send, but it makes a point of respecting the receivers privacy. Be prepared, however, for the fact that Ruby code in the wild rarely bothers with this concern. If anything, a lot of Ruby programmers use send exactly because it allows calling private methods, not in spite of that</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">DS</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"comment\">#connecttodatasource...</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_cpu_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_cpu_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_mouse_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_mouse_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_keyboard_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_keyboard_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_display_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_display_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"comment\">#...andsoon</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">mouse</span></span></span><br><span class=\"line\">  info=@data_source.get_mouse_info(@id)</span><br><span class=\"line\">  price=@data_source.get_mouse_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Mouse:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">cpu</span></span></span><br><span class=\"line\">  info=@data_source.get_cpu_info(@id)</span><br><span class=\"line\">  price=@data_source.get_cpu_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Cpu:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">keyboard</span></span></span><br><span class=\"line\">  info=@data_source.get_keyboard_info(@id)</span><br><span class=\"line\">  price=@data_source.get_keyboard_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Keyboard:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>DYNAMIC DISPATCH</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">mouse</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:mouse</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">cpu</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:cpu</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">keyboard</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:keyboard</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">info=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id</span><br><span class=\"line\">price=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id</span><br><span class=\"line\">result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\"><span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>DYNAMIC METHOD</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">define_component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">define_method(name)<span class=\"keyword\">do</span></span><br><span class=\"line\">  info=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id</span><br><span class=\"line\">  price=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id</span><br><span class=\"line\">  result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  define_component<span class=\"symbol\">:mouse</span></span><br><span class=\"line\">define_component<span class=\"symbol\">:cpu</span></span><br><span class=\"line\">define_component<span class=\"symbol\">:keyboard</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>BEST WAY</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\">data_source.methods.grep(<span class=\"regexp\">/^get_(.*)_info$/</span>)&#123;Computer.define_component$1&#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">define_component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">define_method(name)<span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"method-missing\"><a href=\"#method-missing\" class=\"headerlink\" title=\"method_missing\"></a>method_missing</h3><p>25) The Hashie gem contains a little bit of magic called Hashie::Mash. A Mash is a more powerful version of Rubys standard OpenStruct class: a hash-like object whose attributes work like Ruby variables. If you want a new attribute, just assign a value to the attribute, and it will spring into existence:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span><span class=\"string\">'hashie'</span></span><br><span class=\"line\">icecream=Hashie::Mash.new</span><br><span class=\"line\">icecream.flavor=<span class=\"string\">\"strawberry\"</span></span><br><span class=\"line\">icecream.flavor<span class=\"comment\">#=&gt;\"strawberry\"</span></span><br></pre></td></tr></table></figure>\n\n<p>What hanppen inside?</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span><span class=\"title\">Hashie</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Mash</span>&lt;Hashie::Hash</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">method_missing</span><span class=\"params\">(method_name,*args,&amp;blk)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"keyword\">self</span>.[](method_name,&amp;blk)<span class=\"keyword\">if</span>key?(method_name)</span><br><span class=\"line\">  match=method_name.to_s.match(<span class=\"regexp\">/(.*?)([?=!]?)$/</span>)</span><br><span class=\"line\">  <span class=\"keyword\">case</span>match[<span class=\"number\">2</span>]</span><br><span class=\"line\">  <span class=\"keyword\">when</span><span class=\"string\">\"=\"</span></span><br><span class=\"line\">  <span class=\"keyword\">self</span>[match[<span class=\"number\">1</span>]]=args.first</span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">  default(method_name,*args,&amp;blk)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>26) <strong>Ghost Methods</strong> (57) are usually icing on the cake, but some objects actually rely almost exclusively on them. These objects are often wrappers for something elsemaybe another object, a web service, or code written in a different language. They collect method calls through method_missing and forward them to the wrapped object. Lets look at a complex real-life example.</p>\n<p>Refactor:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">method_missing</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\"><span class=\"keyword\">super</span><span class=\"keyword\">if</span>!@data_source.respond_to?(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>)</span><br><span class=\"line\">info=@data_source.send(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id)</span><br><span class=\"line\">price=@data_source.send(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id)</span><br><span class=\"line\">result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\"><span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>27) Khi dng ghost method, gi s trong method_missing chng ta mun to ra 1 method x, tuy nhin x li c trong cy k tha =&gt; x trong method missing s khng c gi. Lc ny ta cn Blank Slates.</p>\n<h3 id=\"Blank-Slates\"><a href=\"#Blank-Slates\" class=\"headerlink\" title=\"Blank Slates\"></a>Blank Slates</h3><p>28) If you dont need the inherited method, you can fix the problem by removing it. While youre at it, you might want to remove most methods from the class, preventing such name clashes from ever happening again. A skinny class Spell: Blank Slate with a minimal number of methods is called a Blank Slate. As it turns out, Ruby has a ready-made Blank Slate for you to use</p>\n<p>29) If you dont specify a superclass, your classes inherit by default from Object, which is itself a subclass of BasicObject. If you want a Blank Slate (66), you can inherit directly from BasicObject instead. For example, if Computer inherited directly from BasicObject, then it wouldnt have a problematic display method.<br>=&gt; khng ly nhm method trong class Object, v lp Computer c k tha trc tip t BasicObject</p>\n<p>30) Inheriting from BasicObject is the quicker way to define a Blank Slate in Ruby.<br><code>class Computer &lt; BasicObject</code></p>\n<p>31) You can remove a method from a class by using either Module#undef_method or Module#remove_method. The drastic undef_method removes any method, including the inherited ones. The kinder remove_method removes the method from the receiver, but it leaves inherited methods alone. Lets look at a real-life library that uses undef_method to create a Blank Slate.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">BlankSlate</span></span></span><br><span class=\"line\"><span class=\"comment\">#Hidethemethodnamed+name+intheBlankSlateclass.Don't</span></span><br><span class=\"line\"><span class=\"comment\">#hide+instance_eval+oranymethodbeginningwith\"__\".</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">hide</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>instance_methods.<span class=\"keyword\">include</span>?(name._blankslate_as_name)&amp;&amp;</span><br><span class=\"line\">    name!~<span class=\"regexp\">/^(__|instance_eval$)/</span></span><br><span class=\"line\">    undef_methodname</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\">instance_methods.each&#123;<span class=\"params\">|m|</span>hide(m)&#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>32) <strong>use Dynamic Methods if you can and Ghost Methods if you have to</strong></p>\n<h2 id=\"BLOCKS\"><a href=\"#BLOCKS\" class=\"headerlink\" title=\"BLOCKS\"></a>BLOCKS</h2><h3 id=\"Blocks-Are-Closures\"><a href=\"#Blocks-Are-Closures\" class=\"headerlink\" title=\"Blocks Are Closures\"></a>Blocks Are Closures</h3><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">x=<span class=\"string\">\"Goodbye\"</span></span><br><span class=\"line\"><span class=\"keyword\">yield</span>(<span class=\"string\">\"cruel\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">x=<span class=\"string\">\"Hello\"</span></span><br><span class=\"line\">my_method&#123;<span class=\"params\">|y|</span><span class=\"string\">\"<span class=\"subst\">#&#123;x&#125;</span>,<span class=\"subst\">#&#123;y&#125;</span>world\"</span>&#125;<span class=\"comment\">#=&gt;\"Hello,cruelworld\"</span></span><br></pre></td></tr></table></figure>\n\n<p>33) When you create the block, you capture the local bindings, such as x. Then you pass the block to a method that has its own separate set of bindings. In the previous example, those bindings also include a variable named x. Still, the code in the block sees the x that was around when the block was defined, not the methods x, which is not visible at all in the block.</p>\n<p>34) khi gi 1 block, n lu vt li cc rng buc cc b ni block c gi, sau  block c truyn cho 1 method, m method  s c cc rng cuc cc b ca ring n, v block s s dng rng buc ca mnh (v d nh bin x  trn).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">just_yield</span></span></span><br><span class=\"line\"><span class=\"keyword\">yield</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">top_level_variable=<span class=\"number\">1</span></span><br><span class=\"line\">just_yield<span class=\"keyword\">do</span></span><br><span class=\"line\">top_level_variable+=<span class=\"number\">1</span></span><br><span class=\"line\">local_to_block=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">top_level_variable<span class=\"comment\">#=&gt;2</span></span><br><span class=\"line\">local_to_block<span class=\"comment\">#=&gt;Error!</span></span><br></pre></td></tr></table></figure>\n<p>Trong v d ny th local_to_block l 1 binding thuc block, v ra ngoi ng cnh block n khng c gi tr.</p>\n<p>35) This example shows how scope changes as your program runs, tracking the names of bindings with the Kernel#local_variables method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v1=<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span></span></span><br><span class=\"line\">v2=<span class=\"number\">2</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v2]</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">  v3=<span class=\"number\">3</span></span><br><span class=\"line\">  local_variables</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\">  local_variables<span class=\"comment\">#=&gt;[:v2]</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj=MyClass.new</span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v1,:obj]</span></span><br></pre></td></tr></table></figure>\n\n<p>36) There are exactly three places where a program leaves the previous scope behind and opens a new one:<br>Class definitions<br>Module definitions<br>Methods</p>\n<p>37) Scope changes whenever the program enters (or exits) a class or module definition or a method. These three borders are marked by the keywords class, module, and def, respectively. Each of these keywords acts like a <strong>Scope Gate</strong>.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v1=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span><span class=\"comment\">#SCOPEGATE:enteringclass</span></span></span><br><span class=\"line\">  v2=<span class=\"number\">2</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[\"v2\"]</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"comment\">#SCOPEGATE:enteringdef</span></span></span><br><span class=\"line\">  v3=<span class=\"number\">3</span></span><br><span class=\"line\">  local_variables</span><br><span class=\"line\"><span class=\"keyword\">end</span><span class=\"comment\">#SCOPEGATE:leavingdef</span></span><br><span class=\"line\"></span><br><span class=\"line\">  local_variables<span class=\"comment\">#=&gt;[\"v2\"]</span></span><br><span class=\"line\"><span class=\"keyword\">end</span><span class=\"comment\">#SCOPEGATE:leavingclass</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj=MyClass.new</span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v1,:obj]</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">my_var=<span class=\"string\">\"Success\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">MyClass=Class.new<span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"string\">\"<span class=\"subst\">#&#123;my_var&#125;</span>intheclassdefinition\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  define_method<span class=\"symbol\">:my_method</span><span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"string\">\"<span class=\"subst\">#&#123;my_var&#125;</span>inthemethod\"</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>khai bo thng thng th my_var khng th s dng trong class hoc def (v n m ra  1 scope mi). Nn dng call method gi l <strong>flat scope</strong>.</p>\n<p>38) If you replace Scope Gates with method calls, you allow one scope to see variables from another scope. Technically, this trick should be called nested lexical scopes, but many Ruby coders refer to it simply as flattening the scope, meaning that the two scopes share variables as if the scopes were squeezed together. For short, you can call this spell a Flat Scope.</p>\n<p>39) Once you know about Flat Scopes (83), you can do pretty much whatever you want with scopes. For example, assume that you want to share a variable among a few methods, and you dont want anybody else to see that variable. You can do that by defining all the methods in the same Flat Scope as the variable:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">define_methods</span></span></span><br><span class=\"line\">shared=<span class=\"number\">0</span></span><br><span class=\"line\">Kernel.send<span class=\"symbol\">:define_method</span>,<span class=\"symbol\">:counter</span><span class=\"keyword\">do</span></span><br><span class=\"line\">shared</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Kernel.send<span class=\"symbol\">:define_method</span>,<span class=\"symbol\">:inc</span><span class=\"keyword\">do</span><span class=\"params\">|x|</span></span><br><span class=\"line\">shared+=x</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Mun ch share variable cho <span class=\"number\">1</span> vi method nht nh, dng cc phng thc support bi kernel v gi y l **Flat Scope**.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"instance-eval\"><a href=\"#instance-eval\" class=\"headerlink\" title=\"instance_eval()\"></a>instance_eval()</h3><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v=<span class=\"number\">2</span></span><br><span class=\"line\">obj.instance_eval&#123;@v=v&#125;</span><br><span class=\"line\">obj.instance_eval&#123;@v&#125;<span class=\"comment\">#=&gt;2</span></span><br></pre></td></tr></table></figure>\n\n<p>40) The three lines in the previous example are evaluated in the same Flat Scope (83), so they can all access the local variable vbut the blocks are evaluated with the object as self, so they can also access objs instance variable @v. In all these cases, you can call the block that you pass to instance_eval a Context Probe, because its like a snippet of code that you dip inside an object to do Spell: Context Probe something in there</p>\n<p>41) To solve this problem Ruby provides the standard library class Proc.<br>A Proc isa block that has been turned into an object. You can create a Proc by passing<br>the block to Proc.new</p>\n<h3 id=\"Callable-Objects\"><a href=\"#Callable-Objects\" class=\"headerlink\" title=\"Callable Objects\"></a>Callable Objects</h3><p>42) To attach a binding to the block, you can add one special argument to the method. This argument must be the last in the list of arguments and prefixed by an &amp; sign.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"params\">(&amp;the_proc)</span></span></span><br><span class=\"line\">the_proc</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">p=my_method&#123;<span class=\"params\">|name|</span><span class=\"string\">\"Hello,<span class=\"subst\">#&#123;name&#125;</span>!\"</span>&#125;</span><br><span class=\"line\">p<span class=\"class\">.<span class=\"keyword\">class</span><span class=\"comment\">#=&gt;Proc</span></span></span><br><span class=\"line\">p.call(<span class=\"string\">\"Bill\"</span>)<span class=\"comment\">#=&gt;\"Hello,Bill!\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"params\">(greeting)</span></span></span><br><span class=\"line\"><span class=\"string\">\"<span class=\"subst\">#&#123;greeting&#125;</span>,<span class=\"subst\">#&#123;<span class=\"keyword\">yield</span>&#125;</span>!\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">my_proc=proc&#123;<span class=\"string\">\"Bill\"</span>&#125;</span><br><span class=\"line\">my_method(<span class=\"string\">\"Hello\"</span>,&amp;my_proc)</span><br></pre></td></tr></table></figure>\n<p>When you call my_method, the &amp; converts my_proc to a block and passes that block to the method.</p>\n<p>43) There are two differences between procs and lambdas. One has to do with the return keyword, and the other concerns the checking of arguments.</p>\n<p>In a lambda, return just returns from the lambda.<br>In a proc, return behaves differently. Rather than return from the proc, it returns from the scope where the proc itself was defined:</p>\n<p>lambdas tend to be less tolerant than procs (and regular blocks) when it comes to arguments. Call a lambda with the wrong arity, and it fails with an ArgumentError. On the other hand, a proc fits the argument list to its own expectations:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">@x=value</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">@x</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">object=MyClass.new(<span class=\"number\">1</span>)</span><br><span class=\"line\">m=object.method<span class=\"symbol\">:my_method</span></span><br><span class=\"line\">m.call<span class=\"comment\">#=&gt;1</span></span><br></pre></td></tr></table></figure>\n\n<p>44) By calling Kernel#method, you get the method itself as a Method object, which you can later execute with Method#call.</p>\n<h3 id=\"Writing-a-Domain-Specific-Language\"><a href=\"#Writing-a-Domain-Specific-Language\" class=\"headerlink\" title=\"Writing a Domain-Specific Language\"></a>Writing a Domain-Specific Language</h3><p>N/A</p>\n<h2 id=\"CLASS-DEFINITIONS\"><a href=\"#CLASS-DEFINITIONS\" class=\"headerlink\" title=\"CLASS DEFINITIONS\"></a>CLASS DEFINITIONS</h2><h3 id=\"Class-Definitions-Demystified\"><a href=\"#Class-Definitions-Demystified\" class=\"headerlink\" title=\"Class Definitions Demystified\"></a>Class Definitions Demystified</h3><h3 id=\"Singleton-Methods\"><a href=\"#Singleton-Methods\" class=\"headerlink\" title=\"Singleton Methods\"></a>Singleton Methods</h3><h3 id=\"Singleton-Classes\"><a href=\"#Singleton-Classes\" class=\"headerlink\" title=\"Singleton Classes\"></a>Singleton Classes</h3><h3 id=\"Method-Wrappers\"><a href=\"#Method-Wrappers\" class=\"headerlink\" title=\"Method Wrappers\"></a>Method Wrappers</h3><p>45) At the top level of your program, the current class is Object, the class of main. (<strong>Thats why, if you define a method at the top level, that method becomes an instance method of Object.</strong>)</p>\n<p>46) Module#class_eval is very different from BasicObject#instance_eval, which you learned about earlier in instance_eval(), on page 85. instance_eval only changes self, <strong>while class_eval changes both self and the current class.</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">add_method_to</span><span class=\"params\">(a_class)</span></span></span><br><span class=\"line\">  a_class.class_eval<span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">m</span>;</span><span class=\"string\">'Hello!'</span>;<span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">add_method_toString</span><br><span class=\"line\"><span class=\"string\">\"abc\"</span>.m<span class=\"comment\">#=&gt;\"Hello!\"</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"IMAGES\"><a href=\"#IMAGES\" class=\"headerlink\" title=\"IMAGES\"></a>IMAGES</h2><p><img src=\"/images/meta2/1.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/2.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/3.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/4.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/5.png\" alt=\"hoa\"></p>\n<!-- ![hoa](/images/meta2/6.png) -->\n\n<p><img src=\"/images/meta2/7.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/8.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/9.png\" alt=\"hoa\"></p>\n<h2 id=\"RUBY-OBJECT-MODEL\"><a href=\"#RUBY-OBJECT-MODEL\" class=\"headerlink\" title=\"RUBY OBJECT MODEL\"></a>RUBY OBJECT MODEL</h2><h3 id=\"Open-Classes\"><a href=\"#Open-Classes\" class=\"headerlink\" title=\"Open Classes\"></a>Open Classes</h3><p><code>rails g model Movie title:string director:string</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Movie</span> &lt; ActiveRecord:<span class=\"title\">Base</span>;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>1) What about methods such as <code>title=</code> and title, which access object attributes (accessor methods for short)? This is where metaprogramming comes in: Bob doesnt have to write those methods. Active Record defines them automatically, after inferring their names from the database schema. ActiveRecord::Base reads the schema at runtime, discovers that the movies table has two columns named title and director, and defines accessor methods for two attributes of the same name. This means that Active Record defines methods such as <code>Movie#title</code> and <code>Movie#director=</code> out of thin air while the program runs.</p>\n<p>Open Class</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Numeric</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">to_money</span><span class=\"params\">(currency = <span class=\"literal\">nil</span>)</span></span></span><br><span class=\"line\">    Money.from_numeric(<span class=\"keyword\">self</span>, currency <span class=\"params\">||</span> Money.default_currency)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>2) As cool as they are, however, Open Classes have a dark sideone that youre about to experience.</p>\n<p>| This can override the method of superclass and make wrong result in somewhere (monkeypath). So we need be careful when set the name for the override method.</p>\n<h3 id=\"Inside-the-Object-Model\"><a href=\"#Inside-the-Object-Model\" class=\"headerlink\" title=\"Inside the Object Model\"></a>Inside the Object Model</h3><p>3) Objects that share the same class also share the same methods, so the methods must be stored in the class, not the object.</p>\n<p>4) The false argument here means: ignore inherited methods Class.instance_methods(false) # =&gt; [:allocate, :new, :superclass]</p>\n<p>5) The superclass of Class is Modulewhich is to say, every class is also a module.<br>To be precise, a class is a module with three additional instance methods (new, allocate, and superclass)</p>\n<p>6) All the constants in a program are arranged in a tree similar to a file system.</p>\n<p>7) The Module class also provides an instance method and a class method that, confusingly, are both called constants.</p>\n<p>8) Whats an object? Its a bunch of instance variables, plus a link to a class. The objects methods dont live in the objectthey live in the objects class, where theyre called the instance methods of the class.</p>\n<p>9) Whats a class? Its an object (an instance of Class), plus a list of instance methods and a link to a superclass. Class is a subclass of Module, so a class is also a module</p>\n<p>10) These are instance methods of the Class class. Like any object, a class has its own methods, such as new. Also like any object, classes must be accessed through references. You already have a constant reference to each class: the classs name.</p>\n<p>11) Using load, however, has a side effect. The motd.rb file probably defines variables and classes. Although variables fall out of scope when the file has finished loading, constants dont. As a result, motd.rb can pollute your program with the names of its own constantsin particular, class names. You can force motd.rb to keep its constants to itself by passing a second, optional argument to load: <code>load(&#39;motd.rb&#39;, true)</code> If you load a file this way, Ruby creates <strong>an anonymous module</strong>, uses that module as a Namespace to contain all the constants from motd.rb, and then destroys the module. The require method is quite similar to load, but its meant for a different purpose. You use load to execute code, and you use require to import libraries. Thats why require has no second argument: those leftover class names are probably the reason why you imported the file in the first place. Also, thats why require tries only once to load each file, while load executes the file again every time you call it.</p>\n<p>Whats the class of Object?<br>Whats the superclass of Module?<br>Whats the class of Class?</p>\n<h3 id=\"What-Happens-When-You-Call-a-Method\"><a href=\"#What-Happens-When-You-Call-a-Method\" class=\"headerlink\" title=\"What Happens When You Call a Method?\"></a>What Happens When You Call a Method?</h3><p>12) When you call a method, Ruby does two things:</p>\n<ol>\n<li>It finds the method. This is a process called method lookup.</li>\n<li>It executes the method. To do that, Ruby needs something called self.</li>\n</ol>\n<p>13) Before you look at a more complicated example, though, you need to know about two new concepts: the receiver and the ancestors chain.The receiver is the object that you call a method on. For example, if you write <code>my_string.reverse()</code>, then <code>my_string</code> is the receiver. To understand the concept of an ancestors chain, look at any Ruby class. Then imagine moving from the class into its superclass, then into the superclasss superclass, and so on, until you reach BasicObject, the root of the Ruby class hierarchy. The path of classes you just traversed is the ancestors chain of the class.<br>MySubclass.ancestors # =&gt; [MySubclass, MyClass, Object, Kernel, BasicObject]</p>\n<p>14) When you include a module in a class (or even in another module), Ruby inserts the module in the ancestors chain, right above the including class itself:</p>\n<p>15) Starting from Ruby 2.0, you also have a second way to insert a module in a classs chain of ancestors: <strong>the prepend method</strong>. It works like include, but it inserts the module below the including class (sometimes called the includer).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C2</span></span></span><br><span class=\"line\"> prepend M2</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D2</span> &lt; C2;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\">D2.ancestors <span class=\"comment\"># =&gt; [D2, M2, C2, Object, Kernel, BasicObject]</span></span><br></pre></td></tr></table></figure>\n\n<p>16) This is true every time you include or prepend a module: if that module is already in the chain, Ruby silently ignores the second inclusion.</p>\n<p>Kernel.private_instance_methods.grep(/^pr/) # =&gt; [:printf, :print, :proc]</p>\n<p>17) The trick here is that class Object includes Kernel, so Kernel gets into every objects ancestors chain. Every line of Ruby is always executed inside an object, so you can call the instance methods in Kernel from anywhere.</p>\n<p>18) You can take advantage of this mechanism yourself: if you add a method to Spell: Kernel Method Kernel, this Kernel Method will be available to all objects. To prove that Kernel Methods are actually useful, you can look at the way some Ruby libraries use them.</p>\n<p>19) Every line of Ruby code is executed inside an objectthe so-called current object. The current object is also known as self, because you can access it with the self keyword.</p>\n<p>20) Only one object can take the role of self at a given time, but no object holds that role for a long time. In particular, when you call a method, the receiver becomes self. From that moment on, all instance variables are instance variables of self, and all methods called without an explicit receiver are called on self.</p>\n<p>21) As soon as you start a Ruby program, youre sitting within an object named main that the Ruby interpreter created for you. This object is sometimes called the top-level context, because its the object youre in when youre at the top level of the call stack: either you havent called any method yet or all the methods that you called have returned.</p>\n<p>22) This code refines the String class with a new to_alphanumeric method. Differently from a regular Open Class, however, a Refinement is not active by default. If you try to call   <code>String#to_alphanumeric</code>, youll get an error: <code>&quot;my *1st* refinement!&quot;.to_alphanumeric  NoMethodError: undefined method &#39;to_alphanumeric&#39; [...]</code> To activate the changes, you have to do so explicitly, with the using method: using StringExtensions</p>\n<p>23) you can call refine in a regular module, but you cannot call it in a class, even if a class is itself a module.</p>\n<h2 id=\"METHODS\"><a href=\"#METHODS\" class=\"headerlink\" title=\"METHODS\"></a>METHODS</h2><h3 id=\"Dynamic-Methods\"><a href=\"#Dynamic-Methods\" class=\"headerlink\" title=\"Dynamic Methods\"></a>Dynamic Methods</h3><p>24) If that kind of breaching of encapsulation makes you uneasy, you can use public_send instead. Its like send, but it makes a point of respecting the receivers privacy. Be prepared, however, for the fact that Ruby code in the wild rarely bothers with this concern. If anything, a lot of Ruby programmers use send exactly because it allows calling private methods, not in spite of that</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">DS</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"comment\">#connecttodatasource...</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_cpu_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_cpu_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_mouse_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_mouse_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_keyboard_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_keyboard_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_display_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_display_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"comment\">#...andsoon</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">mouse</span></span></span><br><span class=\"line\">  info=@data_source.get_mouse_info(@id)</span><br><span class=\"line\">  price=@data_source.get_mouse_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Mouse:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">cpu</span></span></span><br><span class=\"line\">  info=@data_source.get_cpu_info(@id)</span><br><span class=\"line\">  price=@data_source.get_cpu_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Cpu:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">keyboard</span></span></span><br><span class=\"line\">  info=@data_source.get_keyboard_info(@id)</span><br><span class=\"line\">  price=@data_source.get_keyboard_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Keyboard:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>DYNAMIC DISPATCH</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">mouse</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:mouse</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">cpu</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:cpu</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">keyboard</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:keyboard</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">info=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id</span><br><span class=\"line\">price=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id</span><br><span class=\"line\">result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\"><span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>DYNAMIC METHOD</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">define_component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">define_method(name)<span class=\"keyword\">do</span></span><br><span class=\"line\">  info=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id</span><br><span class=\"line\">  price=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id</span><br><span class=\"line\">  result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  define_component<span class=\"symbol\">:mouse</span></span><br><span class=\"line\">define_component<span class=\"symbol\">:cpu</span></span><br><span class=\"line\">define_component<span class=\"symbol\">:keyboard</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>BEST WAY</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\">data_source.methods.grep(<span class=\"regexp\">/^get_(.*)_info$/</span>)&#123;Computer.define_component$1&#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">define_component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">define_method(name)<span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"method-missing\"><a href=\"#method-missing\" class=\"headerlink\" title=\"method_missing\"></a>method_missing</h3><p>25) The Hashie gem contains a little bit of magic called Hashie::Mash. A Mash is a more powerful version of Rubys standard OpenStruct class: a hash-like object whose attributes work like Ruby variables. If you want a new attribute, just assign a value to the attribute, and it will spring into existence:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span><span class=\"string\">'hashie'</span></span><br><span class=\"line\">icecream=Hashie::Mash.new</span><br><span class=\"line\">icecream.flavor=<span class=\"string\">\"strawberry\"</span></span><br><span class=\"line\">icecream.flavor<span class=\"comment\">#=&gt;\"strawberry\"</span></span><br></pre></td></tr></table></figure>\n\n<p>What hanppen inside?</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span><span class=\"title\">Hashie</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Mash</span>&lt;Hashie::Hash</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">method_missing</span><span class=\"params\">(method_name,*args,&amp;blk)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"keyword\">self</span>.[](method_name,&amp;blk)<span class=\"keyword\">if</span>key?(method_name)</span><br><span class=\"line\">  match=method_name.to_s.match(<span class=\"regexp\">/(.*?)([?=!]?)$/</span>)</span><br><span class=\"line\">  <span class=\"keyword\">case</span>match[<span class=\"number\">2</span>]</span><br><span class=\"line\">  <span class=\"keyword\">when</span><span class=\"string\">\"=\"</span></span><br><span class=\"line\">  <span class=\"keyword\">self</span>[match[<span class=\"number\">1</span>]]=args.first</span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">  default(method_name,*args,&amp;blk)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>26) <strong>Ghost Methods</strong> (57) are usually icing on the cake, but some objects actually rely almost exclusively on them. These objects are often wrappers for something elsemaybe another object, a web service, or code written in a different language. They collect method calls through method_missing and forward them to the wrapped object. Lets look at a complex real-life example.</p>\n<p>Refactor:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">method_missing</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\"><span class=\"keyword\">super</span><span class=\"keyword\">if</span>!@data_source.respond_to?(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>)</span><br><span class=\"line\">info=@data_source.send(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id)</span><br><span class=\"line\">price=@data_source.send(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id)</span><br><span class=\"line\">result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\"><span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>27) Khi dng ghost method, gi s trong method_missing chng ta mun to ra 1 method x, tuy nhin x li c trong cy k tha =&gt; x trong method missing s khng c gi. Lc ny ta cn Blank Slates.</p>\n<h3 id=\"Blank-Slates\"><a href=\"#Blank-Slates\" class=\"headerlink\" title=\"Blank Slates\"></a>Blank Slates</h3><p>28) If you dont need the inherited method, you can fix the problem by removing it. While youre at it, you might want to remove most methods from the class, preventing such name clashes from ever happening again. A skinny class Spell: Blank Slate with a minimal number of methods is called a Blank Slate. As it turns out, Ruby has a ready-made Blank Slate for you to use</p>\n<p>29) If you dont specify a superclass, your classes inherit by default from Object, which is itself a subclass of BasicObject. If you want a Blank Slate (66), you can inherit directly from BasicObject instead. For example, if Computer inherited directly from BasicObject, then it wouldnt have a problematic display method.<br>=&gt; khng ly nhm method trong class Object, v lp Computer c k tha trc tip t BasicObject</p>\n<p>30) Inheriting from BasicObject is the quicker way to define a Blank Slate in Ruby.<br><code>class Computer &lt; BasicObject</code></p>\n<p>31) You can remove a method from a class by using either Module#undef_method or Module#remove_method. The drastic undef_method removes any method, including the inherited ones. The kinder remove_method removes the method from the receiver, but it leaves inherited methods alone. Lets look at a real-life library that uses undef_method to create a Blank Slate.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">BlankSlate</span></span></span><br><span class=\"line\"><span class=\"comment\">#Hidethemethodnamed+name+intheBlankSlateclass.Don't</span></span><br><span class=\"line\"><span class=\"comment\">#hide+instance_eval+oranymethodbeginningwith\"__\".</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">hide</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>instance_methods.<span class=\"keyword\">include</span>?(name._blankslate_as_name)&amp;&amp;</span><br><span class=\"line\">    name!~<span class=\"regexp\">/^(__|instance_eval$)/</span></span><br><span class=\"line\">    undef_methodname</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\">instance_methods.each&#123;<span class=\"params\">|m|</span>hide(m)&#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>32) <strong>use Dynamic Methods if you can and Ghost Methods if you have to</strong></p>\n<h2 id=\"BLOCKS\"><a href=\"#BLOCKS\" class=\"headerlink\" title=\"BLOCKS\"></a>BLOCKS</h2><h3 id=\"Blocks-Are-Closures\"><a href=\"#Blocks-Are-Closures\" class=\"headerlink\" title=\"Blocks Are Closures\"></a>Blocks Are Closures</h3><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">x=<span class=\"string\">\"Goodbye\"</span></span><br><span class=\"line\"><span class=\"keyword\">yield</span>(<span class=\"string\">\"cruel\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">x=<span class=\"string\">\"Hello\"</span></span><br><span class=\"line\">my_method&#123;<span class=\"params\">|y|</span><span class=\"string\">\"<span class=\"subst\">#&#123;x&#125;</span>,<span class=\"subst\">#&#123;y&#125;</span>world\"</span>&#125;<span class=\"comment\">#=&gt;\"Hello,cruelworld\"</span></span><br></pre></td></tr></table></figure>\n\n<p>33) When you create the block, you capture the local bindings, such as x. Then you pass the block to a method that has its own separate set of bindings. In the previous example, those bindings also include a variable named x. Still, the code in the block sees the x that was around when the block was defined, not the methods x, which is not visible at all in the block.</p>\n<p>34) khi gi 1 block, n lu vt li cc rng buc cc b ni block c gi, sau  block c truyn cho 1 method, m method  s c cc rng cuc cc b ca ring n, v block s s dng rng buc ca mnh (v d nh bin x  trn).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">just_yield</span></span></span><br><span class=\"line\"><span class=\"keyword\">yield</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">top_level_variable=<span class=\"number\">1</span></span><br><span class=\"line\">just_yield<span class=\"keyword\">do</span></span><br><span class=\"line\">top_level_variable+=<span class=\"number\">1</span></span><br><span class=\"line\">local_to_block=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">top_level_variable<span class=\"comment\">#=&gt;2</span></span><br><span class=\"line\">local_to_block<span class=\"comment\">#=&gt;Error!</span></span><br></pre></td></tr></table></figure>\n<p>Trong v d ny th local_to_block l 1 binding thuc block, v ra ngoi ng cnh block n khng c gi tr.</p>\n<p>35) This example shows how scope changes as your program runs, tracking the names of bindings with the Kernel#local_variables method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v1=<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span></span></span><br><span class=\"line\">v2=<span class=\"number\">2</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v2]</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">  v3=<span class=\"number\">3</span></span><br><span class=\"line\">  local_variables</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\">  local_variables<span class=\"comment\">#=&gt;[:v2]</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj=MyClass.new</span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v1,:obj]</span></span><br></pre></td></tr></table></figure>\n\n<p>36) There are exactly three places where a program leaves the previous scope behind and opens a new one:<br>Class definitions<br>Module definitions<br>Methods</p>\n<p>37) Scope changes whenever the program enters (or exits) a class or module definition or a method. These three borders are marked by the keywords class, module, and def, respectively. Each of these keywords acts like a <strong>Scope Gate</strong>.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v1=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span><span class=\"comment\">#SCOPEGATE:enteringclass</span></span></span><br><span class=\"line\">  v2=<span class=\"number\">2</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[\"v2\"]</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"comment\">#SCOPEGATE:enteringdef</span></span></span><br><span class=\"line\">  v3=<span class=\"number\">3</span></span><br><span class=\"line\">  local_variables</span><br><span class=\"line\"><span class=\"keyword\">end</span><span class=\"comment\">#SCOPEGATE:leavingdef</span></span><br><span class=\"line\"></span><br><span class=\"line\">  local_variables<span class=\"comment\">#=&gt;[\"v2\"]</span></span><br><span class=\"line\"><span class=\"keyword\">end</span><span class=\"comment\">#SCOPEGATE:leavingclass</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj=MyClass.new</span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v1,:obj]</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">my_var=<span class=\"string\">\"Success\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">MyClass=Class.new<span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"string\">\"<span class=\"subst\">#&#123;my_var&#125;</span>intheclassdefinition\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  define_method<span class=\"symbol\">:my_method</span><span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"string\">\"<span class=\"subst\">#&#123;my_var&#125;</span>inthemethod\"</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>khai bo thng thng th my_var khng th s dng trong class hoc def (v n m ra  1 scope mi). Nn dng call method gi l <strong>flat scope</strong>.</p>\n<p>38) If you replace Scope Gates with method calls, you allow one scope to see variables from another scope. Technically, this trick should be called nested lexical scopes, but many Ruby coders refer to it simply as flattening the scope, meaning that the two scopes share variables as if the scopes were squeezed together. For short, you can call this spell a Flat Scope.</p>\n<p>39) Once you know about Flat Scopes (83), you can do pretty much whatever you want with scopes. For example, assume that you want to share a variable among a few methods, and you dont want anybody else to see that variable. You can do that by defining all the methods in the same Flat Scope as the variable:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">define_methods</span></span></span><br><span class=\"line\">shared=<span class=\"number\">0</span></span><br><span class=\"line\">Kernel.send<span class=\"symbol\">:define_method</span>,<span class=\"symbol\">:counter</span><span class=\"keyword\">do</span></span><br><span class=\"line\">shared</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Kernel.send<span class=\"symbol\">:define_method</span>,<span class=\"symbol\">:inc</span><span class=\"keyword\">do</span><span class=\"params\">|x|</span></span><br><span class=\"line\">shared+=x</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Mun ch share variable cho <span class=\"number\">1</span> vi method nht nh, dng cc phng thc support bi kernel v gi y l **Flat Scope**.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"instance-eval\"><a href=\"#instance-eval\" class=\"headerlink\" title=\"instance_eval()\"></a>instance_eval()</h3><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v=<span class=\"number\">2</span></span><br><span class=\"line\">obj.instance_eval&#123;@v=v&#125;</span><br><span class=\"line\">obj.instance_eval&#123;@v&#125;<span class=\"comment\">#=&gt;2</span></span><br></pre></td></tr></table></figure>\n\n<p>40) The three lines in the previous example are evaluated in the same Flat Scope (83), so they can all access the local variable vbut the blocks are evaluated with the object as self, so they can also access objs instance variable @v. In all these cases, you can call the block that you pass to instance_eval a Context Probe, because its like a snippet of code that you dip inside an object to do Spell: Context Probe something in there</p>\n<p>41) To solve this problem Ruby provides the standard library class Proc.<br>A Proc isa block that has been turned into an object. You can create a Proc by passing<br>the block to Proc.new</p>\n<h3 id=\"Callable-Objects\"><a href=\"#Callable-Objects\" class=\"headerlink\" title=\"Callable Objects\"></a>Callable Objects</h3><p>42) To attach a binding to the block, you can add one special argument to the method. This argument must be the last in the list of arguments and prefixed by an &amp; sign.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"params\">(&amp;the_proc)</span></span></span><br><span class=\"line\">the_proc</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">p=my_method&#123;<span class=\"params\">|name|</span><span class=\"string\">\"Hello,<span class=\"subst\">#&#123;name&#125;</span>!\"</span>&#125;</span><br><span class=\"line\">p<span class=\"class\">.<span class=\"keyword\">class</span><span class=\"comment\">#=&gt;Proc</span></span></span><br><span class=\"line\">p.call(<span class=\"string\">\"Bill\"</span>)<span class=\"comment\">#=&gt;\"Hello,Bill!\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"params\">(greeting)</span></span></span><br><span class=\"line\"><span class=\"string\">\"<span class=\"subst\">#&#123;greeting&#125;</span>,<span class=\"subst\">#&#123;<span class=\"keyword\">yield</span>&#125;</span>!\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">my_proc=proc&#123;<span class=\"string\">\"Bill\"</span>&#125;</span><br><span class=\"line\">my_method(<span class=\"string\">\"Hello\"</span>,&amp;my_proc)</span><br></pre></td></tr></table></figure>\n<p>When you call my_method, the &amp; converts my_proc to a block and passes that block to the method.</p>\n<p>43) There are two differences between procs and lambdas. One has to do with the return keyword, and the other concerns the checking of arguments.</p>\n<p>In a lambda, return just returns from the lambda.<br>In a proc, return behaves differently. Rather than return from the proc, it returns from the scope where the proc itself was defined:</p>\n<p>lambdas tend to be less tolerant than procs (and regular blocks) when it comes to arguments. Call a lambda with the wrong arity, and it fails with an ArgumentError. On the other hand, a proc fits the argument list to its own expectations:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">@x=value</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">@x</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">object=MyClass.new(<span class=\"number\">1</span>)</span><br><span class=\"line\">m=object.method<span class=\"symbol\">:my_method</span></span><br><span class=\"line\">m.call<span class=\"comment\">#=&gt;1</span></span><br></pre></td></tr></table></figure>\n\n<p>44) By calling Kernel#method, you get the method itself as a Method object, which you can later execute with Method#call.</p>\n<h3 id=\"Writing-a-Domain-Specific-Language\"><a href=\"#Writing-a-Domain-Specific-Language\" class=\"headerlink\" title=\"Writing a Domain-Specific Language\"></a>Writing a Domain-Specific Language</h3><p>N/A</p>\n<h2 id=\"CLASS-DEFINITIONS\"><a href=\"#CLASS-DEFINITIONS\" class=\"headerlink\" title=\"CLASS DEFINITIONS\"></a>CLASS DEFINITIONS</h2><h3 id=\"Class-Definitions-Demystified\"><a href=\"#Class-Definitions-Demystified\" class=\"headerlink\" title=\"Class Definitions Demystified\"></a>Class Definitions Demystified</h3><h3 id=\"Singleton-Methods\"><a href=\"#Singleton-Methods\" class=\"headerlink\" title=\"Singleton Methods\"></a>Singleton Methods</h3><h3 id=\"Singleton-Classes\"><a href=\"#Singleton-Classes\" class=\"headerlink\" title=\"Singleton Classes\"></a>Singleton Classes</h3><h3 id=\"Method-Wrappers\"><a href=\"#Method-Wrappers\" class=\"headerlink\" title=\"Method Wrappers\"></a>Method Wrappers</h3><p>45) At the top level of your program, the current class is Object, the class of main. (<strong>Thats why, if you define a method at the top level, that method becomes an instance method of Object.</strong>)</p>\n<p>46) Module#class_eval is very different from BasicObject#instance_eval, which you learned about earlier in instance_eval(), on page 85. instance_eval only changes self, <strong>while class_eval changes both self and the current class.</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">add_method_to</span><span class=\"params\">(a_class)</span></span></span><br><span class=\"line\">  a_class.class_eval<span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">m</span>;</span><span class=\"string\">'Hello!'</span>;<span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">add_method_toString</span><br><span class=\"line\"><span class=\"string\">\"abc\"</span>.m<span class=\"comment\">#=&gt;\"Hello!\"</span></span><br></pre></td></tr></table></figure>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ck4qvfe1q00068ers0owk9b83","category_id":"ck4qvfe1l00038ersaq4w5gmy","_id":"ck4qvfe21000e8ers0n4jaxhz"},{"post_id":"ck4qvfe1a00008ers1wrrei7q","category_id":"ck4qvfe1l00038ersaq4w5gmy","_id":"ck4qvfe24000j8ers0znhcc51"},{"post_id":"ck4qvfe1y000b8ers658i7vg6","category_id":"ck4qvfe1l00038ersaq4w5gmy","_id":"ck4qvfe26000m8ersdm0m0f6v"},{"post_id":"ck4qvfe1i00028ers5pxhha7b","category_id":"ck4qvfe1l00038ersaq4w5gmy","_id":"ck4qvfe29000q8ersa4334ype"},{"post_id":"ck4qvfe1o00058ers86opdwwt","category_id":"ck4qvfe21000f8ers90yf7ip4","_id":"ck4qvfe2d000t8ersgc5ye0ed"},{"post_id":"ck4qvfe2a000r8ers5y0e8dsh","category_id":"ck4qvfe21000f8ers90yf7ip4","_id":"ck4qvfe2k00128ersecjxc3qd"},{"post_id":"ck4qvfe20000d8ersdfwbeer6","category_id":"ck4qvfe21000f8ers90yf7ip4","_id":"ck4qvfe2n00158ersf81yckod"},{"post_id":"ck4qvfe22000i8ersb0muac93","category_id":"ck4qvfe2h000y8erscikyd3sa","_id":"ck4qvfe2s001d8ers8xtzbthu"},{"post_id":"ck4qvfe2o00198ers9je536am","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe2x001j8ers0us3d2x9"},{"post_id":"ck4qvfe25000l8ers8s6m3ksb","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe2z001n8ersetkr7lwp"},{"post_id":"ck4qvfe2q001b8ers5lr2b4c6","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe32001r8ers428iaort"},{"post_id":"ck4qvfe2u001g8ers1uw1bt3u","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe34001u8ers9pqzf3dw"},{"post_id":"ck4qvfe28000p8ersf6ar4k0e","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe37001z8ershzhybzh8"},{"post_id":"ck4qvfe2w001i8ers2jpf5p9q","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe3900218ers15yqfi6g"},{"post_id":"ck4qvfe2y001m8ersb2my8yvq","category_id":"ck4qvfe21000f8ers90yf7ip4","_id":"ck4qvfe3c00258ersbvypbhag"},{"post_id":"ck4qvfe1t00078ers78zu9994","category_id":"ck4qvfe21000f8ers90yf7ip4","_id":"ck4qvfe3e00288ersfg5x12lk"},{"post_id":"ck4qvfe1t00078ers78zu9994","category_id":"ck4qvfe2y001l8ersgzde55bg","_id":"ck4qvfe3h002d8ershzyj77m0"},{"post_id":"ck4qvfe2e000v8ers2qkv96f3","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe3i002g8ersa9ll10ox"},{"post_id":"ck4qvfe2g000x8ersg4xp146k","category_id":"ck4qvfe21000f8ers90yf7ip4","_id":"ck4qvfe3l002l8ersfh035u21"},{"post_id":"ck4qvfe2g000x8ersg4xp146k","category_id":"ck4qvfe2y001l8ersgzde55bg","_id":"ck4qvfe3n002o8ers0wp52f0d"},{"post_id":"ck4qvfe2j00118ers5gsagjk9","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe3q002r8ers0396bdtu"},{"post_id":"ck4qvfe2l00148ersevxu0s21","category_id":"ck4qvfe2n00178ers2uxbhbny","_id":"ck4qvfe3u002u8ersedmu2jhu"},{"post_id":"ck4qvfe33001t8erserfmhzj8","category_id":"ck4qvfe3u002v8ershdfnbo7s","_id":"ck4qvfe4400378ersgo2i23ip"},{"post_id":"ck4qvfe36001y8ersdiecbiip","category_id":"ck4qvfe3u002v8ershdfnbo7s","_id":"ck4qvfe49003c8ersef43ey6l"},{"post_id":"ck4qvfe3800208ers1a3u60ix","category_id":"ck4qvfe3u002v8ershdfnbo7s","_id":"ck4qvfe4f003i8ers2f8ngw7l"},{"post_id":"ck4qvfe3b00248ers08rxcu7m","category_id":"ck4qvfe3n002p8ers84mug77j","_id":"ck4qvfe4k003p8ersecv39e1o"},{"post_id":"ck4qvfe3d00278ers6an84kc3","category_id":"ck4qvfe3n002p8ers84mug77j","_id":"ck4qvfe4n003u8ers8mya5xga"},{"post_id":"ck4qvfe3g002c8ers13aj9ifp","category_id":"ck4qvfe3n002p8ers84mug77j","_id":"ck4qvfe4p003z8ers8ryv5qky"},{"post_id":"ck4qvfe3h002f8ersdpwl4k9t","category_id":"ck4qvfe3n002p8ers84mug77j","_id":"ck4qvfe4r00448ers0sx895jp"},{"post_id":"ck4qvfe3k002k8ersd6414wvf","category_id":"ck4qvfe3n002p8ers84mug77j","_id":"ck4qvfe4t00488ersdmt9gymx"},{"post_id":"ck4qvfe3m002n8ershzdm46m0","category_id":"ck4qvfe4q00438ersblwt6zmz","_id":"ck4qvfe4v004c8ers8igjgcsi"},{"post_id":"ck4qvfe3p002q8ers2biccbnc","category_id":"ck4qvfe4q00438ersblwt6zmz","_id":"ck4qvfe4w004g8ers6kyk5q7a"},{"post_id":"ck4qvfe31001q8ers9yphfyuu","category_id":"ck4qvfe3n002p8ers84mug77j","_id":"ck4qvfe4x004j8ers1ewfdpbd"},{"post_id":"ck4qvfe31001q8ers9yphfyuu","category_id":"ck4qvfe4u004b8ersbt3g6e11","_id":"ck4qvfe4z004m8ers6bupd3sr"},{"post_id":"ck4qvfe4c003f8ers78855d30","category_id":"ck4qvfe4w004h8ers5ov14a56","_id":"ck4qvfe56004p8ersfeup7d2y"},{"post_id":"ck4qvfe4i003m8ersfaui5hzb","category_id":"ck4qvfe4w004h8ers5ov14a56","_id":"ck4qvfe58004r8ersfqxr3hyr"}],"PostTag":[{"post_id":"ck4qvfe1q00068ers0owk9b83","tag_id":"ck4qvfe1n00048ers88co24cr","_id":"ck4qvfe1x000a8ers43p79m7d"},{"post_id":"ck4qvfe1a00008ers1wrrei7q","tag_id":"ck4qvfe1n00048ers88co24cr","_id":"ck4qvfe1z000c8ers7jo69rdq"},{"post_id":"ck4qvfe1y000b8ers658i7vg6","tag_id":"ck4qvfe1n00048ers88co24cr","_id":"ck4qvfe22000h8erse68kg7az"},{"post_id":"ck4qvfe1i00028ers5pxhha7b","tag_id":"ck4qvfe1n00048ers88co24cr","_id":"ck4qvfe24000k8ersf7v22qik"},{"post_id":"ck4qvfe1o00058ers86opdwwt","tag_id":"ck4qvfe21000g8ersh47cdpa3","_id":"ck4qvfe2f000w8ersb12d4ibj"},{"post_id":"ck4qvfe1o00058ers86opdwwt","tag_id":"ck4qvfe27000o8ers2q9e4bm4","_id":"ck4qvfe2i000z8ersa3uo07wk"},{"post_id":"ck4qvfe2a000r8ers5y0e8dsh","tag_id":"ck4qvfe21000g8ersh47cdpa3","_id":"ck4qvfe2k00138ers15ls7mb2"},{"post_id":"ck4qvfe2g000x8ersg4xp146k","tag_id":"ck4qvfe21000g8ersh47cdpa3","_id":"ck4qvfe2n00168erseie05n6p"},{"post_id":"ck4qvfe2g000x8ersg4xp146k","tag_id":"ck4qvfe2d000u8ersgvey20j3","_id":"ck4qvfe2q001a8ers0hnc2yav"},{"post_id":"ck4qvfe1t00078ers78zu9994","tag_id":"ck4qvfe2d000u8ersgvey20j3","_id":"ck4qvfe2s001c8ers6w6s3p2f"},{"post_id":"ck4qvfe1t00078ers78zu9994","tag_id":"ck4qvfe21000g8ersh47cdpa3","_id":"ck4qvfe2v001h8erscter6q6z"},{"post_id":"ck4qvfe20000d8ersdfwbeer6","tag_id":"ck4qvfe21000g8ersh47cdpa3","_id":"ck4qvfe2x001k8ers6sg6a9ai"},{"post_id":"ck4qvfe2u001g8ers1uw1bt3u","tag_id":"ck4qvfe27000o8ers2q9e4bm4","_id":"ck4qvfe30001p8ersbwry5dqy"},{"post_id":"ck4qvfe22000i8ersb0muac93","tag_id":"ck4qvfe2t001f8ers6yl0f027","_id":"ck4qvfe33001s8ers0e0xdkzd"},{"post_id":"ck4qvfe2y001m8ersb2my8yvq","tag_id":"ck4qvfe21000g8ersh47cdpa3","_id":"ck4qvfe36001x8ers0vjy7al1"},{"post_id":"ck4qvfe25000l8ers8s6m3ksb","tag_id":"ck4qvfe30001o8ersdmhd5oa3","_id":"ck4qvfe3c00268ers1hg41o68"},{"post_id":"ck4qvfe25000l8ers8s6m3ksb","tag_id":"ck4qvfe27000o8ers2q9e4bm4","_id":"ck4qvfe3e002a8ers1y0pff0p"},{"post_id":"ck4qvfe28000p8ersf6ar4k0e","tag_id":"ck4qvfe3a00238ers3ppxb7qc","_id":"ck4qvfe3h002e8ersd8yx73kb"},{"post_id":"ck4qvfe28000p8ersf6ar4k0e","tag_id":"ck4qvfe27000o8ers2q9e4bm4","_id":"ck4qvfe3k002i8ers8ve3050x"},{"post_id":"ck4qvfe2e000v8ers2qkv96f3","tag_id":"ck4qvfe3f002b8ers7exv85wc","_id":"ck4qvfe3m002m8ers1slrg3nj"},{"post_id":"ck4qvfe2j00118ers5gsagjk9","tag_id":"ck4qvfe3k002j8ers95yt532l","_id":"ck4qvfe3y002y8erse8i0avnh"},{"post_id":"ck4qvfe2j00118ers5gsagjk9","tag_id":"ck4qvfe27000o8ers2q9e4bm4","_id":"ck4qvfe4000318ers8p7z853z"},{"post_id":"ck4qvfe2j00118ers5gsagjk9","tag_id":"ck4qvfe3f002b8ers7exv85wc","_id":"ck4qvfe4200348ersb6be5yo3"},{"post_id":"ck4qvfe2l00148ersevxu0s21","tag_id":"ck4qvfe27000o8ers2q9e4bm4","_id":"ck4qvfe4d003g8ers1oqka283"},{"post_id":"ck4qvfe2l00148ersevxu0s21","tag_id":"ck4qvfe3k002j8ers95yt532l","_id":"ck4qvfe4g003k8ers91678qbu"},{"post_id":"ck4qvfe2l00148ersevxu0s21","tag_id":"ck4qvfe4200338ersandpaol1","_id":"ck4qvfe4j003n8ersh674bg53"},{"post_id":"ck4qvfe2l00148ersevxu0s21","tag_id":"ck4qvfe3f002b8ers7exv85wc","_id":"ck4qvfe4l003q8ers6wma8t5p"},{"post_id":"ck4qvfe4i003m8ersfaui5hzb","tag_id":"ck4qvfe21000g8ersh47cdpa3","_id":"ck4qvfe4m003s8ersakvbf6t1"},{"post_id":"ck4qvfe2o00198ers9je536am","tag_id":"ck4qvfe4b003e8erselz7620b","_id":"ck4qvfe4o003v8ers1ou552uy"},{"post_id":"ck4qvfe2o00198ers9je536am","tag_id":"ck4qvfe30001o8ersdmhd5oa3","_id":"ck4qvfe4o003x8ers09a91uyc"},{"post_id":"ck4qvfe2q001b8ers5lr2b4c6","tag_id":"ck4qvfe27000o8ers2q9e4bm4","_id":"ck4qvfe4p00408ersetuw56t5"},{"post_id":"ck4qvfe2q001b8ers5lr2b4c6","tag_id":"ck4qvfe30001o8ersdmhd5oa3","_id":"ck4qvfe4q00428ers47w6dzy9"},{"post_id":"ck4qvfe2w001i8ers2jpf5p9q","tag_id":"ck4qvfe4o003w8ersehw64s3b","_id":"ck4qvfe4r00458ers8k0e49cv"},{"post_id":"ck4qvfe2w001i8ers2jpf5p9q","tag_id":"ck4qvfe27000o8ers2q9e4bm4","_id":"ck4qvfe4s00478ers7hlcezji"},{"post_id":"ck4qvfe31001q8ers9yphfyuu","tag_id":"ck4qvfe4q00418ers9x8dghx7","_id":"ck4qvfe4v004d8ersaoyhfs06"},{"post_id":"ck4qvfe31001q8ers9yphfyuu","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe4v004e8ersd86024lv"},{"post_id":"ck4qvfe33001t8erserfmhzj8","tag_id":"ck4qvfe4u004a8ers1cy1650l","_id":"ck4qvfe4z004l8ershq641n6r"},{"post_id":"ck4qvfe33001t8erserfmhzj8","tag_id":"ck4qvfe4v004f8ersenbd7yr8","_id":"ck4qvfe4z004n8ers08czdmbj"},{"post_id":"ck4qvfe36001y8ersdiecbiip","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe58004s8ers02f7gy82"},{"post_id":"ck4qvfe36001y8ersdiecbiip","tag_id":"ck4qvfe4v004f8ersenbd7yr8","_id":"ck4qvfe59004t8erscmfv73p0"},{"post_id":"ck4qvfe3800208ers1a3u60ix","tag_id":"ck4qvfe4v004f8ersenbd7yr8","_id":"ck4qvfe5a004v8ersejsy0nd9"},{"post_id":"ck4qvfe3b00248ers08rxcu7m","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5c004x8ersgy9j68v6"},{"post_id":"ck4qvfe3d00278ers6an84kc3","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5d004z8ers36592rfq"},{"post_id":"ck4qvfe3g002c8ers13aj9ifp","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5e00518ers80ej2p01"},{"post_id":"ck4qvfe3h002f8ersdpwl4k9t","tag_id":"ck4qvfe5d00508ersgv5n9j7i","_id":"ck4qvfe5f00548ers22wk8eec"},{"post_id":"ck4qvfe3h002f8ersdpwl4k9t","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5f00558ers8jou27gh"},{"post_id":"ck4qvfe3k002k8ersd6414wvf","tag_id":"ck4qvfe5f00538ers2dfr3rlc","_id":"ck4qvfe5j00588ers3zqgfqkd"},{"post_id":"ck4qvfe3k002k8ersd6414wvf","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5k00598ers2p1reqgv"},{"post_id":"ck4qvfe3m002n8ershzdm46m0","tag_id":"ck4qvfe5h00578ers4pbdado2","_id":"ck4qvfe5m005b8ersfcufbq86"},{"post_id":"ck4qvfe3p002q8ers2biccbnc","tag_id":"ck4qvfe5h00578ers4pbdado2","_id":"ck4qvfe5o005d8ers0j52a018"},{"post_id":"ck4qvfe3s002t8ersbzo0174k","tag_id":"ck4qvfe5n005c8ers2d6hfo3h","_id":"ck4qvfe5p005f8ersapxm9tk5"},{"post_id":"ck4qvfe3w002w8ersadet98oc","tag_id":"ck4qvfe5n005c8ers2d6hfo3h","_id":"ck4qvfe5q005h8ers6j8s00yj"},{"post_id":"ck4qvfe3y002z8ershn068w2a","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5r005j8ers34haaghg"},{"post_id":"ck4qvfe4100328ershksdbluv","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5s005l8ersaxwma5v3"},{"post_id":"ck4qvfe4200358ersbnf472kt","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5u005o8ersfze87z9o"},{"post_id":"ck4qvfe4200358ersbnf472kt","tag_id":"ck4qvfe5n005c8ers2d6hfo3h","_id":"ck4qvfe5u005p8ersfuuz50bb"},{"post_id":"ck4qvfe4500388ersh1ykbi87","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5v005r8ers56tn4dsp"},{"post_id":"ck4qvfe47003a8ers4vr09tz9","tag_id":"ck4qvfe4s00468ersfng7e577","_id":"ck4qvfe5w005t8ershi6n03j0"},{"post_id":"ck4qvfe4a003d8erscch6ct46","tag_id":"ck4qvfe5v005s8ersgozhc2wi","_id":"ck4qvfe5y005v8erse2gdgoe3"},{"post_id":"ck4qvfe4c003f8ers78855d30","tag_id":"ck4qvfe5h00578ers4pbdado2","_id":"ck4qvfe62005w8ers69lk59pi"}],"Tag":[{"name":"unix","_id":"ck4qvfe1n00048ers88co24cr"},{"name":"ruby","_id":"ck4qvfe21000g8ersh47cdpa3"},{"name":"rails","_id":"ck4qvfe27000o8ers2q9e4bm4"},{"name":"programming","_id":"ck4qvfe2d000u8ersgvey20j3"},{"name":"random","_id":"ck4qvfe2t001f8ers6yl0f027"},{"name":"secure","_id":"ck4qvfe30001o8ersdmhd5oa3"},{"name":"database","_id":"ck4qvfe3a00238ers3ppxb7qc"},{"name":"til","_id":"ck4qvfe3f002b8ers7exv85wc"},{"name":"aws","_id":"ck4qvfe3k002j8ers95yt532l"},{"name":"carrierwave","_id":"ck4qvfe4200338ersandpaol1"},{"name":"https","_id":"ck4qvfe4b003e8erselz7620b"},{"name":"activerecord","_id":"ck4qvfe4o003w8ersehw64s3b"},{"name":"SOLID","_id":"ck4qvfe4q00418ers9x8dghx7"},{"name":"RUBY","_id":"ck4qvfe4s00468ersfng7e577"},{"name":"SECURE","_id":"ck4qvfe4u004a8ers1cy1650l"},{"name":"RAILS","_id":"ck4qvfe4v004f8ersenbd7yr8"},{"name":"RACK","_id":"ck4qvfe5d00508ersgv5n9j7i"},{"name":"ORM","_id":"ck4qvfe5f00538ers2dfr3rlc"},{"name":"TIl","_id":"ck4qvfe5h00578ers4pbdado2"},{"name":"TIL","_id":"ck4qvfe5n005c8ers2d6hfo3h"},{"name":"JS","_id":"ck4qvfe5v005s8ersgozhc2wi"}]}}
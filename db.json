{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"source/images/7.gif","path":"images/7.gif","modified":1,"renderable":0},{"_id":"source/images/dip.jpg","path":"images/dip.jpg","modified":1,"renderable":0},{"_id":"source/images/lsp.jpg","path":"images/lsp.jpg","modified":1,"renderable":0},{"_id":"source/images/ocp.jpg","path":"images/ocp.jpg","modified":1,"renderable":0},{"_id":"source/images/orm.png","path":"images/orm.png","modified":1,"renderable":0},{"_id":"source/images/question_11.jpg","path":"images/question_11.jpg","modified":1,"renderable":0},{"_id":"source/images/sexymeo.jpg","path":"images/sexymeo.jpg","modified":1,"renderable":0},{"_id":"source/images/solid.png","path":"images/solid.png","modified":1,"renderable":0},{"_id":"source/images/sshhhh.png","path":"images/sshhhh.png","modified":1,"renderable":0},{"_id":"source/images/sshhhh_2.png","path":"images/sshhhh_2.png","modified":1,"renderable":0},{"_id":"source/images/vangnau-matngu.jpg","path":"images/vangnau-matngu.jpg","modified":1,"renderable":0},{"_id":"source/images/dauto-nongxu.jpg","path":"images/dauto-nongxu.jpg","modified":1,"renderable":0},{"_id":"source/images/hoptra.jpg","path":"images/hoptra.jpg","modified":1,"renderable":0},{"_id":"source/images/isp.png","path":"images/isp.png","modified":1,"renderable":0},{"_id":"source/images/ruby-exception.jpg","path":"images/ruby-exception.jpg","modified":1,"renderable":0},{"_id":"source/images/rack.jpeg","path":"images/rack.jpeg","modified":1,"renderable":0},{"_id":"source/images/ssl1.png","path":"images/ssl1.png","modified":1,"renderable":0},{"_id":"source/images/thanhcong.jpg","path":"images/thanhcong.jpg","modified":1,"renderable":0},{"_id":"source/images/theconnhinho.jpg","path":"images/theconnhinho.jpg","modified":1,"renderable":0},{"_id":"source/images/vancon-tamnang.jpg","path":"images/vancon-tamnang.jpg","modified":1,"renderable":0},{"_id":"source/images/file_permission.gif","path":"images/file_permission.gif","modified":1,"renderable":0},{"_id":"source/images/like-query.png","path":"images/like-query.png","modified":1,"renderable":0},{"_id":"source/images/thecon.jpg","path":"images/thecon.jpg","modified":1,"renderable":0},{"_id":"themes/solar/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/solar/source/images/apple-touch-icon.png","path":"images/apple-touch-icon.png","modified":1,"renderable":1},{"_id":"themes/solar/source/images/earth.png","path":"images/earth.png","modified":1,"renderable":1},{"_id":"themes/solar/source/images/favicon.ico","path":"images/favicon.ico","modified":1,"renderable":1},{"_id":"themes/solar/source/images/favicon-192x192.png","path":"images/favicon-192x192.png","modified":1,"renderable":1},{"_id":"themes/solar/source/images/logo.png","path":"images/logo.png","modified":1,"renderable":1},{"_id":"themes/solar/source/images/mars.png","path":"images/mars.png","modified":1,"renderable":1},{"_id":"themes/solar/source/images/mercury.png","path":"images/mercury.png","modified":1,"renderable":1},{"_id":"themes/solar/source/images/shadow.png","path":"images/shadow.png","modified":1,"renderable":1},{"_id":"themes/solar/source/images/venus.png","path":"images/venus.png","modified":1,"renderable":1},{"_id":"themes/solar/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"source/images/2-col.png","path":"images/2-col.png","modified":1,"renderable":0},{"_id":"source/images/date-first.png","path":"images/date-first.png","modified":1,"renderable":0},{"_id":"source/images/3sum_2.jpeg","path":"images/3sum_2.jpeg","modified":1,"renderable":0},{"_id":"source/images/leaf-node.png","path":"images/leaf-node.png","modified":1,"renderable":0},{"_id":"source/images/test/test1.jpg","path":"images/test/test1.jpg","modified":1,"renderable":0},{"_id":"source/images/test/test2.jpg","path":"images/test/test2.jpg","modified":1,"renderable":0},{"_id":"source/images/test/test5.jpg","path":"images/test/test5.jpg","modified":1,"renderable":0},{"_id":"source/images/sub-first.png","path":"images/sub-first.png","modified":1,"renderable":0},{"_id":"source/images/thecon-thienthan.jpg","path":"images/thecon-thienthan.jpg","modified":1,"renderable":0},{"_id":"source/images/vang-con-bi-om.jpeg","path":"images/vang-con-bi-om.jpeg","modified":1,"renderable":0},{"_id":"source/images/vangcon.jpeg","path":"images/vangcon.jpeg","modified":1,"renderable":0},{"_id":"themes/solar/source/images/jupiter.png","path":"images/jupiter.png","modified":1,"renderable":1},{"_id":"themes/solar/source/images/sun.png","path":"images/sun.png","modified":1,"renderable":1},{"_id":"source/images/b-tree-sql.png","path":"images/b-tree-sql.png","modified":1,"renderable":0},{"_id":"source/images/meta2/1.png","path":"images/meta2/1.png","modified":1,"renderable":0},{"_id":"source/images/vangcon-doi.jpeg","path":"images/vangcon-doi.jpeg","modified":1,"renderable":0},{"_id":"themes/solar/source/lib/justified-gallery/justifiedGallery.min.css","path":"lib/justified-gallery/justifiedGallery.min.css","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/justified-gallery/jquery.justifiedGallery.min.js","path":"lib/justified-gallery/jquery.justifiedGallery.min.js","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/styles.css","path":"lib/meslo-LG/styles.css","modified":1,"renderable":1},{"_id":"source/images/meta2/2.png","path":"images/meta2/2.png","modified":1,"renderable":0},{"_id":"source/images/srp.jpg","path":"images/srp.jpg","modified":1,"renderable":0},{"_id":"source/images/test/test9.jpg","path":"images/test/test9.jpg","modified":1,"renderable":0},{"_id":"themes/solar/source/images/Solar.png","path":"images/Solar.png","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/jquery/jquery.min.js","path":"lib/jquery/jquery.min.js","modified":1,"renderable":1},{"_id":"source/images/meta2/5.png","path":"images/meta2/5.png","modified":1,"renderable":0},{"_id":"source/images/test/test7.jpg","path":"images/test/test7.jpg","modified":1,"renderable":0},{"_id":"source/images/test/test8.jpg","path":"images/test/test8.jpg","modified":1,"renderable":0},{"_id":"themes/solar/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"source/images/meta2/3.png","path":"images/meta2/3.png","modified":1,"renderable":0},{"_id":"source/images/meta2/9.png","path":"images/meta2/9.png","modified":1,"renderable":0},{"_id":"source/images/test/test6.jpg","path":"images/test/test6.jpg","modified":1,"renderable":0},{"_id":"source/images/test/test4.jpg","path":"images/test/test4.jpg","modified":1,"renderable":0},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"source/images/meta2/7.png","path":"images/meta2/7.png","modified":1,"renderable":0},{"_id":"source/images/test/test3.jpg","path":"images/test/test3.jpg","modified":1,"renderable":0},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGL-Italic.ttf","path":"lib/meslo-LG/fonts/MesloLGL-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGM-Italic.ttf","path":"lib/meslo-LG/fonts/MesloLGM-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGS-Italic.ttf","path":"lib/meslo-LG/fonts/MesloLGS-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGL-Bold.ttf","path":"lib/meslo-LG/fonts/MesloLGL-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGL-BoldItalic.ttf","path":"lib/meslo-LG/fonts/MesloLGL-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGM-Bold.ttf","path":"lib/meslo-LG/fonts/MesloLGM-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGM-BoldItalic.ttf","path":"lib/meslo-LG/fonts/MesloLGM-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGL-Regular.ttf","path":"lib/meslo-LG/fonts/MesloLGL-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGM-Regular.ttf","path":"lib/meslo-LG/fonts/MesloLGM-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGS-Bold.ttf","path":"lib/meslo-LG/fonts/MesloLGS-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGS-BoldItalic.ttf","path":"lib/meslo-LG/fonts/MesloLGS-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGS-Regular.ttf","path":"lib/meslo-LG/fonts/MesloLGS-Regular.ttf","modified":1,"renderable":1},{"_id":"source/images/test/test10.jpg","path":"images/test/test10.jpg","modified":1,"renderable":0},{"_id":"source/images/thecon-tuyetlo.gif","path":"images/thecon-tuyetlo.gif","modified":1,"renderable":0},{"_id":"source/images/meta2/8.png","path":"images/meta2/8.png","modified":1,"renderable":0},{"_id":"source/images/meta2/4.png","path":"images/meta2/4.png","modified":1,"renderable":0}],"Cache":[{"_id":"themes/solar/README.md","hash":"5b393ceb93cc1d5d1802dfd0300fd8341bac5b88","modified":1643632417936},{"_id":"themes/solar/.DS_Store","hash":"37292dce89faac3d6dbcfd42219116265d29ff67","modified":1643721390735},{"_id":"themes/solar/LICENSE","hash":"5ba0225e835bf8218d1524f481efc50c85447745","modified":1643632417936},{"_id":"themes/solar/_config.yml","hash":"9d5e5a83c5e38f9e44c6b2e41895726805445b76","modified":1643799571236},{"_id":"source/_posts/2018-01-01-file-permission-in-linux.md","hash":"6c7e79245c012b87cde7c9baab8e952743ebff65","modified":1643448599925},{"_id":"source/_posts/2019-01-23-open-command-in-macos.md","hash":"77926020fdbcbdf19b5049b2686da03c8e26d81f","modified":1643448599925},{"_id":"source/_posts/2019-01-30-bash-file-in-macos-and-linux.md","hash":"18ced0e3bf304ba599d910c1c2fd2c11c9b0d8ce","modified":1643448599925},{"_id":"source/_posts/2019-01-28-count-vs-length-size-in-ruby-and-ror.md","hash":"f20aa74d0aa4349291a9b807f3664b22a06d7a80","modified":1643448599925},{"_id":"source/_posts/2019-02-19-truyen-tham-tri-va-truyen-tham-chieu.md","hash":"cbf4af6b91ef4fef9dac33b8cbad8dc0d6aee813","modified":1643448599926},{"_id":"source/_posts/2019-02-22-quy-luat-80-20.md","hash":"82f1eb5c8382de3aa84a7ec90b8181c5f82b73f9","modified":1643448599926},{"_id":"source/_posts/2019-02-20-cac-trinh-thong-dich-trong-ruby.md","hash":"512fcdbeb03ddaf1e848c096246cf5b6780eb033","modified":1643448599926},{"_id":"source/_posts/2019-02-05-root-sudo-and-package-management-system.md","hash":"c22262a735fd9db90f81c13558e42fc1b32ebc6a","modified":1643448599926},{"_id":"source/_posts/2019-02-24-ruby-method-lookup.md","hash":"e3aa0c6852581bc602a32c4b7c675e59d9f74248","modified":1643448599926},{"_id":"source/_posts/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails.md","hash":"e0c0266c336544a0be0e0b13acf174747bacbea8","modified":1643448599926},{"_id":"source/_posts/2019-02-25-van-de-n-1-trong-rails.md","hash":"59b9d1fe6fcc210ba1bc5b8d6d38c21fdc85512a","modified":1643448599926},{"_id":"source/_posts/2019-04-08-immutable-va-mutable-trong-ruby.md","hash":"35bcfc5701761300d269855277549714f15b1425","modified":1643448599926},{"_id":"source/_posts/2019-04-10-iaas-paas-saas.md","hash":"2a5d100f96bcff3eb1ae2086ec0bdbeebfac7d6e","modified":1643448599926},{"_id":"source/_posts/2019-04-10-upload-file-len-aws-s3-va-nhung-van-de-can-luu-y.md","hash":"b738a23a6ff75e535ed473659c7dd4566fe30ec6","modified":1643448599926},{"_id":"source/_posts/2019-04-11-su-dung-carrierwave-voi-s3.md","hash":"be8025909c4fa7eb17b8fef7f1f1b1e6e1f20d08","modified":1643448599926},{"_id":"source/_posts/2019-05-04-https-vai-dieu-can-nho.md","hash":"d8daaba6642c1be8322c5023fb778990085b301b","modified":1643448599927},{"_id":"source/_posts/2019-04-17-doi-dieu-ve-session-va-cookie-trong-rails.md","hash":"c399b4d65b64f370a54ca06d7fcceaf467fe024c","modified":1643448599927},{"_id":"source/_posts/2019-05-08-phan-biet-update-update-column-va-update-attribute-trong-rails.md","hash":"301a3609d63d01fc9461309ef68fc1a0b4d734b9","modified":1643448599927},{"_id":"source/_posts/2019-05-15-require-load-include-va-extend-trong-ruby.md","hash":"a4f2362e1d81b68d0bb27be0c488d4dda32a7602","modified":1643448599927},{"_id":"source/_posts/2019-05-16-autoloading-va-reloading-constants-trong-rails.md","hash":"e269b0722b5cf5e9ec013933cce9e43d5d5f7c80","modified":1643448599927},{"_id":"source/_posts/2019-05-17-nguyen-ly-solid-trong-code-ruby.md","hash":"d1f5774bb4c58b2ce38f9ba765a0ea898a4c316e","modified":1643448599927},{"_id":"source/_posts/2019-06-09-so-sanh-symbol-va-string-trong-ruby.md","hash":"86c3f70c0f9c0775191e9926f27d9ce68a446c4e","modified":1643448599927},{"_id":"source/_posts/2019-06-08-tan-cong-sql-injection-va-cach-phong-chong-trong-rails.md","hash":"7d3165180f94cf41c70f43157d29352497320dde","modified":1643448599927},{"_id":"source/_posts/2019-06-10-xu-ly-ngoai-le-trong-rails.md","hash":"1dbc40fb3215ce8d1890dd368780286b9cab6e59","modified":1643448599927},{"_id":"source/_posts/2019-06-09-luu-y-ngan-gon-ve-scope-va-class-method.md","hash":"10f470d044df0e08a9caee5885e0d4b72a52cea3","modified":1643448599927},{"_id":"source/_posts/2019-06-11-public-private-va-protected-method-trong-ruby.md","hash":"a4fa7d523d626921dbf5fe098369a841a7b4b8ef","modified":1643448599927},{"_id":"source/_posts/2019-06-25-build-a-simple-orm-with-ruby.md","hash":"54dec8cfa92e58ff3e79f417927e3510c77257d1","modified":1643448599928},{"_id":"source/_posts/2019-06-24-simple-rack-application.md","hash":"0e357744a268a9444ca51dcfa900d04d14896628","modified":1643448599928},{"_id":"source/_posts/2019-06-16-tu-khoa-super-trong-ruby.md","hash":"fa9f920d5b73bee034bed444a8e770d4777a13cb","modified":1643448599928},{"_id":"source/_posts/2019-08-05-setup-terminal-macos.md","hash":"1bc46cf0ea81e2a4edd34a183bb0b0b167a0fac3","modified":1643448599928},{"_id":"source/_posts/2019-09-20-vscode-extension.md","hash":"7162e2a730b6fa77039e6b5eceddd4f26a7457f0","modified":1643448599928},{"_id":"source/_posts/2019-10-30-basic-vim-setup.md","hash":"cb4a6d3f95e2c4545a279fc7d4f2bc99369b3a22","modified":1643448599928},{"_id":"source/_posts/2019-12-01-basic-bash-file-to-deploy-my-blog.md","hash":"385807a35156d2b9ce4f9216941f5c3c983906e2","modified":1643448599928},{"_id":"source/_posts/2019-12-01-how-to-use-multi-account-with-ssh.md","hash":"4e524c32dcde206d3732b613f8405ddd45ba0e7c","modified":1643448599928},{"_id":"source/_posts/2019-12-05-ruby-argument.md","hash":"2b905c379c58e53146d6c7cef4dc933a8a744b61","modified":1643448599928},{"_id":"source/_posts/2019-12-16-search-in-array.md","hash":"7a96990ebf9cf6e4d859a320b89b65c29b3462f2","modified":1643448599928},{"_id":"source/_posts/2019-12-06-linked-list-with-ruby.md","hash":"2d04de05353f30fc08a4acf89b42177b33a2641e","modified":1643448599928},{"_id":"source/_posts/2019-12-20-example-of-two-pointer.md","hash":"17bb1dccd6322ee0de3bb7eeabae8f4aba67a1c6","modified":1643448599928},{"_id":"source/_posts/2019-12-01-simple-bst-in-ruby.md","hash":"07f9d434c47335bf5df711b09950934bd531a2e6","modified":1643721020981},{"_id":"source/_posts/2019-12-28-clone-object-and-array-in-javascript.md","hash":"67e61f603b889dd398a11aa6fa50abceefb6792d","modified":1643448599928},{"_id":"source/_posts/2019-8-10-meta-programming-ruby.md","hash":"6ff02f99ec4f321d45486ce50db6757a1095976e","modified":1643448599929},{"_id":"source/_posts/2019-8-21-hello-hexo.md","hash":"99c7b0d3d84b1080cdf442cbc6d6e9dadab3ca34","modified":1643448599929},{"_id":"source/_posts/2020-01-05-sql-performance-explained-notes.md","hash":"edcd77494d7f2ac70ac62aca8651e3b568ca7f7c","modified":1643448599929},{"_id":"source/_posts/2020-01-08-reactjs-notes.md","hash":"2de516a3b96f322beb2f230d82858c4c02afbc2a","modified":1643448599929},{"_id":"source/_posts/2020-01-09-callback-promise-anyc-await.md","hash":"26fb8d4e106f30d5fca3fde05f6d06c99f12128d","modified":1643448599929},{"_id":"source/_posts/2020-01-10-method-and-function-notes.md","hash":"bf7325ff361710f5d49bb6276afbb580e860b9d4","modified":1643448599929},{"_id":"source/_posts/2020-01-11-this-in-javascript.md","hash":"084d8ca21f28cdbdcad5e037db2399dbf832527d","modified":1643448599929},{"_id":"source/_posts/2020-02-05-the-first-note-in-the-new-luna-year.md","hash":"c115e864c4b1c911999ae3b497b04d4042f76304","modified":1643448599929},{"_id":"source/_posts/2020-03-16-new-project-notes-2.md","hash":"a6d2edaf78f80cacedd0855b7620bc2d2d2890c5","modified":1643448599929},{"_id":"source/_posts/2020-03-8-redux-co-ban.md","hash":"4532673bb2ae91fb2b666a180f3280add3e59bb6","modified":1643448599929},{"_id":"source/_posts/2020-04-23-handle-exception-in-rails.md","hash":"ff058c2cc599ea3b569d8ece51667588acfbbb9d","modified":1643448599930},{"_id":"source/_posts/2020-05-12-safe-navigation-operator.md","hash":"349acf6cde3642bd8c11670517e05fc9e5e3515f","modified":1643448599930},{"_id":"source/_posts/2020-05-14-url-dash-vs-underscore.md","hash":"79b71432c74c56ff6dc5c0f7aac702b2da53472d","modified":1643448599930},{"_id":"source/_posts/2020-05-17-lam-mini-app-cho-vo-phan-1.md","hash":"dadbb9f7eb22aee7c6476cd499fadbce31efe336","modified":1643448599930},{"_id":"source/_posts/2020-05-13-linux-process-types-dirty-method.md","hash":"7bf6f5c6c75ef5c03da0a18dd59206dd8a57c2b4","modified":1643448599930},{"_id":"source/_posts/2020-06-27-viet-side-project.md","hash":"80f2fa3ce8abaf7c2a364c7307a9846005d22b3a","modified":1643448599930},{"_id":"source/_posts/2022-02-01-docker-2021.md","hash":"36c64630f95c084a10347972d3309a03e2b5c2bb","modified":1655541389946},{"_id":"source/about/index.md","hash":"09703cb1947571d57ca6efbf4f87646ed8812c0c","modified":1643720736679},{"_id":"source/_posts/2020-07-03-leetcode-track-list.md","hash":"d44919aeb34c475189d3bd85581a25f5eca5c0f1","modified":1643448862460},{"_id":"source/_posts/2020-06-28-goi-api-tu-fe.md","hash":"27ce61f7d577f0bed53c91e87fe7c2feac02897f","modified":1643635448245},{"_id":"source/_posts/2022-01-31-put-images-in-the-header.md","hash":"c3f5daedaa3a7331a1f2e1597d18f6896b1c4c41","modified":1643721611591},{"_id":"source/images/7.gif","hash":"b85ec503cfc4a20438125cfdf351ef1047ee437b","modified":1643448599932},{"_id":"source/images/dip.jpg","hash":"3d4204d18b0b55499ff7e209f955456a90edc8fb","modified":1643448599935},{"_id":"source/images/lsp.jpg","hash":"65e9b6cae517487c256665e96e85d24efc597986","modified":1643448599938},{"_id":"source/images/ocp.jpg","hash":"2cf898d6f4747d7280f5ea94a46baf6070e2a48e","modified":1643448599964},{"_id":"source/images/orm.png","hash":"0c5c1839671d39b0ebe69609cc1849716ad4dfc8","modified":1643448599964},{"_id":"source/images/question_11.jpg","hash":"e775d41977358490db76fca98876432928b2e076","modified":1643448599964},{"_id":"source/images/sexymeo.jpg","hash":"b184f24368abd09d5a11b9cbd612a9de3d0be01b","modified":1643448599965},{"_id":"source/images/solid.png","hash":"85d377189186938860534c3a13ff9b55199ac388","modified":1643448599966},{"_id":"source/images/sshhhh.png","hash":"289a4480f99d50b04fb0222d3f727c0d400f2567","modified":1643448599967},{"_id":"source/images/sshhhh_2.png","hash":"167cf91f4d3e0974fa2dd7cd2e9b4e17f4cf3b42","modified":1643448599967},{"_id":"themes/solar/scripts/meta.js","hash":"fa6055a39851c9953d033e70c1614547b94dce60","modified":1643632417940},{"_id":"themes/solar/scripts/thumbnail.js","hash":"df8829fd8c3119650037eba5ec11bdce06acff9d","modified":1643632417940},{"_id":"source/projects/index.md","hash":"de841cb2cb061913cdf3967926e44db0d324d4ae","modified":1643448599978},{"_id":"source/images/vangnau-matngu.jpg","hash":"7d94135737c5df8faccab6474098c4c985d20bd0","modified":1643448599978},{"_id":"source/speak/index.md","hash":"bc87ada7cf1545eb916a04124f3a92bab050e539","modified":1643448599978},{"_id":"themes/solar/layout/archive.ejs","hash":"f9c0434f023bdf2858aa8447137463c3224814be","modified":1643632417937},{"_id":"themes/solar/layout/index.ejs","hash":"0ea23cf9f01820a7e1c86600110afa876041cd25","modified":1643632417938},{"_id":"themes/solar/layout/layout.ejs","hash":"52b18d33641395aa85c1f099380ffe79eb8dd3e1","modified":1643632417938},{"_id":"themes/solar/layout/page.ejs","hash":"b6b7b1e6dc856a0e62f35da0151f67ba41143e04","modified":1643632417940},{"_id":"themes/solar/layout/post.ejs","hash":"2731e597b5d1714a6f5a775c432e99785f02a3e3","modified":1643632417940},{"_id":"source/images/dauto-nongxu.jpg","hash":"7c5d8af8371982a84f2bb69913d32d584fa9331b","modified":1643448599935},{"_id":"source/images/hoptra.jpg","hash":"4b0a09ac3695f5ba09f3c92ae5b844c33a45ff9f","modified":1643448599936},{"_id":"source/images/isp.png","hash":"8cb5c14b38c4396246f9202dacc29491936e380d","modified":1643448599936},{"_id":"source/images/ruby-exception.jpg","hash":"a8d929aac3fe8c1472f08ef1fe16081a716d906e","modified":1643448599965},{"_id":"source/images/rack.jpeg","hash":"f6e3a0bd75b58db47ac18d1eeb2b71727a5230e7","modified":1643448599965},{"_id":"source/images/ssl1.png","hash":"b1ceda2df1849ff840ccad660cdbd6aa984ff3f6","modified":1643448599968},{"_id":"source/images/thanhcong.jpg","hash":"c84daf2145d5aa0d8aefc4d5c608539801f9b4c1","modified":1643448599969},{"_id":"source/images/theconnhinho.jpg","hash":"cbeeeca81e07cc4ff303d4465335a94e6629d7fd","modified":1643448599974},{"_id":"source/images/vancon-tamnang.jpg","hash":"777b2b5707e40c1f89d5deb2dc000282ca75bb35","modified":1643448599975},{"_id":"source/images/file_permission.gif","hash":"7045495d2b775ec3c73765211edb06381d683daa","modified":1643448599936},{"_id":"source/images/like-query.png","hash":"d2b39a72ee62debfc6e5b33c0d532eeee190c4cf","modified":1643448599938},{"_id":"source/images/thecon.jpg","hash":"272a340a5748fb56151f65386685c6d838386996","modified":1643448599974},{"_id":"themes/solar/source/css/_extend.styl","hash":"2d360cc07d3cfe10fd95640346515f51fa0ea799","modified":1643632417941},{"_id":"themes/solar/source/css/_mixins.styl","hash":"c921ceb620deedddd38c9cec28190995e8764bab","modified":1643632417945},{"_id":"themes/solar/source/css/_variables.styl","hash":"05dfdc680b2a156f615433a5978bf80178acb26f","modified":1643632417946},{"_id":"themes/solar/source/css/_util.styl","hash":"f8e286a21c7ec3e771d5ddeb2909ac92390af9bd","modified":1643632417946},{"_id":"themes/solar/source/css/style.styl","hash":"2b9c9697d30759cb3c49b52486b6fc34bcfbe464","modified":1643632417946},{"_id":"themes/solar/source/images/apple-touch-icon.png","hash":"bb91acbedda435287809e41148b1b255cdf957dc","modified":1643632417948},{"_id":"themes/solar/source/images/earth.png","hash":"2cdcc68e36457410c633a578bb7b30a803193ecb","modified":1643632417948},{"_id":"themes/solar/source/images/favicon.ico","hash":"54972e5dafeb73579b30c17232553c688d702448","modified":1643632417949},{"_id":"themes/solar/source/images/favicon-192x192.png","hash":"4b07282018db1888c7bc707a3e1b576c5684eabb","modified":1643632417949},{"_id":"themes/solar/source/images/logo.png","hash":"2084e1813f7310d9543a37608f4e6690d600b9c3","modified":1643632417949},{"_id":"themes/solar/source/images/mars.png","hash":"4b33fb4ef0359cb401d4ed6d862caf55fb560802","modified":1643632417949},{"_id":"themes/solar/source/images/mercury.png","hash":"e5ecda952ae568b8890026c7ab02a175652535a2","modified":1643632417950},{"_id":"themes/solar/source/images/shadow.png","hash":"ec5cfff7997edd1b5e01516604daca7c7a4f3788","modified":1643632417950},{"_id":"themes/solar/source/images/venus.png","hash":"d45968836d952cd017439323135e6fad155c45ae","modified":1643632417950},{"_id":"themes/solar/source/js/main.js","hash":"481f730da10e5c9e1d59dfa9f1c0714ae709a0b8","modified":1643632417951},{"_id":"themes/solar/layout/_partial/banner.ejs","hash":"2611a9acb5392f425531610f5a12d396270041f7","modified":1643632417936},{"_id":"themes/solar/layout/_partial/comments.ejs","hash":"853a4500da515ef3facc51a055886eaf8efd080d","modified":1643632417936},{"_id":"themes/solar/layout/_partial/footer.ejs","hash":"7f6b3f126a58e6734b658ab57bc6b41822bc9342","modified":1643632417936},{"_id":"themes/solar/layout/_partial/head.ejs","hash":"5b6f73a4fb96edde3005f90063509bf851714f72","modified":1643632417936},{"_id":"themes/solar/layout/_partial/scripts.ejs","hash":"264e49c76744a2ce5be4cd69910cab8e0f517eda","modified":1643632417937},{"_id":"themes/solar/layout/_partial/header.ejs","hash":"889fe54bbfd1fb3357e8c0614d57a437a72f782a","modified":1643632417936},{"_id":"themes/solar/layout/layout/archive.ejs","hash":"f9c0434f023bdf2858aa8447137463c3224814be","modified":1643632417939},{"_id":"themes/solar/layout/layout/index.ejs","hash":"0ea23cf9f01820a7e1c86600110afa876041cd25","modified":1643632417940},{"_id":"themes/solar/layout/layout/layout.ejs","hash":"52b18d33641395aa85c1f099380ffe79eb8dd3e1","modified":1643632417940},{"_id":"source/images/2-col.png","hash":"2affaf2702f7313e6f5d288f8d977bf246f903eb","modified":1643448599931},{"_id":"themes/solar/layout/layout/post.ejs","hash":"2731e597b5d1714a6f5a775c432e99785f02a3e3","modified":1643632417940},{"_id":"themes/solar/layout/layout/page.ejs","hash":"b6b7b1e6dc856a0e62f35da0151f67ba41143e04","modified":1643632417940},{"_id":"source/images/date-first.png","hash":"ed69fc53b026dc3615900361b4511f08a1192e50","modified":1643448599934},{"_id":"source/images/3sum_2.jpeg","hash":"3ca9dd693e2ca0bc6a34a801383ee347d4d9f138","modified":1643448599932},{"_id":"source/images/leaf-node.png","hash":"5c140a89277b0d96fcaa314d78ebad8645274e7b","modified":1643448599937},{"_id":"source/images/test/test1.jpg","hash":"ce77bb301832f9e196bd6cd3afdde5cd107cc1f0","modified":1643636720111},{"_id":"source/images/test/test2.jpg","hash":"1b4bbcb97591ed371d72ff991bb89ae8b87f1b14","modified":1643636766832},{"_id":"source/images/test/test5.jpg","hash":"49b296698676728c5879ab925b329aacdc191320","modified":1643636785664},{"_id":"source/images/sub-first.png","hash":"fb193a6c105c3cdd487f5d6ccf435a1fc514c115","modified":1643448599968},{"_id":"source/images/thecon-thienthan.jpg","hash":"294c9a5fdb6c86620f535d3bec5ae82f56db9554","modified":1643448599969},{"_id":"source/images/vang-con-bi-om.jpeg","hash":"143015d2b0cc68f84dd805969e629f5117dd0068","modified":1643448599976},{"_id":"source/images/vangcon.jpeg","hash":"81d20645ed37382ea561ee93fb99f915879d25c4","modified":1643448599977},{"_id":"themes/solar/source/css/_partial/archive.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1643632417945},{"_id":"themes/solar/source/images/jupiter.png","hash":"4b7bc03b4cdf2fcde13e982aef340a1d385a3e7d","modified":1643632417949},{"_id":"themes/solar/source/images/sun.png","hash":"62be3d54471271a1e8adb348a3f021ef001b4668","modified":1643632417950},{"_id":"source/images/b-tree-sql.png","hash":"b615617f48a8fb45bbe1ac33360c73c5123b46b4","modified":1643448599934},{"_id":"source/images/meta2/1.png","hash":"2fa2eeecf403fa05a9624e2cb3feb8001ad2dba9","modified":1643448599939},{"_id":"source/images/vangcon-doi.jpeg","hash":"2fb39289023811885464b3488aa9a5f1046b87d4","modified":1643448599977},{"_id":"themes/solar/source/css/_highlight/agate.styl","hash":"601eb70448a16b918df132f6fc41e891ae053653","modified":1643632417941},{"_id":"themes/solar/source/css/_highlight/androidstudio.styl","hash":"65d09f1b0e81c6a182f549fd3de51e59823c97ae","modified":1643632417941},{"_id":"themes/solar/source/css/_highlight/atelier-dune-dark.styl","hash":"df50a85a4b14c7ca6e825d665594b91229d0e460","modified":1643632417942},{"_id":"themes/solar/source/css/_highlight/arta.styl","hash":"1a5accc115f41d1b669ed708ac6a29abac876599","modified":1643632417941},{"_id":"themes/solar/source/css/_highlight/atelier-cave-dark.styl","hash":"bc647b2c1d971d7cc947aa1ed66e9fd115261921","modified":1643632417942},{"_id":"themes/solar/source/css/_highlight/atelier-estuary-dark.styl","hash":"d84382bc8298f96730757391d3e761b7e640f406","modified":1643632417942},{"_id":"themes/solar/source/css/_highlight/atelier-forest-dark.styl","hash":"57c154c6045a038dc7df0a25927853e10bf48c4a","modified":1643632417942},{"_id":"themes/solar/source/css/_highlight/atelier-heath-dark.styl","hash":"b0cf13b2233e7bc38342032d2d7296591a4c2bcf","modified":1643632417942},{"_id":"themes/solar/source/css/_highlight/atelier-lakeside-dark.styl","hash":"bb0a8c4ad0dd8e3e7de7122ddf268fc42aa94acb","modified":1643632417942},{"_id":"themes/solar/source/css/_highlight/atelier-savanna-dark.styl","hash":"a16c919a1ccf2f845488078fb341381bec46b1f3","modified":1643632417942},{"_id":"themes/solar/source/css/_highlight/atelier-seaside-dark.styl","hash":"ce233a101daea7124cbfcd34add43ccfe2e1e1c7","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/dark.styl","hash":"71ce56d311cc2f3a605f6e2c495ccd7236878404","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"414b0cfc142f70afe359c16450b651e28bf7325a","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/atelier-plateau-dark.styl","hash":"09c64f1a7052aec9070c36c0431df25216afaea1","modified":1643632417942},{"_id":"themes/solar/source/css/_highlight/codepen-embed.styl","hash":"f4dcc84d8e39f9831a5efe80e51923fc3054feb0","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/far.styl","hash":"d9928010ffe71e80b97a5afcba1a4975efdd7372","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/hybrid.styl","hash":"ea8d7ddc258b073308746385f5cb85aabb8bfb83","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/darkula.styl","hash":"ad0d5728d21645039c9f199e7a56814170ed3bab","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/hopscotch.styl","hash":"b374c6550b89b4751aedc8fbc3cf98d95bd70ead","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/ir-black.styl","hash":"693078bbd72a2091ed30f506cc55949600b717af","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/kimbie.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1643632417943},{"_id":"themes/solar/source/css/_highlight/lightcode.styl","hash":"6c61c481836f6cbc3a57be10fa3af21bee83eb09","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/monokai.styl","hash":"5a4fe9f957fd7a368c21b62a818403db4270452f","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/obsidian.styl","hash":"55572bbcfee1de6c31ac54681bb00336f5ae826d","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/paraiso.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/monokai-sublime.styl","hash":"25aa2fc1dbe38593e7c7ebe525438a39574d9935","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/pojoaque.styl","hash":"77dae9dc41945359d17fe84dbd317f1b40b2ee33","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/railscasts.styl","hash":"acd620f8bb7ff0e3fe5f9a22b4433ceef93a05e6","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/rainbow.styl","hash":"ce73b858fc0aba0e57ef9fb136c083082746bc1d","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/solarized-dark.styl","hash":"702b9299a48c90124e3ac1d45f1591042f2beccc","modified":1643632417944},{"_id":"themes/solar/source/css/_highlight/tomorrow-night-blue.styl","hash":"8b3087d4422be6eb800935a22eb11e035341c4ba","modified":1643632417945},{"_id":"themes/solar/source/css/_highlight/sunburst.styl","hash":"a0b5b5129547a23865d400cfa562ea0ac1ee3958","modified":1643632417945},{"_id":"themes/solar/source/css/_highlight/tomorrow-night.styl","hash":"19b3080d4b066b40d50d7e7f297472482b5801fd","modified":1643632417945},{"_id":"themes/solar/source/css/_highlight/tomorrow-night-eighties.styl","hash":"fa57b3bb7857a160fc856dbe319b31e30cc5d771","modified":1643632417945},{"_id":"themes/solar/source/css/_highlight/tomorrow-night-bright.styl","hash":"0ac6af6ecb446b5b60d6226748e4a6532db34f57","modified":1643632417945},{"_id":"themes/solar/source/css/_partial/comments.styl","hash":"11fb41241a13971d23fc3f7e6d60315c7f248396","modified":1643632417945},{"_id":"themes/solar/source/css/_partial/article.styl","hash":"7bd68ecc8ebeb70daa74bfc179f984032eef18ae","modified":1643632417945},{"_id":"themes/solar/source/css/_highlight/zenburn.styl","hash":"fc5ec840435dad80964d04519d3f882ddc03746a","modified":1643632417945},{"_id":"themes/solar/source/css/_partial/footer.styl","hash":"b7570de60eaf9aa6b0192bf9c71b9172ff11bfbc","modified":1643632417946},{"_id":"themes/solar/source/css/_partial/header.styl","hash":"1545e8303fe36bbabb4da4a967c424de07d93dec","modified":1643632417946},{"_id":"themes/solar/source/css/_partial/index.styl","hash":"cf43702450ea1e5617541501886982a394cff8ec","modified":1643632417946},{"_id":"themes/solar/source/css/_partial/solar.styl","hash":"3af61c9b8033a4b804f0e1ba52525b55d6e16126","modified":1643632417946},{"_id":"themes/solar/source/lib/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1643632417958},{"_id":"themes/solar/source/lib/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1643632417958},{"_id":"themes/solar/layout/_partial/post/actions_desktop.ejs","hash":"2319dea76f205c27dd59c994921f66350df8027a","modified":1643632417937},{"_id":"themes/solar/layout/_partial/post/actions_mobile.ejs","hash":"e7638a83e5aaa4bf5b24440ca76fec8eb563bed7","modified":1643632417937},{"_id":"themes/solar/source/lib/meslo-LG/styles.css","hash":"eb88d0b9f1bbef99070e9627e2c96d892036bf7e","modified":1643632417978},{"_id":"themes/solar/layout/_partial/post/date.ejs","hash":"12a4a7ba6334e3e5c03d9a9601d7779a27c2e082","modified":1643632417937},{"_id":"themes/solar/layout/_partial/post/share.ejs","hash":"25a3406f97e976ec13239f0d3f32f9e512511f50","modified":1643632417937},{"_id":"themes/solar/layout/_partial/post/tag.ejs","hash":"bfab03ef986d35ccad583f2d2b575db4a8d2789e","modified":1643632417937},{"_id":"themes/solar/layout/_partial/post/title.ejs","hash":"a060f1c6e3718494a6b1d0e1981ea0bf4e549828","modified":1643632417937},{"_id":"themes/solar/layout/_partial/post/gallery.ejs","hash":"9aecd8908e8a684f33dc20c02497c0f1774137c7","modified":1643632417937},{"_id":"themes/solar/layout/layout/_partial/banner.ejs","hash":"f4359350f4b79b14a9d669055911d50d7a3dfd89","modified":1643632417938},{"_id":"themes/solar/layout/layout/_partial/head.ejs","hash":"5b6f73a4fb96edde3005f90063509bf851714f72","modified":1643632417938},{"_id":"themes/solar/layout/layout/_partial/header.ejs","hash":"889fe54bbfd1fb3357e8c0614d57a437a72f782a","modified":1643632417938},{"_id":"themes/solar/layout/layout/_partial/comments.ejs","hash":"853a4500da515ef3facc51a055886eaf8efd080d","modified":1643632417938},{"_id":"themes/solar/layout/layout/_partial/scripts.ejs","hash":"264e49c76744a2ce5be4cd69910cab8e0f517eda","modified":1643632417939},{"_id":"themes/solar/layout/layout/_partial/footer.ejs","hash":"7f6b3f126a58e6734b658ab57bc6b41822bc9342","modified":1643632417938},{"_id":"source/images/meta2/2.png","hash":"acf16dbf3b15e3941acc63c4cbfc56aa4fb7449d","modified":1643448599940},{"_id":"source/images/srp.jpg","hash":"81710dc7159876b7164aa9bd7e77472f55e3a8ea","modified":1643448599967},{"_id":"source/images/test/test9.jpg","hash":"9b3b6204e11a5a6f525740dd8537ae38644e3063","modified":1643636807683},{"_id":"themes/solar/source/images/Solar.png","hash":"463dbb952527b3d35c6203575eec552f62fd9d8e","modified":1643632417948},{"_id":"themes/solar/source/lib/jquery/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1643632417957},{"_id":"source/images/meta2/5.png","hash":"bb982c8aed9c8e3f81e8d71bd6c2d01b894cafcc","modified":1643448599953},{"_id":"source/images/test/test7.jpg","hash":"8a7e05d349a3dcb07328e0a73647bd0cfb43b99f","modified":1643636797454},{"_id":"source/images/test/test8.jpg","hash":"dc21d4ad8bc3368a9f105f421b3d24947e9584ca","modified":1643636802879},{"_id":"themes/solar/source/css/_partial/post/actions_mobile.styl","hash":"9eb19c3063d300c9ca548d671770edc71e357eba","modified":1643632417946},{"_id":"themes/solar/source/css/_partial/post/actions_desktop.styl","hash":"bbbc23844a67dca3143cdb514781714cdf06e209","modified":1643632417946},{"_id":"themes/solar/source/lib/font-awesome/css/font-awesome.css","hash":"4eda182cbcc046dbf449aef97c02c230cf80a494","modified":1643632417951},{"_id":"themes/solar/source/lib/font-awesome/css/font-awesome.min.css","hash":"fb5b49426dee7f1508500e698d1b3c6b04c8fcce","modified":1643632417951},{"_id":"themes/solar/layout/layout/_partial/post/actions_desktop.ejs","hash":"2319dea76f205c27dd59c994921f66350df8027a","modified":1643632417938},{"_id":"themes/solar/layout/layout/_partial/post/actions_mobile.ejs","hash":"e7638a83e5aaa4bf5b24440ca76fec8eb563bed7","modified":1643632417939},{"_id":"themes/solar/layout/layout/_partial/post/date.ejs","hash":"12a4a7ba6334e3e5c03d9a9601d7779a27c2e082","modified":1643632417939},{"_id":"themes/solar/layout/layout/_partial/post/share.ejs","hash":"25a3406f97e976ec13239f0d3f32f9e512511f50","modified":1643632417939},{"_id":"themes/solar/layout/layout/_partial/post/gallery.ejs","hash":"9aecd8908e8a684f33dc20c02497c0f1774137c7","modified":1643632417939},{"_id":"themes/solar/layout/layout/_partial/post/tag.ejs","hash":"bfab03ef986d35ccad583f2d2b575db4a8d2789e","modified":1643632417939},{"_id":"themes/solar/layout/layout/_partial/post/title.ejs","hash":"a060f1c6e3718494a6b1d0e1981ea0bf4e549828","modified":1643632417939},{"_id":"themes/solar/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1643632417953},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1643632417953},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1643632417957},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1643632417957},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1643632417956},{"_id":"source/images/meta2/3.png","hash":"0bd5f388f8660ab278e5e5b840bad6825e0745a1","modified":1643448599942},{"_id":"source/images/meta2/9.png","hash":"5e4a5eb7f3a8956dc2f215fd5e253965e9ed7d73","modified":1643448599964},{"_id":"source/images/test/test6.jpg","hash":"1acfcdf222b98629a279cfe72eabc8fdf054fc9c","modified":1643636791631},{"_id":"source/images/test/test4.jpg","hash":"6a5d11d06a0c15e1a20daf0fcdc64ecfe018b0ae","modified":1643636778198},{"_id":"themes/solar/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1643632417955},{"_id":"source/images/meta2/7.png","hash":"b0a9c548892f127bec56bf2921f1e6e81786b186","modified":1643448599955},{"_id":"source/images/test/test3.jpg","hash":"ddaaaeb4fa04a05c83053c1f8149720d18c9c8de","modified":1643636772825},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGL-Italic.ttf","hash":"96c97a0a098ca40802f948ae56fa37aa6683d034","modified":1643632417967},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGM-Italic.ttf","hash":"68700db02debd4b922304134da83b829cbfddfc9","modified":1643632417975},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGS-Italic.ttf","hash":"7f7cdbdcc26279c04046632e22d872f111bc9399","modified":1643632417977},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGL-Bold.ttf","hash":"bfa1ed9a263ed78462f06d322de13bd5bd0906b2","modified":1643632417961},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGL-BoldItalic.ttf","hash":"a9a431fc7a6c3a67c98021d4035c12a07a4f1070","modified":1643632417964},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGM-Bold.ttf","hash":"a8a8df3393bccc365335fc5eb0a62a6b7ccd32b9","modified":1643632417970},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGM-BoldItalic.ttf","hash":"65ddb11e75ee93909e845ab912a36717c48f1c94","modified":1643632417973},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGL-Regular.ttf","hash":"2b912dd13f052f645ee19951604610bb350d50af","modified":1643632417970},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGM-Regular.ttf","hash":"5e220152adefe905b2197f873d7cee99eca50e91","modified":1643632417976},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGS-Bold.ttf","hash":"df202ce09cbdc70bc16b81983a13ef0f94e46f10","modified":1643632417976},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGS-BoldItalic.ttf","hash":"d895a1bd25e36c58b7f463ebe14de09f186d5ab4","modified":1643632417977},{"_id":"themes/solar/source/lib/meslo-LG/fonts/MesloLGS-Regular.ttf","hash":"56fa0e33a390b704afc56af93a31576ccdbbdd9e","modified":1643632417978},{"_id":"source/images/test/test10.jpg","hash":"df4f4c453b75dbce0d58b730053aef5068e4b3c3","modified":1643720524792},{"_id":"source/images/thecon-tuyetlo.gif","hash":"cab6a80c4530aeb097110a4265f95a2aa08817d8","modified":1643448599974},{"_id":"source/images/meta2/8.png","hash":"9f222f8dadd5976e00ed74dbdefd21debede4a5e","modified":1643448599962},{"_id":"source/images/meta2/4.png","hash":"a747f18f540a439daf4f7877801dd03917f25dbd","modified":1643448599951},{"_id":"public/about/index.html","hash":"37283147c0bc8ad73e6b3ff9b3cf043ba804f577","modified":1655541400361},{"_id":"public/speak/index.html","hash":"2089033161637b1155de8872810526aa0c2d5263","modified":1655541400361},{"_id":"public/projects/index.html","hash":"7eb73131f898be10648627546c8391acf266b04c","modified":1655541400361},{"_id":"public/2022/01/31/2022-01-31-put-images-in-the-header/index.html","hash":"4d169856f31360be0e6f47f7f3c9b369c466ee98","modified":1655541400361},{"_id":"public/2020/06/27/2020-06-27-viet-side-project/index.html","hash":"119cbda07d16291438daaa135de5016b52a18171","modified":1655541400361},{"_id":"public/2020/05/13/2020-05-13-linux-process-types-dirty-method/index.html","hash":"67e8a8e39cb10047f8b1c089eb4b5d2d812ab08d","modified":1655541400361},{"_id":"public/2020/05/14/2020-05-14-url-dash-vs-underscore/index.html","hash":"b85906de1a3dbc02721cc9c1fbf275b292d26e49","modified":1655541400361},{"_id":"public/2020/01/11/2020-01-10-method-and-function-notes/index.html","hash":"224170523c2dca3af916d61b2ae99c7d291dba0a","modified":1655541400361},{"_id":"public/2019/12/16/2019-12-16-search-in-array/index.html","hash":"9da4cf53b27d12965d6b1d2b52c11723c35ff312","modified":1655541400361},{"_id":"public/2019/11/12/2019-8-21-hello-hexo/index.html","hash":"5cfc71815688bdf22addb8904bd5a59ffa54c761","modified":1655541400361},{"_id":"public/2019/09/20/2019-09-20-vscode-extension/index.html","hash":"3162c99a36f1739c02b767d6b2297720d02c5324","modified":1655541400361},{"_id":"public/2019/04/10/2019-04-10-iaas-paas-saas/index.html","hash":"22c1f9dc853f531d8888c15b7edb436e79670a54","modified":1655541400361},{"_id":"public/2019/02/22/2019-02-22-quy-luat-80-20/index.html","hash":"c676baadf04b077b285e279ab77f34d503040335","modified":1655541400361},{"_id":"public/archives/2018/index.html","hash":"0406bcf71c9ae15fec81548d7af781899e5bb34a","modified":1655541400361},{"_id":"public/archives/2018/01/index.html","hash":"10a4413c8c8b6b73519e07b04bf8a99086a72e99","modified":1655541400361},{"_id":"public/archives/2018/12/index.html","hash":"79b0b2c0bca574cf6685fde7c754bcaf5bb1e03d","modified":1655541400361},{"_id":"public/archives/2019/index.html","hash":"a86e0b517f41f26cba4141cf9a4228e6f8328371","modified":1655541400361},{"_id":"public/archives/2019/02/index.html","hash":"7c19fef6ae4999c7b2a296aaf05ce3ee976e2e94","modified":1655541400361},{"_id":"public/archives/2019/04/index.html","hash":"5892a6e108c9dfac847c43bec18703216c2a05b2","modified":1655541400361},{"_id":"public/archives/2018/06/index.html","hash":"2e9eb4d5c20d1d383c181b5d6b4095179fdf3422","modified":1655541400361},{"_id":"public/archives/2019/05/index.html","hash":"7112fa21ca14859264573dedf0b4919081f443bf","modified":1655541400361},{"_id":"public/archives/2019/06/index.html","hash":"86f2303351b19a7cc7303a42e535274453137e22","modified":1655541400361},{"_id":"public/archives/2019/08/index.html","hash":"e60a8381e95d4f9a38538c7a1e8f436b21beb742","modified":1655541400361},{"_id":"public/archives/2019/09/index.html","hash":"c9f8dc05cd595aec6ed7c21832b307e2d917ba33","modified":1655541400361},{"_id":"public/archives/2019/11/index.html","hash":"5cc03f2461f80d8843e3a8f3d6244f1c2fb281e9","modified":1655541400361},{"_id":"public/archives/2019/12/index.html","hash":"33e97dc27e95493c67ebfdd0d00a3ee7f6295c51","modified":1655541400361},{"_id":"public/archives/2020/index.html","hash":"3bac4c045cd508ca9586c095672cacc063a183b4","modified":1655541400361},{"_id":"public/archives/2020/02/index.html","hash":"dfa05534bd53c37e39433bb15bc4c7ade358fae6","modified":1655541400361},{"_id":"public/archives/2020/03/index.html","hash":"dd901058c017a703f94af497b2634593f355ed32","modified":1655541400361},{"_id":"public/archives/2020/04/index.html","hash":"470996e8e35fd4e7088209b77b5eaa8717e99f59","modified":1655541400361},{"_id":"public/archives/2020/05/index.html","hash":"611f3b1078c5a4668c9c1b1fce1fe1a00d76f425","modified":1655541400361},{"_id":"public/archives/2020/01/index.html","hash":"21fb551a03e5f082d151a3ca1ce33718b077512d","modified":1655541400361},{"_id":"public/archives/2020/07/index.html","hash":"199cc5b254426efa5e4b8fb4f45f4313fbfd544d","modified":1655541400361},{"_id":"public/archives/2020/06/index.html","hash":"4694443a8abfd724f1b4ab91b7e619d49e72fd1e","modified":1655541400361},{"_id":"public/archives/2022/index.html","hash":"859a2fcad52e846b93215bb69cff91031586fbc0","modified":1655541400361},{"_id":"public/archives/2022/01/index.html","hash":"286731a824723c4bb6fec81435d9bfb8933ca66d","modified":1655541400361},{"_id":"public/archives/2022/06/index.html","hash":"e03f1fb99dad64373fb0063d3126233333f51940","modified":1655541400361},{"_id":"public/tags/UNIX/index.html","hash":"659bf1cb893f508949e677c2b9abeed6ccbb4f69","modified":1655541400361},{"_id":"public/tags/RUBY/index.html","hash":"9865a5c796bcd12bc76d534f8188556c498485d5","modified":1655541400361},{"_id":"public/tags/RAILS/index.html","hash":"878d879a4beb54c28e61d6fbcec75313775165d8","modified":1655541400361},{"_id":"public/tags/random/index.html","hash":"eaacb1ad950c044f0fe4724e158acc743149f98c","modified":1655541400361},{"_id":"public/tags/unix/index.html","hash":"7c9db7ef23b74c9008cd40b0160c311613efc95a","modified":1655541400361},{"_id":"public/tags/ruby/index.html","hash":"9a4e7462c91c951d493f3ba097d3ba486badd642","modified":1655541400361},{"_id":"public/tags/secure/index.html","hash":"9461780d2858e2c2f05f1f5bbf893a9dedcc07f4","modified":1655541400361},{"_id":"public/tags/rails/index.html","hash":"987fa4451354a2714a3116d92469581054ab2026","modified":1655541400361},{"_id":"public/tags/til/index.html","hash":"667571662d59db476a3477c1c365d4c6d31955f9","modified":1655541400361},{"_id":"public/tags/carrierwave/index.html","hash":"497e73d9f266bd1264c7202faa6859b4db748b69","modified":1655541400361},{"_id":"public/tags/aws/index.html","hash":"4c73e4d4439798d7ee8f9e95c761321af51207ac","modified":1655541400361},{"_id":"public/tags/https/index.html","hash":"53a854ebf6c0930af11a37c4ed7e54802eb31feb","modified":1655541400361},{"_id":"public/tags/SOLID/index.html","hash":"878d7addfc123ad20cc87f21bb20c3d7afdb81bd","modified":1655541400361},{"_id":"public/tags/SECURE/index.html","hash":"764072d449bc86cdd9942ff8953b8fad0a127f34","modified":1655541400361},{"_id":"public/tags/ORM/index.html","hash":"bd369f1a6c954c7bc40b4206c3ce946cfbd36c29","modified":1655541400361},{"_id":"public/tags/RACK/index.html","hash":"33a7a3ffad465a14939749298b71827bd214ac7c","modified":1655541400361},{"_id":"public/tags/TIl/index.html","hash":"f0c3212492f5f1d43ca095b99e03fb457b487164","modified":1655541400361},{"_id":"public/tags/TIL/index.html","hash":"68a1b0eca7c0ba2e5ebc73fa48016ef5fb8f2591","modified":1655541400361},{"_id":"public/tags/NOTES/index.html","hash":"4bbe4605090d8828d5bec092ab39211d4dbb2b74","modified":1655541400361},{"_id":"public/tags/JS/index.html","hash":"494fdbababa181f79c6e96837d1407e929203b0f","modified":1655541400361},{"_id":"public/categories/OS/index.html","hash":"1698034d165eb404972c8e7aa7e2099f7f73b6af","modified":1655541400361},{"_id":"public/categories/rails-notes/index.html","hash":"869e106016338d1d4bca5fc242944b1549bf202e","modified":1655541400361},{"_id":"public/categories/ruby-notes/index.html","hash":"4ed25e29cba2f6f4b6f7543a20209aba492d64d5","modified":1655541400361},{"_id":"public/categories/RUBY/index.html","hash":"55727b0d2ed49737514f795cb55c026fe8b6f7e6","modified":1655541400361},{"_id":"public/categories/RAILS/index.html","hash":"a6d6592f60c48f76faaf173bb5683a1815aadfae","modified":1655541400361},{"_id":"public/categories/RUBY/PROGRAMMING/index.html","hash":"1eddafa4b95e0071cd7ac8eaf90e9356d8d938fe","modified":1655541400361},{"_id":"public/categories/TIL/index.html","hash":"7c8f994eeb8163f38af996e3fe9be69665dcbd22","modified":1655541400361},{"_id":"public/categories/til/index.html","hash":"0c9dbf95772c9cc2c1c5534abc7e837be295f7da","modified":1655541400361},{"_id":"public/2022/06/18/2022-02-01-docker-2021/index.html","hash":"a1286647edb5365edf790ae0bbe9c68b44c3002d","modified":1655541400361},{"_id":"public/2020/07/03/2020-07-03-leetcode-track-list/index.html","hash":"611303bdf3d7c33a7d124d5c6a75abefe20303be","modified":1655541400361},{"_id":"public/2020/06/28/2020-06-28-goi-api-tu-fe/index.html","hash":"6c64f3bdbdf14b0c0b82efb8a205b702dad3107e","modified":1655541400361},{"_id":"public/2020/05/17/2020-05-17-lam-mini-app-cho-vo-phan-1/index.html","hash":"3012cc943628f8f792b1edf1e0d47065a0360639","modified":1655541400361},{"_id":"public/2020/05/12/2020-05-12-safe-navigation-operator/index.html","hash":"23854759c27f411afc9b95f4ed6c522d9c47b01c","modified":1655541400361},{"_id":"public/2020/04/23/2020-04-23-handle-exception-in-rails/index.html","hash":"e856187614ffa6beeb85af6f0eb9a48e3c5efe49","modified":1655541400361},{"_id":"public/2020/03/16/2020-03-16-new-project-notes-2/index.html","hash":"a28b3e2837fa5bc55de6278c6c522bea2c9cc582","modified":1655541400361},{"_id":"public/2020/02/05/2020-02-05-the-first-note-in-the-new-luna-year/index.html","hash":"beb202124a3d3ce03dce356585773aec3e7b294a","modified":1655541400361},{"_id":"public/2020/01/10/2020-01-11-this-in-javascript/index.html","hash":"46e2b1d648fe48192c8ebc355128818b8d750ccc","modified":1655541400361},{"_id":"public/2020/01/09/2020-03-8-redux-co-ban/index.html","hash":"4f577e0f33fa4884697561920c4019e62f90bf86","modified":1655541400361},{"_id":"public/2020/01/09/2020-01-09-callback-promise-anyc-await/index.html","hash":"b99ad9581b100b9135ab43e22eb7906cca0bd83b","modified":1655541400361},{"_id":"public/2020/01/05/2020-01-05-sql-performance-explained-notes/index.html","hash":"63929fa964d2c7e429ceb6e1cb00a90b3178a71b","modified":1655541400361},{"_id":"public/2020/01/08/2020-01-08-reactjs-notes/index.html","hash":"ef0b5a2856da58c82d1618b9120c2868347923fa","modified":1655541400361},{"_id":"public/2019/12/28/2019-12-28-clone-object-and-array-in-javascript/index.html","hash":"f8cfa3c7744a8ae91e58ebe584290b3101876c1f","modified":1655541400361},{"_id":"public/2019/12/20/2019-12-20-example-of-two-pointer/index.html","hash":"378f7a2440d43e91bdbc4200fb08feb08519c729","modified":1655541400361},{"_id":"public/2019/12/06/2019-12-06-linked-list-with-ruby/index.html","hash":"ee0d2272cc7be6493ab2fe1f94de780e2cd6aa50","modified":1655541400361},{"_id":"public/2019/12/05/2019-12-05-ruby-argument/index.html","hash":"47c75db0ba683e525bae5c196065fbe8b2b0a356","modified":1655541400361},{"_id":"public/2019/12/01/2019-12-01-basic-bash-file-to-deploy-my-blog/index.html","hash":"6e23b2e0d7c43a184109ad5d14f5e811d0c596ce","modified":1655541400361},{"_id":"public/2019/12/01/2019-12-01-how-to-use-multi-account-with-ssh/index.html","hash":"46a77182886e5e3168a57b8cb4dc701d415526cc","modified":1655541400361},{"_id":"public/2019/12/01/2019-12-01-simple-bst-in-ruby/index.html","hash":"4ed851100f3170fa89b4255d6ede7d54f01890fe","modified":1655541400361},{"_id":"public/2019/09/21/2019-8-10-meta-programming-ruby/index.html","hash":"540c9b4447c68252b1ee02fef52db9ca2092517f","modified":1655541400361},{"_id":"public/2019/09/20/2019-10-30-basic-vim-setup/index.html","hash":"0c03af16d0a5abc2a3b8e6e18434c7e37ca6a6e2","modified":1655541400361},{"_id":"public/2019/08/05/2019-08-05-setup-terminal-macos/index.html","hash":"cb2ea002972197b1c8ab85d4a889633c3f20dd18","modified":1655541400361},{"_id":"public/2019/06/26/2019-06-25-build-a-simple-orm-with-ruby/index.html","hash":"dfa9c70e78b019daa33b6112bbf6ba26791c218c","modified":1655541400361},{"_id":"public/2019/06/24/2019-06-24-simple-rack-application/index.html","hash":"131efe5f0ab76274dc6134111a63259d6ffde03b","modified":1655541400361},{"_id":"public/2019/06/16/2019-06-16-tu-khoa-super-trong-ruby/index.html","hash":"2d057a45e0ef4ab70ea7a3c44e0897685ffe7213","modified":1655541400361},{"_id":"public/2019/06/09/2019-06-09-so-sanh-symbol-va-string-trong-ruby/index.html","hash":"948118fa48d2926706b6d8aecc0e4ee2d49c2ea7","modified":1655541400361},{"_id":"public/2019/06/09/2019-06-09-luu-y-ngan-gon-ve-scope-va-class-method/index.html","hash":"8dad28495289878869dc709aecba37a4dd650484","modified":1655541400361},{"_id":"public/2019/06/08/2019-06-08-tan-cong-sql-injection-va-cach-phong-chong-trong-rails/index.html","hash":"73a7f632722345453f008e10321050127ccf771a","modified":1655541400361},{"_id":"public/2019/05/17/2019-05-17-nguyen-ly-solid-trong-code-ruby/index.html","hash":"8ab5f79c6b179c80b1982747c30899004731625c","modified":1655541400361},{"_id":"public/2019/06/11/2019-06-11-public-private-va-protected-method-trong-ruby/index.html","hash":"c607fb535e319f4974582a0f17a494e814408805","modified":1655541400361},{"_id":"public/2019/06/10/2019-06-10-xu-ly-ngoai-le-trong-rails/index.html","hash":"bc57b76003143d495da782e2f9c8aad0e9704b9c","modified":1655541400361},{"_id":"public/2019/05/15/2019-05-15-require-load-include-va-extend-trong-ruby/index.html","hash":"c751552d39f52f794a9899c0d9cf29e53fc96e4c","modified":1655541400361},{"_id":"public/2019/05/08/2019-05-08-phan-biet-update-update-column-va-update-attribute-trong-rails/index.html","hash":"80cb3537f8deb6ad809837129d6bb4d567ad25d1","modified":1655541400361},{"_id":"public/2019/05/04/2019-05-04-https-vai-dieu-can-nho/index.html","hash":"0bc64491bdc3076792afd2d7e483ba9925b0bfa3","modified":1655541400361},{"_id":"public/2019/04/17/2019-04-17-doi-dieu-ve-session-va-cookie-trong-rails/index.html","hash":"abdf8a2057060b6b37dd26f2563e94567d098b9c","modified":1655541400361},{"_id":"public/2019/04/11/2019-04-11-su-dung-carrierwave-voi-s3/index.html","hash":"03628e80800cff828920f6deb5abd630ecf3eaf4","modified":1655541400361},{"_id":"public/2019/04/17/2019-05-16-autoloading-va-reloading-constants-trong-rails/index.html","hash":"100aad24be0567e6f1a8936b62f6e93cbd0c892d","modified":1655541400361},{"_id":"public/2019/04/10/2019-04-10-upload-file-len-aws-s3-va-nhung-van-de-can-luu-y/index.html","hash":"1de7333b663a49c53839247be2a192b19d870be6","modified":1655541400361},{"_id":"public/2019/02/25/2019-02-25-van-de-n-1-trong-rails/index.html","hash":"df07650491b94ddf3000d02b705a1647a431f647","modified":1655541400361},{"_id":"public/2019/04/08/2019-04-08-immutable-va-mutable-trong-ruby/index.html","hash":"7b72775c39b8a6d8784e1cf4d2e23b8084238170","modified":1655541400361},{"_id":"public/2019/02/24/2019-02-24-ruby-method-lookup/index.html","hash":"53b0d3f90dcc5de5c4accda3152c855495d5b92e","modified":1655541400361},{"_id":"public/2019/02/20/2019-02-20-cac-trinh-thong-dich-trong-ruby/index.html","hash":"bf1f4783d4502989cfc0cca377b5d65f88bd1ca5","modified":1655541400361},{"_id":"public/2019/02/22/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails/index.html","hash":"ad8b09a2826a7712a1426d67bb11c41f1fb418ed","modified":1655541400361},{"_id":"public/2019/02/05/2019-02-05-root-sudo-and-package-management-system/index.html","hash":"8873e055f4e412585284242340bec6ff8d938e21","modified":1655541400361},{"_id":"public/2019/02/19/2019-02-19-truyen-tham-tri-va-truyen-tham-chieu/index.html","hash":"29a27f54ea95f298d8ea3cec223462d598f80583","modified":1655541400361},{"_id":"public/2018/01/23/2019-01-23-open-command-in-macos/index.html","hash":"9bc2b2846f7c45ee2f42bfbff68bb32a755d8acc","modified":1655541400361},{"_id":"public/2018/01/01/2018-01-01-file-permission-in-linux/index.html","hash":"813ad1fc740196a14b01ec69ab378a31dd850814","modified":1655541400361},{"_id":"public/archives/index.html","hash":"0379ce8dd23d9eac08a540be7361cfdb9124ef71","modified":1655541400361},{"_id":"public/2018/12/30/2019-01-30-bash-file-in-macos-and-linux/index.html","hash":"a67acfd0cd8340fa086c3c258725879607f02a51","modified":1655541400361},{"_id":"public/2018/06/28/2019-01-28-count-vs-length-size-in-ruby-and-ror/index.html","hash":"5f5ed0033ebd84bcdf2b471a860a5adc4e07ad8b","modified":1655541400361},{"_id":"public/index.html","hash":"343d536cfab17c12ec0d0d83c876a8d394836239","modified":1655541400361},{"_id":"public/images/7.gif","hash":"b85ec503cfc4a20438125cfdf351ef1047ee437b","modified":1655541400361},{"_id":"public/images/dip.jpg","hash":"3d4204d18b0b55499ff7e209f955456a90edc8fb","modified":1655541400361},{"_id":"public/images/lsp.jpg","hash":"65e9b6cae517487c256665e96e85d24efc597986","modified":1655541400361},{"_id":"public/images/ocp.jpg","hash":"2cf898d6f4747d7280f5ea94a46baf6070e2a48e","modified":1655541400361},{"_id":"public/images/orm.png","hash":"0c5c1839671d39b0ebe69609cc1849716ad4dfc8","modified":1655541400361},{"_id":"public/images/sexymeo.jpg","hash":"b184f24368abd09d5a11b9cbd612a9de3d0be01b","modified":1655541400361},{"_id":"public/images/question_11.jpg","hash":"e775d41977358490db76fca98876432928b2e076","modified":1655541400361},{"_id":"public/images/solid.png","hash":"85d377189186938860534c3a13ff9b55199ac388","modified":1655541400361},{"_id":"public/images/sshhhh_2.png","hash":"167cf91f4d3e0974fa2dd7cd2e9b4e17f4cf3b42","modified":1655541400361},{"_id":"public/images/sshhhh.png","hash":"289a4480f99d50b04fb0222d3f727c0d400f2567","modified":1655541400361},{"_id":"public/images/vangnau-matngu.jpg","hash":"7d94135737c5df8faccab6474098c4c985d20bd0","modified":1655541400361},{"_id":"public/images/favicon-192x192.png","hash":"4b07282018db1888c7bc707a3e1b576c5684eabb","modified":1655541400361},{"_id":"public/images/apple-touch-icon.png","hash":"bb91acbedda435287809e41148b1b255cdf957dc","modified":1655541400361},{"_id":"public/images/mars.png","hash":"4b33fb4ef0359cb401d4ed6d862caf55fb560802","modified":1655541400361},{"_id":"public/images/earth.png","hash":"2cdcc68e36457410c633a578bb7b30a803193ecb","modified":1655541400361},{"_id":"public/images/favicon.ico","hash":"54972e5dafeb73579b30c17232553c688d702448","modified":1655541400361},{"_id":"public/images/logo.png","hash":"2084e1813f7310d9543a37608f4e6690d600b9c3","modified":1655541400361},{"_id":"public/images/mercury.png","hash":"e5ecda952ae568b8890026c7ab02a175652535a2","modified":1655541400361},{"_id":"public/images/shadow.png","hash":"ec5cfff7997edd1b5e01516604daca7c7a4f3788","modified":1655541400361},{"_id":"public/images/venus.png","hash":"d45968836d952cd017439323135e6fad155c45ae","modified":1655541400361},{"_id":"public/images/hoptra.jpg","hash":"4b0a09ac3695f5ba09f3c92ae5b844c33a45ff9f","modified":1655541400361},{"_id":"public/images/dauto-nongxu.jpg","hash":"7c5d8af8371982a84f2bb69913d32d584fa9331b","modified":1655541400361},{"_id":"public/images/isp.png","hash":"8cb5c14b38c4396246f9202dacc29491936e380d","modified":1655541400361},{"_id":"public/images/ruby-exception.jpg","hash":"a8d929aac3fe8c1472f08ef1fe16081a716d906e","modified":1655541400361},{"_id":"public/images/ssl1.png","hash":"b1ceda2df1849ff840ccad660cdbd6aa984ff3f6","modified":1655541400361},{"_id":"public/images/theconnhinho.jpg","hash":"cbeeeca81e07cc4ff303d4465335a94e6629d7fd","modified":1655541400361},{"_id":"public/images/thanhcong.jpg","hash":"c84daf2145d5aa0d8aefc4d5c608539801f9b4c1","modified":1655541400361},{"_id":"public/images/rack.jpeg","hash":"f6e3a0bd75b58db47ac18d1eeb2b71727a5230e7","modified":1655541400361},{"_id":"public/images/vancon-tamnang.jpg","hash":"777b2b5707e40c1f89d5deb2dc000282ca75bb35","modified":1655541400361},{"_id":"public/images/test/test5.jpg","hash":"49b296698676728c5879ab925b329aacdc191320","modified":1655541400361},{"_id":"public/images/test/test1.jpg","hash":"ce77bb301832f9e196bd6cd3afdde5cd107cc1f0","modified":1655541400361},{"_id":"public/images/test/test2.jpg","hash":"1b4bbcb97591ed371d72ff991bb89ae8b87f1b14","modified":1655541400361},{"_id":"public/images/jupiter.png","hash":"4b7bc03b4cdf2fcde13e982aef340a1d385a3e7d","modified":1655541400361},{"_id":"public/images/sun.png","hash":"62be3d54471271a1e8adb348a3f021ef001b4668","modified":1655541400361},{"_id":"public/lib/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1655541400361},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1655541400361},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1655541400361},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1655541400361},{"_id":"public/js/main.js","hash":"481f730da10e5c9e1d59dfa9f1c0714ae709a0b8","modified":1655541400361},{"_id":"public/lib/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1655541400361},{"_id":"public/lib/meslo-LG/styles.css","hash":"eb88d0b9f1bbef99070e9627e2c96d892036bf7e","modified":1655541400361},{"_id":"public/css/style.css","hash":"cb16db544fef2e29bcd67ab1db6b883b481efb98","modified":1655541400361},{"_id":"public/lib/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1655541400361},{"_id":"public/lib/jquery/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1655541400361},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"fb5b49426dee7f1508500e698d1b3c6b04c8fcce","modified":1655541400361},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"4eda182cbcc046dbf449aef97c02c230cf80a494","modified":1655541400361},{"_id":"public/images/file_permission.gif","hash":"7045495d2b775ec3c73765211edb06381d683daa","modified":1655541400361},{"_id":"public/images/thecon.jpg","hash":"272a340a5748fb56151f65386685c6d838386996","modified":1655541400361},{"_id":"public/images/like-query.png","hash":"d2b39a72ee62debfc6e5b33c0d532eeee190c4cf","modified":1655541400361},{"_id":"public/images/meta2/1.png","hash":"2fa2eeecf403fa05a9624e2cb3feb8001ad2dba9","modified":1655541400361},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1655541400361},{"_id":"public/images/2-col.png","hash":"2affaf2702f7313e6f5d288f8d977bf246f903eb","modified":1655541400361},{"_id":"public/images/leaf-node.png","hash":"5c140a89277b0d96fcaa314d78ebad8645274e7b","modified":1655541400361},{"_id":"public/images/3sum_2.jpeg","hash":"3ca9dd693e2ca0bc6a34a801383ee347d4d9f138","modified":1655541400361},{"_id":"public/images/date-first.png","hash":"ed69fc53b026dc3615900361b4511f08a1192e50","modified":1655541400361},{"_id":"public/images/thecon-thienthan.jpg","hash":"294c9a5fdb6c86620f535d3bec5ae82f56db9554","modified":1655541400361},{"_id":"public/images/sub-first.png","hash":"fb193a6c105c3cdd487f5d6ccf435a1fc514c115","modified":1655541400361},{"_id":"public/images/vang-con-bi-om.jpeg","hash":"143015d2b0cc68f84dd805969e629f5117dd0068","modified":1655541400361},{"_id":"public/images/vangcon.jpeg","hash":"81d20645ed37382ea561ee93fb99f915879d25c4","modified":1655541400361},{"_id":"public/images/meta2/2.png","hash":"acf16dbf3b15e3941acc63c4cbfc56aa4fb7449d","modified":1655541400361},{"_id":"public/images/Solar.png","hash":"463dbb952527b3d35c6203575eec552f62fd9d8e","modified":1655541400361},{"_id":"public/images/test/test9.jpg","hash":"9b3b6204e11a5a6f525740dd8537ae38644e3063","modified":1655541400361},{"_id":"public/images/b-tree-sql.png","hash":"b615617f48a8fb45bbe1ac33360c73c5123b46b4","modified":1655541400361},{"_id":"public/images/vangcon-doi.jpeg","hash":"2fb39289023811885464b3488aa9a5f1046b87d4","modified":1655541400361},{"_id":"public/images/meta2/5.png","hash":"bb982c8aed9c8e3f81e8d71bd6c2d01b894cafcc","modified":1655541400361},{"_id":"public/images/test/test7.jpg","hash":"8a7e05d349a3dcb07328e0a73647bd0cfb43b99f","modified":1655541400361},{"_id":"public/images/test/test8.jpg","hash":"dc21d4ad8bc3368a9f105f421b3d24947e9584ca","modified":1655541400361},{"_id":"public/images/srp.jpg","hash":"81710dc7159876b7164aa9bd7e77472f55e3a8ea","modified":1655541400361},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1655541400361},{"_id":"public/images/meta2/3.png","hash":"0bd5f388f8660ab278e5e5b840bad6825e0745a1","modified":1655541400361},{"_id":"public/images/meta2/9.png","hash":"5e4a5eb7f3a8956dc2f215fd5e253965e9ed7d73","modified":1655541400361},{"_id":"public/images/test/test6.jpg","hash":"1acfcdf222b98629a279cfe72eabc8fdf054fc9c","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGM-Italic.ttf","hash":"68700db02debd4b922304134da83b829cbfddfc9","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGL-Italic.ttf","hash":"96c97a0a098ca40802f948ae56fa37aa6683d034","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGS-Italic.ttf","hash":"7f7cdbdcc26279c04046632e22d872f111bc9399","modified":1655541400361},{"_id":"public/images/test/test4.jpg","hash":"6a5d11d06a0c15e1a20daf0fcdc64ecfe018b0ae","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGM-BoldItalic.ttf","hash":"65ddb11e75ee93909e845ab912a36717c48f1c94","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGM-Bold.ttf","hash":"a8a8df3393bccc365335fc5eb0a62a6b7ccd32b9","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGL-Bold.ttf","hash":"bfa1ed9a263ed78462f06d322de13bd5bd0906b2","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGL-Regular.ttf","hash":"2b912dd13f052f645ee19951604610bb350d50af","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGM-Regular.ttf","hash":"5e220152adefe905b2197f873d7cee99eca50e91","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGS-Regular.ttf","hash":"56fa0e33a390b704afc56af93a31576ccdbbdd9e","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGL-BoldItalic.ttf","hash":"a9a431fc7a6c3a67c98021d4035c12a07a4f1070","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGS-Bold.ttf","hash":"df202ce09cbdc70bc16b81983a13ef0f94e46f10","modified":1655541400361},{"_id":"public/lib/meslo-LG/fonts/MesloLGS-BoldItalic.ttf","hash":"d895a1bd25e36c58b7f463ebe14de09f186d5ab4","modified":1655541400361},{"_id":"public/images/meta2/7.png","hash":"b0a9c548892f127bec56bf2921f1e6e81786b186","modified":1655541400361},{"_id":"public/images/test/test3.jpg","hash":"ddaaaeb4fa04a05c83053c1f8149720d18c9c8de","modified":1655541400361},{"_id":"public/images/test/test10.jpg","hash":"df4f4c453b75dbce0d58b730053aef5068e4b3c3","modified":1655541400361},{"_id":"public/images/thecon-tuyetlo.gif","hash":"cab6a80c4530aeb097110a4265f95a2aa08817d8","modified":1655541400361},{"_id":"public/images/meta2/8.png","hash":"9f222f8dadd5976e00ed74dbdefd21debede4a5e","modified":1655541400361},{"_id":"public/images/meta2/4.png","hash":"a747f18f540a439daf4f7877801dd03917f25dbd","modified":1655541400361}],"Category":[{"name":"OS","_id":"cl4jmlsa50003p3m25k1d0bwd"},{"name":"ruby notes","_id":"cl4jmlsaf000np3m24nrshf9b"},{"name":"rails notes","_id":"cl4jmlsaj000up3m2h7hq2bif"},{"name":"RUBY","_id":"cl4jmlsb2001pp3m2e0763hdz"},{"name":"RAILS","_id":"cl4jmlsb60023p3m219lwa81e"},{"name":"PROGRAMMING","parent":"cl4jmlsb2001pp3m2e0763hdz","_id":"cl4jmlsb8002jp3m236853bx0"},{"name":"TIL","_id":"cl4jmlsba002xp3m23se00p4t"},{"name":"til","_id":"cl4jmlsbd003bp3m2hzuzf0ox"}],"Data":[],"Page":[{"title":"about","date":"2019-11-11T03:38:10.000Z","photos":["/../images/thecon.jpg","/../images/dauto-nongxu.jpg","/../images/vangnau-matngu.jpg","/../images/vangcon-doi.jpeg","/../images/vancon-tamnang.jpg","/../images/vang-con-bi-om.jpeg","/../images/theconnhinho.jpg","/../images/thecon-thienthan.jpg","/../images/thecon-tuyetlo.gif"],"_content":"\n> Nhn mt tui c ging ngi c thng tin  gii thiu khng?\n\n<!-- ![dau to nong xu](/../images/dauto-nongxu.jpg)\n\n![vang nau](/../images/vangnau-matngu.jpg)\n\n![vang con doi](/../images/vangcon-doi.jpeg)\n\n![van con tam nang](/../images/vancon-tamnang.jpg)\n\n![van con bi om](/../images/vang-con-bi-om.jpeg)\n\n![the con nhi nho](/../images/theconnhinho.jpg)\n\n![the con thien than](/../images/thecon-thienthan.jpg)\n\n![the con tuyet lo](/../images/thecon-tuyetlo.gif) -->\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2019-11-11 10:38:10\nphotos:\n- /../images/thecon.jpg\n- /../images/dauto-nongxu.jpg\n- /../images/vangnau-matngu.jpg\n- /../images/vangcon-doi.jpeg\n- /../images/vancon-tamnang.jpg\n- /../images/vang-con-bi-om.jpeg\n- /../images/theconnhinho.jpg\n- /../images/thecon-thienthan.jpg\n- /../images/thecon-tuyetlo.gif\n---\n\n> Nhn mt tui c ging ngi c thng tin  gii thiu khng?\n\n<!-- ![dau to nong xu](/../images/dauto-nongxu.jpg)\n\n![vang nau](/../images/vangnau-matngu.jpg)\n\n![vang con doi](/../images/vangcon-doi.jpeg)\n\n![van con tam nang](/../images/vancon-tamnang.jpg)\n\n![van con bi om](/../images/vang-con-bi-om.jpeg)\n\n![the con nhi nho](/../images/theconnhinho.jpg)\n\n![the con thien than](/../images/thecon-thienthan.jpg)\n\n![the con tuyet lo](/../images/thecon-tuyetlo.gif) -->\n","updated":"2022-02-01T13:05:36.679Z","path":"about/index.html","comments":1,"layout":"page","_id":"cl4jmlsa10001p3m26ir1fkvv","content":"<blockquote>\n<p>Nhn mt tui c ging ngi c thng tin  gii thiu khng?</p>\n</blockquote>\n<!-- ![dau to nong xu](/../images/dauto-nongxu.jpg)\n\n![vang nau](/../images/vangnau-matngu.jpg)\n\n![vang con doi](/../images/vangcon-doi.jpeg)\n\n![van con tam nang](/../images/vancon-tamnang.jpg)\n\n![van con bi om](/../images/vang-con-bi-om.jpeg)\n\n![the con nhi nho](/../images/theconnhinho.jpg)\n\n![the con thien than](/../images/thecon-thienthan.jpg)\n\n![the con tuyet lo](/../images/thecon-tuyetlo.gif) -->\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>Nhn mt tui c ging ngi c thng tin  gii thiu khng?</p>\n</blockquote>\n<!-- ![dau to nong xu](/../images/dauto-nongxu.jpg)\n\n![vang nau](/../images/vangnau-matngu.jpg)\n\n![vang con doi](/../images/vangcon-doi.jpeg)\n\n![van con tam nang](/../images/vancon-tamnang.jpg)\n\n![van con bi om](/../images/vang-con-bi-om.jpeg)\n\n![the con nhi nho](/../images/theconnhinho.jpg)\n\n![the con thien than](/../images/thecon-thienthan.jpg)\n\n![the con tuyet lo](/../images/thecon-tuyetlo.gif) -->\n"},{"title":"Speak","date":"2019-11-11T17:00:00.000Z","_content":"\n1. The\n\no phi **, o phi l *d*, c l **d** vi sau ko di.\n\nKhi c nhanh thnh **d**\n\n```\nthe other\n\nd o  (d c nhanh)\n```\n\n2. Be\n\n3. To\n\nc l **tu**, nhng c nhanh thnh gn nh **** qu vl\n\n```\ni go to the beach\n\nAi gu  the bts (gu  c nhanh, khng c T u tu u c)\n```\n\n4. Of\n\nc nhanh cng bin tng nhu to, khng cn **p** na. V d:\n\n```\ni'm kind of tired\n\nm, kai  tai . (very fast)\n```\n\n5. And\n\n**n**\n\n6. A\n\n****\n\n32. An\n\n**n**\n\n7. In\n\nKhng phi l \"i n in IN\" nh pht m ting vit m l pht m gn ging **n**\n\n```\nI fall in love\n\nAi phu n lp\n```\n\n8. That\n\n**rt**\n\n9. Have\n\n**hp** ch o phi *he v*\n\nvit tt:\n\nI have -> I've\n\nnghe gn tng t **P**\n\n```\nI've been married\n\np bin ma ri\n```\n\n10. I\n\n11. It\n**t** gn vi t  :V, khng phi l **t**\n\n12. For\n\n**pho**, native c nhanh th gn nh **ph**\n\n13. Not\n\n14. On\n\n15. With\n\n16. He\n\nc nhanh hnh **di**\n\n```\nwhat does he want?\n\nwhat  di want\n```\n\n17. As\n\n18. You\n\n19. Do\n\n20. At\n\n**t/t** khng phi l *t**\n","source":"speak/index.md","raw":"---\ntitle: Speak\ndate: 2019-11-12\n---\n\n1. The\n\no phi **, o phi l *d*, c l **d** vi sau ko di.\n\nKhi c nhanh thnh **d**\n\n```\nthe other\n\nd o  (d c nhanh)\n```\n\n2. Be\n\n3. To\n\nc l **tu**, nhng c nhanh thnh gn nh **** qu vl\n\n```\ni go to the beach\n\nAi gu  the bts (gu  c nhanh, khng c T u tu u c)\n```\n\n4. Of\n\nc nhanh cng bin tng nhu to, khng cn **p** na. V d:\n\n```\ni'm kind of tired\n\nm, kai  tai . (very fast)\n```\n\n5. And\n\n**n**\n\n6. A\n\n****\n\n32. An\n\n**n**\n\n7. In\n\nKhng phi l \"i n in IN\" nh pht m ting vit m l pht m gn ging **n**\n\n```\nI fall in love\n\nAi phu n lp\n```\n\n8. That\n\n**rt**\n\n9. Have\n\n**hp** ch o phi *he v*\n\nvit tt:\n\nI have -> I've\n\nnghe gn tng t **P**\n\n```\nI've been married\n\np bin ma ri\n```\n\n10. I\n\n11. It\n**t** gn vi t  :V, khng phi l **t**\n\n12. For\n\n**pho**, native c nhanh th gn nh **ph**\n\n13. Not\n\n14. On\n\n15. With\n\n16. He\n\nc nhanh hnh **di**\n\n```\nwhat does he want?\n\nwhat  di want\n```\n\n17. As\n\n18. You\n\n19. Do\n\n20. At\n\n**t/t** khng phi l *t**\n","updated":"2022-01-29T09:29:59.978Z","path":"speak/index.html","comments":1,"layout":"page","_id":"cl4jmlsco005zp3m252bmb8hx","content":"<ol>\n<li>The</li>\n</ol>\n<p>o phi <em></em>, o phi l <em>d</em>, c l <strong>d</strong> vi sau ko di.</p>\n<p>Khi c nhanh thnh <strong>d</strong></p>\n<figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">the other</span><br><span class=\"line\"></span><br><span class=\"line\">d o  <span class=\"comment\">(d c nhanh)</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><p>Be</p>\n</li>\n<li><p>To</p>\n</li>\n</ol>\n<p>c l <strong>tu</strong>, nhng c nhanh thnh gn nh <strong></strong> qu vl</p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i go <span class=\"keyword\">to</span> the beach</span><br><span class=\"line\"></span><br><span class=\"line\">Ai gu  the bts (gu  <span class=\"keyword\">c</span> nhanh, khng <span class=\"keyword\">c</span> T u tu u <span class=\"keyword\">c</span>)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>Of</li>\n</ol>\n<p>c nhanh cng bin tng nhu to, khng cn <strong>p</strong> na. V d:</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i<span class=\"symbol\">'m</span> kind <span class=\"keyword\">of</span> tired</span><br><span class=\"line\"></span><br><span class=\"line\">m, kai  tai . (very fast)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>And</li>\n</ol>\n<p><strong>n</strong></p>\n<ol start=\"6\">\n<li>A</li>\n</ol>\n<p><strong></strong></p>\n<ol start=\"32\">\n<li>An</li>\n</ol>\n<p><strong>n</strong></p>\n<ol start=\"7\">\n<li>In</li>\n</ol>\n<p>Khng phi l i n in IN nh pht m ting vit m l pht m gn ging <strong>n</strong></p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">I</span> <span class=\"string\">fall in love</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">Ai</span> <span class=\"string\">phu n lp</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li>That</li>\n</ol>\n<p><strong>rt</strong></p>\n<ol start=\"9\">\n<li>Have</li>\n</ol>\n<p><strong>hp</strong> ch o phi <em>he v</em></p>\n<p>vit tt:</p>\n<p>I have -&gt; Ive</p>\n<p>nghe gn tng t <strong>P</strong></p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">I<span class=\"symbol\">'ve</span> been married</span><br><span class=\"line\"></span><br><span class=\"line\">p bin ma ri</span><br></pre></td></tr></table></figure>\n\n<ol start=\"10\">\n<li><p>I</p>\n</li>\n<li><p>It</p>\n</li>\n</ol>\n<p><strong>t</strong> gn vi t  :V, khng phi l <strong>t</strong></p>\n<ol start=\"12\">\n<li>For</li>\n</ol>\n<p><strong>pho</strong>, native c nhanh th gn nh <strong>ph</strong></p>\n<ol start=\"13\">\n<li><p>Not</p>\n</li>\n<li><p>On</p>\n</li>\n<li><p>With</p>\n</li>\n<li><p>He</p>\n</li>\n</ol>\n<p>c nhanh hnh <strong>di</strong></p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">what</span> <span class=\"string\">does he want?</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">what</span> <span class=\"string\"> di want</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"17\">\n<li><p>As</p>\n</li>\n<li><p>You</p>\n</li>\n<li><p>Do</p>\n</li>\n<li><p>At</p>\n</li>\n</ol>\n<p><strong>t/t</strong> khng phi l <em>t*</em></p>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>The</li>\n</ol>\n<p>o phi <em></em>, o phi l <em>d</em>, c l <strong>d</strong> vi sau ko di.</p>\n<p>Khi c nhanh thnh <strong>d</strong></p>\n<figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">the other</span><br><span class=\"line\"></span><br><span class=\"line\">d o  <span class=\"comment\">(d c nhanh)</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><p>Be</p>\n</li>\n<li><p>To</p>\n</li>\n</ol>\n<p>c l <strong>tu</strong>, nhng c nhanh thnh gn nh <strong></strong> qu vl</p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i go <span class=\"keyword\">to</span> the beach</span><br><span class=\"line\"></span><br><span class=\"line\">Ai gu  the bts (gu  <span class=\"keyword\">c</span> nhanh, khng <span class=\"keyword\">c</span> T u tu u <span class=\"keyword\">c</span>)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>Of</li>\n</ol>\n<p>c nhanh cng bin tng nhu to, khng cn <strong>p</strong> na. V d:</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i<span class=\"symbol\">'m</span> kind <span class=\"keyword\">of</span> tired</span><br><span class=\"line\"></span><br><span class=\"line\">m, kai  tai . (very fast)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>And</li>\n</ol>\n<p><strong>n</strong></p>\n<ol start=\"6\">\n<li>A</li>\n</ol>\n<p><strong></strong></p>\n<ol start=\"32\">\n<li>An</li>\n</ol>\n<p><strong>n</strong></p>\n<ol start=\"7\">\n<li>In</li>\n</ol>\n<p>Khng phi l i n in IN nh pht m ting vit m l pht m gn ging <strong>n</strong></p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">I</span> <span class=\"string\">fall in love</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">Ai</span> <span class=\"string\">phu n lp</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li>That</li>\n</ol>\n<p><strong>rt</strong></p>\n<ol start=\"9\">\n<li>Have</li>\n</ol>\n<p><strong>hp</strong> ch o phi <em>he v</em></p>\n<p>vit tt:</p>\n<p>I have -&gt; Ive</p>\n<p>nghe gn tng t <strong>P</strong></p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">I<span class=\"symbol\">'ve</span> been married</span><br><span class=\"line\"></span><br><span class=\"line\">p bin ma ri</span><br></pre></td></tr></table></figure>\n\n<ol start=\"10\">\n<li><p>I</p>\n</li>\n<li><p>It</p>\n</li>\n</ol>\n<p><strong>t</strong> gn vi t  :V, khng phi l <strong>t</strong></p>\n<ol start=\"12\">\n<li>For</li>\n</ol>\n<p><strong>pho</strong>, native c nhanh th gn nh <strong>ph</strong></p>\n<ol start=\"13\">\n<li><p>Not</p>\n</li>\n<li><p>On</p>\n</li>\n<li><p>With</p>\n</li>\n<li><p>He</p>\n</li>\n</ol>\n<p>c nhanh hnh <strong>di</strong></p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">what</span> <span class=\"string\">does he want?</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">what</span> <span class=\"string\"> di want</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"17\">\n<li><p>As</p>\n</li>\n<li><p>You</p>\n</li>\n<li><p>Do</p>\n</li>\n<li><p>At</p>\n</li>\n</ol>\n<p><strong>t/t</strong> khng phi l <em>t*</em></p>\n"},{"title":"Projects","date":"2019-11-10T17:00:00.000Z","_content":"\n![the con](/../images/thecon.jpg)\n\n> Nhn mt tui c ging ngi c projects  khoe khng?\n","source":"projects/index.md","raw":"---\ntitle: Projects\ndate: 2019-11-11\n---\n\n![the con](/../images/thecon.jpg)\n\n> Nhn mt tui c ging ngi c projects  khoe khng?\n","updated":"2022-01-29T09:29:59.978Z","path":"projects/index.html","comments":1,"layout":"page","_id":"cl4jmlscq0060p3m2hmwi8dnw","content":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<blockquote>\n<p>Nhn mt tui c ging ngi c projects  khoe khng?</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<blockquote>\n<p>Nhn mt tui c ging ngi c projects  khoe khng?</p>\n</blockquote>\n"}],"Post":[{"title":"Permission Trong UNIX","date":"2017-12-31T17:00:00.000Z","draft":false,"_content":"\n## 1.File permission l g?\n\nTng t nh ngi nh ca bn, bn sng cng gia nh v thi thong c nhng v khch gh thm. C nhng vt dng trong nh m bn ch mun ring mnh bn c th s dng, cng c nhng  vt khc, th m ch bn v gia nh c php s dng, v cng c nhng  vt m bn, gia nh v c nhng v khch u c th s dng.\n\nTi nguyn trong UNIX tng t nh vy, mi th trong UNIX u l file. Vy nn c nhng file quan trng ch mnh bn c th xi, cng c nhng file m bn c th chia s thm cho 1 nhm no . Cn nhng th khng qu quan trng bn c th m ca cho ai cng c th s dng.\n\n>  l l do permission cn tn ti. Cho 1 ngi c ng vo th m h c php ng vo. Khng hn, mc tiu cao c l vy.\n\n## 2.S dng l s dng th no?\n\nHiu n gin nh th ny, nh ca bn, bn cho ti vo v cho php ti ngi gh ung nc xem tivi, nhng khng ng ngha vi vic ti mun lm g ci gh hay ci tivi cng c. Ti ch c th s dng ch khng c php thay i hay p ph  c ca bn.\n\nTrong UNIX c 3 quyn s dng:\n\n1. Quyn c (read).\n2. Quyn ghi (write).\n3. Quyn thc thi (excute).\n\n## 3.Cc loi ngi dng.\n\n1. Owner (ngi s hu file  - ngi to ra file ).\n2. Group (nhm s hu file).\n3. Other (phn cn li ca h thng c th l guest).\n\n> Ngoi ra trn UNIX th cn 1 ngi dng th 4 gi l root. y l ngi dng siu quyn lc v khng th b nh hng bi my lnh phn quyn ca bn\n\nHiu c bn nh vic bn  nh ca mnh v ngh bn c th lm mi vic vi cn nh  m khng ai c th can thip. Tuy nhin khi m s  ra th bn s thy l bn ch ang c quyn s dng t ch khng phi s hu t. Mi t ai u thuc quyn s hu ca nh nc.\n\ny chnh l root trong trng hp ny.\n\n> V vy hy tht cn thn khi s dng quyn root trn my tnh. Trong trng hp my tnh, th chng ta l ch s hu nn chng ta c th enable hay disable root i. Trn Mac th mc nh l disable.\n\n## 4.Cch phn quyn\n\n```shell\nchmod xyz file/folder\n```\n\nV d:  **chmod 007 duychinh.bin**\n\nGii thch cu lnh trn:\n- xyz l 3 s nguyn lin nhau (gi tr ca ba s ny c th l 0,1,2,3,4,5,6,7).\nVi x ng vi quyn phn cho **owner**, y ng vi quyn phn cho **group** v z l cho **everyone**.\n\n**0:** khng c quyn g c.\n\n**1:** quyn thc thi tp tin.\n\n**2:** quyn write only.\n\n**4:** quyn read only.\n\nTh hin di dng nh phn:\n\n- **0:** 0000\n- **1:** 0001\n- **2:** 0010\n- **4:** 0100\n\nVi 4 s trn ta c th cng li v ra 1 s mi vi permission c cng dn:\n\nV d: 7 = 4 + 2 + 1 => tt c cc quyn. Tnh ton tng t vi c t hp khc.\nSuy ra vi lnh **chmod 777 file_name**:\n- Ta  gn tt c quyn cho c 3 loi user (nh lit k  mc 3).\n\nHnh nh minh ho:\n\n![Branching](http://www.macinstruct.com/images/permissions/permissions1.png)\n\nTrong nhiu trng hp  c th thc hin c lnh set permission k trn, ta phi thm cu lnh **sudo**.\nvo pha trc. Trong cc bi tip theo s gii thch v  ngha ca cu lnh ny.\n\n## 5.Tham kho\n\n[1] [https://www.guru99.com/file-permissions.html](https://www.guru99.com/file-permissions.html)\n","source":"_posts/2018-01-01-file-permission-in-linux.md","raw":"---\ntitle: \"Permission Trong UNIX\"\ndate: 2018-01-01\ndraft: false\ntags: [\"UNIX\"]\ncategories: [\"OS\"]\n\n---\n\n## 1.File permission l g?\n\nTng t nh ngi nh ca bn, bn sng cng gia nh v thi thong c nhng v khch gh thm. C nhng vt dng trong nh m bn ch mun ring mnh bn c th s dng, cng c nhng  vt khc, th m ch bn v gia nh c php s dng, v cng c nhng  vt m bn, gia nh v c nhng v khch u c th s dng.\n\nTi nguyn trong UNIX tng t nh vy, mi th trong UNIX u l file. Vy nn c nhng file quan trng ch mnh bn c th xi, cng c nhng file m bn c th chia s thm cho 1 nhm no . Cn nhng th khng qu quan trng bn c th m ca cho ai cng c th s dng.\n\n>  l l do permission cn tn ti. Cho 1 ngi c ng vo th m h c php ng vo. Khng hn, mc tiu cao c l vy.\n\n## 2.S dng l s dng th no?\n\nHiu n gin nh th ny, nh ca bn, bn cho ti vo v cho php ti ngi gh ung nc xem tivi, nhng khng ng ngha vi vic ti mun lm g ci gh hay ci tivi cng c. Ti ch c th s dng ch khng c php thay i hay p ph  c ca bn.\n\nTrong UNIX c 3 quyn s dng:\n\n1. Quyn c (read).\n2. Quyn ghi (write).\n3. Quyn thc thi (excute).\n\n## 3.Cc loi ngi dng.\n\n1. Owner (ngi s hu file  - ngi to ra file ).\n2. Group (nhm s hu file).\n3. Other (phn cn li ca h thng c th l guest).\n\n> Ngoi ra trn UNIX th cn 1 ngi dng th 4 gi l root. y l ngi dng siu quyn lc v khng th b nh hng bi my lnh phn quyn ca bn\n\nHiu c bn nh vic bn  nh ca mnh v ngh bn c th lm mi vic vi cn nh  m khng ai c th can thip. Tuy nhin khi m s  ra th bn s thy l bn ch ang c quyn s dng t ch khng phi s hu t. Mi t ai u thuc quyn s hu ca nh nc.\n\ny chnh l root trong trng hp ny.\n\n> V vy hy tht cn thn khi s dng quyn root trn my tnh. Trong trng hp my tnh, th chng ta l ch s hu nn chng ta c th enable hay disable root i. Trn Mac th mc nh l disable.\n\n## 4.Cch phn quyn\n\n```shell\nchmod xyz file/folder\n```\n\nV d:  **chmod 007 duychinh.bin**\n\nGii thch cu lnh trn:\n- xyz l 3 s nguyn lin nhau (gi tr ca ba s ny c th l 0,1,2,3,4,5,6,7).\nVi x ng vi quyn phn cho **owner**, y ng vi quyn phn cho **group** v z l cho **everyone**.\n\n**0:** khng c quyn g c.\n\n**1:** quyn thc thi tp tin.\n\n**2:** quyn write only.\n\n**4:** quyn read only.\n\nTh hin di dng nh phn:\n\n- **0:** 0000\n- **1:** 0001\n- **2:** 0010\n- **4:** 0100\n\nVi 4 s trn ta c th cng li v ra 1 s mi vi permission c cng dn:\n\nV d: 7 = 4 + 2 + 1 => tt c cc quyn. Tnh ton tng t vi c t hp khc.\nSuy ra vi lnh **chmod 777 file_name**:\n- Ta  gn tt c quyn cho c 3 loi user (nh lit k  mc 3).\n\nHnh nh minh ho:\n\n![Branching](http://www.macinstruct.com/images/permissions/permissions1.png)\n\nTrong nhiu trng hp  c th thc hin c lnh set permission k trn, ta phi thm cu lnh **sudo**.\nvo pha trc. Trong cc bi tip theo s gii thch v  ngha ca cu lnh ny.\n\n## 5.Tham kho\n\n[1] [https://www.guru99.com/file-permissions.html](https://www.guru99.com/file-permissions.html)\n","slug":"2018-01-01-file-permission-in-linux","published":1,"updated":"2022-01-29T09:29:59.925Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmls9t0000p3m29zu12hwq","content":"<h2 id=\"1-File-permission-la-gi\"><a href=\"#1-File-permission-la-gi\" class=\"headerlink\" title=\"1.File permission l g?\"></a>1.File permission l g?</h2><p>Tng t nh ngi nh ca bn, bn sng cng gia nh v thi thong c nhng v khch gh thm. C nhng vt dng trong nh m bn ch mun ring mnh bn c th s dng, cng c nhng  vt khc, th m ch bn v gia nh c php s dng, v cng c nhng  vt m bn, gia nh v c nhng v khch u c th s dng.</p>\n<p>Ti nguyn trong UNIX tng t nh vy, mi th trong UNIX u l file. Vy nn c nhng file quan trng ch mnh bn c th xi, cng c nhng file m bn c th chia s thm cho 1 nhm no . Cn nhng th khng qu quan trng bn c th m ca cho ai cng c th s dng.</p>\n<blockquote>\n<p> l l do permission cn tn ti. Cho 1 ngi c ng vo th m h c php ng vo. Khng hn, mc tiu cao c l vy.</p>\n</blockquote>\n<h2 id=\"2-Su-dung-la-su-dung-the-nao\"><a href=\"#2-Su-dung-la-su-dung-the-nao\" class=\"headerlink\" title=\"2.S dng l s dng th no?\"></a>2.S dng l s dng th no?</h2><p>Hiu n gin nh th ny, nh ca bn, bn cho ti vo v cho php ti ngi gh ung nc xem tivi, nhng khng ng ngha vi vic ti mun lm g ci gh hay ci tivi cng c. Ti ch c th s dng ch khng c php thay i hay p ph  c ca bn.</p>\n<p>Trong UNIX c 3 quyn s dng:</p>\n<ol>\n<li>Quyn c (read).</li>\n<li>Quyn ghi (write).</li>\n<li>Quyn thc thi (excute).</li>\n</ol>\n<h2 id=\"3-Cac-loai-nguoi-dung\"><a href=\"#3-Cac-loai-nguoi-dung\" class=\"headerlink\" title=\"3.Cc loi ngi dng.\"></a>3.Cc loi ngi dng.</h2><ol>\n<li>Owner (ngi s hu file  - ngi to ra file ).</li>\n<li>Group (nhm s hu file).</li>\n<li>Other (phn cn li ca h thng c th l guest).</li>\n</ol>\n<blockquote>\n<p>Ngoi ra trn UNIX th cn 1 ngi dng th 4 gi l root. y l ngi dng siu quyn lc v khng th b nh hng bi my lnh phn quyn ca bn</p>\n</blockquote>\n<p>Hiu c bn nh vic bn  nh ca mnh v ngh bn c th lm mi vic vi cn nh  m khng ai c th can thip. Tuy nhin khi m s  ra th bn s thy l bn ch ang c quyn s dng t ch khng phi s hu t. Mi t ai u thuc quyn s hu ca nh nc.</p>\n<p>y chnh l root trong trng hp ny.</p>\n<blockquote>\n<p>V vy hy tht cn thn khi s dng quyn root trn my tnh. Trong trng hp my tnh, th chng ta l ch s hu nn chng ta c th enable hay disable root i. Trn Mac th mc nh l disable.</p>\n</blockquote>\n<h2 id=\"4-Cach-phan-quyen\"><a href=\"#4-Cach-phan-quyen\" class=\"headerlink\" title=\"4.Cch phn quyn\"></a>4.Cch phn quyn</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod xyz file/folder</span><br></pre></td></tr></table></figure>\n\n<p>V d:  <strong>chmod 007 duychinh.bin</strong></p>\n<p>Gii thch cu lnh trn:</p>\n<ul>\n<li>xyz l 3 s nguyn lin nhau (gi tr ca ba s ny c th l 0,1,2,3,4,5,6,7).<br>Vi x ng vi quyn phn cho <strong>owner</strong>, y ng vi quyn phn cho <strong>group</strong> v z l cho <strong>everyone</strong>.</li>\n</ul>\n<p><strong>0:</strong> khng c quyn g c.</p>\n<p><strong>1:</strong> quyn thc thi tp tin.</p>\n<p><strong>2:</strong> quyn write only.</p>\n<p><strong>4:</strong> quyn read only.</p>\n<p>Th hin di dng nh phn:</p>\n<ul>\n<li><strong>0:</strong> 0000</li>\n<li><strong>1:</strong> 0001</li>\n<li><strong>2:</strong> 0010</li>\n<li><strong>4:</strong> 0100</li>\n</ul>\n<p>Vi 4 s trn ta c th cng li v ra 1 s mi vi permission c cng dn:</p>\n<p>V d: 7 = 4 + 2 + 1 =&gt; tt c cc quyn. Tnh ton tng t vi c t hp khc.<br>Suy ra vi lnh <strong>chmod 777 file_name</strong>:</p>\n<ul>\n<li>Ta  gn tt c quyn cho c 3 loi user (nh lit k  mc 3).</li>\n</ul>\n<p>Hnh nh minh ho:</p>\n<p><img src=\"http://www.macinstruct.com/images/permissions/permissions1.png\" alt=\"Branching\"></p>\n<p>Trong nhiu trng hp  c th thc hin c lnh set permission k trn, ta phi thm cu lnh <strong>sudo</strong>.<br>vo pha trc. Trong cc bi tip theo s gii thch v  ngha ca cu lnh ny.</p>\n<h2 id=\"5-Tham-khao\"><a href=\"#5-Tham-khao\" class=\"headerlink\" title=\"5.Tham kho\"></a>5.Tham kho</h2><p>[1] <a href=\"https://www.guru99.com/file-permissions.html\" target=\"_blank\" rel=\"noopener\">https://www.guru99.com/file-permissions.html</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-File-permission-la-gi\"><a href=\"#1-File-permission-la-gi\" class=\"headerlink\" title=\"1.File permission l g?\"></a>1.File permission l g?</h2><p>Tng t nh ngi nh ca bn, bn sng cng gia nh v thi thong c nhng v khch gh thm. C nhng vt dng trong nh m bn ch mun ring mnh bn c th s dng, cng c nhng  vt khc, th m ch bn v gia nh c php s dng, v cng c nhng  vt m bn, gia nh v c nhng v khch u c th s dng.</p>\n<p>Ti nguyn trong UNIX tng t nh vy, mi th trong UNIX u l file. Vy nn c nhng file quan trng ch mnh bn c th xi, cng c nhng file m bn c th chia s thm cho 1 nhm no . Cn nhng th khng qu quan trng bn c th m ca cho ai cng c th s dng.</p>\n<blockquote>\n<p> l l do permission cn tn ti. Cho 1 ngi c ng vo th m h c php ng vo. Khng hn, mc tiu cao c l vy.</p>\n</blockquote>\n<h2 id=\"2-Su-dung-la-su-dung-the-nao\"><a href=\"#2-Su-dung-la-su-dung-the-nao\" class=\"headerlink\" title=\"2.S dng l s dng th no?\"></a>2.S dng l s dng th no?</h2><p>Hiu n gin nh th ny, nh ca bn, bn cho ti vo v cho php ti ngi gh ung nc xem tivi, nhng khng ng ngha vi vic ti mun lm g ci gh hay ci tivi cng c. Ti ch c th s dng ch khng c php thay i hay p ph  c ca bn.</p>\n<p>Trong UNIX c 3 quyn s dng:</p>\n<ol>\n<li>Quyn c (read).</li>\n<li>Quyn ghi (write).</li>\n<li>Quyn thc thi (excute).</li>\n</ol>\n<h2 id=\"3-Cac-loai-nguoi-dung\"><a href=\"#3-Cac-loai-nguoi-dung\" class=\"headerlink\" title=\"3.Cc loi ngi dng.\"></a>3.Cc loi ngi dng.</h2><ol>\n<li>Owner (ngi s hu file  - ngi to ra file ).</li>\n<li>Group (nhm s hu file).</li>\n<li>Other (phn cn li ca h thng c th l guest).</li>\n</ol>\n<blockquote>\n<p>Ngoi ra trn UNIX th cn 1 ngi dng th 4 gi l root. y l ngi dng siu quyn lc v khng th b nh hng bi my lnh phn quyn ca bn</p>\n</blockquote>\n<p>Hiu c bn nh vic bn  nh ca mnh v ngh bn c th lm mi vic vi cn nh  m khng ai c th can thip. Tuy nhin khi m s  ra th bn s thy l bn ch ang c quyn s dng t ch khng phi s hu t. Mi t ai u thuc quyn s hu ca nh nc.</p>\n<p>y chnh l root trong trng hp ny.</p>\n<blockquote>\n<p>V vy hy tht cn thn khi s dng quyn root trn my tnh. Trong trng hp my tnh, th chng ta l ch s hu nn chng ta c th enable hay disable root i. Trn Mac th mc nh l disable.</p>\n</blockquote>\n<h2 id=\"4-Cach-phan-quyen\"><a href=\"#4-Cach-phan-quyen\" class=\"headerlink\" title=\"4.Cch phn quyn\"></a>4.Cch phn quyn</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod xyz file/folder</span><br></pre></td></tr></table></figure>\n\n<p>V d:  <strong>chmod 007 duychinh.bin</strong></p>\n<p>Gii thch cu lnh trn:</p>\n<ul>\n<li>xyz l 3 s nguyn lin nhau (gi tr ca ba s ny c th l 0,1,2,3,4,5,6,7).<br>Vi x ng vi quyn phn cho <strong>owner</strong>, y ng vi quyn phn cho <strong>group</strong> v z l cho <strong>everyone</strong>.</li>\n</ul>\n<p><strong>0:</strong> khng c quyn g c.</p>\n<p><strong>1:</strong> quyn thc thi tp tin.</p>\n<p><strong>2:</strong> quyn write only.</p>\n<p><strong>4:</strong> quyn read only.</p>\n<p>Th hin di dng nh phn:</p>\n<ul>\n<li><strong>0:</strong> 0000</li>\n<li><strong>1:</strong> 0001</li>\n<li><strong>2:</strong> 0010</li>\n<li><strong>4:</strong> 0100</li>\n</ul>\n<p>Vi 4 s trn ta c th cng li v ra 1 s mi vi permission c cng dn:</p>\n<p>V d: 7 = 4 + 2 + 1 =&gt; tt c cc quyn. Tnh ton tng t vi c t hp khc.<br>Suy ra vi lnh <strong>chmod 777 file_name</strong>:</p>\n<ul>\n<li>Ta  gn tt c quyn cho c 3 loi user (nh lit k  mc 3).</li>\n</ul>\n<p>Hnh nh minh ho:</p>\n<p><img src=\"http://www.macinstruct.com/images/permissions/permissions1.png\" alt=\"Branching\"></p>\n<p>Trong nhiu trng hp  c th thc hin c lnh set permission k trn, ta phi thm cu lnh <strong>sudo</strong>.<br>vo pha trc. Trong cc bi tip theo s gii thch v  ngha ca cu lnh ny.</p>\n<h2 id=\"5-Tham-khao\"><a href=\"#5-Tham-khao\" class=\"headerlink\" title=\"5.Tham kho\"></a>5.Tham kho</h2><p>[1] <a href=\"https://www.guru99.com/file-permissions.html\" target=\"_blank\" rel=\"noopener\">https://www.guru99.com/file-permissions.html</a></p>\n"},{"title":"Lnh Open Trn macOS","date":"2018-01-22T17:00:00.000Z","draft":false,"label":"#til","_content":"\n## 1.Folders\n\nNgoi vic c th m c th mc bn ang lm vic, n c th m c cc th mc khc trong my tnh ca bn ch bng vic bn cung cp ng dn pha sau cu lnh open thay v du chm nh chng ta  lm  trn. Bn cng c th m cc th mc n hay m nhiu th mc cng mt lc.\nDi y l mt vi v d cho nhng g chng ta  tho lun  trn:\n\n**open ~/**\n\n**open ~/etc ~/desktop ~/documents**\n\n## 2.File\n\nOpen cng c th m tp tin, li tip tc suy ngh n gin, chng ta c th thy cu lnh ny ging nh mt c click chut double vo file hay folder th u c chc nng m n ln. V d:\n\n**open ~/desktop/meo.rb**\n\nN s m file meo.rb. Bn cng c th s dng iu ny vi nhiu tp.\n\n**open ~/desktop/meo.rb ~/desktop/meo.jpg**\n\n## 3.Applications\n\nGi s ti c file meo.rb, by gi file  s c m mc nh bi phn mm Xcode trong my ca ti. Khi , ti c th override li phn mm mc nh  m file ny bng cu lnh sau:\n\n**open -a Sublime ~/desktop/meo.rb**\n\n## 4.URLs\n\nOpen cng c th m cc ng dn URL vi c php n gin nh sau:\n\n**open https://google.com.vn**\n\nVi cu lnh ny th ng dn bn cung cp s c m bng trnh duyt mc nh. Bn cng c th s dng trnh duyt khc lm trnh duyt mc nh bng tu chn a nh sau:\n\n**open -a Firefox https://google.com.vn**\n","source":"_posts/2019-01-23-open-command-in-macos.md","raw":"---\ntitle: \"Lnh Open Trn macOS\"\ndate: 2018-01-23\ndraft: false\ntags: [\"UNIX\"]\nlabel: \"#til\"\ncategories: [\"OS\"]\n\n---\n\n## 1.Folders\n\nNgoi vic c th m c th mc bn ang lm vic, n c th m c cc th mc khc trong my tnh ca bn ch bng vic bn cung cp ng dn pha sau cu lnh open thay v du chm nh chng ta  lm  trn. Bn cng c th m cc th mc n hay m nhiu th mc cng mt lc.\nDi y l mt vi v d cho nhng g chng ta  tho lun  trn:\n\n**open ~/**\n\n**open ~/etc ~/desktop ~/documents**\n\n## 2.File\n\nOpen cng c th m tp tin, li tip tc suy ngh n gin, chng ta c th thy cu lnh ny ging nh mt c click chut double vo file hay folder th u c chc nng m n ln. V d:\n\n**open ~/desktop/meo.rb**\n\nN s m file meo.rb. Bn cng c th s dng iu ny vi nhiu tp.\n\n**open ~/desktop/meo.rb ~/desktop/meo.jpg**\n\n## 3.Applications\n\nGi s ti c file meo.rb, by gi file  s c m mc nh bi phn mm Xcode trong my ca ti. Khi , ti c th override li phn mm mc nh  m file ny bng cu lnh sau:\n\n**open -a Sublime ~/desktop/meo.rb**\n\n## 4.URLs\n\nOpen cng c th m cc ng dn URL vi c php n gin nh sau:\n\n**open https://google.com.vn**\n\nVi cu lnh ny th ng dn bn cung cp s c m bng trnh duyt mc nh. Bn cng c th s dng trnh duyt khc lm trnh duyt mc nh bng tu chn a nh sau:\n\n**open -a Firefox https://google.com.vn**\n","slug":"2019-01-23-open-command-in-macos","published":1,"updated":"2022-01-29T09:29:59.925Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsa20002p3m2dd183ajn","content":"<h2 id=\"1-Folders\"><a href=\"#1-Folders\" class=\"headerlink\" title=\"1.Folders\"></a>1.Folders</h2><p>Ngoi vic c th m c th mc bn ang lm vic, n c th m c cc th mc khc trong my tnh ca bn ch bng vic bn cung cp ng dn pha sau cu lnh open thay v du chm nh chng ta  lm  trn. Bn cng c th m cc th mc n hay m nhiu th mc cng mt lc.<br>Di y l mt vi v d cho nhng g chng ta  tho lun  trn:</p>\n<p><strong>open ~/</strong></p>\n<p><strong>open ~/etc ~/desktop ~/documents</strong></p>\n<h2 id=\"2-File\"><a href=\"#2-File\" class=\"headerlink\" title=\"2.File\"></a>2.File</h2><p>Open cng c th m tp tin, li tip tc suy ngh n gin, chng ta c th thy cu lnh ny ging nh mt c click chut double vo file hay folder th u c chc nng m n ln. V d:</p>\n<p><strong>open ~/desktop/meo.rb</strong></p>\n<p>N s m file meo.rb. Bn cng c th s dng iu ny vi nhiu tp.</p>\n<p><strong>open ~/desktop/meo.rb ~/desktop/meo.jpg</strong></p>\n<h2 id=\"3-Applications\"><a href=\"#3-Applications\" class=\"headerlink\" title=\"3.Applications\"></a>3.Applications</h2><p>Gi s ti c file meo.rb, by gi file  s c m mc nh bi phn mm Xcode trong my ca ti. Khi , ti c th override li phn mm mc nh  m file ny bng cu lnh sau:</p>\n<p><strong>open -a Sublime ~/desktop/meo.rb</strong></p>\n<h2 id=\"4-URLs\"><a href=\"#4-URLs\" class=\"headerlink\" title=\"4.URLs\"></a>4.URLs</h2><p>Open cng c th m cc ng dn URL vi c php n gin nh sau:</p>\n<p><strong>open <a href=\"https://google.com.vn\" target=\"_blank\" rel=\"noopener\">https://google.com.vn</a></strong></p>\n<p>Vi cu lnh ny th ng dn bn cung cp s c m bng trnh duyt mc nh. Bn cng c th s dng trnh duyt khc lm trnh duyt mc nh bng tu chn a nh sau:</p>\n<p><strong>open -a Firefox <a href=\"https://google.com.vn\" target=\"_blank\" rel=\"noopener\">https://google.com.vn</a></strong></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Folders\"><a href=\"#1-Folders\" class=\"headerlink\" title=\"1.Folders\"></a>1.Folders</h2><p>Ngoi vic c th m c th mc bn ang lm vic, n c th m c cc th mc khc trong my tnh ca bn ch bng vic bn cung cp ng dn pha sau cu lnh open thay v du chm nh chng ta  lm  trn. Bn cng c th m cc th mc n hay m nhiu th mc cng mt lc.<br>Di y l mt vi v d cho nhng g chng ta  tho lun  trn:</p>\n<p><strong>open ~/</strong></p>\n<p><strong>open ~/etc ~/desktop ~/documents</strong></p>\n<h2 id=\"2-File\"><a href=\"#2-File\" class=\"headerlink\" title=\"2.File\"></a>2.File</h2><p>Open cng c th m tp tin, li tip tc suy ngh n gin, chng ta c th thy cu lnh ny ging nh mt c click chut double vo file hay folder th u c chc nng m n ln. V d:</p>\n<p><strong>open ~/desktop/meo.rb</strong></p>\n<p>N s m file meo.rb. Bn cng c th s dng iu ny vi nhiu tp.</p>\n<p><strong>open ~/desktop/meo.rb ~/desktop/meo.jpg</strong></p>\n<h2 id=\"3-Applications\"><a href=\"#3-Applications\" class=\"headerlink\" title=\"3.Applications\"></a>3.Applications</h2><p>Gi s ti c file meo.rb, by gi file  s c m mc nh bi phn mm Xcode trong my ca ti. Khi , ti c th override li phn mm mc nh  m file ny bng cu lnh sau:</p>\n<p><strong>open -a Sublime ~/desktop/meo.rb</strong></p>\n<h2 id=\"4-URLs\"><a href=\"#4-URLs\" class=\"headerlink\" title=\"4.URLs\"></a>4.URLs</h2><p>Open cng c th m cc ng dn URL vi c php n gin nh sau:</p>\n<p><strong>open <a href=\"https://google.com.vn\" target=\"_blank\" rel=\"noopener\">https://google.com.vn</a></strong></p>\n<p>Vi cu lnh ny th ng dn bn cung cp s c m bng trnh duyt mc nh. Bn cng c th s dng trnh duyt khc lm trnh duyt mc nh bng tu chn a nh sau:</p>\n<p><strong>open -a Firefox <a href=\"https://google.com.vn\" target=\"_blank\" rel=\"noopener\">https://google.com.vn</a></strong></p>\n"},{"title":"Bash File Trn UNIX","date":"2018-12-29T17:00:00.000Z","draft":false,"mytag":"OS","_content":"\n## 1.Mt s khi nim c bn.\n\n**UNIX** l mt h iu hnh ra i  rt lu, n l tin thn ca hai nhnh h iu hnh rt ni ting khc, bn thng mi chnh l **macOS** v bn m ngun m chnh l **GNU**. Cho n nhng nm 90, c mt s kt hp gia cc phn mm ca **GNU** v phn core ca mt d n m ngun m khc tn l **Linux**  to thnh mt h iu hnh hon chnh mang tn l **GNU/Linux**, ngy nay a s chng ta ch thng gi tt l **Linux**\n\nQua  chng ta c th thy, **Linux** v cc h iu hnh con chu ca **UNIX** c rt nhiu im chung.\n\n**Shell**: y cng l mt khi nim quan trng cn tm hiu. Trc khi i vo ch  chnh ca bi vit,  tm hiu mt cch su sc v Shell, c l s cn n mt bi vit khc, nn  y ti ch m t mt cch bao qut v n. **Shell** l phn nm gia ng dng v phn core ca h iu hnh.\n\nHy tng tng chng ta c mt chng sch gm ba quyn vi quyn trn cng l nhng ng dng ang chy trn my tnh ca bn v d nh word, excel, cun  di cng chnh l phn nhn ca h iu hnh.  cc ng dng ca bn c th s dng cc ti nguyn ca my tnh nh b nh, ram, IO... iu tt yu phi xy ra  l ng dng ca bn phi giao tip c vi h iu hnh.\n\nTuy nhin, vn  gp phi  l h iu hnh ch hiu m my, mt th qu phc tp  ngi dng khi s dng ng dng c th thao tc c.  l l do ra i ca quyn sch  gia m chng ta gi l **Shell**. Nhim v ca n l g?  l chuyn i cc lnh t quyn sch u tin thnh cc lnh m quyn sch th ba c th hiu v thc hin c (Thng dch).\n\nV d terminal c xem l mt **Shell CLI**, mi khi bn g mt lnh bt k trn terminal, n s chuyn i cu lnh bn vit thnh mt cu lnh khc m phn nhn h iu hnh c th hiu v thc hin c.\n\n## 2.iu g xy ra khi bn g mt lnh trn terminal?\n\n bao gi bn t hi chuyn g s xy ra tip theo khi ta g mt lnh trong terminal? V d:\n\n```\nls -a\n```\n\nChng ta s thng t an i bn thn rng nhng cu lnh   c h iu hnh lu li nh mt cun t in  n khi c gi chng s bit tm cu tr li  u. Thc t suy ngh trn khng hn  sai, mi th trong UNIX u l file, nu bn g dng lnh:\n\n```\necho $PATH\n```\n\nKt qu bn nhn c chnh l mt danh sch cc th mc m terminal s tm kim cu lnh bn g theo th t t tri qua phi. Vi mt h iu hnh thun khit cha ci t thm cc phn mm bn ngoi th **PATH** s c gi tr mc nh nh sau:\n\n```\n/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\n```\n\nCn trn my tnh ca ti th PATH li c gi tr l:\n\n```\n/Users/admin/.rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\n```\n\nC mt s khc bit nh, ta c th thy chui **PATH** trn my tnh ca ti c phn u chui c thm bi mt th mc .rbenv no . y chnh l mu cht ca vn , l do xut hin ca phn m rng nu trn  l ti  ci t thm Ruby vo my tnh ca mnh bng cng c rbenv.\n\nHin nhin, khi h iu hnh pure (cha c ci t g khc cc ng dng mc nh), th n khng th hiu c cu lnh **ruby  v**. Vic ci t Ruby vo my tnh ng ngha vi vic ti  ti cc file lin quan vo mt th mc no , v  ch cho Terminal bit phi vo u  tm kim cc lnh lin quan n Ruby va ci t, chui **PATH** s c ghi  b sung thm ng dn vo th mc cha cc file thc thi ca Ruby. T y, mi khi bn g bt c mt cu lnh no lin quan n Ruby, terminal s theo chui **PATH** vo tng th mc  tm kim v thc thi cu lnh .\n\nSuy ra, c mt li rt hay xy ra cho nhng ngi mi s dng Ruby,  l h thm v xo Ruby kh thng xuyn dn n ng dn (**PATH**) b sai v Terminal khng th tm c th mc c th thc thi cu lnh mt cch chnh xc.\n\nTrong Terminal, bn c th ni thm mt th mc vo chui **PATH** bng cu lnh sau:\n\n**export PATH=\"$PATH:new_path\"**\n\n## 3.Mt s file quan trng trn Macos.\n\nKhi qu trnh lm vic vi terminal nhiu hn v chng ta cn ci t mt s th cn thit trong qu trnh lm vic, chng ta s dng cc **dot file**. Ni dung ca cc **dot file** ny l cc cu lnh shell script (chc nng ca cu lnh ny c th chng ta s tm hiu sau).\n\nKhi bn m mt terminal m n i hi bn phi login (v d nh khi bn truy cp vo mt my tnh khc thng qua SSH, bn cn nhp tn ng nhp v mt khu) th  l mt **Login Shell**.\nVi trng hp Login Shell th **dot file** c load ln l file **.bash_profile** (hay l **.profile**  trn Ubuntu).\nTrong mt trng hp khc, bn m mt terminal m khng cn ng nhp th **dot file** c load l  **.bashrc**.\n\nNote: Khc vi nhng ngi anh em khc, terminal trn Macos s chy **dot file** **.bash_profile** khi bn m mt ca s mi nn ti thng t nhng cu hnh cn thit vo mt file duy nht  l **.bash_profile**. Tt nhin, t **.bash_profile** ta c th load cc **dot file** khc nu cn thit (chng ta s bn v n trong tng lai).\n\nTh t cc **dot file** c khi chy trn macOS:\n\n```\n#=> etc/profile\n#=> etc/bashrc\n#=> ~/.bash_profile\n#=> ~/.bash_login (nu ~/.bash_profile khng tn ti).\n#=> ~/.profile (nu ~/.bash_profile v ~/.bash_login u khng tn ti).\n```\n\n## 4.Cc file quan trng trn Linux\n\nNh  trnh by  trn, c mt s ging nhau ng k gia **macOS** v **Linux**. V vy, ti ch c mt s iu b sung nh sau: Trn Linux, thng thng chng ta s c cc **dot file** sau y:\n\n```\n#=> ~/.bash_login (chy khi login shell)\n#=> ~/.bashrc (chy khi khng login)\n#=> ~/.bash_logout (chy khi logout shell)\n#=> ~/bash_history (lch s trn shell)\n```\n","source":"_posts/2019-01-30-bash-file-in-macos-and-linux.md","raw":"---\ntitle: \"Bash File Trn UNIX\"\ndate: 2018-12-30\ndraft: false\ntags: [\"UNIX\"]\ncategories: [\"OS\"]\nmytag: \"OS\"\n\n---\n\n## 1.Mt s khi nim c bn.\n\n**UNIX** l mt h iu hnh ra i  rt lu, n l tin thn ca hai nhnh h iu hnh rt ni ting khc, bn thng mi chnh l **macOS** v bn m ngun m chnh l **GNU**. Cho n nhng nm 90, c mt s kt hp gia cc phn mm ca **GNU** v phn core ca mt d n m ngun m khc tn l **Linux**  to thnh mt h iu hnh hon chnh mang tn l **GNU/Linux**, ngy nay a s chng ta ch thng gi tt l **Linux**\n\nQua  chng ta c th thy, **Linux** v cc h iu hnh con chu ca **UNIX** c rt nhiu im chung.\n\n**Shell**: y cng l mt khi nim quan trng cn tm hiu. Trc khi i vo ch  chnh ca bi vit,  tm hiu mt cch su sc v Shell, c l s cn n mt bi vit khc, nn  y ti ch m t mt cch bao qut v n. **Shell** l phn nm gia ng dng v phn core ca h iu hnh.\n\nHy tng tng chng ta c mt chng sch gm ba quyn vi quyn trn cng l nhng ng dng ang chy trn my tnh ca bn v d nh word, excel, cun  di cng chnh l phn nhn ca h iu hnh.  cc ng dng ca bn c th s dng cc ti nguyn ca my tnh nh b nh, ram, IO... iu tt yu phi xy ra  l ng dng ca bn phi giao tip c vi h iu hnh.\n\nTuy nhin, vn  gp phi  l h iu hnh ch hiu m my, mt th qu phc tp  ngi dng khi s dng ng dng c th thao tc c.  l l do ra i ca quyn sch  gia m chng ta gi l **Shell**. Nhim v ca n l g?  l chuyn i cc lnh t quyn sch u tin thnh cc lnh m quyn sch th ba c th hiu v thc hin c (Thng dch).\n\nV d terminal c xem l mt **Shell CLI**, mi khi bn g mt lnh bt k trn terminal, n s chuyn i cu lnh bn vit thnh mt cu lnh khc m phn nhn h iu hnh c th hiu v thc hin c.\n\n## 2.iu g xy ra khi bn g mt lnh trn terminal?\n\n bao gi bn t hi chuyn g s xy ra tip theo khi ta g mt lnh trong terminal? V d:\n\n```\nls -a\n```\n\nChng ta s thng t an i bn thn rng nhng cu lnh   c h iu hnh lu li nh mt cun t in  n khi c gi chng s bit tm cu tr li  u. Thc t suy ngh trn khng hn  sai, mi th trong UNIX u l file, nu bn g dng lnh:\n\n```\necho $PATH\n```\n\nKt qu bn nhn c chnh l mt danh sch cc th mc m terminal s tm kim cu lnh bn g theo th t t tri qua phi. Vi mt h iu hnh thun khit cha ci t thm cc phn mm bn ngoi th **PATH** s c gi tr mc nh nh sau:\n\n```\n/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\n```\n\nCn trn my tnh ca ti th PATH li c gi tr l:\n\n```\n/Users/admin/.rbenv/shims:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\n```\n\nC mt s khc bit nh, ta c th thy chui **PATH** trn my tnh ca ti c phn u chui c thm bi mt th mc .rbenv no . y chnh l mu cht ca vn , l do xut hin ca phn m rng nu trn  l ti  ci t thm Ruby vo my tnh ca mnh bng cng c rbenv.\n\nHin nhin, khi h iu hnh pure (cha c ci t g khc cc ng dng mc nh), th n khng th hiu c cu lnh **ruby  v**. Vic ci t Ruby vo my tnh ng ngha vi vic ti  ti cc file lin quan vo mt th mc no , v  ch cho Terminal bit phi vo u  tm kim cc lnh lin quan n Ruby va ci t, chui **PATH** s c ghi  b sung thm ng dn vo th mc cha cc file thc thi ca Ruby. T y, mi khi bn g bt c mt cu lnh no lin quan n Ruby, terminal s theo chui **PATH** vo tng th mc  tm kim v thc thi cu lnh .\n\nSuy ra, c mt li rt hay xy ra cho nhng ngi mi s dng Ruby,  l h thm v xo Ruby kh thng xuyn dn n ng dn (**PATH**) b sai v Terminal khng th tm c th mc c th thc thi cu lnh mt cch chnh xc.\n\nTrong Terminal, bn c th ni thm mt th mc vo chui **PATH** bng cu lnh sau:\n\n**export PATH=\"$PATH:new_path\"**\n\n## 3.Mt s file quan trng trn Macos.\n\nKhi qu trnh lm vic vi terminal nhiu hn v chng ta cn ci t mt s th cn thit trong qu trnh lm vic, chng ta s dng cc **dot file**. Ni dung ca cc **dot file** ny l cc cu lnh shell script (chc nng ca cu lnh ny c th chng ta s tm hiu sau).\n\nKhi bn m mt terminal m n i hi bn phi login (v d nh khi bn truy cp vo mt my tnh khc thng qua SSH, bn cn nhp tn ng nhp v mt khu) th  l mt **Login Shell**.\nVi trng hp Login Shell th **dot file** c load ln l file **.bash_profile** (hay l **.profile**  trn Ubuntu).\nTrong mt trng hp khc, bn m mt terminal m khng cn ng nhp th **dot file** c load l  **.bashrc**.\n\nNote: Khc vi nhng ngi anh em khc, terminal trn Macos s chy **dot file** **.bash_profile** khi bn m mt ca s mi nn ti thng t nhng cu hnh cn thit vo mt file duy nht  l **.bash_profile**. Tt nhin, t **.bash_profile** ta c th load cc **dot file** khc nu cn thit (chng ta s bn v n trong tng lai).\n\nTh t cc **dot file** c khi chy trn macOS:\n\n```\n#=> etc/profile\n#=> etc/bashrc\n#=> ~/.bash_profile\n#=> ~/.bash_login (nu ~/.bash_profile khng tn ti).\n#=> ~/.profile (nu ~/.bash_profile v ~/.bash_login u khng tn ti).\n```\n\n## 4.Cc file quan trng trn Linux\n\nNh  trnh by  trn, c mt s ging nhau ng k gia **macOS** v **Linux**. V vy, ti ch c mt s iu b sung nh sau: Trn Linux, thng thng chng ta s c cc **dot file** sau y:\n\n```\n#=> ~/.bash_login (chy khi login shell)\n#=> ~/.bashrc (chy khi khng login)\n#=> ~/.bash_logout (chy khi logout shell)\n#=> ~/bash_history (lch s trn shell)\n```\n","slug":"2019-01-30-bash-file-in-macos-and-linux","published":1,"updated":"2022-01-29T09:29:59.925Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsa60005p3m2gcd2eidk","content":"<h2 id=\"1-Mot-so-khai-niem-co-ban\"><a href=\"#1-Mot-so-khai-niem-co-ban\" class=\"headerlink\" title=\"1.Mt s khi nim c bn.\"></a>1.Mt s khi nim c bn.</h2><p><strong>UNIX</strong> l mt h iu hnh ra i  rt lu, n l tin thn ca hai nhnh h iu hnh rt ni ting khc, bn thng mi chnh l <strong>macOS</strong> v bn m ngun m chnh l <strong>GNU</strong>. Cho n nhng nm 90, c mt s kt hp gia cc phn mm ca <strong>GNU</strong> v phn core ca mt d n m ngun m khc tn l <strong>Linux</strong>  to thnh mt h iu hnh hon chnh mang tn l <strong>GNU/Linux</strong>, ngy nay a s chng ta ch thng gi tt l <strong>Linux</strong></p>\n<p>Qua  chng ta c th thy, <strong>Linux</strong> v cc h iu hnh con chu ca <strong>UNIX</strong> c rt nhiu im chung.</p>\n<p><strong>Shell</strong>: y cng l mt khi nim quan trng cn tm hiu. Trc khi i vo ch  chnh ca bi vit,  tm hiu mt cch su sc v Shell, c l s cn n mt bi vit khc, nn  y ti ch m t mt cch bao qut v n. <strong>Shell</strong> l phn nm gia ng dng v phn core ca h iu hnh.</p>\n<p>Hy tng tng chng ta c mt chng sch gm ba quyn vi quyn trn cng l nhng ng dng ang chy trn my tnh ca bn v d nh word, excel, cun  di cng chnh l phn nhn ca h iu hnh.  cc ng dng ca bn c th s dng cc ti nguyn ca my tnh nh b nh, ram, IO iu tt yu phi xy ra  l ng dng ca bn phi giao tip c vi h iu hnh.</p>\n<p>Tuy nhin, vn  gp phi  l h iu hnh ch hiu m my, mt th qu phc tp  ngi dng khi s dng ng dng c th thao tc c.  l l do ra i ca quyn sch  gia m chng ta gi l <strong>Shell</strong>. Nhim v ca n l g?  l chuyn i cc lnh t quyn sch u tin thnh cc lnh m quyn sch th ba c th hiu v thc hin c (Thng dch).</p>\n<p>V d terminal c xem l mt <strong>Shell CLI</strong>, mi khi bn g mt lnh bt k trn terminal, n s chuyn i cu lnh bn vit thnh mt cu lnh khc m phn nhn h iu hnh c th hiu v thc hin c.</p>\n<h2 id=\"2-Dieu-gi-xay-ra-khi-ban-go-mot-lenh-tren-terminal\"><a href=\"#2-Dieu-gi-xay-ra-khi-ban-go-mot-lenh-tren-terminal\" class=\"headerlink\" title=\"2.iu g xy ra khi bn g mt lnh trn terminal?\"></a>2.iu g xy ra khi bn g mt lnh trn terminal?</h2><p> bao gi bn t hi chuyn g s xy ra tip theo khi ta g mt lnh trong terminal? V d:</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">ls -a</span></span><br></pre></td></tr></table></figure>\n\n<p>Chng ta s thng t an i bn thn rng nhng cu lnh   c h iu hnh lu li nh mt cun t in  n khi c gi chng s bit tm cu tr li  u. Thc t suy ngh trn khng hn  sai, mi th trong UNIX u l file, nu bn g dng lnh:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$PATH</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu bn nhn c chnh l mt danh sch cc th mc m terminal s tm kim cu lnh bn g theo th t t tri qua phi. Vi mt h iu hnh thun khit cha ci t thm cc phn mm bn ngoi th <strong>PATH</strong> s c gi tr mc nh nh sau:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/bin:/</span>usr<span class=\"regexp\">/bin:/</span><span class=\"string\">bin:</span><span class=\"regexp\">/usr/</span><span class=\"string\">sbin:</span>/sbin</span><br></pre></td></tr></table></figure>\n\n<p>Cn trn my tnh ca ti th PATH li c gi tr l:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"regexp\">/Users/</span>admin<span class=\"regexp\">/.rbenv/</span><span class=\"string\">shims:</span><span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/bin:/</span>usr<span class=\"regexp\">/bin:/</span><span class=\"string\">bin:</span><span class=\"regexp\">/usr/</span><span class=\"string\">sbin:</span>/sbin</span><br></pre></td></tr></table></figure>\n\n<p>C mt s khc bit nh, ta c th thy chui <strong>PATH</strong> trn my tnh ca ti c phn u chui c thm bi mt th mc .rbenv no . y chnh l mu cht ca vn , l do xut hin ca phn m rng nu trn  l ti  ci t thm Ruby vo my tnh ca mnh bng cng c rbenv.</p>\n<p>Hin nhin, khi h iu hnh pure (cha c ci t g khc cc ng dng mc nh), th n khng th hiu c cu lnh <strong>ruby  v</strong>. Vic ci t Ruby vo my tnh ng ngha vi vic ti  ti cc file lin quan vo mt th mc no , v  ch cho Terminal bit phi vo u  tm kim cc lnh lin quan n Ruby va ci t, chui <strong>PATH</strong> s c ghi  b sung thm ng dn vo th mc cha cc file thc thi ca Ruby. T y, mi khi bn g bt c mt cu lnh no lin quan n Ruby, terminal s theo chui <strong>PATH</strong> vo tng th mc  tm kim v thc thi cu lnh .</p>\n<p>Suy ra, c mt li rt hay xy ra cho nhng ngi mi s dng Ruby,  l h thm v xo Ruby kh thng xuyn dn n ng dn (<strong>PATH</strong>) b sai v Terminal khng th tm c th mc c th thc thi cu lnh mt cch chnh xc.</p>\n<p>Trong Terminal, bn c th ni thm mt th mc vo chui <strong>PATH</strong> bng cu lnh sau:</p>\n<p><strong>export PATH=$PATH:new_path</strong></p>\n<h2 id=\"3-Mot-so-file-quan-trong-tren-Macos\"><a href=\"#3-Mot-so-file-quan-trong-tren-Macos\" class=\"headerlink\" title=\"3.Mt s file quan trng trn Macos.\"></a>3.Mt s file quan trng trn Macos.</h2><p>Khi qu trnh lm vic vi terminal nhiu hn v chng ta cn ci t mt s th cn thit trong qu trnh lm vic, chng ta s dng cc <strong>dot file</strong>. Ni dung ca cc <strong>dot file</strong> ny l cc cu lnh shell script (chc nng ca cu lnh ny c th chng ta s tm hiu sau).</p>\n<p>Khi bn m mt terminal m n i hi bn phi login (v d nh khi bn truy cp vo mt my tnh khc thng qua SSH, bn cn nhp tn ng nhp v mt khu) th  l mt <strong>Login Shell</strong>.<br>Vi trng hp Login Shell th <strong>dot file</strong> c load ln l file <strong>.bash_profile</strong> (hay l <strong>.profile</strong>  trn Ubuntu).<br>Trong mt trng hp khc, bn m mt terminal m khng cn ng nhp th <strong>dot file</strong> c load l  <strong>.bashrc</strong>.</p>\n<p>Note: Khc vi nhng ngi anh em khc, terminal trn Macos s chy <strong>dot file</strong> <strong>.bash_profile</strong> khi bn m mt ca s mi nn ti thng t nhng cu hnh cn thit vo mt file duy nht  l <strong>.bash_profile</strong>. Tt nhin, t <strong>.bash_profile</strong> ta c th load cc <strong>dot file</strong> khc nu cn thit (chng ta s bn v n trong tng lai).</p>\n<p>Th t cc <strong>dot file</strong> c khi chy trn macOS:</p>\n<figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#=&gt; etc/profile</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; etc/bashrc</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bash_profile</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bash_login (nu ~/.bash_profile khng tn ti).</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.profile (nu ~/.bash_profile v ~/.bash_login u khng tn ti).</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Cac-file-quan-trong-tren-Linux\"><a href=\"#4-Cac-file-quan-trong-tren-Linux\" class=\"headerlink\" title=\"4.Cc file quan trng trn Linux\"></a>4.Cc file quan trng trn Linux</h2><p>Nh  trnh by  trn, c mt s ging nhau ng k gia <strong>macOS</strong> v <strong>Linux</strong>. V vy, ti ch c mt s iu b sung nh sau: Trn Linux, thng thng chng ta s c cc <strong>dot file</strong> sau y:</p>\n<figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bash_login (chy khi login shell)</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bashrc (chy khi khng login)</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bash_logout (chy khi logout shell)</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/bash_history (lch s trn shell)</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Mot-so-khai-niem-co-ban\"><a href=\"#1-Mot-so-khai-niem-co-ban\" class=\"headerlink\" title=\"1.Mt s khi nim c bn.\"></a>1.Mt s khi nim c bn.</h2><p><strong>UNIX</strong> l mt h iu hnh ra i  rt lu, n l tin thn ca hai nhnh h iu hnh rt ni ting khc, bn thng mi chnh l <strong>macOS</strong> v bn m ngun m chnh l <strong>GNU</strong>. Cho n nhng nm 90, c mt s kt hp gia cc phn mm ca <strong>GNU</strong> v phn core ca mt d n m ngun m khc tn l <strong>Linux</strong>  to thnh mt h iu hnh hon chnh mang tn l <strong>GNU/Linux</strong>, ngy nay a s chng ta ch thng gi tt l <strong>Linux</strong></p>\n<p>Qua  chng ta c th thy, <strong>Linux</strong> v cc h iu hnh con chu ca <strong>UNIX</strong> c rt nhiu im chung.</p>\n<p><strong>Shell</strong>: y cng l mt khi nim quan trng cn tm hiu. Trc khi i vo ch  chnh ca bi vit,  tm hiu mt cch su sc v Shell, c l s cn n mt bi vit khc, nn  y ti ch m t mt cch bao qut v n. <strong>Shell</strong> l phn nm gia ng dng v phn core ca h iu hnh.</p>\n<p>Hy tng tng chng ta c mt chng sch gm ba quyn vi quyn trn cng l nhng ng dng ang chy trn my tnh ca bn v d nh word, excel, cun  di cng chnh l phn nhn ca h iu hnh.  cc ng dng ca bn c th s dng cc ti nguyn ca my tnh nh b nh, ram, IO iu tt yu phi xy ra  l ng dng ca bn phi giao tip c vi h iu hnh.</p>\n<p>Tuy nhin, vn  gp phi  l h iu hnh ch hiu m my, mt th qu phc tp  ngi dng khi s dng ng dng c th thao tc c.  l l do ra i ca quyn sch  gia m chng ta gi l <strong>Shell</strong>. Nhim v ca n l g?  l chuyn i cc lnh t quyn sch u tin thnh cc lnh m quyn sch th ba c th hiu v thc hin c (Thng dch).</p>\n<p>V d terminal c xem l mt <strong>Shell CLI</strong>, mi khi bn g mt lnh bt k trn terminal, n s chuyn i cu lnh bn vit thnh mt cu lnh khc m phn nhn h iu hnh c th hiu v thc hin c.</p>\n<h2 id=\"2-Dieu-gi-xay-ra-khi-ban-go-mot-lenh-tren-terminal\"><a href=\"#2-Dieu-gi-xay-ra-khi-ban-go-mot-lenh-tren-terminal\" class=\"headerlink\" title=\"2.iu g xy ra khi bn g mt lnh trn terminal?\"></a>2.iu g xy ra khi bn g mt lnh trn terminal?</h2><p> bao gi bn t hi chuyn g s xy ra tip theo khi ta g mt lnh trong terminal? V d:</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">ls -a</span></span><br></pre></td></tr></table></figure>\n\n<p>Chng ta s thng t an i bn thn rng nhng cu lnh   c h iu hnh lu li nh mt cun t in  n khi c gi chng s bit tm cu tr li  u. Thc t suy ngh trn khng hn  sai, mi th trong UNIX u l file, nu bn g dng lnh:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$PATH</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu bn nhn c chnh l mt danh sch cc th mc m terminal s tm kim cu lnh bn g theo th t t tri qua phi. Vi mt h iu hnh thun khit cha ci t thm cc phn mm bn ngoi th <strong>PATH</strong> s c gi tr mc nh nh sau:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/bin:/</span>usr<span class=\"regexp\">/bin:/</span><span class=\"string\">bin:</span><span class=\"regexp\">/usr/</span><span class=\"string\">sbin:</span>/sbin</span><br></pre></td></tr></table></figure>\n\n<p>Cn trn my tnh ca ti th PATH li c gi tr l:</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"regexp\">/Users/</span>admin<span class=\"regexp\">/.rbenv/</span><span class=\"string\">shims:</span><span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/bin:/</span>usr<span class=\"regexp\">/bin:/</span><span class=\"string\">bin:</span><span class=\"regexp\">/usr/</span><span class=\"string\">sbin:</span>/sbin</span><br></pre></td></tr></table></figure>\n\n<p>C mt s khc bit nh, ta c th thy chui <strong>PATH</strong> trn my tnh ca ti c phn u chui c thm bi mt th mc .rbenv no . y chnh l mu cht ca vn , l do xut hin ca phn m rng nu trn  l ti  ci t thm Ruby vo my tnh ca mnh bng cng c rbenv.</p>\n<p>Hin nhin, khi h iu hnh pure (cha c ci t g khc cc ng dng mc nh), th n khng th hiu c cu lnh <strong>ruby  v</strong>. Vic ci t Ruby vo my tnh ng ngha vi vic ti  ti cc file lin quan vo mt th mc no , v  ch cho Terminal bit phi vo u  tm kim cc lnh lin quan n Ruby va ci t, chui <strong>PATH</strong> s c ghi  b sung thm ng dn vo th mc cha cc file thc thi ca Ruby. T y, mi khi bn g bt c mt cu lnh no lin quan n Ruby, terminal s theo chui <strong>PATH</strong> vo tng th mc  tm kim v thc thi cu lnh .</p>\n<p>Suy ra, c mt li rt hay xy ra cho nhng ngi mi s dng Ruby,  l h thm v xo Ruby kh thng xuyn dn n ng dn (<strong>PATH</strong>) b sai v Terminal khng th tm c th mc c th thc thi cu lnh mt cch chnh xc.</p>\n<p>Trong Terminal, bn c th ni thm mt th mc vo chui <strong>PATH</strong> bng cu lnh sau:</p>\n<p><strong>export PATH=$PATH:new_path</strong></p>\n<h2 id=\"3-Mot-so-file-quan-trong-tren-Macos\"><a href=\"#3-Mot-so-file-quan-trong-tren-Macos\" class=\"headerlink\" title=\"3.Mt s file quan trng trn Macos.\"></a>3.Mt s file quan trng trn Macos.</h2><p>Khi qu trnh lm vic vi terminal nhiu hn v chng ta cn ci t mt s th cn thit trong qu trnh lm vic, chng ta s dng cc <strong>dot file</strong>. Ni dung ca cc <strong>dot file</strong> ny l cc cu lnh shell script (chc nng ca cu lnh ny c th chng ta s tm hiu sau).</p>\n<p>Khi bn m mt terminal m n i hi bn phi login (v d nh khi bn truy cp vo mt my tnh khc thng qua SSH, bn cn nhp tn ng nhp v mt khu) th  l mt <strong>Login Shell</strong>.<br>Vi trng hp Login Shell th <strong>dot file</strong> c load ln l file <strong>.bash_profile</strong> (hay l <strong>.profile</strong>  trn Ubuntu).<br>Trong mt trng hp khc, bn m mt terminal m khng cn ng nhp th <strong>dot file</strong> c load l  <strong>.bashrc</strong>.</p>\n<p>Note: Khc vi nhng ngi anh em khc, terminal trn Macos s chy <strong>dot file</strong> <strong>.bash_profile</strong> khi bn m mt ca s mi nn ti thng t nhng cu hnh cn thit vo mt file duy nht  l <strong>.bash_profile</strong>. Tt nhin, t <strong>.bash_profile</strong> ta c th load cc <strong>dot file</strong> khc nu cn thit (chng ta s bn v n trong tng lai).</p>\n<p>Th t cc <strong>dot file</strong> c khi chy trn macOS:</p>\n<figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#=&gt; etc/profile</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; etc/bashrc</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bash_profile</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bash_login (nu ~/.bash_profile khng tn ti).</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.profile (nu ~/.bash_profile v ~/.bash_login u khng tn ti).</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Cac-file-quan-trong-tren-Linux\"><a href=\"#4-Cac-file-quan-trong-tren-Linux\" class=\"headerlink\" title=\"4.Cc file quan trng trn Linux\"></a>4.Cc file quan trng trn Linux</h2><p>Nh  trnh by  trn, c mt s ging nhau ng k gia <strong>macOS</strong> v <strong>Linux</strong>. V vy, ti ch c mt s iu b sung nh sau: Trn Linux, thng thng chng ta s c cc <strong>dot file</strong> sau y:</p>\n<figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bash_login (chy khi login shell)</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bashrc (chy khi khng login)</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/.bash_logout (chy khi logout shell)</span></span><br><span class=\"line\"><span class=\"meta\">#=&gt; ~/bash_history (lch s trn shell)</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Length, Count V Size","date":"2018-06-27T17:00:00.000Z","_content":"\n## 1.Tng quan\n\nV c bn, y l ba phng thc c Ruby cung cp, v d nhin, n hon ton c th s dng trong rails. Mt cch thng xuyn nht, bn c th thy ngi ta s dng nhng phng thc ny cho mt mng d liu bt k trong Ruby hay mt mng record trong Rails.  ngha ca n l tr v kch thc ca mng/hash. V d:\n\n```ruby\narray = Array.new(3,1)\n#=> To 1 mng tn array c 3 phn t u c gi tr l 1.\narray.size, array.length, array.count\n#=> Kt qu tr v cng l 3.\n```\n\nNhng mi chuyn khng dng li  y, nu chng ch cng c chung mt chc nng th khng c l do g  chng cng tn ti.\n\n## 2.Trong ruby\n\nNgoi chc nng tnh kch thc ca mt mng hay mt hash nh  c  cp  trn, Size c th c s dng vi c i tng dng chui v dng s nguyn.\nVi chui, Size s tr v kt qu l s lng k t ca chui. Cn vi s nguyn, n s tr v s bite m i tng  nm gi trn b nh. V d:\n\n```ruby\nstr_temp = \"hduychinh\"\nstr_temp.size\n#=> Kt qu tr v  di chui l 9.\nint_temp = 12\nint_temp.size\n#=> Kt qu tr v l 8, ng vi 8 bytes m int_temp lu tr trn b nh.\n```\n\nLength km hn size mt cht, Length ch c th s dng thm cho cc i tng dng chui  tr v s lng k t trong chui, m khng th s dng trn s nguyn.\n\nCui cng l Count, n khng c chc nng g b sung so vi phn   cp. Tuy nhin, mt im mnh ca Count  l khi s dng vi mng/hash th n c th nhn tham s chuyn vo. V d:\n\n```ruby\nc = [1, 2, 3, 3]\nc.count 3\n#=> Kt qu tr v l 2.\nc.count { |i| i > 1 }\n#=> Kt qu tr v l 3.\n```\n\n## 3.Trong Active Record\n\nKhi s dng Count thc cht l bn ang s dng lnh sql **select count(*) from table_names**  truy vn ra s lng m chng ta ang cn tm hiu. Th hai, Count khng c lu tr li, iu  c ngha mi ln bn chy hm Count th n s truy vn vo c s d liu m khng h quan tm l bn c gi lnh Count trc  hay khng. Th ba, Count l lnh duy nht trong ba lnh trn c th gi trc tip thng qua mt model class, v d nh: **Cat.count**.\n\nKhi s dng Length, iu u tin  l load ton b record m bn ang nh m s lng vo b nh ri tnh ton. T ln gi th hai, n s ly li kt qu c ch khng load d liu ln na. y thc s l mt iu ti t nu bn c mt c s d liu ln, n c th load hng triu record vo b nh.\n\n```ruby\nCat.all.length\n#=> Cat Load (0.2ms)  SELECT \"cats\".* FROM \"cats\"\n```\n\nKhi s dng Size, iu u tin ca n l tm xem kt qu ca truy vn  c trong b nh hay cha, nu c ri th n s ly ra v s dng, cn nu cha c, n s s dng mt cu truy vn SQL vo c s d liu  m s lng. iu ny tht s tuyt vi, nh mt s kt hp gia length v count.\n","source":"_posts/2019-01-28-count-vs-length-size-in-ruby-and-ror.md","raw":"---\ntitle: \"Length, Count V Size\"\ndate: 2018-06-28\n# draft: false\ntags: [\"RUBY\", \"RAILS\"]\n# categories: [\"ruby notes\"]\n\n---\n\n## 1.Tng quan\n\nV c bn, y l ba phng thc c Ruby cung cp, v d nhin, n hon ton c th s dng trong rails. Mt cch thng xuyn nht, bn c th thy ngi ta s dng nhng phng thc ny cho mt mng d liu bt k trong Ruby hay mt mng record trong Rails.  ngha ca n l tr v kch thc ca mng/hash. V d:\n\n```ruby\narray = Array.new(3,1)\n#=> To 1 mng tn array c 3 phn t u c gi tr l 1.\narray.size, array.length, array.count\n#=> Kt qu tr v cng l 3.\n```\n\nNhng mi chuyn khng dng li  y, nu chng ch cng c chung mt chc nng th khng c l do g  chng cng tn ti.\n\n## 2.Trong ruby\n\nNgoi chc nng tnh kch thc ca mt mng hay mt hash nh  c  cp  trn, Size c th c s dng vi c i tng dng chui v dng s nguyn.\nVi chui, Size s tr v kt qu l s lng k t ca chui. Cn vi s nguyn, n s tr v s bite m i tng  nm gi trn b nh. V d:\n\n```ruby\nstr_temp = \"hduychinh\"\nstr_temp.size\n#=> Kt qu tr v  di chui l 9.\nint_temp = 12\nint_temp.size\n#=> Kt qu tr v l 8, ng vi 8 bytes m int_temp lu tr trn b nh.\n```\n\nLength km hn size mt cht, Length ch c th s dng thm cho cc i tng dng chui  tr v s lng k t trong chui, m khng th s dng trn s nguyn.\n\nCui cng l Count, n khng c chc nng g b sung so vi phn   cp. Tuy nhin, mt im mnh ca Count  l khi s dng vi mng/hash th n c th nhn tham s chuyn vo. V d:\n\n```ruby\nc = [1, 2, 3, 3]\nc.count 3\n#=> Kt qu tr v l 2.\nc.count { |i| i > 1 }\n#=> Kt qu tr v l 3.\n```\n\n## 3.Trong Active Record\n\nKhi s dng Count thc cht l bn ang s dng lnh sql **select count(*) from table_names**  truy vn ra s lng m chng ta ang cn tm hiu. Th hai, Count khng c lu tr li, iu  c ngha mi ln bn chy hm Count th n s truy vn vo c s d liu m khng h quan tm l bn c gi lnh Count trc  hay khng. Th ba, Count l lnh duy nht trong ba lnh trn c th gi trc tip thng qua mt model class, v d nh: **Cat.count**.\n\nKhi s dng Length, iu u tin  l load ton b record m bn ang nh m s lng vo b nh ri tnh ton. T ln gi th hai, n s ly li kt qu c ch khng load d liu ln na. y thc s l mt iu ti t nu bn c mt c s d liu ln, n c th load hng triu record vo b nh.\n\n```ruby\nCat.all.length\n#=> Cat Load (0.2ms)  SELECT \"cats\".* FROM \"cats\"\n```\n\nKhi s dng Size, iu u tin ca n l tm xem kt qu ca truy vn  c trong b nh hay cha, nu c ri th n s ly ra v s dng, cn nu cha c, n s s dng mt cu truy vn SQL vo c s d liu  m s lng. iu ny tht s tuyt vi, nh mt s kt hp gia length v count.\n","slug":"2019-01-28-count-vs-length-size-in-ruby-and-ror","published":1,"updated":"2022-01-29T09:29:59.925Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsa70006p3m21i8zbbmd","content":"<h2 id=\"1-Tong-quan\"><a href=\"#1-Tong-quan\" class=\"headerlink\" title=\"1.Tng quan\"></a>1.Tng quan</h2><p>V c bn, y l ba phng thc c Ruby cung cp, v d nhin, n hon ton c th s dng trong rails. Mt cch thng xuyn nht, bn c th thy ngi ta s dng nhng phng thc ny cho mt mng d liu bt k trong Ruby hay mt mng record trong Rails.  ngha ca n l tr v kch thc ca mng/hash. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array = Array.new(<span class=\"number\">3</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\">#=&gt; To 1 mng tn array c 3 phn t u c gi tr l 1.</span></span><br><span class=\"line\">array.size, array.length, array.count</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v cng l 3.</span></span><br></pre></td></tr></table></figure>\n\n<p>Nhng mi chuyn khng dng li  y, nu chng ch cng c chung mt chc nng th khng c l do g  chng cng tn ti.</p>\n<h2 id=\"2-Trong-ruby\"><a href=\"#2-Trong-ruby\" class=\"headerlink\" title=\"2.Trong ruby\"></a>2.Trong ruby</h2><p>Ngoi chc nng tnh kch thc ca mt mng hay mt hash nh  c  cp  trn, Size c th c s dng vi c i tng dng chui v dng s nguyn.<br>Vi chui, Size s tr v kt qu l s lng k t ca chui. Cn vi s nguyn, n s tr v s bite m i tng  nm gi trn b nh. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str_temp = <span class=\"string\">\"hduychinh\"</span></span><br><span class=\"line\">str_temp.size</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v  di chui l 9.</span></span><br><span class=\"line\">int_temp = <span class=\"number\">12</span></span><br><span class=\"line\">int_temp.size</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 8, ng vi 8 bytes m int_temp lu tr trn b nh.</span></span><br></pre></td></tr></table></figure>\n\n<p>Length km hn size mt cht, Length ch c th s dng thm cho cc i tng dng chui  tr v s lng k t trong chui, m khng th s dng trn s nguyn.</p>\n<p>Cui cng l Count, n khng c chc nng g b sung so vi phn   cp. Tuy nhin, mt im mnh ca Count  l khi s dng vi mng/hash th n c th nhn tham s chuyn vo. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">c.count <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 2.</span></span><br><span class=\"line\">c.count &#123; <span class=\"params\">|i|</span> i &gt; <span class=\"number\">1</span> &#125;</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 3.</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Trong-Active-Record\"><a href=\"#3-Trong-Active-Record\" class=\"headerlink\" title=\"3.Trong Active Record\"></a>3.Trong Active Record</h2><p>Khi s dng Count thc cht l bn ang s dng lnh sql <strong>select count(*) from table_names</strong>  truy vn ra s lng m chng ta ang cn tm hiu. Th hai, Count khng c lu tr li, iu  c ngha mi ln bn chy hm Count th n s truy vn vo c s d liu m khng h quan tm l bn c gi lnh Count trc  hay khng. Th ba, Count l lnh duy nht trong ba lnh trn c th gi trc tip thng qua mt model class, v d nh: <strong>Cat.count</strong>.</p>\n<p>Khi s dng Length, iu u tin  l load ton b record m bn ang nh m s lng vo b nh ri tnh ton. T ln gi th hai, n s ly li kt qu c ch khng load d liu ln na. y thc s l mt iu ti t nu bn c mt c s d liu ln, n c th load hng triu record vo b nh.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.all.length</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Cat Load (0.2ms)  SELECT \"cats\".* FROM \"cats\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Khi s dng Size, iu u tin ca n l tm xem kt qu ca truy vn  c trong b nh hay cha, nu c ri th n s ly ra v s dng, cn nu cha c, n s s dng mt cu truy vn SQL vo c s d liu  m s lng. iu ny tht s tuyt vi, nh mt s kt hp gia length v count.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Tong-quan\"><a href=\"#1-Tong-quan\" class=\"headerlink\" title=\"1.Tng quan\"></a>1.Tng quan</h2><p>V c bn, y l ba phng thc c Ruby cung cp, v d nhin, n hon ton c th s dng trong rails. Mt cch thng xuyn nht, bn c th thy ngi ta s dng nhng phng thc ny cho mt mng d liu bt k trong Ruby hay mt mng record trong Rails.  ngha ca n l tr v kch thc ca mng/hash. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array = Array.new(<span class=\"number\">3</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\">#=&gt; To 1 mng tn array c 3 phn t u c gi tr l 1.</span></span><br><span class=\"line\">array.size, array.length, array.count</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v cng l 3.</span></span><br></pre></td></tr></table></figure>\n\n<p>Nhng mi chuyn khng dng li  y, nu chng ch cng c chung mt chc nng th khng c l do g  chng cng tn ti.</p>\n<h2 id=\"2-Trong-ruby\"><a href=\"#2-Trong-ruby\" class=\"headerlink\" title=\"2.Trong ruby\"></a>2.Trong ruby</h2><p>Ngoi chc nng tnh kch thc ca mt mng hay mt hash nh  c  cp  trn, Size c th c s dng vi c i tng dng chui v dng s nguyn.<br>Vi chui, Size s tr v kt qu l s lng k t ca chui. Cn vi s nguyn, n s tr v s bite m i tng  nm gi trn b nh. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str_temp = <span class=\"string\">\"hduychinh\"</span></span><br><span class=\"line\">str_temp.size</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v  di chui l 9.</span></span><br><span class=\"line\">int_temp = <span class=\"number\">12</span></span><br><span class=\"line\">int_temp.size</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 8, ng vi 8 bytes m int_temp lu tr trn b nh.</span></span><br></pre></td></tr></table></figure>\n\n<p>Length km hn size mt cht, Length ch c th s dng thm cho cc i tng dng chui  tr v s lng k t trong chui, m khng th s dng trn s nguyn.</p>\n<p>Cui cng l Count, n khng c chc nng g b sung so vi phn   cp. Tuy nhin, mt im mnh ca Count  l khi s dng vi mng/hash th n c th nhn tham s chuyn vo. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">c.count <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 2.</span></span><br><span class=\"line\">c.count &#123; <span class=\"params\">|i|</span> i &gt; <span class=\"number\">1</span> &#125;</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Kt qu tr v l 3.</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Trong-Active-Record\"><a href=\"#3-Trong-Active-Record\" class=\"headerlink\" title=\"3.Trong Active Record\"></a>3.Trong Active Record</h2><p>Khi s dng Count thc cht l bn ang s dng lnh sql <strong>select count(*) from table_names</strong>  truy vn ra s lng m chng ta ang cn tm hiu. Th hai, Count khng c lu tr li, iu  c ngha mi ln bn chy hm Count th n s truy vn vo c s d liu m khng h quan tm l bn c gi lnh Count trc  hay khng. Th ba, Count l lnh duy nht trong ba lnh trn c th gi trc tip thng qua mt model class, v d nh: <strong>Cat.count</strong>.</p>\n<p>Khi s dng Length, iu u tin  l load ton b record m bn ang nh m s lng vo b nh ri tnh ton. T ln gi th hai, n s ly li kt qu c ch khng load d liu ln na. y thc s l mt iu ti t nu bn c mt c s d liu ln, n c th load hng triu record vo b nh.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.all.length</span><br><span class=\"line\"><span class=\"comment\">#=&gt; Cat Load (0.2ms)  SELECT \"cats\".* FROM \"cats\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Khi s dng Size, iu u tin ca n l tm xem kt qu ca truy vn  c trong b nh hay cha, nu c ri th n s ly ra v s dng, cn nu cha c, n s s dng mt cu truy vn SQL vo c s d liu  m s lng. iu ny tht s tuyt vi, nh mt s kt hp gia length v count.</p>\n"},{"title":"Pass Reference Vs Pass Value, Ruby!","date":"2019-02-18T17:00:00.000Z","draft":false,"_content":"\n## 1. nh ngha\n\n1. Khng c mt nh ngha chung no v **pass by value** v **pass by reference**, tu thuc vo tng ngn ng, chng li c cch x l v nhng nh ngha khc nhau v cch x l bin v vng nh.\n\n2. **Pass value**: Hiu mt cch n gin nht,  l khi bin bn truyn vo mt method no , d trong  logic l g v n h hip ci bin bn b vo ra lm sao, th khi ra ngoi hm , bin bn  truyn  trn vn cn nguyn seal, nguyn kin, khng h si nh (khng h thay i v gi tr).\n\n3. **Pass reference**: ngc li vi s t t trong **Pass value**, khi bn quyt nh truyn tham s di dng mt reference, ng ngha vi vic bn chp nhn rng ci bin b bng, yu t xinh xinh ca bn s tha h b logic trong hm hnh h, v khi ra khi hng n vn mang y  thng tch  b gy ra trong hm (gi tr bin truyn vo s b thay i theo logic trong hm).\n\nNote: khi cn i hc, ti  c mt s nhm ln v value v reference trong C, khi  ti  ngh truyn tn bin bnh thng thi l **Pass value**, cn truyn con tr l **Pass reference**. Nhng thc ra  l khng ng:\n\n>The C language is pass-by-value without exception. Passing a pointer as a parameter does not mean pass-by-reference.\n\n## 2. Pass value v reference trong ruby\n\n| Qua thi gian tm hiu th ti nhn thy rng trong ruby khng h c khi nim r rng v reference hay value, nn mi kt lun  y ch l mang tnh quy chiu da vo nhng  chng ta  ni trong mc 1.\n\nXem v d sau y:\n\n```ruby\ndef xinchao(a)\n  a = \"Nguyen Van A\"\nend\n\ntemp = \"Nguyen Van B\"\n\nputs \"Kq: Xin Chao #{xinchao(temp)}\"\n\n#=> \"Kq: Xin Chao Nguyen Van A\"\n```\n\nT v d trn ta c th rt ra kt lun l ruby **Pass reference**? V nh bn  thy kt qu l \"Nguyen Van A\", gi tr m chng ta gn trong hm **xinchao**.\n\nCu tr li l khng, y l mt v d cm by nu ta khng cn thn, khc vi mt s ngn ng khc bt buc phi s dng **return**  tr v kt qu trong function, ruby cho php ta s dng gi tr cui cng bn vit ra trong function . Tc kt qu tr v trn n gin l kt qu thc hin ca function xinchao, ch cn vic bin temp c thay i gi tr hay khng th chng ta phi thay th li mt cht nh di y  kim chng:\n\n```ruby\ndef xinchao(a)\n  a = \"Nguyen Van A\"\nend\n\ntemp = \"Nguyen Van B\"\n\nxinchao(temp)\n\nputs \"Kq: Xin Chao #{temp}\"\n\n#=> \"Kq: Xin Chao Nguyen Van B\"\n```\n\nOh, vy ruby l **Pass by value**? ng, nh  tng  cp, ruby khng c 1 nh ngha thun tu no v hai khi nim m chng ta ang tho lun, nn da trn nhng  chnh m chng ta  thng nht trong mc 1, ta c th gi Ruby l 1 mt ngn ng **Pass by value**.\n\nVy c trng hp ngoi l no khng? Nh C++ c c **Pass by value** v **Pass by reference**  thi? Theo ti c c th l khng @@.\n","source":"_posts/2019-02-19-truyen-tham-tri-va-truyen-tham-chieu.md","raw":"---\ntitle: \"Pass Reference Vs Pass Value, Ruby!\"\ndate: 2019-02-19\ndraft: false\ntags: [\"RUBY\"]\n---\n\n## 1. nh ngha\n\n1. Khng c mt nh ngha chung no v **pass by value** v **pass by reference**, tu thuc vo tng ngn ng, chng li c cch x l v nhng nh ngha khc nhau v cch x l bin v vng nh.\n\n2. **Pass value**: Hiu mt cch n gin nht,  l khi bin bn truyn vo mt method no , d trong  logic l g v n h hip ci bin bn b vo ra lm sao, th khi ra ngoi hm , bin bn  truyn  trn vn cn nguyn seal, nguyn kin, khng h si nh (khng h thay i v gi tr).\n\n3. **Pass reference**: ngc li vi s t t trong **Pass value**, khi bn quyt nh truyn tham s di dng mt reference, ng ngha vi vic bn chp nhn rng ci bin b bng, yu t xinh xinh ca bn s tha h b logic trong hm hnh h, v khi ra khi hng n vn mang y  thng tch  b gy ra trong hm (gi tr bin truyn vo s b thay i theo logic trong hm).\n\nNote: khi cn i hc, ti  c mt s nhm ln v value v reference trong C, khi  ti  ngh truyn tn bin bnh thng thi l **Pass value**, cn truyn con tr l **Pass reference**. Nhng thc ra  l khng ng:\n\n>The C language is pass-by-value without exception. Passing a pointer as a parameter does not mean pass-by-reference.\n\n## 2. Pass value v reference trong ruby\n\n| Qua thi gian tm hiu th ti nhn thy rng trong ruby khng h c khi nim r rng v reference hay value, nn mi kt lun  y ch l mang tnh quy chiu da vo nhng  chng ta  ni trong mc 1.\n\nXem v d sau y:\n\n```ruby\ndef xinchao(a)\n  a = \"Nguyen Van A\"\nend\n\ntemp = \"Nguyen Van B\"\n\nputs \"Kq: Xin Chao #{xinchao(temp)}\"\n\n#=> \"Kq: Xin Chao Nguyen Van A\"\n```\n\nT v d trn ta c th rt ra kt lun l ruby **Pass reference**? V nh bn  thy kt qu l \"Nguyen Van A\", gi tr m chng ta gn trong hm **xinchao**.\n\nCu tr li l khng, y l mt v d cm by nu ta khng cn thn, khc vi mt s ngn ng khc bt buc phi s dng **return**  tr v kt qu trong function, ruby cho php ta s dng gi tr cui cng bn vit ra trong function . Tc kt qu tr v trn n gin l kt qu thc hin ca function xinchao, ch cn vic bin temp c thay i gi tr hay khng th chng ta phi thay th li mt cht nh di y  kim chng:\n\n```ruby\ndef xinchao(a)\n  a = \"Nguyen Van A\"\nend\n\ntemp = \"Nguyen Van B\"\n\nxinchao(temp)\n\nputs \"Kq: Xin Chao #{temp}\"\n\n#=> \"Kq: Xin Chao Nguyen Van B\"\n```\n\nOh, vy ruby l **Pass by value**? ng, nh  tng  cp, ruby khng c 1 nh ngha thun tu no v hai khi nim m chng ta ang tho lun, nn da trn nhng  chnh m chng ta  thng nht trong mc 1, ta c th gi Ruby l 1 mt ngn ng **Pass by value**.\n\nVy c trng hp ngoi l no khng? Nh C++ c c **Pass by value** v **Pass by reference**  thi? Theo ti c c th l khng @@.\n","slug":"2019-02-19-truyen-tham-tri-va-truyen-tham-chieu","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsa80007p3m2842meocb","content":"<h2 id=\"1-Dinh-nghia\"><a href=\"#1-Dinh-nghia\" class=\"headerlink\" title=\"1. nh ngha\"></a>1. nh ngha</h2><ol>\n<li><p>Khng c mt nh ngha chung no v <strong>pass by value</strong> v <strong>pass by reference</strong>, tu thuc vo tng ngn ng, chng li c cch x l v nhng nh ngha khc nhau v cch x l bin v vng nh.</p>\n</li>\n<li><p><strong>Pass value</strong>: Hiu mt cch n gin nht,  l khi bin bn truyn vo mt method no , d trong  logic l g v n h hip ci bin bn b vo ra lm sao, th khi ra ngoi hm , bin bn  truyn  trn vn cn nguyn seal, nguyn kin, khng h si nh (khng h thay i v gi tr).</p>\n</li>\n<li><p><strong>Pass reference</strong>: ngc li vi s t t trong <strong>Pass value</strong>, khi bn quyt nh truyn tham s di dng mt reference, ng ngha vi vic bn chp nhn rng ci bin b bng, yu t xinh xinh ca bn s tha h b logic trong hm hnh h, v khi ra khi hng n vn mang y  thng tch  b gy ra trong hm (gi tr bin truyn vo s b thay i theo logic trong hm).</p>\n</li>\n</ol>\n<p>Note: khi cn i hc, ti  c mt s nhm ln v value v reference trong C, khi  ti  ngh truyn tn bin bnh thng thi l <strong>Pass value</strong>, cn truyn con tr l <strong>Pass reference</strong>. Nhng thc ra  l khng ng:</p>\n<blockquote>\n<p>The C language is pass-by-value without exception. Passing a pointer as a parameter does not mean pass-by-reference.</p>\n</blockquote>\n<h2 id=\"2-Pass-value-va-reference-trong-ruby\"><a href=\"#2-Pass-value-va-reference-trong-ruby\" class=\"headerlink\" title=\"2. Pass value v reference trong ruby\"></a>2. Pass value v reference trong ruby</h2><p>| Qua thi gian tm hiu th ti nhn thy rng trong ruby khng h c khi nim r rng v reference hay value, nn mi kt lun  y ch l mang tnh quy chiu da vo nhng  chng ta  ni trong mc 1.</p>\n<p>Xem v d sau y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xinchao</span><span class=\"params\">(a)</span></span></span><br><span class=\"line\">  a = <span class=\"string\">\"Nguyen Van A\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = <span class=\"string\">\"Nguyen Van B\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Kq: Xin Chao <span class=\"subst\">#&#123;xinchao(temp)&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#=&gt; \"Kq: Xin Chao Nguyen Van A\"</span></span><br></pre></td></tr></table></figure>\n\n<p>T v d trn ta c th rt ra kt lun l ruby <strong>Pass reference</strong>? V nh bn  thy kt qu l Nguyen Van A, gi tr m chng ta gn trong hm <strong>xinchao</strong>.</p>\n<p>Cu tr li l khng, y l mt v d cm by nu ta khng cn thn, khc vi mt s ngn ng khc bt buc phi s dng <strong>return</strong>  tr v kt qu trong function, ruby cho php ta s dng gi tr cui cng bn vit ra trong function . Tc kt qu tr v trn n gin l kt qu thc hin ca function xinchao, ch cn vic bin temp c thay i gi tr hay khng th chng ta phi thay th li mt cht nh di y  kim chng:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xinchao</span><span class=\"params\">(a)</span></span></span><br><span class=\"line\">  a = <span class=\"string\">\"Nguyen Van A\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = <span class=\"string\">\"Nguyen Van B\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">xinchao(temp)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Kq: Xin Chao <span class=\"subst\">#&#123;temp&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#=&gt; \"Kq: Xin Chao Nguyen Van B\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Oh, vy ruby l <strong>Pass by value</strong>? ng, nh  tng  cp, ruby khng c 1 nh ngha thun tu no v hai khi nim m chng ta ang tho lun, nn da trn nhng  chnh m chng ta  thng nht trong mc 1, ta c th gi Ruby l 1 mt ngn ng <strong>Pass by value</strong>.</p>\n<p>Vy c trng hp ngoi l no khng? Nh C++ c c <strong>Pass by value</strong> v <strong>Pass by reference</strong>  thi? Theo ti c c th l khng @@.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Dinh-nghia\"><a href=\"#1-Dinh-nghia\" class=\"headerlink\" title=\"1. nh ngha\"></a>1. nh ngha</h2><ol>\n<li><p>Khng c mt nh ngha chung no v <strong>pass by value</strong> v <strong>pass by reference</strong>, tu thuc vo tng ngn ng, chng li c cch x l v nhng nh ngha khc nhau v cch x l bin v vng nh.</p>\n</li>\n<li><p><strong>Pass value</strong>: Hiu mt cch n gin nht,  l khi bin bn truyn vo mt method no , d trong  logic l g v n h hip ci bin bn b vo ra lm sao, th khi ra ngoi hm , bin bn  truyn  trn vn cn nguyn seal, nguyn kin, khng h si nh (khng h thay i v gi tr).</p>\n</li>\n<li><p><strong>Pass reference</strong>: ngc li vi s t t trong <strong>Pass value</strong>, khi bn quyt nh truyn tham s di dng mt reference, ng ngha vi vic bn chp nhn rng ci bin b bng, yu t xinh xinh ca bn s tha h b logic trong hm hnh h, v khi ra khi hng n vn mang y  thng tch  b gy ra trong hm (gi tr bin truyn vo s b thay i theo logic trong hm).</p>\n</li>\n</ol>\n<p>Note: khi cn i hc, ti  c mt s nhm ln v value v reference trong C, khi  ti  ngh truyn tn bin bnh thng thi l <strong>Pass value</strong>, cn truyn con tr l <strong>Pass reference</strong>. Nhng thc ra  l khng ng:</p>\n<blockquote>\n<p>The C language is pass-by-value without exception. Passing a pointer as a parameter does not mean pass-by-reference.</p>\n</blockquote>\n<h2 id=\"2-Pass-value-va-reference-trong-ruby\"><a href=\"#2-Pass-value-va-reference-trong-ruby\" class=\"headerlink\" title=\"2. Pass value v reference trong ruby\"></a>2. Pass value v reference trong ruby</h2><p>| Qua thi gian tm hiu th ti nhn thy rng trong ruby khng h c khi nim r rng v reference hay value, nn mi kt lun  y ch l mang tnh quy chiu da vo nhng  chng ta  ni trong mc 1.</p>\n<p>Xem v d sau y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xinchao</span><span class=\"params\">(a)</span></span></span><br><span class=\"line\">  a = <span class=\"string\">\"Nguyen Van A\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = <span class=\"string\">\"Nguyen Van B\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Kq: Xin Chao <span class=\"subst\">#&#123;xinchao(temp)&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#=&gt; \"Kq: Xin Chao Nguyen Van A\"</span></span><br></pre></td></tr></table></figure>\n\n<p>T v d trn ta c th rt ra kt lun l ruby <strong>Pass reference</strong>? V nh bn  thy kt qu l Nguyen Van A, gi tr m chng ta gn trong hm <strong>xinchao</strong>.</p>\n<p>Cu tr li l khng, y l mt v d cm by nu ta khng cn thn, khc vi mt s ngn ng khc bt buc phi s dng <strong>return</strong>  tr v kt qu trong function, ruby cho php ta s dng gi tr cui cng bn vit ra trong function . Tc kt qu tr v trn n gin l kt qu thc hin ca function xinchao, ch cn vic bin temp c thay i gi tr hay khng th chng ta phi thay th li mt cht nh di y  kim chng:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xinchao</span><span class=\"params\">(a)</span></span></span><br><span class=\"line\">  a = <span class=\"string\">\"Nguyen Van A\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = <span class=\"string\">\"Nguyen Van B\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">xinchao(temp)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Kq: Xin Chao <span class=\"subst\">#&#123;temp&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#=&gt; \"Kq: Xin Chao Nguyen Van B\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Oh, vy ruby l <strong>Pass by value</strong>? ng, nh  tng  cp, ruby khng c 1 nh ngha thun tu no v hai khi nim m chng ta ang tho lun, nn da trn nhng  chnh m chng ta  thng nht trong mc 1, ta c th gi Ruby l 1 mt ngn ng <strong>Pass by value</strong>.</p>\n<p>Vy c trng hp ngoi l no khng? Nh C++ c c <strong>Pass by value</strong> v <strong>Pass by reference</strong>  thi? Theo ti c c th l khng @@.</p>\n"},{"title":"Quy Lut 80/20","date":"2019-02-21T17:00:00.000Z","draft":false,"label":"#til","_content":"\nMi ngi hu nh ai cng bit quy lut 80/20.\n\nV cng nhiu ngi ng dng trit . H c gng dng 20% cng sc ca mnh  t c 80% gi tr, v t ho v s hiu qu ca mnh.\n\nNhng h qun mt iu.\n\nng l 20% cng sc u tin to nn 80% gi tr, nhng l 80% gi tr ph thng.\n\nChnh 20% gi tr cn li mi to nn 80% khc bit. V cng chnh 20% khc bit sau cng  mi l th to nn thnh cng.\n\nBn c th b 20% cng sc l  chi thun thc guitar 80%.\n\nNhng chnh 20%  kh cui cng mi to nn mt tay guitar thng hng.\n\nBn c th b 20% cng sc, thm ch t hn,  to nn mt trang mng x hi bng 80% Facebook.\n\nNhng chnh 20% cn li khin Facebook l Facebook.\n\nBn c th b ch 20% cng sc  tp tnh v ging ngi thnh t 80%.\n\nNhng chnh 20% cui cng mi thc s khin bn tr nn thnh t.\n\nTrong nhiu tr chi quan trng nht cuc i khng c ch cho s na vi. Hy nh rng 20% xao nhng   lm nn 80% tht bi.\n\nHy ngh li i, ti sao con s 80 li nm trc?  l v bn cht ca n nhn mnh rng 80% gian kh mi l th to nn 20% qu gi cui cng.\n\n> trch dn Ecoblader\n","source":"_posts/2019-02-22-quy-luat-80-20.md","raw":"---\ntitle: \"Quy Lut 80/20\"\ndate: 2019-02-22\ndraft: false\ntags: [\"random\"]\nlabel: \"#til\"\n---\n\nMi ngi hu nh ai cng bit quy lut 80/20.\n\nV cng nhiu ngi ng dng trit . H c gng dng 20% cng sc ca mnh  t c 80% gi tr, v t ho v s hiu qu ca mnh.\n\nNhng h qun mt iu.\n\nng l 20% cng sc u tin to nn 80% gi tr, nhng l 80% gi tr ph thng.\n\nChnh 20% gi tr cn li mi to nn 80% khc bit. V cng chnh 20% khc bit sau cng  mi l th to nn thnh cng.\n\nBn c th b 20% cng sc l  chi thun thc guitar 80%.\n\nNhng chnh 20%  kh cui cng mi to nn mt tay guitar thng hng.\n\nBn c th b 20% cng sc, thm ch t hn,  to nn mt trang mng x hi bng 80% Facebook.\n\nNhng chnh 20% cn li khin Facebook l Facebook.\n\nBn c th b ch 20% cng sc  tp tnh v ging ngi thnh t 80%.\n\nNhng chnh 20% cui cng mi thc s khin bn tr nn thnh t.\n\nTrong nhiu tr chi quan trng nht cuc i khng c ch cho s na vi. Hy nh rng 20% xao nhng   lm nn 80% tht bi.\n\nHy ngh li i, ti sao con s 80 li nm trc?  l v bn cht ca n nhn mnh rng 80% gian kh mi l th to nn 20% qu gi cui cng.\n\n> trch dn Ecoblader\n","slug":"2019-02-22-quy-luat-80-20","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsab000bp3m2aucx0i58","content":"<p>Mi ngi hu nh ai cng bit quy lut 80/20.</p>\n<p>V cng nhiu ngi ng dng trit . H c gng dng 20% cng sc ca mnh  t c 80% gi tr, v t ho v s hiu qu ca mnh.</p>\n<p>Nhng h qun mt iu.</p>\n<p>ng l 20% cng sc u tin to nn 80% gi tr, nhng l 80% gi tr ph thng.</p>\n<p>Chnh 20% gi tr cn li mi to nn 80% khc bit. V cng chnh 20% khc bit sau cng  mi l th to nn thnh cng.</p>\n<p>Bn c th b 20% cng sc l  chi thun thc guitar 80%.</p>\n<p>Nhng chnh 20%  kh cui cng mi to nn mt tay guitar thng hng.</p>\n<p>Bn c th b 20% cng sc, thm ch t hn,  to nn mt trang mng x hi bng 80% Facebook.</p>\n<p>Nhng chnh 20% cn li khin Facebook l Facebook.</p>\n<p>Bn c th b ch 20% cng sc  tp tnh v ging ngi thnh t 80%.</p>\n<p>Nhng chnh 20% cui cng mi thc s khin bn tr nn thnh t.</p>\n<p>Trong nhiu tr chi quan trng nht cuc i khng c ch cho s na vi. Hy nh rng 20% xao nhng   lm nn 80% tht bi.</p>\n<p>Hy ngh li i, ti sao con s 80 li nm trc?  l v bn cht ca n nhn mnh rng 80% gian kh mi l th to nn 20% qu gi cui cng.</p>\n<blockquote>\n<p>trch dn Ecoblader</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>Mi ngi hu nh ai cng bit quy lut 80/20.</p>\n<p>V cng nhiu ngi ng dng trit . H c gng dng 20% cng sc ca mnh  t c 80% gi tr, v t ho v s hiu qu ca mnh.</p>\n<p>Nhng h qun mt iu.</p>\n<p>ng l 20% cng sc u tin to nn 80% gi tr, nhng l 80% gi tr ph thng.</p>\n<p>Chnh 20% gi tr cn li mi to nn 80% khc bit. V cng chnh 20% khc bit sau cng  mi l th to nn thnh cng.</p>\n<p>Bn c th b 20% cng sc l  chi thun thc guitar 80%.</p>\n<p>Nhng chnh 20%  kh cui cng mi to nn mt tay guitar thng hng.</p>\n<p>Bn c th b 20% cng sc, thm ch t hn,  to nn mt trang mng x hi bng 80% Facebook.</p>\n<p>Nhng chnh 20% cn li khin Facebook l Facebook.</p>\n<p>Bn c th b ch 20% cng sc  tp tnh v ging ngi thnh t 80%.</p>\n<p>Nhng chnh 20% cui cng mi thc s khin bn tr nn thnh t.</p>\n<p>Trong nhiu tr chi quan trng nht cuc i khng c ch cho s na vi. Hy nh rng 20% xao nhng   lm nn 80% tht bi.</p>\n<p>Hy ngh li i, ti sao con s 80 li nm trc?  l v bn cht ca n nhn mnh rng 80% gian kh mi l th to nn 20% qu gi cui cng.</p>\n<blockquote>\n<p>trch dn Ecoblader</p>\n</blockquote>\n"},{"title":"Vi Trnh Thng Dch Cho Ruby","date":"2019-02-19T17:00:00.000Z","draft":false,"label":"#til","_content":"\n## 1. Ruby chy code ca bn nh no?\n\nTrc khi ni v cc trnh thng dch, ti xin nu khi qut v qu trnh ruby thc thi m code ca bn.\nVi bt c on m ruby no, m ngun bn vit s tri qua cc bc sau  c th ti c trnh thng dch (ch  m ta ang tm hiu).\n\n**Token**: Chuyn i m ngun ruby thnh mt dng keyword. Hiu n gin, ruby s qut qua m ngun bn vit v so snh vi mt symbol table no  (gi d nh vy),  xc nh xem trong m ngun bn vit gm nhng thnh phn no ( xc nh u l bin, u l keyword, u l t kho). V d vic t **do** xut hin trong m ngun, c th n l mt bin local, hoc n l mt keyword trong mt **block**, **Token** s qut m ngun v m bo xc nh ng **type** ca tng thnh phn trong code ca bn, ch  l **type** nh,  bc ny ruby ch quan tm n xc nh **type**.\n\n**Parse**: Qua bc u tin, ta  c mt token, n bc th hai n s chuyn i token  thnh mt AST (Abstract Syntax Tree).\n\n**Compile**: n bc ny, ruby s bin dch kt qu  bc 2 thnh **bytecode** v truyn kt qu bin dch c sang cho my o ruby (l phn m chng ta ang tm hiu trong bi vit).\n\n## 2. CRuby, MRI, YARV, KRI\n\n kim tra xem ruby trn my tnh ca bn ang s dng trnh thng dch no, hy m **irb** v s dng lnh sau:\n\n```ruby\nRbConfig::CONFIG[\"RUBY_INSTALL_NAME\"]\n#=> kt qu tr v trn my ca ti l: ruby\n```\niu ny c ngha ti ang s dng trnh thng dch mc nh trong ruby. c gi l **MRI**/**CRuby** hay phin bn nng cp sau ny l **YARV**/**KRI**. Gii thch v vic c nhiu tn gi nh trn, ti xin trch dn cc thng tin trn wiki v trnh thng dch ny:\n\n>Matz's Ruby Interpreter or Ruby MRI (also called CRuby) was the reference implementation of the Ruby programming language named after Ruby creator Yukihiro Matsumoto (\"Matz\")\n\n>YARV (Yet another Ruby VM) is a bytecode interpreter that was developed for the Ruby programming language by Koichi Sasada. The goal of the project was to greatly reduce the execution time of Ruby programs.\n\n> Since YARV has become the official Ruby interpreter for Ruby 1.9, it is also named KRI (Koichi's Ruby Interpreter), in the same vein as the original Ruby MRI, named for Ruby's creator Yukihiro Matsumoto.\n\n> YARV was merged into the Ruby Subversion repository on January 1, 2007. It was released as part of Ruby 1.9.0 on December 26, 2007, replacing Ruby MRI.\n\nQua vi trch dn k trn, chng ta c th thy n gin nhng khi nim **CRuby**, **YARV**, **MRI**, **KRI** u nhm m t v mt trnh thng dch c s dng mc nh cho ruby (tu phin bn s c khc nhau, hiu theo ngha l mt s update thay v l thay th).\n\n## 3. JRuby\n\nCn mt vi trnh thng dch khc m ti  c c, nhng **JRuby** l phn cui m chng ta s tm hiu, v nhng nhng trnh thng dch cn li khng c ph bin cho lm.\n\n**JRuby** = **Java** + **Ruby**\n\nTc l dng phn java lm core  chy my o x l code ruby. S khc bit vi mc 2,chnh l  mc 2, d di tn gi hay phin bn no, th nhng trnh thng dch  u s dng **C** lm ngn ng xy dng.\n\nMt s  kin xoay quanh **JRuby**\n\n1. JRuby nhanh hn ng k vi trnh thng dch mc nh trong ruby, c li th mnh m khi x l a lung.\n\n2. Tuy nhin ng ngha vi iu  l vic **JRuby** chim dng b nh nhiu hn v mt thi gian hn  khi ng.\n\nVy s l mt thm ho nu s dng **JRuby**  lm trnh thng dch cho ruby trong nhng ng dng nh, hot ng n gin v khng cn tc  qu cao.\n\n## 4. Tham kho\n\n[1] [https://en.wikipedia.org/wiki/Ruby_MRI](https://en.wikipedia.org/wiki/Ruby_MRI)\n\n[2] [https://en.wikipedia.org/wiki/JRuby](https://en.wikipedia.org/wiki/JRuby)\n","source":"_posts/2019-02-20-cac-trinh-thong-dich-trong-ruby.md","raw":"---\ntitle: \"Vi Trnh Thng Dch Cho Ruby\"\ndate: 2019-02-20\ndraft: false\ntags: [\"RUBY\"]\nlabel: \"#til\"\n---\n\n## 1. Ruby chy code ca bn nh no?\n\nTrc khi ni v cc trnh thng dch, ti xin nu khi qut v qu trnh ruby thc thi m code ca bn.\nVi bt c on m ruby no, m ngun bn vit s tri qua cc bc sau  c th ti c trnh thng dch (ch  m ta ang tm hiu).\n\n**Token**: Chuyn i m ngun ruby thnh mt dng keyword. Hiu n gin, ruby s qut qua m ngun bn vit v so snh vi mt symbol table no  (gi d nh vy),  xc nh xem trong m ngun bn vit gm nhng thnh phn no ( xc nh u l bin, u l keyword, u l t kho). V d vic t **do** xut hin trong m ngun, c th n l mt bin local, hoc n l mt keyword trong mt **block**, **Token** s qut m ngun v m bo xc nh ng **type** ca tng thnh phn trong code ca bn, ch  l **type** nh,  bc ny ruby ch quan tm n xc nh **type**.\n\n**Parse**: Qua bc u tin, ta  c mt token, n bc th hai n s chuyn i token  thnh mt AST (Abstract Syntax Tree).\n\n**Compile**: n bc ny, ruby s bin dch kt qu  bc 2 thnh **bytecode** v truyn kt qu bin dch c sang cho my o ruby (l phn m chng ta ang tm hiu trong bi vit).\n\n## 2. CRuby, MRI, YARV, KRI\n\n kim tra xem ruby trn my tnh ca bn ang s dng trnh thng dch no, hy m **irb** v s dng lnh sau:\n\n```ruby\nRbConfig::CONFIG[\"RUBY_INSTALL_NAME\"]\n#=> kt qu tr v trn my ca ti l: ruby\n```\niu ny c ngha ti ang s dng trnh thng dch mc nh trong ruby. c gi l **MRI**/**CRuby** hay phin bn nng cp sau ny l **YARV**/**KRI**. Gii thch v vic c nhiu tn gi nh trn, ti xin trch dn cc thng tin trn wiki v trnh thng dch ny:\n\n>Matz's Ruby Interpreter or Ruby MRI (also called CRuby) was the reference implementation of the Ruby programming language named after Ruby creator Yukihiro Matsumoto (\"Matz\")\n\n>YARV (Yet another Ruby VM) is a bytecode interpreter that was developed for the Ruby programming language by Koichi Sasada. The goal of the project was to greatly reduce the execution time of Ruby programs.\n\n> Since YARV has become the official Ruby interpreter for Ruby 1.9, it is also named KRI (Koichi's Ruby Interpreter), in the same vein as the original Ruby MRI, named for Ruby's creator Yukihiro Matsumoto.\n\n> YARV was merged into the Ruby Subversion repository on January 1, 2007. It was released as part of Ruby 1.9.0 on December 26, 2007, replacing Ruby MRI.\n\nQua vi trch dn k trn, chng ta c th thy n gin nhng khi nim **CRuby**, **YARV**, **MRI**, **KRI** u nhm m t v mt trnh thng dch c s dng mc nh cho ruby (tu phin bn s c khc nhau, hiu theo ngha l mt s update thay v l thay th).\n\n## 3. JRuby\n\nCn mt vi trnh thng dch khc m ti  c c, nhng **JRuby** l phn cui m chng ta s tm hiu, v nhng nhng trnh thng dch cn li khng c ph bin cho lm.\n\n**JRuby** = **Java** + **Ruby**\n\nTc l dng phn java lm core  chy my o x l code ruby. S khc bit vi mc 2,chnh l  mc 2, d di tn gi hay phin bn no, th nhng trnh thng dch  u s dng **C** lm ngn ng xy dng.\n\nMt s  kin xoay quanh **JRuby**\n\n1. JRuby nhanh hn ng k vi trnh thng dch mc nh trong ruby, c li th mnh m khi x l a lung.\n\n2. Tuy nhin ng ngha vi iu  l vic **JRuby** chim dng b nh nhiu hn v mt thi gian hn  khi ng.\n\nVy s l mt thm ho nu s dng **JRuby**  lm trnh thng dch cho ruby trong nhng ng dng nh, hot ng n gin v khng cn tc  qu cao.\n\n## 4. Tham kho\n\n[1] [https://en.wikipedia.org/wiki/Ruby_MRI](https://en.wikipedia.org/wiki/Ruby_MRI)\n\n[2] [https://en.wikipedia.org/wiki/JRuby](https://en.wikipedia.org/wiki/JRuby)\n","slug":"2019-02-20-cac-trinh-thong-dich-trong-ruby","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsab000cp3m2dks73agw","content":"<h2 id=\"1-Ruby-chay-code-cua-ban-nhu-nao\"><a href=\"#1-Ruby-chay-code-cua-ban-nhu-nao\" class=\"headerlink\" title=\"1. Ruby chy code ca bn nh no?\"></a>1. Ruby chy code ca bn nh no?</h2><p>Trc khi ni v cc trnh thng dch, ti xin nu khi qut v qu trnh ruby thc thi m code ca bn.<br>Vi bt c on m ruby no, m ngun bn vit s tri qua cc bc sau  c th ti c trnh thng dch (ch  m ta ang tm hiu).</p>\n<p><strong>Token</strong>: Chuyn i m ngun ruby thnh mt dng keyword. Hiu n gin, ruby s qut qua m ngun bn vit v so snh vi mt symbol table no  (gi d nh vy),  xc nh xem trong m ngun bn vit gm nhng thnh phn no ( xc nh u l bin, u l keyword, u l t kho). V d vic t <strong>do</strong> xut hin trong m ngun, c th n l mt bin local, hoc n l mt keyword trong mt <strong>block</strong>, <strong>Token</strong> s qut m ngun v m bo xc nh ng <strong>type</strong> ca tng thnh phn trong code ca bn, ch  l <strong>type</strong> nh,  bc ny ruby ch quan tm n xc nh <strong>type</strong>.</p>\n<p><strong>Parse</strong>: Qua bc u tin, ta  c mt token, n bc th hai n s chuyn i token  thnh mt AST (Abstract Syntax Tree).</p>\n<p><strong>Compile</strong>: n bc ny, ruby s bin dch kt qu  bc 2 thnh <strong>bytecode</strong> v truyn kt qu bin dch c sang cho my o ruby (l phn m chng ta ang tm hiu trong bi vit).</p>\n<h2 id=\"2-CRuby-MRI-YARV-KRI\"><a href=\"#2-CRuby-MRI-YARV-KRI\" class=\"headerlink\" title=\"2. CRuby, MRI, YARV, KRI\"></a>2. CRuby, MRI, YARV, KRI</h2><p> kim tra xem ruby trn my tnh ca bn ang s dng trnh thng dch no, hy m <strong>irb</strong> v s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RbConfig::CONFIG[<span class=\"string\">\"RUBY_INSTALL_NAME\"</span>]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; kt qu tr v trn my ca ti l: ruby</span></span><br></pre></td></tr></table></figure>\n<p>iu ny c ngha ti ang s dng trnh thng dch mc nh trong ruby. c gi l <strong>MRI</strong>/<strong>CRuby</strong> hay phin bn nng cp sau ny l <strong>YARV</strong>/<strong>KRI</strong>. Gii thch v vic c nhiu tn gi nh trn, ti xin trch dn cc thng tin trn wiki v trnh thng dch ny:</p>\n<blockquote>\n<p>Matzs Ruby Interpreter or Ruby MRI (also called CRuby) was the reference implementation of the Ruby programming language named after Ruby creator Yukihiro Matsumoto (Matz)</p>\n</blockquote>\n<blockquote>\n<p>YARV (Yet another Ruby VM) is a bytecode interpreter that was developed for the Ruby programming language by Koichi Sasada. The goal of the project was to greatly reduce the execution time of Ruby programs.</p>\n</blockquote>\n<blockquote>\n<p>Since YARV has become the official Ruby interpreter for Ruby 1.9, it is also named KRI (Koichis Ruby Interpreter), in the same vein as the original Ruby MRI, named for Rubys creator Yukihiro Matsumoto.</p>\n</blockquote>\n<blockquote>\n<p>YARV was merged into the Ruby Subversion repository on January 1, 2007. It was released as part of Ruby 1.9.0 on December 26, 2007, replacing Ruby MRI.</p>\n</blockquote>\n<p>Qua vi trch dn k trn, chng ta c th thy n gin nhng khi nim <strong>CRuby</strong>, <strong>YARV</strong>, <strong>MRI</strong>, <strong>KRI</strong> u nhm m t v mt trnh thng dch c s dng mc nh cho ruby (tu phin bn s c khc nhau, hiu theo ngha l mt s update thay v l thay th).</p>\n<h2 id=\"3-JRuby\"><a href=\"#3-JRuby\" class=\"headerlink\" title=\"3. JRuby\"></a>3. JRuby</h2><p>Cn mt vi trnh thng dch khc m ti  c c, nhng <strong>JRuby</strong> l phn cui m chng ta s tm hiu, v nhng nhng trnh thng dch cn li khng c ph bin cho lm.</p>\n<p><strong>JRuby</strong> = <strong>Java</strong> + <strong>Ruby</strong></p>\n<p>Tc l dng phn java lm core  chy my o x l code ruby. S khc bit vi mc 2,chnh l  mc 2, d di tn gi hay phin bn no, th nhng trnh thng dch  u s dng <strong>C</strong> lm ngn ng xy dng.</p>\n<p>Mt s  kin xoay quanh <strong>JRuby</strong></p>\n<ol>\n<li><p>JRuby nhanh hn ng k vi trnh thng dch mc nh trong ruby, c li th mnh m khi x l a lung.</p>\n</li>\n<li><p>Tuy nhin ng ngha vi iu  l vic <strong>JRuby</strong> chim dng b nh nhiu hn v mt thi gian hn  khi ng.</p>\n</li>\n</ol>\n<p>Vy s l mt thm ho nu s dng <strong>JRuby</strong>  lm trnh thng dch cho ruby trong nhng ng dng nh, hot ng n gin v khng cn tc  qu cao.</p>\n<h2 id=\"4-Tham-khao\"><a href=\"#4-Tham-khao\" class=\"headerlink\" title=\"4. Tham kho\"></a>4. Tham kho</h2><p>[1] <a href=\"https://en.wikipedia.org/wiki/Ruby_MRI\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Ruby_MRI</a></p>\n<p>[2] <a href=\"https://en.wikipedia.org/wiki/JRuby\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/JRuby</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Ruby-chay-code-cua-ban-nhu-nao\"><a href=\"#1-Ruby-chay-code-cua-ban-nhu-nao\" class=\"headerlink\" title=\"1. Ruby chy code ca bn nh no?\"></a>1. Ruby chy code ca bn nh no?</h2><p>Trc khi ni v cc trnh thng dch, ti xin nu khi qut v qu trnh ruby thc thi m code ca bn.<br>Vi bt c on m ruby no, m ngun bn vit s tri qua cc bc sau  c th ti c trnh thng dch (ch  m ta ang tm hiu).</p>\n<p><strong>Token</strong>: Chuyn i m ngun ruby thnh mt dng keyword. Hiu n gin, ruby s qut qua m ngun bn vit v so snh vi mt symbol table no  (gi d nh vy),  xc nh xem trong m ngun bn vit gm nhng thnh phn no ( xc nh u l bin, u l keyword, u l t kho). V d vic t <strong>do</strong> xut hin trong m ngun, c th n l mt bin local, hoc n l mt keyword trong mt <strong>block</strong>, <strong>Token</strong> s qut m ngun v m bo xc nh ng <strong>type</strong> ca tng thnh phn trong code ca bn, ch  l <strong>type</strong> nh,  bc ny ruby ch quan tm n xc nh <strong>type</strong>.</p>\n<p><strong>Parse</strong>: Qua bc u tin, ta  c mt token, n bc th hai n s chuyn i token  thnh mt AST (Abstract Syntax Tree).</p>\n<p><strong>Compile</strong>: n bc ny, ruby s bin dch kt qu  bc 2 thnh <strong>bytecode</strong> v truyn kt qu bin dch c sang cho my o ruby (l phn m chng ta ang tm hiu trong bi vit).</p>\n<h2 id=\"2-CRuby-MRI-YARV-KRI\"><a href=\"#2-CRuby-MRI-YARV-KRI\" class=\"headerlink\" title=\"2. CRuby, MRI, YARV, KRI\"></a>2. CRuby, MRI, YARV, KRI</h2><p> kim tra xem ruby trn my tnh ca bn ang s dng trnh thng dch no, hy m <strong>irb</strong> v s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RbConfig::CONFIG[<span class=\"string\">\"RUBY_INSTALL_NAME\"</span>]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; kt qu tr v trn my ca ti l: ruby</span></span><br></pre></td></tr></table></figure>\n<p>iu ny c ngha ti ang s dng trnh thng dch mc nh trong ruby. c gi l <strong>MRI</strong>/<strong>CRuby</strong> hay phin bn nng cp sau ny l <strong>YARV</strong>/<strong>KRI</strong>. Gii thch v vic c nhiu tn gi nh trn, ti xin trch dn cc thng tin trn wiki v trnh thng dch ny:</p>\n<blockquote>\n<p>Matzs Ruby Interpreter or Ruby MRI (also called CRuby) was the reference implementation of the Ruby programming language named after Ruby creator Yukihiro Matsumoto (Matz)</p>\n</blockquote>\n<blockquote>\n<p>YARV (Yet another Ruby VM) is a bytecode interpreter that was developed for the Ruby programming language by Koichi Sasada. The goal of the project was to greatly reduce the execution time of Ruby programs.</p>\n</blockquote>\n<blockquote>\n<p>Since YARV has become the official Ruby interpreter for Ruby 1.9, it is also named KRI (Koichis Ruby Interpreter), in the same vein as the original Ruby MRI, named for Rubys creator Yukihiro Matsumoto.</p>\n</blockquote>\n<blockquote>\n<p>YARV was merged into the Ruby Subversion repository on January 1, 2007. It was released as part of Ruby 1.9.0 on December 26, 2007, replacing Ruby MRI.</p>\n</blockquote>\n<p>Qua vi trch dn k trn, chng ta c th thy n gin nhng khi nim <strong>CRuby</strong>, <strong>YARV</strong>, <strong>MRI</strong>, <strong>KRI</strong> u nhm m t v mt trnh thng dch c s dng mc nh cho ruby (tu phin bn s c khc nhau, hiu theo ngha l mt s update thay v l thay th).</p>\n<h2 id=\"3-JRuby\"><a href=\"#3-JRuby\" class=\"headerlink\" title=\"3. JRuby\"></a>3. JRuby</h2><p>Cn mt vi trnh thng dch khc m ti  c c, nhng <strong>JRuby</strong> l phn cui m chng ta s tm hiu, v nhng nhng trnh thng dch cn li khng c ph bin cho lm.</p>\n<p><strong>JRuby</strong> = <strong>Java</strong> + <strong>Ruby</strong></p>\n<p>Tc l dng phn java lm core  chy my o x l code ruby. S khc bit vi mc 2,chnh l  mc 2, d di tn gi hay phin bn no, th nhng trnh thng dch  u s dng <strong>C</strong> lm ngn ng xy dng.</p>\n<p>Mt s  kin xoay quanh <strong>JRuby</strong></p>\n<ol>\n<li><p>JRuby nhanh hn ng k vi trnh thng dch mc nh trong ruby, c li th mnh m khi x l a lung.</p>\n</li>\n<li><p>Tuy nhin ng ngha vi iu  l vic <strong>JRuby</strong> chim dng b nh nhiu hn v mt thi gian hn  khi ng.</p>\n</li>\n</ol>\n<p>Vy s l mt thm ho nu s dng <strong>JRuby</strong>  lm trnh thng dch cho ruby trong nhng ng dng nh, hot ng n gin v khng cn tc  qu cao.</p>\n<h2 id=\"4-Tham-khao\"><a href=\"#4-Tham-khao\" class=\"headerlink\" title=\"4. Tham kho\"></a>4. Tham kho</h2><p>[1] <a href=\"https://en.wikipedia.org/wiki/Ruby_MRI\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Ruby_MRI</a></p>\n<p>[2] <a href=\"https://en.wikipedia.org/wiki/JRuby\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/JRuby</a></p>\n"},{"title":"Root, Sudo V Package Management","date":"2019-02-04T17:00:00.000Z","draft":false,"_content":"\n## 1.Root\n\nXin c nhc li mt cu chuyn c ti  k trong bi vit trc vi v d v mnh t nh bn, bn s hu mnh t , v bn s hu mnh t  chung vi bn. Nhng v chng bn khng phi l nhng ngi s hu ti thng ca mnh t k trn, m quyn lc to ln ny thuc v nh nc, ngi thc ra l ang cho bn thu t c thi hn. Tng t trng Unix/Linux, s c nhng user (nh ti khon bn s dng  ng nhp, hoc ti khon khch).\n\nVic nhng ti khon ny c th ng nhp vo h thng nhng c quyn ca chng b gii hn. Khi login vo h thng, bn c th lm mt s tc v nht nh ch khng th thch lm g th lm, trong h thng ca bn ch c mt user duy nht c quyn lm bt c iu g,  l mt super user.\n\nTrn windows, ta gi  l **administrator** (c l qu quen thuc, bn cn nh nhng lc ci phn mm, bn click vo file exe nhng chng trnh khng chu ci t, google mt lt, bn nhn c mt hng dn hy click phi vo file exe  v chn **run as administrator**,  chnh l sc mnh ca super user trn windows), cn trn macOS hay Ubuntu(1 i din ca Linux), n c gi l **root** (cui cng cng ch l mt ci tn gi, n c th c t tn l mo, l ch, n c th c t tn l bt c th g, chng ta khng cn quan tm, iu duy nht chng ta cn bit  l trn cc h iu hnh con chu ca Unix s lun c mt super user quyn lc nh vy).\n\nn lc ny, bn s t hi ti sao phi thit k h thng phc tp nh vy? Ti sao khng ch dung duy nht mt loi user?\nCu tr li rt n gin, khng phi ai s dng my tnh cng l nhng ngi dung c hiu bit su sc v h iu hnh. V vy, nu trao cho h nhng quyn lc qu ln, h c th v tnh gy ra nhng hu hoi nghim trng cho h thng (quyn lc cng ln th trch nhim cng ln).\n\nMt vn  pht sinh nu vic s dng Root mang tnh ri ro qu cao nhng nhng user bnh thng li khng c cc quyn  ci t mt s phn mm nng cao th phi lm sao? Vn  ny s c gii thch  mc s 2.\n\nNote: Trn macOS v Ubuntu, **root** mc nh s c disable, chng c th s c enable tr li v re-disable. Cch thc hin th c l bn nn tm kim hng dn t trang ch ca nhng h iu hnh ny  cu lnh ca bn m bo chnh xc v khng b li thi.\n\n## 2.Sudo\n\nNh vn  ti  nu  cui mc 1, by gi ti mun ci t mt s phn mm i hi quyn ca super user, v l thuyt ti ng gia hai la chn hoc chuyn sang **root** v ci t phn mm bnh thng (rt ri ro), phng n 2 l ti vn s dng user thng v ni li tm bit vi nhng phn mm k trn.\n\nQu t, c hai gii php trn u khng n, tht may, cc nh pht trin h thng  cung cp cho chng ta mt la chn s 3,  l bn vn s dng user thng nhng c th triu hi quyn lc ca super user  thc hin nhng lnh no .\n\nCch s dng  l bn thm cu lnh **sudo** vo pha trc cu lnh cn s dng quyn ca super user. V d:\n\n**sudo apt-get update**\n\nMt nhm ln thng xuyn vi c vi ti ngy mi tm hiu,  l sau khi g nhng cu lnh c **sudo**, h thng yu cu ti nhp mt khu v ti  tng ngh  l mt khu ca **root** (nghe cng hp l y ch, ta mn quyn ca **root** th phi s dng mt khu ca **root** ch nh? Ging nh khi ti mn nh ca bn th ti phi c cha kho ca bn). Nhng khng phi nh vy, mt khu bn nhp vo n thun l chnh mt khu ca user thng bn ang login trn my.\n\nPhn a cc trng hp khi bn thm **sudo**, cc cu lnh s chy mt cch hon ho. Tuy nhin, cng c nhng khi bn khng nhn c kt qu nh mong i v l do chnh l khng phi user no cng c th triu hi quyn lc ca super user. iu bn cn lm khi  l \"ni\" vi h iu hnh rng hy cho user ca ti ang s dng c quyn triu hi sc mnh ca super user. Hy xem v d di y:\n\n```ruby\n#=> /etc/sudoers (lu tr cc user c quyn thc hin c quyn ca super user)\n#=> V d\nroot ALL=(ALL:ALL) ALL\n#=> user ang xt quyn tn l root\n#=> Ch all u tin ch ra rng rule ny c p dng cho tt c cc host\n#=> Ch all th hai ch ra, account root c th chy lnh vi quyn ca bt k user no.\n#=> Ch all th ba ch ra, account root c th chy lnh vi quyn ca bt k group no.\n#=> Ch all cui cng ch ra, account root c th chy bt k command no.\n```\n\nNote: K t khi bn nhp mt khu sau khi g lnh **sudo** ln u, thi gian c hiu lc ca mt khu ny s l 15 pht. Trong khong thi gian  bn c th chy cc lnh **sudo** khc m h iu hnh khng yu cu bn nhp li mt khu.\n\n\n## 3.Package management system\n\nKhi s dng macOS,  ci t thm cc phn mm phc v cng vic (m chng khng c support trn appstore), ti s dng **homebrew**, mt phn mm gip qun l cc phn mm khc rt hiu qu.\n\nVy cn trn Linux chng ta c g?\n\nTrc ht cn phi lm r: Package management system l mt cng c hoc mt h thng cc cng c c s dng  handle cc package.\n1.\tHandle l qun l vi y  cc chc nng nh thm mi, g b, nng cp, tm kim..v..v\n2.\tPackage l mt tin ch hoc nhng phn b tr cho mt tin ch no  (thc s cui cng n cng ch l tp hp ca cc file).\n\nMt **Package Management System** ni ting trn Linux  l **DPKG**, n l mt cng c  ci t cc package c ui .deb (cc package dnh cho cc h iu hnh thuc dng debian).\nNhim v ca **DPKG** l install hoc remove mt package (vi iu kin cc file cn thit  c trn local).\n\nn y nhiu bn c th thc mc rng t trc n gi bn cha h s dng cc dng lnh lin quan n **DPKG**, vy ti sao ti li bo l n rt ph bin? Cu tr li  l bn ang s dng cc phn mm package management system khc c xy dng da trn phn core l **DPKG**, mt trong s  l **APTGET/APT**.\n\nu im ln nht ca **APT** so vi **DPKG**  l **DPKG** ch c th ci t file khi m file   c trn local (tc l bng cch no  bn phi download hoc copy file  v my ca bn). Cn vi **APT**, n s tm kim cc package  t **remote repositories**, sau  download chng v my.\n\nim mnh th hai ca **APT** so vi **DPKG**  l n gii quyt c bi ton dependencies. Nu package bn cn ci t ph thuc vo mt vi package khc, nu s dng **DPKG** th bn s phi ci t tt c cc package k trn mt cch th cng.\nCn vi **APT**, n s t hiu c package  cn thm nhng ph tr no v t ng ci t phn ph tr.\n\niu tht s din ra  l trong **APT**, **DPKG** vn tn ti. N tn ti  mt cp thp hn v thc hin cc ch th ca **APT**.\n\nNote: Cc **remote repositories**  phn mm package management ca bn tm kim s c lu tr trong file **/etc/apt/sources.list** (a s l nh vy).\n\n## 4. Tham kho\n\n[1] [https://www.quora.com/What-is-package-management](https://www.quora.com/What-is-package-management)\n\n[2] [https://www.tecmint.com/linux-package-management/](https://www.tecmint.com/linux-package-management/)\n","source":"_posts/2019-02-05-root-sudo-and-package-management-system.md","raw":"---\ntitle: \"Root, Sudo V Package Management\"\ndate: 2019-02-05\ndraft: false\ntags: [\"unix\"]\ncategories: [\"OS\"]\n---\n\n## 1.Root\n\nXin c nhc li mt cu chuyn c ti  k trong bi vit trc vi v d v mnh t nh bn, bn s hu mnh t , v bn s hu mnh t  chung vi bn. Nhng v chng bn khng phi l nhng ngi s hu ti thng ca mnh t k trn, m quyn lc to ln ny thuc v nh nc, ngi thc ra l ang cho bn thu t c thi hn. Tng t trng Unix/Linux, s c nhng user (nh ti khon bn s dng  ng nhp, hoc ti khon khch).\n\nVic nhng ti khon ny c th ng nhp vo h thng nhng c quyn ca chng b gii hn. Khi login vo h thng, bn c th lm mt s tc v nht nh ch khng th thch lm g th lm, trong h thng ca bn ch c mt user duy nht c quyn lm bt c iu g,  l mt super user.\n\nTrn windows, ta gi  l **administrator** (c l qu quen thuc, bn cn nh nhng lc ci phn mm, bn click vo file exe nhng chng trnh khng chu ci t, google mt lt, bn nhn c mt hng dn hy click phi vo file exe  v chn **run as administrator**,  chnh l sc mnh ca super user trn windows), cn trn macOS hay Ubuntu(1 i din ca Linux), n c gi l **root** (cui cng cng ch l mt ci tn gi, n c th c t tn l mo, l ch, n c th c t tn l bt c th g, chng ta khng cn quan tm, iu duy nht chng ta cn bit  l trn cc h iu hnh con chu ca Unix s lun c mt super user quyn lc nh vy).\n\nn lc ny, bn s t hi ti sao phi thit k h thng phc tp nh vy? Ti sao khng ch dung duy nht mt loi user?\nCu tr li rt n gin, khng phi ai s dng my tnh cng l nhng ngi dung c hiu bit su sc v h iu hnh. V vy, nu trao cho h nhng quyn lc qu ln, h c th v tnh gy ra nhng hu hoi nghim trng cho h thng (quyn lc cng ln th trch nhim cng ln).\n\nMt vn  pht sinh nu vic s dng Root mang tnh ri ro qu cao nhng nhng user bnh thng li khng c cc quyn  ci t mt s phn mm nng cao th phi lm sao? Vn  ny s c gii thch  mc s 2.\n\nNote: Trn macOS v Ubuntu, **root** mc nh s c disable, chng c th s c enable tr li v re-disable. Cch thc hin th c l bn nn tm kim hng dn t trang ch ca nhng h iu hnh ny  cu lnh ca bn m bo chnh xc v khng b li thi.\n\n## 2.Sudo\n\nNh vn  ti  nu  cui mc 1, by gi ti mun ci t mt s phn mm i hi quyn ca super user, v l thuyt ti ng gia hai la chn hoc chuyn sang **root** v ci t phn mm bnh thng (rt ri ro), phng n 2 l ti vn s dng user thng v ni li tm bit vi nhng phn mm k trn.\n\nQu t, c hai gii php trn u khng n, tht may, cc nh pht trin h thng  cung cp cho chng ta mt la chn s 3,  l bn vn s dng user thng nhng c th triu hi quyn lc ca super user  thc hin nhng lnh no .\n\nCch s dng  l bn thm cu lnh **sudo** vo pha trc cu lnh cn s dng quyn ca super user. V d:\n\n**sudo apt-get update**\n\nMt nhm ln thng xuyn vi c vi ti ngy mi tm hiu,  l sau khi g nhng cu lnh c **sudo**, h thng yu cu ti nhp mt khu v ti  tng ngh  l mt khu ca **root** (nghe cng hp l y ch, ta mn quyn ca **root** th phi s dng mt khu ca **root** ch nh? Ging nh khi ti mn nh ca bn th ti phi c cha kho ca bn). Nhng khng phi nh vy, mt khu bn nhp vo n thun l chnh mt khu ca user thng bn ang login trn my.\n\nPhn a cc trng hp khi bn thm **sudo**, cc cu lnh s chy mt cch hon ho. Tuy nhin, cng c nhng khi bn khng nhn c kt qu nh mong i v l do chnh l khng phi user no cng c th triu hi quyn lc ca super user. iu bn cn lm khi  l \"ni\" vi h iu hnh rng hy cho user ca ti ang s dng c quyn triu hi sc mnh ca super user. Hy xem v d di y:\n\n```ruby\n#=> /etc/sudoers (lu tr cc user c quyn thc hin c quyn ca super user)\n#=> V d\nroot ALL=(ALL:ALL) ALL\n#=> user ang xt quyn tn l root\n#=> Ch all u tin ch ra rng rule ny c p dng cho tt c cc host\n#=> Ch all th hai ch ra, account root c th chy lnh vi quyn ca bt k user no.\n#=> Ch all th ba ch ra, account root c th chy lnh vi quyn ca bt k group no.\n#=> Ch all cui cng ch ra, account root c th chy bt k command no.\n```\n\nNote: K t khi bn nhp mt khu sau khi g lnh **sudo** ln u, thi gian c hiu lc ca mt khu ny s l 15 pht. Trong khong thi gian  bn c th chy cc lnh **sudo** khc m h iu hnh khng yu cu bn nhp li mt khu.\n\n\n## 3.Package management system\n\nKhi s dng macOS,  ci t thm cc phn mm phc v cng vic (m chng khng c support trn appstore), ti s dng **homebrew**, mt phn mm gip qun l cc phn mm khc rt hiu qu.\n\nVy cn trn Linux chng ta c g?\n\nTrc ht cn phi lm r: Package management system l mt cng c hoc mt h thng cc cng c c s dng  handle cc package.\n1.\tHandle l qun l vi y  cc chc nng nh thm mi, g b, nng cp, tm kim..v..v\n2.\tPackage l mt tin ch hoc nhng phn b tr cho mt tin ch no  (thc s cui cng n cng ch l tp hp ca cc file).\n\nMt **Package Management System** ni ting trn Linux  l **DPKG**, n l mt cng c  ci t cc package c ui .deb (cc package dnh cho cc h iu hnh thuc dng debian).\nNhim v ca **DPKG** l install hoc remove mt package (vi iu kin cc file cn thit  c trn local).\n\nn y nhiu bn c th thc mc rng t trc n gi bn cha h s dng cc dng lnh lin quan n **DPKG**, vy ti sao ti li bo l n rt ph bin? Cu tr li  l bn ang s dng cc phn mm package management system khc c xy dng da trn phn core l **DPKG**, mt trong s  l **APTGET/APT**.\n\nu im ln nht ca **APT** so vi **DPKG**  l **DPKG** ch c th ci t file khi m file   c trn local (tc l bng cch no  bn phi download hoc copy file  v my ca bn). Cn vi **APT**, n s tm kim cc package  t **remote repositories**, sau  download chng v my.\n\nim mnh th hai ca **APT** so vi **DPKG**  l n gii quyt c bi ton dependencies. Nu package bn cn ci t ph thuc vo mt vi package khc, nu s dng **DPKG** th bn s phi ci t tt c cc package k trn mt cch th cng.\nCn vi **APT**, n s t hiu c package  cn thm nhng ph tr no v t ng ci t phn ph tr.\n\niu tht s din ra  l trong **APT**, **DPKG** vn tn ti. N tn ti  mt cp thp hn v thc hin cc ch th ca **APT**.\n\nNote: Cc **remote repositories**  phn mm package management ca bn tm kim s c lu tr trong file **/etc/apt/sources.list** (a s l nh vy).\n\n## 4. Tham kho\n\n[1] [https://www.quora.com/What-is-package-management](https://www.quora.com/What-is-package-management)\n\n[2] [https://www.tecmint.com/linux-package-management/](https://www.tecmint.com/linux-package-management/)\n","slug":"2019-02-05-root-sudo-and-package-management-system","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsad000hp3m20u4h4iwp","content":"<h2 id=\"1-Root\"><a href=\"#1-Root\" class=\"headerlink\" title=\"1.Root\"></a>1.Root</h2><p>Xin c nhc li mt cu chuyn c ti  k trong bi vit trc vi v d v mnh t nh bn, bn s hu mnh t , v bn s hu mnh t  chung vi bn. Nhng v chng bn khng phi l nhng ngi s hu ti thng ca mnh t k trn, m quyn lc to ln ny thuc v nh nc, ngi thc ra l ang cho bn thu t c thi hn. Tng t trng Unix/Linux, s c nhng user (nh ti khon bn s dng  ng nhp, hoc ti khon khch).</p>\n<p>Vic nhng ti khon ny c th ng nhp vo h thng nhng c quyn ca chng b gii hn. Khi login vo h thng, bn c th lm mt s tc v nht nh ch khng th thch lm g th lm, trong h thng ca bn ch c mt user duy nht c quyn lm bt c iu g,  l mt super user.</p>\n<p>Trn windows, ta gi  l <strong>administrator</strong> (c l qu quen thuc, bn cn nh nhng lc ci phn mm, bn click vo file exe nhng chng trnh khng chu ci t, google mt lt, bn nhn c mt hng dn hy click phi vo file exe  v chn <strong>run as administrator</strong>,  chnh l sc mnh ca super user trn windows), cn trn macOS hay Ubuntu(1 i din ca Linux), n c gi l <strong>root</strong> (cui cng cng ch l mt ci tn gi, n c th c t tn l mo, l ch, n c th c t tn l bt c th g, chng ta khng cn quan tm, iu duy nht chng ta cn bit  l trn cc h iu hnh con chu ca Unix s lun c mt super user quyn lc nh vy).</p>\n<p>n lc ny, bn s t hi ti sao phi thit k h thng phc tp nh vy? Ti sao khng ch dung duy nht mt loi user?<br>Cu tr li rt n gin, khng phi ai s dng my tnh cng l nhng ngi dung c hiu bit su sc v h iu hnh. V vy, nu trao cho h nhng quyn lc qu ln, h c th v tnh gy ra nhng hu hoi nghim trng cho h thng (quyn lc cng ln th trch nhim cng ln).</p>\n<p>Mt vn  pht sinh nu vic s dng Root mang tnh ri ro qu cao nhng nhng user bnh thng li khng c cc quyn  ci t mt s phn mm nng cao th phi lm sao? Vn  ny s c gii thch  mc s 2.</p>\n<p>Note: Trn macOS v Ubuntu, <strong>root</strong> mc nh s c disable, chng c th s c enable tr li v re-disable. Cch thc hin th c l bn nn tm kim hng dn t trang ch ca nhng h iu hnh ny  cu lnh ca bn m bo chnh xc v khng b li thi.</p>\n<h2 id=\"2-Sudo\"><a href=\"#2-Sudo\" class=\"headerlink\" title=\"2.Sudo\"></a>2.Sudo</h2><p>Nh vn  ti  nu  cui mc 1, by gi ti mun ci t mt s phn mm i hi quyn ca super user, v l thuyt ti ng gia hai la chn hoc chuyn sang <strong>root</strong> v ci t phn mm bnh thng (rt ri ro), phng n 2 l ti vn s dng user thng v ni li tm bit vi nhng phn mm k trn.</p>\n<p>Qu t, c hai gii php trn u khng n, tht may, cc nh pht trin h thng  cung cp cho chng ta mt la chn s 3,  l bn vn s dng user thng nhng c th triu hi quyn lc ca super user  thc hin nhng lnh no .</p>\n<p>Cch s dng  l bn thm cu lnh <strong>sudo</strong> vo pha trc cu lnh cn s dng quyn ca super user. V d:</p>\n<p><strong>sudo apt-get update</strong></p>\n<p>Mt nhm ln thng xuyn vi c vi ti ngy mi tm hiu,  l sau khi g nhng cu lnh c <strong>sudo</strong>, h thng yu cu ti nhp mt khu v ti  tng ngh  l mt khu ca <strong>root</strong> (nghe cng hp l y ch, ta mn quyn ca <strong>root</strong> th phi s dng mt khu ca <strong>root</strong> ch nh? Ging nh khi ti mn nh ca bn th ti phi c cha kho ca bn). Nhng khng phi nh vy, mt khu bn nhp vo n thun l chnh mt khu ca user thng bn ang login trn my.</p>\n<p>Phn a cc trng hp khi bn thm <strong>sudo</strong>, cc cu lnh s chy mt cch hon ho. Tuy nhin, cng c nhng khi bn khng nhn c kt qu nh mong i v l do chnh l khng phi user no cng c th triu hi quyn lc ca super user. iu bn cn lm khi  l ni vi h iu hnh rng hy cho user ca ti ang s dng c quyn triu hi sc mnh ca super user. Hy xem v d di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#=&gt; /etc/sudoers (lu tr cc user c quyn thc hin c quyn ca super user)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; V d</span></span><br><span class=\"line\">root ALL=(<span class=\"symbol\">ALL:</span>ALL) ALL</span><br><span class=\"line\"><span class=\"comment\">#=&gt; user ang xt quyn tn l root</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all u tin ch ra rng rule ny c p dng cho tt c cc host</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all th hai ch ra, account root c th chy lnh vi quyn ca bt k user no.</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all th ba ch ra, account root c th chy lnh vi quyn ca bt k group no.</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all cui cng ch ra, account root c th chy bt k command no.</span></span><br></pre></td></tr></table></figure>\n\n<p>Note: K t khi bn nhp mt khu sau khi g lnh <strong>sudo</strong> ln u, thi gian c hiu lc ca mt khu ny s l 15 pht. Trong khong thi gian  bn c th chy cc lnh <strong>sudo</strong> khc m h iu hnh khng yu cu bn nhp li mt khu.</p>\n<h2 id=\"3-Package-management-system\"><a href=\"#3-Package-management-system\" class=\"headerlink\" title=\"3.Package management system\"></a>3.Package management system</h2><p>Khi s dng macOS,  ci t thm cc phn mm phc v cng vic (m chng khng c support trn appstore), ti s dng <strong>homebrew</strong>, mt phn mm gip qun l cc phn mm khc rt hiu qu.</p>\n<p>Vy cn trn Linux chng ta c g?</p>\n<p>Trc ht cn phi lm r: Package management system l mt cng c hoc mt h thng cc cng c c s dng  handle cc package.</p>\n<ol>\n<li>Handle l qun l vi y  cc chc nng nh thm mi, g b, nng cp, tm kim..v..v</li>\n<li>Package l mt tin ch hoc nhng phn b tr cho mt tin ch no  (thc s cui cng n cng ch l tp hp ca cc file).</li>\n</ol>\n<p>Mt <strong>Package Management System</strong> ni ting trn Linux  l <strong>DPKG</strong>, n l mt cng c  ci t cc package c ui .deb (cc package dnh cho cc h iu hnh thuc dng debian).<br>Nhim v ca <strong>DPKG</strong> l install hoc remove mt package (vi iu kin cc file cn thit  c trn local).</p>\n<p>n y nhiu bn c th thc mc rng t trc n gi bn cha h s dng cc dng lnh lin quan n <strong>DPKG</strong>, vy ti sao ti li bo l n rt ph bin? Cu tr li  l bn ang s dng cc phn mm package management system khc c xy dng da trn phn core l <strong>DPKG</strong>, mt trong s  l <strong>APTGET/APT</strong>.</p>\n<p>u im ln nht ca <strong>APT</strong> so vi <strong>DPKG</strong>  l <strong>DPKG</strong> ch c th ci t file khi m file   c trn local (tc l bng cch no  bn phi download hoc copy file  v my ca bn). Cn vi <strong>APT</strong>, n s tm kim cc package  t <strong>remote repositories</strong>, sau  download chng v my.</p>\n<p>im mnh th hai ca <strong>APT</strong> so vi <strong>DPKG</strong>  l n gii quyt c bi ton dependencies. Nu package bn cn ci t ph thuc vo mt vi package khc, nu s dng <strong>DPKG</strong> th bn s phi ci t tt c cc package k trn mt cch th cng.<br>Cn vi <strong>APT</strong>, n s t hiu c package  cn thm nhng ph tr no v t ng ci t phn ph tr.</p>\n<p>iu tht s din ra  l trong <strong>APT</strong>, <strong>DPKG</strong> vn tn ti. N tn ti  mt cp thp hn v thc hin cc ch th ca <strong>APT</strong>.</p>\n<p>Note: Cc <strong>remote repositories</strong>  phn mm package management ca bn tm kim s c lu tr trong file <strong>/etc/apt/sources.list</strong> (a s l nh vy).</p>\n<h2 id=\"4-Tham-khao\"><a href=\"#4-Tham-khao\" class=\"headerlink\" title=\"4. Tham kho\"></a>4. Tham kho</h2><p>[1] <a href=\"https://www.quora.com/What-is-package-management\" target=\"_blank\" rel=\"noopener\">https://www.quora.com/What-is-package-management</a></p>\n<p>[2] <a href=\"https://www.tecmint.com/linux-package-management/\" target=\"_blank\" rel=\"noopener\">https://www.tecmint.com/linux-package-management/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Root\"><a href=\"#1-Root\" class=\"headerlink\" title=\"1.Root\"></a>1.Root</h2><p>Xin c nhc li mt cu chuyn c ti  k trong bi vit trc vi v d v mnh t nh bn, bn s hu mnh t , v bn s hu mnh t  chung vi bn. Nhng v chng bn khng phi l nhng ngi s hu ti thng ca mnh t k trn, m quyn lc to ln ny thuc v nh nc, ngi thc ra l ang cho bn thu t c thi hn. Tng t trng Unix/Linux, s c nhng user (nh ti khon bn s dng  ng nhp, hoc ti khon khch).</p>\n<p>Vic nhng ti khon ny c th ng nhp vo h thng nhng c quyn ca chng b gii hn. Khi login vo h thng, bn c th lm mt s tc v nht nh ch khng th thch lm g th lm, trong h thng ca bn ch c mt user duy nht c quyn lm bt c iu g,  l mt super user.</p>\n<p>Trn windows, ta gi  l <strong>administrator</strong> (c l qu quen thuc, bn cn nh nhng lc ci phn mm, bn click vo file exe nhng chng trnh khng chu ci t, google mt lt, bn nhn c mt hng dn hy click phi vo file exe  v chn <strong>run as administrator</strong>,  chnh l sc mnh ca super user trn windows), cn trn macOS hay Ubuntu(1 i din ca Linux), n c gi l <strong>root</strong> (cui cng cng ch l mt ci tn gi, n c th c t tn l mo, l ch, n c th c t tn l bt c th g, chng ta khng cn quan tm, iu duy nht chng ta cn bit  l trn cc h iu hnh con chu ca Unix s lun c mt super user quyn lc nh vy).</p>\n<p>n lc ny, bn s t hi ti sao phi thit k h thng phc tp nh vy? Ti sao khng ch dung duy nht mt loi user?<br>Cu tr li rt n gin, khng phi ai s dng my tnh cng l nhng ngi dung c hiu bit su sc v h iu hnh. V vy, nu trao cho h nhng quyn lc qu ln, h c th v tnh gy ra nhng hu hoi nghim trng cho h thng (quyn lc cng ln th trch nhim cng ln).</p>\n<p>Mt vn  pht sinh nu vic s dng Root mang tnh ri ro qu cao nhng nhng user bnh thng li khng c cc quyn  ci t mt s phn mm nng cao th phi lm sao? Vn  ny s c gii thch  mc s 2.</p>\n<p>Note: Trn macOS v Ubuntu, <strong>root</strong> mc nh s c disable, chng c th s c enable tr li v re-disable. Cch thc hin th c l bn nn tm kim hng dn t trang ch ca nhng h iu hnh ny  cu lnh ca bn m bo chnh xc v khng b li thi.</p>\n<h2 id=\"2-Sudo\"><a href=\"#2-Sudo\" class=\"headerlink\" title=\"2.Sudo\"></a>2.Sudo</h2><p>Nh vn  ti  nu  cui mc 1, by gi ti mun ci t mt s phn mm i hi quyn ca super user, v l thuyt ti ng gia hai la chn hoc chuyn sang <strong>root</strong> v ci t phn mm bnh thng (rt ri ro), phng n 2 l ti vn s dng user thng v ni li tm bit vi nhng phn mm k trn.</p>\n<p>Qu t, c hai gii php trn u khng n, tht may, cc nh pht trin h thng  cung cp cho chng ta mt la chn s 3,  l bn vn s dng user thng nhng c th triu hi quyn lc ca super user  thc hin nhng lnh no .</p>\n<p>Cch s dng  l bn thm cu lnh <strong>sudo</strong> vo pha trc cu lnh cn s dng quyn ca super user. V d:</p>\n<p><strong>sudo apt-get update</strong></p>\n<p>Mt nhm ln thng xuyn vi c vi ti ngy mi tm hiu,  l sau khi g nhng cu lnh c <strong>sudo</strong>, h thng yu cu ti nhp mt khu v ti  tng ngh  l mt khu ca <strong>root</strong> (nghe cng hp l y ch, ta mn quyn ca <strong>root</strong> th phi s dng mt khu ca <strong>root</strong> ch nh? Ging nh khi ti mn nh ca bn th ti phi c cha kho ca bn). Nhng khng phi nh vy, mt khu bn nhp vo n thun l chnh mt khu ca user thng bn ang login trn my.</p>\n<p>Phn a cc trng hp khi bn thm <strong>sudo</strong>, cc cu lnh s chy mt cch hon ho. Tuy nhin, cng c nhng khi bn khng nhn c kt qu nh mong i v l do chnh l khng phi user no cng c th triu hi quyn lc ca super user. iu bn cn lm khi  l ni vi h iu hnh rng hy cho user ca ti ang s dng c quyn triu hi sc mnh ca super user. Hy xem v d di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#=&gt; /etc/sudoers (lu tr cc user c quyn thc hin c quyn ca super user)</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; V d</span></span><br><span class=\"line\">root ALL=(<span class=\"symbol\">ALL:</span>ALL) ALL</span><br><span class=\"line\"><span class=\"comment\">#=&gt; user ang xt quyn tn l root</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all u tin ch ra rng rule ny c p dng cho tt c cc host</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all th hai ch ra, account root c th chy lnh vi quyn ca bt k user no.</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all th ba ch ra, account root c th chy lnh vi quyn ca bt k group no.</span></span><br><span class=\"line\"><span class=\"comment\">#=&gt; Ch all cui cng ch ra, account root c th chy bt k command no.</span></span><br></pre></td></tr></table></figure>\n\n<p>Note: K t khi bn nhp mt khu sau khi g lnh <strong>sudo</strong> ln u, thi gian c hiu lc ca mt khu ny s l 15 pht. Trong khong thi gian  bn c th chy cc lnh <strong>sudo</strong> khc m h iu hnh khng yu cu bn nhp li mt khu.</p>\n<h2 id=\"3-Package-management-system\"><a href=\"#3-Package-management-system\" class=\"headerlink\" title=\"3.Package management system\"></a>3.Package management system</h2><p>Khi s dng macOS,  ci t thm cc phn mm phc v cng vic (m chng khng c support trn appstore), ti s dng <strong>homebrew</strong>, mt phn mm gip qun l cc phn mm khc rt hiu qu.</p>\n<p>Vy cn trn Linux chng ta c g?</p>\n<p>Trc ht cn phi lm r: Package management system l mt cng c hoc mt h thng cc cng c c s dng  handle cc package.</p>\n<ol>\n<li>Handle l qun l vi y  cc chc nng nh thm mi, g b, nng cp, tm kim..v..v</li>\n<li>Package l mt tin ch hoc nhng phn b tr cho mt tin ch no  (thc s cui cng n cng ch l tp hp ca cc file).</li>\n</ol>\n<p>Mt <strong>Package Management System</strong> ni ting trn Linux  l <strong>DPKG</strong>, n l mt cng c  ci t cc package c ui .deb (cc package dnh cho cc h iu hnh thuc dng debian).<br>Nhim v ca <strong>DPKG</strong> l install hoc remove mt package (vi iu kin cc file cn thit  c trn local).</p>\n<p>n y nhiu bn c th thc mc rng t trc n gi bn cha h s dng cc dng lnh lin quan n <strong>DPKG</strong>, vy ti sao ti li bo l n rt ph bin? Cu tr li  l bn ang s dng cc phn mm package management system khc c xy dng da trn phn core l <strong>DPKG</strong>, mt trong s  l <strong>APTGET/APT</strong>.</p>\n<p>u im ln nht ca <strong>APT</strong> so vi <strong>DPKG</strong>  l <strong>DPKG</strong> ch c th ci t file khi m file   c trn local (tc l bng cch no  bn phi download hoc copy file  v my ca bn). Cn vi <strong>APT</strong>, n s tm kim cc package  t <strong>remote repositories</strong>, sau  download chng v my.</p>\n<p>im mnh th hai ca <strong>APT</strong> so vi <strong>DPKG</strong>  l n gii quyt c bi ton dependencies. Nu package bn cn ci t ph thuc vo mt vi package khc, nu s dng <strong>DPKG</strong> th bn s phi ci t tt c cc package k trn mt cch th cng.<br>Cn vi <strong>APT</strong>, n s t hiu c package  cn thm nhng ph tr no v t ng ci t phn ph tr.</p>\n<p>iu tht s din ra  l trong <strong>APT</strong>, <strong>DPKG</strong> vn tn ti. N tn ti  mt cp thp hn v thc hin cc ch th ca <strong>APT</strong>.</p>\n<p>Note: Cc <strong>remote repositories</strong>  phn mm package management ca bn tm kim s c lu tr trong file <strong>/etc/apt/sources.list</strong> (a s l nh vy).</p>\n<h2 id=\"4-Tham-khao\"><a href=\"#4-Tham-khao\" class=\"headerlink\" title=\"4. Tham kho\"></a>4. Tham kho</h2><p>[1] <a href=\"https://www.quora.com/What-is-package-management\" target=\"_blank\" rel=\"noopener\">https://www.quora.com/What-is-package-management</a></p>\n<p>[2] <a href=\"https://www.tecmint.com/linux-package-management/\" target=\"_blank\" rel=\"noopener\">https://www.tecmint.com/linux-package-management/</a></p>\n"},{"title":"Method Lookup Trong Ruby","date":"2019-02-23T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n## 1. Method Lookup\n\n khi no bn t hi, gi s nu bn c mt class A, v class ny include thm hai module vo na, nu trong hai module  cng nh ngha mt phng thc, vy khi instance ca A gi n phng thc , iu g s xy ra? Phng thc trong module no c chy?\n\n\nCu tr li l th t cc phng thc c ruby tm kim nh sau:\n\n1. Phng thc c nh ngha trong **object's singleton class**.\n\n2. Phng thc trong **module** c mixin trong **singleton class**(Theo th t o ngc, vo sau s tm kim trc).\n\n3. Phng thc c nh ngha trong **class** ca i tng ta ang xt.\n\n4. Phng thc trong cc **module** c **include** vo class ta ang xt (Cng theo t t o ngc).\n\n5. Phng thc trong **Super class** ca class ta ang xt.\n\n lm r iu  ni hy xt v d di y:\n\n```ruby\nmodule One\n  def hello\n    \"I'm one (include in class Test)\"\n  end\nend\n\nmodule Two\n  def hello\n    \"I'm two (include in class Test)\"\n  end\nend\n\nmodule Three\n  def hello\n    \"I'm three (extend)\"\n  end\nend\n\nmodule Four\n  def hello\n    \"I'm four (extend)\"\n  end\nend\n\nclass FatherOfTest\n  def hello\n   \"I'm father of test class\"\n  end\nend\n\nclass Test < FatherOfTest\n  include One\n  include Two\n\n  def hello\n    \"It's my hello - Test class\"\n  end\nend\n\nm = Test.new\n\ndef m.hello\n  \"I'm object m\"\nend\n\nm.extend(Three)\nm.extend(Four)\n\nm.hello\n```\n\nTt nhin on m trn s c output l:\n\n**\"I'm object m\"**\n\nTheo th t tm kim  lit k  trn, khi ruby tm thy phng thc ln u n s dng tm kim v khi i ht cc th t v vn khng tm c th n s gi n mt phng thc mc inh l **method_missing**.\n\nB on code:\n\n```ruby\ndef m.hello\n  \"I'm object m\"\nend\n```\n\nChy li ta nhn c kt qu:\n\n**\"I'm four (extend)\"**\n\nLm tng t ri ta s tm ra th t u tin kt qu nh sau:\n\n``` ruby\n# phng thc hello cho ring instance m\n\"I'm object m\"\n# phng thc c extend ring cho m\n\"I'm four (extend)\"\n\"I'm three (extend)\"\n# phng thc trong chnh class Test, class ca m\n\"It's my hello - Test class\"\n# phng thc trong module c include vo Class Test\n\"I'm two (include in class Test)\"\n\"I'm one (include in class Test)\"\n# phng thc trong lp cha ca Class Test\n\"I'm father of test class\"\n```\n\nNu bn ang cn mt cht bi ri v nhng t kho v cch s dng **extend** v **include** hy c tip mc di.\n\n## 2. Extend, Include trong Ruby\n\nTrong ruby khng c a k tha, thay vo  ruby s dng **mixin**.\n\nMt class ch c k tha t mt class khc. Tuy nhin n c **mixin** nhiu **module** bng hai phng thc l **include** v **extend**.\n\n**include:** vi vic bn include moudle A vo trong class B, ng ngha vi vic instance ca class B c th s dng tt c cc **instance method** trong moudle A. Vy cn **module method** trong A th sao? Cu tr li l nhng **module method** trong A th A s dng thi.\n\n**extend:** ng vi ng ngha ca n, **m rng**, **extend** c th dng  m rng mt class hoc cng c th dng  m rng mt instance.  Trong v d trn mc 1, ti **extend** object **m**, t  gip m c m rng thm cc phng thc ng vi tt c cc **instance method** trong module n extend (y l \"m rng\" cho mt i tng). Nu ti mun m rng cho mt class, ti s extend moudle trong class , v sau  tt c cc **instance method** trong module s tr thnh nh cc **class method** cho class (y l s \"m rng\" cho mt lp). Vy cn **module method** trong moudle th sao?Cu tr li vn nh trn, nhng phng thc module th  module  s dng.\n","source":"_posts/2019-02-24-ruby-method-lookup.md","raw":"---\ntitle: \"Method Lookup Trong Ruby\"\ndate: 2019-02-24\ndraft: false\ntags: [\"ruby\"]\ncategories: [\"ruby notes\"]\nmytag: \"#TIL\"\n---\n\n## 1. Method Lookup\n\n khi no bn t hi, gi s nu bn c mt class A, v class ny include thm hai module vo na, nu trong hai module  cng nh ngha mt phng thc, vy khi instance ca A gi n phng thc , iu g s xy ra? Phng thc trong module no c chy?\n\n\nCu tr li l th t cc phng thc c ruby tm kim nh sau:\n\n1. Phng thc c nh ngha trong **object's singleton class**.\n\n2. Phng thc trong **module** c mixin trong **singleton class**(Theo th t o ngc, vo sau s tm kim trc).\n\n3. Phng thc c nh ngha trong **class** ca i tng ta ang xt.\n\n4. Phng thc trong cc **module** c **include** vo class ta ang xt (Cng theo t t o ngc).\n\n5. Phng thc trong **Super class** ca class ta ang xt.\n\n lm r iu  ni hy xt v d di y:\n\n```ruby\nmodule One\n  def hello\n    \"I'm one (include in class Test)\"\n  end\nend\n\nmodule Two\n  def hello\n    \"I'm two (include in class Test)\"\n  end\nend\n\nmodule Three\n  def hello\n    \"I'm three (extend)\"\n  end\nend\n\nmodule Four\n  def hello\n    \"I'm four (extend)\"\n  end\nend\n\nclass FatherOfTest\n  def hello\n   \"I'm father of test class\"\n  end\nend\n\nclass Test < FatherOfTest\n  include One\n  include Two\n\n  def hello\n    \"It's my hello - Test class\"\n  end\nend\n\nm = Test.new\n\ndef m.hello\n  \"I'm object m\"\nend\n\nm.extend(Three)\nm.extend(Four)\n\nm.hello\n```\n\nTt nhin on m trn s c output l:\n\n**\"I'm object m\"**\n\nTheo th t tm kim  lit k  trn, khi ruby tm thy phng thc ln u n s dng tm kim v khi i ht cc th t v vn khng tm c th n s gi n mt phng thc mc inh l **method_missing**.\n\nB on code:\n\n```ruby\ndef m.hello\n  \"I'm object m\"\nend\n```\n\nChy li ta nhn c kt qu:\n\n**\"I'm four (extend)\"**\n\nLm tng t ri ta s tm ra th t u tin kt qu nh sau:\n\n``` ruby\n# phng thc hello cho ring instance m\n\"I'm object m\"\n# phng thc c extend ring cho m\n\"I'm four (extend)\"\n\"I'm three (extend)\"\n# phng thc trong chnh class Test, class ca m\n\"It's my hello - Test class\"\n# phng thc trong module c include vo Class Test\n\"I'm two (include in class Test)\"\n\"I'm one (include in class Test)\"\n# phng thc trong lp cha ca Class Test\n\"I'm father of test class\"\n```\n\nNu bn ang cn mt cht bi ri v nhng t kho v cch s dng **extend** v **include** hy c tip mc di.\n\n## 2. Extend, Include trong Ruby\n\nTrong ruby khng c a k tha, thay vo  ruby s dng **mixin**.\n\nMt class ch c k tha t mt class khc. Tuy nhin n c **mixin** nhiu **module** bng hai phng thc l **include** v **extend**.\n\n**include:** vi vic bn include moudle A vo trong class B, ng ngha vi vic instance ca class B c th s dng tt c cc **instance method** trong moudle A. Vy cn **module method** trong A th sao? Cu tr li l nhng **module method** trong A th A s dng thi.\n\n**extend:** ng vi ng ngha ca n, **m rng**, **extend** c th dng  m rng mt class hoc cng c th dng  m rng mt instance.  Trong v d trn mc 1, ti **extend** object **m**, t  gip m c m rng thm cc phng thc ng vi tt c cc **instance method** trong module n extend (y l \"m rng\" cho mt i tng). Nu ti mun m rng cho mt class, ti s extend moudle trong class , v sau  tt c cc **instance method** trong module s tr thnh nh cc **class method** cho class (y l s \"m rng\" cho mt lp). Vy cn **module method** trong moudle th sao?Cu tr li vn nh trn, nhng phng thc module th  module  s dng.\n","slug":"2019-02-24-ruby-method-lookup","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsae000ip3m25gc82b75","content":"<h2 id=\"1-Method-Lookup\"><a href=\"#1-Method-Lookup\" class=\"headerlink\" title=\"1. Method Lookup\"></a>1. Method Lookup</h2><p> khi no bn t hi, gi s nu bn c mt class A, v class ny include thm hai module vo na, nu trong hai module  cng nh ngha mt phng thc, vy khi instance ca A gi n phng thc , iu g s xy ra? Phng thc trong module no c chy?</p>\n<p>Cu tr li l th t cc phng thc c ruby tm kim nh sau:</p>\n<ol>\n<li><p>Phng thc c nh ngha trong <strong>objects singleton class</strong>.</p>\n</li>\n<li><p>Phng thc trong <strong>module</strong> c mixin trong <strong>singleton class</strong>(Theo th t o ngc, vo sau s tm kim trc).</p>\n</li>\n<li><p>Phng thc c nh ngha trong <strong>class</strong> ca i tng ta ang xt.</p>\n</li>\n<li><p>Phng thc trong cc <strong>module</strong> c <strong>include</strong> vo class ta ang xt (Cng theo t t o ngc).</p>\n</li>\n<li><p>Phng thc trong <strong>Super class</strong> ca class ta ang xt.</p>\n</li>\n</ol>\n<p> lm r iu  ni hy xt v d di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">One</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm one (include in class Test)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Two</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm two (include in class Test)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Three</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm three (extend)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Four</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm four (extend)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FatherOfTest</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">   <span class=\"string\">\"I'm father of test class\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> &lt; FatherOfTest</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> One</span><br><span class=\"line\">  <span class=\"keyword\">include</span> Two</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"It's my hello - Test class\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">m = Test.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">m</span>.<span class=\"title\">hello</span></span></span><br><span class=\"line\">  <span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">m.extend(Three)</span><br><span class=\"line\">m.extend(Four)</span><br><span class=\"line\"></span><br><span class=\"line\">m.hello</span><br></pre></td></tr></table></figure>\n\n<p>Tt nhin on m trn s c output l:</p>\n<p><strong>Im object m</strong></p>\n<p>Theo th t tm kim  lit k  trn, khi ruby tm thy phng thc ln u n s dng tm kim v khi i ht cc th t v vn khng tm c th n s gi n mt phng thc mc inh l <strong>method_missing</strong>.</p>\n<p>B on code:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">m</span>.<span class=\"title\">hello</span></span></span><br><span class=\"line\">  <span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy li ta nhn c kt qu:</p>\n<p><strong>Im four (extend)</strong></p>\n<p>Lm tng t ri ta s tm ra th t u tin kt qu nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># phng thc hello cho ring instance m</span></span><br><span class=\"line\"><span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc c extend ring cho m</span></span><br><span class=\"line\"><span class=\"string\">\"I'm four (extend)\"</span></span><br><span class=\"line\"><span class=\"string\">\"I'm three (extend)\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong chnh class Test, class ca m</span></span><br><span class=\"line\"><span class=\"string\">\"It's my hello - Test class\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong module c include vo Class Test</span></span><br><span class=\"line\"><span class=\"string\">\"I'm two (include in class Test)\"</span></span><br><span class=\"line\"><span class=\"string\">\"I'm one (include in class Test)\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong lp cha ca Class Test</span></span><br><span class=\"line\"><span class=\"string\">\"I'm father of test class\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu bn ang cn mt cht bi ri v nhng t kho v cch s dng <strong>extend</strong> v <strong>include</strong> hy c tip mc di.</p>\n<h2 id=\"2-Extend-Include-trong-Ruby\"><a href=\"#2-Extend-Include-trong-Ruby\" class=\"headerlink\" title=\"2. Extend, Include trong Ruby\"></a>2. Extend, Include trong Ruby</h2><p>Trong ruby khng c a k tha, thay vo  ruby s dng <strong>mixin</strong>.</p>\n<p>Mt class ch c k tha t mt class khc. Tuy nhin n c <strong>mixin</strong> nhiu <strong>module</strong> bng hai phng thc l <strong>include</strong> v <strong>extend</strong>.</p>\n<p><strong>include:</strong> vi vic bn include moudle A vo trong class B, ng ngha vi vic instance ca class B c th s dng tt c cc <strong>instance method</strong> trong moudle A. Vy cn <strong>module method</strong> trong A th sao? Cu tr li l nhng <strong>module method</strong> trong A th A s dng thi.</p>\n<p><strong>extend:</strong> ng vi ng ngha ca n, <strong>m rng</strong>, <strong>extend</strong> c th dng  m rng mt class hoc cng c th dng  m rng mt instance.  Trong v d trn mc 1, ti <strong>extend</strong> object <strong>m</strong>, t  gip m c m rng thm cc phng thc ng vi tt c cc <strong>instance method</strong> trong module n extend (y l m rng cho mt i tng). Nu ti mun m rng cho mt class, ti s extend moudle trong class , v sau  tt c cc <strong>instance method</strong> trong module s tr thnh nh cc <strong>class method</strong> cho class (y l s m rng cho mt lp). Vy cn <strong>module method</strong> trong moudle th sao?Cu tr li vn nh trn, nhng phng thc module th  module  s dng.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Method-Lookup\"><a href=\"#1-Method-Lookup\" class=\"headerlink\" title=\"1. Method Lookup\"></a>1. Method Lookup</h2><p> khi no bn t hi, gi s nu bn c mt class A, v class ny include thm hai module vo na, nu trong hai module  cng nh ngha mt phng thc, vy khi instance ca A gi n phng thc , iu g s xy ra? Phng thc trong module no c chy?</p>\n<p>Cu tr li l th t cc phng thc c ruby tm kim nh sau:</p>\n<ol>\n<li><p>Phng thc c nh ngha trong <strong>objects singleton class</strong>.</p>\n</li>\n<li><p>Phng thc trong <strong>module</strong> c mixin trong <strong>singleton class</strong>(Theo th t o ngc, vo sau s tm kim trc).</p>\n</li>\n<li><p>Phng thc c nh ngha trong <strong>class</strong> ca i tng ta ang xt.</p>\n</li>\n<li><p>Phng thc trong cc <strong>module</strong> c <strong>include</strong> vo class ta ang xt (Cng theo t t o ngc).</p>\n</li>\n<li><p>Phng thc trong <strong>Super class</strong> ca class ta ang xt.</p>\n</li>\n</ol>\n<p> lm r iu  ni hy xt v d di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">One</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm one (include in class Test)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Two</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm two (include in class Test)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Three</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm three (extend)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Four</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"I'm four (extend)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FatherOfTest</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">   <span class=\"string\">\"I'm father of test class\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> &lt; FatherOfTest</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> One</span><br><span class=\"line\">  <span class=\"keyword\">include</span> Two</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    <span class=\"string\">\"It's my hello - Test class\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">m = Test.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">m</span>.<span class=\"title\">hello</span></span></span><br><span class=\"line\">  <span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">m.extend(Three)</span><br><span class=\"line\">m.extend(Four)</span><br><span class=\"line\"></span><br><span class=\"line\">m.hello</span><br></pre></td></tr></table></figure>\n\n<p>Tt nhin on m trn s c output l:</p>\n<p><strong>Im object m</strong></p>\n<p>Theo th t tm kim  lit k  trn, khi ruby tm thy phng thc ln u n s dng tm kim v khi i ht cc th t v vn khng tm c th n s gi n mt phng thc mc inh l <strong>method_missing</strong>.</p>\n<p>B on code:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">m</span>.<span class=\"title\">hello</span></span></span><br><span class=\"line\">  <span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy li ta nhn c kt qu:</p>\n<p><strong>Im four (extend)</strong></p>\n<p>Lm tng t ri ta s tm ra th t u tin kt qu nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># phng thc hello cho ring instance m</span></span><br><span class=\"line\"><span class=\"string\">\"I'm object m\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc c extend ring cho m</span></span><br><span class=\"line\"><span class=\"string\">\"I'm four (extend)\"</span></span><br><span class=\"line\"><span class=\"string\">\"I'm three (extend)\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong chnh class Test, class ca m</span></span><br><span class=\"line\"><span class=\"string\">\"It's my hello - Test class\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong module c include vo Class Test</span></span><br><span class=\"line\"><span class=\"string\">\"I'm two (include in class Test)\"</span></span><br><span class=\"line\"><span class=\"string\">\"I'm one (include in class Test)\"</span></span><br><span class=\"line\"><span class=\"comment\"># phng thc trong lp cha ca Class Test</span></span><br><span class=\"line\"><span class=\"string\">\"I'm father of test class\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu bn ang cn mt cht bi ri v nhng t kho v cch s dng <strong>extend</strong> v <strong>include</strong> hy c tip mc di.</p>\n<h2 id=\"2-Extend-Include-trong-Ruby\"><a href=\"#2-Extend-Include-trong-Ruby\" class=\"headerlink\" title=\"2. Extend, Include trong Ruby\"></a>2. Extend, Include trong Ruby</h2><p>Trong ruby khng c a k tha, thay vo  ruby s dng <strong>mixin</strong>.</p>\n<p>Mt class ch c k tha t mt class khc. Tuy nhin n c <strong>mixin</strong> nhiu <strong>module</strong> bng hai phng thc l <strong>include</strong> v <strong>extend</strong>.</p>\n<p><strong>include:</strong> vi vic bn include moudle A vo trong class B, ng ngha vi vic instance ca class B c th s dng tt c cc <strong>instance method</strong> trong moudle A. Vy cn <strong>module method</strong> trong A th sao? Cu tr li l nhng <strong>module method</strong> trong A th A s dng thi.</p>\n<p><strong>extend:</strong> ng vi ng ngha ca n, <strong>m rng</strong>, <strong>extend</strong> c th dng  m rng mt class hoc cng c th dng  m rng mt instance.  Trong v d trn mc 1, ti <strong>extend</strong> object <strong>m</strong>, t  gip m c m rng thm cc phng thc ng vi tt c cc <strong>instance method</strong> trong module n extend (y l m rng cho mt i tng). Nu ti mun m rng cho mt class, ti s extend moudle trong class , v sau  tt c cc <strong>instance method</strong> trong module s tr thnh nh cc <strong>class method</strong> cho class (y l s m rng cho mt lp). Vy cn <strong>module method</strong> trong moudle th sao?Cu tr li vn nh trn, nhng phng thc module th  module  s dng.</p>\n"},{"title":"Lu Tr Thng Tin Bo Mt Trong Rails?","date":"2019-02-21T17:00:00.000Z","draft":false,"mytag":"Rails","mytrend":"COOL","_content":"\n## 1. Khi qut\n\nBi ton ny n gin hiu nh sau: Mt project bt k s lun c nhng thng tin cu hnh v cng quan trng, bt buc phi lun gi chng private, cn lm cch no  gi chng private trong rails?\nCu tr li l tu vo mi phin bn rails, s c (c th c) nhng cch khc nhau  x l vn  ny. Hy i n cc du mc c th di y.\n\n## 2. Rails 4.1\n\nPhin bn rails ny s dng mt file c tn **secrets.yml**, y l file s lu ton b cc thng tin nhy cm chng ta  ni  trn.\nVi thit k nh ny ta c hai la chn cho ng dng ca mnh:\n1. em ht thng tin nhy cm di ng text b vo file ny, tuy nhin file ny phi c b vo trong danh mc ca **gitignore**  m bo thng tin trong  khng b bn v tnh hay hu  commit i u .\n\n2. Thng tin nhy cm lu trong file ny thay v c lu di dng text th s c lu trong my ca bn doi dng **bin mi trng** v trong file **secrets.yml** ch s dng phng thc **ENV** m rails cung cp  gi li cc thng tin  ln, vi la chn ny bn c th commit file ny thoi mi,  cc my tnh ng nghip,  c th s dng c nhng config ny th buc h phi thit lp bin mi trng trn my tnh ca h cho ph hp.\n\nNhc im: d s dng cch no, th  ng dng hot ng c th vn phi truyn gi tr cc thng tin nhy cm ny t my ca bn ln mt con vps khi trin khai chng hn, khng cn cch no khc. C th bn phi copy tng dng thng tin nhy cm ri paste qua remote shell  thit lp (vi nhng d n ln c rt nhiu thng tin quan trng th y l 1 cng vic vt v tim tng nguy c sai st).\n\nNote: Thay v s dng file **secrets.yml**, ta c th s dng mt file khc nh **application.yml**, mc ch v chc nng ca chng l tng ng.\n\n## 3. Rails 5.1\n\nSang n phin bn rails 5.1, mt thay i ln  ti. Thay v lu thng tin dng text hoc triu hi thng qua bin mi trng, rails khi ny cung cp kh nng m ho cho cc thng tin nhy cm ny.\nCch chng hot ng nh sau:\n\nMt file tn **secrets.yml.key** s cha gi tr ca mt bin tn **RAILS_MASTER_KEY**, bin ny c gi tr l mt chui, c chc nng c s dng  m ho v gii m cc thng tin quan trng.\n\nNi dung thng tin **sau** m ho s c lu ti file **secrets.yml.enc**\n\nVy cn file **secrets.yml** trong rails 4 gi cn khng? Cu tr li l bn vn c th s dng file ny, tuy nhin trn cng mt mi trng, nu c c file **secrets.yml** v **secrets.yml.enc** th hai file ny s c merge.\n\n c th s dng tnh nng encypt ny ca rails 5.1 ta setup nh sau:\n\n```ruby\nrails secrets:setup\n```\nSau cu lnh ny hai file **secrets.yml.key** v **secrets.yml.enc** s c to ra.  thm xo sa ni dung trong **secrets.yml.enc** ta s dng lnh sau:\n\n```ruby\nrails secrets:edit\n```\n\nCu lnh ny s m ni dung file **secrets.yml.enc** di dng  gii m. Bn c th thoi mi thm xo, sa cc thng tin nhy cm, sau  khi bn save li v tt editor th file **secrets.yml.enc** s t ng c cp nhp phn m ho mi nht khi c thm thng tin.\n\nTi thch dng **vim**  chnh sa, v ti khng mun set mc nh editor nn ti s dng cu lnh sau: **EDITOR=vi rails secrets:edit**.\n\nu im:\n\n1. Thay v phi qun l nhiu bin mi trng, gi y mi th u nm trong mt file.\n\n2. Vic c th commit **secrets.yml.enc** gip chng ta nm c lch s thay i ca file ny.\n\nNote: Mt im quan trng bn cn lu ,  l ti khi vit bi vit ny th ti vn cha thy rails s gii m thng tin m ho trong file **secrets.yml.enc**, chng ta buc phi lm th cng  nhc rails lm iu  bng cch thm vo config file ca bn **config.read_encrypted_secrets = true**. Vi cu lnh setup bn trn, dng config trn  c add vo file config ca production. Nu bn mun s dng tnh nng ny cho mi trng development th hy thm dng config ny vo file **config/environments/development.rb**.\n\n## 3. Rails 5.2\n\n tng trong rails 5.2 khng thay i nhiu so vi rails 5.1. Nhng thay v lu key  encrypt/decrypt trong file secrets.yml.key gi n c lu trong file **master.key** (tuy nhin nu khng s dng file th c rails 5.2 v 5.1 u c th gi bin mi trng RAILS_MASTER_KEY  s dng).\n\nFile lu thng tin  c m ho cng c thay i t secrets.yml.enc thnh **credentials.yml.enc**.   l nhng im khc bit duy nht.\n\n chnh sa thng tin trong file m ho ta s dng lnh:\n\n```ruby\nEDITOR=vi rails credentials:edit\n```\nKhng cn dng lnh setup nh trn, v trong rails 5.2, hai file key v m ho c sinh ra cng project.\n\nTa c th truy xut gi tr c gii m trong file **credentials.yml.enc** nh sau:\n\n```ruby\nRails.application.credentials.ten_bien_trong_credentials\n```\n\nLm g khi bn mun thay th **master.key**?\n\n1. **rails credentials:show** dng lnh ny  hin th thng tin dng gii m ra editor, copy chng.\n\n2. Xo hai file **master.key** v **credentials.yml.enc** i.\n\n3. **EDITOR=vim rails credentials:edit** vi lnh sau bn s generate li hai file mi. Vic cn lm by gi l paste thng tin  bc 1 vo editor khi ny ri save li.\n\n## 4. secret_key_base\n\nNu lm theo hng dn bn trn, ta s thu c mt file m ho v d: **credentials.yml.enc** c cha ni dung ngay c khi ta mi va khi to project. iu g  xy ra? Ti cn cha kp edit th n ly thng tin g m m ho ra ni dung  vy? Cu tr li l mt th c to km project ca bn c tn l **secret_key_base** s l th u tin c t ng lu m ho vo file **credentials.yml.enc**.\n\nSao li phc tp nh vy? n vi **RAILS_MASTER_KEY**  trn c quan h g khng? Cu tr li l khng? **secret_key_base** c rails sinh ra khi to project, n m bo rng khng th c hai ng dng rails c chung mt **secet_key_base**, ci key s c s dng  o bo th nh du tnh duy nht ca mt project v n cn c dng lm nhiu vic hay ho khc ti s trnh by trong cc bi vit sp ti.\n\n to ra mt secret_key_base bn c th s dng lnh sau:\n\n```ruby\nrails secret\n```\n","source":"_posts/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails.md","raw":"---\ntitle: \"Lu Tr Thng Tin Bo Mt Trong Rails?\"\ndate: 2019-02-22\ndraft: false\ntags: [\"secure\", \"rails\"]\ncategories: [\"rails notes\"]\nmytag: \"Rails\"\nmytrend: \"COOL\"\n---\n\n## 1. Khi qut\n\nBi ton ny n gin hiu nh sau: Mt project bt k s lun c nhng thng tin cu hnh v cng quan trng, bt buc phi lun gi chng private, cn lm cch no  gi chng private trong rails?\nCu tr li l tu vo mi phin bn rails, s c (c th c) nhng cch khc nhau  x l vn  ny. Hy i n cc du mc c th di y.\n\n## 2. Rails 4.1\n\nPhin bn rails ny s dng mt file c tn **secrets.yml**, y l file s lu ton b cc thng tin nhy cm chng ta  ni  trn.\nVi thit k nh ny ta c hai la chn cho ng dng ca mnh:\n1. em ht thng tin nhy cm di ng text b vo file ny, tuy nhin file ny phi c b vo trong danh mc ca **gitignore**  m bo thng tin trong  khng b bn v tnh hay hu  commit i u .\n\n2. Thng tin nhy cm lu trong file ny thay v c lu di dng text th s c lu trong my ca bn doi dng **bin mi trng** v trong file **secrets.yml** ch s dng phng thc **ENV** m rails cung cp  gi li cc thng tin  ln, vi la chn ny bn c th commit file ny thoi mi,  cc my tnh ng nghip,  c th s dng c nhng config ny th buc h phi thit lp bin mi trng trn my tnh ca h cho ph hp.\n\nNhc im: d s dng cch no, th  ng dng hot ng c th vn phi truyn gi tr cc thng tin nhy cm ny t my ca bn ln mt con vps khi trin khai chng hn, khng cn cch no khc. C th bn phi copy tng dng thng tin nhy cm ri paste qua remote shell  thit lp (vi nhng d n ln c rt nhiu thng tin quan trng th y l 1 cng vic vt v tim tng nguy c sai st).\n\nNote: Thay v s dng file **secrets.yml**, ta c th s dng mt file khc nh **application.yml**, mc ch v chc nng ca chng l tng ng.\n\n## 3. Rails 5.1\n\nSang n phin bn rails 5.1, mt thay i ln  ti. Thay v lu thng tin dng text hoc triu hi thng qua bin mi trng, rails khi ny cung cp kh nng m ho cho cc thng tin nhy cm ny.\nCch chng hot ng nh sau:\n\nMt file tn **secrets.yml.key** s cha gi tr ca mt bin tn **RAILS_MASTER_KEY**, bin ny c gi tr l mt chui, c chc nng c s dng  m ho v gii m cc thng tin quan trng.\n\nNi dung thng tin **sau** m ho s c lu ti file **secrets.yml.enc**\n\nVy cn file **secrets.yml** trong rails 4 gi cn khng? Cu tr li l bn vn c th s dng file ny, tuy nhin trn cng mt mi trng, nu c c file **secrets.yml** v **secrets.yml.enc** th hai file ny s c merge.\n\n c th s dng tnh nng encypt ny ca rails 5.1 ta setup nh sau:\n\n```ruby\nrails secrets:setup\n```\nSau cu lnh ny hai file **secrets.yml.key** v **secrets.yml.enc** s c to ra.  thm xo sa ni dung trong **secrets.yml.enc** ta s dng lnh sau:\n\n```ruby\nrails secrets:edit\n```\n\nCu lnh ny s m ni dung file **secrets.yml.enc** di dng  gii m. Bn c th thoi mi thm xo, sa cc thng tin nhy cm, sau  khi bn save li v tt editor th file **secrets.yml.enc** s t ng c cp nhp phn m ho mi nht khi c thm thng tin.\n\nTi thch dng **vim**  chnh sa, v ti khng mun set mc nh editor nn ti s dng cu lnh sau: **EDITOR=vi rails secrets:edit**.\n\nu im:\n\n1. Thay v phi qun l nhiu bin mi trng, gi y mi th u nm trong mt file.\n\n2. Vic c th commit **secrets.yml.enc** gip chng ta nm c lch s thay i ca file ny.\n\nNote: Mt im quan trng bn cn lu ,  l ti khi vit bi vit ny th ti vn cha thy rails s gii m thng tin m ho trong file **secrets.yml.enc**, chng ta buc phi lm th cng  nhc rails lm iu  bng cch thm vo config file ca bn **config.read_encrypted_secrets = true**. Vi cu lnh setup bn trn, dng config trn  c add vo file config ca production. Nu bn mun s dng tnh nng ny cho mi trng development th hy thm dng config ny vo file **config/environments/development.rb**.\n\n## 3. Rails 5.2\n\n tng trong rails 5.2 khng thay i nhiu so vi rails 5.1. Nhng thay v lu key  encrypt/decrypt trong file secrets.yml.key gi n c lu trong file **master.key** (tuy nhin nu khng s dng file th c rails 5.2 v 5.1 u c th gi bin mi trng RAILS_MASTER_KEY  s dng).\n\nFile lu thng tin  c m ho cng c thay i t secrets.yml.enc thnh **credentials.yml.enc**.   l nhng im khc bit duy nht.\n\n chnh sa thng tin trong file m ho ta s dng lnh:\n\n```ruby\nEDITOR=vi rails credentials:edit\n```\nKhng cn dng lnh setup nh trn, v trong rails 5.2, hai file key v m ho c sinh ra cng project.\n\nTa c th truy xut gi tr c gii m trong file **credentials.yml.enc** nh sau:\n\n```ruby\nRails.application.credentials.ten_bien_trong_credentials\n```\n\nLm g khi bn mun thay th **master.key**?\n\n1. **rails credentials:show** dng lnh ny  hin th thng tin dng gii m ra editor, copy chng.\n\n2. Xo hai file **master.key** v **credentials.yml.enc** i.\n\n3. **EDITOR=vim rails credentials:edit** vi lnh sau bn s generate li hai file mi. Vic cn lm by gi l paste thng tin  bc 1 vo editor khi ny ri save li.\n\n## 4. secret_key_base\n\nNu lm theo hng dn bn trn, ta s thu c mt file m ho v d: **credentials.yml.enc** c cha ni dung ngay c khi ta mi va khi to project. iu g  xy ra? Ti cn cha kp edit th n ly thng tin g m m ho ra ni dung  vy? Cu tr li l mt th c to km project ca bn c tn l **secret_key_base** s l th u tin c t ng lu m ho vo file **credentials.yml.enc**.\n\nSao li phc tp nh vy? n vi **RAILS_MASTER_KEY**  trn c quan h g khng? Cu tr li l khng? **secret_key_base** c rails sinh ra khi to project, n m bo rng khng th c hai ng dng rails c chung mt **secet_key_base**, ci key s c s dng  o bo th nh du tnh duy nht ca mt project v n cn c dng lm nhiu vic hay ho khc ti s trnh by trong cc bi vit sp ti.\n\n to ra mt secret_key_base bn c th s dng lnh sau:\n\n```ruby\nrails secret\n```\n","slug":"2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsaf000mp3m2fmqielb1","content":"<h2 id=\"1-Khai-quat\"><a href=\"#1-Khai-quat\" class=\"headerlink\" title=\"1. Khi qut\"></a>1. Khi qut</h2><p>Bi ton ny n gin hiu nh sau: Mt project bt k s lun c nhng thng tin cu hnh v cng quan trng, bt buc phi lun gi chng private, cn lm cch no  gi chng private trong rails?<br>Cu tr li l tu vo mi phin bn rails, s c (c th c) nhng cch khc nhau  x l vn  ny. Hy i n cc du mc c th di y.</p>\n<h2 id=\"2-Rails-4-1\"><a href=\"#2-Rails-4-1\" class=\"headerlink\" title=\"2. Rails 4.1\"></a>2. Rails 4.1</h2><p>Phin bn rails ny s dng mt file c tn <strong>secrets.yml</strong>, y l file s lu ton b cc thng tin nhy cm chng ta  ni  trn.<br>Vi thit k nh ny ta c hai la chn cho ng dng ca mnh:</p>\n<ol>\n<li><p>em ht thng tin nhy cm di ng text b vo file ny, tuy nhin file ny phi c b vo trong danh mc ca <strong>gitignore</strong>  m bo thng tin trong  khng b bn v tnh hay hu  commit i u .</p>\n</li>\n<li><p>Thng tin nhy cm lu trong file ny thay v c lu di dng text th s c lu trong my ca bn doi dng <strong>bin mi trng</strong> v trong file <strong>secrets.yml</strong> ch s dng phng thc <strong>ENV</strong> m rails cung cp  gi li cc thng tin  ln, vi la chn ny bn c th commit file ny thoi mi,  cc my tnh ng nghip,  c th s dng c nhng config ny th buc h phi thit lp bin mi trng trn my tnh ca h cho ph hp.</p>\n</li>\n</ol>\n<p>Nhc im: d s dng cch no, th  ng dng hot ng c th vn phi truyn gi tr cc thng tin nhy cm ny t my ca bn ln mt con vps khi trin khai chng hn, khng cn cch no khc. C th bn phi copy tng dng thng tin nhy cm ri paste qua remote shell  thit lp (vi nhng d n ln c rt nhiu thng tin quan trng th y l 1 cng vic vt v tim tng nguy c sai st).</p>\n<p>Note: Thay v s dng file <strong>secrets.yml</strong>, ta c th s dng mt file khc nh <strong>application.yml</strong>, mc ch v chc nng ca chng l tng ng.</p>\n<h2 id=\"3-Rails-5-1\"><a href=\"#3-Rails-5-1\" class=\"headerlink\" title=\"3. Rails 5.1\"></a>3. Rails 5.1</h2><p>Sang n phin bn rails 5.1, mt thay i ln  ti. Thay v lu thng tin dng text hoc triu hi thng qua bin mi trng, rails khi ny cung cp kh nng m ho cho cc thng tin nhy cm ny.<br>Cch chng hot ng nh sau:</p>\n<p>Mt file tn <strong>secrets.yml.key</strong> s cha gi tr ca mt bin tn <strong>RAILS_MASTER_KEY</strong>, bin ny c gi tr l mt chui, c chc nng c s dng  m ho v gii m cc thng tin quan trng.</p>\n<p>Ni dung thng tin <strong>sau</strong> m ho s c lu ti file <strong>secrets.yml.enc</strong></p>\n<p>Vy cn file <strong>secrets.yml</strong> trong rails 4 gi cn khng? Cu tr li l bn vn c th s dng file ny, tuy nhin trn cng mt mi trng, nu c c file <strong>secrets.yml</strong> v <strong>secrets.yml.enc</strong> th hai file ny s c merge.</p>\n<p> c th s dng tnh nng encypt ny ca rails 5.1 ta setup nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails <span class=\"symbol\">secrets:</span>setup</span><br></pre></td></tr></table></figure>\n<p>Sau cu lnh ny hai file <strong>secrets.yml.key</strong> v <strong>secrets.yml.enc</strong> s c to ra.  thm xo sa ni dung trong <strong>secrets.yml.enc</strong> ta s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails <span class=\"symbol\">secrets:</span>edit</span><br></pre></td></tr></table></figure>\n\n<p>Cu lnh ny s m ni dung file <strong>secrets.yml.enc</strong> di dng  gii m. Bn c th thoi mi thm xo, sa cc thng tin nhy cm, sau  khi bn save li v tt editor th file <strong>secrets.yml.enc</strong> s t ng c cp nhp phn m ho mi nht khi c thm thng tin.</p>\n<p>Ti thch dng <strong>vim</strong>  chnh sa, v ti khng mun set mc nh editor nn ti s dng cu lnh sau: <strong>EDITOR=vi rails secrets:edit</strong>.</p>\n<p>u im:</p>\n<ol>\n<li><p>Thay v phi qun l nhiu bin mi trng, gi y mi th u nm trong mt file.</p>\n</li>\n<li><p>Vic c th commit <strong>secrets.yml.enc</strong> gip chng ta nm c lch s thay i ca file ny.</p>\n</li>\n</ol>\n<p>Note: Mt im quan trng bn cn lu ,  l ti khi vit bi vit ny th ti vn cha thy rails s gii m thng tin m ho trong file <strong>secrets.yml.enc</strong>, chng ta buc phi lm th cng  nhc rails lm iu  bng cch thm vo config file ca bn <strong>config.read_encrypted_secrets = true</strong>. Vi cu lnh setup bn trn, dng config trn  c add vo file config ca production. Nu bn mun s dng tnh nng ny cho mi trng development th hy thm dng config ny vo file <strong>config/environments/development.rb</strong>.</p>\n<h2 id=\"3-Rails-5-2\"><a href=\"#3-Rails-5-2\" class=\"headerlink\" title=\"3. Rails 5.2\"></a>3. Rails 5.2</h2><p> tng trong rails 5.2 khng thay i nhiu so vi rails 5.1. Nhng thay v lu key  encrypt/decrypt trong file secrets.yml.key gi n c lu trong file <strong>master.key</strong> (tuy nhin nu khng s dng file th c rails 5.2 v 5.1 u c th gi bin mi trng RAILS_MASTER_KEY  s dng).</p>\n<p>File lu thng tin  c m ho cng c thay i t secrets.yml.enc thnh <strong>credentials.yml.enc</strong>.   l nhng im khc bit duy nht.</p>\n<p> chnh sa thng tin trong file m ho ta s dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EDITOR=vi rails <span class=\"symbol\">credentials:</span>edit</span><br></pre></td></tr></table></figure>\n<p>Khng cn dng lnh setup nh trn, v trong rails 5.2, hai file key v m ho c sinh ra cng project.</p>\n<p>Ta c th truy xut gi tr c gii m trong file <strong>credentials.yml.enc</strong> nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Rails.application.credentials.ten_bien_trong_credentials</span><br></pre></td></tr></table></figure>\n\n<p>Lm g khi bn mun thay th <strong>master.key</strong>?</p>\n<ol>\n<li><p><strong>rails credentials:show</strong> dng lnh ny  hin th thng tin dng gii m ra editor, copy chng.</p>\n</li>\n<li><p>Xo hai file <strong>master.key</strong> v <strong>credentials.yml.enc</strong> i.</p>\n</li>\n<li><p><strong>EDITOR=vim rails credentials:edit</strong> vi lnh sau bn s generate li hai file mi. Vic cn lm by gi l paste thng tin  bc 1 vo editor khi ny ri save li.</p>\n</li>\n</ol>\n<h2 id=\"4-secret-key-base\"><a href=\"#4-secret-key-base\" class=\"headerlink\" title=\"4. secret_key_base\"></a>4. secret_key_base</h2><p>Nu lm theo hng dn bn trn, ta s thu c mt file m ho v d: <strong>credentials.yml.enc</strong> c cha ni dung ngay c khi ta mi va khi to project. iu g  xy ra? Ti cn cha kp edit th n ly thng tin g m m ho ra ni dung  vy? Cu tr li l mt th c to km project ca bn c tn l <strong>secret_key_base</strong> s l th u tin c t ng lu m ho vo file <strong>credentials.yml.enc</strong>.</p>\n<p>Sao li phc tp nh vy? n vi <strong>RAILS_MASTER_KEY</strong>  trn c quan h g khng? Cu tr li l khng? <strong>secret_key_base</strong> c rails sinh ra khi to project, n m bo rng khng th c hai ng dng rails c chung mt <strong>secet_key_base</strong>, ci key s c s dng  o bo th nh du tnh duy nht ca mt project v n cn c dng lm nhiu vic hay ho khc ti s trnh by trong cc bi vit sp ti.</p>\n<p> to ra mt secret_key_base bn c th s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails secret</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Khai-quat\"><a href=\"#1-Khai-quat\" class=\"headerlink\" title=\"1. Khi qut\"></a>1. Khi qut</h2><p>Bi ton ny n gin hiu nh sau: Mt project bt k s lun c nhng thng tin cu hnh v cng quan trng, bt buc phi lun gi chng private, cn lm cch no  gi chng private trong rails?<br>Cu tr li l tu vo mi phin bn rails, s c (c th c) nhng cch khc nhau  x l vn  ny. Hy i n cc du mc c th di y.</p>\n<h2 id=\"2-Rails-4-1\"><a href=\"#2-Rails-4-1\" class=\"headerlink\" title=\"2. Rails 4.1\"></a>2. Rails 4.1</h2><p>Phin bn rails ny s dng mt file c tn <strong>secrets.yml</strong>, y l file s lu ton b cc thng tin nhy cm chng ta  ni  trn.<br>Vi thit k nh ny ta c hai la chn cho ng dng ca mnh:</p>\n<ol>\n<li><p>em ht thng tin nhy cm di ng text b vo file ny, tuy nhin file ny phi c b vo trong danh mc ca <strong>gitignore</strong>  m bo thng tin trong  khng b bn v tnh hay hu  commit i u .</p>\n</li>\n<li><p>Thng tin nhy cm lu trong file ny thay v c lu di dng text th s c lu trong my ca bn doi dng <strong>bin mi trng</strong> v trong file <strong>secrets.yml</strong> ch s dng phng thc <strong>ENV</strong> m rails cung cp  gi li cc thng tin  ln, vi la chn ny bn c th commit file ny thoi mi,  cc my tnh ng nghip,  c th s dng c nhng config ny th buc h phi thit lp bin mi trng trn my tnh ca h cho ph hp.</p>\n</li>\n</ol>\n<p>Nhc im: d s dng cch no, th  ng dng hot ng c th vn phi truyn gi tr cc thng tin nhy cm ny t my ca bn ln mt con vps khi trin khai chng hn, khng cn cch no khc. C th bn phi copy tng dng thng tin nhy cm ri paste qua remote shell  thit lp (vi nhng d n ln c rt nhiu thng tin quan trng th y l 1 cng vic vt v tim tng nguy c sai st).</p>\n<p>Note: Thay v s dng file <strong>secrets.yml</strong>, ta c th s dng mt file khc nh <strong>application.yml</strong>, mc ch v chc nng ca chng l tng ng.</p>\n<h2 id=\"3-Rails-5-1\"><a href=\"#3-Rails-5-1\" class=\"headerlink\" title=\"3. Rails 5.1\"></a>3. Rails 5.1</h2><p>Sang n phin bn rails 5.1, mt thay i ln  ti. Thay v lu thng tin dng text hoc triu hi thng qua bin mi trng, rails khi ny cung cp kh nng m ho cho cc thng tin nhy cm ny.<br>Cch chng hot ng nh sau:</p>\n<p>Mt file tn <strong>secrets.yml.key</strong> s cha gi tr ca mt bin tn <strong>RAILS_MASTER_KEY</strong>, bin ny c gi tr l mt chui, c chc nng c s dng  m ho v gii m cc thng tin quan trng.</p>\n<p>Ni dung thng tin <strong>sau</strong> m ho s c lu ti file <strong>secrets.yml.enc</strong></p>\n<p>Vy cn file <strong>secrets.yml</strong> trong rails 4 gi cn khng? Cu tr li l bn vn c th s dng file ny, tuy nhin trn cng mt mi trng, nu c c file <strong>secrets.yml</strong> v <strong>secrets.yml.enc</strong> th hai file ny s c merge.</p>\n<p> c th s dng tnh nng encypt ny ca rails 5.1 ta setup nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails <span class=\"symbol\">secrets:</span>setup</span><br></pre></td></tr></table></figure>\n<p>Sau cu lnh ny hai file <strong>secrets.yml.key</strong> v <strong>secrets.yml.enc</strong> s c to ra.  thm xo sa ni dung trong <strong>secrets.yml.enc</strong> ta s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails <span class=\"symbol\">secrets:</span>edit</span><br></pre></td></tr></table></figure>\n\n<p>Cu lnh ny s m ni dung file <strong>secrets.yml.enc</strong> di dng  gii m. Bn c th thoi mi thm xo, sa cc thng tin nhy cm, sau  khi bn save li v tt editor th file <strong>secrets.yml.enc</strong> s t ng c cp nhp phn m ho mi nht khi c thm thng tin.</p>\n<p>Ti thch dng <strong>vim</strong>  chnh sa, v ti khng mun set mc nh editor nn ti s dng cu lnh sau: <strong>EDITOR=vi rails secrets:edit</strong>.</p>\n<p>u im:</p>\n<ol>\n<li><p>Thay v phi qun l nhiu bin mi trng, gi y mi th u nm trong mt file.</p>\n</li>\n<li><p>Vic c th commit <strong>secrets.yml.enc</strong> gip chng ta nm c lch s thay i ca file ny.</p>\n</li>\n</ol>\n<p>Note: Mt im quan trng bn cn lu ,  l ti khi vit bi vit ny th ti vn cha thy rails s gii m thng tin m ho trong file <strong>secrets.yml.enc</strong>, chng ta buc phi lm th cng  nhc rails lm iu  bng cch thm vo config file ca bn <strong>config.read_encrypted_secrets = true</strong>. Vi cu lnh setup bn trn, dng config trn  c add vo file config ca production. Nu bn mun s dng tnh nng ny cho mi trng development th hy thm dng config ny vo file <strong>config/environments/development.rb</strong>.</p>\n<h2 id=\"3-Rails-5-2\"><a href=\"#3-Rails-5-2\" class=\"headerlink\" title=\"3. Rails 5.2\"></a>3. Rails 5.2</h2><p> tng trong rails 5.2 khng thay i nhiu so vi rails 5.1. Nhng thay v lu key  encrypt/decrypt trong file secrets.yml.key gi n c lu trong file <strong>master.key</strong> (tuy nhin nu khng s dng file th c rails 5.2 v 5.1 u c th gi bin mi trng RAILS_MASTER_KEY  s dng).</p>\n<p>File lu thng tin  c m ho cng c thay i t secrets.yml.enc thnh <strong>credentials.yml.enc</strong>.   l nhng im khc bit duy nht.</p>\n<p> chnh sa thng tin trong file m ho ta s dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EDITOR=vi rails <span class=\"symbol\">credentials:</span>edit</span><br></pre></td></tr></table></figure>\n<p>Khng cn dng lnh setup nh trn, v trong rails 5.2, hai file key v m ho c sinh ra cng project.</p>\n<p>Ta c th truy xut gi tr c gii m trong file <strong>credentials.yml.enc</strong> nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Rails.application.credentials.ten_bien_trong_credentials</span><br></pre></td></tr></table></figure>\n\n<p>Lm g khi bn mun thay th <strong>master.key</strong>?</p>\n<ol>\n<li><p><strong>rails credentials:show</strong> dng lnh ny  hin th thng tin dng gii m ra editor, copy chng.</p>\n</li>\n<li><p>Xo hai file <strong>master.key</strong> v <strong>credentials.yml.enc</strong> i.</p>\n</li>\n<li><p><strong>EDITOR=vim rails credentials:edit</strong> vi lnh sau bn s generate li hai file mi. Vic cn lm by gi l paste thng tin  bc 1 vo editor khi ny ri save li.</p>\n</li>\n</ol>\n<h2 id=\"4-secret-key-base\"><a href=\"#4-secret-key-base\" class=\"headerlink\" title=\"4. secret_key_base\"></a>4. secret_key_base</h2><p>Nu lm theo hng dn bn trn, ta s thu c mt file m ho v d: <strong>credentials.yml.enc</strong> c cha ni dung ngay c khi ta mi va khi to project. iu g  xy ra? Ti cn cha kp edit th n ly thng tin g m m ho ra ni dung  vy? Cu tr li l mt th c to km project ca bn c tn l <strong>secret_key_base</strong> s l th u tin c t ng lu m ho vo file <strong>credentials.yml.enc</strong>.</p>\n<p>Sao li phc tp nh vy? n vi <strong>RAILS_MASTER_KEY</strong>  trn c quan h g khng? Cu tr li l khng? <strong>secret_key_base</strong> c rails sinh ra khi to project, n m bo rng khng th c hai ng dng rails c chung mt <strong>secet_key_base</strong>, ci key s c s dng  o bo th nh du tnh duy nht ca mt project v n cn c dng lm nhiu vic hay ho khc ti s trnh by trong cc bi vit sp ti.</p>\n<p> to ra mt secret_key_base bn c th s dng lnh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rails secret</span><br></pre></td></tr></table></figure>\n"},{"title":"Vn  N + 1 V Hng X L","date":"2019-02-24T17:00:00.000Z","draft":false,"_content":"\n## N+1 query\n\nXt mt v d:\n\nTi c mt ng dng n gin, vi hai bng csdl, bng th nht l bng users, bng th hai l bng articles, mt user c th c nhiu articles nhng mt article ch thuc v user. Hy xem on m di y:\n\n```ruby\nUser.all.each do |user|\n  user.articles\nend\n```\non code trn s duyt qua tt c user c trong csdl ri ly tt c cc articles ng vi tng user. Rt tng minh v d hiu.\n\nTi c 5 user mu trong csdl nn cc cu lnh sql sinh ra sau on code trn nh sau:\n\n```ruby\n# cu lnh ly ht users ln\nSELECT \"users\".* FROM \"users\"\n# ng vi mi user query ly tt c articles ln\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 1], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 2], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 3], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 4], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 5], [\"LIMIT\", 11]]\n```\n\ny chnh l v d in hnh v **N+1**, **N** y l 5 (s lng user c trong csdl) v **1** chnh l cu lnh sql u tin dng  ly tt c user ln.\n\nNhn nh v hi, m thc ra  v d ny cng v hi tht v ch c 5 record user, nn thi gian load cng khng thm thp g, tuy nhin trong thc t th d liu c th rt ln, ln n hng triu record v nu load d liu nh ny th y l mt vn  ln cho hiu nng ca trang web. Hy c tip mc 2  tm v gii php cho tnh hung ny.\n\n## 2. Gii php\n\nVn   c, gi chng ta cn tm mt gii php lm sao  kt qu tr v khng i, nhng lng truy vn sql trong csdl phi nh hn.\n\nCc phng n:\n\n1. S dng **select in()**.\n\n2. S dng **joins**.  c k hn v joins, th nn xem  [y](https://www.w3schools.com/sql/sql_join.asp)\n\nS dng select in() s tit kim truy vn i rt nhiu, nu v d bn trn ta s dng select in() th cc sql query cn thit s l nh sau:\n\n```ruby\n# ly tt c query\nSELECT \"users\".* FROM \"users\"\n# ly articles ng vi tng user\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (1, 2, 3, 4, 5)\n```\n\nTuyt vi, t 6(N + 1) truy vn gi  tr thnh cn 2.\n\nVi cch th 2 l s dng **joins**:\n\njoins hiu n gin l ghp hai bng li vi nhau (ly mt s field cn thit  bng ny, gp vi vi field cn thit  bng kia khi m record  hai bn tho mn mt iu kin no ), ri t  thnh mt bng tm dng trong qu trnh bn s dng.\n\nQuay tr v v d ban u, cu truy vn by gi s tr thnh:\n\n```ruby\nSELECT User.name, Article.title\n      FROM User\n      INNER JOIN Article ON User.id = Article.user_id\n```\n\nLy vi field cn thit(name ca user v title ca Article).\nBng cch tho mn iu kin no (id ca user bng vi user_id ca article).\n\nVy t N+1 query ban u,  tr thnh mt query duy nht.\n\nn lc ny  c th kt lun l joins tt hn select in() c cha? Cha, cu tr li s l nh vy. Sang mc 3 chng ta s tm hiu v cch x l N+1 thng qua ActiveRecord\n\n## 3. X l N+1 query trong ActiveRecord\n\nTrong ActiveRecord cung cp 3 phng thc  loi b N+1,\n\n1. S dng **preload**\n\n```ruby\nUser.preload(:articles)\n# sql sinh ra\nUser Load (0.2ms)  SELECT  \"users\".* FROM \"users\" LIMIT ?  [[\"LIMIT\", 11]]\nArticle Load (0.4ms)  SELECT \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (?, ?, ?)  [[\"user_id\", 1], [\"user_id\", 2], [\"user_id\", 3]]\n```\nPreload s lun s dng **select in()**\n\n2. S dng **Eagerload**\n\n```ruby\nUser.eager_load(:articles)\n# sql sinh ra\nSELECT  DISTINCT \"users\".\"id\" FROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\" LIMIT ?  [[\"LIMIT\", 11]]\n\nSELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"created_at\" AS t0_r2,\n\"users\".\"updated_at\" AS t0_r3, \"articles\".\"id\" AS t1_r0, \"articles\".\"name\" AS t1_r1,\n\"articles\".\"user_id\" AS t1_r2, \"articles\".\"created_at\" AS t1_r3, \"articles\".\"updated_at\" AS t1_r4\nFROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\"\nWHERE \"users\".\"id\" IN (?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3]]\n```\n\neager_load lun s dng **joins**\n\n3. S dng **Inludes**\n\n```ruby\n# cch 1\nUser.includes(:articles)\n# sql sinh ra\nSELECT  \"users\".* FROM \"users\" LIMIT ?  [[\"LIMIT\", 11]]\nSELECT \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (?, ?, ?)  [[\"user_id\", 1], [\"user_id\", 2], [\"user_id\", 3]]\n#=> ging preload\n\n# cch 2\nUser.includes(:articles).references(:articles)\n# sql sinh ra\nSELECT  DISTINCT \"users\".\"id\" FROM \"users\" LEFT OUTER JOIN \"articles\"\nON \"articles\".\"user_id\" = \"users\".\"id\" LIMIT ?  [[\"LIMIT\", 11]]\nSELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"created_at\" AS t0_r2,\n\"users\".\"updated_at\" AS t0_r3, \"articles\".\"id\" AS t1_r0, \"articles\".\"name\" AS t1_r1,\n\"articles\".\"user_id\" AS t1_r2, \"articles\".\"created_at\" AS t1_r3, \"articles\".\"updated_at\" AS t1_r4\nFROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\"\nWHERE \"users\".\"id\" IN (?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3]]\n#=> ging eager_load\n```\nVy mc nh th **includes** s dng select in(), nhng cng c th chuyn qua s dng joins nu thm method references pha sau.\n","source":"_posts/2019-02-25-van-de-n-1-trong-rails.md","raw":"---\ntitle: \"Vn  N + 1 V Hng X L\"\ndate: 2019-02-25\ndraft: false\ntags: [\"RAILS\"]\n---\n\n## N+1 query\n\nXt mt v d:\n\nTi c mt ng dng n gin, vi hai bng csdl, bng th nht l bng users, bng th hai l bng articles, mt user c th c nhiu articles nhng mt article ch thuc v user. Hy xem on m di y:\n\n```ruby\nUser.all.each do |user|\n  user.articles\nend\n```\non code trn s duyt qua tt c user c trong csdl ri ly tt c cc articles ng vi tng user. Rt tng minh v d hiu.\n\nTi c 5 user mu trong csdl nn cc cu lnh sql sinh ra sau on code trn nh sau:\n\n```ruby\n# cu lnh ly ht users ln\nSELECT \"users\".* FROM \"users\"\n# ng vi mi user query ly tt c articles ln\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 1], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 2], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 3], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 4], [\"LIMIT\", 11]]\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 5], [\"LIMIT\", 11]]\n```\n\ny chnh l v d in hnh v **N+1**, **N** y l 5 (s lng user c trong csdl) v **1** chnh l cu lnh sql u tin dng  ly tt c user ln.\n\nNhn nh v hi, m thc ra  v d ny cng v hi tht v ch c 5 record user, nn thi gian load cng khng thm thp g, tuy nhin trong thc t th d liu c th rt ln, ln n hng triu record v nu load d liu nh ny th y l mt vn  ln cho hiu nng ca trang web. Hy c tip mc 2  tm v gii php cho tnh hung ny.\n\n## 2. Gii php\n\nVn   c, gi chng ta cn tm mt gii php lm sao  kt qu tr v khng i, nhng lng truy vn sql trong csdl phi nh hn.\n\nCc phng n:\n\n1. S dng **select in()**.\n\n2. S dng **joins**.  c k hn v joins, th nn xem  [y](https://www.w3schools.com/sql/sql_join.asp)\n\nS dng select in() s tit kim truy vn i rt nhiu, nu v d bn trn ta s dng select in() th cc sql query cn thit s l nh sau:\n\n```ruby\n# ly tt c query\nSELECT \"users\".* FROM \"users\"\n# ly articles ng vi tng user\nSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (1, 2, 3, 4, 5)\n```\n\nTuyt vi, t 6(N + 1) truy vn gi  tr thnh cn 2.\n\nVi cch th 2 l s dng **joins**:\n\njoins hiu n gin l ghp hai bng li vi nhau (ly mt s field cn thit  bng ny, gp vi vi field cn thit  bng kia khi m record  hai bn tho mn mt iu kin no ), ri t  thnh mt bng tm dng trong qu trnh bn s dng.\n\nQuay tr v v d ban u, cu truy vn by gi s tr thnh:\n\n```ruby\nSELECT User.name, Article.title\n      FROM User\n      INNER JOIN Article ON User.id = Article.user_id\n```\n\nLy vi field cn thit(name ca user v title ca Article).\nBng cch tho mn iu kin no (id ca user bng vi user_id ca article).\n\nVy t N+1 query ban u,  tr thnh mt query duy nht.\n\nn lc ny  c th kt lun l joins tt hn select in() c cha? Cha, cu tr li s l nh vy. Sang mc 3 chng ta s tm hiu v cch x l N+1 thng qua ActiveRecord\n\n## 3. X l N+1 query trong ActiveRecord\n\nTrong ActiveRecord cung cp 3 phng thc  loi b N+1,\n\n1. S dng **preload**\n\n```ruby\nUser.preload(:articles)\n# sql sinh ra\nUser Load (0.2ms)  SELECT  \"users\".* FROM \"users\" LIMIT ?  [[\"LIMIT\", 11]]\nArticle Load (0.4ms)  SELECT \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (?, ?, ?)  [[\"user_id\", 1], [\"user_id\", 2], [\"user_id\", 3]]\n```\nPreload s lun s dng **select in()**\n\n2. S dng **Eagerload**\n\n```ruby\nUser.eager_load(:articles)\n# sql sinh ra\nSELECT  DISTINCT \"users\".\"id\" FROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\" LIMIT ?  [[\"LIMIT\", 11]]\n\nSELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"created_at\" AS t0_r2,\n\"users\".\"updated_at\" AS t0_r3, \"articles\".\"id\" AS t1_r0, \"articles\".\"name\" AS t1_r1,\n\"articles\".\"user_id\" AS t1_r2, \"articles\".\"created_at\" AS t1_r3, \"articles\".\"updated_at\" AS t1_r4\nFROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\"\nWHERE \"users\".\"id\" IN (?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3]]\n```\n\neager_load lun s dng **joins**\n\n3. S dng **Inludes**\n\n```ruby\n# cch 1\nUser.includes(:articles)\n# sql sinh ra\nSELECT  \"users\".* FROM \"users\" LIMIT ?  [[\"LIMIT\", 11]]\nSELECT \"articles\".* FROM \"articles\" WHERE \"articles\".\"user_id\" IN (?, ?, ?)  [[\"user_id\", 1], [\"user_id\", 2], [\"user_id\", 3]]\n#=> ging preload\n\n# cch 2\nUser.includes(:articles).references(:articles)\n# sql sinh ra\nSELECT  DISTINCT \"users\".\"id\" FROM \"users\" LEFT OUTER JOIN \"articles\"\nON \"articles\".\"user_id\" = \"users\".\"id\" LIMIT ?  [[\"LIMIT\", 11]]\nSELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"created_at\" AS t0_r2,\n\"users\".\"updated_at\" AS t0_r3, \"articles\".\"id\" AS t1_r0, \"articles\".\"name\" AS t1_r1,\n\"articles\".\"user_id\" AS t1_r2, \"articles\".\"created_at\" AS t1_r3, \"articles\".\"updated_at\" AS t1_r4\nFROM \"users\" LEFT OUTER JOIN \"articles\" ON \"articles\".\"user_id\" = \"users\".\"id\"\nWHERE \"users\".\"id\" IN (?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3]]\n#=> ging eager_load\n```\nVy mc nh th **includes** s dng select in(), nhng cng c th chuyn qua s dng joins nu thm method references pha sau.\n","slug":"2019-02-25-van-de-n-1-trong-rails","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsaf000op3m24zkz5xb7","content":"<h2 id=\"N-1-query\"><a href=\"#N-1-query\" class=\"headerlink\" title=\"N+1 query\"></a>N+1 query</h2><p>Xt mt v d:</p>\n<p>Ti c mt ng dng n gin, vi hai bng csdl, bng th nht l bng users, bng th hai l bng articles, mt user c th c nhiu articles nhng mt article ch thuc v user. Hy xem on m di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.all.each <span class=\"keyword\">do</span> <span class=\"params\">|user|</span></span><br><span class=\"line\">  user.articles</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<p>on code trn s duyt qua tt c user c trong csdl ri ly tt c cc articles ng vi tng user. Rt tng minh v d hiu.</p>\n<p>Ti c 5 user mu trong csdl nn cc cu lnh sql sinh ra sau on code trn nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cu lnh ly ht users ln</span></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span></span><br><span class=\"line\"><span class=\"comment\"># ng vi mi user query ly tt c articles ln</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">4</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">5</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br></pre></td></tr></table></figure>\n\n<p>y chnh l v d in hnh v <strong>N+1</strong>, <strong>N</strong> y l 5 (s lng user c trong csdl) v <strong>1</strong> chnh l cu lnh sql u tin dng  ly tt c user ln.</p>\n<p>Nhn nh v hi, m thc ra  v d ny cng v hi tht v ch c 5 record user, nn thi gian load cng khng thm thp g, tuy nhin trong thc t th d liu c th rt ln, ln n hng triu record v nu load d liu nh ny th y l mt vn  ln cho hiu nng ca trang web. Hy c tip mc 2  tm v gii php cho tnh hung ny.</p>\n<h2 id=\"2-Giai-phap\"><a href=\"#2-Giai-phap\" class=\"headerlink\" title=\"2. Gii php\"></a>2. Gii php</h2><p>Vn   c, gi chng ta cn tm mt gii php lm sao  kt qu tr v khng i, nhng lng truy vn sql trong csdl phi nh hn.</p>\n<p>Cc phng n:</p>\n<ol>\n<li><p>S dng <strong>select in()</strong>.</p>\n</li>\n<li><p>S dng <strong>joins</strong>.  c k hn v joins, th nn xem  <a href=\"https://www.w3schools.com/sql/sql_join.asp\" target=\"_blank\" rel=\"noopener\">y</a></p>\n</li>\n</ol>\n<p>S dng select in() s tit kim truy vn i rt nhiu, nu v d bn trn ta s dng select in() th cc sql query cn thit s l nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ly tt c query</span></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span></span><br><span class=\"line\"><span class=\"comment\"># ly articles ng vi tng user</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Tuyt vi, t 6(N + 1) truy vn gi  tr thnh cn 2.</p>\n<p>Vi cch th 2 l s dng <strong>joins</strong>:</p>\n<p>joins hiu n gin l ghp hai bng li vi nhau (ly mt s field cn thit  bng ny, gp vi vi field cn thit  bng kia khi m record  hai bn tho mn mt iu kin no ), ri t  thnh mt bng tm dng trong qu trnh bn s dng.</p>\n<p>Quay tr v v d ban u, cu truy vn by gi s tr thnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT User.name, Article.title</span><br><span class=\"line\">      FROM User</span><br><span class=\"line\">      INNER JOIN Article ON User.id = Article.user_id</span><br></pre></td></tr></table></figure>\n\n<p>Ly vi field cn thit(name ca user v title ca Article).<br>Bng cch tho mn iu kin no (id ca user bng vi user_id ca article).</p>\n<p>Vy t N+1 query ban u,  tr thnh mt query duy nht.</p>\n<p>n lc ny  c th kt lun l joins tt hn select in() c cha? Cha, cu tr li s l nh vy. Sang mc 3 chng ta s tm hiu v cch x l N+1 thng qua ActiveRecord</p>\n<h2 id=\"3-Xu-ly-N-1-query-trong-ActiveRecord\"><a href=\"#3-Xu-ly-N-1-query-trong-ActiveRecord\" class=\"headerlink\" title=\"3. X l N+1 query trong ActiveRecord\"></a>3. X l N+1 query trong ActiveRecord</h2><p>Trong ActiveRecord cung cp 3 phng thc  loi b N+1,</p>\n<ol>\n<li>S dng <strong>preload</strong></li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.preload(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">User Load (<span class=\"number\">0</span>.<span class=\"number\">2</span>ms)  SELECT  <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">Article Load (<span class=\"number\">0</span>.<span class=\"number\">4</span>ms)  SELECT <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>]]</span><br></pre></td></tr></table></figure>\n<p>Preload s lun s dng <strong>select in()</strong></p>\n<ol start=\"2\">\n<li>S dng <strong>Eagerload</strong></li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.eager_load(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  DISTINCT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> AS t0_r<span class=\"number\">0</span>, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"name\"</span> AS t0_r1, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"created_at\"</span> AS t0_r2,</span><br><span class=\"line\"><span class=\"string\">\"users\"</span>.<span class=\"string\">\"updated_at\"</span> AS t0_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"id\"</span> AS t1_r<span class=\"number\">0</span>, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"name\"</span> AS t1_r1,</span><br><span class=\"line\"><span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> AS t1_r2, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"created_at\"</span> AS t1_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"updated_at\"</span> AS t1_r4</span><br><span class=\"line\">FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span></span><br><span class=\"line\">WHERE <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">3</span>]]</span><br></pre></td></tr></table></figure>\n\n<p>eager_load lun s dng <strong>joins</strong></p>\n<ol start=\"3\">\n<li>S dng <strong>Inludes</strong></li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cch 1</span></span><br><span class=\"line\">User.includes(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>]]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; ging preload</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># cch 2</span></span><br><span class=\"line\">User.includes(<span class=\"symbol\">:articles</span>).references(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  DISTINCT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span></span><br><span class=\"line\">ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> AS t0_r<span class=\"number\">0</span>, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"name\"</span> AS t0_r1, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"created_at\"</span> AS t0_r2,</span><br><span class=\"line\"><span class=\"string\">\"users\"</span>.<span class=\"string\">\"updated_at\"</span> AS t0_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"id\"</span> AS t1_r<span class=\"number\">0</span>, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"name\"</span> AS t1_r1,</span><br><span class=\"line\"><span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> AS t1_r2, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"created_at\"</span> AS t1_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"updated_at\"</span> AS t1_r4</span><br><span class=\"line\">FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span></span><br><span class=\"line\">WHERE <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">3</span>]]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; ging eager_load</span></span><br></pre></td></tr></table></figure>\n<p>Vy mc nh th <strong>includes</strong> s dng select in(), nhng cng c th chuyn qua s dng joins nu thm method references pha sau.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"N-1-query\"><a href=\"#N-1-query\" class=\"headerlink\" title=\"N+1 query\"></a>N+1 query</h2><p>Xt mt v d:</p>\n<p>Ti c mt ng dng n gin, vi hai bng csdl, bng th nht l bng users, bng th hai l bng articles, mt user c th c nhiu articles nhng mt article ch thuc v user. Hy xem on m di y:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.all.each <span class=\"keyword\">do</span> <span class=\"params\">|user|</span></span><br><span class=\"line\">  user.articles</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n<p>on code trn s duyt qua tt c user c trong csdl ri ly tt c cc articles ng vi tng user. Rt tng minh v d hiu.</p>\n<p>Ti c 5 user mu trong csdl nn cc cu lnh sql sinh ra sau on code trn nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cu lnh ly ht users ln</span></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span></span><br><span class=\"line\"><span class=\"comment\"># ng vi mi user query ly tt c articles ln</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">4</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = ? LIMIT ?  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">5</span>], [<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br></pre></td></tr></table></figure>\n\n<p>y chnh l v d in hnh v <strong>N+1</strong>, <strong>N</strong> y l 5 (s lng user c trong csdl) v <strong>1</strong> chnh l cu lnh sql u tin dng  ly tt c user ln.</p>\n<p>Nhn nh v hi, m thc ra  v d ny cng v hi tht v ch c 5 record user, nn thi gian load cng khng thm thp g, tuy nhin trong thc t th d liu c th rt ln, ln n hng triu record v nu load d liu nh ny th y l mt vn  ln cho hiu nng ca trang web. Hy c tip mc 2  tm v gii php cho tnh hung ny.</p>\n<h2 id=\"2-Giai-phap\"><a href=\"#2-Giai-phap\" class=\"headerlink\" title=\"2. Gii php\"></a>2. Gii php</h2><p>Vn   c, gi chng ta cn tm mt gii php lm sao  kt qu tr v khng i, nhng lng truy vn sql trong csdl phi nh hn.</p>\n<p>Cc phng n:</p>\n<ol>\n<li><p>S dng <strong>select in()</strong>.</p>\n</li>\n<li><p>S dng <strong>joins</strong>.  c k hn v joins, th nn xem  <a href=\"https://www.w3schools.com/sql/sql_join.asp\" target=\"_blank\" rel=\"noopener\">y</a></p>\n</li>\n</ol>\n<p>S dng select in() s tit kim truy vn i rt nhiu, nu v d bn trn ta s dng select in() th cc sql query cn thit s l nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ly tt c query</span></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span></span><br><span class=\"line\"><span class=\"comment\"># ly articles ng vi tng user</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Tuyt vi, t 6(N + 1) truy vn gi  tr thnh cn 2.</p>\n<p>Vi cch th 2 l s dng <strong>joins</strong>:</p>\n<p>joins hiu n gin l ghp hai bng li vi nhau (ly mt s field cn thit  bng ny, gp vi vi field cn thit  bng kia khi m record  hai bn tho mn mt iu kin no ), ri t  thnh mt bng tm dng trong qu trnh bn s dng.</p>\n<p>Quay tr v v d ban u, cu truy vn by gi s tr thnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT User.name, Article.title</span><br><span class=\"line\">      FROM User</span><br><span class=\"line\">      INNER JOIN Article ON User.id = Article.user_id</span><br></pre></td></tr></table></figure>\n\n<p>Ly vi field cn thit(name ca user v title ca Article).<br>Bng cch tho mn iu kin no (id ca user bng vi user_id ca article).</p>\n<p>Vy t N+1 query ban u,  tr thnh mt query duy nht.</p>\n<p>n lc ny  c th kt lun l joins tt hn select in() c cha? Cha, cu tr li s l nh vy. Sang mc 3 chng ta s tm hiu v cch x l N+1 thng qua ActiveRecord</p>\n<h2 id=\"3-Xu-ly-N-1-query-trong-ActiveRecord\"><a href=\"#3-Xu-ly-N-1-query-trong-ActiveRecord\" class=\"headerlink\" title=\"3. X l N+1 query trong ActiveRecord\"></a>3. X l N+1 query trong ActiveRecord</h2><p>Trong ActiveRecord cung cp 3 phng thc  loi b N+1,</p>\n<ol>\n<li>S dng <strong>preload</strong></li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.preload(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">User Load (<span class=\"number\">0</span>.<span class=\"number\">2</span>ms)  SELECT  <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">Article Load (<span class=\"number\">0</span>.<span class=\"number\">4</span>ms)  SELECT <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>]]</span><br></pre></td></tr></table></figure>\n<p>Preload s lun s dng <strong>select in()</strong></p>\n<ol start=\"2\">\n<li>S dng <strong>Eagerload</strong></li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User.eager_load(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  DISTINCT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> AS t0_r<span class=\"number\">0</span>, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"name\"</span> AS t0_r1, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"created_at\"</span> AS t0_r2,</span><br><span class=\"line\"><span class=\"string\">\"users\"</span>.<span class=\"string\">\"updated_at\"</span> AS t0_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"id\"</span> AS t1_r<span class=\"number\">0</span>, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"name\"</span> AS t1_r1,</span><br><span class=\"line\"><span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> AS t1_r2, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"created_at\"</span> AS t1_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"updated_at\"</span> AS t1_r4</span><br><span class=\"line\">FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span></span><br><span class=\"line\">WHERE <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">3</span>]]</span><br></pre></td></tr></table></figure>\n\n<p>eager_load lun s dng <strong>joins</strong></p>\n<ol start=\"3\">\n<li>S dng <strong>Inludes</strong></li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># cch 1</span></span><br><span class=\"line\">User.includes(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  <span class=\"string\">\"users\"</span>.* FROM <span class=\"string\">\"users\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT <span class=\"string\">\"articles\"</span>.* FROM <span class=\"string\">\"articles\"</span> WHERE <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"user_id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"user_id\"</span>, <span class=\"number\">3</span>]]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; ging preload</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># cch 2</span></span><br><span class=\"line\">User.includes(<span class=\"symbol\">:articles</span>).references(<span class=\"symbol\">:articles</span>)</span><br><span class=\"line\"><span class=\"comment\"># sql sinh ra</span></span><br><span class=\"line\">SELECT  DISTINCT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span></span><br><span class=\"line\">ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> LIMIT ?  [[<span class=\"string\">\"LIMIT\"</span>, <span class=\"number\">11</span>]]</span><br><span class=\"line\">SELECT <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> AS t0_r<span class=\"number\">0</span>, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"name\"</span> AS t0_r1, <span class=\"string\">\"users\"</span>.<span class=\"string\">\"created_at\"</span> AS t0_r2,</span><br><span class=\"line\"><span class=\"string\">\"users\"</span>.<span class=\"string\">\"updated_at\"</span> AS t0_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"id\"</span> AS t1_r<span class=\"number\">0</span>, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"name\"</span> AS t1_r1,</span><br><span class=\"line\"><span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> AS t1_r2, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"created_at\"</span> AS t1_r3, <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"updated_at\"</span> AS t1_r4</span><br><span class=\"line\">FROM <span class=\"string\">\"users\"</span> LEFT OUTER JOIN <span class=\"string\">\"articles\"</span> ON <span class=\"string\">\"articles\"</span>.<span class=\"string\">\"user_id\"</span> = <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span></span><br><span class=\"line\">WHERE <span class=\"string\">\"users\"</span>.<span class=\"string\">\"id\"</span> IN (?, ?, ?)  [[<span class=\"string\">\"id\"</span>, <span class=\"number\">1</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">2</span>], [<span class=\"string\">\"id\"</span>, <span class=\"number\">3</span>]]</span><br><span class=\"line\"><span class=\"comment\">#=&gt; ging eager_load</span></span><br></pre></td></tr></table></figure>\n<p>Vy mc nh th <strong>includes</strong> s dng select in(), nhng cng c th chuyn qua s dng joins nu thm method references pha sau.</p>\n"},{"title":"Immutable V Mutable Trong Ruby","date":"2019-04-07T17:00:00.000Z","draft":false,"_content":"\n## 1. Khi nim mutable, immutable v ruby\n\ni thng vo vn , chng ta cn  cp n ba vn : **mutable**, **immutable** v cch ruby x l hai khi nim . Trc ht nu bn  qun, th ti xin c nhc li nh ngha ca chng.\n\nXin trch dn [wiki](https://en.wikipedia.org/wiki/Immutable_object):\n\n> In object-oriented and functional programming, an immutable object (unchangeable[1] object) is an object whose state cannot be modified after it is created.[2] This is in contrast to a mutable object (changeable object), which can be modified after it is created.\n\nTranslate:\n\n> Trong lp trnh hng i tng v lp trnh hm, mt i tng c coi immutable, l mt i tng **khng th thay i** trng thi sau khi n c to ln u, ngc li vi mt i tng c coi l mutable n c th **thay i** trng thi sau khi c khi to ln u.\n\nDng t qu kh hiu, what the hell is \"trng thi\"? Theo mt cch hn lm v y , trng thi ca mt i tng ngoi i tht c thit lp bi tt c nhng g to nn chng.\n\nTng t, cc trng thi ca mt i tng trong lp trnh cng c thit lp bng tt c nhng g to nn chng. V d:\n\nVi 1 bin integer c bn **x = 10** th trng thi ca n c to ra bi tn bin v gi tr,  y tn bin l **x** v gi tr l **10**, u  trong vng nh (Ram) ca bn s lu tr ci ch **x** km s **10** ny.\n\nng ngha vi  nu ti thay i c gi tr 10 ca bin x th x l mt i tng mutable v ngc li n l mt i tng immutable.\n\nTi gn **x = 11** v thnh cng\n\nT  c th a ra kt lun x l mt mutable?\n\nCu tr li l khng, mt s khi nim ri rm lm kh ta lc u. Nh  bit, th m CPU lm vic l a ch vng nh v ch a ch vng nh m thi. Nhng th khc n khng quan tm.\n\nVi cu lnh gn **x = 10**. N c h iu hnh phin dch thnh \"c mt bin tn **x** c gn gi tr bng **10**, Ram, my hy b tr thm hai slot  lu tr **x** v **10**\". Vy lc :\n\n**x**(tn bin) c lu  v tr AAA\n**10**(gi tr) c lu  v tr BBB\n\nVi lnh gn tip theo **x = 11**:\n\n**x** vn yn v nm  v tr AAA\n**10** cng vn yn tr nm  v tr BBB\n**11** gi tr mi gn cho bin x th lc ny nm  v tr CCC\n\nVy khi chy mt lnh gn mi th bin x  c gn bng gi tr trn mt vng nh khc, cn vng nh ban u **khng thay i gi tr** nn ta c th kt lun x l mt immutable.\n\nChng minh bng v d sau trong ruby, ch  l ruby l mt ngn ng script, vi trnh thng dch VM bn di  x l ca n c vit bng C, nn  lp c s ca ruby ta khng th truy xut v tr vng nh n tng thanh ghi nh trong C c (vic  c lm  lp core YARV). Tuy nhin, ta c th kim tra c v tr tng trng trn b nh ca n thng qua **object_id**.\n\n```ruby\nx = 10\nx.object_id\n#=> 21\nx = 11\nx.object_id\n#=> 23\n```\n\nNote: Nu bn gn tip x = 12 v kim tra li object_id, lc ny bn s thy n bng 25. Gi tr 10, 11, 12 tng ng vi object_id l 21, 23, 25. Liu c mt quy lut no  y? Cu tr li l c, nhng vn  ny s c  cp n trong mt bi vit tip theo.\n\nT v d trn bn  hiu v immutable, vy cn mutable? n gin nht l hy hiu ngc li vi immutable, nu gn x = 11 v x c object_id khng i th x chnh l mutable.\n\n```\nTt c cc loi d liu nguyn thu trong ruby u l immutable.\n```\n\nInteger, float, string, boolean chng u l immutable.\n\n## 2. Liu y c phi l mt kin thc cn thit?\n\nChc chn l c.\n\nTh nht: Nu trong cng vic bn khng bao gi phi dng n n, bn c th ni v n nh mt kin thc hn lm  th hin kh nng vi sp v yu cu tng lng :worried:\n\nTh hai: Xt v d sau\n\n```ruby\nstr = \"\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str += i\nend\n```\n\nT tng ca on m ny l cng tt c cc phn t trong mt mng string v cho ra kt qu cui cng l mt chui tng hp tt c cc phn t.\nC iu g bt thng trong on m ny khng nh? Cu tr li l c. Nh nhng g chng ta  ni  trn c hai iu cn lu :\n\n> 1. Cc kiu d liu nguyn thu trong ruby u l immutable v hin nhin string khng ngoi l.\n\n> 2. Khi mt object l immutable, th vic bn gn n bng mt gi tr khc ng ngha vi vic vng nh c s khng c dng n, m n s ra mt vng nh mi ri ghi kt qu mi ln , c lp li nh vy mi mi.\n\nT hai iu trn ta rt ra c kt lun:\n\n1. Trong ln gn u tin str c gi tr l chui rng v c khi to ti v tr A1\n2. Trong ln lp **each** u tin, str c gi tr l \"Hoang\" v n lu  v tr A2\n3. Trong ln lp **each** th hai, str c gi tr mi l \"HoangDuy\" v n lu  v tr mi l A3\n4. Trong ln lp cui cng th str c gi tr chng ta mong i l \"HoangDuyChinh\" v n lu  v tr A4\n\nChng minh:\n\n```ruby\nstr = \"\"\nputs \"First location: #{str.object_id}\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str += i\n  puts \"value: #{str} | location: #{str.object_id}\"\nend\n\nputs \"Final value: #{str} | location: #{str.object_id}\"\n```\n\nKt qu:\n```\nFirst location: 47434608564740\nvalue: Hoang | location: 47434608564520\nvalue: HoangDuy | location: 47434608564440\nvalue: HoangDuyChinh | location: 47434608564360\nFinal value: HoangDuyChinh | location: 47434608564360\n```\n\nV th chng ta quan tm t  v sau l v tr A4 ny. Vy cn A1, A2, A3 cng ang mang gi tr? Chng i u v u? Chnh xc, n tr thnh mt vng nh rc v s c GC dn dp nhng khng phi ngay lp tc, vy trong khong thi gian  n vn nm gi cc vng nh ca chng ta.  cng l mt trong cc l do vic bn mun chy ruby on rails trn mt chic my tnh sinh vin 2GB l v cng kh khn. Ruby n Ram nh ung nc l vy.\n\nV d trn mng ta c ba phn t v ta c 3 gi tr rc trn b nh, hy tng tng bn c mt mng mt triu phn t :worried:\n\nGii php trong trng hp ny l g?  l duyt mng nh mt **object reference** ch khng phi mt bin gi tr:\n\n```ruby\nstr = \"\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str << i\nend\n```\n\nNh vy str s  ng mt vng nh v ta khng c mt ng bin rc khng mong i.\n\nChng minh:\n\n```ruby\nstr = \"\"\nputs \"First location: #{str.object_id}\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str << i\n  puts \"value: #{str} | location: #{str.object_id}\"\nend\n\nputs \"Final value: #{str} | location: #{str.object_id}\"\n```\n\nKt qu:\n\n```\nFirst location: 47196120971580\nvalue: Hoang | location: 47196120971580\nvalue: HoangDuy | location: 47196120971580\nvalue: HoangDuyChinh | location: 47196120971580\nFinal value: HoangDuyChinh | location: 47196120971580\n```\n\n## 3. Tham kho\n\n[1] [https://en.wikipedia.org/wiki/Immutable_object](https://en.wikipedia.org/wiki/Immutable_object)\n","source":"_posts/2019-04-08-immutable-va-mutable-trong-ruby.md","raw":"---\ntitle: \"Immutable V Mutable Trong Ruby\"\ndate: 2019-04-08\ndraft: false\ntags: [\"RUBY\"]\n---\n\n## 1. Khi nim mutable, immutable v ruby\n\ni thng vo vn , chng ta cn  cp n ba vn : **mutable**, **immutable** v cch ruby x l hai khi nim . Trc ht nu bn  qun, th ti xin c nhc li nh ngha ca chng.\n\nXin trch dn [wiki](https://en.wikipedia.org/wiki/Immutable_object):\n\n> In object-oriented and functional programming, an immutable object (unchangeable[1] object) is an object whose state cannot be modified after it is created.[2] This is in contrast to a mutable object (changeable object), which can be modified after it is created.\n\nTranslate:\n\n> Trong lp trnh hng i tng v lp trnh hm, mt i tng c coi immutable, l mt i tng **khng th thay i** trng thi sau khi n c to ln u, ngc li vi mt i tng c coi l mutable n c th **thay i** trng thi sau khi c khi to ln u.\n\nDng t qu kh hiu, what the hell is \"trng thi\"? Theo mt cch hn lm v y , trng thi ca mt i tng ngoi i tht c thit lp bi tt c nhng g to nn chng.\n\nTng t, cc trng thi ca mt i tng trong lp trnh cng c thit lp bng tt c nhng g to nn chng. V d:\n\nVi 1 bin integer c bn **x = 10** th trng thi ca n c to ra bi tn bin v gi tr,  y tn bin l **x** v gi tr l **10**, u  trong vng nh (Ram) ca bn s lu tr ci ch **x** km s **10** ny.\n\nng ngha vi  nu ti thay i c gi tr 10 ca bin x th x l mt i tng mutable v ngc li n l mt i tng immutable.\n\nTi gn **x = 11** v thnh cng\n\nT  c th a ra kt lun x l mt mutable?\n\nCu tr li l khng, mt s khi nim ri rm lm kh ta lc u. Nh  bit, th m CPU lm vic l a ch vng nh v ch a ch vng nh m thi. Nhng th khc n khng quan tm.\n\nVi cu lnh gn **x = 10**. N c h iu hnh phin dch thnh \"c mt bin tn **x** c gn gi tr bng **10**, Ram, my hy b tr thm hai slot  lu tr **x** v **10**\". Vy lc :\n\n**x**(tn bin) c lu  v tr AAA\n**10**(gi tr) c lu  v tr BBB\n\nVi lnh gn tip theo **x = 11**:\n\n**x** vn yn v nm  v tr AAA\n**10** cng vn yn tr nm  v tr BBB\n**11** gi tr mi gn cho bin x th lc ny nm  v tr CCC\n\nVy khi chy mt lnh gn mi th bin x  c gn bng gi tr trn mt vng nh khc, cn vng nh ban u **khng thay i gi tr** nn ta c th kt lun x l mt immutable.\n\nChng minh bng v d sau trong ruby, ch  l ruby l mt ngn ng script, vi trnh thng dch VM bn di  x l ca n c vit bng C, nn  lp c s ca ruby ta khng th truy xut v tr vng nh n tng thanh ghi nh trong C c (vic  c lm  lp core YARV). Tuy nhin, ta c th kim tra c v tr tng trng trn b nh ca n thng qua **object_id**.\n\n```ruby\nx = 10\nx.object_id\n#=> 21\nx = 11\nx.object_id\n#=> 23\n```\n\nNote: Nu bn gn tip x = 12 v kim tra li object_id, lc ny bn s thy n bng 25. Gi tr 10, 11, 12 tng ng vi object_id l 21, 23, 25. Liu c mt quy lut no  y? Cu tr li l c, nhng vn  ny s c  cp n trong mt bi vit tip theo.\n\nT v d trn bn  hiu v immutable, vy cn mutable? n gin nht l hy hiu ngc li vi immutable, nu gn x = 11 v x c object_id khng i th x chnh l mutable.\n\n```\nTt c cc loi d liu nguyn thu trong ruby u l immutable.\n```\n\nInteger, float, string, boolean chng u l immutable.\n\n## 2. Liu y c phi l mt kin thc cn thit?\n\nChc chn l c.\n\nTh nht: Nu trong cng vic bn khng bao gi phi dng n n, bn c th ni v n nh mt kin thc hn lm  th hin kh nng vi sp v yu cu tng lng :worried:\n\nTh hai: Xt v d sau\n\n```ruby\nstr = \"\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str += i\nend\n```\n\nT tng ca on m ny l cng tt c cc phn t trong mt mng string v cho ra kt qu cui cng l mt chui tng hp tt c cc phn t.\nC iu g bt thng trong on m ny khng nh? Cu tr li l c. Nh nhng g chng ta  ni  trn c hai iu cn lu :\n\n> 1. Cc kiu d liu nguyn thu trong ruby u l immutable v hin nhin string khng ngoi l.\n\n> 2. Khi mt object l immutable, th vic bn gn n bng mt gi tr khc ng ngha vi vic vng nh c s khng c dng n, m n s ra mt vng nh mi ri ghi kt qu mi ln , c lp li nh vy mi mi.\n\nT hai iu trn ta rt ra c kt lun:\n\n1. Trong ln gn u tin str c gi tr l chui rng v c khi to ti v tr A1\n2. Trong ln lp **each** u tin, str c gi tr l \"Hoang\" v n lu  v tr A2\n3. Trong ln lp **each** th hai, str c gi tr mi l \"HoangDuy\" v n lu  v tr mi l A3\n4. Trong ln lp cui cng th str c gi tr chng ta mong i l \"HoangDuyChinh\" v n lu  v tr A4\n\nChng minh:\n\n```ruby\nstr = \"\"\nputs \"First location: #{str.object_id}\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str += i\n  puts \"value: #{str} | location: #{str.object_id}\"\nend\n\nputs \"Final value: #{str} | location: #{str.object_id}\"\n```\n\nKt qu:\n```\nFirst location: 47434608564740\nvalue: Hoang | location: 47434608564520\nvalue: HoangDuy | location: 47434608564440\nvalue: HoangDuyChinh | location: 47434608564360\nFinal value: HoangDuyChinh | location: 47434608564360\n```\n\nV th chng ta quan tm t  v sau l v tr A4 ny. Vy cn A1, A2, A3 cng ang mang gi tr? Chng i u v u? Chnh xc, n tr thnh mt vng nh rc v s c GC dn dp nhng khng phi ngay lp tc, vy trong khong thi gian  n vn nm gi cc vng nh ca chng ta.  cng l mt trong cc l do vic bn mun chy ruby on rails trn mt chic my tnh sinh vin 2GB l v cng kh khn. Ruby n Ram nh ung nc l vy.\n\nV d trn mng ta c ba phn t v ta c 3 gi tr rc trn b nh, hy tng tng bn c mt mng mt triu phn t :worried:\n\nGii php trong trng hp ny l g?  l duyt mng nh mt **object reference** ch khng phi mt bin gi tr:\n\n```ruby\nstr = \"\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str << i\nend\n```\n\nNh vy str s  ng mt vng nh v ta khng c mt ng bin rc khng mong i.\n\nChng minh:\n\n```ruby\nstr = \"\"\nputs \"First location: #{str.object_id}\"\n[\"Hoang\", \"Duy\", \"Chinh\"].each do |i|\n  str << i\n  puts \"value: #{str} | location: #{str.object_id}\"\nend\n\nputs \"Final value: #{str} | location: #{str.object_id}\"\n```\n\nKt qu:\n\n```\nFirst location: 47196120971580\nvalue: Hoang | location: 47196120971580\nvalue: HoangDuy | location: 47196120971580\nvalue: HoangDuyChinh | location: 47196120971580\nFinal value: HoangDuyChinh | location: 47196120971580\n```\n\n## 3. Tham kho\n\n[1] [https://en.wikipedia.org/wiki/Immutable_object](https://en.wikipedia.org/wiki/Immutable_object)\n","slug":"2019-04-08-immutable-va-mutable-trong-ruby","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsai000rp3m241tx0xdg","content":"<h2 id=\"1-Khai-niem-mutable-immutable-va-ruby\"><a href=\"#1-Khai-niem-mutable-immutable-va-ruby\" class=\"headerlink\" title=\"1. Khi nim mutable, immutable v ruby\"></a>1. Khi nim mutable, immutable v ruby</h2><p>i thng vo vn , chng ta cn  cp n ba vn : <strong>mutable</strong>, <strong>immutable</strong> v cch ruby x l hai khi nim . Trc ht nu bn  qun, th ti xin c nhc li nh ngha ca chng.</p>\n<p>Xin trch dn <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" target=\"_blank\" rel=\"noopener\">wiki</a>:</p>\n<blockquote>\n<p>In object-oriented and functional programming, an immutable object (unchangeable[1] object) is an object whose state cannot be modified after it is created.[2] This is in contrast to a mutable object (changeable object), which can be modified after it is created.</p>\n</blockquote>\n<p>Translate:</p>\n<blockquote>\n<p>Trong lp trnh hng i tng v lp trnh hm, mt i tng c coi immutable, l mt i tng <strong>khng th thay i</strong> trng thi sau khi n c to ln u, ngc li vi mt i tng c coi l mutable n c th <strong>thay i</strong> trng thi sau khi c khi to ln u.</p>\n</blockquote>\n<p>Dng t qu kh hiu, what the hell is trng thi? Theo mt cch hn lm v y , trng thi ca mt i tng ngoi i tht c thit lp bi tt c nhng g to nn chng.</p>\n<p>Tng t, cc trng thi ca mt i tng trong lp trnh cng c thit lp bng tt c nhng g to nn chng. V d:</p>\n<p>Vi 1 bin integer c bn <strong>x = 10</strong> th trng thi ca n c to ra bi tn bin v gi tr,  y tn bin l <strong>x</strong> v gi tr l <strong>10</strong>, u  trong vng nh (Ram) ca bn s lu tr ci ch <strong>x</strong> km s <strong>10</strong> ny.</p>\n<p>ng ngha vi  nu ti thay i c gi tr 10 ca bin x th x l mt i tng mutable v ngc li n l mt i tng immutable.</p>\n<p>Ti gn <strong>x = 11</strong> v thnh cng</p>\n<p>T  c th a ra kt lun x l mt mutable?</p>\n<p>Cu tr li l khng, mt s khi nim ri rm lm kh ta lc u. Nh  bit, th m CPU lm vic l a ch vng nh v ch a ch vng nh m thi. Nhng th khc n khng quan tm.</p>\n<p>Vi cu lnh gn <strong>x = 10</strong>. N c h iu hnh phin dch thnh c mt bin tn <strong>x</strong> c gn gi tr bng <strong>10</strong>, Ram, my hy b tr thm hai slot  lu tr <strong>x</strong> v <strong>10</strong>. Vy lc :</p>\n<p><strong>x</strong>(tn bin) c lu  v tr AAA<br><strong>10</strong>(gi tr) c lu  v tr BBB</p>\n<p>Vi lnh gn tip theo <strong>x = 11</strong>:</p>\n<p><strong>x</strong> vn yn v nm  v tr AAA<br><strong>10</strong> cng vn yn tr nm  v tr BBB<br><strong>11</strong> gi tr mi gn cho bin x th lc ny nm  v tr CCC</p>\n<p>Vy khi chy mt lnh gn mi th bin x  c gn bng gi tr trn mt vng nh khc, cn vng nh ban u <strong>khng thay i gi tr</strong> nn ta c th kt lun x l mt immutable.</p>\n<p>Chng minh bng v d sau trong ruby, ch  l ruby l mt ngn ng script, vi trnh thng dch VM bn di  x l ca n c vit bng C, nn  lp c s ca ruby ta khng th truy xut v tr vng nh n tng thanh ghi nh trong C c (vic  c lm  lp core YARV). Tuy nhin, ta c th kim tra c v tr tng trng trn b nh ca n thng qua <strong>object_id</strong>.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = <span class=\"number\">10</span></span><br><span class=\"line\">x.object_id</span><br><span class=\"line\"><span class=\"comment\">#=&gt; 21</span></span><br><span class=\"line\">x = <span class=\"number\">11</span></span><br><span class=\"line\">x.object_id</span><br><span class=\"line\"><span class=\"comment\">#=&gt; 23</span></span><br></pre></td></tr></table></figure>\n\n<p>Note: Nu bn gn tip x = 12 v kim tra li object_id, lc ny bn s thy n bng 25. Gi tr 10, 11, 12 tng ng vi object_id l 21, 23, 25. Liu c mt quy lut no  y? Cu tr li l c, nhng vn  ny s c  cp n trong mt bi vit tip theo.</p>\n<p>T v d trn bn  hiu v immutable, vy cn mutable? n gin nht l hy hiu ngc li vi immutable, nu gn x = 11 v x c object_id khng i th x chnh l mutable.</p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">T</span><span class=\"built_in\">t</span> c cc loi d liu nguy<span class=\"built_in\">n</span> thu trong ruby u l immutable.</span><br></pre></td></tr></table></figure>\n\n<p>Integer, float, string, boolean chng u l immutable.</p>\n<h2 id=\"2-Lieu-day-co-phai-la-mot-kien-thuc-can-thiet\"><a href=\"#2-Lieu-day-co-phai-la-mot-kien-thuc-can-thiet\" class=\"headerlink\" title=\"2. Liu y c phi l mt kin thc cn thit?\"></a>2. Liu y c phi l mt kin thc cn thit?</h2><p>Chc chn l c.</p>\n<p>Th nht: Nu trong cng vic bn khng bao gi phi dng n n, bn c th ni v n nh mt kin thc hn lm  th hin kh nng vi sp v yu cu tng lng :worried:</p>\n<p>Th hai: Xt v d sau</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str += i</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>T tng ca on m ny l cng tt c cc phn t trong mt mng string v cho ra kt qu cui cng l mt chui tng hp tt c cc phn t.<br>C iu g bt thng trong on m ny khng nh? Cu tr li l c. Nh nhng g chng ta  ni  trn c hai iu cn lu :</p>\n<blockquote>\n<ol>\n<li>Cc kiu d liu nguyn thu trong ruby u l immutable v hin nhin string khng ngoi l.</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol start=\"2\">\n<li>Khi mt object l immutable, th vic bn gn n bng mt gi tr khc ng ngha vi vic vng nh c s khng c dng n, m n s ra mt vng nh mi ri ghi kt qu mi ln , c lp li nh vy mi mi.</li>\n</ol>\n</blockquote>\n<p>T hai iu trn ta rt ra c kt lun:</p>\n<ol>\n<li>Trong ln gn u tin str c gi tr l chui rng v c khi to ti v tr A1</li>\n<li>Trong ln lp <strong>each</strong> u tin, str c gi tr l Hoang v n lu  v tr A2</li>\n<li>Trong ln lp <strong>each</strong> th hai, str c gi tr mi l HoangDuy v n lu  v tr mi l A3</li>\n<li>Trong ln lp cui cng th str c gi tr chng ta mong i l HoangDuyChinh v n lu  v tr A4</li>\n</ol>\n<p>Chng minh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">puts <span class=\"string\">\"First location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str += i</span><br><span class=\"line\">  puts <span class=\"string\">\"value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Final value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">First location:</span> <span class=\"number\">47434608564740</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">Hoang</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47434608564520</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">HoangDuy</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47434608564440</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">HoangDuyChinh</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47434608564360</span></span><br><span class=\"line\"><span class=\"attr\">Final value:</span> <span class=\"string\">HoangDuyChinh</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47434608564360</span></span><br></pre></td></tr></table></figure>\n\n<p>V th chng ta quan tm t  v sau l v tr A4 ny. Vy cn A1, A2, A3 cng ang mang gi tr? Chng i u v u? Chnh xc, n tr thnh mt vng nh rc v s c GC dn dp nhng khng phi ngay lp tc, vy trong khong thi gian  n vn nm gi cc vng nh ca chng ta.  cng l mt trong cc l do vic bn mun chy ruby on rails trn mt chic my tnh sinh vin 2GB l v cng kh khn. Ruby n Ram nh ung nc l vy.</p>\n<p>V d trn mng ta c ba phn t v ta c 3 gi tr rc trn b nh, hy tng tng bn c mt mng mt triu phn t :worried:</p>\n<p>Gii php trong trng hp ny l g?  l duyt mng nh mt <strong>object reference</strong> ch khng phi mt bin gi tr:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str &lt;&lt; i</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh vy str s  ng mt vng nh v ta khng c mt ng bin rc khng mong i.</p>\n<p>Chng minh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">puts <span class=\"string\">\"First location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str &lt;&lt; i</span><br><span class=\"line\">  puts <span class=\"string\">\"value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Final value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">First location:</span> <span class=\"number\">47196120971580</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">Hoang</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47196120971580</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">HoangDuy</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47196120971580</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">HoangDuyChinh</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47196120971580</span></span><br><span class=\"line\"><span class=\"attr\">Final value:</span> <span class=\"string\">HoangDuyChinh</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47196120971580</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Tham-khao\"><a href=\"#3-Tham-khao\" class=\"headerlink\" title=\"3. Tham kho\"></a>3. Tham kho</h2><p>[1] <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Immutable_object</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Khai-niem-mutable-immutable-va-ruby\"><a href=\"#1-Khai-niem-mutable-immutable-va-ruby\" class=\"headerlink\" title=\"1. Khi nim mutable, immutable v ruby\"></a>1. Khi nim mutable, immutable v ruby</h2><p>i thng vo vn , chng ta cn  cp n ba vn : <strong>mutable</strong>, <strong>immutable</strong> v cch ruby x l hai khi nim . Trc ht nu bn  qun, th ti xin c nhc li nh ngha ca chng.</p>\n<p>Xin trch dn <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" target=\"_blank\" rel=\"noopener\">wiki</a>:</p>\n<blockquote>\n<p>In object-oriented and functional programming, an immutable object (unchangeable[1] object) is an object whose state cannot be modified after it is created.[2] This is in contrast to a mutable object (changeable object), which can be modified after it is created.</p>\n</blockquote>\n<p>Translate:</p>\n<blockquote>\n<p>Trong lp trnh hng i tng v lp trnh hm, mt i tng c coi immutable, l mt i tng <strong>khng th thay i</strong> trng thi sau khi n c to ln u, ngc li vi mt i tng c coi l mutable n c th <strong>thay i</strong> trng thi sau khi c khi to ln u.</p>\n</blockquote>\n<p>Dng t qu kh hiu, what the hell is trng thi? Theo mt cch hn lm v y , trng thi ca mt i tng ngoi i tht c thit lp bi tt c nhng g to nn chng.</p>\n<p>Tng t, cc trng thi ca mt i tng trong lp trnh cng c thit lp bng tt c nhng g to nn chng. V d:</p>\n<p>Vi 1 bin integer c bn <strong>x = 10</strong> th trng thi ca n c to ra bi tn bin v gi tr,  y tn bin l <strong>x</strong> v gi tr l <strong>10</strong>, u  trong vng nh (Ram) ca bn s lu tr ci ch <strong>x</strong> km s <strong>10</strong> ny.</p>\n<p>ng ngha vi  nu ti thay i c gi tr 10 ca bin x th x l mt i tng mutable v ngc li n l mt i tng immutable.</p>\n<p>Ti gn <strong>x = 11</strong> v thnh cng</p>\n<p>T  c th a ra kt lun x l mt mutable?</p>\n<p>Cu tr li l khng, mt s khi nim ri rm lm kh ta lc u. Nh  bit, th m CPU lm vic l a ch vng nh v ch a ch vng nh m thi. Nhng th khc n khng quan tm.</p>\n<p>Vi cu lnh gn <strong>x = 10</strong>. N c h iu hnh phin dch thnh c mt bin tn <strong>x</strong> c gn gi tr bng <strong>10</strong>, Ram, my hy b tr thm hai slot  lu tr <strong>x</strong> v <strong>10</strong>. Vy lc :</p>\n<p><strong>x</strong>(tn bin) c lu  v tr AAA<br><strong>10</strong>(gi tr) c lu  v tr BBB</p>\n<p>Vi lnh gn tip theo <strong>x = 11</strong>:</p>\n<p><strong>x</strong> vn yn v nm  v tr AAA<br><strong>10</strong> cng vn yn tr nm  v tr BBB<br><strong>11</strong> gi tr mi gn cho bin x th lc ny nm  v tr CCC</p>\n<p>Vy khi chy mt lnh gn mi th bin x  c gn bng gi tr trn mt vng nh khc, cn vng nh ban u <strong>khng thay i gi tr</strong> nn ta c th kt lun x l mt immutable.</p>\n<p>Chng minh bng v d sau trong ruby, ch  l ruby l mt ngn ng script, vi trnh thng dch VM bn di  x l ca n c vit bng C, nn  lp c s ca ruby ta khng th truy xut v tr vng nh n tng thanh ghi nh trong C c (vic  c lm  lp core YARV). Tuy nhin, ta c th kim tra c v tr tng trng trn b nh ca n thng qua <strong>object_id</strong>.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = <span class=\"number\">10</span></span><br><span class=\"line\">x.object_id</span><br><span class=\"line\"><span class=\"comment\">#=&gt; 21</span></span><br><span class=\"line\">x = <span class=\"number\">11</span></span><br><span class=\"line\">x.object_id</span><br><span class=\"line\"><span class=\"comment\">#=&gt; 23</span></span><br></pre></td></tr></table></figure>\n\n<p>Note: Nu bn gn tip x = 12 v kim tra li object_id, lc ny bn s thy n bng 25. Gi tr 10, 11, 12 tng ng vi object_id l 21, 23, 25. Liu c mt quy lut no  y? Cu tr li l c, nhng vn  ny s c  cp n trong mt bi vit tip theo.</p>\n<p>T v d trn bn  hiu v immutable, vy cn mutable? n gin nht l hy hiu ngc li vi immutable, nu gn x = 11 v x c object_id khng i th x chnh l mutable.</p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">T</span><span class=\"built_in\">t</span> c cc loi d liu nguy<span class=\"built_in\">n</span> thu trong ruby u l immutable.</span><br></pre></td></tr></table></figure>\n\n<p>Integer, float, string, boolean chng u l immutable.</p>\n<h2 id=\"2-Lieu-day-co-phai-la-mot-kien-thuc-can-thiet\"><a href=\"#2-Lieu-day-co-phai-la-mot-kien-thuc-can-thiet\" class=\"headerlink\" title=\"2. Liu y c phi l mt kin thc cn thit?\"></a>2. Liu y c phi l mt kin thc cn thit?</h2><p>Chc chn l c.</p>\n<p>Th nht: Nu trong cng vic bn khng bao gi phi dng n n, bn c th ni v n nh mt kin thc hn lm  th hin kh nng vi sp v yu cu tng lng :worried:</p>\n<p>Th hai: Xt v d sau</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str += i</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>T tng ca on m ny l cng tt c cc phn t trong mt mng string v cho ra kt qu cui cng l mt chui tng hp tt c cc phn t.<br>C iu g bt thng trong on m ny khng nh? Cu tr li l c. Nh nhng g chng ta  ni  trn c hai iu cn lu :</p>\n<blockquote>\n<ol>\n<li>Cc kiu d liu nguyn thu trong ruby u l immutable v hin nhin string khng ngoi l.</li>\n</ol>\n</blockquote>\n<blockquote>\n<ol start=\"2\">\n<li>Khi mt object l immutable, th vic bn gn n bng mt gi tr khc ng ngha vi vic vng nh c s khng c dng n, m n s ra mt vng nh mi ri ghi kt qu mi ln , c lp li nh vy mi mi.</li>\n</ol>\n</blockquote>\n<p>T hai iu trn ta rt ra c kt lun:</p>\n<ol>\n<li>Trong ln gn u tin str c gi tr l chui rng v c khi to ti v tr A1</li>\n<li>Trong ln lp <strong>each</strong> u tin, str c gi tr l Hoang v n lu  v tr A2</li>\n<li>Trong ln lp <strong>each</strong> th hai, str c gi tr mi l HoangDuy v n lu  v tr mi l A3</li>\n<li>Trong ln lp cui cng th str c gi tr chng ta mong i l HoangDuyChinh v n lu  v tr A4</li>\n</ol>\n<p>Chng minh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">puts <span class=\"string\">\"First location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str += i</span><br><span class=\"line\">  puts <span class=\"string\">\"value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Final value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">First location:</span> <span class=\"number\">47434608564740</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">Hoang</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47434608564520</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">HoangDuy</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47434608564440</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">HoangDuyChinh</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47434608564360</span></span><br><span class=\"line\"><span class=\"attr\">Final value:</span> <span class=\"string\">HoangDuyChinh</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47434608564360</span></span><br></pre></td></tr></table></figure>\n\n<p>V th chng ta quan tm t  v sau l v tr A4 ny. Vy cn A1, A2, A3 cng ang mang gi tr? Chng i u v u? Chnh xc, n tr thnh mt vng nh rc v s c GC dn dp nhng khng phi ngay lp tc, vy trong khong thi gian  n vn nm gi cc vng nh ca chng ta.  cng l mt trong cc l do vic bn mun chy ruby on rails trn mt chic my tnh sinh vin 2GB l v cng kh khn. Ruby n Ram nh ung nc l vy.</p>\n<p>V d trn mng ta c ba phn t v ta c 3 gi tr rc trn b nh, hy tng tng bn c mt mng mt triu phn t :worried:</p>\n<p>Gii php trong trng hp ny l g?  l duyt mng nh mt <strong>object reference</strong> ch khng phi mt bin gi tr:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str &lt;&lt; i</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh vy str s  ng mt vng nh v ta khng c mt ng bin rc khng mong i.</p>\n<p>Chng minh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">str = <span class=\"string\">\"\"</span></span><br><span class=\"line\">puts <span class=\"string\">\"First location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\">[<span class=\"string\">\"Hoang\"</span>, <span class=\"string\">\"Duy\"</span>, <span class=\"string\">\"Chinh\"</span>].each <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">  str &lt;&lt; i</span><br><span class=\"line\">  puts <span class=\"string\">\"value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"Final value: <span class=\"subst\">#&#123;str&#125;</span> | location: <span class=\"subst\">#&#123;str.object_id&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Kt qu:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">First location:</span> <span class=\"number\">47196120971580</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">Hoang</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47196120971580</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">HoangDuy</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47196120971580</span></span><br><span class=\"line\"><span class=\"attr\">value:</span> <span class=\"string\">HoangDuyChinh</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47196120971580</span></span><br><span class=\"line\"><span class=\"attr\">Final value:</span> <span class=\"string\">HoangDuyChinh</span> <span class=\"string\">|</span> <span class=\"attr\">location:</span> <span class=\"number\">47196120971580</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Tham-khao\"><a href=\"#3-Tham-khao\" class=\"headerlink\" title=\"3. Tham kho\"></a>3. Tham kho</h2><p>[1] <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Immutable_object</a></p>\n"},{"title":"SaaS, PaaS v IaaS","date":"2019-04-09T17:00:00.000Z","draft":false,"mytag":"#TIL","label":"#til","_content":"\n**SaaS:  Software as a Service**\nV d nh: TFS, Github.\nMua mt cn nh v mua xong th vo   lun ch khng cn vt v xy dng g thm.\nu: Nhanh, tin.\nNhc: khng c tnh tu chnh, v dch v s ph thng v khng th cover ht c nhu cu ca  chng ta.\n\n**PaaS:  Platform as a Service**\nV d nh: Heroku, AWS Elastic Beanstalk.\nMua mt cn nh  c mt s tin ch c bn  sng, mnh ch cn dn thm  c ca mnh(source code) vo l sng c.\nu: Tu chnh d dng hn SaaS, lm nhanh v n gin hn IaaS\nNhc: Vn khng th t thit lp cc ci t nng cao hn.\n\n**IaaS: Infrastructure as a Service**\nV d nh: EC2, DigitalOcean\nMua mt mnh t sau  th t xy nh, sm ...\nu: c t ch h thng v c th tu  cu hnh(trong gii hn ca cloud cho php).\nNhc: Phc tp nht trong 3 loi.\n","source":"_posts/2019-04-10-iaas-paas-saas.md","raw":"---\ntitle: \"SaaS, PaaS v IaaS\"\ndate: 2019-04-10\ndraft: false\ntags: [\"til\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\nlabel: \"#til\"\n---\n\n**SaaS:  Software as a Service**\nV d nh: TFS, Github.\nMua mt cn nh v mua xong th vo   lun ch khng cn vt v xy dng g thm.\nu: Nhanh, tin.\nNhc: khng c tnh tu chnh, v dch v s ph thng v khng th cover ht c nhu cu ca  chng ta.\n\n**PaaS:  Platform as a Service**\nV d nh: Heroku, AWS Elastic Beanstalk.\nMua mt cn nh  c mt s tin ch c bn  sng, mnh ch cn dn thm  c ca mnh(source code) vo l sng c.\nu: Tu chnh d dng hn SaaS, lm nhanh v n gin hn IaaS\nNhc: Vn khng th t thit lp cc ci t nng cao hn.\n\n**IaaS: Infrastructure as a Service**\nV d nh: EC2, DigitalOcean\nMua mt mnh t sau  th t xy nh, sm ...\nu: c t ch h thng v c th tu  cu hnh(trong gii hn ca cloud cho php).\nNhc: Phc tp nht trong 3 loi.\n","slug":"2019-04-10-iaas-paas-saas","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsaj000tp3m24olxbr6z","content":"<p><strong>SaaS:  Software as a Service</strong><br>V d nh: TFS, Github.<br>Mua mt cn nh v mua xong th vo   lun ch khng cn vt v xy dng g thm.<br>u: Nhanh, tin.<br>Nhc: khng c tnh tu chnh, v dch v s ph thng v khng th cover ht c nhu cu ca  chng ta.</p>\n<p><strong>PaaS:  Platform as a Service</strong><br>V d nh: Heroku, AWS Elastic Beanstalk.<br>Mua mt cn nh  c mt s tin ch c bn  sng, mnh ch cn dn thm  c ca mnh(source code) vo l sng c.<br>u: Tu chnh d dng hn SaaS, lm nhanh v n gin hn IaaS<br>Nhc: Vn khng th t thit lp cc ci t nng cao hn.</p>\n<p><strong>IaaS: Infrastructure as a Service</strong><br>V d nh: EC2, DigitalOcean<br>Mua mt mnh t sau  th t xy nh, sm <br>u: c t ch h thng v c th tu  cu hnh(trong gii hn ca cloud cho php).<br>Nhc: Phc tp nht trong 3 loi.</p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>SaaS:  Software as a Service</strong><br>V d nh: TFS, Github.<br>Mua mt cn nh v mua xong th vo   lun ch khng cn vt v xy dng g thm.<br>u: Nhanh, tin.<br>Nhc: khng c tnh tu chnh, v dch v s ph thng v khng th cover ht c nhu cu ca  chng ta.</p>\n<p><strong>PaaS:  Platform as a Service</strong><br>V d nh: Heroku, AWS Elastic Beanstalk.<br>Mua mt cn nh  c mt s tin ch c bn  sng, mnh ch cn dn thm  c ca mnh(source code) vo l sng c.<br>u: Tu chnh d dng hn SaaS, lm nhanh v n gin hn IaaS<br>Nhc: Vn khng th t thit lp cc ci t nng cao hn.</p>\n<p><strong>IaaS: Infrastructure as a Service</strong><br>V d nh: EC2, DigitalOcean<br>Mua mt mnh t sau  th t xy nh, sm <br>u: c t ch h thng v c th tu  cu hnh(trong gii hn ca cloud cho php).<br>Nhc: Phc tp nht trong 3 loi.</p>\n"},{"title":"Upload Vi S3 Trong Rails","date":"2019-04-09T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\nGhi ch ny c tham kho t bi vit [Lu tr file trn Amazon S3](https://viblo.asia/p/ror-luu-tru-file-tren-amazon-s3-BMvRpNXEzwY#_cau-hinh-connect-toi-dich-vu-s3-trong-ung-dung-rails-3) ca tc gi **@duyth1993** trn website **viblo.com**.\n\nBi ton: Hin ti ti ang cn tm mt dch v lu tr file, trc gi ti khng s dng v cha c nhu cu. Tm kim mt lc th ti quyt nh s dng S3 v sn cng ang cn ti khon free ca ca AWS, tham kho bi vit bn trn mt s lu  khi s dng ny m ti rt ra nh sau:\n\n1. Bi vit trn ca tc gi vit rt chi tit, tuy nhin hng dn  l trn rails 4 v cn ch  thay i mt s config  ph hp vi rails 5 m ti ang s dng.  l v vic s dng **credentials** thay th cho **secret**, thng tin y hn c th tham kho ti bi vit [Rails v bo mt thng tin quan trng](http://hdchinh.com/2019/02/22/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails/).\n\n2. C 4 thng tin quan trng  cu hnh n S3  l: **access_key_id**, **secret_access_key**, **region** v **bucket_name**.\n\n3. Mt s config  connect ti server S3 l do th vin **aws-sdk-rails** quy nh v vy n gin l lm theo v khng thc mc ti sao.\n\n4. Cn ch  bc config cho file trc khi upload vi cc thng tin nh: **content_type**(nh dng file, vic s dng nh dng file dng khng tng thch vi nh bn upload ln dn  vic khng th hin th view bc nh .), **acl**(access control list: quy nh v vic ai c th access khi c url ca file) v **server_side_encryption**(la chn ny  m ha file bn ti ln, i km  l gim hiu nng v thm 1 bc cn x l.)\n\nSource demo xem ti [y](https://github.com/hdchinh/S3_with_rails_5.2)\n","source":"_posts/2019-04-10-upload-file-len-aws-s3-va-nhung-van-de-can-luu-y.md","raw":"---\ntitle: \"Upload Vi S3 Trong Rails\"\ndate: 2019-04-10\ndraft: false\ntags: [\"aws\", \"rails\", \"til\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\n---\n\nGhi ch ny c tham kho t bi vit [Lu tr file trn Amazon S3](https://viblo.asia/p/ror-luu-tru-file-tren-amazon-s3-BMvRpNXEzwY#_cau-hinh-connect-toi-dich-vu-s3-trong-ung-dung-rails-3) ca tc gi **@duyth1993** trn website **viblo.com**.\n\nBi ton: Hin ti ti ang cn tm mt dch v lu tr file, trc gi ti khng s dng v cha c nhu cu. Tm kim mt lc th ti quyt nh s dng S3 v sn cng ang cn ti khon free ca ca AWS, tham kho bi vit bn trn mt s lu  khi s dng ny m ti rt ra nh sau:\n\n1. Bi vit trn ca tc gi vit rt chi tit, tuy nhin hng dn  l trn rails 4 v cn ch  thay i mt s config  ph hp vi rails 5 m ti ang s dng.  l v vic s dng **credentials** thay th cho **secret**, thng tin y hn c th tham kho ti bi vit [Rails v bo mt thng tin quan trng](http://hdchinh.com/2019/02/22/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails/).\n\n2. C 4 thng tin quan trng  cu hnh n S3  l: **access_key_id**, **secret_access_key**, **region** v **bucket_name**.\n\n3. Mt s config  connect ti server S3 l do th vin **aws-sdk-rails** quy nh v vy n gin l lm theo v khng thc mc ti sao.\n\n4. Cn ch  bc config cho file trc khi upload vi cc thng tin nh: **content_type**(nh dng file, vic s dng nh dng file dng khng tng thch vi nh bn upload ln dn  vic khng th hin th view bc nh .), **acl**(access control list: quy nh v vic ai c th access khi c url ca file) v **server_side_encryption**(la chn ny  m ha file bn ti ln, i km  l gim hiu nng v thm 1 bc cn x l.)\n\nSource demo xem ti [y](https://github.com/hdchinh/S3_with_rails_5.2)\n","slug":"2019-04-10-upload-file-len-aws-s3-va-nhung-van-de-can-luu-y","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsak000xp3m2egka1dhz","content":"<p>Ghi ch ny c tham kho t bi vit <a href=\"https://viblo.asia/p/ror-luu-tru-file-tren-amazon-s3-BMvRpNXEzwY#_cau-hinh-connect-toi-dich-vu-s3-trong-ung-dung-rails-3\" target=\"_blank\" rel=\"noopener\">Lu tr file trn Amazon S3</a> ca tc gi <strong>@duyth1993</strong> trn website <strong>viblo.com</strong>.</p>\n<p>Bi ton: Hin ti ti ang cn tm mt dch v lu tr file, trc gi ti khng s dng v cha c nhu cu. Tm kim mt lc th ti quyt nh s dng S3 v sn cng ang cn ti khon free ca ca AWS, tham kho bi vit bn trn mt s lu  khi s dng ny m ti rt ra nh sau:</p>\n<ol>\n<li><p>Bi vit trn ca tc gi vit rt chi tit, tuy nhin hng dn  l trn rails 4 v cn ch  thay i mt s config  ph hp vi rails 5 m ti ang s dng.  l v vic s dng <strong>credentials</strong> thay th cho <strong>secret</strong>, thng tin y hn c th tham kho ti bi vit <a href=\"http://hdchinh.com/2019/02/22/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails/\" target=\"_blank\" rel=\"noopener\">Rails v bo mt thng tin quan trng</a>.</p>\n</li>\n<li><p>C 4 thng tin quan trng  cu hnh n S3  l: <strong>access_key_id</strong>, <strong>secret_access_key</strong>, <strong>region</strong> v <strong>bucket_name</strong>.</p>\n</li>\n<li><p>Mt s config  connect ti server S3 l do th vin <strong>aws-sdk-rails</strong> quy nh v vy n gin l lm theo v khng thc mc ti sao.</p>\n</li>\n<li><p>Cn ch  bc config cho file trc khi upload vi cc thng tin nh: <strong>content_type</strong>(nh dng file, vic s dng nh dng file dng khng tng thch vi nh bn upload ln dn  vic khng th hin th view bc nh .), <strong>acl</strong>(access control list: quy nh v vic ai c th access khi c url ca file) v <strong>server_side_encryption</strong>(la chn ny  m ha file bn ti ln, i km  l gim hiu nng v thm 1 bc cn x l.)</p>\n</li>\n</ol>\n<p>Source demo xem ti <a href=\"https://github.com/hdchinh/S3_with_rails_5.2\" target=\"_blank\" rel=\"noopener\">y</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Ghi ch ny c tham kho t bi vit <a href=\"https://viblo.asia/p/ror-luu-tru-file-tren-amazon-s3-BMvRpNXEzwY#_cau-hinh-connect-toi-dich-vu-s3-trong-ung-dung-rails-3\" target=\"_blank\" rel=\"noopener\">Lu tr file trn Amazon S3</a> ca tc gi <strong>@duyth1993</strong> trn website <strong>viblo.com</strong>.</p>\n<p>Bi ton: Hin ti ti ang cn tm mt dch v lu tr file, trc gi ti khng s dng v cha c nhu cu. Tm kim mt lc th ti quyt nh s dng S3 v sn cng ang cn ti khon free ca ca AWS, tham kho bi vit bn trn mt s lu  khi s dng ny m ti rt ra nh sau:</p>\n<ol>\n<li><p>Bi vit trn ca tc gi vit rt chi tit, tuy nhin hng dn  l trn rails 4 v cn ch  thay i mt s config  ph hp vi rails 5 m ti ang s dng.  l v vic s dng <strong>credentials</strong> thay th cho <strong>secret</strong>, thng tin y hn c th tham kho ti bi vit <a href=\"http://hdchinh.com/2019/02/22/2019-02-22-xu-ly-thong-tin-quan-trong-trong-rails/\" target=\"_blank\" rel=\"noopener\">Rails v bo mt thng tin quan trng</a>.</p>\n</li>\n<li><p>C 4 thng tin quan trng  cu hnh n S3  l: <strong>access_key_id</strong>, <strong>secret_access_key</strong>, <strong>region</strong> v <strong>bucket_name</strong>.</p>\n</li>\n<li><p>Mt s config  connect ti server S3 l do th vin <strong>aws-sdk-rails</strong> quy nh v vy n gin l lm theo v khng thc mc ti sao.</p>\n</li>\n<li><p>Cn ch  bc config cho file trc khi upload vi cc thng tin nh: <strong>content_type</strong>(nh dng file, vic s dng nh dng file dng khng tng thch vi nh bn upload ln dn  vic khng th hin th view bc nh .), <strong>acl</strong>(access control list: quy nh v vic ai c th access khi c url ca file) v <strong>server_side_encryption</strong>(la chn ny  m ha file bn ti ln, i km  l gim hiu nng v thm 1 bc cn x l.)</p>\n</li>\n</ol>\n<p>Source demo xem ti <a href=\"https://github.com/hdchinh/S3_with_rails_5.2\" target=\"_blank\" rel=\"noopener\">y</a></p>\n"},{"title":"S Dng Carrierwave Vi S3","date":"2019-04-10T17:00:00.000Z","draft":false,"mytag":"#TIL","label":"#til","_content":"\n# Gemfile\n\n```ruby\ngem 'fog', require: 'fog/aws'\ngem 'carrierwave'\n```\n# Class Uploader\n\n```ruby\nstorage :fog\n```\n\n# File cu hnh config/initializers/carrierwave.rb\n\n```ruby\nrequire 'carrierwave/storage/fog'\n\nCarrierWave.configure do |config|\n  config.fog_credentials = {\n    :provider              => 'AWS',\n    :aws_access_key_id     => Rails.application.credentials.access_key_id,\n    :aws_secret_access_key => Rails.application.credentials.secret_access_key,\n    :region                => Rails.application.credentials.s3_region,\n    :path_style            => true,\n    :host                  => 's3.us-east-2.amazonaws.com',\n    :endpoint              => 'https://s3.us-east-2.amazonaws.com'\n  }\n  config.cache_dir = \"#{Rails.root}/tmp/uploads\"\n  config.fog_directory  = Rails.application.credentials.s3_bucket\n  config.fog_public     = true\n  config.fog_attributes = { 'Cache-Control' => \"max-age=#{10.day.to_i}\" }\n  config.storage = :fog\nend\n```\n\n# Acess File uploaded\n\n`Instance.field_name_image.url` (get link s3)\n\n# Source demo\n\n[Ti y](https://github.com/hdchinh/s3_carrierwave)\n","source":"_posts/2019-04-11-su-dung-carrierwave-voi-s3.md","raw":"---\ntitle: \"S Dng Carrierwave Vi S3\"\ndate: 2019-04-11\ndraft: false\ntags: [\"rails\", \"aws\", \"carrierwave\", \"til\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\nlabel: \"#til\"\n---\n\n# Gemfile\n\n```ruby\ngem 'fog', require: 'fog/aws'\ngem 'carrierwave'\n```\n# Class Uploader\n\n```ruby\nstorage :fog\n```\n\n# File cu hnh config/initializers/carrierwave.rb\n\n```ruby\nrequire 'carrierwave/storage/fog'\n\nCarrierWave.configure do |config|\n  config.fog_credentials = {\n    :provider              => 'AWS',\n    :aws_access_key_id     => Rails.application.credentials.access_key_id,\n    :aws_secret_access_key => Rails.application.credentials.secret_access_key,\n    :region                => Rails.application.credentials.s3_region,\n    :path_style            => true,\n    :host                  => 's3.us-east-2.amazonaws.com',\n    :endpoint              => 'https://s3.us-east-2.amazonaws.com'\n  }\n  config.cache_dir = \"#{Rails.root}/tmp/uploads\"\n  config.fog_directory  = Rails.application.credentials.s3_bucket\n  config.fog_public     = true\n  config.fog_attributes = { 'Cache-Control' => \"max-age=#{10.day.to_i}\" }\n  config.storage = :fog\nend\n```\n\n# Acess File uploaded\n\n`Instance.field_name_image.url` (get link s3)\n\n# Source demo\n\n[Ti y](https://github.com/hdchinh/s3_carrierwave)\n","slug":"2019-04-11-su-dung-carrierwave-voi-s3","published":1,"updated":"2022-01-29T09:29:59.926Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsak000zp3m2bsz05h09","content":"<h1 id=\"Gemfile\"><a href=\"#Gemfile\" class=\"headerlink\" title=\"Gemfile\"></a>Gemfile</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gem <span class=\"string\">'fog'</span>, <span class=\"symbol\">require:</span> <span class=\"string\">'fog/aws'</span></span><br><span class=\"line\">gem <span class=\"string\">'carrierwave'</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"Class-Uploader\"><a href=\"#Class-Uploader\" class=\"headerlink\" title=\"Class Uploader\"></a>Class Uploader</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">storage <span class=\"symbol\">:fog</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"File-cau-hinh-config-initializers-carrierwave-rb\"><a href=\"#File-cau-hinh-config-initializers-carrierwave-rb\" class=\"headerlink\" title=\"File cu hnh config/initializers/carrierwave.rb\"></a>File cu hnh config/initializers/carrierwave.rb</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'carrierwave/storage/fog'</span></span><br><span class=\"line\"></span><br><span class=\"line\">CarrierWave.configure <span class=\"keyword\">do</span> <span class=\"params\">|config|</span></span><br><span class=\"line\">  config.fog_credentials = &#123;</span><br><span class=\"line\">    <span class=\"symbol\">:provider</span>              =&gt; <span class=\"string\">'AWS'</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:aws_access_key_id</span>     =&gt; Rails.application.credentials.access_key_id,</span><br><span class=\"line\">    <span class=\"symbol\">:aws_secret_access_key</span> =&gt; Rails.application.credentials.secret_access_key,</span><br><span class=\"line\">    <span class=\"symbol\">:region</span>                =&gt; Rails.application.credentials.s3_region,</span><br><span class=\"line\">    <span class=\"symbol\">:path_style</span>            =&gt; <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:host</span>                  =&gt; <span class=\"string\">'s3.us-east-2.amazonaws.com'</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:endpoint</span>              =&gt; <span class=\"string\">'https://s3.us-east-2.amazonaws.com'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  config.cache_dir = <span class=\"string\">\"<span class=\"subst\">#&#123;Rails.root&#125;</span>/tmp/uploads\"</span></span><br><span class=\"line\">  config.fog_directory  = Rails.application.credentials.s3_bucket</span><br><span class=\"line\">  config.fog_public     = <span class=\"literal\">true</span></span><br><span class=\"line\">  config.fog_attributes = &#123; <span class=\"string\">'Cache-Control'</span> =&gt; <span class=\"string\">\"max-age=<span class=\"subst\">#&#123;<span class=\"number\">10</span>.day.to_i&#125;</span>\"</span> &#125;</span><br><span class=\"line\">  config.storage = <span class=\"symbol\">:fog</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Acess-File-uploaded\"><a href=\"#Acess-File-uploaded\" class=\"headerlink\" title=\"Acess File uploaded\"></a>Acess File uploaded</h1><p><code>Instance.field_name_image.url</code> (get link s3)</p>\n<h1 id=\"Source-demo\"><a href=\"#Source-demo\" class=\"headerlink\" title=\"Source demo\"></a>Source demo</h1><p><a href=\"https://github.com/hdchinh/s3_carrierwave\" target=\"_blank\" rel=\"noopener\">Ti y</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Gemfile\"><a href=\"#Gemfile\" class=\"headerlink\" title=\"Gemfile\"></a>Gemfile</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gem <span class=\"string\">'fog'</span>, <span class=\"symbol\">require:</span> <span class=\"string\">'fog/aws'</span></span><br><span class=\"line\">gem <span class=\"string\">'carrierwave'</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"Class-Uploader\"><a href=\"#Class-Uploader\" class=\"headerlink\" title=\"Class Uploader\"></a>Class Uploader</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">storage <span class=\"symbol\">:fog</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"File-cau-hinh-config-initializers-carrierwave-rb\"><a href=\"#File-cau-hinh-config-initializers-carrierwave-rb\" class=\"headerlink\" title=\"File cu hnh config/initializers/carrierwave.rb\"></a>File cu hnh config/initializers/carrierwave.rb</h1><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'carrierwave/storage/fog'</span></span><br><span class=\"line\"></span><br><span class=\"line\">CarrierWave.configure <span class=\"keyword\">do</span> <span class=\"params\">|config|</span></span><br><span class=\"line\">  config.fog_credentials = &#123;</span><br><span class=\"line\">    <span class=\"symbol\">:provider</span>              =&gt; <span class=\"string\">'AWS'</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:aws_access_key_id</span>     =&gt; Rails.application.credentials.access_key_id,</span><br><span class=\"line\">    <span class=\"symbol\">:aws_secret_access_key</span> =&gt; Rails.application.credentials.secret_access_key,</span><br><span class=\"line\">    <span class=\"symbol\">:region</span>                =&gt; Rails.application.credentials.s3_region,</span><br><span class=\"line\">    <span class=\"symbol\">:path_style</span>            =&gt; <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:host</span>                  =&gt; <span class=\"string\">'s3.us-east-2.amazonaws.com'</span>,</span><br><span class=\"line\">    <span class=\"symbol\">:endpoint</span>              =&gt; <span class=\"string\">'https://s3.us-east-2.amazonaws.com'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  config.cache_dir = <span class=\"string\">\"<span class=\"subst\">#&#123;Rails.root&#125;</span>/tmp/uploads\"</span></span><br><span class=\"line\">  config.fog_directory  = Rails.application.credentials.s3_bucket</span><br><span class=\"line\">  config.fog_public     = <span class=\"literal\">true</span></span><br><span class=\"line\">  config.fog_attributes = &#123; <span class=\"string\">'Cache-Control'</span> =&gt; <span class=\"string\">\"max-age=<span class=\"subst\">#&#123;<span class=\"number\">10</span>.day.to_i&#125;</span>\"</span> &#125;</span><br><span class=\"line\">  config.storage = <span class=\"symbol\">:fog</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Acess-File-uploaded\"><a href=\"#Acess-File-uploaded\" class=\"headerlink\" title=\"Acess File uploaded\"></a>Acess File uploaded</h1><p><code>Instance.field_name_image.url</code> (get link s3)</p>\n<h1 id=\"Source-demo\"><a href=\"#Source-demo\" class=\"headerlink\" title=\"Source demo\"></a>Source demo</h1><p><a href=\"https://github.com/hdchinh/s3_carrierwave\" target=\"_blank\" rel=\"noopener\">Ti y</a></p>\n"},{"title":"Tm Hiu V Ch S Trong Https","date":"2019-05-03T17:00:00.000Z","draft":false,"mytag":"Secure","mytrend":"COOL","_content":"\n## t vn \n\ni lun vo ch , khi mi bt u vi mn mng my tnh  trng i hc, s mp m khi cn ngi trn gh nh trng khin chng ta i khi  nhm ln v **http** v **https**, nh ngy  ti  tng ngh chng l 2 giao thc khc nhau,  m ngy  ti c hiu giao thc l g khng nh :fearful: thi dp qua mt bn, bn cht ca **https** cng l giao thc **http** nhng thm c ch **s** ng vi **secure**. Nghe thi  thy bo mt ri, **https** ra i nhm mc ch lm cho giao thc **http** tr nn an ton hn, vy n lm cho **http** tr nn an ton hn nh th no?\n\n## Lun bn\n\n## 1. Http hiu n gin th hot ng th no?\n\nMc ch cui cng ca m hn n ri rm ny cng l truyn nhn thng tin, ti c mt website ti mun gi n ln mng internet  bn, mt ai  m ti khng quen c th v tnh lt qua c c.\nHttp l mt giao thc, hiu n gin l mt b quy tc  chung  ngi s dng dng trnh duyt c th truy cp ti 1 trang web, v trang web  hiu c yu cu  ri tr v ni dung m trnh duyt c th hiu c, v nh c nhiu ngn ng trn th gii, vy gia 2 ngi c 2 ting ni khc nhau  giao tip c h phi cng nhau s dng mt b ngn ng chung m c hai cng hiu c.\n\nMt c im c bn ca **http** l n truyn nhn thng tin di dng **text** thng thng, khng h m ho, iu ny dn ti vn   l thng tin c truyn nhn nhanh chng, nh nhng, ni dung rt thn thin vi ngi dng (v n l text m).\n\nMi th c v good? khng hn nh vy, vic d liu truyn gi c lu di dng text khin n qu thn thin vi ngi dng, m ngi dng th khng phi ai cng tt :smirk: . C nhng ngi dng m mc ch h ti vi website ca bn l  ph hoi, h s d dng tn cng bng cch no  ly c request ca bn ri c c ni dung trong request  1 cch d dng.\n\nBi hc: Khng phi lc no cng nn qu thn thin vi ngi dng cui :worried:\n\n## 2. Https khc phc vn  ca http nh th no?\n\nChng ta  nm c khi qut vn  bo mt gp phi khi s dng **http**. Vi nhng website gii tr thun tu vi ni dung ch yu l hnh nh, m thanh v khng c thng tin cn bo mt th s dng https hnh nh cng ch  tt cho SEO, ngoi ra cng khng cn gi tr g. Nhng nu bn s dng **Internet Banking** vi http, ri bn ng nhp vi ti khon ngn hng ca mnh trn , mi thng tin bn gi i u di dng nhng gi tin c ni dung plain/text trn tri, vy iu g bo v c ti khon ca bn nu request k trn b nhng k xu dng nhng th thut hay phn mm chuyn dng  bt c?\n\nHttps gii bi ton trn bng cch rt n gin, ni dung dng plain/text gip k gian c th bt v c d dng, vy chng ta hy m ho ni dung  k gian  khng th hiu c, v c bt c gi tin cng v dng?.\n\n## 3. Https v vn  m ho d liu\n\nTrc tin phi lm r l:\n\n**https = http + ssl**\n\nTrong :\n\n1. http l giao thc tryn ti.\n\n2. ssl l c ch bo mt thng tin.\n\n![tam the tu tin](/images/7.gif)\n\nFlow ti thiu ca **https** s nh sau:\n\n1. **Client hello**, ngi dng s dng trnh duyt s request ti google.com.\n\n2. **Server hello**, request  bc mt  ti ni, server s gi tr client 2 thng tin quan trng  l **ssl certificate** ( chng minh \", tao l google.com tht nha, not fake\") v 1 **Public key** (Gi l Public-key-1. *Vy ta c th hiu l  Server google.com n ang gi Private key 1 ng vi Public key 1 kia*).\n\n3. Browser s xc minh **ssl certificate** nhn c  xem n c phi l hng real hay khng. Vy cn lm sao m browser c th phn nh tht gi? Chng ta s tm hiu trong 1 bi vit khc.\n\n4. Sau khi browser xc minh v  tin tng my ch google.com, browser s to 1 cp kho bo mt RSA th 2, ta gi l **Public key 2 v Private key 2**.\n\n5. Browser dng **Public key 1**  nhn c t bc 3,  m ho *Public key 2 v Private key 2* sinh ra trong bc 4, ri gi cp kho ny di dng  m ho ti my ch google.com.\n\n6. Nh bn nh, th my ch google.com ang gi **Private key 1** v th l n c th gii m v ly c cp key  bc 5.\n\n7. Vy l c my ch google.com v client u c cp kho RSA th 2, mi thng tin truyn gi t c 2 pha by gi u c m ho bng Public key 2.\n\nNote: Nh c ch m ho RSA (Ch c th m ho bng public key v gii m ni dung bng private key) k trn. Server v client  c th lin lc vi nhau mt cch an ton. Trong qu trnh trn, k c k th c c bt c gi tin  bc 2, bn trong c public key 1, th cng khng phi vn , bi v vi public key  th hn khng th c c thng tin m client gi  bc 5.\n\n# Kt lun\n\nKhng c kt lun :)\n","source":"_posts/2019-05-04-https-vai-dieu-can-nho.md","raw":"---\ntitle: \"Tm Hiu V Ch S Trong Https\"\ndate: 2019-05-04\ndraft: false\ntags: [\"https\", \"secure\"]\ncategories: [\"rails notes\"]\nmytag: \"Secure\"\nmytrend: \"COOL\"\n\n---\n\n## t vn \n\ni lun vo ch , khi mi bt u vi mn mng my tnh  trng i hc, s mp m khi cn ngi trn gh nh trng khin chng ta i khi  nhm ln v **http** v **https**, nh ngy  ti  tng ngh chng l 2 giao thc khc nhau,  m ngy  ti c hiu giao thc l g khng nh :fearful: thi dp qua mt bn, bn cht ca **https** cng l giao thc **http** nhng thm c ch **s** ng vi **secure**. Nghe thi  thy bo mt ri, **https** ra i nhm mc ch lm cho giao thc **http** tr nn an ton hn, vy n lm cho **http** tr nn an ton hn nh th no?\n\n## Lun bn\n\n## 1. Http hiu n gin th hot ng th no?\n\nMc ch cui cng ca m hn n ri rm ny cng l truyn nhn thng tin, ti c mt website ti mun gi n ln mng internet  bn, mt ai  m ti khng quen c th v tnh lt qua c c.\nHttp l mt giao thc, hiu n gin l mt b quy tc  chung  ngi s dng dng trnh duyt c th truy cp ti 1 trang web, v trang web  hiu c yu cu  ri tr v ni dung m trnh duyt c th hiu c, v nh c nhiu ngn ng trn th gii, vy gia 2 ngi c 2 ting ni khc nhau  giao tip c h phi cng nhau s dng mt b ngn ng chung m c hai cng hiu c.\n\nMt c im c bn ca **http** l n truyn nhn thng tin di dng **text** thng thng, khng h m ho, iu ny dn ti vn   l thng tin c truyn nhn nhanh chng, nh nhng, ni dung rt thn thin vi ngi dng (v n l text m).\n\nMi th c v good? khng hn nh vy, vic d liu truyn gi c lu di dng text khin n qu thn thin vi ngi dng, m ngi dng th khng phi ai cng tt :smirk: . C nhng ngi dng m mc ch h ti vi website ca bn l  ph hoi, h s d dng tn cng bng cch no  ly c request ca bn ri c c ni dung trong request  1 cch d dng.\n\nBi hc: Khng phi lc no cng nn qu thn thin vi ngi dng cui :worried:\n\n## 2. Https khc phc vn  ca http nh th no?\n\nChng ta  nm c khi qut vn  bo mt gp phi khi s dng **http**. Vi nhng website gii tr thun tu vi ni dung ch yu l hnh nh, m thanh v khng c thng tin cn bo mt th s dng https hnh nh cng ch  tt cho SEO, ngoi ra cng khng cn gi tr g. Nhng nu bn s dng **Internet Banking** vi http, ri bn ng nhp vi ti khon ngn hng ca mnh trn , mi thng tin bn gi i u di dng nhng gi tin c ni dung plain/text trn tri, vy iu g bo v c ti khon ca bn nu request k trn b nhng k xu dng nhng th thut hay phn mm chuyn dng  bt c?\n\nHttps gii bi ton trn bng cch rt n gin, ni dung dng plain/text gip k gian c th bt v c d dng, vy chng ta hy m ho ni dung  k gian  khng th hiu c, v c bt c gi tin cng v dng?.\n\n## 3. Https v vn  m ho d liu\n\nTrc tin phi lm r l:\n\n**https = http + ssl**\n\nTrong :\n\n1. http l giao thc tryn ti.\n\n2. ssl l c ch bo mt thng tin.\n\n![tam the tu tin](/images/7.gif)\n\nFlow ti thiu ca **https** s nh sau:\n\n1. **Client hello**, ngi dng s dng trnh duyt s request ti google.com.\n\n2. **Server hello**, request  bc mt  ti ni, server s gi tr client 2 thng tin quan trng  l **ssl certificate** ( chng minh \", tao l google.com tht nha, not fake\") v 1 **Public key** (Gi l Public-key-1. *Vy ta c th hiu l  Server google.com n ang gi Private key 1 ng vi Public key 1 kia*).\n\n3. Browser s xc minh **ssl certificate** nhn c  xem n c phi l hng real hay khng. Vy cn lm sao m browser c th phn nh tht gi? Chng ta s tm hiu trong 1 bi vit khc.\n\n4. Sau khi browser xc minh v  tin tng my ch google.com, browser s to 1 cp kho bo mt RSA th 2, ta gi l **Public key 2 v Private key 2**.\n\n5. Browser dng **Public key 1**  nhn c t bc 3,  m ho *Public key 2 v Private key 2* sinh ra trong bc 4, ri gi cp kho ny di dng  m ho ti my ch google.com.\n\n6. Nh bn nh, th my ch google.com ang gi **Private key 1** v th l n c th gii m v ly c cp key  bc 5.\n\n7. Vy l c my ch google.com v client u c cp kho RSA th 2, mi thng tin truyn gi t c 2 pha by gi u c m ho bng Public key 2.\n\nNote: Nh c ch m ho RSA (Ch c th m ho bng public key v gii m ni dung bng private key) k trn. Server v client  c th lin lc vi nhau mt cch an ton. Trong qu trnh trn, k c k th c c bt c gi tin  bc 2, bn trong c public key 1, th cng khng phi vn , bi v vi public key  th hn khng th c c thng tin m client gi  bc 5.\n\n# Kt lun\n\nKhng c kt lun :)\n","slug":"2019-05-04-https-vai-dieu-can-nho","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsan0014p3m2afkldx31","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>i lun vo ch , khi mi bt u vi mn mng my tnh  trng i hc, s mp m khi cn ngi trn gh nh trng khin chng ta i khi  nhm ln v <strong>http</strong> v <strong>https</strong>, nh ngy  ti  tng ngh chng l 2 giao thc khc nhau,  m ngy  ti c hiu giao thc l g khng nh :fearful: thi dp qua mt bn, bn cht ca <strong>https</strong> cng l giao thc <strong>http</strong> nhng thm c ch <strong>s</strong> ng vi <strong>secure</strong>. Nghe thi  thy bo mt ri, <strong>https</strong> ra i nhm mc ch lm cho giao thc <strong>http</strong> tr nn an ton hn, vy n lm cho <strong>http</strong> tr nn an ton hn nh th no?</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Http-hieu-don-gian-thi-hoat-dong-the-nao\"><a href=\"#1-Http-hieu-don-gian-thi-hoat-dong-the-nao\" class=\"headerlink\" title=\"1. Http hiu n gin th hot ng th no?\"></a>1. Http hiu n gin th hot ng th no?</h2><p>Mc ch cui cng ca m hn n ri rm ny cng l truyn nhn thng tin, ti c mt website ti mun gi n ln mng internet  bn, mt ai  m ti khng quen c th v tnh lt qua c c.<br>Http l mt giao thc, hiu n gin l mt b quy tc  chung  ngi s dng dng trnh duyt c th truy cp ti 1 trang web, v trang web  hiu c yu cu  ri tr v ni dung m trnh duyt c th hiu c, v nh c nhiu ngn ng trn th gii, vy gia 2 ngi c 2 ting ni khc nhau  giao tip c h phi cng nhau s dng mt b ngn ng chung m c hai cng hiu c.</p>\n<p>Mt c im c bn ca <strong>http</strong> l n truyn nhn thng tin di dng <strong>text</strong> thng thng, khng h m ho, iu ny dn ti vn   l thng tin c truyn nhn nhanh chng, nh nhng, ni dung rt thn thin vi ngi dng (v n l text m).</p>\n<p>Mi th c v good? khng hn nh vy, vic d liu truyn gi c lu di dng text khin n qu thn thin vi ngi dng, m ngi dng th khng phi ai cng tt :smirk: . C nhng ngi dng m mc ch h ti vi website ca bn l  ph hoi, h s d dng tn cng bng cch no  ly c request ca bn ri c c ni dung trong request  1 cch d dng.</p>\n<p>Bi hc: Khng phi lc no cng nn qu thn thin vi ngi dng cui :worried:</p>\n<h2 id=\"2-Https-khac-phuc-van-de-cua-http-nhu-the-nao\"><a href=\"#2-Https-khac-phuc-van-de-cua-http-nhu-the-nao\" class=\"headerlink\" title=\"2. Https khc phc vn  ca http nh th no?\"></a>2. Https khc phc vn  ca http nh th no?</h2><p>Chng ta  nm c khi qut vn  bo mt gp phi khi s dng <strong>http</strong>. Vi nhng website gii tr thun tu vi ni dung ch yu l hnh nh, m thanh v khng c thng tin cn bo mt th s dng https hnh nh cng ch  tt cho SEO, ngoi ra cng khng cn gi tr g. Nhng nu bn s dng <strong>Internet Banking</strong> vi http, ri bn ng nhp vi ti khon ngn hng ca mnh trn , mi thng tin bn gi i u di dng nhng gi tin c ni dung plain/text trn tri, vy iu g bo v c ti khon ca bn nu request k trn b nhng k xu dng nhng th thut hay phn mm chuyn dng  bt c?</p>\n<p>Https gii bi ton trn bng cch rt n gin, ni dung dng plain/text gip k gian c th bt v c d dng, vy chng ta hy m ho ni dung  k gian  khng th hiu c, v c bt c gi tin cng v dng?.</p>\n<h2 id=\"3-Https-va-van-de-ma-hoa-du-lieu\"><a href=\"#3-Https-va-van-de-ma-hoa-du-lieu\" class=\"headerlink\" title=\"3. Https v vn  m ho d liu\"></a>3. Https v vn  m ho d liu</h2><p>Trc tin phi lm r l:</p>\n<p><strong>https = http + ssl</strong></p>\n<p>Trong :</p>\n<ol>\n<li><p>http l giao thc tryn ti.</p>\n</li>\n<li><p>ssl l c ch bo mt thng tin.</p>\n</li>\n</ol>\n<p><img src=\"/images/7.gif\" alt=\"tam the tu tin\"></p>\n<p>Flow ti thiu ca <strong>https</strong> s nh sau:</p>\n<ol>\n<li><p><strong>Client hello</strong>, ngi dng s dng trnh duyt s request ti google.com.</p>\n</li>\n<li><p><strong>Server hello</strong>, request  bc mt  ti ni, server s gi tr client 2 thng tin quan trng  l <strong>ssl certificate</strong> ( chng minh , tao l google.com tht nha, not fake) v 1 <strong>Public key</strong> (Gi l Public-key-1. <em>Vy ta c th hiu l  Server google.com n ang gi Private key 1 ng vi Public key 1 kia</em>).</p>\n</li>\n<li><p>Browser s xc minh <strong>ssl certificate</strong> nhn c  xem n c phi l hng real hay khng. Vy cn lm sao m browser c th phn nh tht gi? Chng ta s tm hiu trong 1 bi vit khc.</p>\n</li>\n<li><p>Sau khi browser xc minh v  tin tng my ch google.com, browser s to 1 cp kho bo mt RSA th 2, ta gi l <strong>Public key 2 v Private key 2</strong>.</p>\n</li>\n<li><p>Browser dng <strong>Public key 1</strong>  nhn c t bc 3,  m ho <em>Public key 2 v Private key 2</em> sinh ra trong bc 4, ri gi cp kho ny di dng  m ho ti my ch google.com.</p>\n</li>\n<li><p>Nh bn nh, th my ch google.com ang gi <strong>Private key 1</strong> v th l n c th gii m v ly c cp key  bc 5.</p>\n</li>\n<li><p>Vy l c my ch google.com v client u c cp kho RSA th 2, mi thng tin truyn gi t c 2 pha by gi u c m ho bng Public key 2.</p>\n</li>\n</ol>\n<p>Note: Nh c ch m ho RSA (Ch c th m ho bng public key v gii m ni dung bng private key) k trn. Server v client  c th lin lc vi nhau mt cch an ton. Trong qu trnh trn, k c k th c c bt c gi tin  bc 2, bn trong c public key 1, th cng khng phi vn , bi v vi public key  th hn khng th c c thng tin m client gi  bc 5.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Khng c kt lun :)</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>i lun vo ch , khi mi bt u vi mn mng my tnh  trng i hc, s mp m khi cn ngi trn gh nh trng khin chng ta i khi  nhm ln v <strong>http</strong> v <strong>https</strong>, nh ngy  ti  tng ngh chng l 2 giao thc khc nhau,  m ngy  ti c hiu giao thc l g khng nh :fearful: thi dp qua mt bn, bn cht ca <strong>https</strong> cng l giao thc <strong>http</strong> nhng thm c ch <strong>s</strong> ng vi <strong>secure</strong>. Nghe thi  thy bo mt ri, <strong>https</strong> ra i nhm mc ch lm cho giao thc <strong>http</strong> tr nn an ton hn, vy n lm cho <strong>http</strong> tr nn an ton hn nh th no?</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Http-hieu-don-gian-thi-hoat-dong-the-nao\"><a href=\"#1-Http-hieu-don-gian-thi-hoat-dong-the-nao\" class=\"headerlink\" title=\"1. Http hiu n gin th hot ng th no?\"></a>1. Http hiu n gin th hot ng th no?</h2><p>Mc ch cui cng ca m hn n ri rm ny cng l truyn nhn thng tin, ti c mt website ti mun gi n ln mng internet  bn, mt ai  m ti khng quen c th v tnh lt qua c c.<br>Http l mt giao thc, hiu n gin l mt b quy tc  chung  ngi s dng dng trnh duyt c th truy cp ti 1 trang web, v trang web  hiu c yu cu  ri tr v ni dung m trnh duyt c th hiu c, v nh c nhiu ngn ng trn th gii, vy gia 2 ngi c 2 ting ni khc nhau  giao tip c h phi cng nhau s dng mt b ngn ng chung m c hai cng hiu c.</p>\n<p>Mt c im c bn ca <strong>http</strong> l n truyn nhn thng tin di dng <strong>text</strong> thng thng, khng h m ho, iu ny dn ti vn   l thng tin c truyn nhn nhanh chng, nh nhng, ni dung rt thn thin vi ngi dng (v n l text m).</p>\n<p>Mi th c v good? khng hn nh vy, vic d liu truyn gi c lu di dng text khin n qu thn thin vi ngi dng, m ngi dng th khng phi ai cng tt :smirk: . C nhng ngi dng m mc ch h ti vi website ca bn l  ph hoi, h s d dng tn cng bng cch no  ly c request ca bn ri c c ni dung trong request  1 cch d dng.</p>\n<p>Bi hc: Khng phi lc no cng nn qu thn thin vi ngi dng cui :worried:</p>\n<h2 id=\"2-Https-khac-phuc-van-de-cua-http-nhu-the-nao\"><a href=\"#2-Https-khac-phuc-van-de-cua-http-nhu-the-nao\" class=\"headerlink\" title=\"2. Https khc phc vn  ca http nh th no?\"></a>2. Https khc phc vn  ca http nh th no?</h2><p>Chng ta  nm c khi qut vn  bo mt gp phi khi s dng <strong>http</strong>. Vi nhng website gii tr thun tu vi ni dung ch yu l hnh nh, m thanh v khng c thng tin cn bo mt th s dng https hnh nh cng ch  tt cho SEO, ngoi ra cng khng cn gi tr g. Nhng nu bn s dng <strong>Internet Banking</strong> vi http, ri bn ng nhp vi ti khon ngn hng ca mnh trn , mi thng tin bn gi i u di dng nhng gi tin c ni dung plain/text trn tri, vy iu g bo v c ti khon ca bn nu request k trn b nhng k xu dng nhng th thut hay phn mm chuyn dng  bt c?</p>\n<p>Https gii bi ton trn bng cch rt n gin, ni dung dng plain/text gip k gian c th bt v c d dng, vy chng ta hy m ho ni dung  k gian  khng th hiu c, v c bt c gi tin cng v dng?.</p>\n<h2 id=\"3-Https-va-van-de-ma-hoa-du-lieu\"><a href=\"#3-Https-va-van-de-ma-hoa-du-lieu\" class=\"headerlink\" title=\"3. Https v vn  m ho d liu\"></a>3. Https v vn  m ho d liu</h2><p>Trc tin phi lm r l:</p>\n<p><strong>https = http + ssl</strong></p>\n<p>Trong :</p>\n<ol>\n<li><p>http l giao thc tryn ti.</p>\n</li>\n<li><p>ssl l c ch bo mt thng tin.</p>\n</li>\n</ol>\n<p><img src=\"/images/7.gif\" alt=\"tam the tu tin\"></p>\n<p>Flow ti thiu ca <strong>https</strong> s nh sau:</p>\n<ol>\n<li><p><strong>Client hello</strong>, ngi dng s dng trnh duyt s request ti google.com.</p>\n</li>\n<li><p><strong>Server hello</strong>, request  bc mt  ti ni, server s gi tr client 2 thng tin quan trng  l <strong>ssl certificate</strong> ( chng minh , tao l google.com tht nha, not fake) v 1 <strong>Public key</strong> (Gi l Public-key-1. <em>Vy ta c th hiu l  Server google.com n ang gi Private key 1 ng vi Public key 1 kia</em>).</p>\n</li>\n<li><p>Browser s xc minh <strong>ssl certificate</strong> nhn c  xem n c phi l hng real hay khng. Vy cn lm sao m browser c th phn nh tht gi? Chng ta s tm hiu trong 1 bi vit khc.</p>\n</li>\n<li><p>Sau khi browser xc minh v  tin tng my ch google.com, browser s to 1 cp kho bo mt RSA th 2, ta gi l <strong>Public key 2 v Private key 2</strong>.</p>\n</li>\n<li><p>Browser dng <strong>Public key 1</strong>  nhn c t bc 3,  m ho <em>Public key 2 v Private key 2</em> sinh ra trong bc 4, ri gi cp kho ny di dng  m ho ti my ch google.com.</p>\n</li>\n<li><p>Nh bn nh, th my ch google.com ang gi <strong>Private key 1</strong> v th l n c th gii m v ly c cp key  bc 5.</p>\n</li>\n<li><p>Vy l c my ch google.com v client u c cp kho RSA th 2, mi thng tin truyn gi t c 2 pha by gi u c m ho bng Public key 2.</p>\n</li>\n</ol>\n<p>Note: Nh c ch m ho RSA (Ch c th m ho bng public key v gii m ni dung bng private key) k trn. Server v client  c th lin lc vi nhau mt cch an ton. Trong qu trnh trn, k c k th c c bt c gi tin  bc 2, bn trong c public key 1, th cng khng phi vn , bi v vi public key  th hn khng th c c thng tin m client gi  bc 5.</p>\n<h1 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h1><p>Khng c kt lun :)</p>\n"},{"title":"Session V Cookies Trong Rails","date":"2019-04-16T17:00:00.000Z","draft":false,"_content":"\n## t vn \n**session[:user_id] = @user.id**, dng code ny tht quen thuc? khi lm chc nng ng nhp trong nhng ngy nhp mn, hn ai cng  tng lm qua hoc lm gn ging nh vy, ta c dy rng, **http** l 1 giao thc khng c trng thi nn request th **N + 1** s chng th bit c request th **N**  lm g, vy nu  ln request th **N** chng ta  thc hin hnh vi ng nhp, v **http** th khng c lu vt li iu , h qu l  ln request tip theo, website hiu nh bn cha ng nhp, rt ng bun.\n\nDo you familiar with the logic below:\n\n```ruby\nsession[:user_id] = @user.id\n```\n\nCng theo nhng g c dy, **session/cookies** c to ra vi mc ch lm cho http request c \"trng thi\". V sao li  t trng thi trong nhy kp, v thc s l **http** khng bao gi c trng thi c, m **session/cookies** vi kh nng lu vt ca mnh c th gip website nm c mt s **thng tin** t client  request trc  v lm chng ging nh **http**  c trng thi.\n\nQu m h? ng vy, khi c dy iu ny ti cng thy tht m h, wth is trng thi? phi trng thi? lu vt?... Hy vng bi vit ny s gip ngi c c 1 ci nhn d hiu hn v 2 i tng ny trong ruby on rails.\n\n## Lun bn\n\n## 1. Flow hot ng\n\nMt cch ngn gn cookies s c vn hnh nh sau:\n\n**Step 1**: Ln u bn request n web ABC.com, nh nhng ta my bay, bn khng mang theo thng tin g ca ABC.com c\n\n**Step 2**: ABC.com nhn request ca bn, n nhn ra bn khng mang theo cookies ca website, nn n trong response tr v n set mt hoc mt vi cookies mc nh cho bn.\n\n**Step 3**: Bn nhn c response ca ABC.com, ri bn tip tc request ln ABC.com ln th 2, ln ny i theo request ca bn l ton b s cookies  c khi to  bc 2.\n\n**Step 4**: ABC.com li nhn c request ca bn, v ln ny n  thy bn mang cookies ca ABC.com nn n s c ni dung trong cookies  (nu cn).\n\n## 2. Mt vi loi cookies quan trng trong rails\n\n1. **Normal cookies**: Mt dng cookie m d liu c lu tr di dng text.\n\n2. **Signed cookies**: Mt dng cookie m d liu lu tr s c \"k\" bi 1 **digest**, v **digest** ny c to ra bi **secret_key_base** trong app ca bn, sau  n s c chuyn sang dng **base64** code. iu ny c ngha l nu ai  c c **signed cookies** ca bn, th h hon ton c th c c ni dung bn trong (decode base64 l c th c c). Tuy nhin nu h sa li ni dung ca cookies  v gi ln server th lc ny, cookies ny tr thnh 1 cookies khng hp l, v sao? V nh  trnh by, n c k bi 1 digest sinh ra qua **secret_key_base**, vy nn cookies loi ny nu b sa i ni dung  client th khi kim tra tnh ton vn trn server thng qua digest s khng cn ng na. V n tr thnh 1 cookies khng hp l.\n\n3. **Encrypted cookies**: Mt dng cookies m d liu c m ha qua mt qu trnh m ha vi 1 kha quan trng l **secret_key_base**, mt cch n gin nht  hiu l khng c **secret_key_base** th ta khng th no **c** hay sa i d liu ca cookies ny c.\n\nV d:\n\n```ruby\ncookies.signed[:signed] = \"Duy Chinh\"\ncookies.encrypted[:encrypted] = \"Duy Chinh\"\ncookies[:normal] = \"Duy Chinh\"\n\n```\nTi  to 3 cookies ng vi 3 dng cookies nu  trn, gi tr ca chng u ging nhau (u c gn bng \"Duy Chinh\").\n\nHy xem gi tr  client nhn c:\n\n```ruby\nnormal = \"Duy+Chinh\"\nsigned = \"IkR1eSBDaGluaCI%3D--a3af2bfd61abcd20cc3b8ac714968d0aaf578fe5\"\nencrypted = \"%2BVulShtBgFR2I18%3D--zQP8FmCAW4%2FZUwar--CQ%2FH6HFHSVlox5H8QC4CTg%3D%3D\"\n```\n\nNhn xt:\n\n1. Kiu cookies thng thng, d liu lu dng text nn  client ta d dng c c ni dung cng nh sa i d liu ca chng.\n\n2. Nhn signed cookies v encrypted cookies u khng thn thin vi ngi dng cui, v chng gm nhng k t khng c ng ngha vi end user.\n\n3. Nu decode **base64** ta thu c gi tr ca signed cookies  trn l: **\"Duy Chinh\"7f7oi**, d mt s k t pha sau khng th hiu c, tuy nhin khng quan trng v ni dung cookies vn c gii m (ng vi tnh cht, c th c nhng khng th sa i).\n\n4. Vic decode encrypted cookies l v vng khi khng c **secret_key_base**.\n\n**NOTE:**\n\nVic s dng loi cookies no s ng trong nhng trng hp c th, vi nhng d liu v hi v khng h quan trng th s dng cookies thng thng v lu mi th di dng text l kh d hn c. B qua cc bc m ha gip n hot ng vi performance tt hn hn 2 dng cookies cn li.\nNgc li, encrypted cookies l dng cookies tn cng sc  x l nht, v vy hy ch s dng n cho nhng thng tin thc s quan trng v khng th  l (nhng thng tin bt quan trng hn v ch cn m bo tnh ton vn ca d liu ch khng cn bo mt thng tin th hy dng signed cookies).\n\n## 3. Gii m cookies v tm hiu v session trong rails\n\nSau kh nhiu cng sc tm kim, ti  tm ra cch  gii m cookies trong rails 5.2, ni dung n gin nh sau:\n\n```ruby\nrequire 'cgi'\nrequire 'active_support'\n\ndef verify_and_decrypt_session_cookie(cookie, secret_key_base)\n  cookie                  = CGI::unescape(cookie)\n  salt                    = 'authenticated encrypted cookie'\n  encrypted_cookie_cipher = 'aes-256-gcm'\n  serializer              = ActiveSupport::MessageEncryptor::NullSerializer\n\n  key_generator           = ActiveSupport::KeyGenerator.new(secret_key_base, iterations: 1000)\n  key_len                 = ActiveSupport::MessageEncryptor.key_len(encrypted_cookie_cipher)\n  secret                  = key_generator.generate_key(salt, key_len)\n  encryptor               = ActiveSupport::MessageEncryptor.new(secret, cipher: encrypted_cookie_cipher, serializer: serializer)\n\n  encryptor.decrypt_and_verify(cookie)\nend\n\ncookie         = \"QkS0eMMxz8z0Kso%3D--4opNQwT5tGUsnn90--5fXye0VQJX%2BXMVkUmK69gw%3D%3D\"\nskb            = \"2fc48081a207cbe98379b2ed33b5072125d6f80a55997494b021bde37cec4d9c8f17f90357d6ade926b02a3bc271ccecaf6894af1410d6ef8f6c9b3b0d871fba\"\ncookie_session = \"ahp9AcIyl%2BhLvQW695lhNUCnI7bF2iNZY8e4bM%2B2Lrx%2FlnbVXkYF3nL493dMM7eslFJKAyBNJKZlY5ugZpUuznCxO%2BpNXudnOdQVuDyvVBLxA8gQ4t48Gs%2BqOS7e%2FlSjBedhFKAaoBRdVI06QL8%3D--enarz3Hu%2FZ2n1Ys%2B--YdTghGWd4ZFef9Lf7WM%2FMQ%3D%3D\"\nputs verify_and_decrypt_session_cookie(cookie_session, skb)\n\n```\n\nNi dung c tham kho t nhiu ngun (v khng mt ngun c th no copy v chy lun c :unamused:), nhng ch yu c tm hiu [ti y](https://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html), cc bn c th vo trang ny  tm hiu k hn.\n\n**NOTE:** Mt im ht sc cn ch   l bin **skb** ti s dng  trn chnh l **secret_key_base** ca project m ti s dng  demo, v y ch l mt project test nn ti c th vit dng text vo file sau  commit ln github nh ny, trong tt c cc trng hp khc th y l mt hnh ng v cng **ti t**, vic b l **secret_key_base** s khin ng dng ca bn trn tri trc hacker. Vy nn hy tht cn thn!\n\non m trn work tt trn rails 5.2, ch  l cch m ha  cc phin bn rails khc nhau hon ton c kh nng khc nhau, nn nu on m ny khng th chy c vi rails 4 chng hn th  l iu ht sc bnh thng.\n\nTr li vn  chnh, nu bn   th trong ln u tin request khi bn cha h lm g v code trn server ca bn cng cha h set bt k gi tr cookies no th trong response tr v vn s c mt cookies (m ti  ni  trn, trong ln u request server s khi to v gi v cho bn mt hoc mt vi cookies).\n\nTrong trng hp ny l mt, cookies  c th c tn dng **_app_name_session**. Ni dung ca cookies ny cng c m ha, th decode bng **base64** khng c ta c th hiu y l 1 cookies  c encrypted.\n\nGi tr ca cookies ny trong trng hp ti test l:\n\n```\n\"aW2fSskgCyZ20Fi6E68xRGl0%2FR%2FzeFWoWU5YdhgkVhB%2FMtWSsX0rf3JuRgsfPPgQXjYYNygaRSxRjXAmOcsjohN28JQJnjej0Grfpwx52cZ5qjIRdMfOS9aXdTmedpuJ7T99aObbv75D3dsPtdQ%3D--FW10HzOu9FIoKK%2B8--9sMKANggTvi%2BlBjFwpIHEg%3D%3D\"\n```\n\nS dng on m ta  vit  trn, ta gii m ra c gi tr ca cookies ny l:\n\n```ruby\n{\n  \"session_id\":\"52cc440e209ad03d306e550c2ca2dd78\",\n  \"_csrf_token\":\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"\n}\n```\n\nVy trong ln u request ti 1 website ruby on rails, n s to ra cho chng ta 1 session, session lc khi to khng c gi tr g ngoi **session_id** v **_csrf_token**.\n\n**a sai sai, ti nh l ngy xa i hc c dy rng im khc bit ca session v cookies l session c lu  server cn cookies c lu  client c m**\n\nng, ti cng c hc nh vy, nhng  khng phi l cch m rails x l, **Rails c config mc nh l lu session bng cookies**, nu khng mun ta c th lu trn **redis**, **database**... Tuy nhin nu khng thy ngi v gii hn khng qu **4KB** ca cookies th ti khng thy l do g  chuyn v tr lu tr ca session i c. :smiley:\n\nBy gi ti add thm 1 gi tr vo session vi cu lnh **session[:user_id] = 1**, lc ny gi tr ca cookies cng thay i theo, li decrypt ta thu c:\n\n```ruby\n{\n  \"session_id\":\"52cc440e209ad03d306e550c2ca2dd78\",\n  \"_csrf_token\":\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\",\n  \"user_id\":1\n}\n```\n\nSession by gi  c thm mt key mi l **user_id** vi gi tr l **1**.  vy cui cng th session cng l 1 **hash** thi nh.\n\n## Kt lun\n\n phn bit cc client khc nhau, server s da vo **session_id** c lu trong cookies, v vy nu chim c cookies ng nhp trn website ABC.com ca bn, cc hacker c th dng n  gi mo bn v request ln server, ng bun thay server s c cookies c hacker request ln, s dng **secret_key_base**  gii m cookies v c ni dung bn trong, on code x l login li c t session[:user_id], lc ny th cookies kia c gi tr **session[:user_id] = 1** v th l server  tng rng hacker chnh l bn.\n","source":"_posts/2019-04-17-doi-dieu-ve-session-va-cookie-trong-rails.md","raw":"---\ntitle: \"Session V Cookies Trong Rails\"\ndate: 2019-04-17\ndraft: false\ntags: [\"RAILS\"]\n---\n\n## t vn \n**session[:user_id] = @user.id**, dng code ny tht quen thuc? khi lm chc nng ng nhp trong nhng ngy nhp mn, hn ai cng  tng lm qua hoc lm gn ging nh vy, ta c dy rng, **http** l 1 giao thc khng c trng thi nn request th **N + 1** s chng th bit c request th **N**  lm g, vy nu  ln request th **N** chng ta  thc hin hnh vi ng nhp, v **http** th khng c lu vt li iu , h qu l  ln request tip theo, website hiu nh bn cha ng nhp, rt ng bun.\n\nDo you familiar with the logic below:\n\n```ruby\nsession[:user_id] = @user.id\n```\n\nCng theo nhng g c dy, **session/cookies** c to ra vi mc ch lm cho http request c \"trng thi\". V sao li  t trng thi trong nhy kp, v thc s l **http** khng bao gi c trng thi c, m **session/cookies** vi kh nng lu vt ca mnh c th gip website nm c mt s **thng tin** t client  request trc  v lm chng ging nh **http**  c trng thi.\n\nQu m h? ng vy, khi c dy iu ny ti cng thy tht m h, wth is trng thi? phi trng thi? lu vt?... Hy vng bi vit ny s gip ngi c c 1 ci nhn d hiu hn v 2 i tng ny trong ruby on rails.\n\n## Lun bn\n\n## 1. Flow hot ng\n\nMt cch ngn gn cookies s c vn hnh nh sau:\n\n**Step 1**: Ln u bn request n web ABC.com, nh nhng ta my bay, bn khng mang theo thng tin g ca ABC.com c\n\n**Step 2**: ABC.com nhn request ca bn, n nhn ra bn khng mang theo cookies ca website, nn n trong response tr v n set mt hoc mt vi cookies mc nh cho bn.\n\n**Step 3**: Bn nhn c response ca ABC.com, ri bn tip tc request ln ABC.com ln th 2, ln ny i theo request ca bn l ton b s cookies  c khi to  bc 2.\n\n**Step 4**: ABC.com li nhn c request ca bn, v ln ny n  thy bn mang cookies ca ABC.com nn n s c ni dung trong cookies  (nu cn).\n\n## 2. Mt vi loi cookies quan trng trong rails\n\n1. **Normal cookies**: Mt dng cookie m d liu c lu tr di dng text.\n\n2. **Signed cookies**: Mt dng cookie m d liu lu tr s c \"k\" bi 1 **digest**, v **digest** ny c to ra bi **secret_key_base** trong app ca bn, sau  n s c chuyn sang dng **base64** code. iu ny c ngha l nu ai  c c **signed cookies** ca bn, th h hon ton c th c c ni dung bn trong (decode base64 l c th c c). Tuy nhin nu h sa li ni dung ca cookies  v gi ln server th lc ny, cookies ny tr thnh 1 cookies khng hp l, v sao? V nh  trnh by, n c k bi 1 digest sinh ra qua **secret_key_base**, vy nn cookies loi ny nu b sa i ni dung  client th khi kim tra tnh ton vn trn server thng qua digest s khng cn ng na. V n tr thnh 1 cookies khng hp l.\n\n3. **Encrypted cookies**: Mt dng cookies m d liu c m ha qua mt qu trnh m ha vi 1 kha quan trng l **secret_key_base**, mt cch n gin nht  hiu l khng c **secret_key_base** th ta khng th no **c** hay sa i d liu ca cookies ny c.\n\nV d:\n\n```ruby\ncookies.signed[:signed] = \"Duy Chinh\"\ncookies.encrypted[:encrypted] = \"Duy Chinh\"\ncookies[:normal] = \"Duy Chinh\"\n\n```\nTi  to 3 cookies ng vi 3 dng cookies nu  trn, gi tr ca chng u ging nhau (u c gn bng \"Duy Chinh\").\n\nHy xem gi tr  client nhn c:\n\n```ruby\nnormal = \"Duy+Chinh\"\nsigned = \"IkR1eSBDaGluaCI%3D--a3af2bfd61abcd20cc3b8ac714968d0aaf578fe5\"\nencrypted = \"%2BVulShtBgFR2I18%3D--zQP8FmCAW4%2FZUwar--CQ%2FH6HFHSVlox5H8QC4CTg%3D%3D\"\n```\n\nNhn xt:\n\n1. Kiu cookies thng thng, d liu lu dng text nn  client ta d dng c c ni dung cng nh sa i d liu ca chng.\n\n2. Nhn signed cookies v encrypted cookies u khng thn thin vi ngi dng cui, v chng gm nhng k t khng c ng ngha vi end user.\n\n3. Nu decode **base64** ta thu c gi tr ca signed cookies  trn l: **\"Duy Chinh\"7f7oi**, d mt s k t pha sau khng th hiu c, tuy nhin khng quan trng v ni dung cookies vn c gii m (ng vi tnh cht, c th c nhng khng th sa i).\n\n4. Vic decode encrypted cookies l v vng khi khng c **secret_key_base**.\n\n**NOTE:**\n\nVic s dng loi cookies no s ng trong nhng trng hp c th, vi nhng d liu v hi v khng h quan trng th s dng cookies thng thng v lu mi th di dng text l kh d hn c. B qua cc bc m ha gip n hot ng vi performance tt hn hn 2 dng cookies cn li.\nNgc li, encrypted cookies l dng cookies tn cng sc  x l nht, v vy hy ch s dng n cho nhng thng tin thc s quan trng v khng th  l (nhng thng tin bt quan trng hn v ch cn m bo tnh ton vn ca d liu ch khng cn bo mt thng tin th hy dng signed cookies).\n\n## 3. Gii m cookies v tm hiu v session trong rails\n\nSau kh nhiu cng sc tm kim, ti  tm ra cch  gii m cookies trong rails 5.2, ni dung n gin nh sau:\n\n```ruby\nrequire 'cgi'\nrequire 'active_support'\n\ndef verify_and_decrypt_session_cookie(cookie, secret_key_base)\n  cookie                  = CGI::unescape(cookie)\n  salt                    = 'authenticated encrypted cookie'\n  encrypted_cookie_cipher = 'aes-256-gcm'\n  serializer              = ActiveSupport::MessageEncryptor::NullSerializer\n\n  key_generator           = ActiveSupport::KeyGenerator.new(secret_key_base, iterations: 1000)\n  key_len                 = ActiveSupport::MessageEncryptor.key_len(encrypted_cookie_cipher)\n  secret                  = key_generator.generate_key(salt, key_len)\n  encryptor               = ActiveSupport::MessageEncryptor.new(secret, cipher: encrypted_cookie_cipher, serializer: serializer)\n\n  encryptor.decrypt_and_verify(cookie)\nend\n\ncookie         = \"QkS0eMMxz8z0Kso%3D--4opNQwT5tGUsnn90--5fXye0VQJX%2BXMVkUmK69gw%3D%3D\"\nskb            = \"2fc48081a207cbe98379b2ed33b5072125d6f80a55997494b021bde37cec4d9c8f17f90357d6ade926b02a3bc271ccecaf6894af1410d6ef8f6c9b3b0d871fba\"\ncookie_session = \"ahp9AcIyl%2BhLvQW695lhNUCnI7bF2iNZY8e4bM%2B2Lrx%2FlnbVXkYF3nL493dMM7eslFJKAyBNJKZlY5ugZpUuznCxO%2BpNXudnOdQVuDyvVBLxA8gQ4t48Gs%2BqOS7e%2FlSjBedhFKAaoBRdVI06QL8%3D--enarz3Hu%2FZ2n1Ys%2B--YdTghGWd4ZFef9Lf7WM%2FMQ%3D%3D\"\nputs verify_and_decrypt_session_cookie(cookie_session, skb)\n\n```\n\nNi dung c tham kho t nhiu ngun (v khng mt ngun c th no copy v chy lun c :unamused:), nhng ch yu c tm hiu [ti y](https://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html), cc bn c th vo trang ny  tm hiu k hn.\n\n**NOTE:** Mt im ht sc cn ch   l bin **skb** ti s dng  trn chnh l **secret_key_base** ca project m ti s dng  demo, v y ch l mt project test nn ti c th vit dng text vo file sau  commit ln github nh ny, trong tt c cc trng hp khc th y l mt hnh ng v cng **ti t**, vic b l **secret_key_base** s khin ng dng ca bn trn tri trc hacker. Vy nn hy tht cn thn!\n\non m trn work tt trn rails 5.2, ch  l cch m ha  cc phin bn rails khc nhau hon ton c kh nng khc nhau, nn nu on m ny khng th chy c vi rails 4 chng hn th  l iu ht sc bnh thng.\n\nTr li vn  chnh, nu bn   th trong ln u tin request khi bn cha h lm g v code trn server ca bn cng cha h set bt k gi tr cookies no th trong response tr v vn s c mt cookies (m ti  ni  trn, trong ln u request server s khi to v gi v cho bn mt hoc mt vi cookies).\n\nTrong trng hp ny l mt, cookies  c th c tn dng **_app_name_session**. Ni dung ca cookies ny cng c m ha, th decode bng **base64** khng c ta c th hiu y l 1 cookies  c encrypted.\n\nGi tr ca cookies ny trong trng hp ti test l:\n\n```\n\"aW2fSskgCyZ20Fi6E68xRGl0%2FR%2FzeFWoWU5YdhgkVhB%2FMtWSsX0rf3JuRgsfPPgQXjYYNygaRSxRjXAmOcsjohN28JQJnjej0Grfpwx52cZ5qjIRdMfOS9aXdTmedpuJ7T99aObbv75D3dsPtdQ%3D--FW10HzOu9FIoKK%2B8--9sMKANggTvi%2BlBjFwpIHEg%3D%3D\"\n```\n\nS dng on m ta  vit  trn, ta gii m ra c gi tr ca cookies ny l:\n\n```ruby\n{\n  \"session_id\":\"52cc440e209ad03d306e550c2ca2dd78\",\n  \"_csrf_token\":\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"\n}\n```\n\nVy trong ln u request ti 1 website ruby on rails, n s to ra cho chng ta 1 session, session lc khi to khng c gi tr g ngoi **session_id** v **_csrf_token**.\n\n**a sai sai, ti nh l ngy xa i hc c dy rng im khc bit ca session v cookies l session c lu  server cn cookies c lu  client c m**\n\nng, ti cng c hc nh vy, nhng  khng phi l cch m rails x l, **Rails c config mc nh l lu session bng cookies**, nu khng mun ta c th lu trn **redis**, **database**... Tuy nhin nu khng thy ngi v gii hn khng qu **4KB** ca cookies th ti khng thy l do g  chuyn v tr lu tr ca session i c. :smiley:\n\nBy gi ti add thm 1 gi tr vo session vi cu lnh **session[:user_id] = 1**, lc ny gi tr ca cookies cng thay i theo, li decrypt ta thu c:\n\n```ruby\n{\n  \"session_id\":\"52cc440e209ad03d306e550c2ca2dd78\",\n  \"_csrf_token\":\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\",\n  \"user_id\":1\n}\n```\n\nSession by gi  c thm mt key mi l **user_id** vi gi tr l **1**.  vy cui cng th session cng l 1 **hash** thi nh.\n\n## Kt lun\n\n phn bit cc client khc nhau, server s da vo **session_id** c lu trong cookies, v vy nu chim c cookies ng nhp trn website ABC.com ca bn, cc hacker c th dng n  gi mo bn v request ln server, ng bun thay server s c cookies c hacker request ln, s dng **secret_key_base**  gii m cookies v c ni dung bn trong, on code x l login li c t session[:user_id], lc ny th cookies kia c gi tr **session[:user_id] = 1** v th l server  tng rng hacker chnh l bn.\n","slug":"2019-04-17-doi-dieu-ve-session-va-cookie-trong-rails","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsao0016p3m22urk7b17","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p><strong>session[:user_id] = @user.id</strong>, dng code ny tht quen thuc? khi lm chc nng ng nhp trong nhng ngy nhp mn, hn ai cng  tng lm qua hoc lm gn ging nh vy, ta c dy rng, <strong>http</strong> l 1 giao thc khng c trng thi nn request th <strong>N + 1</strong> s chng th bit c request th <strong>N</strong>  lm g, vy nu  ln request th <strong>N</strong> chng ta  thc hin hnh vi ng nhp, v <strong>http</strong> th khng c lu vt li iu , h qu l  ln request tip theo, website hiu nh bn cha ng nhp, rt ng bun.</p>\n<p>Do you familiar with the logic below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">session[<span class=\"symbol\">:user_id</span>] = @user.id</span><br></pre></td></tr></table></figure>\n\n<p>Cng theo nhng g c dy, <strong>session/cookies</strong> c to ra vi mc ch lm cho http request c trng thi. V sao li  t trng thi trong nhy kp, v thc s l <strong>http</strong> khng bao gi c trng thi c, m <strong>session/cookies</strong> vi kh nng lu vt ca mnh c th gip website nm c mt s <strong>thng tin</strong> t client  request trc  v lm chng ging nh <strong>http</strong>  c trng thi.</p>\n<p>Qu m h? ng vy, khi c dy iu ny ti cng thy tht m h, wth is trng thi? phi trng thi? lu vt? Hy vng bi vit ny s gip ngi c c 1 ci nhn d hiu hn v 2 i tng ny trong ruby on rails.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Flow-hoat-dong\"><a href=\"#1-Flow-hoat-dong\" class=\"headerlink\" title=\"1. Flow hot ng\"></a>1. Flow hot ng</h2><p>Mt cch ngn gn cookies s c vn hnh nh sau:</p>\n<p><strong>Step 1</strong>: Ln u bn request n web ABC.com, nh nhng ta my bay, bn khng mang theo thng tin g ca ABC.com c</p>\n<p><strong>Step 2</strong>: ABC.com nhn request ca bn, n nhn ra bn khng mang theo cookies ca website, nn n trong response tr v n set mt hoc mt vi cookies mc nh cho bn.</p>\n<p><strong>Step 3</strong>: Bn nhn c response ca ABC.com, ri bn tip tc request ln ABC.com ln th 2, ln ny i theo request ca bn l ton b s cookies  c khi to  bc 2.</p>\n<p><strong>Step 4</strong>: ABC.com li nhn c request ca bn, v ln ny n  thy bn mang cookies ca ABC.com nn n s c ni dung trong cookies  (nu cn).</p>\n<h2 id=\"2-Mot-vai-loai-cookies-quan-trong-trong-rails\"><a href=\"#2-Mot-vai-loai-cookies-quan-trong-trong-rails\" class=\"headerlink\" title=\"2. Mt vi loi cookies quan trng trong rails\"></a>2. Mt vi loi cookies quan trng trong rails</h2><ol>\n<li><p><strong>Normal cookies</strong>: Mt dng cookie m d liu c lu tr di dng text.</p>\n</li>\n<li><p><strong>Signed cookies</strong>: Mt dng cookie m d liu lu tr s c k bi 1 <strong>digest</strong>, v <strong>digest</strong> ny c to ra bi <strong>secret_key_base</strong> trong app ca bn, sau  n s c chuyn sang dng <strong>base64</strong> code. iu ny c ngha l nu ai  c c <strong>signed cookies</strong> ca bn, th h hon ton c th c c ni dung bn trong (decode base64 l c th c c). Tuy nhin nu h sa li ni dung ca cookies  v gi ln server th lc ny, cookies ny tr thnh 1 cookies khng hp l, v sao? V nh  trnh by, n c k bi 1 digest sinh ra qua <strong>secret_key_base</strong>, vy nn cookies loi ny nu b sa i ni dung  client th khi kim tra tnh ton vn trn server thng qua digest s khng cn ng na. V n tr thnh 1 cookies khng hp l.</p>\n</li>\n<li><p><strong>Encrypted cookies</strong>: Mt dng cookies m d liu c m ha qua mt qu trnh m ha vi 1 kha quan trng l <strong>secret_key_base</strong>, mt cch n gin nht  hiu l khng c <strong>secret_key_base</strong> th ta khng th no <strong>c</strong> hay sa i d liu ca cookies ny c.</p>\n</li>\n</ol>\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cookies.signed[<span class=\"symbol\">:signed</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\">cookies.encrypted[<span class=\"symbol\">:encrypted</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\">cookies[<span class=\"symbol\">:normal</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br></pre></td></tr></table></figure>\n<p>Ti  to 3 cookies ng vi 3 dng cookies nu  trn, gi tr ca chng u ging nhau (u c gn bng Duy Chinh).</p>\n<p>Hy xem gi tr  client nhn c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">normal = <span class=\"string\">\"Duy+Chinh\"</span></span><br><span class=\"line\">signed = <span class=\"string\">\"IkR1eSBDaGluaCI%3D--a3af2bfd61abcd20cc3b8ac714968d0aaf578fe5\"</span></span><br><span class=\"line\">encrypted = <span class=\"string\">\"%2BVulShtBgFR2I18%3D--zQP8FmCAW4%2FZUwar--CQ%2FH6HFHSVlox5H8QC4CTg%3D%3D\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nhn xt:</p>\n<ol>\n<li><p>Kiu cookies thng thng, d liu lu dng text nn  client ta d dng c c ni dung cng nh sa i d liu ca chng.</p>\n</li>\n<li><p>Nhn signed cookies v encrypted cookies u khng thn thin vi ngi dng cui, v chng gm nhng k t khng c ng ngha vi end user.</p>\n</li>\n<li><p>Nu decode <strong>base64</strong> ta thu c gi tr ca signed cookies  trn l: <strong>Duy Chinh7f7oi</strong>, d mt s k t pha sau khng th hiu c, tuy nhin khng quan trng v ni dung cookies vn c gii m (ng vi tnh cht, c th c nhng khng th sa i).</p>\n</li>\n<li><p>Vic decode encrypted cookies l v vng khi khng c <strong>secret_key_base</strong>.</p>\n</li>\n</ol>\n<p><strong>NOTE:</strong></p>\n<p>Vic s dng loi cookies no s ng trong nhng trng hp c th, vi nhng d liu v hi v khng h quan trng th s dng cookies thng thng v lu mi th di dng text l kh d hn c. B qua cc bc m ha gip n hot ng vi performance tt hn hn 2 dng cookies cn li.<br>Ngc li, encrypted cookies l dng cookies tn cng sc  x l nht, v vy hy ch s dng n cho nhng thng tin thc s quan trng v khng th  l (nhng thng tin bt quan trng hn v ch cn m bo tnh ton vn ca d liu ch khng cn bo mt thng tin th hy dng signed cookies).</p>\n<h2 id=\"3-Giai-ma-cookies-va-tim-hieu-ve-session-trong-rails\"><a href=\"#3-Giai-ma-cookies-va-tim-hieu-ve-session-trong-rails\" class=\"headerlink\" title=\"3. Gii m cookies v tm hiu v session trong rails\"></a>3. Gii m cookies v tm hiu v session trong rails</h2><p>Sau kh nhiu cng sc tm kim, ti  tm ra cch  gii m cookies trong rails 5.2, ni dung n gin nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'cgi'</span></span><br><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'active_support'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">verify_and_decrypt_session_cookie</span><span class=\"params\">(cookie, secret_key_base)</span></span></span><br><span class=\"line\">  cookie                  = CGI::unescape(cookie)</span><br><span class=\"line\">  salt                    = <span class=\"string\">'authenticated encrypted cookie'</span></span><br><span class=\"line\">  encrypted_cookie_cipher = <span class=\"string\">'aes-256-gcm'</span></span><br><span class=\"line\">  serializer              = ActiveSupport::MessageEncryptor::NullSerializer</span><br><span class=\"line\"></span><br><span class=\"line\">  key_generator           = ActiveSupport::KeyGenerator.new(secret_key_base, <span class=\"symbol\">iterations:</span> <span class=\"number\">1000</span>)</span><br><span class=\"line\">  key_len                 = ActiveSupport::MessageEncryptor.key_len(encrypted_cookie_cipher)</span><br><span class=\"line\">  secret                  = key_generator.generate_key(salt, key_len)</span><br><span class=\"line\">  encryptor               = ActiveSupport::MessageEncryptor.new(secret, <span class=\"symbol\">cipher:</span> encrypted_cookie_cipher, <span class=\"symbol\">serializer:</span> serializer)</span><br><span class=\"line\"></span><br><span class=\"line\">  encryptor.decrypt_and_verify(cookie)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">cookie         = <span class=\"string\">\"QkS0eMMxz8z0Kso%3D--4opNQwT5tGUsnn90--5fXye0VQJX%2BXMVkUmK69gw%3D%3D\"</span></span><br><span class=\"line\">skb            = <span class=\"string\">\"2fc48081a207cbe98379b2ed33b5072125d6f80a55997494b021bde37cec4d9c8f17f90357d6ade926b02a3bc271ccecaf6894af1410d6ef8f6c9b3b0d871fba\"</span></span><br><span class=\"line\">cookie_session = <span class=\"string\">\"ahp9AcIyl%2BhLvQW695lhNUCnI7bF2iNZY8e4bM%2B2Lrx%2FlnbVXkYF3nL493dMM7eslFJKAyBNJKZlY5ugZpUuznCxO%2BpNXudnOdQVuDyvVBLxA8gQ4t48Gs%2BqOS7e%2FlSjBedhFKAaoBRdVI06QL8%3D--enarz3Hu%2FZ2n1Ys%2B--YdTghGWd4ZFef9Lf7WM%2FMQ%3D%3D\"</span></span><br><span class=\"line\">puts verify_and_decrypt_session_cookie(cookie_session, skb)</span><br></pre></td></tr></table></figure>\n\n<p>Ni dung c tham kho t nhiu ngun (v khng mt ngun c th no copy v chy lun c :unamused:), nhng ch yu c tm hiu <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html\" target=\"_blank\" rel=\"noopener\">ti y</a>, cc bn c th vo trang ny  tm hiu k hn.</p>\n<p><strong>NOTE:</strong> Mt im ht sc cn ch   l bin <strong>skb</strong> ti s dng  trn chnh l <strong>secret_key_base</strong> ca project m ti s dng  demo, v y ch l mt project test nn ti c th vit dng text vo file sau  commit ln github nh ny, trong tt c cc trng hp khc th y l mt hnh ng v cng <strong>ti t</strong>, vic b l <strong>secret_key_base</strong> s khin ng dng ca bn trn tri trc hacker. Vy nn hy tht cn thn!</p>\n<p>on m trn work tt trn rails 5.2, ch  l cch m ha  cc phin bn rails khc nhau hon ton c kh nng khc nhau, nn nu on m ny khng th chy c vi rails 4 chng hn th  l iu ht sc bnh thng.</p>\n<p>Tr li vn  chnh, nu bn   th trong ln u tin request khi bn cha h lm g v code trn server ca bn cng cha h set bt k gi tr cookies no th trong response tr v vn s c mt cookies (m ti  ni  trn, trong ln u request server s khi to v gi v cho bn mt hoc mt vi cookies).</p>\n<p>Trong trng hp ny l mt, cookies  c th c tn dng <strong>_app_name_session</strong>. Ni dung ca cookies ny cng c m ha, th decode bng <strong>base64</strong> khng c ta c th hiu y l 1 cookies  c encrypted.</p>\n<p>Gi tr ca cookies ny trong trng hp ti test l:</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"aW2fSskgCyZ20Fi6E68xRGl0%2FR%2FzeFWoWU5YdhgkVhB%2FMtWSsX0rf3JuRgsfPPgQXjYYNygaRSxRjXAmOcsjohN28JQJnjej0Grfpwx52cZ5qjIRdMfOS9aXdTmedpuJ7T99aObbv75D3dsPtdQ%3D--FW10HzOu9FIoKK%2B8--9sMKANggTvi%2BlBjFwpIHEg%3D%3D\"</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng on m ta  vit  trn, ta gii m ra c gi tr ca cookies ny l:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"session_id\"</span><span class=\"symbol\">:<span class=\"string\">\"52cc440e209ad03d306e550c2ca2dd78\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"_csrf_token\"</span><span class=\"symbol\">:<span class=\"string\">\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Vy trong ln u request ti 1 website ruby on rails, n s to ra cho chng ta 1 session, session lc khi to khng c gi tr g ngoi <strong>session_id</strong> v <strong>_csrf_token</strong>.</p>\n<p><strong>a sai sai, ti nh l ngy xa i hc c dy rng im khc bit ca session v cookies l session c lu  server cn cookies c lu  client c m</strong></p>\n<p>ng, ti cng c hc nh vy, nhng  khng phi l cch m rails x l, <strong>Rails c config mc nh l lu session bng cookies</strong>, nu khng mun ta c th lu trn <strong>redis</strong>, <strong>database</strong> Tuy nhin nu khng thy ngi v gii hn khng qu <strong>4KB</strong> ca cookies th ti khng thy l do g  chuyn v tr lu tr ca session i c. :smiley:</p>\n<p>By gi ti add thm 1 gi tr vo session vi cu lnh <strong>session[:user_id] = 1</strong>, lc ny gi tr ca cookies cng thay i theo, li decrypt ta thu c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"session_id\"</span><span class=\"symbol\">:<span class=\"string\">\"52cc440e209ad03d306e550c2ca2dd78\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"_csrf_token\"</span><span class=\"symbol\">:<span class=\"string\">\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"user_id\"</span><span class=\"symbol\">:</span><span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Session by gi  c thm mt key mi l <strong>user_id</strong> vi gi tr l <strong>1</strong>.  vy cui cng th session cng l 1 <strong>hash</strong> thi nh.</p>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p> phn bit cc client khc nhau, server s da vo <strong>session_id</strong> c lu trong cookies, v vy nu chim c cookies ng nhp trn website ABC.com ca bn, cc hacker c th dng n  gi mo bn v request ln server, ng bun thay server s c cookies c hacker request ln, s dng <strong>secret_key_base</strong>  gii m cookies v c ni dung bn trong, on code x l login li c t session[:user_id], lc ny th cookies kia c gi tr <strong>session[:user_id] = 1</strong> v th l server  tng rng hacker chnh l bn.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p><strong>session[:user_id] = @user.id</strong>, dng code ny tht quen thuc? khi lm chc nng ng nhp trong nhng ngy nhp mn, hn ai cng  tng lm qua hoc lm gn ging nh vy, ta c dy rng, <strong>http</strong> l 1 giao thc khng c trng thi nn request th <strong>N + 1</strong> s chng th bit c request th <strong>N</strong>  lm g, vy nu  ln request th <strong>N</strong> chng ta  thc hin hnh vi ng nhp, v <strong>http</strong> th khng c lu vt li iu , h qu l  ln request tip theo, website hiu nh bn cha ng nhp, rt ng bun.</p>\n<p>Do you familiar with the logic below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">session[<span class=\"symbol\">:user_id</span>] = @user.id</span><br></pre></td></tr></table></figure>\n\n<p>Cng theo nhng g c dy, <strong>session/cookies</strong> c to ra vi mc ch lm cho http request c trng thi. V sao li  t trng thi trong nhy kp, v thc s l <strong>http</strong> khng bao gi c trng thi c, m <strong>session/cookies</strong> vi kh nng lu vt ca mnh c th gip website nm c mt s <strong>thng tin</strong> t client  request trc  v lm chng ging nh <strong>http</strong>  c trng thi.</p>\n<p>Qu m h? ng vy, khi c dy iu ny ti cng thy tht m h, wth is trng thi? phi trng thi? lu vt? Hy vng bi vit ny s gip ngi c c 1 ci nhn d hiu hn v 2 i tng ny trong ruby on rails.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Flow-hoat-dong\"><a href=\"#1-Flow-hoat-dong\" class=\"headerlink\" title=\"1. Flow hot ng\"></a>1. Flow hot ng</h2><p>Mt cch ngn gn cookies s c vn hnh nh sau:</p>\n<p><strong>Step 1</strong>: Ln u bn request n web ABC.com, nh nhng ta my bay, bn khng mang theo thng tin g ca ABC.com c</p>\n<p><strong>Step 2</strong>: ABC.com nhn request ca bn, n nhn ra bn khng mang theo cookies ca website, nn n trong response tr v n set mt hoc mt vi cookies mc nh cho bn.</p>\n<p><strong>Step 3</strong>: Bn nhn c response ca ABC.com, ri bn tip tc request ln ABC.com ln th 2, ln ny i theo request ca bn l ton b s cookies  c khi to  bc 2.</p>\n<p><strong>Step 4</strong>: ABC.com li nhn c request ca bn, v ln ny n  thy bn mang cookies ca ABC.com nn n s c ni dung trong cookies  (nu cn).</p>\n<h2 id=\"2-Mot-vai-loai-cookies-quan-trong-trong-rails\"><a href=\"#2-Mot-vai-loai-cookies-quan-trong-trong-rails\" class=\"headerlink\" title=\"2. Mt vi loi cookies quan trng trong rails\"></a>2. Mt vi loi cookies quan trng trong rails</h2><ol>\n<li><p><strong>Normal cookies</strong>: Mt dng cookie m d liu c lu tr di dng text.</p>\n</li>\n<li><p><strong>Signed cookies</strong>: Mt dng cookie m d liu lu tr s c k bi 1 <strong>digest</strong>, v <strong>digest</strong> ny c to ra bi <strong>secret_key_base</strong> trong app ca bn, sau  n s c chuyn sang dng <strong>base64</strong> code. iu ny c ngha l nu ai  c c <strong>signed cookies</strong> ca bn, th h hon ton c th c c ni dung bn trong (decode base64 l c th c c). Tuy nhin nu h sa li ni dung ca cookies  v gi ln server th lc ny, cookies ny tr thnh 1 cookies khng hp l, v sao? V nh  trnh by, n c k bi 1 digest sinh ra qua <strong>secret_key_base</strong>, vy nn cookies loi ny nu b sa i ni dung  client th khi kim tra tnh ton vn trn server thng qua digest s khng cn ng na. V n tr thnh 1 cookies khng hp l.</p>\n</li>\n<li><p><strong>Encrypted cookies</strong>: Mt dng cookies m d liu c m ha qua mt qu trnh m ha vi 1 kha quan trng l <strong>secret_key_base</strong>, mt cch n gin nht  hiu l khng c <strong>secret_key_base</strong> th ta khng th no <strong>c</strong> hay sa i d liu ca cookies ny c.</p>\n</li>\n</ol>\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cookies.signed[<span class=\"symbol\">:signed</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\">cookies.encrypted[<span class=\"symbol\">:encrypted</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\">cookies[<span class=\"symbol\">:normal</span>] = <span class=\"string\">\"Duy Chinh\"</span></span><br></pre></td></tr></table></figure>\n<p>Ti  to 3 cookies ng vi 3 dng cookies nu  trn, gi tr ca chng u ging nhau (u c gn bng Duy Chinh).</p>\n<p>Hy xem gi tr  client nhn c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">normal = <span class=\"string\">\"Duy+Chinh\"</span></span><br><span class=\"line\">signed = <span class=\"string\">\"IkR1eSBDaGluaCI%3D--a3af2bfd61abcd20cc3b8ac714968d0aaf578fe5\"</span></span><br><span class=\"line\">encrypted = <span class=\"string\">\"%2BVulShtBgFR2I18%3D--zQP8FmCAW4%2FZUwar--CQ%2FH6HFHSVlox5H8QC4CTg%3D%3D\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nhn xt:</p>\n<ol>\n<li><p>Kiu cookies thng thng, d liu lu dng text nn  client ta d dng c c ni dung cng nh sa i d liu ca chng.</p>\n</li>\n<li><p>Nhn signed cookies v encrypted cookies u khng thn thin vi ngi dng cui, v chng gm nhng k t khng c ng ngha vi end user.</p>\n</li>\n<li><p>Nu decode <strong>base64</strong> ta thu c gi tr ca signed cookies  trn l: <strong>Duy Chinh7f7oi</strong>, d mt s k t pha sau khng th hiu c, tuy nhin khng quan trng v ni dung cookies vn c gii m (ng vi tnh cht, c th c nhng khng th sa i).</p>\n</li>\n<li><p>Vic decode encrypted cookies l v vng khi khng c <strong>secret_key_base</strong>.</p>\n</li>\n</ol>\n<p><strong>NOTE:</strong></p>\n<p>Vic s dng loi cookies no s ng trong nhng trng hp c th, vi nhng d liu v hi v khng h quan trng th s dng cookies thng thng v lu mi th di dng text l kh d hn c. B qua cc bc m ha gip n hot ng vi performance tt hn hn 2 dng cookies cn li.<br>Ngc li, encrypted cookies l dng cookies tn cng sc  x l nht, v vy hy ch s dng n cho nhng thng tin thc s quan trng v khng th  l (nhng thng tin bt quan trng hn v ch cn m bo tnh ton vn ca d liu ch khng cn bo mt thng tin th hy dng signed cookies).</p>\n<h2 id=\"3-Giai-ma-cookies-va-tim-hieu-ve-session-trong-rails\"><a href=\"#3-Giai-ma-cookies-va-tim-hieu-ve-session-trong-rails\" class=\"headerlink\" title=\"3. Gii m cookies v tm hiu v session trong rails\"></a>3. Gii m cookies v tm hiu v session trong rails</h2><p>Sau kh nhiu cng sc tm kim, ti  tm ra cch  gii m cookies trong rails 5.2, ni dung n gin nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'cgi'</span></span><br><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'active_support'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">verify_and_decrypt_session_cookie</span><span class=\"params\">(cookie, secret_key_base)</span></span></span><br><span class=\"line\">  cookie                  = CGI::unescape(cookie)</span><br><span class=\"line\">  salt                    = <span class=\"string\">'authenticated encrypted cookie'</span></span><br><span class=\"line\">  encrypted_cookie_cipher = <span class=\"string\">'aes-256-gcm'</span></span><br><span class=\"line\">  serializer              = ActiveSupport::MessageEncryptor::NullSerializer</span><br><span class=\"line\"></span><br><span class=\"line\">  key_generator           = ActiveSupport::KeyGenerator.new(secret_key_base, <span class=\"symbol\">iterations:</span> <span class=\"number\">1000</span>)</span><br><span class=\"line\">  key_len                 = ActiveSupport::MessageEncryptor.key_len(encrypted_cookie_cipher)</span><br><span class=\"line\">  secret                  = key_generator.generate_key(salt, key_len)</span><br><span class=\"line\">  encryptor               = ActiveSupport::MessageEncryptor.new(secret, <span class=\"symbol\">cipher:</span> encrypted_cookie_cipher, <span class=\"symbol\">serializer:</span> serializer)</span><br><span class=\"line\"></span><br><span class=\"line\">  encryptor.decrypt_and_verify(cookie)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">cookie         = <span class=\"string\">\"QkS0eMMxz8z0Kso%3D--4opNQwT5tGUsnn90--5fXye0VQJX%2BXMVkUmK69gw%3D%3D\"</span></span><br><span class=\"line\">skb            = <span class=\"string\">\"2fc48081a207cbe98379b2ed33b5072125d6f80a55997494b021bde37cec4d9c8f17f90357d6ade926b02a3bc271ccecaf6894af1410d6ef8f6c9b3b0d871fba\"</span></span><br><span class=\"line\">cookie_session = <span class=\"string\">\"ahp9AcIyl%2BhLvQW695lhNUCnI7bF2iNZY8e4bM%2B2Lrx%2FlnbVXkYF3nL493dMM7eslFJKAyBNJKZlY5ugZpUuznCxO%2BpNXudnOdQVuDyvVBLxA8gQ4t48Gs%2BqOS7e%2FlSjBedhFKAaoBRdVI06QL8%3D--enarz3Hu%2FZ2n1Ys%2B--YdTghGWd4ZFef9Lf7WM%2FMQ%3D%3D\"</span></span><br><span class=\"line\">puts verify_and_decrypt_session_cookie(cookie_session, skb)</span><br></pre></td></tr></table></figure>\n\n<p>Ni dung c tham kho t nhiu ngun (v khng mt ngun c th no copy v chy lun c :unamused:), nhng ch yu c tm hiu <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/MessageEncryptor.html\" target=\"_blank\" rel=\"noopener\">ti y</a>, cc bn c th vo trang ny  tm hiu k hn.</p>\n<p><strong>NOTE:</strong> Mt im ht sc cn ch   l bin <strong>skb</strong> ti s dng  trn chnh l <strong>secret_key_base</strong> ca project m ti s dng  demo, v y ch l mt project test nn ti c th vit dng text vo file sau  commit ln github nh ny, trong tt c cc trng hp khc th y l mt hnh ng v cng <strong>ti t</strong>, vic b l <strong>secret_key_base</strong> s khin ng dng ca bn trn tri trc hacker. Vy nn hy tht cn thn!</p>\n<p>on m trn work tt trn rails 5.2, ch  l cch m ha  cc phin bn rails khc nhau hon ton c kh nng khc nhau, nn nu on m ny khng th chy c vi rails 4 chng hn th  l iu ht sc bnh thng.</p>\n<p>Tr li vn  chnh, nu bn   th trong ln u tin request khi bn cha h lm g v code trn server ca bn cng cha h set bt k gi tr cookies no th trong response tr v vn s c mt cookies (m ti  ni  trn, trong ln u request server s khi to v gi v cho bn mt hoc mt vi cookies).</p>\n<p>Trong trng hp ny l mt, cookies  c th c tn dng <strong>_app_name_session</strong>. Ni dung ca cookies ny cng c m ha, th decode bng <strong>base64</strong> khng c ta c th hiu y l 1 cookies  c encrypted.</p>\n<p>Gi tr ca cookies ny trong trng hp ti test l:</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"aW2fSskgCyZ20Fi6E68xRGl0%2FR%2FzeFWoWU5YdhgkVhB%2FMtWSsX0rf3JuRgsfPPgQXjYYNygaRSxRjXAmOcsjohN28JQJnjej0Grfpwx52cZ5qjIRdMfOS9aXdTmedpuJ7T99aObbv75D3dsPtdQ%3D--FW10HzOu9FIoKK%2B8--9sMKANggTvi%2BlBjFwpIHEg%3D%3D\"</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng on m ta  vit  trn, ta gii m ra c gi tr ca cookies ny l:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"session_id\"</span><span class=\"symbol\">:<span class=\"string\">\"52cc440e209ad03d306e550c2ca2dd78\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"_csrf_token\"</span><span class=\"symbol\">:<span class=\"string\">\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Vy trong ln u request ti 1 website ruby on rails, n s to ra cho chng ta 1 session, session lc khi to khng c gi tr g ngoi <strong>session_id</strong> v <strong>_csrf_token</strong>.</p>\n<p><strong>a sai sai, ti nh l ngy xa i hc c dy rng im khc bit ca session v cookies l session c lu  server cn cookies c lu  client c m</strong></p>\n<p>ng, ti cng c hc nh vy, nhng  khng phi l cch m rails x l, <strong>Rails c config mc nh l lu session bng cookies</strong>, nu khng mun ta c th lu trn <strong>redis</strong>, <strong>database</strong> Tuy nhin nu khng thy ngi v gii hn khng qu <strong>4KB</strong> ca cookies th ti khng thy l do g  chuyn v tr lu tr ca session i c. :smiley:</p>\n<p>By gi ti add thm 1 gi tr vo session vi cu lnh <strong>session[:user_id] = 1</strong>, lc ny gi tr ca cookies cng thay i theo, li decrypt ta thu c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"session_id\"</span><span class=\"symbol\">:<span class=\"string\">\"52cc440e209ad03d306e550c2ca2dd78\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"_csrf_token\"</span><span class=\"symbol\">:<span class=\"string\">\"rD35dsIoJyf5MIRA54/ARQNMBAN0yKvfMU4RjCc9WD8=\"</span></span>,</span><br><span class=\"line\">  <span class=\"string\">\"user_id\"</span><span class=\"symbol\">:</span><span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Session by gi  c thm mt key mi l <strong>user_id</strong> vi gi tr l <strong>1</strong>.  vy cui cng th session cng l 1 <strong>hash</strong> thi nh.</p>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p> phn bit cc client khc nhau, server s da vo <strong>session_id</strong> c lu trong cookies, v vy nu chim c cookies ng nhp trn website ABC.com ca bn, cc hacker c th dng n  gi mo bn v request ln server, ng bun thay server s c cookies c hacker request ln, s dng <strong>secret_key_base</strong>  gii m cookies v c ni dung bn trong, on code x l login li c t session[:user_id], lc ny th cookies kia c gi tr <strong>session[:user_id] = 1</strong> v th l server  tng rng hacker chnh l bn.</p>\n"},{"title":"Cp Nht D Liu Vi ActiveRecord","date":"2019-05-07T17:00:00.000Z","draft":false,"label":"#til","_content":"\n## t vn \n\nNgoi phng thc thng dng **update**  cp nht d liu. Rails ni chung hay Activerecord ni ring cn cung cp 1 s phng thc khc  thay i d liu hin c, hy cng tm hiu v chng.\n\n## Lun bn\n\n**Chun b:**\n\n1. Ti c mt model **Cat** vi 2 thuc tnh l **age** v **name**.\n\n2. Trong model Cat ti c 1 **validation** v 1 **callback** n gin.\n\n** so snh cc phng thc chng ta ch  n mt s im sau:**\n\n1. Phng thc nhn mt field cn update hay nhiu field?\n\n2. Phng thc update c cho mt hay nhiu record?\n\n3. Validate method c chy hay khng?\n\n4. Callback c chy hay khng?\n\n5. Trng update_at c c cp nht hay khng?\n\n## 1. Phng thc update\n\n**Instance method:**\n\nL phng thc c gi thng qua mt instance. Ta truyn vo field name cn cp nht v gi tr mi sau cp nht. Ta c th truyn tham s di dng hash.\n\nV d:\n\n```ruby\ncat = Cat.first\ncat.update(name: 'change name')\n```\n\nNhiu tham s\n\n```ruby\ncat = Cat.first\ncat.update(name: 'change name', age: 100)\n```\n\nTruyn di dng hash\n\n```ruby\ncat = Cat.first\ncat.update({:name => 'change name', :age => 1})\n```\n\n**Class method**\n\nL phng thc c gi thng qua class model. Nhn vo 2 tham s, th nht l id hoc mt mng cc id ca record thuc class cn cp nht, th hai l mt hash key-value cc field name cn cp nht v gi tr ca chng sau cp nht.\n\nCp nht 1 record\n\n```ruby\nCat.update(1, {:name => 'change name'})\n```\n\nCp nht nhiu record\n\n```ruby\nCat.update([1, 2, 3], {:name => 'change name'})\n```\n\nNote:\n\n1. Trng updated_at u c cp nht li khi dng 2 phng thc trn.\n\n2. Validate v callback u c chy.\n\n3. Class method **update** th c th cp nht nhiu record mt lc.\n\n## 2. Phng thc update_attribute v update_attributes\n\nPhng thc update_attribute nhn 2 tham s truyn vo, vi tham s th nht l field cn cp nht v tham s th 2 l gi tr cp nht (Khc vi update, th tham s truyn vo khng th  di dng hash).\n\n```ruby\ncat = Cat.first\ncat.update_attribute(:name, 'change name')\n```\n\nPhng thc update_attributes khc vi update_attribute l n nhn 1 tham s ch khng phi 2. Ta truyn tham s di hng mt hash cho phng ny vi gi tr key-value tng ng field cn update v gi tr cn cp nht.\n\n```ruby\ncat = Cat.first\ncat.update_attributes({ :name => 'change name', :age => 20 })\n# cch khc\ncat.update_attributes({ name: 'meo tam the 2', age: 20 })\n```\n\nNote:\n\n1. Trng updated_at c c cp nht li.\n\n2. Callback vn chy nhng **khng** chy validate.\n\n3. update_attribute dng cho cp nht 1 field cn update_attributes cn khi cp nht nhiu field.\n\n## 3. Phng update_column v update_columns\n\nPhng thc update_column c c php ging nh update_attribute, cn phng thc update_columns th c c php tng t nh update_attributes.\n\n```ruby\ncat = Cat.first\ncat.update_column(:name, 'change name')\n\n# vi update_columns\ncat.update_columns(name: 'change name', age: 10)\n# or\ncat.update_columns(:name => 'change name', :age => 10)\n```\n\nTuy nhin ta c mt s im khc bit c bn cn lu  vi update_attribute v update_attributes cn lu .\n\nNote: Vi phng thc update_column v update_columns\n\n1. Trng updated_at khng c cp nht.\n\n2. Callback v validate u **khng** c chy.\n\n## Kt lun\n\nCch y t lu ti c lm 1 ng dng nh, trong  c mt model chnh gi l X, trong model ny ti c vit mt callback tn Y c thc hin sau khi record c save (vi method after_save). Trong callback Y ti s dng method **update**.\n\nng bun thay l on code ca ti khng hot ng mt cch bnh thng, sau khi save record th terminal b crash vi mt vng lp bt tn, cht nhn ra l khi s dng **update** th callback c gi li, vy l n to ra mt vng lp vnh vin, save record(1) -> callback c gi(2) -> trong callback c phng thc update(3) -> update c gi(4) -> update li gi li callback(2).\n khc phc th cn chuyn **update** thnh **update_column** hoc **update_columns**.\n","source":"_posts/2019-05-08-phan-biet-update-update-column-va-update-attribute-trong-rails.md","raw":"---\ntitle: \"Cp Nht D Liu Vi ActiveRecord\"\ndate: 2019-05-08\ndraft: false\ntags: [\"RAILS\"]\nlabel: \"#til\"\n---\n\n## t vn \n\nNgoi phng thc thng dng **update**  cp nht d liu. Rails ni chung hay Activerecord ni ring cn cung cp 1 s phng thc khc  thay i d liu hin c, hy cng tm hiu v chng.\n\n## Lun bn\n\n**Chun b:**\n\n1. Ti c mt model **Cat** vi 2 thuc tnh l **age** v **name**.\n\n2. Trong model Cat ti c 1 **validation** v 1 **callback** n gin.\n\n** so snh cc phng thc chng ta ch  n mt s im sau:**\n\n1. Phng thc nhn mt field cn update hay nhiu field?\n\n2. Phng thc update c cho mt hay nhiu record?\n\n3. Validate method c chy hay khng?\n\n4. Callback c chy hay khng?\n\n5. Trng update_at c c cp nht hay khng?\n\n## 1. Phng thc update\n\n**Instance method:**\n\nL phng thc c gi thng qua mt instance. Ta truyn vo field name cn cp nht v gi tr mi sau cp nht. Ta c th truyn tham s di dng hash.\n\nV d:\n\n```ruby\ncat = Cat.first\ncat.update(name: 'change name')\n```\n\nNhiu tham s\n\n```ruby\ncat = Cat.first\ncat.update(name: 'change name', age: 100)\n```\n\nTruyn di dng hash\n\n```ruby\ncat = Cat.first\ncat.update({:name => 'change name', :age => 1})\n```\n\n**Class method**\n\nL phng thc c gi thng qua class model. Nhn vo 2 tham s, th nht l id hoc mt mng cc id ca record thuc class cn cp nht, th hai l mt hash key-value cc field name cn cp nht v gi tr ca chng sau cp nht.\n\nCp nht 1 record\n\n```ruby\nCat.update(1, {:name => 'change name'})\n```\n\nCp nht nhiu record\n\n```ruby\nCat.update([1, 2, 3], {:name => 'change name'})\n```\n\nNote:\n\n1. Trng updated_at u c cp nht li khi dng 2 phng thc trn.\n\n2. Validate v callback u c chy.\n\n3. Class method **update** th c th cp nht nhiu record mt lc.\n\n## 2. Phng thc update_attribute v update_attributes\n\nPhng thc update_attribute nhn 2 tham s truyn vo, vi tham s th nht l field cn cp nht v tham s th 2 l gi tr cp nht (Khc vi update, th tham s truyn vo khng th  di dng hash).\n\n```ruby\ncat = Cat.first\ncat.update_attribute(:name, 'change name')\n```\n\nPhng thc update_attributes khc vi update_attribute l n nhn 1 tham s ch khng phi 2. Ta truyn tham s di hng mt hash cho phng ny vi gi tr key-value tng ng field cn update v gi tr cn cp nht.\n\n```ruby\ncat = Cat.first\ncat.update_attributes({ :name => 'change name', :age => 20 })\n# cch khc\ncat.update_attributes({ name: 'meo tam the 2', age: 20 })\n```\n\nNote:\n\n1. Trng updated_at c c cp nht li.\n\n2. Callback vn chy nhng **khng** chy validate.\n\n3. update_attribute dng cho cp nht 1 field cn update_attributes cn khi cp nht nhiu field.\n\n## 3. Phng update_column v update_columns\n\nPhng thc update_column c c php ging nh update_attribute, cn phng thc update_columns th c c php tng t nh update_attributes.\n\n```ruby\ncat = Cat.first\ncat.update_column(:name, 'change name')\n\n# vi update_columns\ncat.update_columns(name: 'change name', age: 10)\n# or\ncat.update_columns(:name => 'change name', :age => 10)\n```\n\nTuy nhin ta c mt s im khc bit c bn cn lu  vi update_attribute v update_attributes cn lu .\n\nNote: Vi phng thc update_column v update_columns\n\n1. Trng updated_at khng c cp nht.\n\n2. Callback v validate u **khng** c chy.\n\n## Kt lun\n\nCch y t lu ti c lm 1 ng dng nh, trong  c mt model chnh gi l X, trong model ny ti c vit mt callback tn Y c thc hin sau khi record c save (vi method after_save). Trong callback Y ti s dng method **update**.\n\nng bun thay l on code ca ti khng hot ng mt cch bnh thng, sau khi save record th terminal b crash vi mt vng lp bt tn, cht nhn ra l khi s dng **update** th callback c gi li, vy l n to ra mt vng lp vnh vin, save record(1) -> callback c gi(2) -> trong callback c phng thc update(3) -> update c gi(4) -> update li gi li callback(2).\n khc phc th cn chuyn **update** thnh **update_column** hoc **update_columns**.\n","slug":"2019-05-08-phan-biet-update-update-column-va-update-attribute-trong-rails","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsar0019p3m27dy15vq3","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Ngoi phng thc thng dng <strong>update</strong>  cp nht d liu. Rails ni chung hay Activerecord ni ring cn cung cp 1 s phng thc khc  thay i d liu hin c, hy cng tm hiu v chng.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><p><strong>Chun b:</strong></p>\n<ol>\n<li><p>Ti c mt model <strong>Cat</strong> vi 2 thuc tnh l <strong>age</strong> v <strong>name</strong>.</p>\n</li>\n<li><p>Trong model Cat ti c 1 <strong>validation</strong> v 1 <strong>callback</strong> n gin.</p>\n</li>\n</ol>\n<p><strong> so snh cc phng thc chng ta ch  n mt s im sau:</strong></p>\n<ol>\n<li><p>Phng thc nhn mt field cn update hay nhiu field?</p>\n</li>\n<li><p>Phng thc update c cho mt hay nhiu record?</p>\n</li>\n<li><p>Validate method c chy hay khng?</p>\n</li>\n<li><p>Callback c chy hay khng?</p>\n</li>\n<li><p>Trng update_at c c cp nht hay khng?</p>\n</li>\n</ol>\n<h2 id=\"1-Phuong-thuc-update\"><a href=\"#1-Phuong-thuc-update\" class=\"headerlink\" title=\"1. Phng thc update\"></a>1. Phng thc update</h2><p><strong>Instance method:</strong></p>\n<p>L phng thc c gi thng qua mt instance. Ta truyn vo field name cn cp nht v gi tr mi sau cp nht. Ta c th truyn tham s di dng hash.</p>\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Nhiu tham s</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">100</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Truyn di dng hash</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(&#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">1</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>Class method</strong></p>\n<p>L phng thc c gi thng qua class model. Nhn vo 2 tham s, th nht l id hoc mt mng cc id ca record thuc class cn cp nht, th hai l mt hash key-value cc field name cn cp nht v gi tr ca chng sau cp nht.</p>\n<p>Cp nht 1 record</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.update(<span class=\"number\">1</span>, &#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Cp nht nhiu record</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.update([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], &#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Note:</p>\n<ol>\n<li><p>Trng updated_at u c cp nht li khi dng 2 phng thc trn.</p>\n</li>\n<li><p>Validate v callback u c chy.</p>\n</li>\n<li><p>Class method <strong>update</strong> th c th cp nht nhiu record mt lc.</p>\n</li>\n</ol>\n<h2 id=\"2-Phuong-thuc-update-attribute-va-update-attributes\"><a href=\"#2-Phuong-thuc-update-attribute-va-update-attributes\" class=\"headerlink\" title=\"2. Phng thc update_attribute v update_attributes\"></a>2. Phng thc update_attribute v update_attributes</h2><p>Phng thc update_attribute nhn 2 tham s truyn vo, vi tham s th nht l field cn cp nht v tham s th 2 l gi tr cp nht (Khc vi update, th tham s truyn vo khng th  di dng hash).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_attribute(<span class=\"symbol\">:name</span>, <span class=\"string\">'change name'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Phng thc update_attributes khc vi update_attribute l n nhn 1 tham s ch khng phi 2. Ta truyn tham s di hng mt hash cho phng ny vi gi tr key-value tng ng field cn update v gi tr cn cp nht.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_attributes(&#123; <span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">20</span> &#125;)</span><br><span class=\"line\"><span class=\"comment\"># cch khc</span></span><br><span class=\"line\">cat.update_attributes(&#123; <span class=\"symbol\">name:</span> <span class=\"string\">'meo tam the 2'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">20</span> &#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Note:</p>\n<ol>\n<li><p>Trng updated_at c c cp nht li.</p>\n</li>\n<li><p>Callback vn chy nhng <strong>khng</strong> chy validate.</p>\n</li>\n<li><p>update_attribute dng cho cp nht 1 field cn update_attributes cn khi cp nht nhiu field.</p>\n</li>\n</ol>\n<h2 id=\"3-Phuong-update-column-va-update-columns\"><a href=\"#3-Phuong-update-column-va-update-columns\" class=\"headerlink\" title=\"3. Phng update_column v update_columns\"></a>3. Phng update_column v update_columns</h2><p>Phng thc update_column c c php ging nh update_attribute, cn phng thc update_columns th c c php tng t nh update_attributes.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_column(<span class=\"symbol\">:name</span>, <span class=\"string\">'change name'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># vi update_columns</span></span><br><span class=\"line\">cat.update_columns(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># or</span></span><br><span class=\"line\">cat.update_columns(<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">10</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Tuy nhin ta c mt s im khc bit c bn cn lu  vi update_attribute v update_attributes cn lu .</p>\n<p>Note: Vi phng thc update_column v update_columns</p>\n<ol>\n<li><p>Trng updated_at khng c cp nht.</p>\n</li>\n<li><p>Callback v validate u <strong>khng</strong> c chy.</p>\n</li>\n</ol>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p>Cch y t lu ti c lm 1 ng dng nh, trong  c mt model chnh gi l X, trong model ny ti c vit mt callback tn Y c thc hin sau khi record c save (vi method after_save). Trong callback Y ti s dng method <strong>update</strong>.</p>\n<p>ng bun thay l on code ca ti khng hot ng mt cch bnh thng, sau khi save record th terminal b crash vi mt vng lp bt tn, cht nhn ra l khi s dng <strong>update</strong> th callback c gi li, vy l n to ra mt vng lp vnh vin, save record(1) -&gt; callback c gi(2) -&gt; trong callback c phng thc update(3) -&gt; update c gi(4) -&gt; update li gi li callback(2).<br> khc phc th cn chuyn <strong>update</strong> thnh <strong>update_column</strong> hoc <strong>update_columns</strong>.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Ngoi phng thc thng dng <strong>update</strong>  cp nht d liu. Rails ni chung hay Activerecord ni ring cn cung cp 1 s phng thc khc  thay i d liu hin c, hy cng tm hiu v chng.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><p><strong>Chun b:</strong></p>\n<ol>\n<li><p>Ti c mt model <strong>Cat</strong> vi 2 thuc tnh l <strong>age</strong> v <strong>name</strong>.</p>\n</li>\n<li><p>Trong model Cat ti c 1 <strong>validation</strong> v 1 <strong>callback</strong> n gin.</p>\n</li>\n</ol>\n<p><strong> so snh cc phng thc chng ta ch  n mt s im sau:</strong></p>\n<ol>\n<li><p>Phng thc nhn mt field cn update hay nhiu field?</p>\n</li>\n<li><p>Phng thc update c cho mt hay nhiu record?</p>\n</li>\n<li><p>Validate method c chy hay khng?</p>\n</li>\n<li><p>Callback c chy hay khng?</p>\n</li>\n<li><p>Trng update_at c c cp nht hay khng?</p>\n</li>\n</ol>\n<h2 id=\"1-Phuong-thuc-update\"><a href=\"#1-Phuong-thuc-update\" class=\"headerlink\" title=\"1. Phng thc update\"></a>1. Phng thc update</h2><p><strong>Instance method:</strong></p>\n<p>L phng thc c gi thng qua mt instance. Ta truyn vo field name cn cp nht v gi tr mi sau cp nht. Ta c th truyn tham s di dng hash.</p>\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Nhiu tham s</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">100</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Truyn di dng hash</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update(&#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">1</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>Class method</strong></p>\n<p>L phng thc c gi thng qua class model. Nhn vo 2 tham s, th nht l id hoc mt mng cc id ca record thuc class cn cp nht, th hai l mt hash key-value cc field name cn cp nht v gi tr ca chng sau cp nht.</p>\n<p>Cp nht 1 record</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.update(<span class=\"number\">1</span>, &#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Cp nht nhiu record</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.update([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], &#123;<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Note:</p>\n<ol>\n<li><p>Trng updated_at u c cp nht li khi dng 2 phng thc trn.</p>\n</li>\n<li><p>Validate v callback u c chy.</p>\n</li>\n<li><p>Class method <strong>update</strong> th c th cp nht nhiu record mt lc.</p>\n</li>\n</ol>\n<h2 id=\"2-Phuong-thuc-update-attribute-va-update-attributes\"><a href=\"#2-Phuong-thuc-update-attribute-va-update-attributes\" class=\"headerlink\" title=\"2. Phng thc update_attribute v update_attributes\"></a>2. Phng thc update_attribute v update_attributes</h2><p>Phng thc update_attribute nhn 2 tham s truyn vo, vi tham s th nht l field cn cp nht v tham s th 2 l gi tr cp nht (Khc vi update, th tham s truyn vo khng th  di dng hash).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_attribute(<span class=\"symbol\">:name</span>, <span class=\"string\">'change name'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Phng thc update_attributes khc vi update_attribute l n nhn 1 tham s ch khng phi 2. Ta truyn tham s di hng mt hash cho phng ny vi gi tr key-value tng ng field cn update v gi tr cn cp nht.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_attributes(&#123; <span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">20</span> &#125;)</span><br><span class=\"line\"><span class=\"comment\"># cch khc</span></span><br><span class=\"line\">cat.update_attributes(&#123; <span class=\"symbol\">name:</span> <span class=\"string\">'meo tam the 2'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">20</span> &#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Note:</p>\n<ol>\n<li><p>Trng updated_at c c cp nht li.</p>\n</li>\n<li><p>Callback vn chy nhng <strong>khng</strong> chy validate.</p>\n</li>\n<li><p>update_attribute dng cho cp nht 1 field cn update_attributes cn khi cp nht nhiu field.</p>\n</li>\n</ol>\n<h2 id=\"3-Phuong-update-column-va-update-columns\"><a href=\"#3-Phuong-update-column-va-update-columns\" class=\"headerlink\" title=\"3. Phng update_column v update_columns\"></a>3. Phng update_column v update_columns</h2><p>Phng thc update_column c c php ging nh update_attribute, cn phng thc update_columns th c c php tng t nh update_attributes.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat = Cat.first</span><br><span class=\"line\">cat.update_column(<span class=\"symbol\">:name</span>, <span class=\"string\">'change name'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># vi update_columns</span></span><br><span class=\"line\">cat.update_columns(<span class=\"symbol\">name:</span> <span class=\"string\">'change name'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># or</span></span><br><span class=\"line\">cat.update_columns(<span class=\"symbol\">:name</span> =&gt; <span class=\"string\">'change name'</span>, <span class=\"symbol\">:age</span> =&gt; <span class=\"number\">10</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Tuy nhin ta c mt s im khc bit c bn cn lu  vi update_attribute v update_attributes cn lu .</p>\n<p>Note: Vi phng thc update_column v update_columns</p>\n<ol>\n<li><p>Trng updated_at khng c cp nht.</p>\n</li>\n<li><p>Callback v validate u <strong>khng</strong> c chy.</p>\n</li>\n</ol>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p>Cch y t lu ti c lm 1 ng dng nh, trong  c mt model chnh gi l X, trong model ny ti c vit mt callback tn Y c thc hin sau khi record c save (vi method after_save). Trong callback Y ti s dng method <strong>update</strong>.</p>\n<p>ng bun thay l on code ca ti khng hot ng mt cch bnh thng, sau khi save record th terminal b crash vi mt vng lp bt tn, cht nhn ra l khi s dng <strong>update</strong> th callback c gi li, vy l n to ra mt vng lp vnh vin, save record(1) -&gt; callback c gi(2) -&gt; trong callback c phng thc update(3) -&gt; update c gi(4) -&gt; update li gi li callback(2).<br> khc phc th cn chuyn <strong>update</strong> thnh <strong>update_column</strong> hoc <strong>update_columns</strong>.</p>\n"},{"title":"Require V Load Trong Ruby","date":"2019-05-14T17:00:00.000Z","draft":false,"mytag":"Ruby","mytrend":"COOL","_content":"## t vn \n\nKhc vi rails, mt framework  c h tr autoloading, mt chng trnh ruby n thun khng c c ch .  s dng nhng m ngun ph thuc ta phi \"gi\" chng ti file hin ti bng method **require** hoc **load**. V d:\n\n```ruby\nrequire 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\n mt vn  khc trong ruby,  l ngn ng ny khng h tr a k tha, thay vo  chng c 1 c ch gi l **mixin**  c th s dng cc phng thc trong nhiu **moudle** khc nhau. Ta s dng 2 method l **include** v **extend**  hin thc ho iu ny.\n\n## Lun bn\n\n## 1. So snh require v require_relative\n\nTrong tiu  bi vit khng h  cp n **require_relative** vy sao gi phi tm hiu v n? Cu tr li nm  cch m phng thc **require** hot ng.\n\nTr li v d trong mc t vn , gi s c 2 file **cat.rb** v **animal.rb** nm trong cng mt th mc:\n\n```\n- app\n  - cat.rb\n  - animal.rb\n```\n\nCu hi t ra l liu on m trong phn t vn  c work vi cu trc file nh ny hay khng? C hoc khng,  l cu tr li.\n\nKhc vi mng tng ban u rng phng thc require cng s bt u tm file t th mc gc (th mc cha file gi method) th thc t reuire tm kim file bng mt cch khc.\n\nN s tm n bin global **$LOAD_PATH**, bin ny l mt ng dn, phng thc require s tm n ng dn ny v coi th mc  l gc, n s tm kim nhng file c reque bt u t th mc . Trong ln u tin n tm thy th ruby s dng chng trnh  y v load file va tm c ln. Nu tm ht cc ng dn trong $LOAD_PATH v vn khng thy th **LoadError** s c gi ti.\n\nTr v vi cu hi bn trn, on code ca chng ta work khi bin **$LOAD_PATH** c nh ngha, v n l ng dn ti th mc ang lm vic (chnh l folder app).\n\nTrong tt c cc trng hp cn li, nh khi bin ny cha c nh ngha hay n li li mt ng dn n mt folder khc, th on m khi u ca chng ta khng th chy (v require khng tm c file tng ng theo yu cu).\n\nTh bn nhn c khi ny ch l mt thng bo li **cannot load such file -- animal.rb (LoadError)**.\n\n**Gii quyt vn  trn bng cch no?**\n\nTa s c th dng 2 cch:\n\nCch 1: in thm th mc ang lm vic vo gi tr ca bin **$LOAD_PATH**, khi ny th on m chng ta s sa li nh sau:\n\n```ruby\n# ni thm ng dn th mc hin ti vo gi tr hin ti ca bin $LOAD_PATH\n$LOAD_PATH << File.join(File.dirname(__FILE__)\nrequire 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\nCch 2: S dng **require_relative** thay th cho require, sa li on m nh sau:\n\n```ruby\nrequire_relative 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\nC hai phng php trn u hot ng bnh thng.\n\n> $: l mt cch vit tt cho $LOAD_PATH\n\n## 2. So snh require v load\n\nNh trong mc 1  ni v require, thc cht load c cch hot ng v mc ch s dng rt ging vi require. C 2 u c dng  \"gi\" nhng on m cn thit vo file hin ti ang lm vic, nh vic bn mun import thm mt file js vo file html ang lm vic no .\n\nTuy nhin gia chng c mt im khc nhau c bn, m t   dn ti mt li khuyn v vic s dng chng nh sau:\n\n```\nMoreover, Kernel#require loads files once, but development is much more smooth\nif code gets refreshed when it changes without restarting the server.\nIt would be nice to be able to use Kernel#load in development,\nand Kernel#require in production.\n```\n\n**- trch dn guides.rubyonrails -**\n\n:arrow_right: iu rt ra  y l:\n\n:one: require s c v load file c gi mt ln duy nht.\n\n:two: load s c v load file c gi mi khi file  c chy.\n\nT  dn n vic l load s hu dng khi lm vic ti mi trng development hn, ni m thay i din ra lin tc, cn require thch hp khi trin khai ln production.\n\nNote: Sau khi bn chy ti method require, n s c file bn require v lu ti b nh, nhng ln tip theo khi bn chy ti file , n s c ni dung t b nh (m n  lu li ti ln load u tin), iu ny gip tng performance v khng phi lood li file ln na, nhng ng ngha vi  l nhng thay i sau  ti file require s khng c load khi chy.\n\n## 3. So snh include v extend\n\nKhng c nhiu lin h vi hai mc u, 2 phng thc c  cp trong mc 3  gii quyt bi tan mixin trong ruby, nh  c ln ti trnh by khi qut [ti y](https://hdchinh.com/post/2019-02-24-ruby-method-lookup/).\n\nC v v cao hng chm gi title qu, m ti qun mt  vit v hai phng thc ny mt ln, v hin ti vn cha c g  b sung thm, nu cn hy c li bi vit tham kho bn trn nh.\n\n## Kt lun\n\nTham kho:\n\n[1] [https://guides.rubyonrails.org/autoloading_and_reloading_constants.html](https://guides.rubyonrails.org/autoloading_and_reloading_constants.html)\n","source":"_posts/2019-05-15-require-load-include-va-extend-trong-ruby.md","raw":"---\ntitle: \"Require V Load Trong Ruby\"\ndate: 2019-05-15\ndraft: false\ntags: [\"ruby\"]\ncategories: [\"ruby notes\"]\nmytag: \"Ruby\"\nmytrend: \"COOL\"\n\n---\n## t vn \n\nKhc vi rails, mt framework  c h tr autoloading, mt chng trnh ruby n thun khng c c ch .  s dng nhng m ngun ph thuc ta phi \"gi\" chng ti file hin ti bng method **require** hoc **load**. V d:\n\n```ruby\nrequire 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\n mt vn  khc trong ruby,  l ngn ng ny khng h tr a k tha, thay vo  chng c 1 c ch gi l **mixin**  c th s dng cc phng thc trong nhiu **moudle** khc nhau. Ta s dng 2 method l **include** v **extend**  hin thc ho iu ny.\n\n## Lun bn\n\n## 1. So snh require v require_relative\n\nTrong tiu  bi vit khng h  cp n **require_relative** vy sao gi phi tm hiu v n? Cu tr li nm  cch m phng thc **require** hot ng.\n\nTr li v d trong mc t vn , gi s c 2 file **cat.rb** v **animal.rb** nm trong cng mt th mc:\n\n```\n- app\n  - cat.rb\n  - animal.rb\n```\n\nCu hi t ra l liu on m trong phn t vn  c work vi cu trc file nh ny hay khng? C hoc khng,  l cu tr li.\n\nKhc vi mng tng ban u rng phng thc require cng s bt u tm file t th mc gc (th mc cha file gi method) th thc t reuire tm kim file bng mt cch khc.\n\nN s tm n bin global **$LOAD_PATH**, bin ny l mt ng dn, phng thc require s tm n ng dn ny v coi th mc  l gc, n s tm kim nhng file c reque bt u t th mc . Trong ln u tin n tm thy th ruby s dng chng trnh  y v load file va tm c ln. Nu tm ht cc ng dn trong $LOAD_PATH v vn khng thy th **LoadError** s c gi ti.\n\nTr v vi cu hi bn trn, on code ca chng ta work khi bin **$LOAD_PATH** c nh ngha, v n l ng dn ti th mc ang lm vic (chnh l folder app).\n\nTrong tt c cc trng hp cn li, nh khi bin ny cha c nh ngha hay n li li mt ng dn n mt folder khc, th on m khi u ca chng ta khng th chy (v require khng tm c file tng ng theo yu cu).\n\nTh bn nhn c khi ny ch l mt thng bo li **cannot load such file -- animal.rb (LoadError)**.\n\n**Gii quyt vn  trn bng cch no?**\n\nTa s c th dng 2 cch:\n\nCch 1: in thm th mc ang lm vic vo gi tr ca bin **$LOAD_PATH**, khi ny th on m chng ta s sa li nh sau:\n\n```ruby\n# ni thm ng dn th mc hin ti vo gi tr hin ti ca bin $LOAD_PATH\n$LOAD_PATH << File.join(File.dirname(__FILE__)\nrequire 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\nCch 2: S dng **require_relative** thay th cho require, sa li on m nh sau:\n\n```ruby\nrequire_relative 'animal'\n\nclass Cat < Animal\n  def hello\n    @cat = Animal.new\n  end\nend\n```\n\nC hai phng php trn u hot ng bnh thng.\n\n> $: l mt cch vit tt cho $LOAD_PATH\n\n## 2. So snh require v load\n\nNh trong mc 1  ni v require, thc cht load c cch hot ng v mc ch s dng rt ging vi require. C 2 u c dng  \"gi\" nhng on m cn thit vo file hin ti ang lm vic, nh vic bn mun import thm mt file js vo file html ang lm vic no .\n\nTuy nhin gia chng c mt im khc nhau c bn, m t   dn ti mt li khuyn v vic s dng chng nh sau:\n\n```\nMoreover, Kernel#require loads files once, but development is much more smooth\nif code gets refreshed when it changes without restarting the server.\nIt would be nice to be able to use Kernel#load in development,\nand Kernel#require in production.\n```\n\n**- trch dn guides.rubyonrails -**\n\n:arrow_right: iu rt ra  y l:\n\n:one: require s c v load file c gi mt ln duy nht.\n\n:two: load s c v load file c gi mi khi file  c chy.\n\nT  dn n vic l load s hu dng khi lm vic ti mi trng development hn, ni m thay i din ra lin tc, cn require thch hp khi trin khai ln production.\n\nNote: Sau khi bn chy ti method require, n s c file bn require v lu ti b nh, nhng ln tip theo khi bn chy ti file , n s c ni dung t b nh (m n  lu li ti ln load u tin), iu ny gip tng performance v khng phi lood li file ln na, nhng ng ngha vi  l nhng thay i sau  ti file require s khng c load khi chy.\n\n## 3. So snh include v extend\n\nKhng c nhiu lin h vi hai mc u, 2 phng thc c  cp trong mc 3  gii quyt bi tan mixin trong ruby, nh  c ln ti trnh by khi qut [ti y](https://hdchinh.com/post/2019-02-24-ruby-method-lookup/).\n\nC v v cao hng chm gi title qu, m ti qun mt  vit v hai phng thc ny mt ln, v hin ti vn cha c g  b sung thm, nu cn hy c li bi vit tham kho bn trn nh.\n\n## Kt lun\n\nTham kho:\n\n[1] [https://guides.rubyonrails.org/autoloading_and_reloading_constants.html](https://guides.rubyonrails.org/autoloading_and_reloading_constants.html)\n","slug":"2019-05-15-require-load-include-va-extend-trong-ruby","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsat001cp3m25opih4xm","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Khc vi rails, mt framework  c h tr autoloading, mt chng trnh ruby n thun khng c c ch .  s dng nhng m ngun ph thuc ta phi gi chng ti file hin ti bng method <strong>require</strong> hoc <strong>load</strong>. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p> mt vn  khc trong ruby,  l ngn ng ny khng h tr a k tha, thay vo  chng c 1 c ch gi l <strong>mixin</strong>  c th s dng cc phng thc trong nhiu <strong>moudle</strong> khc nhau. Ta s dng 2 method l <strong>include</strong> v <strong>extend</strong>  hin thc ho iu ny.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-So-sanh-require-va-require-relative\"><a href=\"#1-So-sanh-require-va-require-relative\" class=\"headerlink\" title=\"1. So snh require v require_relative\"></a>1. So snh require v require_relative</h2><p>Trong tiu  bi vit khng h  cp n <strong>require_relative</strong> vy sao gi phi tm hiu v n? Cu tr li nm  cch m phng thc <strong>require</strong> hot ng.</p>\n<p>Tr li v d trong mc t vn , gi s c 2 file <strong>cat.rb</strong> v <strong>animal.rb</strong> nm trong cng mt th mc:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>cat.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>animal.rb</span><br></pre></td></tr></table></figure>\n\n<p>Cu hi t ra l liu on m trong phn t vn  c work vi cu trc file nh ny hay khng? C hoc khng,  l cu tr li.</p>\n<p>Khc vi mng tng ban u rng phng thc require cng s bt u tm file t th mc gc (th mc cha file gi method) th thc t reuire tm kim file bng mt cch khc.</p>\n<p>N s tm n bin global <strong>$LOAD_PATH</strong>, bin ny l mt ng dn, phng thc require s tm n ng dn ny v coi th mc  l gc, n s tm kim nhng file c reque bt u t th mc . Trong ln u tin n tm thy th ruby s dng chng trnh  y v load file va tm c ln. Nu tm ht cc ng dn trong $LOAD_PATH v vn khng thy th <strong>LoadError</strong> s c gi ti.</p>\n<p>Tr v vi cu hi bn trn, on code ca chng ta work khi bin <strong>$LOAD_PATH</strong> c nh ngha, v n l ng dn ti th mc ang lm vic (chnh l folder app).</p>\n<p>Trong tt c cc trng hp cn li, nh khi bin ny cha c nh ngha hay n li li mt ng dn n mt folder khc, th on m khi u ca chng ta khng th chy (v require khng tm c file tng ng theo yu cu).</p>\n<p>Th bn nhn c khi ny ch l mt thng bo li <strong>cannot load such file  animal.rb (LoadError)</strong>.</p>\n<p><strong>Gii quyt vn  trn bng cch no?</strong></p>\n<p>Ta s c th dng 2 cch:</p>\n<p>Cch 1: in thm th mc ang lm vic vo gi tr ca bin <strong>$LOAD_PATH</strong>, khi ny th on m chng ta s sa li nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ni thm ng dn th mc hin ti vo gi tr hin ti ca bin $LOAD_PATH</span></span><br><span class=\"line\">$LOAD_PATH &lt;&lt; File.join(File.dirname(__FILE_<span class=\"number\">_</span>)</span><br><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Cch 2: S dng <strong>require_relative</strong> thay th cho require, sa li on m nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>C hai phng php trn u hot ng bnh thng.</p>\n<blockquote>\n<p>$: l mt cch vit tt cho $LOAD_PATH</p>\n</blockquote>\n<h2 id=\"2-So-sanh-require-va-load\"><a href=\"#2-So-sanh-require-va-load\" class=\"headerlink\" title=\"2. So snh require v load\"></a>2. So snh require v load</h2><p>Nh trong mc 1  ni v require, thc cht load c cch hot ng v mc ch s dng rt ging vi require. C 2 u c dng  gi nhng on m cn thit vo file hin ti ang lm vic, nh vic bn mun import thm mt file js vo file html ang lm vic no .</p>\n<p>Tuy nhin gia chng c mt im khc nhau c bn, m t   dn ti mt li khuyn v vic s dng chng nh sau:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Moreover, Kernel<span class=\"comment\">#require loads files once, but development is much more smooth</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> code gets refreshed when <span class=\"keyword\">it</span> changes <span class=\"keyword\">without</span> restarting <span class=\"keyword\">the</span> server.</span><br><span class=\"line\">It would be nice <span class=\"built_in\">to</span> be able <span class=\"built_in\">to</span> use Kernel<span class=\"comment\">#load in development,</span></span><br><span class=\"line\"><span class=\"keyword\">and</span> Kernel<span class=\"comment\">#require in production.</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>- trch dn guides.rubyonrails -</strong></p>\n<p>:arrow_right: iu rt ra  y l:</p>\n<p>:one: require s c v load file c gi mt ln duy nht.</p>\n<p>:two: load s c v load file c gi mi khi file  c chy.</p>\n<p>T  dn n vic l load s hu dng khi lm vic ti mi trng development hn, ni m thay i din ra lin tc, cn require thch hp khi trin khai ln production.</p>\n<p>Note: Sau khi bn chy ti method require, n s c file bn require v lu ti b nh, nhng ln tip theo khi bn chy ti file , n s c ni dung t b nh (m n  lu li ti ln load u tin), iu ny gip tng performance v khng phi lood li file ln na, nhng ng ngha vi  l nhng thay i sau  ti file require s khng c load khi chy.</p>\n<h2 id=\"3-So-sanh-include-va-extend\"><a href=\"#3-So-sanh-include-va-extend\" class=\"headerlink\" title=\"3. So snh include v extend\"></a>3. So snh include v extend</h2><p>Khng c nhiu lin h vi hai mc u, 2 phng thc c  cp trong mc 3  gii quyt bi tan mixin trong ruby, nh  c ln ti trnh by khi qut <a href=\"https://hdchinh.com/post/2019-02-24-ruby-method-lookup/\" target=\"_blank\" rel=\"noopener\">ti y</a>.</p>\n<p>C v v cao hng chm gi title qu, m ti qun mt  vit v hai phng thc ny mt ln, v hin ti vn cha c g  b sung thm, nu cn hy c li bi vit tham kho bn trn nh.</p>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p>Tham kho:</p>\n<p>[1] <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" target=\"_blank\" rel=\"noopener\">https://guides.rubyonrails.org/autoloading_and_reloading_constants.html</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Khc vi rails, mt framework  c h tr autoloading, mt chng trnh ruby n thun khng c c ch .  s dng nhng m ngun ph thuc ta phi gi chng ti file hin ti bng method <strong>require</strong> hoc <strong>load</strong>. V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p> mt vn  khc trong ruby,  l ngn ng ny khng h tr a k tha, thay vo  chng c 1 c ch gi l <strong>mixin</strong>  c th s dng cc phng thc trong nhiu <strong>moudle</strong> khc nhau. Ta s dng 2 method l <strong>include</strong> v <strong>extend</strong>  hin thc ho iu ny.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-So-sanh-require-va-require-relative\"><a href=\"#1-So-sanh-require-va-require-relative\" class=\"headerlink\" title=\"1. So snh require v require_relative\"></a>1. So snh require v require_relative</h2><p>Trong tiu  bi vit khng h  cp n <strong>require_relative</strong> vy sao gi phi tm hiu v n? Cu tr li nm  cch m phng thc <strong>require</strong> hot ng.</p>\n<p>Tr li v d trong mc t vn , gi s c 2 file <strong>cat.rb</strong> v <strong>animal.rb</strong> nm trong cng mt th mc:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>cat.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>animal.rb</span><br></pre></td></tr></table></figure>\n\n<p>Cu hi t ra l liu on m trong phn t vn  c work vi cu trc file nh ny hay khng? C hoc khng,  l cu tr li.</p>\n<p>Khc vi mng tng ban u rng phng thc require cng s bt u tm file t th mc gc (th mc cha file gi method) th thc t reuire tm kim file bng mt cch khc.</p>\n<p>N s tm n bin global <strong>$LOAD_PATH</strong>, bin ny l mt ng dn, phng thc require s tm n ng dn ny v coi th mc  l gc, n s tm kim nhng file c reque bt u t th mc . Trong ln u tin n tm thy th ruby s dng chng trnh  y v load file va tm c ln. Nu tm ht cc ng dn trong $LOAD_PATH v vn khng thy th <strong>LoadError</strong> s c gi ti.</p>\n<p>Tr v vi cu hi bn trn, on code ca chng ta work khi bin <strong>$LOAD_PATH</strong> c nh ngha, v n l ng dn ti th mc ang lm vic (chnh l folder app).</p>\n<p>Trong tt c cc trng hp cn li, nh khi bin ny cha c nh ngha hay n li li mt ng dn n mt folder khc, th on m khi u ca chng ta khng th chy (v require khng tm c file tng ng theo yu cu).</p>\n<p>Th bn nhn c khi ny ch l mt thng bo li <strong>cannot load such file  animal.rb (LoadError)</strong>.</p>\n<p><strong>Gii quyt vn  trn bng cch no?</strong></p>\n<p>Ta s c th dng 2 cch:</p>\n<p>Cch 1: in thm th mc ang lm vic vo gi tr ca bin <strong>$LOAD_PATH</strong>, khi ny th on m chng ta s sa li nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ni thm ng dn th mc hin ti vo gi tr hin ti ca bin $LOAD_PATH</span></span><br><span class=\"line\">$LOAD_PATH &lt;&lt; File.join(File.dirname(__FILE_<span class=\"number\">_</span>)</span><br><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Cch 2: S dng <strong>require_relative</strong> thay th cho require, sa li on m nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'animal'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span></span></span><br><span class=\"line\">    @cat = Animal.new</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>C hai phng php trn u hot ng bnh thng.</p>\n<blockquote>\n<p>$: l mt cch vit tt cho $LOAD_PATH</p>\n</blockquote>\n<h2 id=\"2-So-sanh-require-va-load\"><a href=\"#2-So-sanh-require-va-load\" class=\"headerlink\" title=\"2. So snh require v load\"></a>2. So snh require v load</h2><p>Nh trong mc 1  ni v require, thc cht load c cch hot ng v mc ch s dng rt ging vi require. C 2 u c dng  gi nhng on m cn thit vo file hin ti ang lm vic, nh vic bn mun import thm mt file js vo file html ang lm vic no .</p>\n<p>Tuy nhin gia chng c mt im khc nhau c bn, m t   dn ti mt li khuyn v vic s dng chng nh sau:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Moreover, Kernel<span class=\"comment\">#require loads files once, but development is much more smooth</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> code gets refreshed when <span class=\"keyword\">it</span> changes <span class=\"keyword\">without</span> restarting <span class=\"keyword\">the</span> server.</span><br><span class=\"line\">It would be nice <span class=\"built_in\">to</span> be able <span class=\"built_in\">to</span> use Kernel<span class=\"comment\">#load in development,</span></span><br><span class=\"line\"><span class=\"keyword\">and</span> Kernel<span class=\"comment\">#require in production.</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>- trch dn guides.rubyonrails -</strong></p>\n<p>:arrow_right: iu rt ra  y l:</p>\n<p>:one: require s c v load file c gi mt ln duy nht.</p>\n<p>:two: load s c v load file c gi mi khi file  c chy.</p>\n<p>T  dn n vic l load s hu dng khi lm vic ti mi trng development hn, ni m thay i din ra lin tc, cn require thch hp khi trin khai ln production.</p>\n<p>Note: Sau khi bn chy ti method require, n s c file bn require v lu ti b nh, nhng ln tip theo khi bn chy ti file , n s c ni dung t b nh (m n  lu li ti ln load u tin), iu ny gip tng performance v khng phi lood li file ln na, nhng ng ngha vi  l nhng thay i sau  ti file require s khng c load khi chy.</p>\n<h2 id=\"3-So-sanh-include-va-extend\"><a href=\"#3-So-sanh-include-va-extend\" class=\"headerlink\" title=\"3. So snh include v extend\"></a>3. So snh include v extend</h2><p>Khng c nhiu lin h vi hai mc u, 2 phng thc c  cp trong mc 3  gii quyt bi tan mixin trong ruby, nh  c ln ti trnh by khi qut <a href=\"https://hdchinh.com/post/2019-02-24-ruby-method-lookup/\" target=\"_blank\" rel=\"noopener\">ti y</a>.</p>\n<p>C v v cao hng chm gi title qu, m ti qun mt  vit v hai phng thc ny mt ln, v hin ti vn cha c g  b sung thm, nu cn hy c li bi vit tham kho bn trn nh.</p>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p>Tham kho:</p>\n<p>[1] <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" target=\"_blank\" rel=\"noopener\">https://guides.rubyonrails.org/autoloading_and_reloading_constants.html</a></p>\n"},{"title":"C Ch Autoloading V Reloading","date":"2019-04-16T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n## t vn \n\n```ruby\nclass CatsController < ApplicationController\n  # do something\nend\n```\n\non m trn l mt on m rt quen thuc khi s dng rails framework, mt cu hi  l ti sao trong class CatsController khng require file cha class ApplicationController nhng ta vn c th s dng. Cu tr li nm  vic rails c c ch autoloading mt s folder nht nh  support cho vic coding v vn hnh, bi vit ny s nu mt cch khi qut v gii php ny trong rails.\n\n## Lun bn\n\nNh bi vit trc   cp v cch m phng thc require hot ng:\n\n1. Tm file c require theo cc ng dn c lu trong bin $LOAD_PATH (bin ny l 1 mng cc ng dn).\n\n2. Khi tm c file tng ng th dng qu trnh tm file v bt u load file tm c vo b nh.\n\n3. Nu tm ht cc ng dn v khng thy th gi ti LoadError.\n\n**autoload_paths** l mt tp hp cc th mc c t ng load m khng cn require. Mc nh th autoload_paths s cha cc th mc sau:\n\n1. Tt c cc th mc con cp 1 ca th mc app, v d nh app/controllers, app/views...\n\n2. Tt c cc th mc cp 2 tn l concerns trong app, v d nh app/helpers/concerns, app/lib/concerns...\n\n3. Th mc test/mailers/previews.\n\nTa c th xem danh sch ny bng cu lnh:\n\n**bin/rails r 'puts ActiveSupport::Dependencies.autoload_paths'**\n\n**eager_load_paths** hon ton ging nh khi nim v autoload_paths  nu  trn. im chng ta cn lu   l:\n\n1. Nhng th mc nm trong eager_load_paths s c load mt ln duy nht TRC khi ng dng ca bn khi chy.\n\n2. Nhng th mc nm trong autoload_paths s c s dng  tm kim khi chng trnh ANG CHY v gp 1 t kho cha c nh ngha trong file hin ti.\n\nTa c 2 t in hoa,  l phn quan trng,  m bo tnh nht qun v hot ng mt cch n nh v chnh xc, trong mi trng production ta s dng eager_load_paths  load ton b nhng file cn thit cho cc h thng cn th s dng, cn  mi trng pht trin,  khi chy ng dng nhanh chng hn v d dng cp nht cc thay i th ta s dng autoload_paths.\n\nVic thit lp ny ph thuc vo cu hnh ca bn trong th mc **app/config/envirements/...** vi 2 cu hnh l:\n\n1. config.cache_classes\n\n2. config.eager_load\n\n## Kt lun\n\nTham kho:\n\n[1] [autoloading_and_reloading_constants](https://guides.rubyonrails.org/autoloading_and_reloading_constants.html)\n","source":"_posts/2019-05-16-autoloading-va-reloading-constants-trong-rails.md","raw":"---\ntitle: \"C Ch Autoloading V Reloading\"\ndate: 2019-04-17\ndraft: false\ntags: [\"rails\"]\ncategories: [\"rails notes\"]\nmytag: \"#TIL\"\n---\n\n## t vn \n\n```ruby\nclass CatsController < ApplicationController\n  # do something\nend\n```\n\non m trn l mt on m rt quen thuc khi s dng rails framework, mt cu hi  l ti sao trong class CatsController khng require file cha class ApplicationController nhng ta vn c th s dng. Cu tr li nm  vic rails c c ch autoloading mt s folder nht nh  support cho vic coding v vn hnh, bi vit ny s nu mt cch khi qut v gii php ny trong rails.\n\n## Lun bn\n\nNh bi vit trc   cp v cch m phng thc require hot ng:\n\n1. Tm file c require theo cc ng dn c lu trong bin $LOAD_PATH (bin ny l 1 mng cc ng dn).\n\n2. Khi tm c file tng ng th dng qu trnh tm file v bt u load file tm c vo b nh.\n\n3. Nu tm ht cc ng dn v khng thy th gi ti LoadError.\n\n**autoload_paths** l mt tp hp cc th mc c t ng load m khng cn require. Mc nh th autoload_paths s cha cc th mc sau:\n\n1. Tt c cc th mc con cp 1 ca th mc app, v d nh app/controllers, app/views...\n\n2. Tt c cc th mc cp 2 tn l concerns trong app, v d nh app/helpers/concerns, app/lib/concerns...\n\n3. Th mc test/mailers/previews.\n\nTa c th xem danh sch ny bng cu lnh:\n\n**bin/rails r 'puts ActiveSupport::Dependencies.autoload_paths'**\n\n**eager_load_paths** hon ton ging nh khi nim v autoload_paths  nu  trn. im chng ta cn lu   l:\n\n1. Nhng th mc nm trong eager_load_paths s c load mt ln duy nht TRC khi ng dng ca bn khi chy.\n\n2. Nhng th mc nm trong autoload_paths s c s dng  tm kim khi chng trnh ANG CHY v gp 1 t kho cha c nh ngha trong file hin ti.\n\nTa c 2 t in hoa,  l phn quan trng,  m bo tnh nht qun v hot ng mt cch n nh v chnh xc, trong mi trng production ta s dng eager_load_paths  load ton b nhng file cn thit cho cc h thng cn th s dng, cn  mi trng pht trin,  khi chy ng dng nhanh chng hn v d dng cp nht cc thay i th ta s dng autoload_paths.\n\nVic thit lp ny ph thuc vo cu hnh ca bn trong th mc **app/config/envirements/...** vi 2 cu hnh l:\n\n1. config.cache_classes\n\n2. config.eager_load\n\n## Kt lun\n\nTham kho:\n\n[1] [autoloading_and_reloading_constants](https://guides.rubyonrails.org/autoloading_and_reloading_constants.html)\n","slug":"2019-05-16-autoloading-va-reloading-constants-trong-rails","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsau001gp3m20s2u9j6i","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CatsController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>on m trn l mt on m rt quen thuc khi s dng rails framework, mt cu hi  l ti sao trong class CatsController khng require file cha class ApplicationController nhng ta vn c th s dng. Cu tr li nm  vic rails c c ch autoloading mt s folder nht nh  support cho vic coding v vn hnh, bi vit ny s nu mt cch khi qut v gii php ny trong rails.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><p>Nh bi vit trc   cp v cch m phng thc require hot ng:</p>\n<ol>\n<li><p>Tm file c require theo cc ng dn c lu trong bin $LOAD_PATH (bin ny l 1 mng cc ng dn).</p>\n</li>\n<li><p>Khi tm c file tng ng th dng qu trnh tm file v bt u load file tm c vo b nh.</p>\n</li>\n<li><p>Nu tm ht cc ng dn v khng thy th gi ti LoadError.</p>\n</li>\n</ol>\n<p><strong>autoload_paths</strong> l mt tp hp cc th mc c t ng load m khng cn require. Mc nh th autoload_paths s cha cc th mc sau:</p>\n<ol>\n<li><p>Tt c cc th mc con cp 1 ca th mc app, v d nh app/controllers, app/views</p>\n</li>\n<li><p>Tt c cc th mc cp 2 tn l concerns trong app, v d nh app/helpers/concerns, app/lib/concerns</p>\n</li>\n<li><p>Th mc test/mailers/previews.</p>\n</li>\n</ol>\n<p>Ta c th xem danh sch ny bng cu lnh:</p>\n<p><strong>bin/rails r puts ActiveSupport::Dependencies.autoload_paths</strong></p>\n<p><strong>eager_load_paths</strong> hon ton ging nh khi nim v autoload_paths  nu  trn. im chng ta cn lu   l:</p>\n<ol>\n<li><p>Nhng th mc nm trong eager_load_paths s c load mt ln duy nht TRC khi ng dng ca bn khi chy.</p>\n</li>\n<li><p>Nhng th mc nm trong autoload_paths s c s dng  tm kim khi chng trnh ANG CHY v gp 1 t kho cha c nh ngha trong file hin ti.</p>\n</li>\n</ol>\n<p>Ta c 2 t in hoa,  l phn quan trng,  m bo tnh nht qun v hot ng mt cch n nh v chnh xc, trong mi trng production ta s dng eager_load_paths  load ton b nhng file cn thit cho cc h thng cn th s dng, cn  mi trng pht trin,  khi chy ng dng nhanh chng hn v d dng cp nht cc thay i th ta s dng autoload_paths.</p>\n<p>Vic thit lp ny ph thuc vo cu hnh ca bn trong th mc <strong>app/config/envirements/</strong> vi 2 cu hnh l:</p>\n<ol>\n<li><p>config.cache_classes</p>\n</li>\n<li><p>config.eager_load</p>\n</li>\n</ol>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p>Tham kho:</p>\n<p>[1] <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" target=\"_blank\" rel=\"noopener\">autoloading_and_reloading_constants</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CatsController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>on m trn l mt on m rt quen thuc khi s dng rails framework, mt cu hi  l ti sao trong class CatsController khng require file cha class ApplicationController nhng ta vn c th s dng. Cu tr li nm  vic rails c c ch autoloading mt s folder nht nh  support cho vic coding v vn hnh, bi vit ny s nu mt cch khi qut v gii php ny trong rails.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><p>Nh bi vit trc   cp v cch m phng thc require hot ng:</p>\n<ol>\n<li><p>Tm file c require theo cc ng dn c lu trong bin $LOAD_PATH (bin ny l 1 mng cc ng dn).</p>\n</li>\n<li><p>Khi tm c file tng ng th dng qu trnh tm file v bt u load file tm c vo b nh.</p>\n</li>\n<li><p>Nu tm ht cc ng dn v khng thy th gi ti LoadError.</p>\n</li>\n</ol>\n<p><strong>autoload_paths</strong> l mt tp hp cc th mc c t ng load m khng cn require. Mc nh th autoload_paths s cha cc th mc sau:</p>\n<ol>\n<li><p>Tt c cc th mc con cp 1 ca th mc app, v d nh app/controllers, app/views</p>\n</li>\n<li><p>Tt c cc th mc cp 2 tn l concerns trong app, v d nh app/helpers/concerns, app/lib/concerns</p>\n</li>\n<li><p>Th mc test/mailers/previews.</p>\n</li>\n</ol>\n<p>Ta c th xem danh sch ny bng cu lnh:</p>\n<p><strong>bin/rails r puts ActiveSupport::Dependencies.autoload_paths</strong></p>\n<p><strong>eager_load_paths</strong> hon ton ging nh khi nim v autoload_paths  nu  trn. im chng ta cn lu   l:</p>\n<ol>\n<li><p>Nhng th mc nm trong eager_load_paths s c load mt ln duy nht TRC khi ng dng ca bn khi chy.</p>\n</li>\n<li><p>Nhng th mc nm trong autoload_paths s c s dng  tm kim khi chng trnh ANG CHY v gp 1 t kho cha c nh ngha trong file hin ti.</p>\n</li>\n</ol>\n<p>Ta c 2 t in hoa,  l phn quan trng,  m bo tnh nht qun v hot ng mt cch n nh v chnh xc, trong mi trng production ta s dng eager_load_paths  load ton b nhng file cn thit cho cc h thng cn th s dng, cn  mi trng pht trin,  khi chy ng dng nhanh chng hn v d dng cp nht cc thay i th ta s dng autoload_paths.</p>\n<p>Vic thit lp ny ph thuc vo cu hnh ca bn trong th mc <strong>app/config/envirements/</strong> vi 2 cu hnh l:</p>\n<ol>\n<li><p>config.cache_classes</p>\n</li>\n<li><p>config.eager_load</p>\n</li>\n</ol>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun\"></a>Kt lun</h2><p>Tham kho:</p>\n<p>[1] <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" target=\"_blank\" rel=\"noopener\">autoloading_and_reloading_constants</a></p>\n"},{"title":"Tng Quan Nguyn L SOLID","date":"2019-05-16T17:00:00.000Z","draft":false,"_content":"\n## 1. nh ngha v mc tiu s dng\n\n![hoa](/images/solid.png)\n\nTrc tin, hy xem SOLID l vit tt ca nhng cm t g.\n\n**1:** **S**ingle Responsibility Principle\n\n**2:** **O**pen/Closed Principle\n\n**3:** **L**iskov Substitution Principle\n\n**4:** **I**nterface Segregation Principle\n\n**5:** **D**ependency Inversion Principle\n\nHn lm l vy nhng  d nh th ti gi chng ngn gn l: **S**ingle, **O**pen, **L**iskov, **I**nterface v **D**ependency.\n\nV mc tiu  ci nguyn l ny c mt trn ci i, u cng l xut pht t nhu cu lm t hn ca con ngi, vic code khng c h thng khin cc nh pht trin tn nhiu thi gian bo tr v d pht sinh li trong qu trnh s dng.\n gim bt gnh nng ny cc nh pht trin  c ng li mt s khun kh, cch thc lp trnh m di gc nhn v kinh nghim ca nhiu ngi, cc khun kh cch thc  gip cho vic bo tr tr nn d dng hn, h thng t pht sinh li ngoi  mun hn. Mt trong s  l h thng cc nguyn tc trong SOLID.\n\nGi s ti phi x l mt bi ton tnh promotion cho mt ng dng thng mi in t. y s l v d ta dng n trong cc phn pha di. Gi s cu trc d n hin ti nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n```\n\nTrong  signin cha m ngun thc hin chc nng ng nhp, signup cha m thc hin chc nng ng k v checkout cha m thc hin chc nng thanh ton.\n\n## 2. **S**ingle Responsibility Principle\n\n![hoa](/images/srp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> Every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class.\n\niu cn quan tm  y l single responsibility c th hiu l g? Ngha ca responsibility l 'trch nhim', vy 'trch nhim' trong code l g?\n\nTa c th hiu n ng ngha vi 'chc nng' hay khng? C gi s nh ta c th hiu n l 'chc nng' vy khi  th nguyn l ny c th pht biu li thnh nh sau:\n\n> Mi class nn ch mang mt chc nng nht nh, v chc nng  phi c ng gi trong class ny.\n\nBy gi th  d hiu hn nhiu, quay tr v v d, chng ta cn vit mt chc nng tnh promotion. Ta c th  vit chc nng ny vo u?\n\nCu tr li n gin nht l chng ta vit chc nng ny lun vo file checkout.rb, khi thc hin chc nng thanh ton th s dng lun cc method tnh promotion trong . Mi chuyn tht n gin phi khng? iu ny c vi phm nguyn tc SRP khng?\n\nNu ti ni l khng vi phm? Din gii ca ti nh sau: Trch nhim ca ci module/class Checkout l thanh ton nhng mt hng bn  b vo cart, vy promotion cng ch mt step trong qu trnh thanh ton, nn nu ti vit code promotion trong module/class Checkout th ti vi phm nguyn tc SRP ch no?  Checkout vn ang lm ng v duy nht mt 'trch nhim'  l gip thanh ton n hng v promotion ch l phn ph tr cho qu trnh  hay ni cch khc promotion ch l mt bc trong nhiu bc ca qu trnh thanh ton.\n\nVy ti c sai khi ni vy khng? Bn c th chng minh l ti sai nguyn l SRP c hay khng?\n\n1. Ti nghe nhiu ngi ni y l nguyn tc d nht trong SOLID, theo ti n ch l nguyn tc m nh ngha d hc thuc nht m thi.\n\n2. Responsibility th hy hiu n l responsibility (hay hiu n l ng ng ngha l trch nhim). Khng nh ng responsibility thnh 'chc nng' nh trn.\n\n3. Ni dung nguyn l ch c tnh tng i, n ph thuc hon ton vo ci m bn xem l mt responsibility.\n\n nh gi u, ci g l mt responsibility th c l iu kin cn l phi c  kinh nghim. Tr li v d, ti c th coi promotion l mt responsibility ring r vi chc nng thanh ton. Khi  t chc code ca ti nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion.rb\n```\n\nNh ny  phi l cch tt nht? Cu tr li l tu ng iu hon cnh, gi s nu chc nng promotion c nhiu rule khc nhau th vic b tt c function tnh promotion vo 1 file promotion.rb c v khng phi l mt cch hay. Khi  ta t chc li nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion\n    - promotion_type_a.rb\n    - promotion_type_b.rb\n    - promotion_type_c.rb\n```\n\nCch t chc ny  l tt nht hay cha? cu tr li l cha chc, mi th li ph thuc vo ng cnh.\nNguyn l SRP c th sai hay ng trong mt s trng hp l rt mp m, tu theo ci m nh pht trin nh ngha cho responsibility m h xy dng.\n\nNote: Nhng cui cng nguyn l SRP cng ch c mt mc ch duy nht  cu trc d n d sa i v bo tr, v vy trong tng tnh hung s c nhng cch khc nhau  phn chia t chc m ngun, da vo chc nng, da vo yu cu khch hng, da vo tim nng pht trin d n...\n\n## 3. **O**pen/Closed Principle\n\n![hoa](/images/ocp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> One software entity (class/module) must be open for extension but closed for modification.\n\nHiu n gin:\n\n> Mt class/module cn phi c th m rng, nhng khng/khng nn sa i n.\n\nV sao nguyn l ny li yu cu nh vy? vic ti mun m rng hay ti sa i mt ci class th c nh hng g u m cng nh?\n\nng l nh vy, trong phn ln qu trnh pht trin nhng ng dng c nhn n gin th vic chng ta c thm, xo, sa hay m rng mt class/module a phn u khng mang li hu qu g ngoi  mun.\n\nNhng ng cnh m nguyn l ny hng ti l nhng ng dng thc s trong cuc sng,   nhng ng dng ny s ln, ri rm v c business khng h n gin. Mt im na l d n  khi ti tay bn  c th tri qua 5, 7 ln i team pht trin v nhng g bn thy l thnh qu ca c mt qu trnh pht trin tnh nng v maintain trong n v tnh bng nm.\n\nLiu bn c nm ht c flow hot ng ca tng on m, tng file tng class hay khng? Nht nh l khng ri.\n\n chnh l l do m nguyn l OCP ra i, khi h thng phc tp v bn khng nm c ht tt c nhng g s xy ra sau khi bn thay i m ngun ti mt class/module. Hy ng thay i,  trnh lm nh hng n mt phn logic tim tng no . Thay vo  hy m rng class/module , m rng  b sung tnh nng bn cn m cn gip khng nh hng n nhng phn code c khng sai lch v logic lun l (V n c th vn ang s dng chc nng c, liu bn c cover c ht  sa i tt c cc trng hp c th xy ra hay khng?).\n\n> V vy hy u tin m rng mt class/module khi cn pht trin thm hay thay i tnh nng, hn ch v hy tht cn thn khi cn sa i m ngun c sn (chnh l sa i class/module).\n\nMc tiu ca nguyn l l vy, rt d hiu, hy cng tho lun v mt v d trc khi sang phn tip theo:\n\nLi quay tr li v d v bi ton promotion, gi s ti l chn cu trc chng trnh nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion.rb\n```\n\nNh  trnh by  trn, cu trc nh ny v l thuyt th cng ch ai bo l ti vi phm nguyn tc s 1 SRP c. Gi s ni dung ca file promotion.rb nh sau:\n\n```ruby\nclass Promotion\n  def promotion_type_a\n    # implement rule promotion type a\n  end\n\n  def promotion_type_b\n    # implement rule promotion type b\n  end\nend\n```\n\nVy by gi khi ti mun thm mt rule tnh promotion mi, th ti s phi sa i file promotion.rb ny, v nguyn tc n  vi phm nguyn l s 2 OCP (m  m rng ch khng phi  sa i).\n\n khc phc ta c th cu trc li m ngun nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion\n    - promotion.rb\n    - promotion_type_a.rb\n    - promotion_type_b.rb\n    - promotion_type_c.rb\n```\n\nV khi ny, khi ti cn thm mi 1 rule promotion, ti s to mt file mi trong th mc promotion, vi ni dung k tha t class Promotion.\n\nV d b sung thm rule promotion_type_x.rb vi ni dung:\n\n```ruby\nclass PromotionTypeX < Promotion\n  # do something\nend\n```\n\n## 4. **L**iskov Substitution Principle\n\n![hoa](/images/lsp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).\n\nHiu n gin l:\n\n> Bn c class A l con ca class B, th instance ca class A phi thay th c cho instance ca class B trong m ngun m khng gy ra sai xt no (khng li v khng sai ng ngha).\n\nMt v d n gin nh sau:\n\n```ruby\nclass Animal\n  def animal_hello\n    puts \"Animal say hello\"\n  end\nend\n\nclass Cat < Animal\n  def cat_hello\n    puts \"Cat say hello\"\n  end\nend\n```\n\non m trn l mt on m hp l vi nguyn l Liskov v:\n\n```ruby\ntemp = Animal.new\ntemp.animal_hello\n# kt qu tr v l: \"Animal say hello\"\n\ntemp = Cat.new\ntemp.animal_hello\n# kt qu tr v vn l: \"Animal say hello\"\n```\n\nNh bn thy, kt qu tr v khng thay i khi ta dng instance ca class Cat thay cho instance class cha ca n l Animal, v vy l nguyn l Liskov c bo ton tnh ng n ca n.\n\nHy th mt on m ngun khc nh sau:\n\n```ruby\nclass Animal\n  def animal_hello\n    puts \"Animal say hello\"\n  end\nend\n\nclass Cat < Animal\n  def animal_hello\n    puts \"Cat say hello\"\n  end\nend\n```\n\ny l on m vi phm nguyn tc ca Liskov, khi ny ta c:\n\n```ruby\ntemp = Animal.new\ntemp.animal_hello\n# kt qu tr v l: \"Animal say hello\"\n\ntemp = Cat.new\ntemp.animal_hello\n# kt qu tr v l: \"Cat say hello\"\n```\n\nTa c th thy, instance ca class Cat khi gi ti method animal_hello  khng cn tr v kt qu tng t nh mt instance Animal na ri, v l do  class Cat, class ny  override li phng thc animal_hello, v t  dn ti vi phm nguyn tc Liskov.\n\n## 5. **I**nterface Segregation Principle\n\n![hoa](/images/isp.png)\n\nNguyn l ny c pht biu nh sau:\n\n> No client should be forced to depend on methods it does not use.\n\nHiu n gin l:\n\n> Nu bn l mt i tng no  trong m ngun, hy m bo l bn phi/ch lm nhng cng vic m bn phi/c th lm. Khng trao cho bn nhng kh nng m bn khng cn.\n\nTh mt v d n gin, bn l mt hc sinh c giao nhim v trc nht lp, c gio bn phi m bo rng bn ch c trao cha kho m ca phng hc ca bn, ch khng trao cho bn nhng cha kho khc (nh cha kho cc lp hc khc, phng tin hc, phng gio vin...), y l nhng cng vic ca nhng c nhn khc.\n\nNu bn c trao nhng cng vic ca ngi khc, c th bn s to ra nhng sai lm khng th sa i c. V vy hy lm ng cng vic ca mnh.\n\nHy bt u vi mt v d:\n\nTa c mt class Animal.\n\n```ruby\nclass Animal\n  include AnimalHelper\n  # do something\nend\n```\n\nClass Animal bn trn include module di y.\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\nend\n```\n\nMi chuyn n ch? Rt n, 3 method hin c trong module AnimalHelper l 3 method h tr cho class Animal.\n\nVy by gi ti c thm mt class na nh sau:\n\n```ruby\nclass YellowCat\n  # do something\nend\n```\n\nClass ny cn mt phng thc support tn l **yellow_cat_helper**, ti s vit thm method ny vo module AnimalHelper v include module AnimalHelper vo class YellowCat vy l ng v  yu cu. Khi ny module AnimalHelper v class YellowCat s tr thnh nh sau:\n\nClass YellowCat\n\n```ruby\nclass YellowCat\n  include AnimalHelper\n  # do something\nend\n```\n\nModule AnimalHelper\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\n\n  # add new method for YellowCat\n  def yellow_cat_helper\n    # do something\n  end\nend\n```\n\nMi chuyn gi vn n ch? Khng, by gi th khng n na ri n  vi phm nguyn tc SOLID th 4, ch \"I\" m chng ta ang xt.\n\nV sao?\n\nV class Animal u c cn method **yellow_cat_helper**, cn class YellowCat u c cn 3 method **animal_helper_a**, **animal_helper_b**, **animal_helper_c** ny u?\n\nVy m chng vn c th s dng nhng method m chng vn khng cn, v l do ta vit chung tt c method vo mt module v include module vo tng class.\n\nY nh v d bn trn: Bn cn trc nht lp 1A thi m, c gio bn a cho bn trm cha kho ca c trng lm g? Cm th nng, m nh u bn ~~tt mt~~ nghch di th hu qu khn lng.\n\nVy  khng vi phm nguyn tc ny ta c th sa li m ngun nh sau:\n\nClass Animal\n\n```ruby\nclass Animal\n  include AnimalHelper\n  # do something\nend\n```\n\nModule Animal\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\nend\n```\n\nClass YellowCat\n\n```ruby\nclass YellowCat\n  include YellowCatHelper\n  # do something\nend\n```\n\nV gi ta to mt module mi  YellowCat include\n\n```ruby\nmodule YellowCatHelper\n  def yellow_cat_helper\n    # do something\n  end\nend\n```\n\nOk, vy l look good ri :smile: Lc ny class Animal ch c include nhng method m n cn v class YellowCat cng vy.\n\n## 6. **D**ependency Inversion Principle\n\n![hoa](/images/dip.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> 1. High-level modules should not depend on low-level modules. Both should depend on abstractions.\n> 2. Abstractions should not depend upon details. Details should depend upon abstractions.\n\nDch st ngha s l:\n\n> 1. Module cp cao khng nn ph thuc vo module cp thp hn. C hai nn ph thuc vo abstractions.\n> 2. Abstractions khng nn ph thuc vo details. Details nn ph thuc vo abstractions\n\nQuay tr li v d promotion ban u, gi s ta vit m ngun nh sau:\n\n```ruby\n# app/checkout.rb\nclass Checkout\n  def get_bill(cart)\n    PromotionTypeA.promotion_type_a(cart)\n  end\nend\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeA\n  def self.promotion_type_a(cart)\n    # do something\n  end\nend\n```\n\nTrong on m ngun trn y, method get_bill trong class Checkout ph thuc vo class PromotionTypeA. R rng l nh vy, cu hi l nu ta c PromotionTypeB, PromotionTypeC... Th phi lm sao?\n\nChng ta s phi vit 3 method get_bill ng vi PromotionTypeA, PromotionTypeB v PromotionTypeC hay sao?\n\n cng l mt cch, nhng  l cch  vi phm nguyn l DIP, khi m cc module ph thuc ln nhau.\n\n gii quyt vn  ny ta c th vit li m ngun nh sau:\n\n```ruby\n# app/checkout.rb\nclass Checkout\n  def get_bill(cart, PromotionType)\n    PromotionType.get_promotion(cart)\n  end\nend\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeA\n  def self.get_promotion(cart)\n    # do something\n  end\nend\n\n# get_bill vi PromotionTypeA\nCheckout.new.get_bill(cart, PromotionTypeA)\n\n#  vit thm PromotionTypeB, ta vit thm mt class PromotionTypeB v truyn PromotionTypeB vo get_bill method.\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeB\n  def self.get_promotion(cart)\n    # do something\n  end\nend\n\nCheckout.new.get_bill(cart, PromotionTypeB)\n```\n\n## Tham kho\n\n[1] [https://en.wikipedia.org/wiki/SOLID](https://en.wikipedia.org/wiki/SOLID)\n","source":"_posts/2019-05-17-nguyen-ly-solid-trong-code-ruby.md","raw":"---\ntitle: \"Tng Quan Nguyn L SOLID\"\ndate: 2019-05-17\ndraft: false\ntags: [\"SOLID\", \"RUBY\"]\ncategories: [\"RUBY\", \"PROGRAMMING\"]\n---\n\n## 1. nh ngha v mc tiu s dng\n\n![hoa](/images/solid.png)\n\nTrc tin, hy xem SOLID l vit tt ca nhng cm t g.\n\n**1:** **S**ingle Responsibility Principle\n\n**2:** **O**pen/Closed Principle\n\n**3:** **L**iskov Substitution Principle\n\n**4:** **I**nterface Segregation Principle\n\n**5:** **D**ependency Inversion Principle\n\nHn lm l vy nhng  d nh th ti gi chng ngn gn l: **S**ingle, **O**pen, **L**iskov, **I**nterface v **D**ependency.\n\nV mc tiu  ci nguyn l ny c mt trn ci i, u cng l xut pht t nhu cu lm t hn ca con ngi, vic code khng c h thng khin cc nh pht trin tn nhiu thi gian bo tr v d pht sinh li trong qu trnh s dng.\n gim bt gnh nng ny cc nh pht trin  c ng li mt s khun kh, cch thc lp trnh m di gc nhn v kinh nghim ca nhiu ngi, cc khun kh cch thc  gip cho vic bo tr tr nn d dng hn, h thng t pht sinh li ngoi  mun hn. Mt trong s  l h thng cc nguyn tc trong SOLID.\n\nGi s ti phi x l mt bi ton tnh promotion cho mt ng dng thng mi in t. y s l v d ta dng n trong cc phn pha di. Gi s cu trc d n hin ti nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n```\n\nTrong  signin cha m ngun thc hin chc nng ng nhp, signup cha m thc hin chc nng ng k v checkout cha m thc hin chc nng thanh ton.\n\n## 2. **S**ingle Responsibility Principle\n\n![hoa](/images/srp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> Every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class.\n\niu cn quan tm  y l single responsibility c th hiu l g? Ngha ca responsibility l 'trch nhim', vy 'trch nhim' trong code l g?\n\nTa c th hiu n ng ngha vi 'chc nng' hay khng? C gi s nh ta c th hiu n l 'chc nng' vy khi  th nguyn l ny c th pht biu li thnh nh sau:\n\n> Mi class nn ch mang mt chc nng nht nh, v chc nng  phi c ng gi trong class ny.\n\nBy gi th  d hiu hn nhiu, quay tr v v d, chng ta cn vit mt chc nng tnh promotion. Ta c th  vit chc nng ny vo u?\n\nCu tr li n gin nht l chng ta vit chc nng ny lun vo file checkout.rb, khi thc hin chc nng thanh ton th s dng lun cc method tnh promotion trong . Mi chuyn tht n gin phi khng? iu ny c vi phm nguyn tc SRP khng?\n\nNu ti ni l khng vi phm? Din gii ca ti nh sau: Trch nhim ca ci module/class Checkout l thanh ton nhng mt hng bn  b vo cart, vy promotion cng ch mt step trong qu trnh thanh ton, nn nu ti vit code promotion trong module/class Checkout th ti vi phm nguyn tc SRP ch no?  Checkout vn ang lm ng v duy nht mt 'trch nhim'  l gip thanh ton n hng v promotion ch l phn ph tr cho qu trnh  hay ni cch khc promotion ch l mt bc trong nhiu bc ca qu trnh thanh ton.\n\nVy ti c sai khi ni vy khng? Bn c th chng minh l ti sai nguyn l SRP c hay khng?\n\n1. Ti nghe nhiu ngi ni y l nguyn tc d nht trong SOLID, theo ti n ch l nguyn tc m nh ngha d hc thuc nht m thi.\n\n2. Responsibility th hy hiu n l responsibility (hay hiu n l ng ng ngha l trch nhim). Khng nh ng responsibility thnh 'chc nng' nh trn.\n\n3. Ni dung nguyn l ch c tnh tng i, n ph thuc hon ton vo ci m bn xem l mt responsibility.\n\n nh gi u, ci g l mt responsibility th c l iu kin cn l phi c  kinh nghim. Tr li v d, ti c th coi promotion l mt responsibility ring r vi chc nng thanh ton. Khi  t chc code ca ti nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion.rb\n```\n\nNh ny  phi l cch tt nht? Cu tr li l tu ng iu hon cnh, gi s nu chc nng promotion c nhiu rule khc nhau th vic b tt c function tnh promotion vo 1 file promotion.rb c v khng phi l mt cch hay. Khi  ta t chc li nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion\n    - promotion_type_a.rb\n    - promotion_type_b.rb\n    - promotion_type_c.rb\n```\n\nCch t chc ny  l tt nht hay cha? cu tr li l cha chc, mi th li ph thuc vo ng cnh.\nNguyn l SRP c th sai hay ng trong mt s trng hp l rt mp m, tu theo ci m nh pht trin nh ngha cho responsibility m h xy dng.\n\nNote: Nhng cui cng nguyn l SRP cng ch c mt mc ch duy nht  cu trc d n d sa i v bo tr, v vy trong tng tnh hung s c nhng cch khc nhau  phn chia t chc m ngun, da vo chc nng, da vo yu cu khch hng, da vo tim nng pht trin d n...\n\n## 3. **O**pen/Closed Principle\n\n![hoa](/images/ocp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> One software entity (class/module) must be open for extension but closed for modification.\n\nHiu n gin:\n\n> Mt class/module cn phi c th m rng, nhng khng/khng nn sa i n.\n\nV sao nguyn l ny li yu cu nh vy? vic ti mun m rng hay ti sa i mt ci class th c nh hng g u m cng nh?\n\nng l nh vy, trong phn ln qu trnh pht trin nhng ng dng c nhn n gin th vic chng ta c thm, xo, sa hay m rng mt class/module a phn u khng mang li hu qu g ngoi  mun.\n\nNhng ng cnh m nguyn l ny hng ti l nhng ng dng thc s trong cuc sng,   nhng ng dng ny s ln, ri rm v c business khng h n gin. Mt im na l d n  khi ti tay bn  c th tri qua 5, 7 ln i team pht trin v nhng g bn thy l thnh qu ca c mt qu trnh pht trin tnh nng v maintain trong n v tnh bng nm.\n\nLiu bn c nm ht c flow hot ng ca tng on m, tng file tng class hay khng? Nht nh l khng ri.\n\n chnh l l do m nguyn l OCP ra i, khi h thng phc tp v bn khng nm c ht tt c nhng g s xy ra sau khi bn thay i m ngun ti mt class/module. Hy ng thay i,  trnh lm nh hng n mt phn logic tim tng no . Thay vo  hy m rng class/module , m rng  b sung tnh nng bn cn m cn gip khng nh hng n nhng phn code c khng sai lch v logic lun l (V n c th vn ang s dng chc nng c, liu bn c cover c ht  sa i tt c cc trng hp c th xy ra hay khng?).\n\n> V vy hy u tin m rng mt class/module khi cn pht trin thm hay thay i tnh nng, hn ch v hy tht cn thn khi cn sa i m ngun c sn (chnh l sa i class/module).\n\nMc tiu ca nguyn l l vy, rt d hiu, hy cng tho lun v mt v d trc khi sang phn tip theo:\n\nLi quay tr li v d v bi ton promotion, gi s ti l chn cu trc chng trnh nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion.rb\n```\n\nNh  trnh by  trn, cu trc nh ny v l thuyt th cng ch ai bo l ti vi phm nguyn tc s 1 SRP c. Gi s ni dung ca file promotion.rb nh sau:\n\n```ruby\nclass Promotion\n  def promotion_type_a\n    # implement rule promotion type a\n  end\n\n  def promotion_type_b\n    # implement rule promotion type b\n  end\nend\n```\n\nVy by gi khi ti mun thm mt rule tnh promotion mi, th ti s phi sa i file promotion.rb ny, v nguyn tc n  vi phm nguyn l s 2 OCP (m  m rng ch khng phi  sa i).\n\n khc phc ta c th cu trc li m ngun nh sau:\n\n```\n- app\n  - signin.rb\n  - signup.rb\n  - checkout.rb\n  - promotion\n    - promotion.rb\n    - promotion_type_a.rb\n    - promotion_type_b.rb\n    - promotion_type_c.rb\n```\n\nV khi ny, khi ti cn thm mi 1 rule promotion, ti s to mt file mi trong th mc promotion, vi ni dung k tha t class Promotion.\n\nV d b sung thm rule promotion_type_x.rb vi ni dung:\n\n```ruby\nclass PromotionTypeX < Promotion\n  # do something\nend\n```\n\n## 4. **L**iskov Substitution Principle\n\n![hoa](/images/lsp.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).\n\nHiu n gin l:\n\n> Bn c class A l con ca class B, th instance ca class A phi thay th c cho instance ca class B trong m ngun m khng gy ra sai xt no (khng li v khng sai ng ngha).\n\nMt v d n gin nh sau:\n\n```ruby\nclass Animal\n  def animal_hello\n    puts \"Animal say hello\"\n  end\nend\n\nclass Cat < Animal\n  def cat_hello\n    puts \"Cat say hello\"\n  end\nend\n```\n\non m trn l mt on m hp l vi nguyn l Liskov v:\n\n```ruby\ntemp = Animal.new\ntemp.animal_hello\n# kt qu tr v l: \"Animal say hello\"\n\ntemp = Cat.new\ntemp.animal_hello\n# kt qu tr v vn l: \"Animal say hello\"\n```\n\nNh bn thy, kt qu tr v khng thay i khi ta dng instance ca class Cat thay cho instance class cha ca n l Animal, v vy l nguyn l Liskov c bo ton tnh ng n ca n.\n\nHy th mt on m ngun khc nh sau:\n\n```ruby\nclass Animal\n  def animal_hello\n    puts \"Animal say hello\"\n  end\nend\n\nclass Cat < Animal\n  def animal_hello\n    puts \"Cat say hello\"\n  end\nend\n```\n\ny l on m vi phm nguyn tc ca Liskov, khi ny ta c:\n\n```ruby\ntemp = Animal.new\ntemp.animal_hello\n# kt qu tr v l: \"Animal say hello\"\n\ntemp = Cat.new\ntemp.animal_hello\n# kt qu tr v l: \"Cat say hello\"\n```\n\nTa c th thy, instance ca class Cat khi gi ti method animal_hello  khng cn tr v kt qu tng t nh mt instance Animal na ri, v l do  class Cat, class ny  override li phng thc animal_hello, v t  dn ti vi phm nguyn tc Liskov.\n\n## 5. **I**nterface Segregation Principle\n\n![hoa](/images/isp.png)\n\nNguyn l ny c pht biu nh sau:\n\n> No client should be forced to depend on methods it does not use.\n\nHiu n gin l:\n\n> Nu bn l mt i tng no  trong m ngun, hy m bo l bn phi/ch lm nhng cng vic m bn phi/c th lm. Khng trao cho bn nhng kh nng m bn khng cn.\n\nTh mt v d n gin, bn l mt hc sinh c giao nhim v trc nht lp, c gio bn phi m bo rng bn ch c trao cha kho m ca phng hc ca bn, ch khng trao cho bn nhng cha kho khc (nh cha kho cc lp hc khc, phng tin hc, phng gio vin...), y l nhng cng vic ca nhng c nhn khc.\n\nNu bn c trao nhng cng vic ca ngi khc, c th bn s to ra nhng sai lm khng th sa i c. V vy hy lm ng cng vic ca mnh.\n\nHy bt u vi mt v d:\n\nTa c mt class Animal.\n\n```ruby\nclass Animal\n  include AnimalHelper\n  # do something\nend\n```\n\nClass Animal bn trn include module di y.\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\nend\n```\n\nMi chuyn n ch? Rt n, 3 method hin c trong module AnimalHelper l 3 method h tr cho class Animal.\n\nVy by gi ti c thm mt class na nh sau:\n\n```ruby\nclass YellowCat\n  # do something\nend\n```\n\nClass ny cn mt phng thc support tn l **yellow_cat_helper**, ti s vit thm method ny vo module AnimalHelper v include module AnimalHelper vo class YellowCat vy l ng v  yu cu. Khi ny module AnimalHelper v class YellowCat s tr thnh nh sau:\n\nClass YellowCat\n\n```ruby\nclass YellowCat\n  include AnimalHelper\n  # do something\nend\n```\n\nModule AnimalHelper\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\n\n  # add new method for YellowCat\n  def yellow_cat_helper\n    # do something\n  end\nend\n```\n\nMi chuyn gi vn n ch? Khng, by gi th khng n na ri n  vi phm nguyn tc SOLID th 4, ch \"I\" m chng ta ang xt.\n\nV sao?\n\nV class Animal u c cn method **yellow_cat_helper**, cn class YellowCat u c cn 3 method **animal_helper_a**, **animal_helper_b**, **animal_helper_c** ny u?\n\nVy m chng vn c th s dng nhng method m chng vn khng cn, v l do ta vit chung tt c method vo mt module v include module vo tng class.\n\nY nh v d bn trn: Bn cn trc nht lp 1A thi m, c gio bn a cho bn trm cha kho ca c trng lm g? Cm th nng, m nh u bn ~~tt mt~~ nghch di th hu qu khn lng.\n\nVy  khng vi phm nguyn tc ny ta c th sa li m ngun nh sau:\n\nClass Animal\n\n```ruby\nclass Animal\n  include AnimalHelper\n  # do something\nend\n```\n\nModule Animal\n\n```ruby\nmodule AnimalHelper\n  def animal_helper_a\n    # do something\n  end\n\n  def animal_helper_b\n    # do something\n  end\n\n  def animal_helper_c\n    # do something\n  end\nend\n```\n\nClass YellowCat\n\n```ruby\nclass YellowCat\n  include YellowCatHelper\n  # do something\nend\n```\n\nV gi ta to mt module mi  YellowCat include\n\n```ruby\nmodule YellowCatHelper\n  def yellow_cat_helper\n    # do something\n  end\nend\n```\n\nOk, vy l look good ri :smile: Lc ny class Animal ch c include nhng method m n cn v class YellowCat cng vy.\n\n## 6. **D**ependency Inversion Principle\n\n![hoa](/images/dip.jpg)\n\nNguyn l ny c pht biu nh sau:\n\n> 1. High-level modules should not depend on low-level modules. Both should depend on abstractions.\n> 2. Abstractions should not depend upon details. Details should depend upon abstractions.\n\nDch st ngha s l:\n\n> 1. Module cp cao khng nn ph thuc vo module cp thp hn. C hai nn ph thuc vo abstractions.\n> 2. Abstractions khng nn ph thuc vo details. Details nn ph thuc vo abstractions\n\nQuay tr li v d promotion ban u, gi s ta vit m ngun nh sau:\n\n```ruby\n# app/checkout.rb\nclass Checkout\n  def get_bill(cart)\n    PromotionTypeA.promotion_type_a(cart)\n  end\nend\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeA\n  def self.promotion_type_a(cart)\n    # do something\n  end\nend\n```\n\nTrong on m ngun trn y, method get_bill trong class Checkout ph thuc vo class PromotionTypeA. R rng l nh vy, cu hi l nu ta c PromotionTypeB, PromotionTypeC... Th phi lm sao?\n\nChng ta s phi vit 3 method get_bill ng vi PromotionTypeA, PromotionTypeB v PromotionTypeC hay sao?\n\n cng l mt cch, nhng  l cch  vi phm nguyn l DIP, khi m cc module ph thuc ln nhau.\n\n gii quyt vn  ny ta c th vit li m ngun nh sau:\n\n```ruby\n# app/checkout.rb\nclass Checkout\n  def get_bill(cart, PromotionType)\n    PromotionType.get_promotion(cart)\n  end\nend\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeA\n  def self.get_promotion(cart)\n    # do something\n  end\nend\n\n# get_bill vi PromotionTypeA\nCheckout.new.get_bill(cart, PromotionTypeA)\n\n#  vit thm PromotionTypeB, ta vit thm mt class PromotionTypeB v truyn PromotionTypeB vo get_bill method.\n\n# app/promotion/promotion_type_a.rb\nclass PromotionTypeB\n  def self.get_promotion(cart)\n    # do something\n  end\nend\n\nCheckout.new.get_bill(cart, PromotionTypeB)\n```\n\n## Tham kho\n\n[1] [https://en.wikipedia.org/wiki/SOLID](https://en.wikipedia.org/wiki/SOLID)\n","slug":"2019-05-17-nguyen-ly-solid-trong-code-ruby","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsaw001jp3m2basybd2q","content":"<h2 id=\"1-Dinh-nghia-va-muc-tieu-su-dung\"><a href=\"#1-Dinh-nghia-va-muc-tieu-su-dung\" class=\"headerlink\" title=\"1. nh ngha v mc tiu s dng\"></a>1. nh ngha v mc tiu s dng</h2><p><img src=\"/images/solid.png\" alt=\"hoa\"></p>\n<p>Trc tin, hy xem SOLID l vit tt ca nhng cm t g.</p>\n<p><strong>1:</strong> <strong>S</strong>ingle Responsibility Principle</p>\n<p><strong>2:</strong> <strong>O</strong>pen/Closed Principle</p>\n<p><strong>3:</strong> <strong>L</strong>iskov Substitution Principle</p>\n<p><strong>4:</strong> <strong>I</strong>nterface Segregation Principle</p>\n<p><strong>5:</strong> <strong>D</strong>ependency Inversion Principle</p>\n<p>Hn lm l vy nhng  d nh th ti gi chng ngn gn l: <strong>S</strong>ingle, <strong>O</strong>pen, <strong>L</strong>iskov, <strong>I</strong>nterface v <strong>D</strong>ependency.</p>\n<p>V mc tiu  ci nguyn l ny c mt trn ci i, u cng l xut pht t nhu cu lm t hn ca con ngi, vic code khng c h thng khin cc nh pht trin tn nhiu thi gian bo tr v d pht sinh li trong qu trnh s dng.<br> gim bt gnh nng ny cc nh pht trin  c ng li mt s khun kh, cch thc lp trnh m di gc nhn v kinh nghim ca nhiu ngi, cc khun kh cch thc  gip cho vic bo tr tr nn d dng hn, h thng t pht sinh li ngoi  mun hn. Mt trong s  l h thng cc nguyn tc trong SOLID.</p>\n<p>Gi s ti phi x l mt bi ton tnh promotion cho mt ng dng thng mi in t. y s l v d ta dng n trong cc phn pha di. Gi s cu trc d n hin ti nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br></pre></td></tr></table></figure>\n\n<p>Trong  signin cha m ngun thc hin chc nng ng nhp, signup cha m thc hin chc nng ng k v checkout cha m thc hin chc nng thanh ton.</p>\n<h2 id=\"2-Single-Responsibility-Principle\"><a href=\"#2-Single-Responsibility-Principle\" class=\"headerlink\" title=\"2. Single Responsibility Principle\"></a>2. <strong>S</strong>ingle Responsibility Principle</h2><p><img src=\"/images/srp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>Every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class.</p>\n</blockquote>\n<p>iu cn quan tm  y l single responsibility c th hiu l g? Ngha ca responsibility l trch nhim, vy trch nhim trong code l g?</p>\n<p>Ta c th hiu n ng ngha vi chc nng hay khng? C gi s nh ta c th hiu n l chc nng vy khi  th nguyn l ny c th pht biu li thnh nh sau:</p>\n<blockquote>\n<p>Mi class nn ch mang mt chc nng nht nh, v chc nng  phi c ng gi trong class ny.</p>\n</blockquote>\n<p>By gi th  d hiu hn nhiu, quay tr v v d, chng ta cn vit mt chc nng tnh promotion. Ta c th  vit chc nng ny vo u?</p>\n<p>Cu tr li n gin nht l chng ta vit chc nng ny lun vo file checkout.rb, khi thc hin chc nng thanh ton th s dng lun cc method tnh promotion trong . Mi chuyn tht n gin phi khng? iu ny c vi phm nguyn tc SRP khng?</p>\n<p>Nu ti ni l khng vi phm? Din gii ca ti nh sau: Trch nhim ca ci module/class Checkout l thanh ton nhng mt hng bn  b vo cart, vy promotion cng ch mt step trong qu trnh thanh ton, nn nu ti vit code promotion trong module/class Checkout th ti vi phm nguyn tc SRP ch no?  Checkout vn ang lm ng v duy nht mt trch nhim  l gip thanh ton n hng v promotion ch l phn ph tr cho qu trnh  hay ni cch khc promotion ch l mt bc trong nhiu bc ca qu trnh thanh ton.</p>\n<p>Vy ti c sai khi ni vy khng? Bn c th chng minh l ti sai nguyn l SRP c hay khng?</p>\n<ol>\n<li><p>Ti nghe nhiu ngi ni y l nguyn tc d nht trong SOLID, theo ti n ch l nguyn tc m nh ngha d hc thuc nht m thi.</p>\n</li>\n<li><p>Responsibility th hy hiu n l responsibility (hay hiu n l ng ng ngha l trch nhim). Khng nh ng responsibility thnh chc nng nh trn.</p>\n</li>\n<li><p>Ni dung nguyn l ch c tnh tng i, n ph thuc hon ton vo ci m bn xem l mt responsibility.</p>\n</li>\n</ol>\n<p> nh gi u, ci g l mt responsibility th c l iu kin cn l phi c  kinh nghim. Tr li v d, ti c th coi promotion l mt responsibility ring r vi chc nng thanh ton. Khi  t chc code ca ti nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>promotion.rb</span><br></pre></td></tr></table></figure>\n\n<p>Nh ny  phi l cch tt nht? Cu tr li l tu ng iu hon cnh, gi s nu chc nng promotion c nhiu rule khc nhau th vic b tt c function tnh promotion vo 1 file promotion.rb c v khng phi l mt cch hay. Khi  ta t chc li nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>promotion</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>a.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>b.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>c.rb</span><br></pre></td></tr></table></figure>\n\n<p>Cch t chc ny  l tt nht hay cha? cu tr li l cha chc, mi th li ph thuc vo ng cnh.<br>Nguyn l SRP c th sai hay ng trong mt s trng hp l rt mp m, tu theo ci m nh pht trin nh ngha cho responsibility m h xy dng.</p>\n<p>Note: Nhng cui cng nguyn l SRP cng ch c mt mc ch duy nht  cu trc d n d sa i v bo tr, v vy trong tng tnh hung s c nhng cch khc nhau  phn chia t chc m ngun, da vo chc nng, da vo yu cu khch hng, da vo tim nng pht trin d n</p>\n<h2 id=\"3-Open-Closed-Principle\"><a href=\"#3-Open-Closed-Principle\" class=\"headerlink\" title=\"3. Open/Closed Principle\"></a>3. <strong>O</strong>pen/Closed Principle</h2><p><img src=\"/images/ocp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>One software entity (class/module) must be open for extension but closed for modification.</p>\n</blockquote>\n<p>Hiu n gin:</p>\n<blockquote>\n<p>Mt class/module cn phi c th m rng, nhng khng/khng nn sa i n.</p>\n</blockquote>\n<p>V sao nguyn l ny li yu cu nh vy? vic ti mun m rng hay ti sa i mt ci class th c nh hng g u m cng nh?</p>\n<p>ng l nh vy, trong phn ln qu trnh pht trin nhng ng dng c nhn n gin th vic chng ta c thm, xo, sa hay m rng mt class/module a phn u khng mang li hu qu g ngoi  mun.</p>\n<p>Nhng ng cnh m nguyn l ny hng ti l nhng ng dng thc s trong cuc sng,   nhng ng dng ny s ln, ri rm v c business khng h n gin. Mt im na l d n  khi ti tay bn  c th tri qua 5, 7 ln i team pht trin v nhng g bn thy l thnh qu ca c mt qu trnh pht trin tnh nng v maintain trong n v tnh bng nm.</p>\n<p>Liu bn c nm ht c flow hot ng ca tng on m, tng file tng class hay khng? Nht nh l khng ri.</p>\n<p> chnh l l do m nguyn l OCP ra i, khi h thng phc tp v bn khng nm c ht tt c nhng g s xy ra sau khi bn thay i m ngun ti mt class/module. Hy ng thay i,  trnh lm nh hng n mt phn logic tim tng no . Thay vo  hy m rng class/module , m rng  b sung tnh nng bn cn m cn gip khng nh hng n nhng phn code c khng sai lch v logic lun l (V n c th vn ang s dng chc nng c, liu bn c cover c ht  sa i tt c cc trng hp c th xy ra hay khng?).</p>\n<blockquote>\n<p>V vy hy u tin m rng mt class/module khi cn pht trin thm hay thay i tnh nng, hn ch v hy tht cn thn khi cn sa i m ngun c sn (chnh l sa i class/module).</p>\n</blockquote>\n<p>Mc tiu ca nguyn l l vy, rt d hiu, hy cng tho lun v mt v d trc khi sang phn tip theo:</p>\n<p>Li quay tr li v d v bi ton promotion, gi s ti l chn cu trc chng trnh nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>promotion.rb</span><br></pre></td></tr></table></figure>\n\n<p>Nh  trnh by  trn, cu trc nh ny v l thuyt th cng ch ai bo l ti vi phm nguyn tc s 1 SRP c. Gi s ni dung ca file promotion.rb nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Promotion</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion_type_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># implement rule promotion type a</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion_type_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># implement rule promotion type b</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy by gi khi ti mun thm mt rule tnh promotion mi, th ti s phi sa i file promotion.rb ny, v nguyn tc n  vi phm nguyn l s 2 OCP (m  m rng ch khng phi  sa i).</p>\n<p> khc phc ta c th cu trc li m ngun nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>promotion</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>a.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>b.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>c.rb</span><br></pre></td></tr></table></figure>\n\n<p>V khi ny, khi ti cn thm mi 1 rule promotion, ti s to mt file mi trong th mc promotion, vi ni dung k tha t class Promotion.</p>\n<p>V d b sung thm rule promotion_type_x.rb vi ni dung:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeX</span> &lt; Promotion</span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Liskov-Substitution-Principle\"><a href=\"#4-Liskov-Substitution-Principle\" class=\"headerlink\" title=\"4. Liskov Substitution Principle\"></a>4. <strong>L</strong>iskov Substitution Principle</h2><p><img src=\"/images/lsp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).</p>\n</blockquote>\n<p>Hiu n gin l:</p>\n<blockquote>\n<p>Bn c class A l con ca class B, th instance ca class A phi thay th c cho instance ca class B trong m ngun m khng gy ra sai xt no (khng li v khng sai ng ngha).</p>\n</blockquote>\n<p>Mt v d n gin nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Animal say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Cat say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>on m trn l mt on m hp l vi nguyn l Liskov v:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">temp = Animal.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Animal say hello\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = Cat.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v vn l: \"Animal say hello\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh bn thy, kt qu tr v khng thay i khi ta dng instance ca class Cat thay cho instance class cha ca n l Animal, v vy l nguyn l Liskov c bo ton tnh ng n ca n.</p>\n<p>Hy th mt on m ngun khc nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Animal say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Cat say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l on m vi phm nguyn tc ca Liskov, khi ny ta c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">temp = Animal.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Animal say hello\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = Cat.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Cat say hello\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Ta c th thy, instance ca class Cat khi gi ti method animal_hello  khng cn tr v kt qu tng t nh mt instance Animal na ri, v l do  class Cat, class ny  override li phng thc animal_hello, v t  dn ti vi phm nguyn tc Liskov.</p>\n<h2 id=\"5-Interface-Segregation-Principle\"><a href=\"#5-Interface-Segregation-Principle\" class=\"headerlink\" title=\"5. Interface Segregation Principle\"></a>5. <strong>I</strong>nterface Segregation Principle</h2><p><img src=\"/images/isp.png\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>No client should be forced to depend on methods it does not use.</p>\n</blockquote>\n<p>Hiu n gin l:</p>\n<blockquote>\n<p>Nu bn l mt i tng no  trong m ngun, hy m bo l bn phi/ch lm nhng cng vic m bn phi/c th lm. Khng trao cho bn nhng kh nng m bn khng cn.</p>\n</blockquote>\n<p>Th mt v d n gin, bn l mt hc sinh c giao nhim v trc nht lp, c gio bn phi m bo rng bn ch c trao cha kho m ca phng hc ca bn, ch khng trao cho bn nhng cha kho khc (nh cha kho cc lp hc khc, phng tin hc, phng gio vin), y l nhng cng vic ca nhng c nhn khc.</p>\n<p>Nu bn c trao nhng cng vic ca ngi khc, c th bn s to ra nhng sai lm khng th sa i c. V vy hy lm ng cng vic ca mnh.</p>\n<p>Hy bt u vi mt v d:</p>\n<p>Ta c mt class Animal.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class Animal bn trn include module di y.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Mi chuyn n ch? Rt n, 3 method hin c trong module AnimalHelper l 3 method h tr cho class Animal.</p>\n<p>Vy by gi ti c thm mt class na nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class ny cn mt phng thc support tn l <strong>yellow_cat_helper</strong>, ti s vit thm method ny vo module AnimalHelper v include module AnimalHelper vo class YellowCat vy l ng v  yu cu. Khi ny module AnimalHelper v class YellowCat s tr thnh nh sau:</p>\n<p>Class YellowCat</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Module AnimalHelper</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># add new method for YellowCat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat_helper</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Mi chuyn gi vn n ch? Khng, by gi th khng n na ri n  vi phm nguyn tc SOLID th 4, ch I m chng ta ang xt.</p>\n<p>V sao?</p>\n<p>V class Animal u c cn method <strong>yellow_cat_helper</strong>, cn class YellowCat u c cn 3 method <strong>animal_helper_a</strong>, <strong>animal_helper_b</strong>, <strong>animal_helper_c</strong> ny u?</p>\n<p>Vy m chng vn c th s dng nhng method m chng vn khng cn, v l do ta vit chung tt c method vo mt module v include module vo tng class.</p>\n<p>Y nh v d bn trn: Bn cn trc nht lp 1A thi m, c gio bn a cho bn trm cha kho ca c trng lm g? Cm th nng, m nh u bn <del>tt mt</del> nghch di th hu qu khn lng.</p>\n<p>Vy  khng vi phm nguyn tc ny ta c th sa li m ngun nh sau:</p>\n<p>Class Animal</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Module Animal</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class YellowCat</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> YellowCatHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>V gi ta to mt module mi  YellowCat include</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">YellowCatHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat_helper</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Ok, vy l look good ri :smile: Lc ny class Animal ch c include nhng method m n cn v class YellowCat cng vy.</p>\n<h2 id=\"6-Dependency-Inversion-Principle\"><a href=\"#6-Dependency-Inversion-Principle\" class=\"headerlink\" title=\"6. Dependency Inversion Principle\"></a>6. <strong>D</strong>ependency Inversion Principle</h2><p><img src=\"/images/dip.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<ol>\n<li>High-level modules should not depend on low-level modules. Both should depend on abstractions.</li>\n<li>Abstractions should not depend upon details. Details should depend upon abstractions.</li>\n</ol>\n</blockquote>\n<p>Dch st ngha s l:</p>\n<blockquote>\n<ol>\n<li>Module cp cao khng nn ph thuc vo module cp thp hn. C hai nn ph thuc vo abstractions.</li>\n<li>Abstractions khng nn ph thuc vo details. Details nn ph thuc vo abstractions</li>\n</ol>\n</blockquote>\n<p>Quay tr li v d promotion ban u, gi s ta vit m ngun nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># app/checkout.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Checkout</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_bill</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    PromotionTypeA.promotion_type_a(cart)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeA</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">promotion_type_a</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Trong on m ngun trn y, method get_bill trong class Checkout ph thuc vo class PromotionTypeA. R rng l nh vy, cu hi l nu ta c PromotionTypeB, PromotionTypeC Th phi lm sao?</p>\n<p>Chng ta s phi vit 3 method get_bill ng vi PromotionTypeA, PromotionTypeB v PromotionTypeC hay sao?</p>\n<p> cng l mt cch, nhng  l cch  vi phm nguyn l DIP, khi m cc module ph thuc ln nhau.</p>\n<p> gii quyt vn  ny ta c th vit li m ngun nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># app/checkout.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Checkout</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_bill</span><span class=\"params\">(cart, PromotionType)</span></span></span><br><span class=\"line\">    PromotionType.get_promotion(cart)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeA</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">get_promotion</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># get_bill vi PromotionTypeA</span></span><br><span class=\"line\">Checkout.new.get_bill(cart, PromotionTypeA)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  vit thm PromotionTypeB, ta vit thm mt class PromotionTypeB v truyn PromotionTypeB vo get_bill method.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeB</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">get_promotion</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Checkout.new.get_bill(cart, PromotionTypeB)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Tham-khao\"><a href=\"#Tham-khao\" class=\"headerlink\" title=\"Tham kho\"></a>Tham kho</h2><p>[1] <a href=\"https://en.wikipedia.org/wiki/SOLID\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/SOLID</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Dinh-nghia-va-muc-tieu-su-dung\"><a href=\"#1-Dinh-nghia-va-muc-tieu-su-dung\" class=\"headerlink\" title=\"1. nh ngha v mc tiu s dng\"></a>1. nh ngha v mc tiu s dng</h2><p><img src=\"/images/solid.png\" alt=\"hoa\"></p>\n<p>Trc tin, hy xem SOLID l vit tt ca nhng cm t g.</p>\n<p><strong>1:</strong> <strong>S</strong>ingle Responsibility Principle</p>\n<p><strong>2:</strong> <strong>O</strong>pen/Closed Principle</p>\n<p><strong>3:</strong> <strong>L</strong>iskov Substitution Principle</p>\n<p><strong>4:</strong> <strong>I</strong>nterface Segregation Principle</p>\n<p><strong>5:</strong> <strong>D</strong>ependency Inversion Principle</p>\n<p>Hn lm l vy nhng  d nh th ti gi chng ngn gn l: <strong>S</strong>ingle, <strong>O</strong>pen, <strong>L</strong>iskov, <strong>I</strong>nterface v <strong>D</strong>ependency.</p>\n<p>V mc tiu  ci nguyn l ny c mt trn ci i, u cng l xut pht t nhu cu lm t hn ca con ngi, vic code khng c h thng khin cc nh pht trin tn nhiu thi gian bo tr v d pht sinh li trong qu trnh s dng.<br> gim bt gnh nng ny cc nh pht trin  c ng li mt s khun kh, cch thc lp trnh m di gc nhn v kinh nghim ca nhiu ngi, cc khun kh cch thc  gip cho vic bo tr tr nn d dng hn, h thng t pht sinh li ngoi  mun hn. Mt trong s  l h thng cc nguyn tc trong SOLID.</p>\n<p>Gi s ti phi x l mt bi ton tnh promotion cho mt ng dng thng mi in t. y s l v d ta dng n trong cc phn pha di. Gi s cu trc d n hin ti nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br></pre></td></tr></table></figure>\n\n<p>Trong  signin cha m ngun thc hin chc nng ng nhp, signup cha m thc hin chc nng ng k v checkout cha m thc hin chc nng thanh ton.</p>\n<h2 id=\"2-Single-Responsibility-Principle\"><a href=\"#2-Single-Responsibility-Principle\" class=\"headerlink\" title=\"2. Single Responsibility Principle\"></a>2. <strong>S</strong>ingle Responsibility Principle</h2><p><img src=\"/images/srp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>Every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class.</p>\n</blockquote>\n<p>iu cn quan tm  y l single responsibility c th hiu l g? Ngha ca responsibility l trch nhim, vy trch nhim trong code l g?</p>\n<p>Ta c th hiu n ng ngha vi chc nng hay khng? C gi s nh ta c th hiu n l chc nng vy khi  th nguyn l ny c th pht biu li thnh nh sau:</p>\n<blockquote>\n<p>Mi class nn ch mang mt chc nng nht nh, v chc nng  phi c ng gi trong class ny.</p>\n</blockquote>\n<p>By gi th  d hiu hn nhiu, quay tr v v d, chng ta cn vit mt chc nng tnh promotion. Ta c th  vit chc nng ny vo u?</p>\n<p>Cu tr li n gin nht l chng ta vit chc nng ny lun vo file checkout.rb, khi thc hin chc nng thanh ton th s dng lun cc method tnh promotion trong . Mi chuyn tht n gin phi khng? iu ny c vi phm nguyn tc SRP khng?</p>\n<p>Nu ti ni l khng vi phm? Din gii ca ti nh sau: Trch nhim ca ci module/class Checkout l thanh ton nhng mt hng bn  b vo cart, vy promotion cng ch mt step trong qu trnh thanh ton, nn nu ti vit code promotion trong module/class Checkout th ti vi phm nguyn tc SRP ch no?  Checkout vn ang lm ng v duy nht mt trch nhim  l gip thanh ton n hng v promotion ch l phn ph tr cho qu trnh  hay ni cch khc promotion ch l mt bc trong nhiu bc ca qu trnh thanh ton.</p>\n<p>Vy ti c sai khi ni vy khng? Bn c th chng minh l ti sai nguyn l SRP c hay khng?</p>\n<ol>\n<li><p>Ti nghe nhiu ngi ni y l nguyn tc d nht trong SOLID, theo ti n ch l nguyn tc m nh ngha d hc thuc nht m thi.</p>\n</li>\n<li><p>Responsibility th hy hiu n l responsibility (hay hiu n l ng ng ngha l trch nhim). Khng nh ng responsibility thnh chc nng nh trn.</p>\n</li>\n<li><p>Ni dung nguyn l ch c tnh tng i, n ph thuc hon ton vo ci m bn xem l mt responsibility.</p>\n</li>\n</ol>\n<p> nh gi u, ci g l mt responsibility th c l iu kin cn l phi c  kinh nghim. Tr li v d, ti c th coi promotion l mt responsibility ring r vi chc nng thanh ton. Khi  t chc code ca ti nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>promotion.rb</span><br></pre></td></tr></table></figure>\n\n<p>Nh ny  phi l cch tt nht? Cu tr li l tu ng iu hon cnh, gi s nu chc nng promotion c nhiu rule khc nhau th vic b tt c function tnh promotion vo 1 file promotion.rb c v khng phi l mt cch hay. Khi  ta t chc li nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>promotion</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>a.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>b.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>c.rb</span><br></pre></td></tr></table></figure>\n\n<p>Cch t chc ny  l tt nht hay cha? cu tr li l cha chc, mi th li ph thuc vo ng cnh.<br>Nguyn l SRP c th sai hay ng trong mt s trng hp l rt mp m, tu theo ci m nh pht trin nh ngha cho responsibility m h xy dng.</p>\n<p>Note: Nhng cui cng nguyn l SRP cng ch c mt mc ch duy nht  cu trc d n d sa i v bo tr, v vy trong tng tnh hung s c nhng cch khc nhau  phn chia t chc m ngun, da vo chc nng, da vo yu cu khch hng, da vo tim nng pht trin d n</p>\n<h2 id=\"3-Open-Closed-Principle\"><a href=\"#3-Open-Closed-Principle\" class=\"headerlink\" title=\"3. Open/Closed Principle\"></a>3. <strong>O</strong>pen/Closed Principle</h2><p><img src=\"/images/ocp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>One software entity (class/module) must be open for extension but closed for modification.</p>\n</blockquote>\n<p>Hiu n gin:</p>\n<blockquote>\n<p>Mt class/module cn phi c th m rng, nhng khng/khng nn sa i n.</p>\n</blockquote>\n<p>V sao nguyn l ny li yu cu nh vy? vic ti mun m rng hay ti sa i mt ci class th c nh hng g u m cng nh?</p>\n<p>ng l nh vy, trong phn ln qu trnh pht trin nhng ng dng c nhn n gin th vic chng ta c thm, xo, sa hay m rng mt class/module a phn u khng mang li hu qu g ngoi  mun.</p>\n<p>Nhng ng cnh m nguyn l ny hng ti l nhng ng dng thc s trong cuc sng,   nhng ng dng ny s ln, ri rm v c business khng h n gin. Mt im na l d n  khi ti tay bn  c th tri qua 5, 7 ln i team pht trin v nhng g bn thy l thnh qu ca c mt qu trnh pht trin tnh nng v maintain trong n v tnh bng nm.</p>\n<p>Liu bn c nm ht c flow hot ng ca tng on m, tng file tng class hay khng? Nht nh l khng ri.</p>\n<p> chnh l l do m nguyn l OCP ra i, khi h thng phc tp v bn khng nm c ht tt c nhng g s xy ra sau khi bn thay i m ngun ti mt class/module. Hy ng thay i,  trnh lm nh hng n mt phn logic tim tng no . Thay vo  hy m rng class/module , m rng  b sung tnh nng bn cn m cn gip khng nh hng n nhng phn code c khng sai lch v logic lun l (V n c th vn ang s dng chc nng c, liu bn c cover c ht  sa i tt c cc trng hp c th xy ra hay khng?).</p>\n<blockquote>\n<p>V vy hy u tin m rng mt class/module khi cn pht trin thm hay thay i tnh nng, hn ch v hy tht cn thn khi cn sa i m ngun c sn (chnh l sa i class/module).</p>\n</blockquote>\n<p>Mc tiu ca nguyn l l vy, rt d hiu, hy cng tho lun v mt v d trc khi sang phn tip theo:</p>\n<p>Li quay tr li v d v bi ton promotion, gi s ti l chn cu trc chng trnh nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>promotion.rb</span><br></pre></td></tr></table></figure>\n\n<p>Nh  trnh by  trn, cu trc nh ny v l thuyt th cng ch ai bo l ti vi phm nguyn tc s 1 SRP c. Gi s ni dung ca file promotion.rb nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Promotion</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion_type_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># implement rule promotion type a</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion_type_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># implement rule promotion type b</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy by gi khi ti mun thm mt rule tnh promotion mi, th ti s phi sa i file promotion.rb ny, v nguyn tc n  vi phm nguyn l s 2 OCP (m  m rng ch khng phi  sa i).</p>\n<p> khc phc ta c th cu trc li m ngun nh sau:</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>app</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signin.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>signup.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>checkout.rb</span><br><span class=\"line\"><span class=\"bullet\">  - </span>promotion</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>a.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>b.rb</span><br><span class=\"line\"><span class=\"bullet\">    - </span>promotion<span class=\"emphasis\">_type_</span>c.rb</span><br></pre></td></tr></table></figure>\n\n<p>V khi ny, khi ti cn thm mi 1 rule promotion, ti s to mt file mi trong th mc promotion, vi ni dung k tha t class Promotion.</p>\n<p>V d b sung thm rule promotion_type_x.rb vi ni dung:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeX</span> &lt; Promotion</span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Liskov-Substitution-Principle\"><a href=\"#4-Liskov-Substitution-Principle\" class=\"headerlink\" title=\"4. Liskov Substitution Principle\"></a>4. <strong>L</strong>iskov Substitution Principle</h2><p><img src=\"/images/lsp.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>If S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).</p>\n</blockquote>\n<p>Hiu n gin l:</p>\n<blockquote>\n<p>Bn c class A l con ca class B, th instance ca class A phi thay th c cho instance ca class B trong m ngun m khng gy ra sai xt no (khng li v khng sai ng ngha).</p>\n</blockquote>\n<p>Mt v d n gin nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Animal say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Cat say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>on m trn l mt on m hp l vi nguyn l Liskov v:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">temp = Animal.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Animal say hello\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = Cat.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v vn l: \"Animal say hello\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh bn thy, kt qu tr v khng thay i khi ta dng instance ca class Cat thay cho instance class cha ca n l Animal, v vy l nguyn l Liskov c bo ton tnh ng n ca n.</p>\n<p>Hy th mt on m ngun khc nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Animal say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_hello</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"Cat say hello\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l on m vi phm nguyn tc ca Liskov, khi ny ta c:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">temp = Animal.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Animal say hello\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">temp = Cat.new</span><br><span class=\"line\">temp.animal_hello</span><br><span class=\"line\"><span class=\"comment\"># kt qu tr v l: \"Cat say hello\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Ta c th thy, instance ca class Cat khi gi ti method animal_hello  khng cn tr v kt qu tng t nh mt instance Animal na ri, v l do  class Cat, class ny  override li phng thc animal_hello, v t  dn ti vi phm nguyn tc Liskov.</p>\n<h2 id=\"5-Interface-Segregation-Principle\"><a href=\"#5-Interface-Segregation-Principle\" class=\"headerlink\" title=\"5. Interface Segregation Principle\"></a>5. <strong>I</strong>nterface Segregation Principle</h2><p><img src=\"/images/isp.png\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<p>No client should be forced to depend on methods it does not use.</p>\n</blockquote>\n<p>Hiu n gin l:</p>\n<blockquote>\n<p>Nu bn l mt i tng no  trong m ngun, hy m bo l bn phi/ch lm nhng cng vic m bn phi/c th lm. Khng trao cho bn nhng kh nng m bn khng cn.</p>\n</blockquote>\n<p>Th mt v d n gin, bn l mt hc sinh c giao nhim v trc nht lp, c gio bn phi m bo rng bn ch c trao cha kho m ca phng hc ca bn, ch khng trao cho bn nhng cha kho khc (nh cha kho cc lp hc khc, phng tin hc, phng gio vin), y l nhng cng vic ca nhng c nhn khc.</p>\n<p>Nu bn c trao nhng cng vic ca ngi khc, c th bn s to ra nhng sai lm khng th sa i c. V vy hy lm ng cng vic ca mnh.</p>\n<p>Hy bt u vi mt v d:</p>\n<p>Ta c mt class Animal.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class Animal bn trn include module di y.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Mi chuyn n ch? Rt n, 3 method hin c trong module AnimalHelper l 3 method h tr cho class Animal.</p>\n<p>Vy by gi ti c thm mt class na nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class ny cn mt phng thc support tn l <strong>yellow_cat_helper</strong>, ti s vit thm method ny vo module AnimalHelper v include module AnimalHelper vo class YellowCat vy l ng v  yu cu. Khi ny module AnimalHelper v class YellowCat s tr thnh nh sau:</p>\n<p>Class YellowCat</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Module AnimalHelper</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># add new method for YellowCat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat_helper</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Mi chuyn gi vn n ch? Khng, by gi th khng n na ri n  vi phm nguyn tc SOLID th 4, ch I m chng ta ang xt.</p>\n<p>V sao?</p>\n<p>V class Animal u c cn method <strong>yellow_cat_helper</strong>, cn class YellowCat u c cn 3 method <strong>animal_helper_a</strong>, <strong>animal_helper_b</strong>, <strong>animal_helper_c</strong> ny u?</p>\n<p>Vy m chng vn c th s dng nhng method m chng vn khng cn, v l do ta vit chung tt c method vo mt module v include module vo tng class.</p>\n<p>Y nh v d bn trn: Bn cn trc nht lp 1A thi m, c gio bn a cho bn trm cha kho ca c trng lm g? Cm th nng, m nh u bn <del>tt mt</del> nghch di th hu qu khn lng.</p>\n<p>Vy  khng vi phm nguyn tc ny ta c th sa li m ngun nh sau:</p>\n<p>Class Animal</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> AnimalHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Module Animal</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">AnimalHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_a</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_b</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">animal_helper_c</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Class YellowCat</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> YellowCatHelper</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>V gi ta to mt module mi  YellowCat include</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">YellowCatHelper</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat_helper</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Ok, vy l look good ri :smile: Lc ny class Animal ch c include nhng method m n cn v class YellowCat cng vy.</p>\n<h2 id=\"6-Dependency-Inversion-Principle\"><a href=\"#6-Dependency-Inversion-Principle\" class=\"headerlink\" title=\"6. Dependency Inversion Principle\"></a>6. <strong>D</strong>ependency Inversion Principle</h2><p><img src=\"/images/dip.jpg\" alt=\"hoa\"></p>\n<p>Nguyn l ny c pht biu nh sau:</p>\n<blockquote>\n<ol>\n<li>High-level modules should not depend on low-level modules. Both should depend on abstractions.</li>\n<li>Abstractions should not depend upon details. Details should depend upon abstractions.</li>\n</ol>\n</blockquote>\n<p>Dch st ngha s l:</p>\n<blockquote>\n<ol>\n<li>Module cp cao khng nn ph thuc vo module cp thp hn. C hai nn ph thuc vo abstractions.</li>\n<li>Abstractions khng nn ph thuc vo details. Details nn ph thuc vo abstractions</li>\n</ol>\n</blockquote>\n<p>Quay tr li v d promotion ban u, gi s ta vit m ngun nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># app/checkout.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Checkout</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_bill</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    PromotionTypeA.promotion_type_a(cart)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeA</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">promotion_type_a</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Trong on m ngun trn y, method get_bill trong class Checkout ph thuc vo class PromotionTypeA. R rng l nh vy, cu hi l nu ta c PromotionTypeB, PromotionTypeC Th phi lm sao?</p>\n<p>Chng ta s phi vit 3 method get_bill ng vi PromotionTypeA, PromotionTypeB v PromotionTypeC hay sao?</p>\n<p> cng l mt cch, nhng  l cch  vi phm nguyn l DIP, khi m cc module ph thuc ln nhau.</p>\n<p> gii quyt vn  ny ta c th vit li m ngun nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># app/checkout.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Checkout</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_bill</span><span class=\"params\">(cart, PromotionType)</span></span></span><br><span class=\"line\">    PromotionType.get_promotion(cart)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeA</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">get_promotion</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># get_bill vi PromotionTypeA</span></span><br><span class=\"line\">Checkout.new.get_bill(cart, PromotionTypeA)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  vit thm PromotionTypeB, ta vit thm mt class PromotionTypeB v truyn PromotionTypeB vo get_bill method.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># app/promotion/promotion_type_a.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PromotionTypeB</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">get_promotion</span><span class=\"params\">(cart)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># do something</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Checkout.new.get_bill(cart, PromotionTypeB)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Tham-khao\"><a href=\"#Tham-khao\" class=\"headerlink\" title=\"Tham kho\"></a>Tham kho</h2><p>[1] <a href=\"https://en.wikipedia.org/wiki/SOLID\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/SOLID</a></p>\n"},{"title":"Symbol V String Trong Ruby","date":"2019-06-08T17:00:00.000Z","draft":false,"_content":"\n## t vn \n\nSymbol l khi nim rt quen tai v quen tay vi lp trnh vin ruby, t hn ai cng  tng nghe khng t th nhiu, bn thn symbol cng xut hin rt thng xuyn trong rails framework.\n\nKhi ti l thc tp sinh, ti nhn c nhiu li khuyn v vic nn s dng symbol nhng cha tng c nghe 1 l gii  r rng v vic v sao nn s dng n, m c l ti cng khng thch n, s xut hin ca symbol lm c php trong rails khng thng nht khi c th vit nhiu kiu  biu hin cng mt  ngha. Ti khng thch vic khng ng b  cht no.\n\nC mt l gii n gin v d nh  phn bit gia 2 i tng ny  l: Symbol m gi tr ging nhau th c cng object_id, cn String th d gi tr ging nhau, mi chui vn s c mt object_id khc nhau.\nLiu l gii ny  ? Hy cng tm hiu.\n\n## Lun bn\n\n## 1. Khai bo v t tng\n\n khai bo mt symbol bn thm du **:** ng trc.\n\n```ruby\n:meo\n\n:\"meo\"\n```\n\nn gin nh trn, ta  khai bo bng 2 cch khc nhau. Nhng thc t ruby hiu l chng cng l 1 symbol.\n\nim cn phi ni r trc khi i xung cc phn sau  l:\n\n1. Symbol thc cht cng l mt String.\n\n2. Symbol l mt [immutable](https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html).\n\n## 2. Mutable v Immutable\n\nTi  tng trnh by mt bi vit v ch  ny. Cc bn c th tham kho ti [y](https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html).\n\nNhng ni mt cch vn tt th bin X l mt immutable khi m vng nh lu gi tr ca X khng th c thay i gi tr.\n\nNh trnh by  mc 1, symbol l immutable (khc vi string th l mutable).\n\nChng ta c th kt lun rng, symbol thc cht l mt string c tnh cht bt bin gi tr (immutable).\n\nCu hi t ra l: Ti sao ti li cn nhng bin khng th thay i gi tr?\n\n1. Trong qu trnh lp trnh, chng ta cn mt s bin khng th b thay i gi tr trong qu trnh s dng,  m bo tnh ng n ca chng trnh. (Ti khng c v d c th no).\n\n2. V l mutable, nn mi khi mt string c gi, bt k l cc chui c ging nhau hay khng, ruby lun to ra mt vng nh mi cho chng.\n\n```ruby\n\"Chinh\".object_id\n#  => 70159285001700\n\"Chinh\".object_id\n# => 70159284996100\n\"Chinh\".object_id\n# => 70159289079920\n```\n\nBa chui cng mt ni dung, nhng khi c gi th li c 3 object_id khc nhau, chng t rng d cng gi tr nhng ruby coi chng l 3 i tng khc nhau v lu tr mi vng nh ring cho tng chui.\n\n**Vn  pht sinh t y khi m  vng nh b lng ph.**\n\nHy cng th vi symbol.\n\n```ruby\n:\"Chinh\".object_id\n# => 1271588\n:\"Chinh\".object_id\n# => 1271588\n:\"Chinh\".object_id\n# => 1271588\n```\n\nTht tuyt, vy l bng mt cch no , khi s dng symbol, ruby bit c symbol ny  tn ti hay cha, nu tn ti ri th khi c gi chng s dng li i tng  c ch khng to thm vng nh mi.\n\n## 3. Symbol v String c lu tr nh no.\n\nMt tiu  c v bun ci, v ci i tng trong ruby tt nhin c lu  b nh trong vi phn vng gi l heap.\n\nHin nhin String khng ngoi l.\n\nNu String c lu tr mt cch bnh thng v khng th kim sot xem n lu nhng g (v n l mutable). Nn khi to ra mt i tng String mi, Ruby s tm mt vng nh trng v lu n ti  v khng quan tm xem l c bao nhiu String ang hot ng trong chng trnh c ni dung ging nhau.\n\nVy Symbol th sao? Nh  trnh by  mc trn th bng cch no  m ruby c th bit c symbol  tn ti hay cha, nu tn ti th xi li cn cha th mi to ra vng nh mi. Vy chng lm vy bng cch no?\n\nThc ra khng h c php mu no  y c, mun truy vt symbol nh ni  trn th chng buc phi c lu tr v qun l di 1 dng c s d liu no .\n\nS tht l Symbol c lu tr thnh mt table (thi c tm gi l vy), trong sut qu trnh vn hnh mt chng trnh. C tng tng nh vic bn c 1 bng trong excel, v khi c mt d liu mi c yu cu, bn s tra trong bng excel ny trc coi c cha, nu c ri th ly ra xi li. Cn nu khng c? th s lm 2 vic:\n\n1. To d liu .\n2. Lu li trong bng  ln sau tra cu.\n\n ly gi tr trong table lu symbol ni trn ta c th dng lnh:\n\n```ruby\nputs Symbol.all_symbols\n# hoc ly tng s symbol  c lu tr trong chng trnh.\nputs Symbol.all_symbols.size\n```\n\n## 4. V tc  thc thi\n\nQua nhng g  phn tch. Ta rt ra mt kt lun l Symbol th tit kim vng nh mt cch ng k so vi String (xem li c ch lu vo table bn trn).\n\nNhng vy ngoi ra th chng cn g khc bit na khng? V performance th sao?\n\nCu tr li l Symbol vn ni tri hn String  tc  thc thi:\n\n1. Trong trng hp to mt i tng mi: Symbol c th s dng li, cn String th lun lun to mi. a vy th to mi String phi nhanh hn ch ta. V n khng cn qut li bng table symbols m lun lun to i tng mi, trong khi  th Symbol phi qut li trc ri nu khng c mi to i tng.\n\nNhng mi th khng n gin nh vy, Trong ruby c mt module gi tt l GC c chc nng thu gm \"rc\", rc  y l cc string c khai bo nhng khng cn s dng, GC s thu hi vng nh ca chng  ly khng gian cho cc i tng khc. y l mt cng vic vt v.\n\nFlow n gin ca n s l:  GC qut cc i tng => nh du cc i tng khng c s dng => Khi chng trnh trong thi gian rnh ri th GC s thu gm vng nh ca cc i tng b nh du. S tt khng t thi gian cho cng on ny.\n\nV vy v mt performance khi to i tng mi, Symbol vn ginh chin thng.\n\n2. Trong trng hp so snh 2 i tng: Chin thng mt ln na thuc v Symbol.\n\nL do th ln ny kh n gin: Khi cn so snh 2 symbol, ruby s vo symbols table v so snh l xong. Trong khi ngi anh em String th khng th v  so snh 2 chui, ruby s phi so snh tng k t trong chui ny vi tng k t trong chui kia. y li l mt cng vic vt v.\n\nV th l ta  hiu performance, Symbol win ez.\n\n th nghim bn c th s dng th vin benchmark  kim nghim kt lun.\n\n## 5. im yu ca Symbol\n\nNu Symbol ton nng, ton thin th  khng c l do g n khng thay th lun String. Bn cht ca im yu ca Symbol cng chnh l im mnh ca n.\n\n chnh l tnh cht immutable.\n\nV khng phi khi no cng cn mt i tng immutable, ti c mt input l tn ngi dng nhp vo. Ti mun chc chn l s lu tn ngi dng di dng ch hoa trong csdl. V vy ti chy method **upcase!**.\n\nTuy nhin, Symbol l immutable m phng thc **upcase!** li c mc tiu thay i gi tr ca i tng v th l chng trnh bn ra mt error v vic bn ang c thay i gi tr ca symbol.\n\nTrong trng hp ny r rng s dng String l iu hin nhin.\n","source":"_posts/2019-06-09-so-sanh-symbol-va-string-trong-ruby.md","raw":"---\ntitle: \"Symbol V String Trong Ruby\"\ndate: 2019-06-09\ndraft: false\ntags: [\"RUBY\"]\ncategories: [\"RUBY\"]\n---\n\n## t vn \n\nSymbol l khi nim rt quen tai v quen tay vi lp trnh vin ruby, t hn ai cng  tng nghe khng t th nhiu, bn thn symbol cng xut hin rt thng xuyn trong rails framework.\n\nKhi ti l thc tp sinh, ti nhn c nhiu li khuyn v vic nn s dng symbol nhng cha tng c nghe 1 l gii  r rng v vic v sao nn s dng n, m c l ti cng khng thch n, s xut hin ca symbol lm c php trong rails khng thng nht khi c th vit nhiu kiu  biu hin cng mt  ngha. Ti khng thch vic khng ng b  cht no.\n\nC mt l gii n gin v d nh  phn bit gia 2 i tng ny  l: Symbol m gi tr ging nhau th c cng object_id, cn String th d gi tr ging nhau, mi chui vn s c mt object_id khc nhau.\nLiu l gii ny  ? Hy cng tm hiu.\n\n## Lun bn\n\n## 1. Khai bo v t tng\n\n khai bo mt symbol bn thm du **:** ng trc.\n\n```ruby\n:meo\n\n:\"meo\"\n```\n\nn gin nh trn, ta  khai bo bng 2 cch khc nhau. Nhng thc t ruby hiu l chng cng l 1 symbol.\n\nim cn phi ni r trc khi i xung cc phn sau  l:\n\n1. Symbol thc cht cng l mt String.\n\n2. Symbol l mt [immutable](https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html).\n\n## 2. Mutable v Immutable\n\nTi  tng trnh by mt bi vit v ch  ny. Cc bn c th tham kho ti [y](https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html).\n\nNhng ni mt cch vn tt th bin X l mt immutable khi m vng nh lu gi tr ca X khng th c thay i gi tr.\n\nNh trnh by  mc 1, symbol l immutable (khc vi string th l mutable).\n\nChng ta c th kt lun rng, symbol thc cht l mt string c tnh cht bt bin gi tr (immutable).\n\nCu hi t ra l: Ti sao ti li cn nhng bin khng th thay i gi tr?\n\n1. Trong qu trnh lp trnh, chng ta cn mt s bin khng th b thay i gi tr trong qu trnh s dng,  m bo tnh ng n ca chng trnh. (Ti khng c v d c th no).\n\n2. V l mutable, nn mi khi mt string c gi, bt k l cc chui c ging nhau hay khng, ruby lun to ra mt vng nh mi cho chng.\n\n```ruby\n\"Chinh\".object_id\n#  => 70159285001700\n\"Chinh\".object_id\n# => 70159284996100\n\"Chinh\".object_id\n# => 70159289079920\n```\n\nBa chui cng mt ni dung, nhng khi c gi th li c 3 object_id khc nhau, chng t rng d cng gi tr nhng ruby coi chng l 3 i tng khc nhau v lu tr mi vng nh ring cho tng chui.\n\n**Vn  pht sinh t y khi m  vng nh b lng ph.**\n\nHy cng th vi symbol.\n\n```ruby\n:\"Chinh\".object_id\n# => 1271588\n:\"Chinh\".object_id\n# => 1271588\n:\"Chinh\".object_id\n# => 1271588\n```\n\nTht tuyt, vy l bng mt cch no , khi s dng symbol, ruby bit c symbol ny  tn ti hay cha, nu tn ti ri th khi c gi chng s dng li i tng  c ch khng to thm vng nh mi.\n\n## 3. Symbol v String c lu tr nh no.\n\nMt tiu  c v bun ci, v ci i tng trong ruby tt nhin c lu  b nh trong vi phn vng gi l heap.\n\nHin nhin String khng ngoi l.\n\nNu String c lu tr mt cch bnh thng v khng th kim sot xem n lu nhng g (v n l mutable). Nn khi to ra mt i tng String mi, Ruby s tm mt vng nh trng v lu n ti  v khng quan tm xem l c bao nhiu String ang hot ng trong chng trnh c ni dung ging nhau.\n\nVy Symbol th sao? Nh  trnh by  mc trn th bng cch no  m ruby c th bit c symbol  tn ti hay cha, nu tn ti th xi li cn cha th mi to ra vng nh mi. Vy chng lm vy bng cch no?\n\nThc ra khng h c php mu no  y c, mun truy vt symbol nh ni  trn th chng buc phi c lu tr v qun l di 1 dng c s d liu no .\n\nS tht l Symbol c lu tr thnh mt table (thi c tm gi l vy), trong sut qu trnh vn hnh mt chng trnh. C tng tng nh vic bn c 1 bng trong excel, v khi c mt d liu mi c yu cu, bn s tra trong bng excel ny trc coi c cha, nu c ri th ly ra xi li. Cn nu khng c? th s lm 2 vic:\n\n1. To d liu .\n2. Lu li trong bng  ln sau tra cu.\n\n ly gi tr trong table lu symbol ni trn ta c th dng lnh:\n\n```ruby\nputs Symbol.all_symbols\n# hoc ly tng s symbol  c lu tr trong chng trnh.\nputs Symbol.all_symbols.size\n```\n\n## 4. V tc  thc thi\n\nQua nhng g  phn tch. Ta rt ra mt kt lun l Symbol th tit kim vng nh mt cch ng k so vi String (xem li c ch lu vo table bn trn).\n\nNhng vy ngoi ra th chng cn g khc bit na khng? V performance th sao?\n\nCu tr li l Symbol vn ni tri hn String  tc  thc thi:\n\n1. Trong trng hp to mt i tng mi: Symbol c th s dng li, cn String th lun lun to mi. a vy th to mi String phi nhanh hn ch ta. V n khng cn qut li bng table symbols m lun lun to i tng mi, trong khi  th Symbol phi qut li trc ri nu khng c mi to i tng.\n\nNhng mi th khng n gin nh vy, Trong ruby c mt module gi tt l GC c chc nng thu gm \"rc\", rc  y l cc string c khai bo nhng khng cn s dng, GC s thu hi vng nh ca chng  ly khng gian cho cc i tng khc. y l mt cng vic vt v.\n\nFlow n gin ca n s l:  GC qut cc i tng => nh du cc i tng khng c s dng => Khi chng trnh trong thi gian rnh ri th GC s thu gm vng nh ca cc i tng b nh du. S tt khng t thi gian cho cng on ny.\n\nV vy v mt performance khi to i tng mi, Symbol vn ginh chin thng.\n\n2. Trong trng hp so snh 2 i tng: Chin thng mt ln na thuc v Symbol.\n\nL do th ln ny kh n gin: Khi cn so snh 2 symbol, ruby s vo symbols table v so snh l xong. Trong khi ngi anh em String th khng th v  so snh 2 chui, ruby s phi so snh tng k t trong chui ny vi tng k t trong chui kia. y li l mt cng vic vt v.\n\nV th l ta  hiu performance, Symbol win ez.\n\n th nghim bn c th s dng th vin benchmark  kim nghim kt lun.\n\n## 5. im yu ca Symbol\n\nNu Symbol ton nng, ton thin th  khng c l do g n khng thay th lun String. Bn cht ca im yu ca Symbol cng chnh l im mnh ca n.\n\n chnh l tnh cht immutable.\n\nV khng phi khi no cng cn mt i tng immutable, ti c mt input l tn ngi dng nhp vo. Ti mun chc chn l s lu tn ngi dng di dng ch hoa trong csdl. V vy ti chy method **upcase!**.\n\nTuy nhin, Symbol l immutable m phng thc **upcase!** li c mc tiu thay i gi tr ca i tng v th l chng trnh bn ra mt error v vic bn ang c thay i gi tr ca symbol.\n\nTrong trng hp ny r rng s dng String l iu hin nhin.\n","slug":"2019-06-09-so-sanh-symbol-va-string-trong-ruby","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsax001mp3m2epto803r","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Symbol l khi nim rt quen tai v quen tay vi lp trnh vin ruby, t hn ai cng  tng nghe khng t th nhiu, bn thn symbol cng xut hin rt thng xuyn trong rails framework.</p>\n<p>Khi ti l thc tp sinh, ti nhn c nhiu li khuyn v vic nn s dng symbol nhng cha tng c nghe 1 l gii  r rng v vic v sao nn s dng n, m c l ti cng khng thch n, s xut hin ca symbol lm c php trong rails khng thng nht khi c th vit nhiu kiu  biu hin cng mt  ngha. Ti khng thch vic khng ng b  cht no.</p>\n<p>C mt l gii n gin v d nh  phn bit gia 2 i tng ny  l: Symbol m gi tr ging nhau th c cng object_id, cn String th d gi tr ging nhau, mi chui vn s c mt object_id khc nhau.<br>Liu l gii ny  ? Hy cng tm hiu.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Khai-bao-va-tu-tuong\"><a href=\"#1-Khai-bao-va-tu-tuong\" class=\"headerlink\" title=\"1. Khai bo v t tng\"></a>1. Khai bo v t tng</h2><p> khai bo mt symbol bn thm du <strong>:</strong> ng trc.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">:meo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"meo\"</span></span></span><br></pre></td></tr></table></figure>\n\n<p>n gin nh trn, ta  khai bo bng 2 cch khc nhau. Nhng thc t ruby hiu l chng cng l 1 symbol.</p>\n<p>im cn phi ni r trc khi i xung cc phn sau  l:</p>\n<ol>\n<li><p>Symbol thc cht cng l mt String.</p>\n</li>\n<li><p>Symbol l mt <a href=\"https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html\" target=\"_blank\" rel=\"noopener\">immutable</a>.</p>\n</li>\n</ol>\n<h2 id=\"2-Mutable-va-Immutable\"><a href=\"#2-Mutable-va-Immutable\" class=\"headerlink\" title=\"2. Mutable v Immutable\"></a>2. Mutable v Immutable</h2><p>Ti  tng trnh by mt bi vit v ch  ny. Cc bn c th tham kho ti <a href=\"https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html\" target=\"_blank\" rel=\"noopener\">y</a>.</p>\n<p>Nhng ni mt cch vn tt th bin X l mt immutable khi m vng nh lu gi tr ca X khng th c thay i gi tr.</p>\n<p>Nh trnh by  mc 1, symbol l immutable (khc vi string th l mutable).</p>\n<p>Chng ta c th kt lun rng, symbol thc cht l mt string c tnh cht bt bin gi tr (immutable).</p>\n<p>Cu hi t ra l: Ti sao ti li cn nhng bin khng th thay i gi tr?</p>\n<ol>\n<li><p>Trong qu trnh lp trnh, chng ta cn mt s bin khng th b thay i gi tr trong qu trnh s dng,  m bo tnh ng n ca chng trnh. (Ti khng c v d c th no).</p>\n</li>\n<li><p>V l mutable, nn mi khi mt string c gi, bt k l cc chui c ging nhau hay khng, ruby lun to ra mt vng nh mi cho chng.</p>\n</li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\">#  =&gt; 70159285001700</span></span><br><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 70159284996100</span></span><br><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 70159289079920</span></span><br></pre></td></tr></table></figure>\n\n<p>Ba chui cng mt ni dung, nhng khi c gi th li c 3 object_id khc nhau, chng t rng d cng gi tr nhng ruby coi chng l 3 i tng khc nhau v lu tr mi vng nh ring cho tng chui.</p>\n<p><strong>Vn  pht sinh t y khi m  vng nh b lng ph.</strong></p>\n<p>Hy cng th vi symbol.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br></pre></td></tr></table></figure>\n\n<p>Tht tuyt, vy l bng mt cch no , khi s dng symbol, ruby bit c symbol ny  tn ti hay cha, nu tn ti ri th khi c gi chng s dng li i tng  c ch khng to thm vng nh mi.</p>\n<h2 id=\"3-Symbol-va-String-duoc-luu-tru-nhu-nao\"><a href=\"#3-Symbol-va-String-duoc-luu-tru-nhu-nao\" class=\"headerlink\" title=\"3. Symbol v String c lu tr nh no.\"></a>3. Symbol v String c lu tr nh no.</h2><p>Mt tiu  c v bun ci, v ci i tng trong ruby tt nhin c lu  b nh trong vi phn vng gi l heap.</p>\n<p>Hin nhin String khng ngoi l.</p>\n<p>Nu String c lu tr mt cch bnh thng v khng th kim sot xem n lu nhng g (v n l mutable). Nn khi to ra mt i tng String mi, Ruby s tm mt vng nh trng v lu n ti  v khng quan tm xem l c bao nhiu String ang hot ng trong chng trnh c ni dung ging nhau.</p>\n<p>Vy Symbol th sao? Nh  trnh by  mc trn th bng cch no  m ruby c th bit c symbol  tn ti hay cha, nu tn ti th xi li cn cha th mi to ra vng nh mi. Vy chng lm vy bng cch no?</p>\n<p>Thc ra khng h c php mu no  y c, mun truy vt symbol nh ni  trn th chng buc phi c lu tr v qun l di 1 dng c s d liu no .</p>\n<p>S tht l Symbol c lu tr thnh mt table (thi c tm gi l vy), trong sut qu trnh vn hnh mt chng trnh. C tng tng nh vic bn c 1 bng trong excel, v khi c mt d liu mi c yu cu, bn s tra trong bng excel ny trc coi c cha, nu c ri th ly ra xi li. Cn nu khng c? th s lm 2 vic:</p>\n<ol>\n<li>To d liu .</li>\n<li>Lu li trong bng  ln sau tra cu.</li>\n</ol>\n<p> ly gi tr trong table lu symbol ni trn ta c th dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">puts Symbol.all_symbols</span><br><span class=\"line\"><span class=\"comment\"># hoc ly tng s symbol  c lu tr trong chng trnh.</span></span><br><span class=\"line\">puts Symbol.all_symbols.size</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Ve-toc-do-thuc-thi\"><a href=\"#4-Ve-toc-do-thuc-thi\" class=\"headerlink\" title=\"4. V tc  thc thi\"></a>4. V tc  thc thi</h2><p>Qua nhng g  phn tch. Ta rt ra mt kt lun l Symbol th tit kim vng nh mt cch ng k so vi String (xem li c ch lu vo table bn trn).</p>\n<p>Nhng vy ngoi ra th chng cn g khc bit na khng? V performance th sao?</p>\n<p>Cu tr li l Symbol vn ni tri hn String  tc  thc thi:</p>\n<ol>\n<li>Trong trng hp to mt i tng mi: Symbol c th s dng li, cn String th lun lun to mi. a vy th to mi String phi nhanh hn ch ta. V n khng cn qut li bng table symbols m lun lun to i tng mi, trong khi  th Symbol phi qut li trc ri nu khng c mi to i tng.</li>\n</ol>\n<p>Nhng mi th khng n gin nh vy, Trong ruby c mt module gi tt l GC c chc nng thu gm rc, rc  y l cc string c khai bo nhng khng cn s dng, GC s thu hi vng nh ca chng  ly khng gian cho cc i tng khc. y l mt cng vic vt v.</p>\n<p>Flow n gin ca n s l:  GC qut cc i tng =&gt; nh du cc i tng khng c s dng =&gt; Khi chng trnh trong thi gian rnh ri th GC s thu gm vng nh ca cc i tng b nh du. S tt khng t thi gian cho cng on ny.</p>\n<p>V vy v mt performance khi to i tng mi, Symbol vn ginh chin thng.</p>\n<ol start=\"2\">\n<li>Trong trng hp so snh 2 i tng: Chin thng mt ln na thuc v Symbol.</li>\n</ol>\n<p>L do th ln ny kh n gin: Khi cn so snh 2 symbol, ruby s vo symbols table v so snh l xong. Trong khi ngi anh em String th khng th v  so snh 2 chui, ruby s phi so snh tng k t trong chui ny vi tng k t trong chui kia. y li l mt cng vic vt v.</p>\n<p>V th l ta  hiu performance, Symbol win ez.</p>\n<p> th nghim bn c th s dng th vin benchmark  kim nghim kt lun.</p>\n<h2 id=\"5-Diem-yeu-cua-Symbol\"><a href=\"#5-Diem-yeu-cua-Symbol\" class=\"headerlink\" title=\"5. im yu ca Symbol\"></a>5. im yu ca Symbol</h2><p>Nu Symbol ton nng, ton thin th  khng c l do g n khng thay th lun String. Bn cht ca im yu ca Symbol cng chnh l im mnh ca n.</p>\n<p> chnh l tnh cht immutable.</p>\n<p>V khng phi khi no cng cn mt i tng immutable, ti c mt input l tn ngi dng nhp vo. Ti mun chc chn l s lu tn ngi dng di dng ch hoa trong csdl. V vy ti chy method <strong>upcase!</strong>.</p>\n<p>Tuy nhin, Symbol l immutable m phng thc <strong>upcase!</strong> li c mc tiu thay i gi tr ca i tng v th l chng trnh bn ra mt error v vic bn ang c thay i gi tr ca symbol.</p>\n<p>Trong trng hp ny r rng s dng String l iu hin nhin.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Symbol l khi nim rt quen tai v quen tay vi lp trnh vin ruby, t hn ai cng  tng nghe khng t th nhiu, bn thn symbol cng xut hin rt thng xuyn trong rails framework.</p>\n<p>Khi ti l thc tp sinh, ti nhn c nhiu li khuyn v vic nn s dng symbol nhng cha tng c nghe 1 l gii  r rng v vic v sao nn s dng n, m c l ti cng khng thch n, s xut hin ca symbol lm c php trong rails khng thng nht khi c th vit nhiu kiu  biu hin cng mt  ngha. Ti khng thch vic khng ng b  cht no.</p>\n<p>C mt l gii n gin v d nh  phn bit gia 2 i tng ny  l: Symbol m gi tr ging nhau th c cng object_id, cn String th d gi tr ging nhau, mi chui vn s c mt object_id khc nhau.<br>Liu l gii ny  ? Hy cng tm hiu.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Khai-bao-va-tu-tuong\"><a href=\"#1-Khai-bao-va-tu-tuong\" class=\"headerlink\" title=\"1. Khai bo v t tng\"></a>1. Khai bo v t tng</h2><p> khai bo mt symbol bn thm du <strong>:</strong> ng trc.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">:meo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"meo\"</span></span></span><br></pre></td></tr></table></figure>\n\n<p>n gin nh trn, ta  khai bo bng 2 cch khc nhau. Nhng thc t ruby hiu l chng cng l 1 symbol.</p>\n<p>im cn phi ni r trc khi i xung cc phn sau  l:</p>\n<ol>\n<li><p>Symbol thc cht cng l mt String.</p>\n</li>\n<li><p>Symbol l mt <a href=\"https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html\" target=\"_blank\" rel=\"noopener\">immutable</a>.</p>\n</li>\n</ol>\n<h2 id=\"2-Mutable-va-Immutable\"><a href=\"#2-Mutable-va-Immutable\" class=\"headerlink\" title=\"2. Mutable v Immutable\"></a>2. Mutable v Immutable</h2><p>Ti  tng trnh by mt bi vit v ch  ny. Cc bn c th tham kho ti <a href=\"https://hdchinh.com/programing/2019/04/08/immutable-va-mutable-trong-ruby.html\" target=\"_blank\" rel=\"noopener\">y</a>.</p>\n<p>Nhng ni mt cch vn tt th bin X l mt immutable khi m vng nh lu gi tr ca X khng th c thay i gi tr.</p>\n<p>Nh trnh by  mc 1, symbol l immutable (khc vi string th l mutable).</p>\n<p>Chng ta c th kt lun rng, symbol thc cht l mt string c tnh cht bt bin gi tr (immutable).</p>\n<p>Cu hi t ra l: Ti sao ti li cn nhng bin khng th thay i gi tr?</p>\n<ol>\n<li><p>Trong qu trnh lp trnh, chng ta cn mt s bin khng th b thay i gi tr trong qu trnh s dng,  m bo tnh ng n ca chng trnh. (Ti khng c v d c th no).</p>\n</li>\n<li><p>V l mutable, nn mi khi mt string c gi, bt k l cc chui c ging nhau hay khng, ruby lun to ra mt vng nh mi cho chng.</p>\n</li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\">#  =&gt; 70159285001700</span></span><br><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 70159284996100</span></span><br><span class=\"line\"><span class=\"string\">\"Chinh\"</span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 70159289079920</span></span><br></pre></td></tr></table></figure>\n\n<p>Ba chui cng mt ni dung, nhng khi c gi th li c 3 object_id khc nhau, chng t rng d cng gi tr nhng ruby coi chng l 3 i tng khc nhau v lu tr mi vng nh ring cho tng chui.</p>\n<p><strong>Vn  pht sinh t y khi m  vng nh b lng ph.</strong></p>\n<p>Hy cng th vi symbol.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br><span class=\"line\"><span class=\"symbol\">:<span class=\"string\">\"Chinh\"</span></span>.object_id</span><br><span class=\"line\"><span class=\"comment\"># =&gt; 1271588</span></span><br></pre></td></tr></table></figure>\n\n<p>Tht tuyt, vy l bng mt cch no , khi s dng symbol, ruby bit c symbol ny  tn ti hay cha, nu tn ti ri th khi c gi chng s dng li i tng  c ch khng to thm vng nh mi.</p>\n<h2 id=\"3-Symbol-va-String-duoc-luu-tru-nhu-nao\"><a href=\"#3-Symbol-va-String-duoc-luu-tru-nhu-nao\" class=\"headerlink\" title=\"3. Symbol v String c lu tr nh no.\"></a>3. Symbol v String c lu tr nh no.</h2><p>Mt tiu  c v bun ci, v ci i tng trong ruby tt nhin c lu  b nh trong vi phn vng gi l heap.</p>\n<p>Hin nhin String khng ngoi l.</p>\n<p>Nu String c lu tr mt cch bnh thng v khng th kim sot xem n lu nhng g (v n l mutable). Nn khi to ra mt i tng String mi, Ruby s tm mt vng nh trng v lu n ti  v khng quan tm xem l c bao nhiu String ang hot ng trong chng trnh c ni dung ging nhau.</p>\n<p>Vy Symbol th sao? Nh  trnh by  mc trn th bng cch no  m ruby c th bit c symbol  tn ti hay cha, nu tn ti th xi li cn cha th mi to ra vng nh mi. Vy chng lm vy bng cch no?</p>\n<p>Thc ra khng h c php mu no  y c, mun truy vt symbol nh ni  trn th chng buc phi c lu tr v qun l di 1 dng c s d liu no .</p>\n<p>S tht l Symbol c lu tr thnh mt table (thi c tm gi l vy), trong sut qu trnh vn hnh mt chng trnh. C tng tng nh vic bn c 1 bng trong excel, v khi c mt d liu mi c yu cu, bn s tra trong bng excel ny trc coi c cha, nu c ri th ly ra xi li. Cn nu khng c? th s lm 2 vic:</p>\n<ol>\n<li>To d liu .</li>\n<li>Lu li trong bng  ln sau tra cu.</li>\n</ol>\n<p> ly gi tr trong table lu symbol ni trn ta c th dng lnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">puts Symbol.all_symbols</span><br><span class=\"line\"><span class=\"comment\"># hoc ly tng s symbol  c lu tr trong chng trnh.</span></span><br><span class=\"line\">puts Symbol.all_symbols.size</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Ve-toc-do-thuc-thi\"><a href=\"#4-Ve-toc-do-thuc-thi\" class=\"headerlink\" title=\"4. V tc  thc thi\"></a>4. V tc  thc thi</h2><p>Qua nhng g  phn tch. Ta rt ra mt kt lun l Symbol th tit kim vng nh mt cch ng k so vi String (xem li c ch lu vo table bn trn).</p>\n<p>Nhng vy ngoi ra th chng cn g khc bit na khng? V performance th sao?</p>\n<p>Cu tr li l Symbol vn ni tri hn String  tc  thc thi:</p>\n<ol>\n<li>Trong trng hp to mt i tng mi: Symbol c th s dng li, cn String th lun lun to mi. a vy th to mi String phi nhanh hn ch ta. V n khng cn qut li bng table symbols m lun lun to i tng mi, trong khi  th Symbol phi qut li trc ri nu khng c mi to i tng.</li>\n</ol>\n<p>Nhng mi th khng n gin nh vy, Trong ruby c mt module gi tt l GC c chc nng thu gm rc, rc  y l cc string c khai bo nhng khng cn s dng, GC s thu hi vng nh ca chng  ly khng gian cho cc i tng khc. y l mt cng vic vt v.</p>\n<p>Flow n gin ca n s l:  GC qut cc i tng =&gt; nh du cc i tng khng c s dng =&gt; Khi chng trnh trong thi gian rnh ri th GC s thu gm vng nh ca cc i tng b nh du. S tt khng t thi gian cho cng on ny.</p>\n<p>V vy v mt performance khi to i tng mi, Symbol vn ginh chin thng.</p>\n<ol start=\"2\">\n<li>Trong trng hp so snh 2 i tng: Chin thng mt ln na thuc v Symbol.</li>\n</ol>\n<p>L do th ln ny kh n gin: Khi cn so snh 2 symbol, ruby s vo symbols table v so snh l xong. Trong khi ngi anh em String th khng th v  so snh 2 chui, ruby s phi so snh tng k t trong chui ny vi tng k t trong chui kia. y li l mt cng vic vt v.</p>\n<p>V th l ta  hiu performance, Symbol win ez.</p>\n<p> th nghim bn c th s dng th vin benchmark  kim nghim kt lun.</p>\n<h2 id=\"5-Diem-yeu-cua-Symbol\"><a href=\"#5-Diem-yeu-cua-Symbol\" class=\"headerlink\" title=\"5. im yu ca Symbol\"></a>5. im yu ca Symbol</h2><p>Nu Symbol ton nng, ton thin th  khng c l do g n khng thay th lun String. Bn cht ca im yu ca Symbol cng chnh l im mnh ca n.</p>\n<p> chnh l tnh cht immutable.</p>\n<p>V khng phi khi no cng cn mt i tng immutable, ti c mt input l tn ngi dng nhp vo. Ti mun chc chn l s lu tn ngi dng di dng ch hoa trong csdl. V vy ti chy method <strong>upcase!</strong>.</p>\n<p>Tuy nhin, Symbol l immutable m phng thc <strong>upcase!</strong> li c mc tiu thay i gi tr ca i tng v th l chng trnh bn ra mt error v vic bn ang c thay i gi tr ca symbol.</p>\n<p>Trong trng hp ny r rng s dng String l iu hin nhin.</p>\n"},{"title":"Tn Cng SQL Injection","date":"2019-06-07T17:00:00.000Z","draft":false,"_content":"\n## t vn \n\nTrong project ca bn,  bao gi bn s dng cu lnh c dng nh:\n\n```ruby\n  Product.where(\"product_name = 'Meo con di lon ton' \")\n```\n\nNu c, th bn  v tnh to mt l hng v an ton cho website ca mnh. Hy cng tm hiu v sao li nh vy.\n\n## Lun bn\n\n## 1. Tm hiu v Sql Injection\n\nQuay li v d bn trn, ni dung cu lnh ny nhm ly ra sn phm c tn l **Meo con di lon ton**. Vy c g sai nh?\n\n ni r hn, th cu lnh ny l mt cu lnh c support bi 1 th vin ORM mc nh trong rails tn l ActiveRecord. N s c phin dch thnh m sql nh sau:\n\n```sql\n  SELECT  \"products\".* FROM \"products\" WHERE (product_name = 'Meo con di lon ton')\n```\n\ny vn l mt cu lnh quen thuc, v nhn qua th khng thy g sai tri c.\n\nFlow hot ng ca website ca ti bnh yn nh vy m ta.\n\n1. Ngi dng submit ln server product_name.\n\n2. Code x l  server s ly product_name ngi dng truyn ln v thc hin truy vn nh trn.\n\n3. Tr v kt qu cho ngi dng.\n\nVy c g m khng n?\n\nVi nhng ngi dng thng thng th. ng, m ngun ca chng ta hon ton n. Nhng nu bn l mt ng ch giu c ca mt website ni ting, v c nhiu k ght bn v bn giu hoc nhn mt bn thy ght v mun tm cch ph hoi website bn th sao?\n\n**Vy l thay v gi mt product_name thng thng nh \"iphone x\", \"gh tnh yu\"...Th h li gi mt product_name c dng nh  **chinh' or '' = '****\n\nLc ny truy vn ca chng ta s tr thnh:\n\n```ruby\n  Product.where(\"product_name = 'chinh' OR ''=''\")\n```\n\nChuyn sang dng Sql:\n\n```sql\n  SELECT  \"products\".* FROM \"products\" WHERE (product_name = 'chinh' or '' = '')\n```\n\nV iu kin trong where lun tr v true bt k product_name c bng 'xxx' hay khng (v '' th lun lun bng '' :smile:). Nn cu truy vn ny s tr v ton b bng products.\n\nV nh vy d liu website ca bn  b l trc nhng k khng ly g lm tt p.\n\nTrn y ch l mt v d s si, trong thc t d liu ca bn s quan trng hn nhiu l ci products information nh trn. C th l thng tin lin lc, a ch nh, thng tin ti khon ngn hng...\n\n## 2. Cch phng trnh Sql Injection trong rails.\n\nC th thy khi  query dng string nh trn th rt d b khai thc, v ActiveRecord s khng th validate gi tr input m ngi dng nhp vo c hp l hay khng. Vy cch tt nht  chng li Sql injection chnh l s dng query theo params thay v s dng chui nh trn.\n\nThay v vit:\n\n```ruby\n  Product.where(\"product_name  = 'Meo con di lon ton'\")\n```\n\nTa c th vit di dng params query nh sau:\n\n```ruby\n  Product.where(product_name: 'Meo con di lon ton')\n  # hoc\n  Product.where('product_name = ?', ['Meo con di lon ton'])\n  # hoc\n  Product.where('product_name = :product_name', {:product_name => 'Meo con di lon ton'})\n```\n\nVi cc cch thay th, gi tr ngi dng truyn vo s c m bo hp l trc khi c d liu tr v...\n\n\n## Kt lun.\n\ny l mt bi s si, ngn gn v khi qut cho ngi mi tm hiu v sql injection. Khng phi bi vit chuyn su dnh cho ngi c nhiu kinh nghim. Hy  li tho lun nu bn c thc mc.\n","source":"_posts/2019-06-08-tan-cong-sql-injection-va-cach-phong-chong-trong-rails.md","raw":"---\ntitle: \"Tn Cng SQL Injection\"\ndate: 2019-06-08\ndraft: false\ntags: [\"SECURE\", \"RAILS\"]\ncategories: [\"RAILS\"]\n\n---\n\n## t vn \n\nTrong project ca bn,  bao gi bn s dng cu lnh c dng nh:\n\n```ruby\n  Product.where(\"product_name = 'Meo con di lon ton' \")\n```\n\nNu c, th bn  v tnh to mt l hng v an ton cho website ca mnh. Hy cng tm hiu v sao li nh vy.\n\n## Lun bn\n\n## 1. Tm hiu v Sql Injection\n\nQuay li v d bn trn, ni dung cu lnh ny nhm ly ra sn phm c tn l **Meo con di lon ton**. Vy c g sai nh?\n\n ni r hn, th cu lnh ny l mt cu lnh c support bi 1 th vin ORM mc nh trong rails tn l ActiveRecord. N s c phin dch thnh m sql nh sau:\n\n```sql\n  SELECT  \"products\".* FROM \"products\" WHERE (product_name = 'Meo con di lon ton')\n```\n\ny vn l mt cu lnh quen thuc, v nhn qua th khng thy g sai tri c.\n\nFlow hot ng ca website ca ti bnh yn nh vy m ta.\n\n1. Ngi dng submit ln server product_name.\n\n2. Code x l  server s ly product_name ngi dng truyn ln v thc hin truy vn nh trn.\n\n3. Tr v kt qu cho ngi dng.\n\nVy c g m khng n?\n\nVi nhng ngi dng thng thng th. ng, m ngun ca chng ta hon ton n. Nhng nu bn l mt ng ch giu c ca mt website ni ting, v c nhiu k ght bn v bn giu hoc nhn mt bn thy ght v mun tm cch ph hoi website bn th sao?\n\n**Vy l thay v gi mt product_name thng thng nh \"iphone x\", \"gh tnh yu\"...Th h li gi mt product_name c dng nh  **chinh' or '' = '****\n\nLc ny truy vn ca chng ta s tr thnh:\n\n```ruby\n  Product.where(\"product_name = 'chinh' OR ''=''\")\n```\n\nChuyn sang dng Sql:\n\n```sql\n  SELECT  \"products\".* FROM \"products\" WHERE (product_name = 'chinh' or '' = '')\n```\n\nV iu kin trong where lun tr v true bt k product_name c bng 'xxx' hay khng (v '' th lun lun bng '' :smile:). Nn cu truy vn ny s tr v ton b bng products.\n\nV nh vy d liu website ca bn  b l trc nhng k khng ly g lm tt p.\n\nTrn y ch l mt v d s si, trong thc t d liu ca bn s quan trng hn nhiu l ci products information nh trn. C th l thng tin lin lc, a ch nh, thng tin ti khon ngn hng...\n\n## 2. Cch phng trnh Sql Injection trong rails.\n\nC th thy khi  query dng string nh trn th rt d b khai thc, v ActiveRecord s khng th validate gi tr input m ngi dng nhp vo c hp l hay khng. Vy cch tt nht  chng li Sql injection chnh l s dng query theo params thay v s dng chui nh trn.\n\nThay v vit:\n\n```ruby\n  Product.where(\"product_name  = 'Meo con di lon ton'\")\n```\n\nTa c th vit di dng params query nh sau:\n\n```ruby\n  Product.where(product_name: 'Meo con di lon ton')\n  # hoc\n  Product.where('product_name = ?', ['Meo con di lon ton'])\n  # hoc\n  Product.where('product_name = :product_name', {:product_name => 'Meo con di lon ton'})\n```\n\nVi cc cch thay th, gi tr ngi dng truyn vo s c m bo hp l trc khi c d liu tr v...\n\n\n## Kt lun.\n\ny l mt bi s si, ngn gn v khi qut cho ngi mi tm hiu v sql injection. Khng phi bi vit chuyn su dnh cho ngi c nhiu kinh nghim. Hy  li tho lun nu bn c thc mc.\n","slug":"2019-06-08-tan-cong-sql-injection-va-cach-phong-chong-trong-rails","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb3001rp3m24xpf63g1","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Trong project ca bn,  bao gi bn s dng cu lnh c dng nh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name = 'Meo con di lon ton' \"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Nu c, th bn  v tnh to mt l hng v an ton cho website ca mnh. Hy cng tm hiu v sao li nh vy.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Tim-hieu-ve-Sql-Injection\"><a href=\"#1-Tim-hieu-ve-Sql-Injection\" class=\"headerlink\" title=\"1. Tm hiu v Sql Injection\"></a>1. Tm hiu v Sql Injection</h2><p>Quay li v d bn trn, ni dung cu lnh ny nhm ly ra sn phm c tn l <strong>Meo con di lon ton</strong>. Vy c g sai nh?</p>\n<p> ni r hn, th cu lnh ny l mt cu lnh c support bi 1 th vin ORM mc nh trong rails tn l ActiveRecord. N s c phin dch thnh m sql nh sau:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"string\">\"products\"</span>.* <span class=\"keyword\">FROM</span> <span class=\"string\">\"products\"</span> <span class=\"keyword\">WHERE</span> (product_name = <span class=\"string\">'Meo con di lon ton'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>y vn l mt cu lnh quen thuc, v nhn qua th khng thy g sai tri c.</p>\n<p>Flow hot ng ca website ca ti bnh yn nh vy m ta.</p>\n<ol>\n<li><p>Ngi dng submit ln server product_name.</p>\n</li>\n<li><p>Code x l  server s ly product_name ngi dng truyn ln v thc hin truy vn nh trn.</p>\n</li>\n<li><p>Tr v kt qu cho ngi dng.</p>\n</li>\n</ol>\n<p>Vy c g m khng n?</p>\n<p>Vi nhng ngi dng thng thng th. ng, m ngun ca chng ta hon ton n. Nhng nu bn l mt ng ch giu c ca mt website ni ting, v c nhiu k ght bn v bn giu hoc nhn mt bn thy ght v mun tm cch ph hoi website bn th sao?</p>\n<p><strong>Vy l thay v gi mt product_name thng thng nh iphone x, gh tnh yuTh h li gi mt product_name c dng nh  <strong>chinh or  = </strong></strong></p>\n<p>Lc ny truy vn ca chng ta s tr thnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name = 'chinh' OR ''=''\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Chuyn sang dng Sql:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"string\">\"products\"</span>.* <span class=\"keyword\">FROM</span> <span class=\"string\">\"products\"</span> <span class=\"keyword\">WHERE</span> (product_name = <span class=\"string\">'chinh'</span> <span class=\"keyword\">or</span> <span class=\"string\">''</span> = <span class=\"string\">''</span>)</span><br></pre></td></tr></table></figure>\n\n<p>V iu kin trong where lun tr v true bt k product_name c bng xxx hay khng (v  th lun lun bng  :smile:). Nn cu truy vn ny s tr v ton b bng products.</p>\n<p>V nh vy d liu website ca bn  b l trc nhng k khng ly g lm tt p.</p>\n<p>Trn y ch l mt v d s si, trong thc t d liu ca bn s quan trng hn nhiu l ci products information nh trn. C th l thng tin lin lc, a ch nh, thng tin ti khon ngn hng</p>\n<h2 id=\"2-Cach-phong-tranh-Sql-Injection-trong-rails\"><a href=\"#2-Cach-phong-tranh-Sql-Injection-trong-rails\" class=\"headerlink\" title=\"2. Cch phng trnh Sql Injection trong rails.\"></a>2. Cch phng trnh Sql Injection trong rails.</h2><p>C th thy khi  query dng string nh trn th rt d b khai thc, v ActiveRecord s khng th validate gi tr input m ngi dng nhp vo c hp l hay khng. Vy cch tt nht  chng li Sql injection chnh l s dng query theo params thay v s dng chui nh trn.</p>\n<p>Thay v vit:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name  = 'Meo con di lon ton'\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Ta c th vit di dng params query nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"symbol\">product_name:</span> <span class=\"string\">'Meo con di lon ton'</span>)</span><br><span class=\"line\"><span class=\"comment\"># hoc</span></span><br><span class=\"line\">Product.where(<span class=\"string\">'product_name = ?'</span>, [<span class=\"string\">'Meo con di lon ton'</span>])</span><br><span class=\"line\"><span class=\"comment\"># hoc</span></span><br><span class=\"line\">Product.where(<span class=\"string\">'product_name = :product_name'</span>, &#123;<span class=\"symbol\">:product_name</span> =&gt; <span class=\"string\">'Meo con di lon ton'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Vi cc cch thay th, gi tr ngi dng truyn vo s c m bo hp l trc khi c d liu tr v</p>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun.\"></a>Kt lun.</h2><p>y l mt bi s si, ngn gn v khi qut cho ngi mi tm hiu v sql injection. Khng phi bi vit chuyn su dnh cho ngi c nhiu kinh nghim. Hy  li tho lun nu bn c thc mc.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Trong project ca bn,  bao gi bn s dng cu lnh c dng nh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name = 'Meo con di lon ton' \"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Nu c, th bn  v tnh to mt l hng v an ton cho website ca mnh. Hy cng tm hiu v sao li nh vy.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Tim-hieu-ve-Sql-Injection\"><a href=\"#1-Tim-hieu-ve-Sql-Injection\" class=\"headerlink\" title=\"1. Tm hiu v Sql Injection\"></a>1. Tm hiu v Sql Injection</h2><p>Quay li v d bn trn, ni dung cu lnh ny nhm ly ra sn phm c tn l <strong>Meo con di lon ton</strong>. Vy c g sai nh?</p>\n<p> ni r hn, th cu lnh ny l mt cu lnh c support bi 1 th vin ORM mc nh trong rails tn l ActiveRecord. N s c phin dch thnh m sql nh sau:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"string\">\"products\"</span>.* <span class=\"keyword\">FROM</span> <span class=\"string\">\"products\"</span> <span class=\"keyword\">WHERE</span> (product_name = <span class=\"string\">'Meo con di lon ton'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>y vn l mt cu lnh quen thuc, v nhn qua th khng thy g sai tri c.</p>\n<p>Flow hot ng ca website ca ti bnh yn nh vy m ta.</p>\n<ol>\n<li><p>Ngi dng submit ln server product_name.</p>\n</li>\n<li><p>Code x l  server s ly product_name ngi dng truyn ln v thc hin truy vn nh trn.</p>\n</li>\n<li><p>Tr v kt qu cho ngi dng.</p>\n</li>\n</ol>\n<p>Vy c g m khng n?</p>\n<p>Vi nhng ngi dng thng thng th. ng, m ngun ca chng ta hon ton n. Nhng nu bn l mt ng ch giu c ca mt website ni ting, v c nhiu k ght bn v bn giu hoc nhn mt bn thy ght v mun tm cch ph hoi website bn th sao?</p>\n<p><strong>Vy l thay v gi mt product_name thng thng nh iphone x, gh tnh yuTh h li gi mt product_name c dng nh  <strong>chinh or  = </strong></strong></p>\n<p>Lc ny truy vn ca chng ta s tr thnh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name = 'chinh' OR ''=''\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Chuyn sang dng Sql:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"string\">\"products\"</span>.* <span class=\"keyword\">FROM</span> <span class=\"string\">\"products\"</span> <span class=\"keyword\">WHERE</span> (product_name = <span class=\"string\">'chinh'</span> <span class=\"keyword\">or</span> <span class=\"string\">''</span> = <span class=\"string\">''</span>)</span><br></pre></td></tr></table></figure>\n\n<p>V iu kin trong where lun tr v true bt k product_name c bng xxx hay khng (v  th lun lun bng  :smile:). Nn cu truy vn ny s tr v ton b bng products.</p>\n<p>V nh vy d liu website ca bn  b l trc nhng k khng ly g lm tt p.</p>\n<p>Trn y ch l mt v d s si, trong thc t d liu ca bn s quan trng hn nhiu l ci products information nh trn. C th l thng tin lin lc, a ch nh, thng tin ti khon ngn hng</p>\n<h2 id=\"2-Cach-phong-tranh-Sql-Injection-trong-rails\"><a href=\"#2-Cach-phong-tranh-Sql-Injection-trong-rails\" class=\"headerlink\" title=\"2. Cch phng trnh Sql Injection trong rails.\"></a>2. Cch phng trnh Sql Injection trong rails.</h2><p>C th thy khi  query dng string nh trn th rt d b khai thc, v ActiveRecord s khng th validate gi tr input m ngi dng nhp vo c hp l hay khng. Vy cch tt nht  chng li Sql injection chnh l s dng query theo params thay v s dng chui nh trn.</p>\n<p>Thay v vit:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"string\">\"product_name  = 'Meo con di lon ton'\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Ta c th vit di dng params query nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.where(<span class=\"symbol\">product_name:</span> <span class=\"string\">'Meo con di lon ton'</span>)</span><br><span class=\"line\"><span class=\"comment\"># hoc</span></span><br><span class=\"line\">Product.where(<span class=\"string\">'product_name = ?'</span>, [<span class=\"string\">'Meo con di lon ton'</span>])</span><br><span class=\"line\"><span class=\"comment\"># hoc</span></span><br><span class=\"line\">Product.where(<span class=\"string\">'product_name = :product_name'</span>, &#123;<span class=\"symbol\">:product_name</span> =&gt; <span class=\"string\">'Meo con di lon ton'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Vi cc cch thay th, gi tr ngi dng truyn vo s c m bo hp l trc khi c d liu tr v</p>\n<h2 id=\"Ket-luan\"><a href=\"#Ket-luan\" class=\"headerlink\" title=\"Kt lun.\"></a>Kt lun.</h2><p>y l mt bi s si, ngn gn v khi qut cho ngi mi tm hiu v sql injection. Khng phi bi vit chuyn su dnh cho ngi c nhiu kinh nghim. Hy  li tho lun nu bn c thc mc.</p>\n"},{"title":"Exception Trong Rails","date":"2019-06-09T17:00:00.000Z","draft":false,"_content":"\n## t vn \n\nTi c mt s tnh hung din ra hng ngy v con mo ca ti. Nu n i ti cho n n, nu n i vs lung tung ti s dn dp chng.\n\nNhng bng mt ngy con mo stupid ca ti b \"ngi ngoi hnh tinh bt cc\", wtf?. y l mt tnh hung khng bnh thng v ti khng c mt **HNH NG THNG NHT** no  i ph vi 1 tnh hung nh vy, ti c th khc, c th bo cng an, nhng chc chn khng th c mt cch gii quyt trit . Trong lp trnh ta gi nhng tnh hung m logic lun l sai lch khng cn i theo logic bnh thng nh ny l mt exception.\n\nV d nh my tnh ca bn khng c thit k  thc hin php chia cho s 0. Vy khi bn bt n thc hin php chia cho s 0, n s ngh \"wtf is going on?\" v nh qung ra cho bn mt thng bo v vic bn  bt n lm mt vic m n khng c thit k  lm.\n\nTrong bi vit ny chng ta s tm hiu v exception trong ruby.\n\n## Lun bn\n\n## 1. Tm hiu v Exception\n\nu tin chng ta phi ghi nh rng khi mt exception c gi, chng trnh ca bn s ngng v on code pha sau khng th chy c na.\n\n1. Ti n trng n con mo.\n\n2. Ti em con mo i bn vo qun tiu h.\n\nNu  **bc 1**, thay v n thnh cng con mo, ti li dnh mt exception \"MeoMissing\" v l do n b ngi ngoi hnh tinh bt cc.\n\nKhi ny d nhin chng trnh s dng li, v ti lm g cn con mo  m em n i bn   **bc 2**.\n\nQuay v vi v d n gin l chia cho s 0:\n\n```ruby\n10/0\n# => ZeroDivisionError (divided by 0)\n```\n\n**ZeroDivisionError** l mt exception c ruby to ra  tr v khi bn c chia mt s cho s 0.\n\n```\n  if (chia ng hong)\n    thc hin php tnh.\n  else\n    if (chia cho s 0)\n      tr v exception ZeroDivisionError\n    end\n  end\n```\n\nFlow logic n gin v exception nh trn.\n\n## 2. Lm sao  ly v i tng Exception\n\nNh chng ta  bit, gn nh mi th trong ruby u l object(Ngoi tr method v block). Vy nn Exception cng l mt i tng.\n\nZeroDivisionError  trn l mt Class, vy khi bn thc hin mt php chia cho s 0, bn  ri vo trng hp m ZeroDivisionError qun l v n s tr v mt i tng ZeroDivisionError.\n\nVy tc l  2 ln chia cho s 0 khc nhau, n s tr v cho bn 2 object exception khc nhau ch l cng mt class ZeroDivisionError.\n\nVy cch no  bt c i tng ny? C php  thc hin vic ny s nh sau:\n\n```ruby\nbegin\n  meo = 10\n  meo/0\nrescue ZeroDivisionError => e\n  puts \"Exception Class: #{ e.class.name }\"\n  puts \"Exception Message: #{ e.message }\"\nend\n```\n\n**rescue** l t kho s gip bn ly c i tng exception tr v. Nh v d trn ti ly i tng exeption tr v (nu exception  l dng ZeroDivisionError) v truyn n vo bin **e**. T y **e** chnh l object exception nu exception  xy ra.\n\nTi c th dng e  xut ra cc thng tin m ti cn nh class name hay message thng bo li.\n\n## 3. Xy dng mt class Exception\n\nMt s tht hin nhin l nhng thit k c sn khng bao gi c th cover cho tt c cc trng hp c th xy ra trong thc tin. i lc bn mun thm mt exception  cover cho trng hp ca ring d n ca bn th sao?\n\nCu tr li m ti mi tm c kh th v v cng rt quen thuc.  l Exception cng c th c to ra nh mt class bnh thng. Hy  n k tha lp **StandardError** l c.\n\n```ruby\nclass MeoException < StandardError; end\n\n```\n\nVy l ta  c mt class exception ca ring mnh. Khi cn gi n exception ny th ta s gi s dng phng thc **raise**  gi mt i tng.\n\n```ruby\nraise MeoException.new(params_gi_do_ma_ban_muon)\n```\n\nVy trong class class **MeoException** ta s thit k nhng g? :smile: Ti cng cha tm hiu.\n\n## 4. Cc lp Exception c sn trong Ruby\n\n![hoa](/images/ruby-exception.jpg)\n\ny l s  v cc lp exception trong ruby, nu ta rescue mt exception X, X li c dm 3 exception con, th ch cn chng trnh ca bn pht sinh vn  v tr ra mt exception con no  th X c gi.\n\n## 5. Cch bt Exception hp l\n\n**Cch 1:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue Exception => e\n  # do something\nend\n```\n\ny l mt cch t v khi rescue vi Exception, lp cha ca tt c cc Exception khc th n cover qu nhiu trng hp cng tr ra exception, hy nh li  trn chng ta  ni mt khi Exception c tr v th chng trnh ca bn s dng li. Vy nn khng s dng cch ny.\n\n**Cch 2:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue StandardError => e\n  # do something\nend\n```\n\ny l cch lm tt hn, v ta ch cover cc li standard, t ra chng trnh ca bn s khng thi thong b shutdown m khng bit v sao nh cch u tin.\n\n**Cch 3:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue MeoBiBatCoc, MeoBiDauChan => e\n  # do something\nend\n```\n\ny l cch tt nht, ta goi trc tip n trng hp ngoi l m ta cn bt ly v x l.\n","source":"_posts/2019-06-10-xu-ly-ngoai-le-trong-rails.md","raw":"---\ntitle: \"Exception Trong Rails\"\ndate: 2019-06-10\ndraft: false\ntags: [\"RAILS\"]\ncategories: [\"RAILS\"]\n---\n\n## t vn \n\nTi c mt s tnh hung din ra hng ngy v con mo ca ti. Nu n i ti cho n n, nu n i vs lung tung ti s dn dp chng.\n\nNhng bng mt ngy con mo stupid ca ti b \"ngi ngoi hnh tinh bt cc\", wtf?. y l mt tnh hung khng bnh thng v ti khng c mt **HNH NG THNG NHT** no  i ph vi 1 tnh hung nh vy, ti c th khc, c th bo cng an, nhng chc chn khng th c mt cch gii quyt trit . Trong lp trnh ta gi nhng tnh hung m logic lun l sai lch khng cn i theo logic bnh thng nh ny l mt exception.\n\nV d nh my tnh ca bn khng c thit k  thc hin php chia cho s 0. Vy khi bn bt n thc hin php chia cho s 0, n s ngh \"wtf is going on?\" v nh qung ra cho bn mt thng bo v vic bn  bt n lm mt vic m n khng c thit k  lm.\n\nTrong bi vit ny chng ta s tm hiu v exception trong ruby.\n\n## Lun bn\n\n## 1. Tm hiu v Exception\n\nu tin chng ta phi ghi nh rng khi mt exception c gi, chng trnh ca bn s ngng v on code pha sau khng th chy c na.\n\n1. Ti n trng n con mo.\n\n2. Ti em con mo i bn vo qun tiu h.\n\nNu  **bc 1**, thay v n thnh cng con mo, ti li dnh mt exception \"MeoMissing\" v l do n b ngi ngoi hnh tinh bt cc.\n\nKhi ny d nhin chng trnh s dng li, v ti lm g cn con mo  m em n i bn   **bc 2**.\n\nQuay v vi v d n gin l chia cho s 0:\n\n```ruby\n10/0\n# => ZeroDivisionError (divided by 0)\n```\n\n**ZeroDivisionError** l mt exception c ruby to ra  tr v khi bn c chia mt s cho s 0.\n\n```\n  if (chia ng hong)\n    thc hin php tnh.\n  else\n    if (chia cho s 0)\n      tr v exception ZeroDivisionError\n    end\n  end\n```\n\nFlow logic n gin v exception nh trn.\n\n## 2. Lm sao  ly v i tng Exception\n\nNh chng ta  bit, gn nh mi th trong ruby u l object(Ngoi tr method v block). Vy nn Exception cng l mt i tng.\n\nZeroDivisionError  trn l mt Class, vy khi bn thc hin mt php chia cho s 0, bn  ri vo trng hp m ZeroDivisionError qun l v n s tr v mt i tng ZeroDivisionError.\n\nVy tc l  2 ln chia cho s 0 khc nhau, n s tr v cho bn 2 object exception khc nhau ch l cng mt class ZeroDivisionError.\n\nVy cch no  bt c i tng ny? C php  thc hin vic ny s nh sau:\n\n```ruby\nbegin\n  meo = 10\n  meo/0\nrescue ZeroDivisionError => e\n  puts \"Exception Class: #{ e.class.name }\"\n  puts \"Exception Message: #{ e.message }\"\nend\n```\n\n**rescue** l t kho s gip bn ly c i tng exception tr v. Nh v d trn ti ly i tng exeption tr v (nu exception  l dng ZeroDivisionError) v truyn n vo bin **e**. T y **e** chnh l object exception nu exception  xy ra.\n\nTi c th dng e  xut ra cc thng tin m ti cn nh class name hay message thng bo li.\n\n## 3. Xy dng mt class Exception\n\nMt s tht hin nhin l nhng thit k c sn khng bao gi c th cover cho tt c cc trng hp c th xy ra trong thc tin. i lc bn mun thm mt exception  cover cho trng hp ca ring d n ca bn th sao?\n\nCu tr li m ti mi tm c kh th v v cng rt quen thuc.  l Exception cng c th c to ra nh mt class bnh thng. Hy  n k tha lp **StandardError** l c.\n\n```ruby\nclass MeoException < StandardError; end\n\n```\n\nVy l ta  c mt class exception ca ring mnh. Khi cn gi n exception ny th ta s gi s dng phng thc **raise**  gi mt i tng.\n\n```ruby\nraise MeoException.new(params_gi_do_ma_ban_muon)\n```\n\nVy trong class class **MeoException** ta s thit k nhng g? :smile: Ti cng cha tm hiu.\n\n## 4. Cc lp Exception c sn trong Ruby\n\n![hoa](/images/ruby-exception.jpg)\n\ny l s  v cc lp exception trong ruby, nu ta rescue mt exception X, X li c dm 3 exception con, th ch cn chng trnh ca bn pht sinh vn  v tr ra mt exception con no  th X c gi.\n\n## 5. Cch bt Exception hp l\n\n**Cch 1:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue Exception => e\n  # do something\nend\n```\n\ny l mt cch t v khi rescue vi Exception, lp cha ca tt c cc Exception khc th n cover qu nhiu trng hp cng tr ra exception, hy nh li  trn chng ta  ni mt khi Exception c tr v th chng trnh ca bn s dng li. Vy nn khng s dng cch ny.\n\n**Cch 2:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue StandardError => e\n  # do something\nend\n```\n\ny l cch lm tt hn, v ta ch cover cc li standard, t ra chng trnh ca bn s khng thi thong b shutdown m khng bit v sao nh cch u tin.\n\n**Cch 3:**\n\n```ruby\nbegin\n  di_don_con_meo_truong()\nrescue MeoBiBatCoc, MeoBiDauChan => e\n  # do something\nend\n```\n\ny l cch tt nht, ta goi trc tip n trng hp ngoi l m ta cn bt ly v x l.\n","slug":"2019-06-10-xu-ly-ngoai-le-trong-rails","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb4001up3m24ams57lp","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Ti c mt s tnh hung din ra hng ngy v con mo ca ti. Nu n i ti cho n n, nu n i vs lung tung ti s dn dp chng.</p>\n<p>Nhng bng mt ngy con mo stupid ca ti b ngi ngoi hnh tinh bt cc, wtf?. y l mt tnh hung khng bnh thng v ti khng c mt <strong>HNH NG THNG NHT</strong> no  i ph vi 1 tnh hung nh vy, ti c th khc, c th bo cng an, nhng chc chn khng th c mt cch gii quyt trit . Trong lp trnh ta gi nhng tnh hung m logic lun l sai lch khng cn i theo logic bnh thng nh ny l mt exception.</p>\n<p>V d nh my tnh ca bn khng c thit k  thc hin php chia cho s 0. Vy khi bn bt n thc hin php chia cho s 0, n s ngh wtf is going on? v nh qung ra cho bn mt thng bo v vic bn  bt n lm mt vic m n khng c thit k  lm.</p>\n<p>Trong bi vit ny chng ta s tm hiu v exception trong ruby.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Tim-hieu-ve-Exception\"><a href=\"#1-Tim-hieu-ve-Exception\" class=\"headerlink\" title=\"1. Tm hiu v Exception\"></a>1. Tm hiu v Exception</h2><p>u tin chng ta phi ghi nh rng khi mt exception c gi, chng trnh ca bn s ngng v on code pha sau khng th chy c na.</p>\n<ol>\n<li><p>Ti n trng n con mo.</p>\n</li>\n<li><p>Ti em con mo i bn vo qun tiu h.</p>\n</li>\n</ol>\n<p>Nu  <strong>bc 1</strong>, thay v n thnh cng con mo, ti li dnh mt exception MeoMissing v l do n b ngi ngoi hnh tinh bt cc.</p>\n<p>Khi ny d nhin chng trnh s dng li, v ti lm g cn con mo  m em n i bn   <strong>bc 2</strong>.</p>\n<p>Quay v vi v d n gin l chia cho s 0:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">10</span>/<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ZeroDivisionError (divided by 0)</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>ZeroDivisionError</strong> l mt exception c ruby to ra  tr v khi bn c chia mt s cho s 0.</p>\n<figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (chia ng hong)</span><br><span class=\"line\">  thc hin php tnh.</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (chia cho s <span class=\"number\">0</span>)</span><br><span class=\"line\">    tr v exception ZeroDivisionError</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Flow logic n gin v exception nh trn.</p>\n<h2 id=\"2-Lam-sao-de-lay-ve-doi-tuong-Exception\"><a href=\"#2-Lam-sao-de-lay-ve-doi-tuong-Exception\" class=\"headerlink\" title=\"2. Lm sao  ly v i tng Exception\"></a>2. Lm sao  ly v i tng Exception</h2><p>Nh chng ta  bit, gn nh mi th trong ruby u l object(Ngoi tr method v block). Vy nn Exception cng l mt i tng.</p>\n<p>ZeroDivisionError  trn l mt Class, vy khi bn thc hin mt php chia cho s 0, bn  ri vo trng hp m ZeroDivisionError qun l v n s tr v mt i tng ZeroDivisionError.</p>\n<p>Vy tc l  2 ln chia cho s 0 khc nhau, n s tr v cho bn 2 object exception khc nhau ch l cng mt class ZeroDivisionError.</p>\n<p>Vy cch no  bt c i tng ny? C php  thc hin vic ny s nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  meo = <span class=\"number\">10</span></span><br><span class=\"line\">  meo/<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">rescue</span> ZeroDivisionError =&gt; e</span><br><span class=\"line\">  puts <span class=\"string\">\"Exception Class: <span class=\"subst\">#&#123; e<span class=\"class\">.<span class=\"keyword\">class</span>.<span class=\"title\">name</span> &#125;\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">  puts <span class=\"string\">\"Exception Message: <span class=\"subst\">#&#123; e.message &#125;</span>\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"keyword\">end</span></span></span></span><br></pre></td></tr></table></figure>\n\n<p><strong>rescue</strong> l t kho s gip bn ly c i tng exception tr v. Nh v d trn ti ly i tng exeption tr v (nu exception  l dng ZeroDivisionError) v truyn n vo bin <strong>e</strong>. T y <strong>e</strong> chnh l object exception nu exception  xy ra.</p>\n<p>Ti c th dng e  xut ra cc thng tin m ti cn nh class name hay message thng bo li.</p>\n<h2 id=\"3-Xay-dung-mot-class-Exception\"><a href=\"#3-Xay-dung-mot-class-Exception\" class=\"headerlink\" title=\"3. Xy dng mt class Exception\"></a>3. Xy dng mt class Exception</h2><p>Mt s tht hin nhin l nhng thit k c sn khng bao gi c th cover cho tt c cc trng hp c th xy ra trong thc tin. i lc bn mun thm mt exception  cover cho trng hp ca ring d n ca bn th sao?</p>\n<p>Cu tr li m ti mi tm c kh th v v cng rt quen thuc.  l Exception cng c th c to ra nh mt class bnh thng. Hy  n k tha lp <strong>StandardError</strong> l c.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MeoException</span> &lt; StandardError;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy l ta  c mt class exception ca ring mnh. Khi cn gi n exception ny th ta s gi s dng phng thc <strong>raise</strong>  gi mt i tng.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">raise MeoException.new(params_gi_do_ma_ban_muon)</span><br></pre></td></tr></table></figure>\n\n<p>Vy trong class class <strong>MeoException</strong> ta s thit k nhng g? :smile: Ti cng cha tm hiu.</p>\n<h2 id=\"4-Cac-lop-Exception-co-san-trong-Ruby\"><a href=\"#4-Cac-lop-Exception-co-san-trong-Ruby\" class=\"headerlink\" title=\"4. Cc lp Exception c sn trong Ruby\"></a>4. Cc lp Exception c sn trong Ruby</h2><p><img src=\"/images/ruby-exception.jpg\" alt=\"hoa\"></p>\n<p>y l s  v cc lp exception trong ruby, nu ta rescue mt exception X, X li c dm 3 exception con, th ch cn chng trnh ca bn pht sinh vn  v tr ra mt exception con no  th X c gi.</p>\n<h2 id=\"5-Cach-bat-Exception-hop-ly\"><a href=\"#5-Cach-bat-Exception-hop-ly\" class=\"headerlink\" title=\"5. Cch bt Exception hp l\"></a>5. Cch bt Exception hp l</h2><p><strong>Cch 1:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> Exception =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l mt cch t v khi rescue vi Exception, lp cha ca tt c cc Exception khc th n cover qu nhiu trng hp cng tr ra exception, hy nh li  trn chng ta  ni mt khi Exception c tr v th chng trnh ca bn s dng li. Vy nn khng s dng cch ny.</p>\n<p><strong>Cch 2:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> StandardError =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l cch lm tt hn, v ta ch cover cc li standard, t ra chng trnh ca bn s khng thi thong b shutdown m khng bit v sao nh cch u tin.</p>\n<p><strong>Cch 3:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> MeoBiBatCoc, MeoBiDauChan =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l cch tt nht, ta goi trc tip n trng hp ngoi l m ta cn bt ly v x l.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Ti c mt s tnh hung din ra hng ngy v con mo ca ti. Nu n i ti cho n n, nu n i vs lung tung ti s dn dp chng.</p>\n<p>Nhng bng mt ngy con mo stupid ca ti b ngi ngoi hnh tinh bt cc, wtf?. y l mt tnh hung khng bnh thng v ti khng c mt <strong>HNH NG THNG NHT</strong> no  i ph vi 1 tnh hung nh vy, ti c th khc, c th bo cng an, nhng chc chn khng th c mt cch gii quyt trit . Trong lp trnh ta gi nhng tnh hung m logic lun l sai lch khng cn i theo logic bnh thng nh ny l mt exception.</p>\n<p>V d nh my tnh ca bn khng c thit k  thc hin php chia cho s 0. Vy khi bn bt n thc hin php chia cho s 0, n s ngh wtf is going on? v nh qung ra cho bn mt thng bo v vic bn  bt n lm mt vic m n khng c thit k  lm.</p>\n<p>Trong bi vit ny chng ta s tm hiu v exception trong ruby.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Tim-hieu-ve-Exception\"><a href=\"#1-Tim-hieu-ve-Exception\" class=\"headerlink\" title=\"1. Tm hiu v Exception\"></a>1. Tm hiu v Exception</h2><p>u tin chng ta phi ghi nh rng khi mt exception c gi, chng trnh ca bn s ngng v on code pha sau khng th chy c na.</p>\n<ol>\n<li><p>Ti n trng n con mo.</p>\n</li>\n<li><p>Ti em con mo i bn vo qun tiu h.</p>\n</li>\n</ol>\n<p>Nu  <strong>bc 1</strong>, thay v n thnh cng con mo, ti li dnh mt exception MeoMissing v l do n b ngi ngoi hnh tinh bt cc.</p>\n<p>Khi ny d nhin chng trnh s dng li, v ti lm g cn con mo  m em n i bn   <strong>bc 2</strong>.</p>\n<p>Quay v vi v d n gin l chia cho s 0:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">10</span>/<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ZeroDivisionError (divided by 0)</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>ZeroDivisionError</strong> l mt exception c ruby to ra  tr v khi bn c chia mt s cho s 0.</p>\n<figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (chia ng hong)</span><br><span class=\"line\">  thc hin php tnh.</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (chia cho s <span class=\"number\">0</span>)</span><br><span class=\"line\">    tr v exception ZeroDivisionError</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Flow logic n gin v exception nh trn.</p>\n<h2 id=\"2-Lam-sao-de-lay-ve-doi-tuong-Exception\"><a href=\"#2-Lam-sao-de-lay-ve-doi-tuong-Exception\" class=\"headerlink\" title=\"2. Lm sao  ly v i tng Exception\"></a>2. Lm sao  ly v i tng Exception</h2><p>Nh chng ta  bit, gn nh mi th trong ruby u l object(Ngoi tr method v block). Vy nn Exception cng l mt i tng.</p>\n<p>ZeroDivisionError  trn l mt Class, vy khi bn thc hin mt php chia cho s 0, bn  ri vo trng hp m ZeroDivisionError qun l v n s tr v mt i tng ZeroDivisionError.</p>\n<p>Vy tc l  2 ln chia cho s 0 khc nhau, n s tr v cho bn 2 object exception khc nhau ch l cng mt class ZeroDivisionError.</p>\n<p>Vy cch no  bt c i tng ny? C php  thc hin vic ny s nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  meo = <span class=\"number\">10</span></span><br><span class=\"line\">  meo/<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">rescue</span> ZeroDivisionError =&gt; e</span><br><span class=\"line\">  puts <span class=\"string\">\"Exception Class: <span class=\"subst\">#&#123; e<span class=\"class\">.<span class=\"keyword\">class</span>.<span class=\"title\">name</span> &#125;\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">  puts <span class=\"string\">\"Exception Message: <span class=\"subst\">#&#123; e.message &#125;</span>\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"keyword\">end</span></span></span></span><br></pre></td></tr></table></figure>\n\n<p><strong>rescue</strong> l t kho s gip bn ly c i tng exception tr v. Nh v d trn ti ly i tng exeption tr v (nu exception  l dng ZeroDivisionError) v truyn n vo bin <strong>e</strong>. T y <strong>e</strong> chnh l object exception nu exception  xy ra.</p>\n<p>Ti c th dng e  xut ra cc thng tin m ti cn nh class name hay message thng bo li.</p>\n<h2 id=\"3-Xay-dung-mot-class-Exception\"><a href=\"#3-Xay-dung-mot-class-Exception\" class=\"headerlink\" title=\"3. Xy dng mt class Exception\"></a>3. Xy dng mt class Exception</h2><p>Mt s tht hin nhin l nhng thit k c sn khng bao gi c th cover cho tt c cc trng hp c th xy ra trong thc tin. i lc bn mun thm mt exception  cover cho trng hp ca ring d n ca bn th sao?</p>\n<p>Cu tr li m ti mi tm c kh th v v cng rt quen thuc.  l Exception cng c th c to ra nh mt class bnh thng. Hy  n k tha lp <strong>StandardError</strong> l c.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MeoException</span> &lt; StandardError;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy l ta  c mt class exception ca ring mnh. Khi cn gi n exception ny th ta s gi s dng phng thc <strong>raise</strong>  gi mt i tng.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">raise MeoException.new(params_gi_do_ma_ban_muon)</span><br></pre></td></tr></table></figure>\n\n<p>Vy trong class class <strong>MeoException</strong> ta s thit k nhng g? :smile: Ti cng cha tm hiu.</p>\n<h2 id=\"4-Cac-lop-Exception-co-san-trong-Ruby\"><a href=\"#4-Cac-lop-Exception-co-san-trong-Ruby\" class=\"headerlink\" title=\"4. Cc lp Exception c sn trong Ruby\"></a>4. Cc lp Exception c sn trong Ruby</h2><p><img src=\"/images/ruby-exception.jpg\" alt=\"hoa\"></p>\n<p>y l s  v cc lp exception trong ruby, nu ta rescue mt exception X, X li c dm 3 exception con, th ch cn chng trnh ca bn pht sinh vn  v tr ra mt exception con no  th X c gi.</p>\n<h2 id=\"5-Cach-bat-Exception-hop-ly\"><a href=\"#5-Cach-bat-Exception-hop-ly\" class=\"headerlink\" title=\"5. Cch bt Exception hp l\"></a>5. Cch bt Exception hp l</h2><p><strong>Cch 1:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> Exception =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l mt cch t v khi rescue vi Exception, lp cha ca tt c cc Exception khc th n cover qu nhiu trng hp cng tr ra exception, hy nh li  trn chng ta  ni mt khi Exception c tr v th chng trnh ca bn s dng li. Vy nn khng s dng cch ny.</p>\n<p><strong>Cch 2:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> StandardError =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l cch lm tt hn, v ta ch cover cc li standard, t ra chng trnh ca bn s khng thi thong b shutdown m khng bit v sao nh cch u tin.</p>\n<p><strong>Cch 3:</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">begin</span></span><br><span class=\"line\">  di_don_con_meo_truong()</span><br><span class=\"line\"><span class=\"keyword\">rescue</span> MeoBiBatCoc, MeoBiDauChan =&gt; e</span><br><span class=\"line\">  <span class=\"comment\"># do something</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>y l cch tt nht, ta goi trc tip n trng hp ngoi l m ta cn bt ly v x l.</p>\n"},{"title":"So Snh Class Method V Scope","date":"2019-06-08T17:00:00.000Z","draft":false,"_content":"\nTi c 1 scope:\n\n```ruby\nclass Product < ActiveRecord::Base\n  scope :is_active, -> { where is_active: true }\nend\n\n# Ly cc products c thuc tnh is_active l true.\n```\n\nTi c 1 class method:\n\n```ruby\nclass Product < ActiveRecord::Base\n  def self.is_active\n    where is_active: true\n  end\nend\n```\n\n2 method ny l hon ton tng ng nhau, kt qu tr v cng vy. By gi th 1 v d khc.\n\n```ruby\nclass Product < ActiveRecord::Base\n  # ly cc products ang active\n  scope :is_active, -> { where is_active: true }\n  # ly cc products c type bng type c truyn vo scope, v m bo type c truyn vo c gi tr\n  scope :by_type, -> type { where type: type if type.present? }\nend\n\n```\n\nVit v d trn di dng Class Method:\n\n```ruby\nclass Product < ActiveRecord::Base\n  # ly cc products ang active\n  def self.is_active\n    where is_active: true\n  end\n  # ly cc products c type bng type c truyn vo scope v m bo type truyn vo c gi tr\n  def self.by_type(type)\n    where type: type if type.present?\n  end\nend\n```\n\nTin hnh gi lin tip Scope:\n\n```ruby\nProduct.by_type(nil).is_active\n# truyn vo type khng hp l, nhng scope is_active vn work bnh thng\n```\n\nTin hnh gi lin tip Class Method:\n\n```ruby\nProduct.by_type(nil).is_active\n\n# Trn v mt error method is_active khng c nh ngha cho nil.\n```\n\na vy chuyn ny l sao? Ti sao Scope vn work bnh thng trong khi Class Method li bn v mt exception?\n\ny chnh l im khc bit quan trng ca Scopy v Class Method.\n\nScope lun lun tr v mt **ActiveRecord Relation**. Cn Class Method th sao? Nu bn khng cover trng hp **nil/blank** th n s vng v **nil/blank** nh vy khng th chy Class Method pha sau, v method  khng th chy **vi nil/blank**.\n","source":"_posts/2019-06-09-luu-y-ngan-gon-ve-scope-va-class-method.md","raw":"---\ntitle: \"So Snh Class Method V Scope\"\ndate: 2019-06-09\ndraft: false\ntags: [\"RUBY\", \"RAILS\"]\ncategories: [\"RAILS\"]\n---\n\nTi c 1 scope:\n\n```ruby\nclass Product < ActiveRecord::Base\n  scope :is_active, -> { where is_active: true }\nend\n\n# Ly cc products c thuc tnh is_active l true.\n```\n\nTi c 1 class method:\n\n```ruby\nclass Product < ActiveRecord::Base\n  def self.is_active\n    where is_active: true\n  end\nend\n```\n\n2 method ny l hon ton tng ng nhau, kt qu tr v cng vy. By gi th 1 v d khc.\n\n```ruby\nclass Product < ActiveRecord::Base\n  # ly cc products ang active\n  scope :is_active, -> { where is_active: true }\n  # ly cc products c type bng type c truyn vo scope, v m bo type c truyn vo c gi tr\n  scope :by_type, -> type { where type: type if type.present? }\nend\n\n```\n\nVit v d trn di dng Class Method:\n\n```ruby\nclass Product < ActiveRecord::Base\n  # ly cc products ang active\n  def self.is_active\n    where is_active: true\n  end\n  # ly cc products c type bng type c truyn vo scope v m bo type truyn vo c gi tr\n  def self.by_type(type)\n    where type: type if type.present?\n  end\nend\n```\n\nTin hnh gi lin tip Scope:\n\n```ruby\nProduct.by_type(nil).is_active\n# truyn vo type khng hp l, nhng scope is_active vn work bnh thng\n```\n\nTin hnh gi lin tip Class Method:\n\n```ruby\nProduct.by_type(nil).is_active\n\n# Trn v mt error method is_active khng c nh ngha cho nil.\n```\n\na vy chuyn ny l sao? Ti sao Scope vn work bnh thng trong khi Class Method li bn v mt exception?\n\ny chnh l im khc bit quan trng ca Scopy v Class Method.\n\nScope lun lun tr v mt **ActiveRecord Relation**. Cn Class Method th sao? Nu bn khng cover trng hp **nil/blank** th n s vng v **nil/blank** nh vy khng th chy Class Method pha sau, v method  khng th chy **vi nil/blank**.\n","slug":"2019-06-09-luu-y-ngan-gon-ve-scope-va-class-method","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb4001wp3m26aaaai9f","content":"<p>Ti c 1 scope:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:is_active</span>, -&gt; &#123; where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Ly cc products c thuc tnh is_active l true.</span></span><br></pre></td></tr></table></figure>\n\n<p>Ti c 1 class method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">is_active</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>2 method ny l hon ton tng ng nhau, kt qu tr v cng vy. By gi th 1 v d khc.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products ang active</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:is_active</span>, -&gt; &#123; where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">  <span class=\"comment\"># ly cc products c type bng type c truyn vo scope, v m bo type c truyn vo c gi tr</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:by_type</span>, -&gt; type &#123; where <span class=\"symbol\">type:</span> type <span class=\"keyword\">if</span> type.present? &#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vit v d trn di dng Class Method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products ang active</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">is_active</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products c type bng type c truyn vo scope v m bo type truyn vo c gi tr</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">by_type</span><span class=\"params\">(type)</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">type:</span> type <span class=\"keyword\">if</span> type.present?</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Tin hnh gi lin tip Scope:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.by_type(<span class=\"literal\">nil</span>).is_active</span><br><span class=\"line\"><span class=\"comment\"># truyn vo type khng hp l, nhng scope is_active vn work bnh thng</span></span><br></pre></td></tr></table></figure>\n\n<p>Tin hnh gi lin tip Class Method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.by_type(<span class=\"literal\">nil</span>).is_active</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Trn v mt error method is_active khng c nh ngha cho nil.</span></span><br></pre></td></tr></table></figure>\n\n<p>a vy chuyn ny l sao? Ti sao Scope vn work bnh thng trong khi Class Method li bn v mt exception?</p>\n<p>y chnh l im khc bit quan trng ca Scopy v Class Method.</p>\n<p>Scope lun lun tr v mt <strong>ActiveRecord Relation</strong>. Cn Class Method th sao? Nu bn khng cover trng hp <strong>nil/blank</strong> th n s vng v <strong>nil/blank</strong> nh vy khng th chy Class Method pha sau, v method  khng th chy <strong>vi nil/blank</strong>.</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Ti c 1 scope:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:is_active</span>, -&gt; &#123; where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Ly cc products c thuc tnh is_active l true.</span></span><br></pre></td></tr></table></figure>\n\n<p>Ti c 1 class method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">is_active</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>2 method ny l hon ton tng ng nhau, kt qu tr v cng vy. By gi th 1 v d khc.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products ang active</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:is_active</span>, -&gt; &#123; where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span> &#125;</span><br><span class=\"line\">  <span class=\"comment\"># ly cc products c type bng type c truyn vo scope, v m bo type c truyn vo c gi tr</span></span><br><span class=\"line\">  scope <span class=\"symbol\">:by_type</span>, -&gt; type &#123; where <span class=\"symbol\">type:</span> type <span class=\"keyword\">if</span> type.present? &#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vit v d trn di dng Class Method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> &lt; ActiveRecord::Base</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products ang active</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">is_active</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">is_active:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"comment\"># ly cc products c type bng type c truyn vo scope v m bo type truyn vo c gi tr</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">by_type</span><span class=\"params\">(type)</span></span></span><br><span class=\"line\">    where <span class=\"symbol\">type:</span> type <span class=\"keyword\">if</span> type.present?</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Tin hnh gi lin tip Scope:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.by_type(<span class=\"literal\">nil</span>).is_active</span><br><span class=\"line\"><span class=\"comment\"># truyn vo type khng hp l, nhng scope is_active vn work bnh thng</span></span><br></pre></td></tr></table></figure>\n\n<p>Tin hnh gi lin tip Class Method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Product.by_type(<span class=\"literal\">nil</span>).is_active</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Trn v mt error method is_active khng c nh ngha cho nil.</span></span><br></pre></td></tr></table></figure>\n\n<p>a vy chuyn ny l sao? Ti sao Scope vn work bnh thng trong khi Class Method li bn v mt exception?</p>\n<p>y chnh l im khc bit quan trng ca Scopy v Class Method.</p>\n<p>Scope lun lun tr v mt <strong>ActiveRecord Relation</strong>. Cn Class Method th sao? Nu bn khng cover trng hp <strong>nil/blank</strong> th n s vng v <strong>nil/blank</strong> nh vy khng th chy Class Method pha sau, v method  khng th chy <strong>vi nil/blank</strong>.</p>\n"},{"title":"Public, Private V Protected","date":"2019-06-10T17:00:00.000Z","draft":false,"_content":"\n## t vn \n\nKhi cn hc i hc, chng ta c hc v tm vc ca cc phng thc nh sau:\n\n1. Public phng thc, gi  u cng c ch cn m bo  include ci class khai bo phng thc  l c.\n\n2. Protected phng thc, gi  chnh class khai bo n, ngoi ra cn c th gi  cc lp k tha class khai bo phng thc ny.\n\n3. Private phng thc, gi  chnh class m n c khai bo, ngoi ra... m qun khng c ngoi ra, ch vy thi.\n\nNhng trch rt trn da theo ngn ng m chng ta cng theo ui ngy i hc C++. Vy vi Ruby? Liu nhng pht biu trn liu cn ng?\n\n## Lun bn\n\nKhng, nhng trch rt trn khng cn ng n hon ton vi ngn ng Ruby. C mt s khc bit. Trong bi vit ny chng ta s i s qua v n.\n\n\"M sao li l s qua? sao bi no cng dng t i s qua m khng phi l \"p  rai tu\" g , vit blog kiu cm ngui nh ny vit lm g (angry).\"\n\n=> V y khng phi kin thc cao siu g c, c v vn ti liu anh ng  cp n n ri v ti khng thy ci l do g  c c ti liu tht nhiu, translate tht  tay, ri vietsub ra mt bi vit di nh sng Hng  ni v mt ch  v cng normal  th hin bn thn c :smile:\n\n## Ly mt v d\n\n```ruby\nclass Cat\n  # default public method\n  def cat_hello_public\n    puts \"T*o ngao ngao public mot cach quy toc\"\n  end\n\n  protected\n\n  def cat_hello_protected\n    puts \"T*o ngao ngao protected mot cach sexy\"\n  end\n\n  private\n\n  def cat_hello_private\n    puts \"T*o ngao ngao private mot  cach len lut\"\n  end\nend\n```\n\nRa ngoi scope ca class ny ri chy:\n\n```ruby\nCat.new.cat_hello_public\n# => T*o ngao ngao public mot cach quy toc.\nCat.new.cat_hello_protected\n# => error\nCat.new.cat_hello_private\n# => error\n```\n\n**Note:** public c th gi ngoi tm vc ca mt class, nhng method cn li th khng. ng ngha vi vic bn ch cn m bo ref c file cha class c phng thc public  th bn c th thoi mi gi phng thc ny.\n\n## Thm mt class con k tha\n\n```ruby\nclass YellowCat < Cat; end\n```\n\nChy:\n\n```ruby\nYellowCat.new.cat_hello_public\n# => T*o ngao ngao public mot cach quy toc.\n```\n\n**Note:** Phng thc public c th c gi cng khai bi class k tha ca class cha phng thc .\n\n## Gi 3 phng thc Cat trong mt method thuc YellowCat\n\n```ruby\nclass YellowCat < Cat\n  def yellow_cat\n    cat_hello_public\n    cat_hello_protected\n    cat_hello_private\n  end\nend\n```\n\nChy:\n\n```ruby\nYellowCat.new.yellow_cat\n# => T*o ngao ngao public mot cach quy toc\n# => T*o ngao ngao protected mot cach sexy\n# => T*o ngao ngao private mot  cach len lut\n```\n\n**Note:** C 3 dng phng thc u c th c gi trong lp con (Trong lp con nh).\n\n> Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc\n\n```ruby\nclass YellowCat < Cat\n  def yellow_cat\n    cat = Cat.new\n    cat.cat_hello_public\n    cat.cat_hello_protected\n    cat.cat_hello_private\n  end\nend\n```\n\nChy:\n\n```ruby\nYellowCat.new.yellow_cat\n# => T*o ngao ngao public mot cach quy toc\n# => T*o ngao ngao protected mot cach sexy\n# =>  error\n```\n\n**Note:** Trong mt lp con k tha t lp cha, public v protected method ca lp cha c th c lp con access thng qua **implicit receiver** and **explicit receiver**. Cn private method th ch c th c access thng qua **implicit receiver**.\n\n1. **Implicit receiver**: Khng ch nh i tng s thc hin phng thc.\n\n2. **Explicit receiver**: Ch nh r rng i tng s thc hin phng thc.\n","source":"_posts/2019-06-11-public-private-va-protected-method-trong-ruby.md","raw":"---\ntitle: \"Public, Private V Protected\"\ndate: 2019-06-11\ndraft: false\ntags: [\"RUBY\"]\ncategories: [\"RUBY\"]\n\n---\n\n## t vn \n\nKhi cn hc i hc, chng ta c hc v tm vc ca cc phng thc nh sau:\n\n1. Public phng thc, gi  u cng c ch cn m bo  include ci class khai bo phng thc  l c.\n\n2. Protected phng thc, gi  chnh class khai bo n, ngoi ra cn c th gi  cc lp k tha class khai bo phng thc ny.\n\n3. Private phng thc, gi  chnh class m n c khai bo, ngoi ra... m qun khng c ngoi ra, ch vy thi.\n\nNhng trch rt trn da theo ngn ng m chng ta cng theo ui ngy i hc C++. Vy vi Ruby? Liu nhng pht biu trn liu cn ng?\n\n## Lun bn\n\nKhng, nhng trch rt trn khng cn ng n hon ton vi ngn ng Ruby. C mt s khc bit. Trong bi vit ny chng ta s i s qua v n.\n\n\"M sao li l s qua? sao bi no cng dng t i s qua m khng phi l \"p  rai tu\" g , vit blog kiu cm ngui nh ny vit lm g (angry).\"\n\n=> V y khng phi kin thc cao siu g c, c v vn ti liu anh ng  cp n n ri v ti khng thy ci l do g  c c ti liu tht nhiu, translate tht  tay, ri vietsub ra mt bi vit di nh sng Hng  ni v mt ch  v cng normal  th hin bn thn c :smile:\n\n## Ly mt v d\n\n```ruby\nclass Cat\n  # default public method\n  def cat_hello_public\n    puts \"T*o ngao ngao public mot cach quy toc\"\n  end\n\n  protected\n\n  def cat_hello_protected\n    puts \"T*o ngao ngao protected mot cach sexy\"\n  end\n\n  private\n\n  def cat_hello_private\n    puts \"T*o ngao ngao private mot  cach len lut\"\n  end\nend\n```\n\nRa ngoi scope ca class ny ri chy:\n\n```ruby\nCat.new.cat_hello_public\n# => T*o ngao ngao public mot cach quy toc.\nCat.new.cat_hello_protected\n# => error\nCat.new.cat_hello_private\n# => error\n```\n\n**Note:** public c th gi ngoi tm vc ca mt class, nhng method cn li th khng. ng ngha vi vic bn ch cn m bo ref c file cha class c phng thc public  th bn c th thoi mi gi phng thc ny.\n\n## Thm mt class con k tha\n\n```ruby\nclass YellowCat < Cat; end\n```\n\nChy:\n\n```ruby\nYellowCat.new.cat_hello_public\n# => T*o ngao ngao public mot cach quy toc.\n```\n\n**Note:** Phng thc public c th c gi cng khai bi class k tha ca class cha phng thc .\n\n## Gi 3 phng thc Cat trong mt method thuc YellowCat\n\n```ruby\nclass YellowCat < Cat\n  def yellow_cat\n    cat_hello_public\n    cat_hello_protected\n    cat_hello_private\n  end\nend\n```\n\nChy:\n\n```ruby\nYellowCat.new.yellow_cat\n# => T*o ngao ngao public mot cach quy toc\n# => T*o ngao ngao protected mot cach sexy\n# => T*o ngao ngao private mot  cach len lut\n```\n\n**Note:** C 3 dng phng thc u c th c gi trong lp con (Trong lp con nh).\n\n> Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc\n\n```ruby\nclass YellowCat < Cat\n  def yellow_cat\n    cat = Cat.new\n    cat.cat_hello_public\n    cat.cat_hello_protected\n    cat.cat_hello_private\n  end\nend\n```\n\nChy:\n\n```ruby\nYellowCat.new.yellow_cat\n# => T*o ngao ngao public mot cach quy toc\n# => T*o ngao ngao protected mot cach sexy\n# =>  error\n```\n\n**Note:** Trong mt lp con k tha t lp cha, public v protected method ca lp cha c th c lp con access thng qua **implicit receiver** and **explicit receiver**. Cn private method th ch c th c access thng qua **implicit receiver**.\n\n1. **Implicit receiver**: Khng ch nh i tng s thc hin phng thc.\n\n2. **Explicit receiver**: Ch nh r rng i tng s thc hin phng thc.\n","slug":"2019-06-11-public-private-va-protected-method-trong-ruby","published":1,"updated":"2022-01-29T09:29:59.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb5001zp3m2gr1p2vmr","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Khi cn hc i hc, chng ta c hc v tm vc ca cc phng thc nh sau:</p>\n<ol>\n<li><p>Public phng thc, gi  u cng c ch cn m bo  include ci class khai bo phng thc  l c.</p>\n</li>\n<li><p>Protected phng thc, gi  chnh class khai bo n, ngoi ra cn c th gi  cc lp k tha class khai bo phng thc ny.</p>\n</li>\n<li><p>Private phng thc, gi  chnh class m n c khai bo, ngoi ra m qun khng c ngoi ra, ch vy thi.</p>\n</li>\n</ol>\n<p>Nhng trch rt trn da theo ngn ng m chng ta cng theo ui ngy i hc C++. Vy vi Ruby? Liu nhng pht biu trn liu cn ng?</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><p>Khng, nhng trch rt trn khng cn ng n hon ton vi ngn ng Ruby. C mt s khc bit. Trong bi vit ny chng ta s i s qua v n.</p>\n<p>M sao li l s qua? sao bi no cng dng t i s qua m khng phi l p  rai tu g , vit blog kiu cm ngui nh ny vit lm g (angry).</p>\n<p>=&gt; V y khng phi kin thc cao siu g c, c v vn ti liu anh ng  cp n n ri v ti khng thy ci l do g  c c ti liu tht nhiu, translate tht  tay, ri vietsub ra mt bi vit di nh sng Hng  ni v mt ch  v cng normal  th hin bn thn c :smile:</p>\n<h2 id=\"Lay-mot-vi-du\"><a href=\"#Lay-mot-vi-du\" class=\"headerlink\" title=\"Ly mt v d\"></a>Ly mt v d</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"comment\"># default public method</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_public</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao public mot cach quy toc\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  protected</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_protected</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao protected mot cach sexy\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_private</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao private mot  cach len lut\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Ra ngoi scope ca class ny ri chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.new.cat_hello_public</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc.</span></span><br><span class=\"line\">Cat.new.cat_hello_protected</span><br><span class=\"line\"><span class=\"comment\"># =&gt; error</span></span><br><span class=\"line\">Cat.new.cat_hello_private</span><br><span class=\"line\"><span class=\"comment\"># =&gt; error</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> public c th gi ngoi tm vc ca mt class, nhng method cn li th khng. ng ngha vi vic bn ch cn m bo ref c file cha class c phng thc public  th bn c th thoi mi gi phng thc ny.</p>\n<h2 id=\"Them-mot-class-con-ke-thua\"><a href=\"#Them-mot-class-con-ke-thua\" class=\"headerlink\" title=\"Thm mt class con k tha\"></a>Thm mt class con k tha</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.cat_hello_public</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc.</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> Phng thc public c th c gi cng khai bi class k tha ca class cha phng thc .</p>\n<h2 id=\"Goi-3-phuong-thuc-Cat-trong-mot-method-thuoc-YellowCat\"><a href=\"#Goi-3-phuong-thuc-Cat-trong-mot-method-thuoc-YellowCat\" class=\"headerlink\" title=\"Gi 3 phng thc Cat trong mt method thuc YellowCat\"></a>Gi 3 phng thc Cat trong mt method thuc YellowCat</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat</span></span></span><br><span class=\"line\">    cat_hello_public</span><br><span class=\"line\">    cat_hello_protected</span><br><span class=\"line\">    cat_hello_private</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.yellow_cat</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao protected mot cach sexy</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao private mot  cach len lut</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> C 3 dng phng thc u c th c gi trong lp con (Trong lp con nh).</p>\n<blockquote>\n<p>Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc</p>\n</blockquote>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat</span></span></span><br><span class=\"line\">    cat = Cat.new</span><br><span class=\"line\">    cat.cat_hello_public</span><br><span class=\"line\">    cat.cat_hello_protected</span><br><span class=\"line\">    cat.cat_hello_private</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.yellow_cat</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao protected mot cach sexy</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt;  error</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> Trong mt lp con k tha t lp cha, public v protected method ca lp cha c th c lp con access thng qua <strong>implicit receiver</strong> and <strong>explicit receiver</strong>. Cn private method th ch c th c access thng qua <strong>implicit receiver</strong>.</p>\n<ol>\n<li><p><strong>Implicit receiver</strong>: Khng ch nh i tng s thc hin phng thc.</p>\n</li>\n<li><p><strong>Explicit receiver</strong>: Ch nh r rng i tng s thc hin phng thc.</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>Khi cn hc i hc, chng ta c hc v tm vc ca cc phng thc nh sau:</p>\n<ol>\n<li><p>Public phng thc, gi  u cng c ch cn m bo  include ci class khai bo phng thc  l c.</p>\n</li>\n<li><p>Protected phng thc, gi  chnh class khai bo n, ngoi ra cn c th gi  cc lp k tha class khai bo phng thc ny.</p>\n</li>\n<li><p>Private phng thc, gi  chnh class m n c khai bo, ngoi ra m qun khng c ngoi ra, ch vy thi.</p>\n</li>\n</ol>\n<p>Nhng trch rt trn da theo ngn ng m chng ta cng theo ui ngy i hc C++. Vy vi Ruby? Liu nhng pht biu trn liu cn ng?</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><p>Khng, nhng trch rt trn khng cn ng n hon ton vi ngn ng Ruby. C mt s khc bit. Trong bi vit ny chng ta s i s qua v n.</p>\n<p>M sao li l s qua? sao bi no cng dng t i s qua m khng phi l p  rai tu g , vit blog kiu cm ngui nh ny vit lm g (angry).</p>\n<p>=&gt; V y khng phi kin thc cao siu g c, c v vn ti liu anh ng  cp n n ri v ti khng thy ci l do g  c c ti liu tht nhiu, translate tht  tay, ri vietsub ra mt bi vit di nh sng Hng  ni v mt ch  v cng normal  th hin bn thn c :smile:</p>\n<h2 id=\"Lay-mot-vi-du\"><a href=\"#Lay-mot-vi-du\" class=\"headerlink\" title=\"Ly mt v d\"></a>Ly mt v d</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"comment\"># default public method</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_public</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao public mot cach quy toc\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  protected</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_protected</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao protected mot cach sexy\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cat_hello_private</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"T*o ngao ngao private mot  cach len lut\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Ra ngoi scope ca class ny ri chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.new.cat_hello_public</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc.</span></span><br><span class=\"line\">Cat.new.cat_hello_protected</span><br><span class=\"line\"><span class=\"comment\"># =&gt; error</span></span><br><span class=\"line\">Cat.new.cat_hello_private</span><br><span class=\"line\"><span class=\"comment\"># =&gt; error</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> public c th gi ngoi tm vc ca mt class, nhng method cn li th khng. ng ngha vi vic bn ch cn m bo ref c file cha class c phng thc public  th bn c th thoi mi gi phng thc ny.</p>\n<h2 id=\"Them-mot-class-con-ke-thua\"><a href=\"#Them-mot-class-con-ke-thua\" class=\"headerlink\" title=\"Thm mt class con k tha\"></a>Thm mt class con k tha</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.cat_hello_public</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc.</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> Phng thc public c th c gi cng khai bi class k tha ca class cha phng thc .</p>\n<h2 id=\"Goi-3-phuong-thuc-Cat-trong-mot-method-thuoc-YellowCat\"><a href=\"#Goi-3-phuong-thuc-Cat-trong-mot-method-thuoc-YellowCat\" class=\"headerlink\" title=\"Gi 3 phng thc Cat trong mt method thuc YellowCat\"></a>Gi 3 phng thc Cat trong mt method thuc YellowCat</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat</span></span></span><br><span class=\"line\">    cat_hello_public</span><br><span class=\"line\">    cat_hello_protected</span><br><span class=\"line\">    cat_hello_private</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.yellow_cat</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao protected mot cach sexy</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao private mot  cach len lut</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> C 3 dng phng thc u c th c gi trong lp con (Trong lp con nh).</p>\n<blockquote>\n<p>Trong phng thc yellow_cat khai bo mt i tng Cat v gi ti 3 phng thc</p>\n</blockquote>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">yellow_cat</span></span></span><br><span class=\"line\">    cat = Cat.new</span><br><span class=\"line\">    cat.cat_hello_public</span><br><span class=\"line\">    cat.cat_hello_protected</span><br><span class=\"line\">    cat.cat_hello_private</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Chy:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YellowCat.new.yellow_cat</span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao public mot cach quy toc</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; T*o ngao ngao protected mot cach sexy</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt;  error</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Note:</strong> Trong mt lp con k tha t lp cha, public v protected method ca lp cha c th c lp con access thng qua <strong>implicit receiver</strong> and <strong>explicit receiver</strong>. Cn private method th ch c th c access thng qua <strong>implicit receiver</strong>.</p>\n<ol>\n<li><p><strong>Implicit receiver</strong>: Khng ch nh i tng s thc hin phng thc.</p>\n</li>\n<li><p><strong>Explicit receiver</strong>: Ch nh r rng i tng s thc hin phng thc.</p>\n</li>\n</ol>\n"},{"title":"Build A Simple ORM","date":"2019-06-25T17:00:00.000Z","draft":false,"_content":"\n## 1. Intro\n\nDoes ROR is a great framework? Yes, it does, to me, it's lighting and very powerful. Although, the ROR project needs more RAM than most other frameworks and also difficult to scale up.\n\nBut ROR is stale, high security and has very very library supported. And the last one, ROR is the first technology I learn after I graduated from university, therefore I love Rails.\n\none of the reasons why many people love and use Rails today is ActiveRecord. The default ORM of Rails, more powerful and easy to use. It helps too much for us when we want to build a web app without deep experiences in SQL.\n\nLike many developers, when I start to learn Rails, I used a few methods of ActiveRecord and don't care what's happening after these methods.  Not bad for a beginner, but if I want to become a   good developer, I need to know more details behind these methods, know deep enough to use them better.\n\n## 2. Source Code\n\n> The resource of this post you can see [here](https://github.com/hdchinh/simple-orm-ruby)\n\n## 3. Explaintion\n\n> The first action we need to do after read more is known what is ORM. You can read more about ORM by [article](https://en.wikipedia.org/wiki/Object-relational_mapping).\n\nTo build a simple ORM and run a few basic methods, we need to do 2 things:\n\n1. Connect database (I use Postgresql for my example).\n2. Create Class using any languages that you familiar with, for me I use Ruby.\n\n**STEP 1: Create project**\n\nCreate an empty project with single Gemfile with the content below:\n\n```ruby\nsource 'https://rubygems.org'\n\ngem 'pg'\n```\n\nInstall gem by command **bundle install**\n\nIf you get errors. let's read more about bundler gem.\n\n**STEP 2: Connect to Database.**\n\nCreate a file for the connection. I named this file is **connection.rb**:\n\n```ruby\nrequire 'pg'\n\n$conn = PG::Connection.connect(\n  :hostaddr=>\"127.0.0.1\", :port=>5432,\n  :dbname=>\"test-psql_development\",\n  :user=>\"admin\",\n  :password=>''\n)\n```\n\nNote: The content above is my info login of my Database, You must change for your Database.\n\nAt this time, our project has the structure:\n\n```\n-- simple-orm\n  -- Gemfile\n  -- Gemfile.lock (sinh ra sau lnh `bundle install`)\n  -- connection.rb\n```\n\n**STEP 3: Create Main Class.**\n\nCreate the main class, I named this file is **mybase.rb**. You can name it with any names you like, don't matter:\n\n```ruby\nrequire_relative 'connection.rb'\n\nclass MyBase\n  def self.all\n    term = \"SELECT * FROM #{self.name.downcase}\"\n    res = $conn.exec(term)\n\n    res.each{ |row|\n      puts \"#{row}\\n\"\n    }\n  end\n\n  def self.find(id)\n    term = \"SELECT * FROM #{self.name.downcase} where id = #{id}\"\n    res = $conn.exec(term)\n\n    res.each{ |row|\n      puts \"#{row}\\n\"\n    }\n  end\nend\n```\n\nIn this example above, I create two methods:\n\n**all**: To return all records of this Class.\n**find**: To find a record by ID.\n\n**STEP 4: Create Child Class Of Main Class.**\n\nIn my Database, I have a table called comics. So I create a file named **comics.rb** to handle the comics table:\n\n```ruby\nrequire_relative 'mybase.rb'\n\nclass Comics < MyBase; end\n\nputs \"All record in comics table:\\n\"\nComics.all\nputs \"Find record has id is 6:\\n\"\nComics.find(6)\n```\n\nFinally, my project has the structure below:\n\n```\n-- simple-orm\n  -- Gemfile\n  -- Gemfile.lock (sinh ra sau lnh `bundle install`)\n  -- connection.rb\n  -- mybase.rb (main chnh cha cc phng thc)\n  -- comics.rb (class ng vi table comics trong csdl, k tha MyBase)\n```\n\nRun **comics.rb** file with command **ruby comics.rb** to see what's happening (please create your sample data first.)\n\n## References\n\n[1][https://en.wikipedia.org/wiki/Object-relational_mapping](https://en.wikipedia.org/wiki/Object-relational_mapping)\n\n[2][https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e](https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e)\n\n[3][https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails](https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails)\n","source":"_posts/2019-06-25-build-a-simple-orm-with-ruby.md","raw":"---\ntitle: \"Build A Simple ORM\"\ndate: 2019-06-26\ndraft: false\ntags: [\"ORM\", \"RUBY\"]\ncategories: [\"RUBY\"]\n---\n\n## 1. Intro\n\nDoes ROR is a great framework? Yes, it does, to me, it's lighting and very powerful. Although, the ROR project needs more RAM than most other frameworks and also difficult to scale up.\n\nBut ROR is stale, high security and has very very library supported. And the last one, ROR is the first technology I learn after I graduated from university, therefore I love Rails.\n\none of the reasons why many people love and use Rails today is ActiveRecord. The default ORM of Rails, more powerful and easy to use. It helps too much for us when we want to build a web app without deep experiences in SQL.\n\nLike many developers, when I start to learn Rails, I used a few methods of ActiveRecord and don't care what's happening after these methods.  Not bad for a beginner, but if I want to become a   good developer, I need to know more details behind these methods, know deep enough to use them better.\n\n## 2. Source Code\n\n> The resource of this post you can see [here](https://github.com/hdchinh/simple-orm-ruby)\n\n## 3. Explaintion\n\n> The first action we need to do after read more is known what is ORM. You can read more about ORM by [article](https://en.wikipedia.org/wiki/Object-relational_mapping).\n\nTo build a simple ORM and run a few basic methods, we need to do 2 things:\n\n1. Connect database (I use Postgresql for my example).\n2. Create Class using any languages that you familiar with, for me I use Ruby.\n\n**STEP 1: Create project**\n\nCreate an empty project with single Gemfile with the content below:\n\n```ruby\nsource 'https://rubygems.org'\n\ngem 'pg'\n```\n\nInstall gem by command **bundle install**\n\nIf you get errors. let's read more about bundler gem.\n\n**STEP 2: Connect to Database.**\n\nCreate a file for the connection. I named this file is **connection.rb**:\n\n```ruby\nrequire 'pg'\n\n$conn = PG::Connection.connect(\n  :hostaddr=>\"127.0.0.1\", :port=>5432,\n  :dbname=>\"test-psql_development\",\n  :user=>\"admin\",\n  :password=>''\n)\n```\n\nNote: The content above is my info login of my Database, You must change for your Database.\n\nAt this time, our project has the structure:\n\n```\n-- simple-orm\n  -- Gemfile\n  -- Gemfile.lock (sinh ra sau lnh `bundle install`)\n  -- connection.rb\n```\n\n**STEP 3: Create Main Class.**\n\nCreate the main class, I named this file is **mybase.rb**. You can name it with any names you like, don't matter:\n\n```ruby\nrequire_relative 'connection.rb'\n\nclass MyBase\n  def self.all\n    term = \"SELECT * FROM #{self.name.downcase}\"\n    res = $conn.exec(term)\n\n    res.each{ |row|\n      puts \"#{row}\\n\"\n    }\n  end\n\n  def self.find(id)\n    term = \"SELECT * FROM #{self.name.downcase} where id = #{id}\"\n    res = $conn.exec(term)\n\n    res.each{ |row|\n      puts \"#{row}\\n\"\n    }\n  end\nend\n```\n\nIn this example above, I create two methods:\n\n**all**: To return all records of this Class.\n**find**: To find a record by ID.\n\n**STEP 4: Create Child Class Of Main Class.**\n\nIn my Database, I have a table called comics. So I create a file named **comics.rb** to handle the comics table:\n\n```ruby\nrequire_relative 'mybase.rb'\n\nclass Comics < MyBase; end\n\nputs \"All record in comics table:\\n\"\nComics.all\nputs \"Find record has id is 6:\\n\"\nComics.find(6)\n```\n\nFinally, my project has the structure below:\n\n```\n-- simple-orm\n  -- Gemfile\n  -- Gemfile.lock (sinh ra sau lnh `bundle install`)\n  -- connection.rb\n  -- mybase.rb (main chnh cha cc phng thc)\n  -- comics.rb (class ng vi table comics trong csdl, k tha MyBase)\n```\n\nRun **comics.rb** file with command **ruby comics.rb** to see what's happening (please create your sample data first.)\n\n## References\n\n[1][https://en.wikipedia.org/wiki/Object-relational_mapping](https://en.wikipedia.org/wiki/Object-relational_mapping)\n\n[2][https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e](https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e)\n\n[3][https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails](https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails)\n","slug":"2019-06-25-build-a-simple-orm-with-ruby","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb60022p3m242jha7ss","content":"<h2 id=\"1-Intro\"><a href=\"#1-Intro\" class=\"headerlink\" title=\"1. Intro\"></a>1. Intro</h2><p>Does ROR is a great framework? Yes, it does, to me, its lighting and very powerful. Although, the ROR project needs more RAM than most other frameworks and also difficult to scale up.</p>\n<p>But ROR is stale, high security and has very very library supported. And the last one, ROR is the first technology I learn after I graduated from university, therefore I love Rails.</p>\n<p>one of the reasons why many people love and use Rails today is ActiveRecord. The default ORM of Rails, more powerful and easy to use. It helps too much for us when we want to build a web app without deep experiences in SQL.</p>\n<p>Like many developers, when I start to learn Rails, I used a few methods of ActiveRecord and dont care whats happening after these methods.  Not bad for a beginner, but if I want to become a   good developer, I need to know more details behind these methods, know deep enough to use them better.</p>\n<h2 id=\"2-Source-Code\"><a href=\"#2-Source-Code\" class=\"headerlink\" title=\"2. Source Code\"></a>2. Source Code</h2><blockquote>\n<p>The resource of this post you can see <a href=\"https://github.com/hdchinh/simple-orm-ruby\" target=\"_blank\" rel=\"noopener\">here</a></p>\n</blockquote>\n<h2 id=\"3-Explaintion\"><a href=\"#3-Explaintion\" class=\"headerlink\" title=\"3. Explaintion\"></a>3. Explaintion</h2><blockquote>\n<p>The first action we need to do after read more is known what is ORM. You can read more about ORM by <a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\" target=\"_blank\" rel=\"noopener\">article</a>.</p>\n</blockquote>\n<p>To build a simple ORM and run a few basic methods, we need to do 2 things:</p>\n<ol>\n<li>Connect database (I use Postgresql for my example).</li>\n<li>Create Class using any languages that you familiar with, for me I use Ruby.</li>\n</ol>\n<p><strong>STEP 1: Create project</strong></p>\n<p>Create an empty project with single Gemfile with the content below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source <span class=\"string\">'https://rubygems.org'</span></span><br><span class=\"line\"></span><br><span class=\"line\">gem <span class=\"string\">'pg'</span></span><br></pre></td></tr></table></figure>\n\n<p>Install gem by command <strong>bundle install</strong></p>\n<p>If you get errors. lets read more about bundler gem.</p>\n<p><strong>STEP 2: Connect to Database.</strong></p>\n<p>Create a file for the connection. I named this file is <strong>connection.rb</strong>:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'pg'</span></span><br><span class=\"line\"></span><br><span class=\"line\">$conn = PG::Connection.connect(</span><br><span class=\"line\">  <span class=\"symbol\">:hostaddr=&gt;<span class=\"string\">\"127.0.0.1\"</span></span>, <span class=\"symbol\">:port=&gt;</span><span class=\"number\">5432</span>,</span><br><span class=\"line\">  <span class=\"symbol\">:dbname=&gt;<span class=\"string\">\"test-psql_development\"</span></span>,</span><br><span class=\"line\">  <span class=\"symbol\">:user=&gt;<span class=\"string\">\"admin\"</span></span>,</span><br><span class=\"line\">  <span class=\"symbol\">:password=&gt;<span class=\"string\">''</span></span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>Note: The content above is my info login of my Database, You must change for your Database.</p>\n<p>At this time, our project has the structure:</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-<span class=\"ruby\">- simple-orm</span></span><br><span class=\"line\"><span class=\"ruby\">  -- Gemfile</span></span><br><span class=\"line\"><span class=\"ruby\">  -- Gemfile.lock (sinh ra sau lnh <span class=\"string\">`bundle install`</span>)</span></span><br><span class=\"line\"><span class=\"ruby\">  -- connection.rb</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>STEP 3: Create Main Class.</strong></p>\n<p>Create the main class, I named this file is <strong>mybase.rb</strong>. You can name it with any names you like, dont matter:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'connection.rb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBase</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">all</span></span></span><br><span class=\"line\">    term = <span class=\"string\">\"SELECT * FROM <span class=\"subst\">#&#123;<span class=\"keyword\">self</span>.name.downcase&#125;</span>\"</span></span><br><span class=\"line\">    res = $conn.exec(term)</span><br><span class=\"line\"></span><br><span class=\"line\">    res.each&#123; <span class=\"params\">|row|</span></span><br><span class=\"line\">      puts <span class=\"string\">\"<span class=\"subst\">#&#123;row&#125;</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">find</span><span class=\"params\">(id)</span></span></span><br><span class=\"line\">    term = <span class=\"string\">\"SELECT * FROM <span class=\"subst\">#&#123;<span class=\"keyword\">self</span>.name.downcase&#125;</span> where id = <span class=\"subst\">#&#123;id&#125;</span>\"</span></span><br><span class=\"line\">    res = $conn.exec(term)</span><br><span class=\"line\"></span><br><span class=\"line\">    res.each&#123; <span class=\"params\">|row|</span></span><br><span class=\"line\">      puts <span class=\"string\">\"<span class=\"subst\">#&#123;row&#125;</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>In this example above, I create two methods:</p>\n<p><strong>all</strong>: To return all records of this Class.<br><strong>find</strong>: To find a record by ID.</p>\n<p><strong>STEP 4: Create Child Class Of Main Class.</strong></p>\n<p>In my Database, I have a table called comics. So I create a file named <strong>comics.rb</strong> to handle the comics table:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'mybase.rb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Comics</span> &lt; MyBase;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"All record in comics table:\\n\"</span></span><br><span class=\"line\">Comics.all</span><br><span class=\"line\">puts <span class=\"string\">\"Find record has id is 6:\\n\"</span></span><br><span class=\"line\">Comics.find(<span class=\"number\">6</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Finally, my project has the structure below:</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- simple-orm</span><br><span class=\"line\">  -- Gemfile</span><br><span class=\"line\">  -- Gemfile.lock (sinh ra sau lnh `bundle install`)</span><br><span class=\"line\">  -- connection.rb</span><br><span class=\"line\">  -- mybase.rb (main chnh cha cc phng thc)</span><br><span class=\"line\">  -- comics.rb (<span class=\"keyword\">class</span> <span class=\"symbol\">ng</span> <span class=\"symbol\">v</span><span class=\"symbol\">i</span> <span class=\"symbol\">table</span> <span class=\"symbol\">comics</span> <span class=\"symbol\">trong</span> <span class=\"symbol\">csdl, <span class=\"symbol\">k</span></span> <span class=\"symbol\">th</span><span class=\"symbol\">a</span> <span class=\"symbol\">MyBase</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Run <strong>comics.rb</strong> file with command <strong>ruby comics.rb</strong> to see whats happening (please create your sample data first.)</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Object-relational_mapping</a></p>\n<p>[2]<a href=\"https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e\" target=\"_blank\" rel=\"noopener\">https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e</a></p>\n<p>[3]<a href=\"https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Intro\"><a href=\"#1-Intro\" class=\"headerlink\" title=\"1. Intro\"></a>1. Intro</h2><p>Does ROR is a great framework? Yes, it does, to me, its lighting and very powerful. Although, the ROR project needs more RAM than most other frameworks and also difficult to scale up.</p>\n<p>But ROR is stale, high security and has very very library supported. And the last one, ROR is the first technology I learn after I graduated from university, therefore I love Rails.</p>\n<p>one of the reasons why many people love and use Rails today is ActiveRecord. The default ORM of Rails, more powerful and easy to use. It helps too much for us when we want to build a web app without deep experiences in SQL.</p>\n<p>Like many developers, when I start to learn Rails, I used a few methods of ActiveRecord and dont care whats happening after these methods.  Not bad for a beginner, but if I want to become a   good developer, I need to know more details behind these methods, know deep enough to use them better.</p>\n<h2 id=\"2-Source-Code\"><a href=\"#2-Source-Code\" class=\"headerlink\" title=\"2. Source Code\"></a>2. Source Code</h2><blockquote>\n<p>The resource of this post you can see <a href=\"https://github.com/hdchinh/simple-orm-ruby\" target=\"_blank\" rel=\"noopener\">here</a></p>\n</blockquote>\n<h2 id=\"3-Explaintion\"><a href=\"#3-Explaintion\" class=\"headerlink\" title=\"3. Explaintion\"></a>3. Explaintion</h2><blockquote>\n<p>The first action we need to do after read more is known what is ORM. You can read more about ORM by <a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\" target=\"_blank\" rel=\"noopener\">article</a>.</p>\n</blockquote>\n<p>To build a simple ORM and run a few basic methods, we need to do 2 things:</p>\n<ol>\n<li>Connect database (I use Postgresql for my example).</li>\n<li>Create Class using any languages that you familiar with, for me I use Ruby.</li>\n</ol>\n<p><strong>STEP 1: Create project</strong></p>\n<p>Create an empty project with single Gemfile with the content below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source <span class=\"string\">'https://rubygems.org'</span></span><br><span class=\"line\"></span><br><span class=\"line\">gem <span class=\"string\">'pg'</span></span><br></pre></td></tr></table></figure>\n\n<p>Install gem by command <strong>bundle install</strong></p>\n<p>If you get errors. lets read more about bundler gem.</p>\n<p><strong>STEP 2: Connect to Database.</strong></p>\n<p>Create a file for the connection. I named this file is <strong>connection.rb</strong>:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'pg'</span></span><br><span class=\"line\"></span><br><span class=\"line\">$conn = PG::Connection.connect(</span><br><span class=\"line\">  <span class=\"symbol\">:hostaddr=&gt;<span class=\"string\">\"127.0.0.1\"</span></span>, <span class=\"symbol\">:port=&gt;</span><span class=\"number\">5432</span>,</span><br><span class=\"line\">  <span class=\"symbol\">:dbname=&gt;<span class=\"string\">\"test-psql_development\"</span></span>,</span><br><span class=\"line\">  <span class=\"symbol\">:user=&gt;<span class=\"string\">\"admin\"</span></span>,</span><br><span class=\"line\">  <span class=\"symbol\">:password=&gt;<span class=\"string\">''</span></span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>Note: The content above is my info login of my Database, You must change for your Database.</p>\n<p>At this time, our project has the structure:</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-<span class=\"ruby\">- simple-orm</span></span><br><span class=\"line\"><span class=\"ruby\">  -- Gemfile</span></span><br><span class=\"line\"><span class=\"ruby\">  -- Gemfile.lock (sinh ra sau lnh <span class=\"string\">`bundle install`</span>)</span></span><br><span class=\"line\"><span class=\"ruby\">  -- connection.rb</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>STEP 3: Create Main Class.</strong></p>\n<p>Create the main class, I named this file is <strong>mybase.rb</strong>. You can name it with any names you like, dont matter:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'connection.rb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBase</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">all</span></span></span><br><span class=\"line\">    term = <span class=\"string\">\"SELECT * FROM <span class=\"subst\">#&#123;<span class=\"keyword\">self</span>.name.downcase&#125;</span>\"</span></span><br><span class=\"line\">    res = $conn.exec(term)</span><br><span class=\"line\"></span><br><span class=\"line\">    res.each&#123; <span class=\"params\">|row|</span></span><br><span class=\"line\">      puts <span class=\"string\">\"<span class=\"subst\">#&#123;row&#125;</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">self</span>.<span class=\"title\">find</span><span class=\"params\">(id)</span></span></span><br><span class=\"line\">    term = <span class=\"string\">\"SELECT * FROM <span class=\"subst\">#&#123;<span class=\"keyword\">self</span>.name.downcase&#125;</span> where id = <span class=\"subst\">#&#123;id&#125;</span>\"</span></span><br><span class=\"line\">    res = $conn.exec(term)</span><br><span class=\"line\"></span><br><span class=\"line\">    res.each&#123; <span class=\"params\">|row|</span></span><br><span class=\"line\">      puts <span class=\"string\">\"<span class=\"subst\">#&#123;row&#125;</span>\\n\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>In this example above, I create two methods:</p>\n<p><strong>all</strong>: To return all records of this Class.<br><strong>find</strong>: To find a record by ID.</p>\n<p><strong>STEP 4: Create Child Class Of Main Class.</strong></p>\n<p>In my Database, I have a table called comics. So I create a file named <strong>comics.rb</strong> to handle the comics table:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require_relative <span class=\"string\">'mybase.rb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Comics</span> &lt; MyBase;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"All record in comics table:\\n\"</span></span><br><span class=\"line\">Comics.all</span><br><span class=\"line\">puts <span class=\"string\">\"Find record has id is 6:\\n\"</span></span><br><span class=\"line\">Comics.find(<span class=\"number\">6</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Finally, my project has the structure below:</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- simple-orm</span><br><span class=\"line\">  -- Gemfile</span><br><span class=\"line\">  -- Gemfile.lock (sinh ra sau lnh `bundle install`)</span><br><span class=\"line\">  -- connection.rb</span><br><span class=\"line\">  -- mybase.rb (main chnh cha cc phng thc)</span><br><span class=\"line\">  -- comics.rb (<span class=\"keyword\">class</span> <span class=\"symbol\">ng</span> <span class=\"symbol\">v</span><span class=\"symbol\">i</span> <span class=\"symbol\">table</span> <span class=\"symbol\">comics</span> <span class=\"symbol\">trong</span> <span class=\"symbol\">csdl, <span class=\"symbol\">k</span></span> <span class=\"symbol\">th</span><span class=\"symbol\">a</span> <span class=\"symbol\">MyBase</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Run <strong>comics.rb</strong> file with command <strong>ruby comics.rb</strong> to see whats happening (please create your sample data first.)</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Object-relational_mapping</a></p>\n<p>[2]<a href=\"https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e\" target=\"_blank\" rel=\"noopener\">https://medium.com/@violetmoon/understanding-orm-frameworks-with-ruby-and-activerecord-83a9e9d8490e</a></p>\n<p>[3]<a href=\"https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/2194915/what-is-orm-as-related-to-ruby-on-rails</a></p>\n"},{"title":"A Simple Rack Application","date":"2019-06-23T17:00:00.000Z","draft":false,"_content":"\n## 1. t vn \nC l cng nh ti, khi mi tip cn vi mt framework ruby nh Rails chng hn, bn  nghe v Rack? hoc t ra cng tng thy ci **gem rack** trong Gemfile. Nhng c khi no bn dng n chng? Khng ? Ti cng ngh vy, ti cng k, ti cng ch quan tm, cuc sng khng  high hay sao m li m u vo ci kh :alien:.\n\nNhng lm vic hng ngy vi n m khng hiu n l g lun lm cho ta cm gic bt an v nh, cp nht CV l Developer m i phng vn c hi rack l g, li tr li \"em...em..em hng bit\" th liu c b nh xung rank junior hay khng? Thi th c tm hiu coi n ra sao.\n\nV th l ti  c docs trn trang ch ca Rack, ni chung c qua th c hiu, m ci hiu n mng lung nh mt tr a, cht na th nh phi \"anh xin gi tay rt lui thi\".\n\nVy nn ti s vit mt ng dng Rack (chy trn Rack) very..very simple,  ti v c th c bn c ci nhn thong qua v Rack trc , ch ti thy hiu bit hin ti ca mnh cha   chm gi hn lm v ch  ny (hy vng tng lai gn s c bi chm gi hn lm).\n\n## 2. Tham kho?\n\n1. Bi vit ny ti tham kho cch s dng Rack trn trang ch ca Rack [ti y](https://rack.github.io/) v trn mc docs ca ruby [ti y](https://www.rubydoc.info/github/rack/rack/).\n\n2. ng dng rt th s v KHNG s dng \"bt p rch tt\" no c.\n\n\n## 3. Kin thc cn chun b trc.\n\nD t d nhiu th vn phi nh qua l thuyt mt cht trc khi my m lm g . Mt s khi nim/quy trnh chng ta nn nm trc nh sau:\n\n1) Rack l mt lp nm gia web/app server v ng dng.\n\nEx: Nu ti s dng Rails vi app server l Puma, web server l Nginx th ng i ca mt request s nh sau:\n\n![hoa](/images/rack.jpeg)\n\nNote: Khi nim **web server** v **app server** chng ta s bn ti sau.\n\n2) Nh hnh trn, ta c th thy Rack s giao tip vi **app server**, nn Rack s nhn request t app server gi qua, vi ni dung lng nhng ri rm g , sau  Rack s **lm g ** vi ci request ri rm kia, ri gi kt qu m Rails c th hiu v thc thi c. Sau  Rails s gi v cho Rack kt qu cng ri rm khng km v nhim v ca Rack li l tip tc **lm g ** ci kt qu t Rails, sao cho chuyn kt qu  thnh 1 th g  m app server c th hiu, cui cng app server qung kt qu v cho ngi dng.\n\nNote: Vy Rack nh mt phin dch vin  truyn t gia ng dng v app server (Khng tht s ng v bn cht nhng ta c tm chp nhn lin tng ny).\n\n## 4. Build mt simple Rack application\n\n- To 1 Folder vi 1 file tn **Gemfile** c ni dung nh sau:\n\n```ruby\nsource 'https://rubygems.org'\n\ngem 'rack'\n```\n\n- Ci t gem vi lnh **bundle install**\n\n- To file **config.ru**.\n\nNote: y s l file main  x l request.\n\n- Chy project vi lnh **bundle exec rackup**\n\n> Project demo [ti y!](https://github.com/hdchinh/simple-rack-app)\n\n## 5. Gii thch ni dung m ngun ca app demo\n\n```ruby\nmap '/signup_user' do\n  run SignUpUser.new\nend\n\nmap '/signup' do\n  run MySignUp.new\nend\n\nmap '/signin' do\n  run MySignIn.new\nend\n\nmap '/signin_user' do\n  run SignInUser.new\nend\n\nmap '/' do\n  run HomePage.new\nend\n\nrun MyNotFound.new\n```\n\nChc bn cng c th on ra  ngha ca n, nu map chng ng dn th s chy lnh trong .\n\nEx:\n\n```ruby\nmap '/' do\n  run HomePage.new\nend\n```\n\nNu truy cp theo trang ch th s chy lnh **run HomePage.new**.\n\nNu url ngi dng request khng trng bt c trng hp no th chy lnh **run MyNotFound.new**  cui.\n\nMt class s c dng nh sau:\n\n```ruby\nclass SignInUser\n  def call(env)\n    # read file data\n    file = File.read('data.txt')\n\n    # get params\n    data =  Rack::Utils.parse_nested_query(env['QUERY_STRING'])\n    email = data['email']\n    pass = data['password']\n\n    # convert file data from string to hash\n    hash_data = eval(file)\n    # init variable for user login\n    user_email = nil\n\n    # loop hash to find email params\n    hash_data.each do |k, val|\n      if k == email\n        if val = pass\n          user_email = k\n        end\n      end\n    end\n\n    if user_email\n      body = [\"<h1>email: #{user_email}<h/1>\"]\n    else\n      body = [\"<h1>Email or Password Invalid</h1>\"]\n    end\n\n    [200, {'Content-Type' => 'text/html'}, body]\n  end\nend\n```\n\nBn thy phc tp? Khng sao c, ch cn ch  n dng cui cng trong method call. Ta ch cn nh:\n\n- Mi class s dng method call  ci t (yu cu ca Rack).\n\n- Trong method ny nhn vo mt params, y chnh l request i ti.\n\n- Kt qu tr v ca method call ny l mt mng gm 3 phn t:\n\n  1. Status code (V d nh: 200 -> success, 404 -> not found).\n  2. Mt hash,  y chnh l header, cha nhng thng tin m trnh duyt cn.\n  3. Phn t cui cng l mt mng, chnh l phn body ca kt qu tr v.\n\n## 6. Kt lun\n\nTrn l mt basic app xy dng vi Rack, v nh ngha ch c khng lm s rt kh hiu, nn ti lm demo trc, hy vng trong thi gian ti nu kin thc thu lm   vit v cch vn hnh ca Rack mt cch su sc, ti c th tip tc ch  ny.\n","source":"_posts/2019-06-24-simple-rack-application.md","raw":"---\ntitle: \"A Simple Rack Application\"\ndate: 2019-06-24\ndraft: false\ntags: [\"RACK\", \"RUBY\"]\n---\n\n## 1. t vn \nC l cng nh ti, khi mi tip cn vi mt framework ruby nh Rails chng hn, bn  nghe v Rack? hoc t ra cng tng thy ci **gem rack** trong Gemfile. Nhng c khi no bn dng n chng? Khng ? Ti cng ngh vy, ti cng k, ti cng ch quan tm, cuc sng khng  high hay sao m li m u vo ci kh :alien:.\n\nNhng lm vic hng ngy vi n m khng hiu n l g lun lm cho ta cm gic bt an v nh, cp nht CV l Developer m i phng vn c hi rack l g, li tr li \"em...em..em hng bit\" th liu c b nh xung rank junior hay khng? Thi th c tm hiu coi n ra sao.\n\nV th l ti  c docs trn trang ch ca Rack, ni chung c qua th c hiu, m ci hiu n mng lung nh mt tr a, cht na th nh phi \"anh xin gi tay rt lui thi\".\n\nVy nn ti s vit mt ng dng Rack (chy trn Rack) very..very simple,  ti v c th c bn c ci nhn thong qua v Rack trc , ch ti thy hiu bit hin ti ca mnh cha   chm gi hn lm v ch  ny (hy vng tng lai gn s c bi chm gi hn lm).\n\n## 2. Tham kho?\n\n1. Bi vit ny ti tham kho cch s dng Rack trn trang ch ca Rack [ti y](https://rack.github.io/) v trn mc docs ca ruby [ti y](https://www.rubydoc.info/github/rack/rack/).\n\n2. ng dng rt th s v KHNG s dng \"bt p rch tt\" no c.\n\n\n## 3. Kin thc cn chun b trc.\n\nD t d nhiu th vn phi nh qua l thuyt mt cht trc khi my m lm g . Mt s khi nim/quy trnh chng ta nn nm trc nh sau:\n\n1) Rack l mt lp nm gia web/app server v ng dng.\n\nEx: Nu ti s dng Rails vi app server l Puma, web server l Nginx th ng i ca mt request s nh sau:\n\n![hoa](/images/rack.jpeg)\n\nNote: Khi nim **web server** v **app server** chng ta s bn ti sau.\n\n2) Nh hnh trn, ta c th thy Rack s giao tip vi **app server**, nn Rack s nhn request t app server gi qua, vi ni dung lng nhng ri rm g , sau  Rack s **lm g ** vi ci request ri rm kia, ri gi kt qu m Rails c th hiu v thc thi c. Sau  Rails s gi v cho Rack kt qu cng ri rm khng km v nhim v ca Rack li l tip tc **lm g ** ci kt qu t Rails, sao cho chuyn kt qu  thnh 1 th g  m app server c th hiu, cui cng app server qung kt qu v cho ngi dng.\n\nNote: Vy Rack nh mt phin dch vin  truyn t gia ng dng v app server (Khng tht s ng v bn cht nhng ta c tm chp nhn lin tng ny).\n\n## 4. Build mt simple Rack application\n\n- To 1 Folder vi 1 file tn **Gemfile** c ni dung nh sau:\n\n```ruby\nsource 'https://rubygems.org'\n\ngem 'rack'\n```\n\n- Ci t gem vi lnh **bundle install**\n\n- To file **config.ru**.\n\nNote: y s l file main  x l request.\n\n- Chy project vi lnh **bundle exec rackup**\n\n> Project demo [ti y!](https://github.com/hdchinh/simple-rack-app)\n\n## 5. Gii thch ni dung m ngun ca app demo\n\n```ruby\nmap '/signup_user' do\n  run SignUpUser.new\nend\n\nmap '/signup' do\n  run MySignUp.new\nend\n\nmap '/signin' do\n  run MySignIn.new\nend\n\nmap '/signin_user' do\n  run SignInUser.new\nend\n\nmap '/' do\n  run HomePage.new\nend\n\nrun MyNotFound.new\n```\n\nChc bn cng c th on ra  ngha ca n, nu map chng ng dn th s chy lnh trong .\n\nEx:\n\n```ruby\nmap '/' do\n  run HomePage.new\nend\n```\n\nNu truy cp theo trang ch th s chy lnh **run HomePage.new**.\n\nNu url ngi dng request khng trng bt c trng hp no th chy lnh **run MyNotFound.new**  cui.\n\nMt class s c dng nh sau:\n\n```ruby\nclass SignInUser\n  def call(env)\n    # read file data\n    file = File.read('data.txt')\n\n    # get params\n    data =  Rack::Utils.parse_nested_query(env['QUERY_STRING'])\n    email = data['email']\n    pass = data['password']\n\n    # convert file data from string to hash\n    hash_data = eval(file)\n    # init variable for user login\n    user_email = nil\n\n    # loop hash to find email params\n    hash_data.each do |k, val|\n      if k == email\n        if val = pass\n          user_email = k\n        end\n      end\n    end\n\n    if user_email\n      body = [\"<h1>email: #{user_email}<h/1>\"]\n    else\n      body = [\"<h1>Email or Password Invalid</h1>\"]\n    end\n\n    [200, {'Content-Type' => 'text/html'}, body]\n  end\nend\n```\n\nBn thy phc tp? Khng sao c, ch cn ch  n dng cui cng trong method call. Ta ch cn nh:\n\n- Mi class s dng method call  ci t (yu cu ca Rack).\n\n- Trong method ny nhn vo mt params, y chnh l request i ti.\n\n- Kt qu tr v ca method call ny l mt mng gm 3 phn t:\n\n  1. Status code (V d nh: 200 -> success, 404 -> not found).\n  2. Mt hash,  y chnh l header, cha nhng thng tin m trnh duyt cn.\n  3. Phn t cui cng l mt mng, chnh l phn body ca kt qu tr v.\n\n## 6. Kt lun\n\nTrn l mt basic app xy dng vi Rack, v nh ngha ch c khng lm s rt kh hiu, nn ti lm demo trc, hy vng trong thi gian ti nu kin thc thu lm   vit v cch vn hnh ca Rack mt cch su sc, ti c th tip tc ch  ny.\n","slug":"2019-06-24-simple-rack-application","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb60025p3m2cm933tm0","content":"<h2 id=\"1-Dat-van-de\"><a href=\"#1-Dat-van-de\" class=\"headerlink\" title=\"1. t vn \"></a>1. t vn </h2><p>C l cng nh ti, khi mi tip cn vi mt framework ruby nh Rails chng hn, bn  nghe v Rack? hoc t ra cng tng thy ci <strong>gem rack</strong> trong Gemfile. Nhng c khi no bn dng n chng? Khng ? Ti cng ngh vy, ti cng k, ti cng ch quan tm, cuc sng khng  high hay sao m li m u vo ci kh :alien:.</p>\n<p>Nhng lm vic hng ngy vi n m khng hiu n l g lun lm cho ta cm gic bt an v nh, cp nht CV l Developer m i phng vn c hi rack l g, li tr li emem..em hng bit th liu c b nh xung rank junior hay khng? Thi th c tm hiu coi n ra sao.</p>\n<p>V th l ti  c docs trn trang ch ca Rack, ni chung c qua th c hiu, m ci hiu n mng lung nh mt tr a, cht na th nh phi anh xin gi tay rt lui thi.</p>\n<p>Vy nn ti s vit mt ng dng Rack (chy trn Rack) very..very simple,  ti v c th c bn c ci nhn thong qua v Rack trc , ch ti thy hiu bit hin ti ca mnh cha   chm gi hn lm v ch  ny (hy vng tng lai gn s c bi chm gi hn lm).</p>\n<h2 id=\"2-Tham-khao\"><a href=\"#2-Tham-khao\" class=\"headerlink\" title=\"2. Tham kho?\"></a>2. Tham kho?</h2><ol>\n<li><p>Bi vit ny ti tham kho cch s dng Rack trn trang ch ca Rack <a href=\"https://rack.github.io/\" target=\"_blank\" rel=\"noopener\">ti y</a> v trn mc docs ca ruby <a href=\"https://www.rubydoc.info/github/rack/rack/\" target=\"_blank\" rel=\"noopener\">ti y</a>.</p>\n</li>\n<li><p>ng dng rt th s v KHNG s dng bt p rch tt no c.</p>\n</li>\n</ol>\n<h2 id=\"3-Kien-thuc-can-chuan-bi-truoc\"><a href=\"#3-Kien-thuc-can-chuan-bi-truoc\" class=\"headerlink\" title=\"3. Kin thc cn chun b trc.\"></a>3. Kin thc cn chun b trc.</h2><p>D t d nhiu th vn phi nh qua l thuyt mt cht trc khi my m lm g . Mt s khi nim/quy trnh chng ta nn nm trc nh sau:</p>\n<p>1) Rack l mt lp nm gia web/app server v ng dng.</p>\n<p>Ex: Nu ti s dng Rails vi app server l Puma, web server l Nginx th ng i ca mt request s nh sau:</p>\n<p><img src=\"/images/rack.jpeg\" alt=\"hoa\"></p>\n<p>Note: Khi nim <strong>web server</strong> v <strong>app server</strong> chng ta s bn ti sau.</p>\n<p>2) Nh hnh trn, ta c th thy Rack s giao tip vi <strong>app server</strong>, nn Rack s nhn request t app server gi qua, vi ni dung lng nhng ri rm g , sau  Rack s <strong>lm g </strong> vi ci request ri rm kia, ri gi kt qu m Rails c th hiu v thc thi c. Sau  Rails s gi v cho Rack kt qu cng ri rm khng km v nhim v ca Rack li l tip tc <strong>lm g </strong> ci kt qu t Rails, sao cho chuyn kt qu  thnh 1 th g  m app server c th hiu, cui cng app server qung kt qu v cho ngi dng.</p>\n<p>Note: Vy Rack nh mt phin dch vin  truyn t gia ng dng v app server (Khng tht s ng v bn cht nhng ta c tm chp nhn lin tng ny).</p>\n<h2 id=\"4-Build-mot-simple-Rack-application\"><a href=\"#4-Build-mot-simple-Rack-application\" class=\"headerlink\" title=\"4. Build mt simple Rack application\"></a>4. Build mt simple Rack application</h2><ul>\n<li>To 1 Folder vi 1 file tn <strong>Gemfile</strong> c ni dung nh sau:</li>\n</ul>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source <span class=\"string\">'https://rubygems.org'</span></span><br><span class=\"line\"></span><br><span class=\"line\">gem <span class=\"string\">'rack'</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Ci t gem vi lnh <strong>bundle install</strong></p>\n</li>\n<li><p>To file <strong>config.ru</strong>.</p>\n</li>\n</ul>\n<p>Note: y s l file main  x l request.</p>\n<ul>\n<li>Chy project vi lnh <strong>bundle exec rackup</strong></li>\n</ul>\n<blockquote>\n<p>Project demo <a href=\"https://github.com/hdchinh/simple-rack-app\" target=\"_blank\" rel=\"noopener\">ti y!</a></p>\n</blockquote>\n<h2 id=\"5-Giai-thich-noi-dung-ma-nguon-cua-app-demo\"><a href=\"#5-Giai-thich-noi-dung-ma-nguon-cua-app-demo\" class=\"headerlink\" title=\"5. Gii thch ni dung m ngun ca app demo\"></a>5. Gii thch ni dung m ngun ca app demo</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map <span class=\"string\">'/signup_user'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run SignUpUser.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signup'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run MySignUp.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signin'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run MySignIn.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signin_user'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run SignInUser.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run HomePage.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">run MyNotFound.new</span><br></pre></td></tr></table></figure>\n\n<p>Chc bn cng c th on ra  ngha ca n, nu map chng ng dn th s chy lnh trong .</p>\n<p>Ex:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map <span class=\"string\">'/'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run HomePage.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu truy cp theo trang ch th s chy lnh <strong>run HomePage.new</strong>.</p>\n<p>Nu url ngi dng request khng trng bt c trng hp no th chy lnh <strong>run MyNotFound.new</strong>  cui.</p>\n<p>Mt class s c dng nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SignInUser</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">call</span><span class=\"params\">(env)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># read file data</span></span><br><span class=\"line\">    file = File.read(<span class=\"string\">'data.txt'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># get params</span></span><br><span class=\"line\">    data =  Rack::Utils.parse_nested_query(env[<span class=\"string\">'QUERY_STRING'</span>])</span><br><span class=\"line\">    email = data[<span class=\"string\">'email'</span>]</span><br><span class=\"line\">    pass = data[<span class=\"string\">'password'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># convert file data from string to hash</span></span><br><span class=\"line\">    hash_data = eval(file)</span><br><span class=\"line\">    <span class=\"comment\"># init variable for user login</span></span><br><span class=\"line\">    user_email = <span class=\"literal\">nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># loop hash to find email params</span></span><br><span class=\"line\">    hash_data.each <span class=\"keyword\">do</span> <span class=\"params\">|k, val|</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> k == email</span><br><span class=\"line\">        <span class=\"keyword\">if</span> val = pass</span><br><span class=\"line\">          user_email = k</span><br><span class=\"line\">        <span class=\"keyword\">end</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> user_email</span><br><span class=\"line\">      body = [<span class=\"string\">\"&lt;h1&gt;email: <span class=\"subst\">#&#123;user_email&#125;</span>&lt;h/1&gt;\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      body = [<span class=\"string\">\"&lt;h1&gt;Email or Password Invalid&lt;/h1&gt;\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"number\">200</span>, &#123;<span class=\"string\">'Content-Type'</span> =&gt; <span class=\"string\">'text/html'</span>&#125;, body]</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Bn thy phc tp? Khng sao c, ch cn ch  n dng cui cng trong method call. Ta ch cn nh:</p>\n<ul>\n<li><p>Mi class s dng method call  ci t (yu cu ca Rack).</p>\n</li>\n<li><p>Trong method ny nhn vo mt params, y chnh l request i ti.</p>\n</li>\n<li><p>Kt qu tr v ca method call ny l mt mng gm 3 phn t:</p>\n<ol>\n<li>Status code (V d nh: 200 -&gt; success, 404 -&gt; not found).</li>\n<li>Mt hash,  y chnh l header, cha nhng thng tin m trnh duyt cn.</li>\n<li>Phn t cui cng l mt mng, chnh l phn body ca kt qu tr v.</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"6-Ket-luan\"><a href=\"#6-Ket-luan\" class=\"headerlink\" title=\"6. Kt lun\"></a>6. Kt lun</h2><p>Trn l mt basic app xy dng vi Rack, v nh ngha ch c khng lm s rt kh hiu, nn ti lm demo trc, hy vng trong thi gian ti nu kin thc thu lm   vit v cch vn hnh ca Rack mt cch su sc, ti c th tip tc ch  ny.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Dat-van-de\"><a href=\"#1-Dat-van-de\" class=\"headerlink\" title=\"1. t vn \"></a>1. t vn </h2><p>C l cng nh ti, khi mi tip cn vi mt framework ruby nh Rails chng hn, bn  nghe v Rack? hoc t ra cng tng thy ci <strong>gem rack</strong> trong Gemfile. Nhng c khi no bn dng n chng? Khng ? Ti cng ngh vy, ti cng k, ti cng ch quan tm, cuc sng khng  high hay sao m li m u vo ci kh :alien:.</p>\n<p>Nhng lm vic hng ngy vi n m khng hiu n l g lun lm cho ta cm gic bt an v nh, cp nht CV l Developer m i phng vn c hi rack l g, li tr li emem..em hng bit th liu c b nh xung rank junior hay khng? Thi th c tm hiu coi n ra sao.</p>\n<p>V th l ti  c docs trn trang ch ca Rack, ni chung c qua th c hiu, m ci hiu n mng lung nh mt tr a, cht na th nh phi anh xin gi tay rt lui thi.</p>\n<p>Vy nn ti s vit mt ng dng Rack (chy trn Rack) very..very simple,  ti v c th c bn c ci nhn thong qua v Rack trc , ch ti thy hiu bit hin ti ca mnh cha   chm gi hn lm v ch  ny (hy vng tng lai gn s c bi chm gi hn lm).</p>\n<h2 id=\"2-Tham-khao\"><a href=\"#2-Tham-khao\" class=\"headerlink\" title=\"2. Tham kho?\"></a>2. Tham kho?</h2><ol>\n<li><p>Bi vit ny ti tham kho cch s dng Rack trn trang ch ca Rack <a href=\"https://rack.github.io/\" target=\"_blank\" rel=\"noopener\">ti y</a> v trn mc docs ca ruby <a href=\"https://www.rubydoc.info/github/rack/rack/\" target=\"_blank\" rel=\"noopener\">ti y</a>.</p>\n</li>\n<li><p>ng dng rt th s v KHNG s dng bt p rch tt no c.</p>\n</li>\n</ol>\n<h2 id=\"3-Kien-thuc-can-chuan-bi-truoc\"><a href=\"#3-Kien-thuc-can-chuan-bi-truoc\" class=\"headerlink\" title=\"3. Kin thc cn chun b trc.\"></a>3. Kin thc cn chun b trc.</h2><p>D t d nhiu th vn phi nh qua l thuyt mt cht trc khi my m lm g . Mt s khi nim/quy trnh chng ta nn nm trc nh sau:</p>\n<p>1) Rack l mt lp nm gia web/app server v ng dng.</p>\n<p>Ex: Nu ti s dng Rails vi app server l Puma, web server l Nginx th ng i ca mt request s nh sau:</p>\n<p><img src=\"/images/rack.jpeg\" alt=\"hoa\"></p>\n<p>Note: Khi nim <strong>web server</strong> v <strong>app server</strong> chng ta s bn ti sau.</p>\n<p>2) Nh hnh trn, ta c th thy Rack s giao tip vi <strong>app server</strong>, nn Rack s nhn request t app server gi qua, vi ni dung lng nhng ri rm g , sau  Rack s <strong>lm g </strong> vi ci request ri rm kia, ri gi kt qu m Rails c th hiu v thc thi c. Sau  Rails s gi v cho Rack kt qu cng ri rm khng km v nhim v ca Rack li l tip tc <strong>lm g </strong> ci kt qu t Rails, sao cho chuyn kt qu  thnh 1 th g  m app server c th hiu, cui cng app server qung kt qu v cho ngi dng.</p>\n<p>Note: Vy Rack nh mt phin dch vin  truyn t gia ng dng v app server (Khng tht s ng v bn cht nhng ta c tm chp nhn lin tng ny).</p>\n<h2 id=\"4-Build-mot-simple-Rack-application\"><a href=\"#4-Build-mot-simple-Rack-application\" class=\"headerlink\" title=\"4. Build mt simple Rack application\"></a>4. Build mt simple Rack application</h2><ul>\n<li>To 1 Folder vi 1 file tn <strong>Gemfile</strong> c ni dung nh sau:</li>\n</ul>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source <span class=\"string\">'https://rubygems.org'</span></span><br><span class=\"line\"></span><br><span class=\"line\">gem <span class=\"string\">'rack'</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Ci t gem vi lnh <strong>bundle install</strong></p>\n</li>\n<li><p>To file <strong>config.ru</strong>.</p>\n</li>\n</ul>\n<p>Note: y s l file main  x l request.</p>\n<ul>\n<li>Chy project vi lnh <strong>bundle exec rackup</strong></li>\n</ul>\n<blockquote>\n<p>Project demo <a href=\"https://github.com/hdchinh/simple-rack-app\" target=\"_blank\" rel=\"noopener\">ti y!</a></p>\n</blockquote>\n<h2 id=\"5-Giai-thich-noi-dung-ma-nguon-cua-app-demo\"><a href=\"#5-Giai-thich-noi-dung-ma-nguon-cua-app-demo\" class=\"headerlink\" title=\"5. Gii thch ni dung m ngun ca app demo\"></a>5. Gii thch ni dung m ngun ca app demo</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map <span class=\"string\">'/signup_user'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run SignUpUser.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signup'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run MySignUp.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signin'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run MySignIn.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/signin_user'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run SignInUser.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">map <span class=\"string\">'/'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run HomePage.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">run MyNotFound.new</span><br></pre></td></tr></table></figure>\n\n<p>Chc bn cng c th on ra  ngha ca n, nu map chng ng dn th s chy lnh trong .</p>\n<p>Ex:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map <span class=\"string\">'/'</span> <span class=\"keyword\">do</span></span><br><span class=\"line\">  run HomePage.new</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu truy cp theo trang ch th s chy lnh <strong>run HomePage.new</strong>.</p>\n<p>Nu url ngi dng request khng trng bt c trng hp no th chy lnh <strong>run MyNotFound.new</strong>  cui.</p>\n<p>Mt class s c dng nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SignInUser</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">call</span><span class=\"params\">(env)</span></span></span><br><span class=\"line\">    <span class=\"comment\"># read file data</span></span><br><span class=\"line\">    file = File.read(<span class=\"string\">'data.txt'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># get params</span></span><br><span class=\"line\">    data =  Rack::Utils.parse_nested_query(env[<span class=\"string\">'QUERY_STRING'</span>])</span><br><span class=\"line\">    email = data[<span class=\"string\">'email'</span>]</span><br><span class=\"line\">    pass = data[<span class=\"string\">'password'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># convert file data from string to hash</span></span><br><span class=\"line\">    hash_data = eval(file)</span><br><span class=\"line\">    <span class=\"comment\"># init variable for user login</span></span><br><span class=\"line\">    user_email = <span class=\"literal\">nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># loop hash to find email params</span></span><br><span class=\"line\">    hash_data.each <span class=\"keyword\">do</span> <span class=\"params\">|k, val|</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> k == email</span><br><span class=\"line\">        <span class=\"keyword\">if</span> val = pass</span><br><span class=\"line\">          user_email = k</span><br><span class=\"line\">        <span class=\"keyword\">end</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> user_email</span><br><span class=\"line\">      body = [<span class=\"string\">\"&lt;h1&gt;email: <span class=\"subst\">#&#123;user_email&#125;</span>&lt;h/1&gt;\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      body = [<span class=\"string\">\"&lt;h1&gt;Email or Password Invalid&lt;/h1&gt;\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"number\">200</span>, &#123;<span class=\"string\">'Content-Type'</span> =&gt; <span class=\"string\">'text/html'</span>&#125;, body]</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Bn thy phc tp? Khng sao c, ch cn ch  n dng cui cng trong method call. Ta ch cn nh:</p>\n<ul>\n<li><p>Mi class s dng method call  ci t (yu cu ca Rack).</p>\n</li>\n<li><p>Trong method ny nhn vo mt params, y chnh l request i ti.</p>\n</li>\n<li><p>Kt qu tr v ca method call ny l mt mng gm 3 phn t:</p>\n<ol>\n<li>Status code (V d nh: 200 -&gt; success, 404 -&gt; not found).</li>\n<li>Mt hash,  y chnh l header, cha nhng thng tin m trnh duyt cn.</li>\n<li>Phn t cui cng l mt mng, chnh l phn body ca kt qu tr v.</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"6-Ket-luan\"><a href=\"#6-Ket-luan\" class=\"headerlink\" title=\"6. Kt lun\"></a>6. Kt lun</h2><p>Trn l mt basic app xy dng vi Rack, v nh ngha ch c khng lm s rt kh hiu, nn ti lm demo trc, hy vng trong thi gian ti nu kin thc thu lm   vit v cch vn hnh ca Rack mt cch su sc, ti c th tip tc ch  ny.</p>\n"},{"title":"T Kho Super Trong Ruby?","date":"2019-06-15T17:00:00.000Z","draft":false,"_content":"\n## t vn \n\nK tha l mt 1 trong 4 yu t ct li to nn c tnh hng i tng ca mt ngn ng (nh nhng g chng ta  c dy  trng). Ring iu  thi    th hin tm quan trng ca n (c tht khng nh :grimacing:).\n\nTrong ngn ng ruby c mt t kho thng xuyn xut hin khi cn k tha hay override li phng thc lp cha  l **super**.\n\nQua bi vit chng ta s cng tm hiu v n.\n\n## Lun bn\n\n## 1. nh ngha\n\n```\nIt calls a method on the parent class with the same name as the method that calls super.\n```\n\nV d:\n\n```ruby\nclass Dog < Pig\n  def testing\n    super\n  end\nend\n```\n\n=> Khi ta gi phng thc **testing** vi mt instance ca lp Dog, ruby s i n class cha/ng/c/k... ca **Dog**  tm v chy phng thc **testing** c implement  lp cha/ng/c/k... .\n\n## 2. So snh super v super()\n\nVi nhng bn mi hc, chng ta i lc s nhm ln l 2 cch gi ny thc cht l mt, cng bi v ruby cho php s dng **()** nh mt optional, tc l c cng c m khng c cng c.\n\nNhng thc ra khng phi vy, 2 cch s dng ny s dn n cc kt qa khc nhau.\n\nCng xt mt v d: Gi s ti c class Cat v mt class con ca Cat tn l YellowCat, m ngun nh sau.\n\nS dng super\n\n```ruby\nclass Cat\n  def initialize\n    puts \"i'm meo\"\n  end\nend\n\nclass YellowCat < Cat\n  def initialize\n    super\n  end\nend\n\nYellowCat.new\n\n# => i'm meo\n```\n\nS dng super()\n\n```ruby\nclass Cat\n  def initialize\n    puts \"i'm meo\"\n  end\nend\n\nclass YellowCat < Cat\n  def initialize\n    super\n  end\nend\n\nYellowCat.new\n\n# => i'm meo\n```\n\n**Kt qu l tng t nhau, iu ny gip chng ta ghi nh mt ,  l khi khng c tham s truyn vo method th dng **super** hay **super()** l tng ng nhau**\n\nTa xt mt v d khc:\n\nS dng super\n\n```ruby\nclass Cat\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n\nclass YellowCat < Cat\n  def initialize(name)\n    super\n  end\nend\n\nmeo = YellowCat.new('mi mi')\n\nputs \"ten meo: #{meo.name}\"\n# => ten meo: mi mi\n```\n\nS dng super()\n\n```ruby\nclass Cat\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n\nclass YellowCat < Cat\n  def initialize(name)\n    super()\n  end\nend\n\nmeo = YellowCat.new('mi mi')\n\nputs \"ten meo: #{meo.name}\"\n# => ten meo: mi mi\n```\n\nn by gi chng ta  pht sinh mt li **wrong number of arguments (given 0, expected 1)**.\niu ny xy ra l v:\n\n**Vi t kho **super** bn s truyn TT C tham s ln method   lp cha. Cn vi **super()** bn ch truyn ln lp cha nhng tham s m bn b vo trong **super()**.**\n\nNh ta thy trong v d trn, ta khng b g vo **super()** => khi ln lp cha (lp Cat) method initialize yu cu tham s name nhng chng ta khng truyn g ln v t  dn n li wrong number of arguments.\n\n khc phc chng ta ch cn truyn tham s vo super()  lp Cat nhn c tham s .\n\n```ruby\nclass YellowCat < Cat\n  def initialize(name)\n    super(name)\n  end\nend\n```\n\n## 3. S hu ch ca super()\n\nTi c mt bi ton:\n\n:one: Ti c 1 lp Cat vi 2 instance variable l name v age.\n:two: Lp YellowCat l lp con ca Cat.\n:three: Lp YellowCat c thm 1 instance variable l role.\n\nXy dng lp Cat c v n gin, ta lm nh sau:\n\n```ruby\nclass Cat < Animal\n  attr_accessor :name, :age\n\n  def initialize(name, age)\n    @name = name\n    @age = age\n  end\nend\n\n# => hon thnh yu cu\n```\n\nTip theo n lp  YellowCat, xem chng cng khng kh:\n\n```ruby\nclass YellowCat < Cat\n  attr_accessor :yellow_cat_name, :yellow_cat_age, :role\n\n  def initialize(yellow_cat_name, yellow_cat_age, role)\n    @yellow_cat_name = yellow_cat_name\n    @yellow_cat_age = yellow_cat_age\n    @role = role\n  end\nend\n\n# => Cng hon thnh yu cu.\n```\n\nCch ny cng hon thnh c yu cu ca bi ton, nhng n khng n t no. V sao? V khi bn to mt instance thuc lp YellowCat n s c tng cng 5 instance variable bao gm 3 instance variable khai bo trong lp YellowCat, v 2 trong lp Cat (b tha 2 instance variable).\n\niu ny i ngc li vi cc quy tc lp trnh quan trng chng ta cn tun th nh DRY.\n\nn y sc mnh **super()** s c thi c  th hin. Ta s optimize li m ngun ca YellowCat nh sau:\n\n```ruby\nclass YellowCat < Cat\n  # thm mt instance variable\n  attr_accessor :role\n\n  def initialize(name, age, role)\n    super(name, age)\n    @role = role\n  end\nend\n\nmeo2 = YellowCat.new('ni ni', 10, 'admin')\nputs \"ten meo la: #{meo2.name} \\ntuoi meo la: #{meo2.age} \\nrole cua meo la: #{meo2.role}\"\n\n# => ten meo la: ni ni\n# => tuoi meo la: 10\n# => role cua meo la: admin\n```\n\n lp con chng ta c thm 1 instance variable, chng ta khai bo cho mnh n v duy nht mi n :arrow_right: khng lng ph vng nh v tn dng c m ngun c.\n\nTrong phng thc khi to i tng YellowCat chng ta khi to bin instance mi, cn 2 instance variable c k tha t lp cha th ta truyn tham s vo **super()**  truyn ln lp cha v mc k lp cha x l th no th tu.\n\n## Tham kho\n\n[1][https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx](https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx)\n","source":"_posts/2019-06-16-tu-khoa-super-trong-ruby.md","raw":"---\ntitle: \"T Kho Super Trong Ruby?\"\ndate: 2019-06-16\ndraft: false\ntags: [\"RUBY\"]\ncategories: [\"RUBY\"]\n\n---\n\n## t vn \n\nK tha l mt 1 trong 4 yu t ct li to nn c tnh hng i tng ca mt ngn ng (nh nhng g chng ta  c dy  trng). Ring iu  thi    th hin tm quan trng ca n (c tht khng nh :grimacing:).\n\nTrong ngn ng ruby c mt t kho thng xuyn xut hin khi cn k tha hay override li phng thc lp cha  l **super**.\n\nQua bi vit chng ta s cng tm hiu v n.\n\n## Lun bn\n\n## 1. nh ngha\n\n```\nIt calls a method on the parent class with the same name as the method that calls super.\n```\n\nV d:\n\n```ruby\nclass Dog < Pig\n  def testing\n    super\n  end\nend\n```\n\n=> Khi ta gi phng thc **testing** vi mt instance ca lp Dog, ruby s i n class cha/ng/c/k... ca **Dog**  tm v chy phng thc **testing** c implement  lp cha/ng/c/k... .\n\n## 2. So snh super v super()\n\nVi nhng bn mi hc, chng ta i lc s nhm ln l 2 cch gi ny thc cht l mt, cng bi v ruby cho php s dng **()** nh mt optional, tc l c cng c m khng c cng c.\n\nNhng thc ra khng phi vy, 2 cch s dng ny s dn n cc kt qa khc nhau.\n\nCng xt mt v d: Gi s ti c class Cat v mt class con ca Cat tn l YellowCat, m ngun nh sau.\n\nS dng super\n\n```ruby\nclass Cat\n  def initialize\n    puts \"i'm meo\"\n  end\nend\n\nclass YellowCat < Cat\n  def initialize\n    super\n  end\nend\n\nYellowCat.new\n\n# => i'm meo\n```\n\nS dng super()\n\n```ruby\nclass Cat\n  def initialize\n    puts \"i'm meo\"\n  end\nend\n\nclass YellowCat < Cat\n  def initialize\n    super\n  end\nend\n\nYellowCat.new\n\n# => i'm meo\n```\n\n**Kt qu l tng t nhau, iu ny gip chng ta ghi nh mt ,  l khi khng c tham s truyn vo method th dng **super** hay **super()** l tng ng nhau**\n\nTa xt mt v d khc:\n\nS dng super\n\n```ruby\nclass Cat\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n\nclass YellowCat < Cat\n  def initialize(name)\n    super\n  end\nend\n\nmeo = YellowCat.new('mi mi')\n\nputs \"ten meo: #{meo.name}\"\n# => ten meo: mi mi\n```\n\nS dng super()\n\n```ruby\nclass Cat\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n\nclass YellowCat < Cat\n  def initialize(name)\n    super()\n  end\nend\n\nmeo = YellowCat.new('mi mi')\n\nputs \"ten meo: #{meo.name}\"\n# => ten meo: mi mi\n```\n\nn by gi chng ta  pht sinh mt li **wrong number of arguments (given 0, expected 1)**.\niu ny xy ra l v:\n\n**Vi t kho **super** bn s truyn TT C tham s ln method   lp cha. Cn vi **super()** bn ch truyn ln lp cha nhng tham s m bn b vo trong **super()**.**\n\nNh ta thy trong v d trn, ta khng b g vo **super()** => khi ln lp cha (lp Cat) method initialize yu cu tham s name nhng chng ta khng truyn g ln v t  dn n li wrong number of arguments.\n\n khc phc chng ta ch cn truyn tham s vo super()  lp Cat nhn c tham s .\n\n```ruby\nclass YellowCat < Cat\n  def initialize(name)\n    super(name)\n  end\nend\n```\n\n## 3. S hu ch ca super()\n\nTi c mt bi ton:\n\n:one: Ti c 1 lp Cat vi 2 instance variable l name v age.\n:two: Lp YellowCat l lp con ca Cat.\n:three: Lp YellowCat c thm 1 instance variable l role.\n\nXy dng lp Cat c v n gin, ta lm nh sau:\n\n```ruby\nclass Cat < Animal\n  attr_accessor :name, :age\n\n  def initialize(name, age)\n    @name = name\n    @age = age\n  end\nend\n\n# => hon thnh yu cu\n```\n\nTip theo n lp  YellowCat, xem chng cng khng kh:\n\n```ruby\nclass YellowCat < Cat\n  attr_accessor :yellow_cat_name, :yellow_cat_age, :role\n\n  def initialize(yellow_cat_name, yellow_cat_age, role)\n    @yellow_cat_name = yellow_cat_name\n    @yellow_cat_age = yellow_cat_age\n    @role = role\n  end\nend\n\n# => Cng hon thnh yu cu.\n```\n\nCch ny cng hon thnh c yu cu ca bi ton, nhng n khng n t no. V sao? V khi bn to mt instance thuc lp YellowCat n s c tng cng 5 instance variable bao gm 3 instance variable khai bo trong lp YellowCat, v 2 trong lp Cat (b tha 2 instance variable).\n\niu ny i ngc li vi cc quy tc lp trnh quan trng chng ta cn tun th nh DRY.\n\nn y sc mnh **super()** s c thi c  th hin. Ta s optimize li m ngun ca YellowCat nh sau:\n\n```ruby\nclass YellowCat < Cat\n  # thm mt instance variable\n  attr_accessor :role\n\n  def initialize(name, age, role)\n    super(name, age)\n    @role = role\n  end\nend\n\nmeo2 = YellowCat.new('ni ni', 10, 'admin')\nputs \"ten meo la: #{meo2.name} \\ntuoi meo la: #{meo2.age} \\nrole cua meo la: #{meo2.role}\"\n\n# => ten meo la: ni ni\n# => tuoi meo la: 10\n# => role cua meo la: admin\n```\n\n lp con chng ta c thm 1 instance variable, chng ta khai bo cho mnh n v duy nht mi n :arrow_right: khng lng ph vng nh v tn dng c m ngun c.\n\nTrong phng thc khi to i tng YellowCat chng ta khi to bin instance mi, cn 2 instance variable c k tha t lp cha th ta truyn tham s vo **super()**  truyn ln lp cha v mc k lp cha x l th no th tu.\n\n## Tham kho\n\n[1][https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx](https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx)\n","slug":"2019-06-16-tu-khoa-super-trong-ruby","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb70028p3m22412dup0","content":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>K tha l mt 1 trong 4 yu t ct li to nn c tnh hng i tng ca mt ngn ng (nh nhng g chng ta  c dy  trng). Ring iu  thi    th hin tm quan trng ca n (c tht khng nh :grimacing:).</p>\n<p>Trong ngn ng ruby c mt t kho thng xuyn xut hin khi cn k tha hay override li phng thc lp cha  l <strong>super</strong>.</p>\n<p>Qua bi vit chng ta s cng tm hiu v n.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Dinh-nghia\"><a href=\"#1-Dinh-nghia\" class=\"headerlink\" title=\"1. nh ngha\"></a>1. nh ngha</h2><figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">It</span> calls a method on the parent <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"keyword\">with</span> <span class=\"title\">the</span> <span class=\"title\">same</span> <span class=\"title\">name</span> <span class=\"title\">as</span> <span class=\"title\">the</span> <span class=\"title\">method</span> <span class=\"title\">that</span> <span class=\"title\">calls</span> <span class=\"title\">super</span>.</span></span><br></pre></td></tr></table></figure>\n\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> &lt; Pig</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">testing</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>=&gt; Khi ta gi phng thc <strong>testing</strong> vi mt instance ca lp Dog, ruby s i n class cha/ng/c/k ca <strong>Dog</strong>  tm v chy phng thc <strong>testing</strong> c implement  lp cha/ng/c/k .</p>\n<h2 id=\"2-So-sanh-super-va-super\"><a href=\"#2-So-sanh-super-va-super\" class=\"headerlink\" title=\"2. So snh super v super()\"></a>2. So snh super v super()</h2><p>Vi nhng bn mi hc, chng ta i lc s nhm ln l 2 cch gi ny thc cht l mt, cng bi v ruby cho php s dng <strong>()</strong> nh mt optional, tc l c cng c m khng c cng c.</p>\n<p>Nhng thc ra khng phi vy, 2 cch s dng ny s dn n cc kt qa khc nhau.</p>\n<p>Cng xt mt v d: Gi s ti c class Cat v mt class con ca Cat tn l YellowCat, m ngun nh sau.</p>\n<p>S dng super</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"i'm meo\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">YellowCat.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; i'm meo</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng super()</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"i'm meo\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">YellowCat.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; i'm meo</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Kt qu l tng t nhau, iu ny gip chng ta ghi nh mt ,  l khi khng c tham s truyn vo method th dng **super</strong> hay <strong>super()</strong> l tng ng nhau**</p>\n<p>Ta xt mt v d khc:</p>\n<p>S dng super</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo = YellowCat.new(<span class=\"string\">'mi mi'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"ten meo: <span class=\"subst\">#&#123;meo.name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo: mi mi</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng super()</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>()</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo = YellowCat.new(<span class=\"string\">'mi mi'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"ten meo: <span class=\"subst\">#&#123;meo.name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo: mi mi</span></span><br></pre></td></tr></table></figure>\n\n<p>n by gi chng ta  pht sinh mt li <strong>wrong number of arguments (given 0, expected 1)</strong>.<br>iu ny xy ra l v:</p>\n<p><strong>Vi t kho **super</strong> bn s truyn TT C tham s ln method   lp cha. Cn vi <strong>super()</strong> bn ch truyn ln lp cha nhng tham s m bn b vo trong <strong>super()</strong>.**</p>\n<p>Nh ta thy trong v d trn, ta khng b g vo <strong>super()</strong> =&gt; khi ln lp cha (lp Cat) method initialize yu cu tham s name nhng chng ta khng truyn g ln v t  dn n li wrong number of arguments.</p>\n<p> khc phc chng ta ch cn truyn tham s vo super()  lp Cat nhn c tham s .</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Su-huu-ich-cua-super\"><a href=\"#3-Su-huu-ich-cua-super\" class=\"headerlink\" title=\"3. S hu ch ca super()\"></a>3. S hu ch ca super()</h2><p>Ti c mt bi ton:</p>\n<p>:one: Ti c 1 lp Cat vi 2 instance variable l name v age.<br>:two: Lp YellowCat l lp con ca Cat.<br>:three: Lp YellowCat c thm 1 instance variable l role.</p>\n<p>Xy dng lp Cat c v n gin, ta lm nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span>, <span class=\"symbol\">:age</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name, age)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">    @age = age</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; hon thnh yu cu</span></span><br></pre></td></tr></table></figure>\n\n<p>Tip theo n lp  YellowCat, xem chng cng khng kh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:yellow_cat_name</span>, <span class=\"symbol\">:yellow_cat_age</span>, <span class=\"symbol\">:role</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(yellow_cat_name, yellow_cat_age, role)</span></span></span><br><span class=\"line\">    @yellow_cat_name = yellow_cat_name</span><br><span class=\"line\">    @yellow_cat_age = yellow_cat_age</span><br><span class=\"line\">    @role = role</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; Cng hon thnh yu cu.</span></span><br></pre></td></tr></table></figure>\n\n<p>Cch ny cng hon thnh c yu cu ca bi ton, nhng n khng n t no. V sao? V khi bn to mt instance thuc lp YellowCat n s c tng cng 5 instance variable bao gm 3 instance variable khai bo trong lp YellowCat, v 2 trong lp Cat (b tha 2 instance variable).</p>\n<p>iu ny i ngc li vi cc quy tc lp trnh quan trng chng ta cn tun th nh DRY.</p>\n<p>n y sc mnh <strong>super()</strong> s c thi c  th hin. Ta s optimize li m ngun ca YellowCat nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"comment\"># thm mt instance variable</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:role</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name, age, role)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name, age)</span><br><span class=\"line\">    @role = role</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo2 = YellowCat.new(<span class=\"string\">'ni ni'</span>, <span class=\"number\">10</span>, <span class=\"string\">'admin'</span>)</span><br><span class=\"line\">puts <span class=\"string\">\"ten meo la: <span class=\"subst\">#&#123;meo2.name&#125;</span> \\ntuoi meo la: <span class=\"subst\">#&#123;meo2.age&#125;</span> \\nrole cua meo la: <span class=\"subst\">#&#123;meo2.role&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo la: ni ni</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; tuoi meo la: 10</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; role cua meo la: admin</span></span><br></pre></td></tr></table></figure>\n\n<p> lp con chng ta c thm 1 instance variable, chng ta khai bo cho mnh n v duy nht mi n :arrow_right: khng lng ph vng nh v tn dng c m ngun c.</p>\n<p>Trong phng thc khi to i tng YellowCat chng ta khi to bin instance mi, cn 2 instance variable c k tha t lp cha th ta truyn tham s vo <strong>super()</strong>  truyn ln lp cha v mc k lp cha x l th no th tu.</p>\n<h2 id=\"Tham-khao\"><a href=\"#Tham-khao\" class=\"headerlink\" title=\"Tham kho\"></a>Tham kho</h2><p>[1]<a href=\"https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx\" target=\"_blank\" rel=\"noopener\">https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Dat-van-de\"><a href=\"#Dat-van-de\" class=\"headerlink\" title=\"t vn \"></a>t vn </h2><p>K tha l mt 1 trong 4 yu t ct li to nn c tnh hng i tng ca mt ngn ng (nh nhng g chng ta  c dy  trng). Ring iu  thi    th hin tm quan trng ca n (c tht khng nh :grimacing:).</p>\n<p>Trong ngn ng ruby c mt t kho thng xuyn xut hin khi cn k tha hay override li phng thc lp cha  l <strong>super</strong>.</p>\n<p>Qua bi vit chng ta s cng tm hiu v n.</p>\n<h2 id=\"Luan-ban\"><a href=\"#Luan-ban\" class=\"headerlink\" title=\"Lun bn\"></a>Lun bn</h2><h2 id=\"1-Dinh-nghia\"><a href=\"#1-Dinh-nghia\" class=\"headerlink\" title=\"1. nh ngha\"></a>1. nh ngha</h2><figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">It</span> calls a method on the parent <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"keyword\">with</span> <span class=\"title\">the</span> <span class=\"title\">same</span> <span class=\"title\">name</span> <span class=\"title\">as</span> <span class=\"title\">the</span> <span class=\"title\">method</span> <span class=\"title\">that</span> <span class=\"title\">calls</span> <span class=\"title\">super</span>.</span></span><br></pre></td></tr></table></figure>\n\n<p>V d:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> &lt; Pig</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">testing</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>=&gt; Khi ta gi phng thc <strong>testing</strong> vi mt instance ca lp Dog, ruby s i n class cha/ng/c/k ca <strong>Dog</strong>  tm v chy phng thc <strong>testing</strong> c implement  lp cha/ng/c/k .</p>\n<h2 id=\"2-So-sanh-super-va-super\"><a href=\"#2-So-sanh-super-va-super\" class=\"headerlink\" title=\"2. So snh super v super()\"></a>2. So snh super v super()</h2><p>Vi nhng bn mi hc, chng ta i lc s nhm ln l 2 cch gi ny thc cht l mt, cng bi v ruby cho php s dng <strong>()</strong> nh mt optional, tc l c cng c m khng c cng c.</p>\n<p>Nhng thc ra khng phi vy, 2 cch s dng ny s dn n cc kt qa khc nhau.</p>\n<p>Cng xt mt v d: Gi s ti c class Cat v mt class con ca Cat tn l YellowCat, m ngun nh sau.</p>\n<p>S dng super</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"i'm meo\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">YellowCat.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; i'm meo</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng super()</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"i'm meo\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">YellowCat.new</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; i'm meo</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Kt qu l tng t nhau, iu ny gip chng ta ghi nh mt ,  l khi khng c tham s truyn vo method th dng **super</strong> hay <strong>super()</strong> l tng ng nhau**</p>\n<p>Ta xt mt v d khc:</p>\n<p>S dng super</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo = YellowCat.new(<span class=\"string\">'mi mi'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"ten meo: <span class=\"subst\">#&#123;meo.name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo: mi mi</span></span><br></pre></td></tr></table></figure>\n\n<p>S dng super()</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>()</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo = YellowCat.new(<span class=\"string\">'mi mi'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"ten meo: <span class=\"subst\">#&#123;meo.name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo: mi mi</span></span><br></pre></td></tr></table></figure>\n\n<p>n by gi chng ta  pht sinh mt li <strong>wrong number of arguments (given 0, expected 1)</strong>.<br>iu ny xy ra l v:</p>\n<p><strong>Vi t kho **super</strong> bn s truyn TT C tham s ln method   lp cha. Cn vi <strong>super()</strong> bn ch truyn ln lp cha nhng tham s m bn b vo trong <strong>super()</strong>.**</p>\n<p>Nh ta thy trong v d trn, ta khng b g vo <strong>super()</strong> =&gt; khi ln lp cha (lp Cat) method initialize yu cu tham s name nhng chng ta khng truyn g ln v t  dn n li wrong number of arguments.</p>\n<p> khc phc chng ta ch cn truyn tham s vo super()  lp Cat nhn c tham s .</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Su-huu-ich-cua-super\"><a href=\"#3-Su-huu-ich-cua-super\" class=\"headerlink\" title=\"3. S hu ch ca super()\"></a>3. S hu ch ca super()</h2><p>Ti c mt bi ton:</p>\n<p>:one: Ti c 1 lp Cat vi 2 instance variable l name v age.<br>:two: Lp YellowCat l lp con ca Cat.<br>:three: Lp YellowCat c thm 1 instance variable l role.</p>\n<p>Xy dng lp Cat c v n gin, ta lm nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> &lt; Animal</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:name</span>, <span class=\"symbol\">:age</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name, age)</span></span></span><br><span class=\"line\">    @name = name</span><br><span class=\"line\">    @age = age</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; hon thnh yu cu</span></span><br></pre></td></tr></table></figure>\n\n<p>Tip theo n lp  YellowCat, xem chng cng khng kh:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:yellow_cat_name</span>, <span class=\"symbol\">:yellow_cat_age</span>, <span class=\"symbol\">:role</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(yellow_cat_name, yellow_cat_age, role)</span></span></span><br><span class=\"line\">    @yellow_cat_name = yellow_cat_name</span><br><span class=\"line\">    @yellow_cat_age = yellow_cat_age</span><br><span class=\"line\">    @role = role</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; Cng hon thnh yu cu.</span></span><br></pre></td></tr></table></figure>\n\n<p>Cch ny cng hon thnh c yu cu ca bi ton, nhng n khng n t no. V sao? V khi bn to mt instance thuc lp YellowCat n s c tng cng 5 instance variable bao gm 3 instance variable khai bo trong lp YellowCat, v 2 trong lp Cat (b tha 2 instance variable).</p>\n<p>iu ny i ngc li vi cc quy tc lp trnh quan trng chng ta cn tun th nh DRY.</p>\n<p>n y sc mnh <strong>super()</strong> s c thi c  th hin. Ta s optimize li m ngun ca YellowCat nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YellowCat</span> &lt; Cat</span></span><br><span class=\"line\">  <span class=\"comment\"># thm mt instance variable</span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:role</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(name, age, role)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name, age)</span><br><span class=\"line\">    @role = role</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">meo2 = YellowCat.new(<span class=\"string\">'ni ni'</span>, <span class=\"number\">10</span>, <span class=\"string\">'admin'</span>)</span><br><span class=\"line\">puts <span class=\"string\">\"ten meo la: <span class=\"subst\">#&#123;meo2.name&#125;</span> \\ntuoi meo la: <span class=\"subst\">#&#123;meo2.age&#125;</span> \\nrole cua meo la: <span class=\"subst\">#&#123;meo2.role&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># =&gt; ten meo la: ni ni</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; tuoi meo la: 10</span></span><br><span class=\"line\"><span class=\"comment\"># =&gt; role cua meo la: admin</span></span><br></pre></td></tr></table></figure>\n\n<p> lp con chng ta c thm 1 instance variable, chng ta khai bo cho mnh n v duy nht mi n :arrow_right: khng lng ph vng nh v tn dng c m ngun c.</p>\n<p>Trong phng thc khi to i tng YellowCat chng ta khi to bin instance mi, cn 2 instance variable c k tha t lp cha th ta truyn tham s vo <strong>super()</strong>  truyn ln lp cha v mc k lp cha x l th no th tu.</p>\n<h2 id=\"Tham-khao\"><a href=\"#Tham-khao\" class=\"headerlink\" title=\"Tham kho\"></a>Tham kho</h2><p>[1]<a href=\"https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx\" target=\"_blank\" rel=\"noopener\">https://odetocode.com/blogs/scott/archive/2010/07/13/ruby-initialize-and-super.aspx</a></p>\n"},{"title":"Terminal macOS Tricks","date":"2019-08-04T17:00:00.000Z","draft":false,"mytag":"#TIL","label":"#til","_content":"\n## 1. Config to show branch in Terminal\n\nOpen **.bash_profile** file then add:\n\n```shell\nparse_git_branch() {\n    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'\n}\n\nexport PS1=\"\\u@\\h \\[\\033[32m\\]\\w - \\$(parse_git_branch)\\[\\033[00m\\] $ \"\n```\n\n## 2. Setup to use *subl* command in macOS\n\nRun:\n\n```\nsudo ln -s /Applications/Sublime\\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl\n```\n\n## 3. Setup to use code command in macOS\n\nIn VSCode Window, press **command** + **shift** + **P** to open package install. Type **shell** to find package **Shell Command : Install code in PATH**, install and done.\n\nReferences:\n\n[1][https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal](https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal)\n\n[2][https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/](https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/)\n","source":"_posts/2019-08-05-setup-terminal-macos.md","raw":"---\ntitle: \"Terminal macOS Tricks\"\ndate: 2019-08-05\ndraft: false\ntags: [\"TIl\"]\ncategories: [\"TIL\"]\nmytag: \"#TIL\"\nlabel: \"#til\"\n---\n\n## 1. Config to show branch in Terminal\n\nOpen **.bash_profile** file then add:\n\n```shell\nparse_git_branch() {\n    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'\n}\n\nexport PS1=\"\\u@\\h \\[\\033[32m\\]\\w - \\$(parse_git_branch)\\[\\033[00m\\] $ \"\n```\n\n## 2. Setup to use *subl* command in macOS\n\nRun:\n\n```\nsudo ln -s /Applications/Sublime\\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl\n```\n\n## 3. Setup to use code command in macOS\n\nIn VSCode Window, press **command** + **shift** + **P** to open package install. Type **shell** to find package **Shell Command : Install code in PATH**, install and done.\n\nReferences:\n\n[1][https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal](https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal)\n\n[2][https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/](https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/)\n","slug":"2019-08-05-setup-terminal-macos","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb7002cp3m20yle4b0o","content":"<h2 id=\"1-Config-to-show-branch-in-Terminal\"><a href=\"#1-Config-to-show-branch-in-Terminal\" class=\"headerlink\" title=\"1. Config to show branch in Terminal\"></a>1. Config to show branch in Terminal</h2><p>Open <strong>.bash_profile</strong> file then add:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">parse_git_branch() &#123;</span><br><span class=\"line\">    git branch 2&gt; /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export PS1=\"\\u@\\h \\[\\033[32m\\]\\w - \\$(parse_git_branch)\\[\\033[00m\\] $ \"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Setup-to-use-subl-command-in-macOS\"><a href=\"#2-Setup-to-use-subl-command-in-macOS\" class=\"headerlink\" title=\"2. Setup to use subl command in macOS\"></a>2. Setup to use <em>subl</em> command in macOS</h2><p>Run:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ln -s <span class=\"regexp\">/Applications/</span>Sublime\\ Text.app<span class=\"regexp\">/Contents/</span>SharedSupport<span class=\"regexp\">/bin/</span>subl <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/bin/</span>subl</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Setup-to-use-code-command-in-macOS\"><a href=\"#3-Setup-to-use-code-command-in-macOS\" class=\"headerlink\" title=\"3. Setup to use code command in macOS\"></a>3. Setup to use code command in macOS</h2><p>In VSCode Window, press <strong>command</strong> + <strong>shift</strong> + <strong>P</strong> to open package install. Type <strong>shell</strong> to find package <strong>Shell Command : Install code in PATH</strong>, install and done.</p>\n<p>References:</p>\n<p>[1]<a href=\"https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal</a></p>\n<p>[2]<a href=\"https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/\" target=\"_blank\" rel=\"noopener\">https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Config-to-show-branch-in-Terminal\"><a href=\"#1-Config-to-show-branch-in-Terminal\" class=\"headerlink\" title=\"1. Config to show branch in Terminal\"></a>1. Config to show branch in Terminal</h2><p>Open <strong>.bash_profile</strong> file then add:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">parse_git_branch() &#123;</span><br><span class=\"line\">    git branch 2&gt; /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export PS1=\"\\u@\\h \\[\\033[32m\\]\\w - \\$(parse_git_branch)\\[\\033[00m\\] $ \"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Setup-to-use-subl-command-in-macOS\"><a href=\"#2-Setup-to-use-subl-command-in-macOS\" class=\"headerlink\" title=\"2. Setup to use subl command in macOS\"></a>2. Setup to use <em>subl</em> command in macOS</h2><p>Run:</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ln -s <span class=\"regexp\">/Applications/</span>Sublime\\ Text.app<span class=\"regexp\">/Contents/</span>SharedSupport<span class=\"regexp\">/bin/</span>subl <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/bin/</span>subl</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Setup-to-use-code-command-in-macOS\"><a href=\"#3-Setup-to-use-code-command-in-macOS\" class=\"headerlink\" title=\"3. Setup to use code command in macOS\"></a>3. Setup to use code command in macOS</h2><p>In VSCode Window, press <strong>command</strong> + <strong>shift</strong> + <strong>P</strong> to open package install. Type <strong>shell</strong> to find package <strong>Shell Command : Install code in PATH</strong>, install and done.</p>\n<p>References:</p>\n<p>[1]<a href=\"https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/17333531/how-can-i-display-the-current-branch-and-folder-path-in-terminal</a></p>\n<p>[2]<a href=\"https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/\" target=\"_blank\" rel=\"noopener\">https://www.tunnelsup.com/how-to-open-sublime-text-from-the-command-line-using-mac-osx/</a></p>\n"},{"title":"My Favourite Vscode Extensions","date":"2019-09-19T17:00:00.000Z","draft":false,"label":"#til","_content":"\n1. Leetcode (https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode)\n2. Turbo console log ( https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log)\n3. Polacode ( https://marketplace.visualstudio.com/items?itemName=pnp.polacode)\n4. Path intellisence (https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense)\n5. Vscode-iocns (https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons)\n6. Ident-rainbow (https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow)\n7. Bracket Pair Colorizer 2 (https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2)\n8. Markdown preview (https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced)\n","source":"_posts/2019-09-20-vscode-extension.md","raw":"---\ntitle: \"My Favourite Vscode Extensions\"\ndate: 2019-09-20\ndraft: false\ntags: [\"TIl\"]\ncategories: [\"TIL\"]\nlabel: \"#til\"\n---\n\n1. Leetcode (https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode)\n2. Turbo console log ( https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log)\n3. Polacode ( https://marketplace.visualstudio.com/items?itemName=pnp.polacode)\n4. Path intellisence (https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense)\n5. Vscode-iocns (https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons)\n6. Ident-rainbow (https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow)\n7. Bracket Pair Colorizer 2 (https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2)\n8. Markdown preview (https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced)\n","slug":"2019-09-20-vscode-extension","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb8002gp3m24gb8hzd4","content":"<ol>\n<li>Leetcode (<a href=\"https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode</a>)</li>\n<li>Turbo console log ( <a href=\"https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log</a>)</li>\n<li>Polacode ( <a href=\"https://marketplace.visualstudio.com/items?itemName=pnp.polacode\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=pnp.polacode</a>)</li>\n<li>Path intellisence (<a href=\"https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense</a>)</li>\n<li>Vscode-iocns (<a href=\"https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons</a>)</li>\n<li>Ident-rainbow (<a href=\"https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow</a>)</li>\n<li>Bracket Pair Colorizer 2 (<a href=\"https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2</a>)</li>\n<li>Markdown preview (<a href=\"https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced</a>)</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>Leetcode (<a href=\"https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-leetcode</a>)</li>\n<li>Turbo console log ( <a href=\"https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=ChakrounAnas.turbo-console-log</a>)</li>\n<li>Polacode ( <a href=\"https://marketplace.visualstudio.com/items?itemName=pnp.polacode\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=pnp.polacode</a>)</li>\n<li>Path intellisence (<a href=\"https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense</a>)</li>\n<li>Vscode-iocns (<a href=\"https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons</a>)</li>\n<li>Ident-rainbow (<a href=\"https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow</a>)</li>\n<li>Bracket Pair Colorizer 2 (<a href=\"https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2</a>)</li>\n<li>Markdown preview (<a href=\"https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced\" target=\"_blank\" rel=\"noopener\">https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced</a>)</li>\n</ol>\n"},{"title":"Basic Vim Setup","date":"2019-09-19T17:00:00.000Z","draft":false,"mytag":"#TIL","_content":"\n1. Plugin management: https://github.com/junegunn/vim-plug#installation\n2. Tree project: https://github.com/scrooloose/nerdtree\n3. Code complete: https://github.com/ycm-core/YouCompleteMe#installation\n4. Control + P: https://github.com/ctrlpvim/ctrlp.vim\n5. Monakai theme: https://github.com/sickill/vim-monokai\n6. Vimfile:\n\n```vim\ncall plug#begin('~/.vim/plugged')\n\nPlug 'https://github.com/scrooloose/nerdtree.git'\nPlug 'morhetz/gruvbox'\nPlug 'vim-airline/vim-airline'\nPlug 'scrooloose/nerdcommenter'\n\" Plug 'dracula/vim', { 'as': 'dracula' }\n\n\" Initialize plugin system\ncall plug#end()\n\n\" Set colorscheme\n\" colorscheme gruvbox\n\n\" Set dark background\n\"set background=dark\n\n\" Use monokai\n\" syntax enable\ncolorscheme monokai\n\n\" Copy clibboard\nset clipboard=unnamedplus\n\n\" Use ctrlp\nset runtimepath^=~/.vim/bundle/ctrlp.vim\n\nif has('mouse')\n  set mouse=a\nendif\n\nset nu\n\nset autoindent\nset si \"smart indent\"\n\nsyntax on\n\nautocmd StdinReadPre * let s:std_in=1\nautocmd VimEnter * if argc() == 0 && !exists(\"s:std_in\") | NERDTree | endif\n\nautocmd bufenter * if (winnr(\"$\") == 1 && exists(\"b:NERDTree\") && b:NERDTree.isTabTree()) | q | endif\nmap <C-n> :NERDTreeToggle<CR>\n\nset expandtab\nset tabstop=2\nset softtabstop=2\n\n```\n","source":"_posts/2019-10-30-basic-vim-setup.md","raw":"---\ntitle: \"Basic Vim Setup\"\ndate: 2019-09-20\ndraft: false\ntags: [\"TIl\"]\ncategories: [\"til\"]\nmytag: \"#TIL\"\n---\n\n1. Plugin management: https://github.com/junegunn/vim-plug#installation\n2. Tree project: https://github.com/scrooloose/nerdtree\n3. Code complete: https://github.com/ycm-core/YouCompleteMe#installation\n4. Control + P: https://github.com/ctrlpvim/ctrlp.vim\n5. Monakai theme: https://github.com/sickill/vim-monokai\n6. Vimfile:\n\n```vim\ncall plug#begin('~/.vim/plugged')\n\nPlug 'https://github.com/scrooloose/nerdtree.git'\nPlug 'morhetz/gruvbox'\nPlug 'vim-airline/vim-airline'\nPlug 'scrooloose/nerdcommenter'\n\" Plug 'dracula/vim', { 'as': 'dracula' }\n\n\" Initialize plugin system\ncall plug#end()\n\n\" Set colorscheme\n\" colorscheme gruvbox\n\n\" Set dark background\n\"set background=dark\n\n\" Use monokai\n\" syntax enable\ncolorscheme monokai\n\n\" Copy clibboard\nset clipboard=unnamedplus\n\n\" Use ctrlp\nset runtimepath^=~/.vim/bundle/ctrlp.vim\n\nif has('mouse')\n  set mouse=a\nendif\n\nset nu\n\nset autoindent\nset si \"smart indent\"\n\nsyntax on\n\nautocmd StdinReadPre * let s:std_in=1\nautocmd VimEnter * if argc() == 0 && !exists(\"s:std_in\") | NERDTree | endif\n\nautocmd bufenter * if (winnr(\"$\") == 1 && exists(\"b:NERDTree\") && b:NERDTree.isTabTree()) | q | endif\nmap <C-n> :NERDTreeToggle<CR>\n\nset expandtab\nset tabstop=2\nset softtabstop=2\n\n```\n","slug":"2019-10-30-basic-vim-setup","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb8002kp3m266czc1nn","content":"<ol>\n<li>Plugin management: <a href=\"https://github.com/junegunn/vim-plug#installation\" target=\"_blank\" rel=\"noopener\">https://github.com/junegunn/vim-plug#installation</a></li>\n<li>Tree project: <a href=\"https://github.com/scrooloose/nerdtree\" target=\"_blank\" rel=\"noopener\">https://github.com/scrooloose/nerdtree</a></li>\n<li>Code complete: <a href=\"https://github.com/ycm-core/YouCompleteMe#installation\" target=\"_blank\" rel=\"noopener\">https://github.com/ycm-core/YouCompleteMe#installation</a></li>\n<li>Control + P: <a href=\"https://github.com/ctrlpvim/ctrlp.vim\" target=\"_blank\" rel=\"noopener\">https://github.com/ctrlpvim/ctrlp.vim</a></li>\n<li>Monakai theme: <a href=\"https://github.com/sickill/vim-monokai\" target=\"_blank\" rel=\"noopener\">https://github.com/sickill/vim-monokai</a></li>\n<li>Vimfile:</li>\n</ol>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">call</span> plug#begin(<span class=\"string\">'~/.vim/plugged'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">Plug <span class=\"string\">'https://github.com/scrooloose/nerdtree.git'</span></span><br><span class=\"line\">Plug <span class=\"string\">'morhetz/gruvbox'</span></span><br><span class=\"line\">Plug <span class=\"string\">'vim-airline/vim-airline'</span></span><br><span class=\"line\">Plug <span class=\"string\">'scrooloose/nerdcommenter'</span></span><br><span class=\"line\"><span class=\"comment\">\" Plug 'dracula/vim', &#123; 'as': 'dracula' &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Initialize plugin system</span></span><br><span class=\"line\"><span class=\"keyword\">call</span> plug#end()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Set colorscheme</span></span><br><span class=\"line\"><span class=\"comment\">\" colorscheme gruvbox</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Set dark background</span></span><br><span class=\"line\"><span class=\"comment\">\"set background=dark</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Use monokai</span></span><br><span class=\"line\"><span class=\"comment\">\" syntax enable</span></span><br><span class=\"line\"><span class=\"keyword\">colorscheme</span> monokai</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Copy clibboard</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> clipboard=unnamedplus</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Use ctrlp</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> runtimepath^=~/.<span class=\"keyword\">vim</span>/bundle/ctrlp.<span class=\"keyword\">vim</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">has</span>(<span class=\"string\">'mouse'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">set</span> mouse=<span class=\"keyword\">a</span></span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">nu</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> autoindent</span><br><span class=\"line\"><span class=\"keyword\">set</span> si <span class=\"string\">\"smart indent\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">syntax</span> <span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> StdinReadPre * <span class=\"keyword\">let</span> <span class=\"variable\">s:std_in</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> VimEnter * <span class=\"keyword\">if</span> <span class=\"built_in\">argc</span>() == <span class=\"number\">0</span> &amp;&amp; !exists(<span class=\"string\">\"s:std_in\"</span>) | NERDTree | <span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> bufenter * <span class=\"keyword\">if</span> (<span class=\"built_in\">winnr</span>(<span class=\"string\">\"$\"</span>) == <span class=\"number\">1</span> &amp;&amp; <span class=\"built_in\">exists</span>(<span class=\"string\">\"b:NERDTree\"</span>) &amp;&amp; <span class=\"variable\">b:NERDTree</span>.isTabTree()) | q | <span class=\"keyword\">endif</span></span><br><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;C-n&gt;</span> :NERDTreeToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> expandtab</span><br><span class=\"line\"><span class=\"keyword\">set</span> tabstop=<span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> softtabstop=<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>Plugin management: <a href=\"https://github.com/junegunn/vim-plug#installation\" target=\"_blank\" rel=\"noopener\">https://github.com/junegunn/vim-plug#installation</a></li>\n<li>Tree project: <a href=\"https://github.com/scrooloose/nerdtree\" target=\"_blank\" rel=\"noopener\">https://github.com/scrooloose/nerdtree</a></li>\n<li>Code complete: <a href=\"https://github.com/ycm-core/YouCompleteMe#installation\" target=\"_blank\" rel=\"noopener\">https://github.com/ycm-core/YouCompleteMe#installation</a></li>\n<li>Control + P: <a href=\"https://github.com/ctrlpvim/ctrlp.vim\" target=\"_blank\" rel=\"noopener\">https://github.com/ctrlpvim/ctrlp.vim</a></li>\n<li>Monakai theme: <a href=\"https://github.com/sickill/vim-monokai\" target=\"_blank\" rel=\"noopener\">https://github.com/sickill/vim-monokai</a></li>\n<li>Vimfile:</li>\n</ol>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">call</span> plug#begin(<span class=\"string\">'~/.vim/plugged'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">Plug <span class=\"string\">'https://github.com/scrooloose/nerdtree.git'</span></span><br><span class=\"line\">Plug <span class=\"string\">'morhetz/gruvbox'</span></span><br><span class=\"line\">Plug <span class=\"string\">'vim-airline/vim-airline'</span></span><br><span class=\"line\">Plug <span class=\"string\">'scrooloose/nerdcommenter'</span></span><br><span class=\"line\"><span class=\"comment\">\" Plug 'dracula/vim', &#123; 'as': 'dracula' &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Initialize plugin system</span></span><br><span class=\"line\"><span class=\"keyword\">call</span> plug#end()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Set colorscheme</span></span><br><span class=\"line\"><span class=\"comment\">\" colorscheme gruvbox</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Set dark background</span></span><br><span class=\"line\"><span class=\"comment\">\"set background=dark</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Use monokai</span></span><br><span class=\"line\"><span class=\"comment\">\" syntax enable</span></span><br><span class=\"line\"><span class=\"keyword\">colorscheme</span> monokai</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Copy clibboard</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> clipboard=unnamedplus</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">\" Use ctrlp</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> runtimepath^=~/.<span class=\"keyword\">vim</span>/bundle/ctrlp.<span class=\"keyword\">vim</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">has</span>(<span class=\"string\">'mouse'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">set</span> mouse=<span class=\"keyword\">a</span></span><br><span class=\"line\"><span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">nu</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> autoindent</span><br><span class=\"line\"><span class=\"keyword\">set</span> si <span class=\"string\">\"smart indent\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">syntax</span> <span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> StdinReadPre * <span class=\"keyword\">let</span> <span class=\"variable\">s:std_in</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> VimEnter * <span class=\"keyword\">if</span> <span class=\"built_in\">argc</span>() == <span class=\"number\">0</span> &amp;&amp; !exists(<span class=\"string\">\"s:std_in\"</span>) | NERDTree | <span class=\"keyword\">endif</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">autocmd</span> bufenter * <span class=\"keyword\">if</span> (<span class=\"built_in\">winnr</span>(<span class=\"string\">\"$\"</span>) == <span class=\"number\">1</span> &amp;&amp; <span class=\"built_in\">exists</span>(<span class=\"string\">\"b:NERDTree\"</span>) &amp;&amp; <span class=\"variable\">b:NERDTree</span>.isTabTree()) | q | <span class=\"keyword\">endif</span></span><br><span class=\"line\"><span class=\"keyword\">map</span> <span class=\"symbol\">&lt;C-n&gt;</span> :NERDTreeToggle<span class=\"symbol\">&lt;CR&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span> expandtab</span><br><span class=\"line\"><span class=\"keyword\">set</span> tabstop=<span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> softtabstop=<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Deploy My Blog Use Script","date":"2019-11-30T17:00:00.000Z","label":"#til","_content":"\n## 1. Example\n\n```bash\n#!/bin/bash\nGREEN='\\033[0;32m'\nNC='\\033[0m'\n\nhexo_clean=\"hexo clean\"\nhexo_generate=\"hexo generate\"\ncd_public=\"cd public\"\ncreate_file=\"touch CNAME\"\nadd_content=\"echo \"hdchinh.com\" >> CNAME\"\ndeploy=\"hexo deploy\"\n\necho \"${GREEN}============ Starting Gengerate ===============${NC}\"\neval $hexo_clean\neval $hexo_generate\neval $cd_public\n\necho \"${GREEN}============ Starting Create CNAME ============${NC}\"\neval $create_file\neval $add_content\n\necho \"${GREEN}============ Starting Deploy ==================${NC}\"\neval $deploy\necho \"${GREEN}============ Done =============================${NC}\"\n\n```\n\n## 2. Use multiple command in oneline\n\nWe have two commands need to execute:\n\neg: A, B\n\nWe have three ways to execute A, B in one line.\n\n```bash\nA; B (always run A, B)\n\nA && B (run B if A execute successful)\n\nA || B (run B if A execute failure)\n```\n","source":"_posts/2019-12-01-basic-bash-file-to-deploy-my-blog.md","raw":"---\ntitle: Deploy My Blog Use Script\ndate: 2019-12-01\ntags: [\"TIL\"]\nlabel: \"#til\"\n---\n\n## 1. Example\n\n```bash\n#!/bin/bash\nGREEN='\\033[0;32m'\nNC='\\033[0m'\n\nhexo_clean=\"hexo clean\"\nhexo_generate=\"hexo generate\"\ncd_public=\"cd public\"\ncreate_file=\"touch CNAME\"\nadd_content=\"echo \"hdchinh.com\" >> CNAME\"\ndeploy=\"hexo deploy\"\n\necho \"${GREEN}============ Starting Gengerate ===============${NC}\"\neval $hexo_clean\neval $hexo_generate\neval $cd_public\n\necho \"${GREEN}============ Starting Create CNAME ============${NC}\"\neval $create_file\neval $add_content\n\necho \"${GREEN}============ Starting Deploy ==================${NC}\"\neval $deploy\necho \"${GREEN}============ Done =============================${NC}\"\n\n```\n\n## 2. Use multiple command in oneline\n\nWe have two commands need to execute:\n\neg: A, B\n\nWe have three ways to execute A, B in one line.\n\n```bash\nA; B (always run A, B)\n\nA && B (run B if A execute successful)\n\nA || B (run B if A execute failure)\n```\n","slug":"2019-12-01-basic-bash-file-to-deploy-my-blog","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsb9002np3m22gwieq4f","content":"<h2 id=\"1-Example\"><a href=\"#1-Example\" class=\"headerlink\" title=\"1. Example\"></a>1. Example</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">GREEN=<span class=\"string\">'\\033[0;32m'</span></span><br><span class=\"line\">NC=<span class=\"string\">'\\033[0m'</span></span><br><span class=\"line\"></span><br><span class=\"line\">hexo_clean=<span class=\"string\">\"hexo clean\"</span></span><br><span class=\"line\">hexo_generate=<span class=\"string\">\"hexo generate\"</span></span><br><span class=\"line\">cd_public=<span class=\"string\">\"cd public\"</span></span><br><span class=\"line\">create_file=<span class=\"string\">\"touch CNAME\"</span></span><br><span class=\"line\">add_content=<span class=\"string\">\"echo \"</span>hdchinh.com<span class=\"string\">\" &gt;&gt; CNAME\"</span></span><br><span class=\"line\">deploy=<span class=\"string\">\"hexo deploy\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Gengerate ===============<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$hexo_clean</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$hexo_generate</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$cd_public</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Create CNAME ============<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$create_file</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$add_content</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Deploy ==================<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$deploy</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Done =============================<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Use-multiple-command-in-oneline\"><a href=\"#2-Use-multiple-command-in-oneline\" class=\"headerlink\" title=\"2. Use multiple command in oneline\"></a>2. Use multiple command in oneline</h2><p>We have two commands need to execute:</p>\n<p>eg: A, B</p>\n<p>We have three ways to execute A, B in one line.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A; B (always run A, B)</span><br><span class=\"line\"></span><br><span class=\"line\">A &amp;&amp; B (run B <span class=\"keyword\">if</span> A execute successful)</span><br><span class=\"line\"></span><br><span class=\"line\">A || B (run B <span class=\"keyword\">if</span> A execute failure)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Example\"><a href=\"#1-Example\" class=\"headerlink\" title=\"1. Example\"></a>1. Example</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">GREEN=<span class=\"string\">'\\033[0;32m'</span></span><br><span class=\"line\">NC=<span class=\"string\">'\\033[0m'</span></span><br><span class=\"line\"></span><br><span class=\"line\">hexo_clean=<span class=\"string\">\"hexo clean\"</span></span><br><span class=\"line\">hexo_generate=<span class=\"string\">\"hexo generate\"</span></span><br><span class=\"line\">cd_public=<span class=\"string\">\"cd public\"</span></span><br><span class=\"line\">create_file=<span class=\"string\">\"touch CNAME\"</span></span><br><span class=\"line\">add_content=<span class=\"string\">\"echo \"</span>hdchinh.com<span class=\"string\">\" &gt;&gt; CNAME\"</span></span><br><span class=\"line\">deploy=<span class=\"string\">\"hexo deploy\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Gengerate ===============<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$hexo_clean</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$hexo_generate</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$cd_public</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Create CNAME ============<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$create_file</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$add_content</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Starting Deploy ==================<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"variable\">$deploy</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$&#123;GREEN&#125;</span>============ Done =============================<span class=\"variable\">$&#123;NC&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Use-multiple-command-in-oneline\"><a href=\"#2-Use-multiple-command-in-oneline\" class=\"headerlink\" title=\"2. Use multiple command in oneline\"></a>2. Use multiple command in oneline</h2><p>We have two commands need to execute:</p>\n<p>eg: A, B</p>\n<p>We have three ways to execute A, B in one line.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A; B (always run A, B)</span><br><span class=\"line\"></span><br><span class=\"line\">A &amp;&amp; B (run B <span class=\"keyword\">if</span> A execute successful)</span><br><span class=\"line\"></span><br><span class=\"line\">A || B (run B <span class=\"keyword\">if</span> A execute failure)</span><br></pre></td></tr></table></figure>\n"},{"title":"Use multiple accounts with SSH","date":"2019-11-30T17:00:00.000Z","_content":"\n## 1. Generate keys\n\n```bash\nssh-keygen -t rsa -C \"YOUr_EMAIL_OR_YOUR_INFO\" -f \"YOUR_NAME_YOU_WANT_TO_SET_FOR_THIS_KEY\"\n```\n\neg.\n```bash\nssh-keygen -t rsa -C \"hduychinh@gmail.com\" -f \"primary_github\"\n```\n\n\n## 2. Add key to ssh-agent\n\neg.\n```bash\nssh-add ~/.ssh/your_file_ssh\n```\n\nwhat is ssh-agent?\n\neazy way, we can think it like a stack. When you access to server with ssh connection type.\nSo your device will send this stack to server. And if the valid key (private key) stored in this stack, you can access to server.\n\nIf you use ssh-agent. You can access like this:\n\n```bash\nssh ubuntu@123.456.789\n```\n\ninstead of:\n\n```bash\nssh -i ~/.ssh/your_valid_private_key ubuntu@123.456.789\n```\n\n## 3. ssh-agent\n\nRemove all entries in ssh-agent:\n```bash\nssh-add -D\n```\n\nShow all entries in ssh-agent:\n```bash\nssh-add -l\n```\n\n## 4. Create config file\n\n> ~/.ssh/config\n\neg:\n\n```\nHost primary_github.github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/primary_github\n\nHost secondary_github.github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/secondary_github\n```\n## 5. Add remote with prefix\n\neg:\n```bash\ngit remote add origin git@primary_github.github.com:1312047/nus-overview.git\n```\n","source":"_posts/2019-12-01-how-to-use-multi-account-with-ssh.md","raw":"---\ntitle: Use multiple accounts with SSH\ndate: 2019-12-01\ntags: [\"TIL\"]\n---\n\n## 1. Generate keys\n\n```bash\nssh-keygen -t rsa -C \"YOUr_EMAIL_OR_YOUR_INFO\" -f \"YOUR_NAME_YOU_WANT_TO_SET_FOR_THIS_KEY\"\n```\n\neg.\n```bash\nssh-keygen -t rsa -C \"hduychinh@gmail.com\" -f \"primary_github\"\n```\n\n\n## 2. Add key to ssh-agent\n\neg.\n```bash\nssh-add ~/.ssh/your_file_ssh\n```\n\nwhat is ssh-agent?\n\neazy way, we can think it like a stack. When you access to server with ssh connection type.\nSo your device will send this stack to server. And if the valid key (private key) stored in this stack, you can access to server.\n\nIf you use ssh-agent. You can access like this:\n\n```bash\nssh ubuntu@123.456.789\n```\n\ninstead of:\n\n```bash\nssh -i ~/.ssh/your_valid_private_key ubuntu@123.456.789\n```\n\n## 3. ssh-agent\n\nRemove all entries in ssh-agent:\n```bash\nssh-add -D\n```\n\nShow all entries in ssh-agent:\n```bash\nssh-add -l\n```\n\n## 4. Create config file\n\n> ~/.ssh/config\n\neg:\n\n```\nHost primary_github.github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/primary_github\n\nHost secondary_github.github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/secondary_github\n```\n## 5. Add remote with prefix\n\neg:\n```bash\ngit remote add origin git@primary_github.github.com:1312047/nus-overview.git\n```\n","slug":"2019-12-01-how-to-use-multi-account-with-ssh","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsba002sp3m26niucg7s","content":"<h2 id=\"1-Generate-keys\"><a href=\"#1-Generate-keys\" class=\"headerlink\" title=\"1. Generate keys\"></a>1. Generate keys</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"YOUr_EMAIL_OR_YOUR_INFO\"</span> -f <span class=\"string\">\"YOUR_NAME_YOU_WANT_TO_SET_FOR_THIS_KEY\"</span></span><br></pre></td></tr></table></figure>\n\n<p>eg.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"hduychinh@gmail.com\"</span> -f <span class=\"string\">\"primary_github\"</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"2-Add-key-to-ssh-agent\"><a href=\"#2-Add-key-to-ssh-agent\" class=\"headerlink\" title=\"2. Add key to ssh-agent\"></a>2. Add key to ssh-agent</h2><p>eg.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add ~/.ssh/your_file_ssh</span><br></pre></td></tr></table></figure>\n\n<p>what is ssh-agent?</p>\n<p>eazy way, we can think it like a stack. When you access to server with ssh connection type.<br>So your device will send this stack to server. And if the valid key (private key) stored in this stack, you can access to server.</p>\n<p>If you use ssh-agent. You can access like this:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh ubuntu@123.456.789</span><br></pre></td></tr></table></figure>\n\n<p>instead of:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -i ~/.ssh/your_valid_private_key ubuntu@123.456.789</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-ssh-agent\"><a href=\"#3-ssh-agent\" class=\"headerlink\" title=\"3. ssh-agent\"></a>3. ssh-agent</h2><p>Remove all entries in ssh-agent:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add -D</span><br></pre></td></tr></table></figure>\n\n<p>Show all entries in ssh-agent:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add -l</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Create-config-file\"><a href=\"#4-Create-config-file\" class=\"headerlink\" title=\"4. Create config file\"></a>4. Create config file</h2><blockquote>\n<p>~/.ssh/config</p>\n</blockquote>\n<p>eg:</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Host</span> <span class=\"string\">primary_github.github.com</span></span><br><span class=\"line\"><span class=\"attr\">HostName</span> <span class=\"string\">github.com</span></span><br><span class=\"line\"><span class=\"attr\">PreferredAuthentications</span> <span class=\"string\">publickey</span></span><br><span class=\"line\"><span class=\"attr\">IdentityFile</span> <span class=\"string\">~/.ssh/primary_github</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">Host</span> <span class=\"string\">secondary_github.github.com</span></span><br><span class=\"line\"><span class=\"attr\">HostName</span> <span class=\"string\">github.com</span></span><br><span class=\"line\"><span class=\"attr\">PreferredAuthentications</span> <span class=\"string\">publickey</span></span><br><span class=\"line\"><span class=\"attr\">IdentityFile</span> <span class=\"string\">~/.ssh/secondary_github</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"5-Add-remote-with-prefix\"><a href=\"#5-Add-remote-with-prefix\" class=\"headerlink\" title=\"5. Add remote with prefix\"></a>5. Add remote with prefix</h2><p>eg:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin git@primary_github.github.com:1312047/nus-overview.git</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Generate-keys\"><a href=\"#1-Generate-keys\" class=\"headerlink\" title=\"1. Generate keys\"></a>1. Generate keys</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"YOUr_EMAIL_OR_YOUR_INFO\"</span> -f <span class=\"string\">\"YOUR_NAME_YOU_WANT_TO_SET_FOR_THIS_KEY\"</span></span><br></pre></td></tr></table></figure>\n\n<p>eg.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"hduychinh@gmail.com\"</span> -f <span class=\"string\">\"primary_github\"</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"2-Add-key-to-ssh-agent\"><a href=\"#2-Add-key-to-ssh-agent\" class=\"headerlink\" title=\"2. Add key to ssh-agent\"></a>2. Add key to ssh-agent</h2><p>eg.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add ~/.ssh/your_file_ssh</span><br></pre></td></tr></table></figure>\n\n<p>what is ssh-agent?</p>\n<p>eazy way, we can think it like a stack. When you access to server with ssh connection type.<br>So your device will send this stack to server. And if the valid key (private key) stored in this stack, you can access to server.</p>\n<p>If you use ssh-agent. You can access like this:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh ubuntu@123.456.789</span><br></pre></td></tr></table></figure>\n\n<p>instead of:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -i ~/.ssh/your_valid_private_key ubuntu@123.456.789</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-ssh-agent\"><a href=\"#3-ssh-agent\" class=\"headerlink\" title=\"3. ssh-agent\"></a>3. ssh-agent</h2><p>Remove all entries in ssh-agent:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add -D</span><br></pre></td></tr></table></figure>\n\n<p>Show all entries in ssh-agent:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add -l</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Create-config-file\"><a href=\"#4-Create-config-file\" class=\"headerlink\" title=\"4. Create config file\"></a>4. Create config file</h2><blockquote>\n<p>~/.ssh/config</p>\n</blockquote>\n<p>eg:</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Host</span> <span class=\"string\">primary_github.github.com</span></span><br><span class=\"line\"><span class=\"attr\">HostName</span> <span class=\"string\">github.com</span></span><br><span class=\"line\"><span class=\"attr\">PreferredAuthentications</span> <span class=\"string\">publickey</span></span><br><span class=\"line\"><span class=\"attr\">IdentityFile</span> <span class=\"string\">~/.ssh/primary_github</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">Host</span> <span class=\"string\">secondary_github.github.com</span></span><br><span class=\"line\"><span class=\"attr\">HostName</span> <span class=\"string\">github.com</span></span><br><span class=\"line\"><span class=\"attr\">PreferredAuthentications</span> <span class=\"string\">publickey</span></span><br><span class=\"line\"><span class=\"attr\">IdentityFile</span> <span class=\"string\">~/.ssh/secondary_github</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"5-Add-remote-with-prefix\"><a href=\"#5-Add-remote-with-prefix\" class=\"headerlink\" title=\"5. Add remote with prefix\"></a>5. Add remote with prefix</h2><p>eg:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin git@primary_github.github.com:1312047/nus-overview.git</span><br></pre></td></tr></table></figure>\n"},{"title":"How To Use Arguments In Ruby","date":"2019-12-04T17:00:00.000Z","_content":"\n## How Many Kind Of Arguments In Ruby?\n\nWe can answer: **Three**\n\n1. Required arguments\n\neg:\n\n```ruby\ndef hello(name)\n  puts \"Hello #{name}\"\nend\n```\n\nIn there, *name* is a required argument. it mean if you call **hello** method and do not pass an argument, the output that you see should like:\n\n```ruby\nhello()\n\n=> ArgumentError: wrong number of arguments (given 0, expected 1)\n\n```\n\nLet pass an argument and this error will gone.\n\n```ruby\nhello('Meo Meo')\n\n=> \"Hello Meo Meo\"\n```\n\nIt's very simple, I think we are make sence now.\n\n2. Default arguments\n\nAlmost like **Required arguments**. It has one more thing different:\n\nThat is when we pass argument in a method, we can set default value for it, and then when you call this method and unlucky forgot pass arguments for this method, your method still working, if it's not received arguments when it is called, it will use the default value.\n\neg:\n\n```ruby\ndef hello(name = \"Meo Meo\")\n  puts \"Hello #{name}\"\nend\n\nhello(\"Chinh\")\n=> \"Hello Chinh\"\n\n# if you don't pass an argument\nhello()\n=> \"Hello Meo Meo\"\n```\n\n3. Optional arguments\n\nDo you ever want to create a method and have no idea how many arguments does this method need?\n\nYes, we use optional arguments for this case, take a looke at the example below:\n\n```ruby\ndef hello(*family)\n  family.each do |name|\n    puts \"Hello #{name}\\n\"\n  end\nend\n\nhello('Chinh', 'Chuot', 'Cho')\n\n# The output:\n# Hello Chinh\n# Hello Chuot\n# Hello Cho\n```\n\n## Keyword Arguments\n\nIt's a new feature has come from ruby 2.0 to higher. It like pass arguments as a hash but more powerful.\n\neg:\n\n```ruby\ndef hello(name: 'Chinh', age: 25)\n  puts \"Name: #{name} - Age: #{age}\\n\"\nend\n```\n\nif you call **hello** method with no arguments:\n\n```ruby\nhello()\n```\n\nIt will use default value.\n\nAnd then\n\nIf you pass argumets for it:\n\n```ruby\nhello('Chinh', 25)\n```\n\nwhat will it return?\n\n**Error**: yes, it will response an error, but why?\n\nBecause, with **keyword arguments**, you need to pass argumetns like a hash you declare when initial method. (**same key**).\n\n```ruby\nhello(name: 'Meo')\n# Hello Meo - Age: 25\n\nhello(age: 10)\n# Hello Chinh - Age: 10\n\nhello(name: 'Chuot', age: 11)\n# Hello Chuot - Age: 11\n```\n\nIf you want to required an argument with no default value, try this:\n\n```ruby\ndef hello(name:, age:)\n  puts \"Name: #{name} - Age: #{age}\\n\"\nend\n```\n\nIt mean the method need to receive \"a hash\" with two key *name* and *age*. if it does not revieve, error will raise.\n","source":"_posts/2019-12-05-ruby-argument.md","raw":"---\ntitle: How To Use Arguments In Ruby\ndate: 2019-12-05\ntags: [\"RUBY\", \"TIL\"]\n---\n\n## How Many Kind Of Arguments In Ruby?\n\nWe can answer: **Three**\n\n1. Required arguments\n\neg:\n\n```ruby\ndef hello(name)\n  puts \"Hello #{name}\"\nend\n```\n\nIn there, *name* is a required argument. it mean if you call **hello** method and do not pass an argument, the output that you see should like:\n\n```ruby\nhello()\n\n=> ArgumentError: wrong number of arguments (given 0, expected 1)\n\n```\n\nLet pass an argument and this error will gone.\n\n```ruby\nhello('Meo Meo')\n\n=> \"Hello Meo Meo\"\n```\n\nIt's very simple, I think we are make sence now.\n\n2. Default arguments\n\nAlmost like **Required arguments**. It has one more thing different:\n\nThat is when we pass argument in a method, we can set default value for it, and then when you call this method and unlucky forgot pass arguments for this method, your method still working, if it's not received arguments when it is called, it will use the default value.\n\neg:\n\n```ruby\ndef hello(name = \"Meo Meo\")\n  puts \"Hello #{name}\"\nend\n\nhello(\"Chinh\")\n=> \"Hello Chinh\"\n\n# if you don't pass an argument\nhello()\n=> \"Hello Meo Meo\"\n```\n\n3. Optional arguments\n\nDo you ever want to create a method and have no idea how many arguments does this method need?\n\nYes, we use optional arguments for this case, take a looke at the example below:\n\n```ruby\ndef hello(*family)\n  family.each do |name|\n    puts \"Hello #{name}\\n\"\n  end\nend\n\nhello('Chinh', 'Chuot', 'Cho')\n\n# The output:\n# Hello Chinh\n# Hello Chuot\n# Hello Cho\n```\n\n## Keyword Arguments\n\nIt's a new feature has come from ruby 2.0 to higher. It like pass arguments as a hash but more powerful.\n\neg:\n\n```ruby\ndef hello(name: 'Chinh', age: 25)\n  puts \"Name: #{name} - Age: #{age}\\n\"\nend\n```\n\nif you call **hello** method with no arguments:\n\n```ruby\nhello()\n```\n\nIt will use default value.\n\nAnd then\n\nIf you pass argumets for it:\n\n```ruby\nhello('Chinh', 25)\n```\n\nwhat will it return?\n\n**Error**: yes, it will response an error, but why?\n\nBecause, with **keyword arguments**, you need to pass argumetns like a hash you declare when initial method. (**same key**).\n\n```ruby\nhello(name: 'Meo')\n# Hello Meo - Age: 25\n\nhello(age: 10)\n# Hello Chinh - Age: 10\n\nhello(name: 'Chuot', age: 11)\n# Hello Chuot - Age: 11\n```\n\nIf you want to required an argument with no default value, try this:\n\n```ruby\ndef hello(name:, age:)\n  puts \"Name: #{name} - Age: #{age}\\n\"\nend\n```\n\nIt mean the method need to receive \"a hash\" with two key *name* and *age*. if it does not revieve, error will raise.\n","slug":"2019-12-05-ruby-argument","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsba002vp3m2f8iogfvu","content":"<h2 id=\"How-Many-Kind-Of-Arguments-In-Ruby\"><a href=\"#How-Many-Kind-Of-Arguments-In-Ruby\" class=\"headerlink\" title=\"How Many Kind Of Arguments In Ruby?\"></a>How Many Kind Of Arguments In Ruby?</h2><p>We can answer: <strong>Three</strong></p>\n<ol>\n<li>Required arguments</li>\n</ol>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>In there, <em>name</em> is a required argument. it mean if you call <strong>hello</strong> method and do not pass an argument, the output that you see should like:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello()</span><br><span class=\"line\"></span><br><span class=\"line\">=&gt; <span class=\"symbol\">ArgumentError:</span> wrong number of arguments (given <span class=\"number\">0</span>, expected <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Let pass an argument and this error will gone.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"string\">'Meo Meo'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Meo Meo\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Its very simple, I think we are make sence now.</p>\n<ol start=\"2\">\n<li>Default arguments</li>\n</ol>\n<p>Almost like <strong>Required arguments</strong>. It has one more thing different:</p>\n<p>That is when we pass argument in a method, we can set default value for it, and then when you call this method and unlucky forgot pass arguments for this method, your method still working, if its not received arguments when it is called, it will use the default value.</p>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(name = <span class=\"string\">\"Meo Meo\"</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"string\">\"Chinh\"</span>)</span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Chinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># if you don't pass an argument</span></span><br><span class=\"line\">hello()</span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Meo Meo\"</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>Optional arguments</li>\n</ol>\n<p>Do you ever want to create a method and have no idea how many arguments does this method need?</p>\n<p>Yes, we use optional arguments for this case, take a looke at the example below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(*family)</span></span></span><br><span class=\"line\">  family.each <span class=\"keyword\">do</span> <span class=\"params\">|name|</span></span><br><span class=\"line\">    puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\\n\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"string\">'Chinh'</span>, <span class=\"string\">'Chuot'</span>, <span class=\"string\">'Cho'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The output:</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Chinh</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Chuot</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Cho</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Keyword-Arguments\"><a href=\"#Keyword-Arguments\" class=\"headerlink\" title=\"Keyword Arguments\"></a>Keyword Arguments</h2><p>Its a new feature has come from ruby 2.0 to higher. It like pass arguments as a hash but more powerful.</p>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(<span class=\"symbol\">name:</span> <span class=\"string\">'Chinh'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">25</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Name: <span class=\"subst\">#&#123;name&#125;</span> - Age: <span class=\"subst\">#&#123;age&#125;</span>\\n\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>if you call <strong>hello</strong> method with no arguments:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello()</span><br></pre></td></tr></table></figure>\n\n<p>It will use default value.</p>\n<p>And then</p>\n<p>If you pass argumets for it:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"string\">'Chinh'</span>, <span class=\"number\">25</span>)</span><br></pre></td></tr></table></figure>\n\n<p>what will it return?</p>\n<p><strong>Error</strong>: yes, it will response an error, but why?</p>\n<p>Because, with <strong>keyword arguments</strong>, you need to pass argumetns like a hash you declare when initial method. (<strong>same key</strong>).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"symbol\">name:</span> <span class=\"string\">'Meo'</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Meo - Age: 25</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"symbol\">age:</span> <span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Chinh - Age: 10</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"symbol\">name:</span> <span class=\"string\">'Chuot'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">11</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Chuot - Age: 11</span></span><br></pre></td></tr></table></figure>\n\n<p>If you want to required an argument with no default value, try this:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(<span class=\"symbol\">name:</span>, <span class=\"symbol\">age:</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Name: <span class=\"subst\">#&#123;name&#125;</span> - Age: <span class=\"subst\">#&#123;age&#125;</span>\\n\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>It mean the method need to receive a hash with two key <em>name</em> and <em>age</em>. if it does not revieve, error will raise.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"How-Many-Kind-Of-Arguments-In-Ruby\"><a href=\"#How-Many-Kind-Of-Arguments-In-Ruby\" class=\"headerlink\" title=\"How Many Kind Of Arguments In Ruby?\"></a>How Many Kind Of Arguments In Ruby?</h2><p>We can answer: <strong>Three</strong></p>\n<ol>\n<li>Required arguments</li>\n</ol>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>In there, <em>name</em> is a required argument. it mean if you call <strong>hello</strong> method and do not pass an argument, the output that you see should like:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello()</span><br><span class=\"line\"></span><br><span class=\"line\">=&gt; <span class=\"symbol\">ArgumentError:</span> wrong number of arguments (given <span class=\"number\">0</span>, expected <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Let pass an argument and this error will gone.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"string\">'Meo Meo'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Meo Meo\"</span></span><br></pre></td></tr></table></figure>\n\n<p>Its very simple, I think we are make sence now.</p>\n<ol start=\"2\">\n<li>Default arguments</li>\n</ol>\n<p>Almost like <strong>Required arguments</strong>. It has one more thing different:</p>\n<p>That is when we pass argument in a method, we can set default value for it, and then when you call this method and unlucky forgot pass arguments for this method, your method still working, if its not received arguments when it is called, it will use the default value.</p>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(name = <span class=\"string\">\"Meo Meo\"</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"string\">\"Chinh\"</span>)</span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Chinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># if you don't pass an argument</span></span><br><span class=\"line\">hello()</span><br><span class=\"line\">=&gt; <span class=\"string\">\"Hello Meo Meo\"</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>Optional arguments</li>\n</ol>\n<p>Do you ever want to create a method and have no idea how many arguments does this method need?</p>\n<p>Yes, we use optional arguments for this case, take a looke at the example below:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(*family)</span></span></span><br><span class=\"line\">  family.each <span class=\"keyword\">do</span> <span class=\"params\">|name|</span></span><br><span class=\"line\">    puts <span class=\"string\">\"Hello <span class=\"subst\">#&#123;name&#125;</span>\\n\"</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"string\">'Chinh'</span>, <span class=\"string\">'Chuot'</span>, <span class=\"string\">'Cho'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The output:</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Chinh</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Chuot</span></span><br><span class=\"line\"><span class=\"comment\"># Hello Cho</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Keyword-Arguments\"><a href=\"#Keyword-Arguments\" class=\"headerlink\" title=\"Keyword Arguments\"></a>Keyword Arguments</h2><p>Its a new feature has come from ruby 2.0 to higher. It like pass arguments as a hash but more powerful.</p>\n<p>eg:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(<span class=\"symbol\">name:</span> <span class=\"string\">'Chinh'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">25</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Name: <span class=\"subst\">#&#123;name&#125;</span> - Age: <span class=\"subst\">#&#123;age&#125;</span>\\n\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>if you call <strong>hello</strong> method with no arguments:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello()</span><br></pre></td></tr></table></figure>\n\n<p>It will use default value.</p>\n<p>And then</p>\n<p>If you pass argumets for it:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"string\">'Chinh'</span>, <span class=\"number\">25</span>)</span><br></pre></td></tr></table></figure>\n\n<p>what will it return?</p>\n<p><strong>Error</strong>: yes, it will response an error, but why?</p>\n<p>Because, with <strong>keyword arguments</strong>, you need to pass argumetns like a hash you declare when initial method. (<strong>same key</strong>).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello(<span class=\"symbol\">name:</span> <span class=\"string\">'Meo'</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Meo - Age: 25</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"symbol\">age:</span> <span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Chinh - Age: 10</span></span><br><span class=\"line\"></span><br><span class=\"line\">hello(<span class=\"symbol\">name:</span> <span class=\"string\">'Chuot'</span>, <span class=\"symbol\">age:</span> <span class=\"number\">11</span>)</span><br><span class=\"line\"><span class=\"comment\"># Hello Chuot - Age: 11</span></span><br></pre></td></tr></table></figure>\n\n<p>If you want to required an argument with no default value, try this:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(<span class=\"symbol\">name:</span>, <span class=\"symbol\">age:</span>)</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"Name: <span class=\"subst\">#&#123;name&#125;</span> - Age: <span class=\"subst\">#&#123;age&#125;</span>\\n\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>It mean the method need to receive a hash with two key <em>name</em> and <em>age</em>. if it does not revieve, error will raise.</p>\n"},{"title":"Searching In Array","date":"2019-12-15T17:00:00.000Z","_content":"\n## Binary Search\n\n```ruby\na = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\ndef binary_search(nums, left, right, target)\n  while left <= right\n    mid = (left + right) / 2\n\n    return mid if nums[mid] == target\n\n    if target < nums[mid]\n      right = mid - 1\n      return binary_search(nums, left, right, target)\n    else\n      left = mid + 1\n      return binary_search(nums, left, right, target)\n    end\n  end\n\n  return -1\nend\n\nbinary_search(a, 0, 8, 5)\n\n```\n\n> ...\n","source":"_posts/2019-12-16-search-in-array.md","raw":"---\ntitle: Searching In Array\ndate: 2019-12-16\ntags: [\"RUBY\"]\n---\n\n## Binary Search\n\n```ruby\na = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\ndef binary_search(nums, left, right, target)\n  while left <= right\n    mid = (left + right) / 2\n\n    return mid if nums[mid] == target\n\n    if target < nums[mid]\n      right = mid - 1\n      return binary_search(nums, left, right, target)\n    else\n      left = mid + 1\n      return binary_search(nums, left, right, target)\n    end\n  end\n\n  return -1\nend\n\nbinary_search(a, 0, 8, 5)\n\n```\n\n> ...\n","slug":"2019-12-16-search-in-array","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbb002zp3m2hk1p8ar8","content":"<h2 id=\"Binary-Search\"><a href=\"#Binary-Search\" class=\"headerlink\" title=\"Binary Search\"></a>Binary Search</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">binary_search</span><span class=\"params\">(nums, left, right, target)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> left &lt;= right</span><br><span class=\"line\">    mid = (left + right) / <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> mid <span class=\"keyword\">if</span> nums[mid] == target</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> target &lt; nums[mid]</span><br><span class=\"line\">      right = mid - <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> binary_search(nums, left, right, target)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      left = mid + <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> binary_search(nums, left, right, target)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">binary_search(a, <span class=\"number\">0</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Binary-Search\"><a href=\"#Binary-Search\" class=\"headerlink\" title=\"Binary Search\"></a>Binary Search</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">binary_search</span><span class=\"params\">(nums, left, right, target)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> left &lt;= right</span><br><span class=\"line\">    mid = (left + right) / <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> mid <span class=\"keyword\">if</span> nums[mid] == target</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> target &lt; nums[mid]</span><br><span class=\"line\">      right = mid - <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> binary_search(nums, left, right, target)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      left = mid + <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> binary_search(nums, left, right, target)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> -<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">binary_search(a, <span class=\"number\">0</span>, <span class=\"number\">8</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p></p>\n</blockquote>\n"},{"title":"Implement Linked List With Ruby","date":"2019-12-05T17:00:00.000Z","_content":"\n## Define Node\n\n```ruby\nclass Node\n  attr_accessor :next, :value\n\n  def initialize(value)\n    @value = value\n    @next  = nil\n  end\nend\n```\n\n## Define Linked List\n\n```ruby\nclass LinkedList\n  attr_accessor :head, :length\n\n  def initialize\n    @head = nil\n    @length = 0\n  end\nend\n```\n\n## Display Linked List\n\n```ruby\ndef show_all\n  current_node = @head\n  puts \":----- Linked List: ----->\"\n\n  while(current_node)\n    puts \"object_id: #{current_node.object_id} - value: #{current_node.value}\\n\"\n    current_node = current_node.next\n  end\nend\n```\n\n## Add New Node\n\n```ruby\ndef add(value)\n  current_node = @head\n\n  if current_node\n    while(current_node.next)\n      current_node = current_node.next\n    end\n    current_node.next = Node.new(value)\n  else\n    @head = Node.new(value)\n  end\n\n  @length += 1\nend\n```\n\n## Delete A Node At Position\n\n```ruby\ndef delete(position)\n  return false if(!@head || position > @length)\n\n  prev_node = current_node = @head\n  i = 0\n\n  while(current_node)\n    if(i == position)\n      prev_node.next = current_node.next\n      return true\n    end\n\n    prev_node = current_node\n    current_node = current_node.next\n    i += 1\n  end\n\n  return false\nend\n```\n\n## Reverse Linked List\n\n```ruby\ndef reverse\n  mid = @length / 2\n  i = 1\n  current_node = @head\n\n  while(i <= mid)\n    swap(current_node, find_nth_from_end_list(i))\n    current_node = current_node.next\n    i += 1\n  end\nend\n```\n\n## Check Circular Linked List\n\n```ruby\ndef is_circular_linked_list?\n  return false if !@head\n  hash = {}\n\n  current_node = @head\n  while(current_node)\n    return false if(hash.key?(current_node.object_id))\n\n    hash[current_node.object_id] = true\n    current_node = current_node.next\n  end\n\n  return false\nend\n```\n\n## Full Example\n\n```ruby\nclass Node\n  attr_accessor :next, :value\n\n  def initialize(value)\n    @value = value\n    @next  = nil\n  end\nend\n\nclass LinkedList\n  attr_accessor :head, :length\n\n  def initialize\n    @head = nil\n    @length = 0\n  end\n\n  def show_all\n    current_node = @head\n    puts \":----- Linked List: ----->\"\n\n    while(current_node)\n      puts \"object_id: #{current_node.object_id} - value: #{current_node.value}\\n\"\n      current_node = current_node.next\n    end\n  end\n\n  def add(value)\n    current_node = @head\n\n    if current_node\n      while(current_node.next)\n        current_node = current_node.next\n      end\n      current_node.next = Node.new(value)\n    else\n      @head = Node.new(value)\n    end\n\n    @length += 1\n  end\n\n  def delete(position)\n    return false if(!@head || position > @length)\n\n    prev_node = current_node = @head\n    i = 0\n\n    while(current_node)\n      if(i == position)\n        prev_node.next = current_node.next\n        return true\n      end\n\n      prev_node = current_node\n      current_node = current_node.next\n      i += 1\n    end\n\n    return false\n  end\n\n  # find node nth from the end of linked list\n  def find_nth_from_end_list(n)\n    return nil if (n < 0 || n > @length || !@head)\n\n    current_node = @head\n    i = 0\n\n    while(current_node)\n      if(i + n == @length)\n        return current_node\n      else\n        i += 1\n        current_node = current_node.next\n      end\n    end\n  end\n\n  # remove duplicate node\n  def remove_duplicate\n    current_node = @head\n    hash = {}\n    i = 0\n    sum_of_deleted = 0\n\n    while(current_node)\n      if(hash.key?(current_node.value))\n        # position in the next duplicate  will change after we remove any items\n        delete(i - sum_of_deleted)\n        sum_of_deleted += 1\n      else\n        hash[current_node.value] = true\n      end\n\n      i += 1\n      current_node = current_node.next\n    end\n  end\n\n  # remove middle node\n  def remove_middle_node\n    position = @length/2\n\n    i = 0\n    prev_node = current_node = @head\n\n    while(current_node)\n      if(i == position)\n        prev_node.next = current_node.next\n        break\n      else\n        prev_node = current_node\n        current_node = current_node.next\n        i += 1\n      end\n    end\n  end\n\n  def reverse\n    mid = @length / 2\n    i = 1\n    current_node = @head\n\n    while(i <= mid)\n      swap(current_node, find_nth_from_end_list(i))\n      current_node = current_node.next\n      i += 1\n    end\n  end\n\n  # plus two linked list\n  def plus(l2)\n    result = LinkedList.new\n    curr1 = @head\n    curr2 = l2.head\n    remember_number = 0\n\n    while(curr1 || curr2)\n      val1 = curr1 ? curr1.value : 0\n      val2 = curr2 ? curr2.value : 0\n\n      sum = val1 + val2 + remember_number\n\n      if sum >= 10\n        sum %= 10\n        remember_number = 1\n      end\n\n      result.add(sum)\n\n      curr1 = curr1.next\n      curr2 = curr2.next\n    end\n\n    result\n  end\n\n  def is_circular_linked_list?\n    return false if !@head\n    hash = {}\n\n    current_node = @head\n    while(current_node)\n      return false if(hash.key?(current_node.object_id))\n\n      hash[current_node.object_id] = true\n      current_node = current_node.next\n    end\n\n    return false\n  end\n\n  private\n\n  def swap(node1, node2)\n    tmp_value = node2.value\n    node2.value = node1.value\n    node1.value = tmp_value\n  end\nend\n```\n\n## Source\n\n> [https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists](https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists)\n","source":"_posts/2019-12-06-linked-list-with-ruby.md","raw":"---\ntitle: Implement Linked List With Ruby\ndate: 2019-12-06\ntags: [\"RUBY\"]\n---\n\n## Define Node\n\n```ruby\nclass Node\n  attr_accessor :next, :value\n\n  def initialize(value)\n    @value = value\n    @next  = nil\n  end\nend\n```\n\n## Define Linked List\n\n```ruby\nclass LinkedList\n  attr_accessor :head, :length\n\n  def initialize\n    @head = nil\n    @length = 0\n  end\nend\n```\n\n## Display Linked List\n\n```ruby\ndef show_all\n  current_node = @head\n  puts \":----- Linked List: ----->\"\n\n  while(current_node)\n    puts \"object_id: #{current_node.object_id} - value: #{current_node.value}\\n\"\n    current_node = current_node.next\n  end\nend\n```\n\n## Add New Node\n\n```ruby\ndef add(value)\n  current_node = @head\n\n  if current_node\n    while(current_node.next)\n      current_node = current_node.next\n    end\n    current_node.next = Node.new(value)\n  else\n    @head = Node.new(value)\n  end\n\n  @length += 1\nend\n```\n\n## Delete A Node At Position\n\n```ruby\ndef delete(position)\n  return false if(!@head || position > @length)\n\n  prev_node = current_node = @head\n  i = 0\n\n  while(current_node)\n    if(i == position)\n      prev_node.next = current_node.next\n      return true\n    end\n\n    prev_node = current_node\n    current_node = current_node.next\n    i += 1\n  end\n\n  return false\nend\n```\n\n## Reverse Linked List\n\n```ruby\ndef reverse\n  mid = @length / 2\n  i = 1\n  current_node = @head\n\n  while(i <= mid)\n    swap(current_node, find_nth_from_end_list(i))\n    current_node = current_node.next\n    i += 1\n  end\nend\n```\n\n## Check Circular Linked List\n\n```ruby\ndef is_circular_linked_list?\n  return false if !@head\n  hash = {}\n\n  current_node = @head\n  while(current_node)\n    return false if(hash.key?(current_node.object_id))\n\n    hash[current_node.object_id] = true\n    current_node = current_node.next\n  end\n\n  return false\nend\n```\n\n## Full Example\n\n```ruby\nclass Node\n  attr_accessor :next, :value\n\n  def initialize(value)\n    @value = value\n    @next  = nil\n  end\nend\n\nclass LinkedList\n  attr_accessor :head, :length\n\n  def initialize\n    @head = nil\n    @length = 0\n  end\n\n  def show_all\n    current_node = @head\n    puts \":----- Linked List: ----->\"\n\n    while(current_node)\n      puts \"object_id: #{current_node.object_id} - value: #{current_node.value}\\n\"\n      current_node = current_node.next\n    end\n  end\n\n  def add(value)\n    current_node = @head\n\n    if current_node\n      while(current_node.next)\n        current_node = current_node.next\n      end\n      current_node.next = Node.new(value)\n    else\n      @head = Node.new(value)\n    end\n\n    @length += 1\n  end\n\n  def delete(position)\n    return false if(!@head || position > @length)\n\n    prev_node = current_node = @head\n    i = 0\n\n    while(current_node)\n      if(i == position)\n        prev_node.next = current_node.next\n        return true\n      end\n\n      prev_node = current_node\n      current_node = current_node.next\n      i += 1\n    end\n\n    return false\n  end\n\n  # find node nth from the end of linked list\n  def find_nth_from_end_list(n)\n    return nil if (n < 0 || n > @length || !@head)\n\n    current_node = @head\n    i = 0\n\n    while(current_node)\n      if(i + n == @length)\n        return current_node\n      else\n        i += 1\n        current_node = current_node.next\n      end\n    end\n  end\n\n  # remove duplicate node\n  def remove_duplicate\n    current_node = @head\n    hash = {}\n    i = 0\n    sum_of_deleted = 0\n\n    while(current_node)\n      if(hash.key?(current_node.value))\n        # position in the next duplicate  will change after we remove any items\n        delete(i - sum_of_deleted)\n        sum_of_deleted += 1\n      else\n        hash[current_node.value] = true\n      end\n\n      i += 1\n      current_node = current_node.next\n    end\n  end\n\n  # remove middle node\n  def remove_middle_node\n    position = @length/2\n\n    i = 0\n    prev_node = current_node = @head\n\n    while(current_node)\n      if(i == position)\n        prev_node.next = current_node.next\n        break\n      else\n        prev_node = current_node\n        current_node = current_node.next\n        i += 1\n      end\n    end\n  end\n\n  def reverse\n    mid = @length / 2\n    i = 1\n    current_node = @head\n\n    while(i <= mid)\n      swap(current_node, find_nth_from_end_list(i))\n      current_node = current_node.next\n      i += 1\n    end\n  end\n\n  # plus two linked list\n  def plus(l2)\n    result = LinkedList.new\n    curr1 = @head\n    curr2 = l2.head\n    remember_number = 0\n\n    while(curr1 || curr2)\n      val1 = curr1 ? curr1.value : 0\n      val2 = curr2 ? curr2.value : 0\n\n      sum = val1 + val2 + remember_number\n\n      if sum >= 10\n        sum %= 10\n        remember_number = 1\n      end\n\n      result.add(sum)\n\n      curr1 = curr1.next\n      curr2 = curr2.next\n    end\n\n    result\n  end\n\n  def is_circular_linked_list?\n    return false if !@head\n    hash = {}\n\n    current_node = @head\n    while(current_node)\n      return false if(hash.key?(current_node.object_id))\n\n      hash[current_node.object_id] = true\n      current_node = current_node.next\n    end\n\n    return false\n  end\n\n  private\n\n  def swap(node1, node2)\n    tmp_value = node2.value\n    node2.value = node1.value\n    node1.value = tmp_value\n  end\nend\n```\n\n## Source\n\n> [https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists](https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists)\n","slug":"2019-12-06-linked-list-with-ruby","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbb0031p3m24p19gzbh","content":"<h2 id=\"Define-Node\"><a href=\"#Define-Node\" class=\"headerlink\" title=\"Define Node\"></a>Define Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:next</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    @value = value</span><br><span class=\"line\">    @next  = <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Define-Linked-List\"><a href=\"#Define-Linked-List\" class=\"headerlink\" title=\"Define Linked List\"></a>Define Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:head</span>, <span class=\"symbol\">:length</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    @head = <span class=\"literal\">nil</span></span><br><span class=\"line\">    @length = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Display-Linked-List\"><a href=\"#Display-Linked-List\" class=\"headerlink\" title=\"Display Linked List\"></a>Display Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_all</span></span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\">  puts <span class=\"string\">\":----- Linked List: -----&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    puts <span class=\"string\">\"object_id: <span class=\"subst\">#&#123;current_node.object_id&#125;</span> - value: <span class=\"subst\">#&#123;current_node.value&#125;</span>\\n\"</span></span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Add-New-Node\"><a href=\"#Add-New-Node\" class=\"headerlink\" title=\"Add New Node\"></a>Add New Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> current_node</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node.<span class=\"keyword\">next</span>)</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">    current_node.<span class=\"keyword\">next</span> = Node.new(value)</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    @head = Node.new(value)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  @length += <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Delete-A-Node-At-Position\"><a href=\"#Delete-A-Node-At-Position\" class=\"headerlink\" title=\"Delete A Node At Position\"></a>Delete A Node At Position</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span><span class=\"params\">(position)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(!@head <span class=\"params\">||</span> position &gt; @length)</span><br><span class=\"line\"></span><br><span class=\"line\">  prev_node = current_node = @head</span><br><span class=\"line\">  i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">      prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    prev_node = current_node</span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Reverse-Linked-List\"><a href=\"#Reverse-Linked-List\" class=\"headerlink\" title=\"Reverse Linked List\"></a>Reverse Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reverse</span></span></span><br><span class=\"line\">  mid = @length / <span class=\"number\">2</span></span><br><span class=\"line\">  i = <span class=\"number\">1</span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt;= mid)</span><br><span class=\"line\">    swap(current_node, find_nth_from_end_list(i))</span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Check-Circular-Linked-List\"><a href=\"#Check-Circular-Linked-List\" class=\"headerlink\" title=\"Check Circular Linked List\"></a>Check Circular Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_circular_linked_list?</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@head</span><br><span class=\"line\">  hash = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(hash.key?(current_node.object_id))</span><br><span class=\"line\"></span><br><span class=\"line\">    hash[current_node.object_id] = <span class=\"literal\">true</span></span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Full-Example\"><a href=\"#Full-Example\" class=\"headerlink\" title=\"Full Example\"></a>Full Example</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:next</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    @value = value</span><br><span class=\"line\">    @next  = <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:head</span>, <span class=\"symbol\">:length</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    @head = <span class=\"literal\">nil</span></span><br><span class=\"line\">    @length = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_all</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    puts <span class=\"string\">\":----- Linked List: -----&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      puts <span class=\"string\">\"object_id: <span class=\"subst\">#&#123;current_node.object_id&#125;</span> - value: <span class=\"subst\">#&#123;current_node.value&#125;</span>\\n\"</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> current_node</span><br><span class=\"line\">      <span class=\"keyword\">while</span>(current_node.<span class=\"keyword\">next</span>)</span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">      current_node.<span class=\"keyword\">next</span> = Node.new(value)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @head = Node.new(value)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @length += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span><span class=\"params\">(position)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(!@head <span class=\"params\">||</span> position &gt; @length)</span><br><span class=\"line\"></span><br><span class=\"line\">    prev_node = current_node = @head</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">        prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      prev_node = current_node</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># find node nth from the end of linked list</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">find_nth_from_end_list</span><span class=\"params\">(n)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">nil</span> <span class=\"keyword\">if</span> (n &lt; <span class=\"number\">0</span> <span class=\"params\">||</span> n &gt; @length <span class=\"params\">||</span> !@head)</span><br><span class=\"line\"></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i + n == @length)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> current_node</span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># remove duplicate node</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">remove_duplicate</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    hash = &#123;&#125;</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    sum_of_deleted = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(hash.key?(current_node.value))</span><br><span class=\"line\">        <span class=\"comment\"># position in the next duplicate  will change after we remove any items</span></span><br><span class=\"line\">        delete(i - sum_of_deleted)</span><br><span class=\"line\">        sum_of_deleted += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        hash[current_node.value] = <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># remove middle node</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">remove_middle_node</span></span></span><br><span class=\"line\">    position = @length/<span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    prev_node = current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">        prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        prev_node = current_node</span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reverse</span></span></span><br><span class=\"line\">    mid = @length / <span class=\"number\">2</span></span><br><span class=\"line\">    i = <span class=\"number\">1</span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt;= mid)</span><br><span class=\"line\">      swap(current_node, find_nth_from_end_list(i))</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># plus two linked list</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">plus</span><span class=\"params\">(l2)</span></span></span><br><span class=\"line\">    result = LinkedList.new</span><br><span class=\"line\">    curr1 = @head</span><br><span class=\"line\">    curr2 = l2.head</span><br><span class=\"line\">    remember_number = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(curr1 <span class=\"params\">||</span> curr2)</span><br><span class=\"line\">      val1 = curr1 ? curr1.value : <span class=\"number\">0</span></span><br><span class=\"line\">      val2 = curr2 ? curr2.value : <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">      sum = val1 + val2 + remember_number</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> sum &gt;= <span class=\"number\">10</span></span><br><span class=\"line\">        sum %= <span class=\"number\">10</span></span><br><span class=\"line\">        remember_number = <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      result.add(sum)</span><br><span class=\"line\"></span><br><span class=\"line\">      curr1 = curr1.<span class=\"keyword\">next</span></span><br><span class=\"line\">      curr2 = curr2.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_circular_linked_list?</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@head</span><br><span class=\"line\">    hash = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(hash.key?(current_node.object_id))</span><br><span class=\"line\"></span><br><span class=\"line\">      hash[current_node.object_id] = <span class=\"literal\">true</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">swap</span><span class=\"params\">(node1, node2)</span></span></span><br><span class=\"line\">    tmp_value = node2.value</span><br><span class=\"line\">    node2.value = node1.value</span><br><span class=\"line\">    node1.value = tmp_value</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Source\"><a href=\"#Source\" class=\"headerlink\" title=\"Source\"></a>Source</h2><blockquote>\n<p><a href=\"https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists\" target=\"_blank\" rel=\"noopener\">https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Define-Node\"><a href=\"#Define-Node\" class=\"headerlink\" title=\"Define Node\"></a>Define Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:next</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    @value = value</span><br><span class=\"line\">    @next  = <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Define-Linked-List\"><a href=\"#Define-Linked-List\" class=\"headerlink\" title=\"Define Linked List\"></a>Define Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:head</span>, <span class=\"symbol\">:length</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    @head = <span class=\"literal\">nil</span></span><br><span class=\"line\">    @length = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Display-Linked-List\"><a href=\"#Display-Linked-List\" class=\"headerlink\" title=\"Display Linked List\"></a>Display Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_all</span></span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\">  puts <span class=\"string\">\":----- Linked List: -----&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    puts <span class=\"string\">\"object_id: <span class=\"subst\">#&#123;current_node.object_id&#125;</span> - value: <span class=\"subst\">#&#123;current_node.value&#125;</span>\\n\"</span></span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Add-New-Node\"><a href=\"#Add-New-Node\" class=\"headerlink\" title=\"Add New Node\"></a>Add New Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> current_node</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node.<span class=\"keyword\">next</span>)</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">    current_node.<span class=\"keyword\">next</span> = Node.new(value)</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    @head = Node.new(value)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  @length += <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Delete-A-Node-At-Position\"><a href=\"#Delete-A-Node-At-Position\" class=\"headerlink\" title=\"Delete A Node At Position\"></a>Delete A Node At Position</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span><span class=\"params\">(position)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(!@head <span class=\"params\">||</span> position &gt; @length)</span><br><span class=\"line\"></span><br><span class=\"line\">  prev_node = current_node = @head</span><br><span class=\"line\">  i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">      prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    prev_node = current_node</span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Reverse-Linked-List\"><a href=\"#Reverse-Linked-List\" class=\"headerlink\" title=\"Reverse Linked List\"></a>Reverse Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reverse</span></span></span><br><span class=\"line\">  mid = @length / <span class=\"number\">2</span></span><br><span class=\"line\">  i = <span class=\"number\">1</span></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt;= mid)</span><br><span class=\"line\">    swap(current_node, find_nth_from_end_list(i))</span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    i += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Check-Circular-Linked-List\"><a href=\"#Check-Circular-Linked-List\" class=\"headerlink\" title=\"Check Circular Linked List\"></a>Check Circular Linked List</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_circular_linked_list?</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@head</span><br><span class=\"line\">  hash = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  current_node = @head</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(hash.key?(current_node.object_id))</span><br><span class=\"line\"></span><br><span class=\"line\">    hash[current_node.object_id] = <span class=\"literal\">true</span></span><br><span class=\"line\">    current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Full-Example\"><a href=\"#Full-Example\" class=\"headerlink\" title=\"Full Example\"></a>Full Example</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:next</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    @value = value</span><br><span class=\"line\">    @next  = <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LinkedList</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:head</span>, <span class=\"symbol\">:length</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span></span></span><br><span class=\"line\">    @head = <span class=\"literal\">nil</span></span><br><span class=\"line\">    @length = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_all</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    puts <span class=\"string\">\":----- Linked List: -----&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      puts <span class=\"string\">\"object_id: <span class=\"subst\">#&#123;current_node.object_id&#125;</span> - value: <span class=\"subst\">#&#123;current_node.value&#125;</span>\\n\"</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> current_node</span><br><span class=\"line\">      <span class=\"keyword\">while</span>(current_node.<span class=\"keyword\">next</span>)</span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">      current_node.<span class=\"keyword\">next</span> = Node.new(value)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @head = Node.new(value)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @length += <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">delete</span><span class=\"params\">(position)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(!@head <span class=\"params\">||</span> position &gt; @length)</span><br><span class=\"line\"></span><br><span class=\"line\">    prev_node = current_node = @head</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">        prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      prev_node = current_node</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># find node nth from the end of linked list</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">find_nth_from_end_list</span><span class=\"params\">(n)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">nil</span> <span class=\"keyword\">if</span> (n &lt; <span class=\"number\">0</span> <span class=\"params\">||</span> n &gt; @length <span class=\"params\">||</span> !@head)</span><br><span class=\"line\"></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i + n == @length)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> current_node</span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># remove duplicate node</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">remove_duplicate</span></span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    hash = &#123;&#125;</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    sum_of_deleted = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(hash.key?(current_node.value))</span><br><span class=\"line\">        <span class=\"comment\"># position in the next duplicate  will change after we remove any items</span></span><br><span class=\"line\">        delete(i - sum_of_deleted)</span><br><span class=\"line\">        sum_of_deleted += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        hash[current_node.value] = <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># remove middle node</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">remove_middle_node</span></span></span><br><span class=\"line\">    position = @length/<span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    prev_node = current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(i == position)</span><br><span class=\"line\">        prev_node.<span class=\"keyword\">next</span> = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        prev_node = current_node</span><br><span class=\"line\">        current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reverse</span></span></span><br><span class=\"line\">    mid = @length / <span class=\"number\">2</span></span><br><span class=\"line\">    i = <span class=\"number\">1</span></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt;= mid)</span><br><span class=\"line\">      swap(current_node, find_nth_from_end_list(i))</span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">      i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># plus two linked list</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">plus</span><span class=\"params\">(l2)</span></span></span><br><span class=\"line\">    result = LinkedList.new</span><br><span class=\"line\">    curr1 = @head</span><br><span class=\"line\">    curr2 = l2.head</span><br><span class=\"line\">    remember_number = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(curr1 <span class=\"params\">||</span> curr2)</span><br><span class=\"line\">      val1 = curr1 ? curr1.value : <span class=\"number\">0</span></span><br><span class=\"line\">      val2 = curr2 ? curr2.value : <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">      sum = val1 + val2 + remember_number</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> sum &gt;= <span class=\"number\">10</span></span><br><span class=\"line\">        sum %= <span class=\"number\">10</span></span><br><span class=\"line\">        remember_number = <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">      result.add(sum)</span><br><span class=\"line\"></span><br><span class=\"line\">      curr1 = curr1.<span class=\"keyword\">next</span></span><br><span class=\"line\">      curr2 = curr2.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_circular_linked_list?</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@head</span><br><span class=\"line\">    hash = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    current_node = @head</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(current_node)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span>(hash.key?(current_node.object_id))</span><br><span class=\"line\"></span><br><span class=\"line\">      hash[current_node.object_id] = <span class=\"literal\">true</span></span><br><span class=\"line\">      current_node = current_node.<span class=\"keyword\">next</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">swap</span><span class=\"params\">(node1, node2)</span></span></span><br><span class=\"line\">    tmp_value = node2.value</span><br><span class=\"line\">    node2.value = node1.value</span><br><span class=\"line\">    node1.value = tmp_value</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Source\"><a href=\"#Source\" class=\"headerlink\" title=\"Source\"></a>Source</h2><blockquote>\n<p><a href=\"https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists\" target=\"_blank\" rel=\"noopener\">https://github.com/hdchinh/ruby_cracking_code/tree/master/linked_lists</a></p>\n</blockquote>\n"},{"title":"Example Of Two Pointer With Ruby","date":"2019-12-19T17:00:00.000Z","_content":"\n## [3sum-closest](https://leetcode.com/problems/3sum-closest/submissions/)\n\n![bai giai](/../images/3sum_2.jpeg)\n\n```ruby\ndef three_sum_closest(nums, target)\n  nums.sort!\n\n  length = nums.size\n  kq = nums[0] + nums[1] + nums[length - 1]\n\n  0.upto(length - 2) do |i|\n    ptr1 = i + 1\n    ptr2 = length - 1\n\n    while ptr1 < ptr2\n      sum = nums[i] + nums[ptr1] + nums[ptr2]\n\n      return target if (target - sum).abs == 0\n\n      kq = sum if (target - sum).abs < (target - kq).abs\n\n      if sum > target\n        ptr2 -= 1\n      else\n        ptr1 += 1\n      end\n    end\n\n  end\n\n  kq\nend\n```\n\n\n## [container-with-most-water](https://leetcode.com/problems/container-with-most-water/submissions/)\n\n![bai giai](/../images/question_11.jpg)\n\n```ruby\ndef get_container_water(arr, a, b)\n  h = arr[a] >= arr[b] ? arr[b] : arr[a]\n  h * (b - a).abs\nend\n\ndef max_area(height)\n  start = 0\n  finish = height.size - 1\n\n  max = get_container_water(height, start, finish)\n\n  while start < finish\n    if height[start] >= height[finish]\n      finish -= 1\n      return max if finish <= start\n    else\n      start += 1\n      return max if start >= finish\n    end\n\n    max = get_container_water(height, start, finish) if get_container_water(height, start, finish) > max\n  end\n\n  max\nend\n```\n","source":"_posts/2019-12-20-example-of-two-pointer.md","raw":"---\ntitle: Example Of Two Pointer With Ruby\ndate: 2019-12-20\ntags: [\"RUBY\"]\n---\n\n## [3sum-closest](https://leetcode.com/problems/3sum-closest/submissions/)\n\n![bai giai](/../images/3sum_2.jpeg)\n\n```ruby\ndef three_sum_closest(nums, target)\n  nums.sort!\n\n  length = nums.size\n  kq = nums[0] + nums[1] + nums[length - 1]\n\n  0.upto(length - 2) do |i|\n    ptr1 = i + 1\n    ptr2 = length - 1\n\n    while ptr1 < ptr2\n      sum = nums[i] + nums[ptr1] + nums[ptr2]\n\n      return target if (target - sum).abs == 0\n\n      kq = sum if (target - sum).abs < (target - kq).abs\n\n      if sum > target\n        ptr2 -= 1\n      else\n        ptr1 += 1\n      end\n    end\n\n  end\n\n  kq\nend\n```\n\n\n## [container-with-most-water](https://leetcode.com/problems/container-with-most-water/submissions/)\n\n![bai giai](/../images/question_11.jpg)\n\n```ruby\ndef get_container_water(arr, a, b)\n  h = arr[a] >= arr[b] ? arr[b] : arr[a]\n  h * (b - a).abs\nend\n\ndef max_area(height)\n  start = 0\n  finish = height.size - 1\n\n  max = get_container_water(height, start, finish)\n\n  while start < finish\n    if height[start] >= height[finish]\n      finish -= 1\n      return max if finish <= start\n    else\n      start += 1\n      return max if start >= finish\n    end\n\n    max = get_container_water(height, start, finish) if get_container_water(height, start, finish) > max\n  end\n\n  max\nend\n```\n","slug":"2019-12-20-example-of-two-pointer","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbc0036p3m243osdgse","content":"<h2 id=\"3sum-closest\"><a href=\"#3sum-closest\" class=\"headerlink\" title=\"3sum-closest\"></a><a href=\"https://leetcode.com/problems/3sum-closest/submissions/\" target=\"_blank\" rel=\"noopener\">3sum-closest</a></h2><p><img src=\"/../images/3sum_2.jpeg\" alt=\"bai giai\"></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">three_sum_closest</span><span class=\"params\">(nums, target)</span></span></span><br><span class=\"line\">  nums.sort!</span><br><span class=\"line\"></span><br><span class=\"line\">  length = nums.size</span><br><span class=\"line\">  kq = nums[<span class=\"number\">0</span>] + nums[<span class=\"number\">1</span>] + nums[length - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">0</span>.upto(length - <span class=\"number\">2</span>) <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">    ptr1 = i + <span class=\"number\">1</span></span><br><span class=\"line\">    ptr2 = length - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ptr1 &lt; ptr2</span><br><span class=\"line\">      sum = nums[i] + nums[ptr1] + nums[ptr2]</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> target <span class=\"keyword\">if</span> (target - sum).abs == <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">      kq = sum <span class=\"keyword\">if</span> (target - sum).abs &lt; (target - kq).abs</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> sum &gt; target</span><br><span class=\"line\">        ptr2 -= <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        ptr1 += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  kq</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"container-with-most-water\"><a href=\"#container-with-most-water\" class=\"headerlink\" title=\"container-with-most-water\"></a><a href=\"https://leetcode.com/problems/container-with-most-water/submissions/\" target=\"_blank\" rel=\"noopener\">container-with-most-water</a></h2><p><img src=\"/../images/question_11.jpg\" alt=\"bai giai\"></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_container_water</span><span class=\"params\">(arr, a, b)</span></span></span><br><span class=\"line\">  h = arr[a] &gt;= arr[b] ? arr[b] : arr[a]</span><br><span class=\"line\">  h * (b - a).abs</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">max_area</span><span class=\"params\">(height)</span></span></span><br><span class=\"line\">  start = <span class=\"number\">0</span></span><br><span class=\"line\">  finish = height.size - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  max = get_container_water(height, start, finish)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span> start &lt; finish</span><br><span class=\"line\">    <span class=\"keyword\">if</span> height[start] &gt;= height[finish]</span><br><span class=\"line\">      finish -= <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> max <span class=\"keyword\">if</span> finish &lt;= start</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      start += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> max <span class=\"keyword\">if</span> start &gt;= finish</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    max = get_container_water(height, start, finish) <span class=\"keyword\">if</span> get_container_water(height, start, finish) &gt; max</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  max</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"3sum-closest\"><a href=\"#3sum-closest\" class=\"headerlink\" title=\"3sum-closest\"></a><a href=\"https://leetcode.com/problems/3sum-closest/submissions/\" target=\"_blank\" rel=\"noopener\">3sum-closest</a></h2><p><img src=\"/../images/3sum_2.jpeg\" alt=\"bai giai\"></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">three_sum_closest</span><span class=\"params\">(nums, target)</span></span></span><br><span class=\"line\">  nums.sort!</span><br><span class=\"line\"></span><br><span class=\"line\">  length = nums.size</span><br><span class=\"line\">  kq = nums[<span class=\"number\">0</span>] + nums[<span class=\"number\">1</span>] + nums[length - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">0</span>.upto(length - <span class=\"number\">2</span>) <span class=\"keyword\">do</span> <span class=\"params\">|i|</span></span><br><span class=\"line\">    ptr1 = i + <span class=\"number\">1</span></span><br><span class=\"line\">    ptr2 = length - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> ptr1 &lt; ptr2</span><br><span class=\"line\">      sum = nums[i] + nums[ptr1] + nums[ptr2]</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> target <span class=\"keyword\">if</span> (target - sum).abs == <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">      kq = sum <span class=\"keyword\">if</span> (target - sum).abs &lt; (target - kq).abs</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> sum &gt; target</span><br><span class=\"line\">        ptr2 -= <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">        ptr1 += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  kq</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"container-with-most-water\"><a href=\"#container-with-most-water\" class=\"headerlink\" title=\"container-with-most-water\"></a><a href=\"https://leetcode.com/problems/container-with-most-water/submissions/\" target=\"_blank\" rel=\"noopener\">container-with-most-water</a></h2><p><img src=\"/../images/question_11.jpg\" alt=\"bai giai\"></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_container_water</span><span class=\"params\">(arr, a, b)</span></span></span><br><span class=\"line\">  h = arr[a] &gt;= arr[b] ? arr[b] : arr[a]</span><br><span class=\"line\">  h * (b - a).abs</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">max_area</span><span class=\"params\">(height)</span></span></span><br><span class=\"line\">  start = <span class=\"number\">0</span></span><br><span class=\"line\">  finish = height.size - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  max = get_container_water(height, start, finish)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span> start &lt; finish</span><br><span class=\"line\">    <span class=\"keyword\">if</span> height[start] &gt;= height[finish]</span><br><span class=\"line\">      finish -= <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> max <span class=\"keyword\">if</span> finish &lt;= start</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      start += <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> max <span class=\"keyword\">if</span> start &gt;= finish</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    max = get_container_water(height, start, finish) <span class=\"keyword\">if</span> get_container_water(height, start, finish) &gt; max</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  max</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Simple BST With Ruby","date":"2019-11-30T17:00:00.000Z","_content":"\n![vang con](/../images/vangcon.jpeg)\n\n## Init\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\nend\n```\n\n## Display Tree\n\n```ruby\ndef get_tree\n  puts \"#{value}\\n\"\n  @left.get_tree() if @left\n  @right.get_tree() if @right\nend\n```\n\n## Add Node\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def add(new_val)\n    return if @value == new_val\n    if(@value > new_val)\n      add_left(new_val)\n    else\n      add_right(new_val)\n    end\n  end\n\n  private\n\n  def add_left(val)\n    if(@left)\n      @left.add(val)\n    else\n      @left = Node.new(val)\n    end\n  end\n\n  def add_right(val)\n    if(@right)\n      @right.add(val)\n    else\n      @right = Node.new(val)\n    end\n  end\n\nend\n```\n\n## Check existing?\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def include?(val)\n    return true if(@value == val)\n\n    if(@value > val)\n      return false if !@left\n      @left.include?(val)\n    else\n      return false if !@right\n      @right.include?(val)\n    end\n  end\nend\n```\n\n## Update Node\n\n```ruby\ndef update(current_value, new_value)\n  if(@value == current_value)\n    @value = new_value\n    return true\n  end\n\n  if(@value > current_value)\n    return false if !@left\n    @left.update(current_value, new_value)\n  else\n    return false if !@right\n    @right.update(current_value, new_value)\n  end\nend\n```\n\n## Get Depth\n\n```ruby\ndef max_depth(root)\n  return 0 if root.nil?\n  return [max_depth(root.left), max_depth(root.right)].max + 1\nend\n```\n\n## Example\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def get_tree\n    puts \"#{value}\\n\"\n    @left.get_tree() if @left\n    @right.get_tree() if @right\n  end\n\n  def add(new_val)\n    return if @value == new_val\n    if(@value > new_val)\n      add_left(new_val)\n    else\n      add_right(new_val)\n    end\n  end\n\n  def include?(val)\n    return true if(@value == val)\n\n    if(@value > val)\n      return false if !@left\n      @left.include?(val)\n    else\n      return false if !@right\n      @right.include?(val)\n    end\n  end\n\n  def update(current_value, new_value)\n    if(@value == current_value)\n      @value = new_value\n      return true\n    end\n\n    if(@value > current_value)\n      return false if !@left\n      @left.update(current_value, new_value)\n    else\n      return false if !@right\n      @right.update(current_value, new_value)\n    end\n  end\n\n  private\n\n  def add_left(val)\n    if(@left)\n      @left.add(val)\n    else\n      @left = Node.new(val)\n    end\n  end\n\n  def add_right(val)\n    if(@right)\n      @right.add(val)\n    else\n      @right = Node.new(val)\n    end\n  end\n\nend\n\na = Node.new(5)\nputs \"#{a.value} | #{a.left ? a.left.value : nil} | #{a.right ? a.right.value : nil}\"\n\na.add(2)\na.add(7)\na.add(9)\n\na.get_tree()\n\na.update(7, 6)\n\nputs \"#{a.value} | #{a.left ? a.left.value : nil} | #{a.right ? a.right.value : nil}\"\n\na.get_tree()\n\nb = a.right\nputs \"#{b.value} | #{b.left ? b.left.value : nil} | #{b.right ? b.right.value : nil}\"\n\n```\n","source":"_posts/2019-12-01-simple-bst-in-ruby.md","raw":"---\ntitle: Simple BST With Ruby\ndate: 2019-12-01\ntags: [\"RUBY\"]\n---\n\n![vang con](/../images/vangcon.jpeg)\n\n## Init\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\nend\n```\n\n## Display Tree\n\n```ruby\ndef get_tree\n  puts \"#{value}\\n\"\n  @left.get_tree() if @left\n  @right.get_tree() if @right\nend\n```\n\n## Add Node\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def add(new_val)\n    return if @value == new_val\n    if(@value > new_val)\n      add_left(new_val)\n    else\n      add_right(new_val)\n    end\n  end\n\n  private\n\n  def add_left(val)\n    if(@left)\n      @left.add(val)\n    else\n      @left = Node.new(val)\n    end\n  end\n\n  def add_right(val)\n    if(@right)\n      @right.add(val)\n    else\n      @right = Node.new(val)\n    end\n  end\n\nend\n```\n\n## Check existing?\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def include?(val)\n    return true if(@value == val)\n\n    if(@value > val)\n      return false if !@left\n      @left.include?(val)\n    else\n      return false if !@right\n      @right.include?(val)\n    end\n  end\nend\n```\n\n## Update Node\n\n```ruby\ndef update(current_value, new_value)\n  if(@value == current_value)\n    @value = new_value\n    return true\n  end\n\n  if(@value > current_value)\n    return false if !@left\n    @left.update(current_value, new_value)\n  else\n    return false if !@right\n    @right.update(current_value, new_value)\n  end\nend\n```\n\n## Get Depth\n\n```ruby\ndef max_depth(root)\n  return 0 if root.nil?\n  return [max_depth(root.left), max_depth(root.right)].max + 1\nend\n```\n\n## Example\n\n```ruby\nclass Node\n  attr_accessor :left, :right, :value\n\n  def initialize(val)\n    @value = val\n  end\n\n  def get_tree\n    puts \"#{value}\\n\"\n    @left.get_tree() if @left\n    @right.get_tree() if @right\n  end\n\n  def add(new_val)\n    return if @value == new_val\n    if(@value > new_val)\n      add_left(new_val)\n    else\n      add_right(new_val)\n    end\n  end\n\n  def include?(val)\n    return true if(@value == val)\n\n    if(@value > val)\n      return false if !@left\n      @left.include?(val)\n    else\n      return false if !@right\n      @right.include?(val)\n    end\n  end\n\n  def update(current_value, new_value)\n    if(@value == current_value)\n      @value = new_value\n      return true\n    end\n\n    if(@value > current_value)\n      return false if !@left\n      @left.update(current_value, new_value)\n    else\n      return false if !@right\n      @right.update(current_value, new_value)\n    end\n  end\n\n  private\n\n  def add_left(val)\n    if(@left)\n      @left.add(val)\n    else\n      @left = Node.new(val)\n    end\n  end\n\n  def add_right(val)\n    if(@right)\n      @right.add(val)\n    else\n      @right = Node.new(val)\n    end\n  end\n\nend\n\na = Node.new(5)\nputs \"#{a.value} | #{a.left ? a.left.value : nil} | #{a.right ? a.right.value : nil}\"\n\na.add(2)\na.add(7)\na.add(9)\n\na.get_tree()\n\na.update(7, 6)\n\nputs \"#{a.value} | #{a.left ? a.left.value : nil} | #{a.right ? a.right.value : nil}\"\n\na.get_tree()\n\nb = a.right\nputs \"#{b.value} | #{b.left ? b.left.value : nil} | #{b.right ? b.right.value : nil}\"\n\n```\n","slug":"2019-12-01-simple-bst-in-ruby","published":1,"updated":"2022-02-01T13:10:20.981Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbc0038p3m20kvy4mx1","content":"<p><img src=\"/../images/vangcon.jpeg\" alt=\"vang con\"></p>\n<h2 id=\"Init\"><a href=\"#Init\" class=\"headerlink\" title=\"Init\"></a>Init</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Display-Tree\"><a href=\"#Display-Tree\" class=\"headerlink\" title=\"Display Tree\"></a>Display Tree</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_tree</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"<span class=\"subst\">#&#123;value&#125;</span>\\n\"</span></span><br><span class=\"line\">  @left.get_tree() <span class=\"keyword\">if</span> @left</span><br><span class=\"line\">  @right.get_tree() <span class=\"keyword\">if</span> @right</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Add-Node\"><a href=\"#Add-Node\" class=\"headerlink\" title=\"Add Node\"></a>Add Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(new_val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> @value == new_val</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; new_val)</span><br><span class=\"line\">      add_left(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      add_right(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_left</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@left)</span><br><span class=\"line\">      @left.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @left = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_right</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@right)</span><br><span class=\"line\">      @right.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @right = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Check-existing\"><a href=\"#Check-existing\" class=\"headerlink\" title=\"Check existing?\"></a>Check existing?</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">include?</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">if</span>(@value == val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; val)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Update-Node\"><a href=\"#Update-Node\" class=\"headerlink\" title=\"Update Node\"></a>Update Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(current_value, new_value)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(@value == current_value)</span><br><span class=\"line\">    @value = new_value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(@value &gt; current_value)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">    @left.update(current_value, new_value)</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">    @right.update(current_value, new_value)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Get-Depth\"><a href=\"#Get-Depth\" class=\"headerlink\" title=\"Get Depth\"></a>Get Depth</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">max_depth</span><span class=\"params\">(root)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span> <span class=\"keyword\">if</span> root.<span class=\"literal\">nil</span>?</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [max_depth(root.left), max_depth(root.right)].max + <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_tree</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"<span class=\"subst\">#&#123;value&#125;</span>\\n\"</span></span><br><span class=\"line\">    @left.get_tree() <span class=\"keyword\">if</span> @left</span><br><span class=\"line\">    @right.get_tree() <span class=\"keyword\">if</span> @right</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(new_val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> @value == new_val</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; new_val)</span><br><span class=\"line\">      add_left(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      add_right(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">include?</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">if</span>(@value == val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; val)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(current_value, new_value)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value == current_value)</span><br><span class=\"line\">      @value = new_value</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; current_value)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.update(current_value, new_value)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.update(current_value, new_value)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_left</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@left)</span><br><span class=\"line\">      @left.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @left = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_right</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@right)</span><br><span class=\"line\">      @right.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @right = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">a = Node.new(<span class=\"number\">5</span>)</span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;a.value&#125;</span> | <span class=\"subst\">#&#123;a.left ? a.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;a.right ? a.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.add(<span class=\"number\">2</span>)</span><br><span class=\"line\">a.add(<span class=\"number\">7</span>)</span><br><span class=\"line\">a.add(<span class=\"number\">9</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">a.get_tree()</span><br><span class=\"line\"></span><br><span class=\"line\">a.update(<span class=\"number\">7</span>, <span class=\"number\">6</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;a.value&#125;</span> | <span class=\"subst\">#&#123;a.left ? a.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;a.right ? a.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.get_tree()</span><br><span class=\"line\"></span><br><span class=\"line\">b = a.right</span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;b.value&#125;</span> | <span class=\"subst\">#&#123;b.left ? b.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;b.right ? b.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/../images/vangcon.jpeg\" alt=\"vang con\"></p>\n<h2 id=\"Init\"><a href=\"#Init\" class=\"headerlink\" title=\"Init\"></a>Init</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Display-Tree\"><a href=\"#Display-Tree\" class=\"headerlink\" title=\"Display Tree\"></a>Display Tree</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_tree</span></span></span><br><span class=\"line\">  puts <span class=\"string\">\"<span class=\"subst\">#&#123;value&#125;</span>\\n\"</span></span><br><span class=\"line\">  @left.get_tree() <span class=\"keyword\">if</span> @left</span><br><span class=\"line\">  @right.get_tree() <span class=\"keyword\">if</span> @right</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Add-Node\"><a href=\"#Add-Node\" class=\"headerlink\" title=\"Add Node\"></a>Add Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(new_val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> @value == new_val</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; new_val)</span><br><span class=\"line\">      add_left(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      add_right(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_left</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@left)</span><br><span class=\"line\">      @left.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @left = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_right</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@right)</span><br><span class=\"line\">      @right.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @right = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Check-existing\"><a href=\"#Check-existing\" class=\"headerlink\" title=\"Check existing?\"></a>Check existing?</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">include?</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">if</span>(@value == val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; val)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Update-Node\"><a href=\"#Update-Node\" class=\"headerlink\" title=\"Update Node\"></a>Update Node</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(current_value, new_value)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(@value == current_value)</span><br><span class=\"line\">    @value = new_value</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(@value &gt; current_value)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">    @left.update(current_value, new_value)</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">    @right.update(current_value, new_value)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Get-Depth\"><a href=\"#Get-Depth\" class=\"headerlink\" title=\"Get Depth\"></a>Get Depth</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">max_depth</span><span class=\"params\">(root)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span> <span class=\"keyword\">if</span> root.<span class=\"literal\">nil</span>?</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [max_depth(root.left), max_depth(root.right)].max + <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span></span></span><br><span class=\"line\">  <span class=\"keyword\">attr_accessor</span> <span class=\"symbol\">:left</span>, <span class=\"symbol\">:right</span>, <span class=\"symbol\">:value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initialize</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    @value = val</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_tree</span></span></span><br><span class=\"line\">    puts <span class=\"string\">\"<span class=\"subst\">#&#123;value&#125;</span>\\n\"</span></span><br><span class=\"line\">    @left.get_tree() <span class=\"keyword\">if</span> @left</span><br><span class=\"line\">    @right.get_tree() <span class=\"keyword\">if</span> @right</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span><span class=\"params\">(new_val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> @value == new_val</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; new_val)</span><br><span class=\"line\">      add_left(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      add_right(new_val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">include?</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span> <span class=\"keyword\">if</span>(@value == val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; val)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.<span class=\"keyword\">include</span>?(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(current_value, new_value)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value == current_value)</span><br><span class=\"line\">      @value = new_value</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@value &gt; current_value)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@left</span><br><span class=\"line\">      @left.update(current_value, new_value)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span> <span class=\"keyword\">if</span> !@right</span><br><span class=\"line\">      @right.update(current_value, new_value)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_left</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@left)</span><br><span class=\"line\">      @left.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @left = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_right</span><span class=\"params\">(val)</span></span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(@right)</span><br><span class=\"line\">      @right.add(val)</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">      @right = Node.new(val)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">a = Node.new(<span class=\"number\">5</span>)</span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;a.value&#125;</span> | <span class=\"subst\">#&#123;a.left ? a.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;a.right ? a.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.add(<span class=\"number\">2</span>)</span><br><span class=\"line\">a.add(<span class=\"number\">7</span>)</span><br><span class=\"line\">a.add(<span class=\"number\">9</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">a.get_tree()</span><br><span class=\"line\"></span><br><span class=\"line\">a.update(<span class=\"number\">7</span>, <span class=\"number\">6</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;a.value&#125;</span> | <span class=\"subst\">#&#123;a.left ? a.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;a.right ? a.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.get_tree()</span><br><span class=\"line\"></span><br><span class=\"line\">b = a.right</span><br><span class=\"line\">puts <span class=\"string\">\"<span class=\"subst\">#&#123;b.value&#125;</span> | <span class=\"subst\">#&#123;b.left ? b.left.value : <span class=\"literal\">nil</span>&#125;</span> | <span class=\"subst\">#&#123;b.right ? b.right.value : <span class=\"literal\">nil</span>&#125;</span>\"</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Clone Object And Array In JS","date":"2019-12-27T17:00:00.000Z","_content":"\n> Recommend from some developers who have more exp than me: 'Should use LoDash library'\n\n## Why do we have to clone?\n\nIn fact, when we working on our projects, many times we need to get data from an object or an array and use it for some features what we want. In some cases, we need to change data from original object, but some other cases we need a version copy because we must keep original data not change.\n\nSo, in this case, what do you do? Do you ever think we can do it easy by some code below:\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = obj\n```\n\nAnd we now can free to change **copy_obj** without fear of changing **obj**?\n\nSo sad, the above way cannot work right. Why? why it is wrong? Everything same like fine, what's problem we have?\n\n> The problem at here is **Objects(array is an object) are reference types**.\n\nWhat does that mean?\n\nThat mean: Reference types doesn't hold any data, it's only contains a pointer to the value of object in memory.\n\nWhen you use **=**, **copy_obj** will contains a pointer to the value of **obj**. So, if you change anything in **copy_obj** or **obj**, the other variable will change too.\n\n## Clone Object and Array\n> We have many ways to clone an object, but there are three main ways need to know.\n\n1. Use spread syntax.\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = {...obj}\n```\n\n2. Use Object.assign\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = Object.assign({}, obj)\n```\n\n3. Use JSON\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = JSON.parse(JSON.stringify(obj))\n```\n\n> We know in javascript, array is also an object, thus all approach that we use for object above can apply for array too.\n\n## Deep Clone And Shallow Clone\n\n> Deep Clone is mean copy everything to another memory.\n\n> Shallow Clone is mean it's only copy first level of original object to another memory.From second level it's references to original object.\n\n> Use Object.asign or JSON are deep clone. In the most cases, using Object.assign show a lot faster than JSON.\n\n> Use spread is shallow clone.\n\nTake a look to the sample code below to know why use spread is shallow clone:\n\n```javascript\nobj = {\n  name: 'Chinh',\n  age: 25\n  location: {\n    city: 'Saigon'\n  }\n}\n\nclone_obj = {...obj}\n\nclone_obj.name = \"Duy Chinh\"\n\nclone_obj.location.city = \"Nam Dinh\"\n\nconsole.log(obj)\n```\n\nThe result will be:\n\n```javascript\n{\n  name: \"Chinh\",\n  age: 25,\n  location: {\n    city: \"Nam Dinh\"\n  }\n}\n```\n\nCity in original object has changed\n\n## References\n\n[1][https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array](https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array)\n\n[2][https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects](https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects)\n","source":"_posts/2019-12-28-clone-object-and-array-in-javascript.md","raw":"---\ntitle: Clone Object And Array In JS\ndate: 2019-12-28\ntags: [\"JS\"]\n---\n\n> Recommend from some developers who have more exp than me: 'Should use LoDash library'\n\n## Why do we have to clone?\n\nIn fact, when we working on our projects, many times we need to get data from an object or an array and use it for some features what we want. In some cases, we need to change data from original object, but some other cases we need a version copy because we must keep original data not change.\n\nSo, in this case, what do you do? Do you ever think we can do it easy by some code below:\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = obj\n```\n\nAnd we now can free to change **copy_obj** without fear of changing **obj**?\n\nSo sad, the above way cannot work right. Why? why it is wrong? Everything same like fine, what's problem we have?\n\n> The problem at here is **Objects(array is an object) are reference types**.\n\nWhat does that mean?\n\nThat mean: Reference types doesn't hold any data, it's only contains a pointer to the value of object in memory.\n\nWhen you use **=**, **copy_obj** will contains a pointer to the value of **obj**. So, if you change anything in **copy_obj** or **obj**, the other variable will change too.\n\n## Clone Object and Array\n> We have many ways to clone an object, but there are three main ways need to know.\n\n1. Use spread syntax.\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = {...obj}\n```\n\n2. Use Object.assign\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = Object.assign({}, obj)\n```\n\n3. Use JSON\n\n```javascript\nlet obj = {name: 'Chinh', age: 25}\n\nlet copy_obj = JSON.parse(JSON.stringify(obj))\n```\n\n> We know in javascript, array is also an object, thus all approach that we use for object above can apply for array too.\n\n## Deep Clone And Shallow Clone\n\n> Deep Clone is mean copy everything to another memory.\n\n> Shallow Clone is mean it's only copy first level of original object to another memory.From second level it's references to original object.\n\n> Use Object.asign or JSON are deep clone. In the most cases, using Object.assign show a lot faster than JSON.\n\n> Use spread is shallow clone.\n\nTake a look to the sample code below to know why use spread is shallow clone:\n\n```javascript\nobj = {\n  name: 'Chinh',\n  age: 25\n  location: {\n    city: 'Saigon'\n  }\n}\n\nclone_obj = {...obj}\n\nclone_obj.name = \"Duy Chinh\"\n\nclone_obj.location.city = \"Nam Dinh\"\n\nconsole.log(obj)\n```\n\nThe result will be:\n\n```javascript\n{\n  name: \"Chinh\",\n  age: 25,\n  location: {\n    city: \"Nam Dinh\"\n  }\n}\n```\n\nCity in original object has changed\n\n## References\n\n[1][https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array](https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array)\n\n[2][https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects](https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects)\n","slug":"2019-12-28-clone-object-and-array-in-javascript","published":1,"updated":"2022-01-29T09:29:59.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbd003dp3m27o2udrvk","content":"<blockquote>\n<p>Recommend from some developers who have more exp than me: Should use LoDash library</p>\n</blockquote>\n<h2 id=\"Why-do-we-have-to-clone\"><a href=\"#Why-do-we-have-to-clone\" class=\"headerlink\" title=\"Why do we have to clone?\"></a>Why do we have to clone?</h2><p>In fact, when we working on our projects, many times we need to get data from an object or an array and use it for some features what we want. In some cases, we need to change data from original object, but some other cases we need a version copy because we must keep original data not change.</p>\n<p>So, in this case, what do you do? Do you ever think we can do it easy by some code below:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = obj</span><br></pre></td></tr></table></figure>\n\n<p>And we now can free to change <strong>copy_obj</strong> without fear of changing <strong>obj</strong>?</p>\n<p>So sad, the above way cannot work right. Why? why it is wrong? Everything same like fine, whats problem we have?</p>\n<blockquote>\n<p>The problem at here is <strong>Objects(array is an object) are reference types</strong>.</p>\n</blockquote>\n<p>What does that mean?</p>\n<p>That mean: Reference types doesnt hold any data, its only contains a pointer to the value of object in memory.</p>\n<p>When you use <strong>=</strong>, <strong>copy_obj</strong> will contains a pointer to the value of <strong>obj</strong>. So, if you change anything in <strong>copy_obj</strong> or <strong>obj</strong>, the other variable will change too.</p>\n<h2 id=\"Clone-Object-and-Array\"><a href=\"#Clone-Object-and-Array\" class=\"headerlink\" title=\"Clone Object and Array\"></a>Clone Object and Array</h2><blockquote>\n<p>We have many ways to clone an object, but there are three main ways need to know.</p>\n</blockquote>\n<ol>\n<li>Use spread syntax.</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = &#123;...obj&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>Use Object.assign</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>Use JSON</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">JSON</span>.stringify(obj))</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>We know in javascript, array is also an object, thus all approach that we use for object above can apply for array too.</p>\n</blockquote>\n<h2 id=\"Deep-Clone-And-Shallow-Clone\"><a href=\"#Deep-Clone-And-Shallow-Clone\" class=\"headerlink\" title=\"Deep Clone And Shallow Clone\"></a>Deep Clone And Shallow Clone</h2><blockquote>\n<p>Deep Clone is mean copy everything to another memory.</p>\n</blockquote>\n<blockquote>\n<p>Shallow Clone is mean its only copy first level of original object to another memory.From second level its references to original object.</p>\n</blockquote>\n<blockquote>\n<p>Use Object.asign or JSON are deep clone. In the most cases, using Object.assign show a lot faster than JSON.</p>\n</blockquote>\n<blockquote>\n<p>Use spread is shallow clone.</p>\n</blockquote>\n<p>Take a look to the sample code below to know why use spread is shallow clone:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">obj = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Chinh'</span>,</span><br><span class=\"line\">  age: <span class=\"number\">25</span></span><br><span class=\"line\">  location: &#123;</span><br><span class=\"line\">    city: <span class=\"string\">'Saigon'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj = &#123;...obj&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj.name = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj.location.city = <span class=\"string\">\"Nam Dinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj)</span><br></pre></td></tr></table></figure>\n\n<p>The result will be:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  name: <span class=\"string\">\"Chinh\"</span>,</span><br><span class=\"line\">  age: <span class=\"number\">25</span>,</span><br><span class=\"line\">  location: &#123;</span><br><span class=\"line\">    city: <span class=\"string\">\"Nam Dinh\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>City in original object has changed</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array\" target=\"_blank\" rel=\"noopener\">https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array</a></p>\n<p>[2]<a href=\"https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects\" target=\"_blank\" rel=\"noopener\">https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects</a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>Recommend from some developers who have more exp than me: Should use LoDash library</p>\n</blockquote>\n<h2 id=\"Why-do-we-have-to-clone\"><a href=\"#Why-do-we-have-to-clone\" class=\"headerlink\" title=\"Why do we have to clone?\"></a>Why do we have to clone?</h2><p>In fact, when we working on our projects, many times we need to get data from an object or an array and use it for some features what we want. In some cases, we need to change data from original object, but some other cases we need a version copy because we must keep original data not change.</p>\n<p>So, in this case, what do you do? Do you ever think we can do it easy by some code below:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = obj</span><br></pre></td></tr></table></figure>\n\n<p>And we now can free to change <strong>copy_obj</strong> without fear of changing <strong>obj</strong>?</p>\n<p>So sad, the above way cannot work right. Why? why it is wrong? Everything same like fine, whats problem we have?</p>\n<blockquote>\n<p>The problem at here is <strong>Objects(array is an object) are reference types</strong>.</p>\n</blockquote>\n<p>What does that mean?</p>\n<p>That mean: Reference types doesnt hold any data, its only contains a pointer to the value of object in memory.</p>\n<p>When you use <strong>=</strong>, <strong>copy_obj</strong> will contains a pointer to the value of <strong>obj</strong>. So, if you change anything in <strong>copy_obj</strong> or <strong>obj</strong>, the other variable will change too.</p>\n<h2 id=\"Clone-Object-and-Array\"><a href=\"#Clone-Object-and-Array\" class=\"headerlink\" title=\"Clone Object and Array\"></a>Clone Object and Array</h2><blockquote>\n<p>We have many ways to clone an object, but there are three main ways need to know.</p>\n</blockquote>\n<ol>\n<li>Use spread syntax.</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = &#123;...obj&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>Use Object.assign</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, obj)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>Use JSON</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">'Chinh'</span>, <span class=\"attr\">age</span>: <span class=\"number\">25</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> copy_obj = <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">JSON</span>.stringify(obj))</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>We know in javascript, array is also an object, thus all approach that we use for object above can apply for array too.</p>\n</blockquote>\n<h2 id=\"Deep-Clone-And-Shallow-Clone\"><a href=\"#Deep-Clone-And-Shallow-Clone\" class=\"headerlink\" title=\"Deep Clone And Shallow Clone\"></a>Deep Clone And Shallow Clone</h2><blockquote>\n<p>Deep Clone is mean copy everything to another memory.</p>\n</blockquote>\n<blockquote>\n<p>Shallow Clone is mean its only copy first level of original object to another memory.From second level its references to original object.</p>\n</blockquote>\n<blockquote>\n<p>Use Object.asign or JSON are deep clone. In the most cases, using Object.assign show a lot faster than JSON.</p>\n</blockquote>\n<blockquote>\n<p>Use spread is shallow clone.</p>\n</blockquote>\n<p>Take a look to the sample code below to know why use spread is shallow clone:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">obj = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Chinh'</span>,</span><br><span class=\"line\">  age: <span class=\"number\">25</span></span><br><span class=\"line\">  location: &#123;</span><br><span class=\"line\">    city: <span class=\"string\">'Saigon'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj = &#123;...obj&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj.name = <span class=\"string\">\"Duy Chinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">clone_obj.location.city = <span class=\"string\">\"Nam Dinh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj)</span><br></pre></td></tr></table></figure>\n\n<p>The result will be:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  name: <span class=\"string\">\"Chinh\"</span>,</span><br><span class=\"line\">  age: <span class=\"number\">25</span>,</span><br><span class=\"line\">  location: &#123;</span><br><span class=\"line\">    city: <span class=\"string\">\"Nam Dinh\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>City in original object has changed</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array\" target=\"_blank\" rel=\"noopener\">https://www.samanthaming.com/tidbits/50-how-to-deep-clone-an-array</a></p>\n<p>[2]<a href=\"https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects\" target=\"_blank\" rel=\"noopener\">https://www.samanthaming.com/tidbits/70-3-ways-to-clone-objects</a></p>\n"},{"title":"Metaprograming Ruby 2","date":"2019-09-20T17:00:00.000Z","draft":false,"label":"#book","_content":"\n## IMAGES\n\n![hoa](/images/meta2/1.png)\n\n![hoa](/images/meta2/2.png)\n\n![hoa](/images/meta2/3.png)\n\n![hoa](/images/meta2/4.png)\n\n![hoa](/images/meta2/5.png)\n\n<!-- ![hoa](/images/meta2/6.png) -->\n\n![hoa](/images/meta2/7.png)\n\n![hoa](/images/meta2/8.png)\n\n![hoa](/images/meta2/9.png)\n\n\n\n## RUBY OBJECT MODEL\n\n### Open Classes\n\n\n**rails g model Movie title:string director:string**\n\n```ruby\nclass Movie < ActiveRecord:Base; end\n```\n\n1) What about methods such as **title=** and title, which access object attributes (accessor methods for short)? This is where metaprogramming comes in: Bob doesnt have to write those methods. Active Record defines them automatically, after inferring their names from the database schema. ActiveRecord::Base reads the schema at runtime, discovers that the movies table has two columns named title and director, and defines accessor methods for two attributes of the same name. This means that Active Record defines methods such as **Movie#title** and **Movie#director=** out of thin air while the program runs.\n\nOpen Class\n```ruby\nclass Numeric\n  def to_money(currency = nil)\n    Money.from_numeric(self, currency || Money.default_currency)\n  end\nend\n```\n\n2) As cool as they are, however, Open Classes have a dark sideone that youre about to experience.\n\n| This can override the method of superclass and make wrong result in somewhere (monkeypath). So we need be careful when set the name for the override method.\n\n### Inside the Object Model\n\n3) Objects that share the same class also share the same methods, so the methods must be stored in the class, not the object.\n\n4) The \"false\" argument here means: ignore inherited methods Class.instance_methods(false) # => [:allocate, :new, :superclass]\n\n5) The superclass of Class is Modulewhich is to say, every class is also a module.\nTo be precise, a class is a module with three additional instance methods (new, allocate, and superclass)\n\n6) All the constants in a program are arranged in a tree similar to a file system.\n\n7) The Module class also provides an instance method and a class method that, confusingly, are both called constants.\n\n8) Whats an object? Its a bunch of instance variables, plus a link to a class. The objects methods dont live in the objectthey live in the objects class, where theyre called the instance methods of the class.\n\n9) Whats a class? Its an object (an instance of Class), plus a list of instance methods and a link to a superclass. Class is a subclass of Module, so a class is also a module\n\n10) These are instance methods of the Class class. Like any object, a class has its own methods, such as new. Also like any object, classes must be accessed through references. You already have a constant reference to each class: the classs name.\n\n11) Using load, however, has a side effect. The motd.rb file probably defines variables and classes. Although variables fall out of scope when the file has finished loading, constants dont. As a result, motd.rb can pollute your program with the names of its own constantsin particular, class names. You can force motd.rb to keep its constants to itself by passing a second, optional argument to load: **load('motd.rb', true)** If you load a file this way, Ruby creates **an anonymous module**, uses that module as a Namespace to contain all the constants from motd.rb, and then destroys the module. The require method is quite similar to load, but its meant for a different purpose. You use load to execute code, and you use require to import libraries. Thats why require has no second argument: those leftover class names are probably the reason why you imported the file in the first place. Also, thats why require tries only once to load each file, while load executes the file again every time you call it.\n\nWhats the class of Object?\nWhats the superclass of Module?\nWhats the class of Class?\n\n### What Happens When You Call a Method?\n\n12) When you call a method, Ruby does two things:\n1. It finds the method. This is a process called method lookup.\n2. It executes the method. To do that, Ruby needs something called self.\n\n13) Before you look at a more complicated example, though, you need to know about two new concepts: the receiver and the ancestors chain.The receiver is the object that you call a method on. For example, if you write **my_string.reverse()**, then **my_string** is the receiver. To understand the concept of an ancestors chain, look at any Ruby class. Then imagine moving from the class into its superclass, then into the superclasss superclass, and so on, until you reach BasicObject, the root of the Ruby class hierarchy. The path of classes you just traversed is the ancestors chain of the class.\nMySubclass.ancestors # => [MySubclass, MyClass, Object, Kernel, BasicObject]\n\n14) When you include a module in a class (or even in another module), Ruby inserts the module in the ancestors chain, right above the including class itself:\n\n15) Starting from Ruby 2.0, you also have a second way to insert a module in a classs chain of ancestors: **the prepend method**. It works like include, but it inserts the module below the including class (sometimes called the includer).\n\n```ruby\nclass C2\n prepend M2\nend\nclass D2 < C2; end\nD2.ancestors # => [D2, M2, C2, Object, Kernel, BasicObject]\n```\n\n16) This is true every time you include or prepend a module: if that module is already in the chain, Ruby silently ignores the second inclusion.\n\nKernel.private_instance_methods.grep(/^pr/) # => [:printf, :print, :proc]\n\n17) The trick here is that class Object includes Kernel, so Kernel gets into every objects ancestors chain. Every line of Ruby is always executed inside an object, so you can call the instance methods in Kernel from anywhere.\n\n18) You can take advantage of this mechanism yourself: if you add a method to Spell: Kernel Method Kernel, this Kernel Method will be available to all objects. To prove that Kernel Methods are actually useful, you can look at the way some Ruby libraries use them.\n\n19) Every line of Ruby code is executed inside an objectthe so-called current object. The current object is also known as self, because you can access it with the self keyword.\n\n20) Only one object can take the role of self at a given time, but no object holds that role for a long time. In particular, when you call a method, the receiver becomes self. From that moment on, all instance variables are instance variables of self, and all methods called without an explicit receiver are called on self.\n\n21) As soon as you start a Ruby program, youre sitting within an object named main that the Ruby interpreter created for you. This object is sometimes called the top-level context, because its the object youre in when youre at the top level of the call stack: either you havent called any method yet or all the methods that you called have returned.\n\n22) This code refines the String class with a new to_alphanumeric method. Differently from a regular Open Class, however, a Refinement is not active by default. If you try to call   **String#to_alphanumeric**, youll get an error: **\"my *1st* refinement!\".to_alphanumeric  NoMethodError: undefined method 'to_alphanumeric' [...]** To activate the changes, you have to do so explicitly, with the using method: using StringExtensions\n\n23) you can call refine in a regular module, but you cannot call it in a class, even if a class is itself a module.\n\n## METHODS\n\n### Dynamic Methods\n\n24) If that kind of breaching of encapsulation makes you uneasy, you can use public_send instead. Its like send, but it makes a point of respecting the receivers privacy. Be prepared, however, for the fact that Ruby code in the wild rarely bothers with this concern. If anything, a lot of Ruby programmers use send exactly because it allows calling private methods, not in spite of that\n\n```ruby\nclassDS\n  definitialize#connecttodatasource...\ndefget_cpu_info(workstation_id)#...\ndefget_cpu_price(workstation_id)#...\ndefget_mouse_info(workstation_id)#...\ndefget_mouse_price(workstation_id)#...\ndefget_keyboard_info(workstation_id)#...\ndefget_keyboard_price(workstation_id)#...\ndefget_display_info(workstation_id)#...\ndefget_display_price(workstation_id)#...\n#...andsoon\nend\n```\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmouse\n  info=@data_source.get_mouse_info(@id)\n  price=@data_source.get_mouse_price(@id)\n  result=\"Mouse:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n\n  defcpu\n  info=@data_source.get_cpu_info(@id)\n  price=@data_source.get_cpu_price(@id)\n  result=\"Cpu:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n\n  defkeyboard\n  info=@data_source.get_keyboard_info(@id)\n  price=@data_source.get_keyboard_price(@id)\n  result=\"Keyboard:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n#...\nend\n```\n\nDYNAMIC DISPATCH\n\n```ruby\nclassComputer\n  definitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmouse\n  component:mouse\nend\n\ndefcpu\n  component:cpu\nend\n\ndefkeyboard\n  component:keyboard\nend\n\ndefcomponent(name)\ninfo=@data_source.send\"get_#{name}_info\",@id\nprice=@data_source.send\"get_#{name}_price\",@id\nresult=\"#{name.capitalize}:#{info}($#{price})\"\nreturn\"*#{result}\"ifprice>=100\nresult\nend\nend\n```\n\nDYNAMIC METHOD\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defself.define_component(name)\ndefine_method(name)do\n  info=@data_source.send\"get_#{name}_info\",@id\n  price=@data_source.send\"get_#{name}_price\",@id\n  result=\"#{name.capitalize}:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\nend\nend\n\n  define_component:mouse\ndefine_component:cpu\ndefine_component:keyboard\nend\n\n```\n\nBEST WAY\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\ndata_source.methods.grep(/^get_(.*)_info$/){Computer.define_component$1}\nend\n\n  defself.define_component(name)\ndefine_method(name)do\n  #...\n  end\nend\nend\n```\n\n### method_missing\n\n25) The Hashie gem contains a little bit of magic called Hashie::Mash. A Mash is a more powerful version of Rubys standard OpenStruct class: a hash-like object whose attributes work like Ruby variables. If you want a new attribute, just assign a value to the attribute, and it will spring into existence:\n\n```ruby\nrequire'hashie'\nicecream=Hashie::Mash.new\nicecream.flavor=\"strawberry\"\nicecream.flavor#=>\"strawberry\"\n```\n\nWhat hanppen inside?\n\n```ruby\nmoduleHashie\nclassMash<Hashie::Hash\ndefmethod_missing(method_name,*args,&blk)\n  returnself.[](method_name,&blk)ifkey?(method_name)\n  match=method_name.to_s.match(/(.*?)([?=!]?)$/)\n  casematch[2]\n  when\"=\"\n  self[match[1]]=args.first\n  #...\n  else\n  default(method_name,*args,&blk)\n  end\n    end\n#...\n  end\nend\n```\n\n26) **Ghost Methods** (57) are usually icing on the cake, but some objects actually rely almost exclusively on them. These objects are often wrappers for something elsemaybe another object, a web service, or code written in a different language. They collect method calls through method_missing and forward them to the wrapped object. Lets look at a complex real-life example.\n\nRefactor:\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmethod_missing(name)\nsuperif!@data_source.respond_to?(\"get_#{name}_info\")\ninfo=@data_source.send(\"get_#{name}_info\",@id)\nprice=@data_source.send(\"get_#{name}_price\",@id)\nresult=\"#{name.capitalize}:#{info}($#{price})\"\nreturn\"*#{result}\"ifprice>=100\nresult\nend\nend\n```\n\n27) Khi dng ghost method, gi s trong method_missing chng ta mun to ra 1 method x, tuy nhin x li c trong cy k tha => x trong method missing s khng c gi. Lc ny ta cn Blank Slates.\n\n### Blank Slates\n\n28) If you dont need the inherited method, you can fix the problem by removing it. While youre at it, you might want to remove most methods from the class, preventing such name clashes from ever happening again. A skinny class Spell: Blank Slate with a minimal number of methods is called a Blank Slate. As it turns out, Ruby has a ready-made Blank Slate for you to use\n\n29) If you dont specify a superclass, your classes inherit by default from Object, which is itself a subclass of BasicObject. If you want a Blank Slate (66), you can inherit directly from BasicObject instead. For example, if Computer inherited directly from BasicObject, then it wouldnt have a problematic display method.\n=> khng ly nhm method trong class Object, v lp Computer c k tha trc tip t BasicObject\n\n30) Inheriting from BasicObject is the quicker way to define a Blank Slate in Ruby.\n**class Computer < BasicObject**\n\n31) You can remove a method from a class by using either Module#undef_method or Module#remove_method. The drastic undef_method removes any method, including the inherited ones. The kinder remove_method removes the method from the receiver, but it leaves inherited methods alone. Lets look at a real-life library that uses undef_method to create a Blank Slate.\n\n```ruby\nclassBlankSlate\n#Hidethemethodnamed+name+intheBlankSlateclass.Don't\n#hide+instance_eval+oranymethodbeginningwith\"__\".\ndefself.hide(name)\n  #...\n  ifinstance_methods.include?(name._blankslate_as_name)&&\n    name!~/^(__|instance_eval$)/\n    undef_methodname\n  end\nend\n#...\ninstance_methods.each{|m|hide(m)}\nend\n```\n\n32) **use Dynamic Methods if you can and Ghost Methods if you have to**\n\n\n## BLOCKS\n\n### Blocks Are Closures\n\n```ruby\ndefmy_method\nx=\"Goodbye\"\nyield(\"cruel\")\nend\n\nx=\"Hello\"\nmy_method{|y|\"#{x},#{y}world\"}#=>\"Hello,cruelworld\"\n```\n\n33) When you create the block, you capture the local bindings, such as x. Then you pass the block to a method that has its own separate set of bindings. In the previous example, those bindings also include a variable named x. Still, the code in the block sees the x that was around when the block was defined, not the methods x, which is not visible at all in the block.\n\n34) khi gi 1 block, n lu vt li cc rng buc cc b ni block c gi, sau  block c truyn cho 1 method, m method  s c cc rng cuc cc b ca ring n, v block s s dng rng buc ca mnh (v d nh bin x  trn).\n\n```ruby\ndefjust_yield\nyield\nend\n\ntop_level_variable=1\njust_yielddo\ntop_level_variable+=1\nlocal_to_block=1\nend\n\ntop_level_variable#=>2\nlocal_to_block#=>Error!\n```\nTrong v d ny th local_to_block l 1 binding thuc block, v ra ngoi ng cnh block n khng c gi tr.\n\n35) This example shows how scope changes as your program runs, tracking the names of bindings with the Kernel#local_variables method:\n\n```ruby\nv1=1\n\nclassMyClass\nv2=2\nlocal_variables#=>[:v2]\ndefmy_method\n  v3=3\n  local_variables\nend\n  local_variables#=>[:v2]\nend\n\nobj=MyClass.new\nobj.my_method#=>[:v3]\nobj.my_method#=>[:v3]\nlocal_variables#=>[:v1,:obj]\n```\n\n36) There are exactly three places where a program leaves the previous scope behind and opens a new one:\nClass definitions\nModule definitions\nMethods\n\n37) Scope changes whenever the program enters (or exits) a class or module definition or a method. These three borders are marked by the keywords class, module, and def, respectively. Each of these keywords acts like a **Scope Gate**.\n\n```ruby\nv1=1\nclassMyClass#SCOPEGATE:enteringclass\n  v2=2\nlocal_variables#=>[\"v2\"]\ndefmy_method#SCOPEGATE:enteringdef\n  v3=3\n  local_variables\nend#SCOPEGATE:leavingdef\n\n  local_variables#=>[\"v2\"]\nend#SCOPEGATE:leavingclass\n\nobj=MyClass.new\nobj.my_method#=>[:v3]\nlocal_variables#=>[:v1,:obj]\n```\n\n```ruby\nmy_var=\"Success\"\n\nMyClass=Class.newdo\n\"#{my_var}intheclassdefinition\"\n\n  define_method:my_methoddo\n  \"#{my_var}inthemethod\"\n end\nend\n```\n\nkhai bo thng thng th my_var khng th s dng trong class hoc def (v n m ra  1 scope mi). Nn dng call method gi l **flat scope**.\n\n38) If you replace Scope Gates with method calls, you allow one scope to see variables from another scope. Technically, this trick should be called nested lexical scopes, but many Ruby coders refer to it simply as flattening the scope, meaning that the two scopes share variables as if the scopes were squeezed together. For short, you can call this spell a Flat Scope.\n\n39) Once you know about Flat Scopes (83), you can do pretty much whatever you want with scopes. For example, assume that you want to share a variable among a few methods, and you dont want anybody else to see that variable. You can do that by defining all the methods in the same Flat Scope as the variable:\n\n```ruby\ndefdefine_methods\nshared=0\nKernel.send:define_method,:counterdo\nshared\nend\n\nKernel.send:define_method,:incdo|x|\nshared+=x\nend\nend\n\nMun ch share variable cho 1 vi method nht nh, dng cc phng thc support bi kernel v gi y l **Flat Scope**.\n\n```\n\n### instance_eval()\n\n```ruby\nv=2\nobj.instance_eval{@v=v}\nobj.instance_eval{@v}#=>2\n```\n\n40) The three lines in the previous example are evaluated in the same Flat Scope (83), so they can all access the local variable vbut the blocks are evaluated with the object as self, so they can also access objs instance variable @v. In all these cases, you can call the block that you pass to instance_eval a Context Probe, because its like a snippet of code that you dip inside an object to do Spell: Context Probe something in there\n\n41) Tosolvethisproblem RubyprovidesthestandardlibraryclassProc.\nAProcisablockthathasbeenturnedintoanobject.YoucancreateaProcbypassing\ntheblocktoProc.new\n\n### Callable Objects\n\n42) To attach a binding to the block, you can add one special argument to the method. This argument must be the last in the list of arguments and prefixed by an & sign.\n\n```ruby\ndefmy_method(&the_proc)\nthe_proc\nend\n\np=my_method{|name|\"Hello,#{name}!\"}\np.class#=>Proc\np.call(\"Bill\")#=>\"Hello,Bill!\"\n\n\ndefmy_method(greeting)\n\"#{greeting},#{yield}!\"\nend\n\nmy_proc=proc{\"Bill\"}\nmy_method(\"Hello\",&my_proc)\n```\nWhenyoucallmy_method,the&convertsmy_proctoablockandpassesthat blocktothemethod.\n\n43) There are two differences between procs and lambdas. One has to do with the return keyword, and the other concerns the checking of arguments.\n\nIn a lambda, return just returns from the lambda.\nIn a proc, return behaves differently. Rather than return from the proc, it returns from the scope where the proc itself was defined:\n\nlambdas tend to be less tolerant than procs (and regular blocks) when it comes to arguments. Call a lambda with the wrong arity, and it fails with an ArgumentError. On the other hand, a proc fits the argument list to its own expectations:\n\n```ruby\nclassMyClass\ndefinitialize(value)\n@x=value\nend\n\n  defmy_method\n@x\nend\nend\n\nobject=MyClass.new(1)\nm=object.method:my_method\nm.call#=>1\n```\n\n44) By calling Kernel#method, you get the method itself as a Method object, which you can later execute with Method#call.\n\n### Writing a Domain-Specific Language\n\nN/A\n\n## CLASS DEFINITIONS\n\n### Class Definitions Demystified\n\n### Singleton Methods\n\n### Singleton Classes\n\n### Method Wrappers\n\n45) At the top level of your program, the current class is Object, the class of main. (**Thats why, if you define a method at the top level, that method becomes an instance method of Object.**)\n\n46) Module#class_eval is very different from BasicObject#instance_eval, which you learned about earlier in instance_eval(), on page 85. instance_eval only changes self, **while class_eval changes both self and the current class.**\n\n```ruby\ndefadd_method_to(a_class)\n  a_class.class_evaldo\ndefm;'Hello!';end\nend\nend\n\nadd_method_toString\n\"abc\".m#=>\"Hello!\"\n```\n","source":"_posts/2019-8-10-meta-programming-ruby.md","raw":"---\ntitle: \"Metaprograming Ruby 2\"\ndate: 2019-09-21\ndraft: false\ntags: [\"NOTES\"]\nlabel: \"#book\"\n---\n\n## IMAGES\n\n![hoa](/images/meta2/1.png)\n\n![hoa](/images/meta2/2.png)\n\n![hoa](/images/meta2/3.png)\n\n![hoa](/images/meta2/4.png)\n\n![hoa](/images/meta2/5.png)\n\n<!-- ![hoa](/images/meta2/6.png) -->\n\n![hoa](/images/meta2/7.png)\n\n![hoa](/images/meta2/8.png)\n\n![hoa](/images/meta2/9.png)\n\n\n\n## RUBY OBJECT MODEL\n\n### Open Classes\n\n\n**rails g model Movie title:string director:string**\n\n```ruby\nclass Movie < ActiveRecord:Base; end\n```\n\n1) What about methods such as **title=** and title, which access object attributes (accessor methods for short)? This is where metaprogramming comes in: Bob doesnt have to write those methods. Active Record defines them automatically, after inferring their names from the database schema. ActiveRecord::Base reads the schema at runtime, discovers that the movies table has two columns named title and director, and defines accessor methods for two attributes of the same name. This means that Active Record defines methods such as **Movie#title** and **Movie#director=** out of thin air while the program runs.\n\nOpen Class\n```ruby\nclass Numeric\n  def to_money(currency = nil)\n    Money.from_numeric(self, currency || Money.default_currency)\n  end\nend\n```\n\n2) As cool as they are, however, Open Classes have a dark sideone that youre about to experience.\n\n| This can override the method of superclass and make wrong result in somewhere (monkeypath). So we need be careful when set the name for the override method.\n\n### Inside the Object Model\n\n3) Objects that share the same class also share the same methods, so the methods must be stored in the class, not the object.\n\n4) The \"false\" argument here means: ignore inherited methods Class.instance_methods(false) # => [:allocate, :new, :superclass]\n\n5) The superclass of Class is Modulewhich is to say, every class is also a module.\nTo be precise, a class is a module with three additional instance methods (new, allocate, and superclass)\n\n6) All the constants in a program are arranged in a tree similar to a file system.\n\n7) The Module class also provides an instance method and a class method that, confusingly, are both called constants.\n\n8) Whats an object? Its a bunch of instance variables, plus a link to a class. The objects methods dont live in the objectthey live in the objects class, where theyre called the instance methods of the class.\n\n9) Whats a class? Its an object (an instance of Class), plus a list of instance methods and a link to a superclass. Class is a subclass of Module, so a class is also a module\n\n10) These are instance methods of the Class class. Like any object, a class has its own methods, such as new. Also like any object, classes must be accessed through references. You already have a constant reference to each class: the classs name.\n\n11) Using load, however, has a side effect. The motd.rb file probably defines variables and classes. Although variables fall out of scope when the file has finished loading, constants dont. As a result, motd.rb can pollute your program with the names of its own constantsin particular, class names. You can force motd.rb to keep its constants to itself by passing a second, optional argument to load: **load('motd.rb', true)** If you load a file this way, Ruby creates **an anonymous module**, uses that module as a Namespace to contain all the constants from motd.rb, and then destroys the module. The require method is quite similar to load, but its meant for a different purpose. You use load to execute code, and you use require to import libraries. Thats why require has no second argument: those leftover class names are probably the reason why you imported the file in the first place. Also, thats why require tries only once to load each file, while load executes the file again every time you call it.\n\nWhats the class of Object?\nWhats the superclass of Module?\nWhats the class of Class?\n\n### What Happens When You Call a Method?\n\n12) When you call a method, Ruby does two things:\n1. It finds the method. This is a process called method lookup.\n2. It executes the method. To do that, Ruby needs something called self.\n\n13) Before you look at a more complicated example, though, you need to know about two new concepts: the receiver and the ancestors chain.The receiver is the object that you call a method on. For example, if you write **my_string.reverse()**, then **my_string** is the receiver. To understand the concept of an ancestors chain, look at any Ruby class. Then imagine moving from the class into its superclass, then into the superclasss superclass, and so on, until you reach BasicObject, the root of the Ruby class hierarchy. The path of classes you just traversed is the ancestors chain of the class.\nMySubclass.ancestors # => [MySubclass, MyClass, Object, Kernel, BasicObject]\n\n14) When you include a module in a class (or even in another module), Ruby inserts the module in the ancestors chain, right above the including class itself:\n\n15) Starting from Ruby 2.0, you also have a second way to insert a module in a classs chain of ancestors: **the prepend method**. It works like include, but it inserts the module below the including class (sometimes called the includer).\n\n```ruby\nclass C2\n prepend M2\nend\nclass D2 < C2; end\nD2.ancestors # => [D2, M2, C2, Object, Kernel, BasicObject]\n```\n\n16) This is true every time you include or prepend a module: if that module is already in the chain, Ruby silently ignores the second inclusion.\n\nKernel.private_instance_methods.grep(/^pr/) # => [:printf, :print, :proc]\n\n17) The trick here is that class Object includes Kernel, so Kernel gets into every objects ancestors chain. Every line of Ruby is always executed inside an object, so you can call the instance methods in Kernel from anywhere.\n\n18) You can take advantage of this mechanism yourself: if you add a method to Spell: Kernel Method Kernel, this Kernel Method will be available to all objects. To prove that Kernel Methods are actually useful, you can look at the way some Ruby libraries use them.\n\n19) Every line of Ruby code is executed inside an objectthe so-called current object. The current object is also known as self, because you can access it with the self keyword.\n\n20) Only one object can take the role of self at a given time, but no object holds that role for a long time. In particular, when you call a method, the receiver becomes self. From that moment on, all instance variables are instance variables of self, and all methods called without an explicit receiver are called on self.\n\n21) As soon as you start a Ruby program, youre sitting within an object named main that the Ruby interpreter created for you. This object is sometimes called the top-level context, because its the object youre in when youre at the top level of the call stack: either you havent called any method yet or all the methods that you called have returned.\n\n22) This code refines the String class with a new to_alphanumeric method. Differently from a regular Open Class, however, a Refinement is not active by default. If you try to call   **String#to_alphanumeric**, youll get an error: **\"my *1st* refinement!\".to_alphanumeric  NoMethodError: undefined method 'to_alphanumeric' [...]** To activate the changes, you have to do so explicitly, with the using method: using StringExtensions\n\n23) you can call refine in a regular module, but you cannot call it in a class, even if a class is itself a module.\n\n## METHODS\n\n### Dynamic Methods\n\n24) If that kind of breaching of encapsulation makes you uneasy, you can use public_send instead. Its like send, but it makes a point of respecting the receivers privacy. Be prepared, however, for the fact that Ruby code in the wild rarely bothers with this concern. If anything, a lot of Ruby programmers use send exactly because it allows calling private methods, not in spite of that\n\n```ruby\nclassDS\n  definitialize#connecttodatasource...\ndefget_cpu_info(workstation_id)#...\ndefget_cpu_price(workstation_id)#...\ndefget_mouse_info(workstation_id)#...\ndefget_mouse_price(workstation_id)#...\ndefget_keyboard_info(workstation_id)#...\ndefget_keyboard_price(workstation_id)#...\ndefget_display_info(workstation_id)#...\ndefget_display_price(workstation_id)#...\n#...andsoon\nend\n```\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmouse\n  info=@data_source.get_mouse_info(@id)\n  price=@data_source.get_mouse_price(@id)\n  result=\"Mouse:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n\n  defcpu\n  info=@data_source.get_cpu_info(@id)\n  price=@data_source.get_cpu_price(@id)\n  result=\"Cpu:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n\n  defkeyboard\n  info=@data_source.get_keyboard_info(@id)\n  price=@data_source.get_keyboard_price(@id)\n  result=\"Keyboard:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\n  end\n#...\nend\n```\n\nDYNAMIC DISPATCH\n\n```ruby\nclassComputer\n  definitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmouse\n  component:mouse\nend\n\ndefcpu\n  component:cpu\nend\n\ndefkeyboard\n  component:keyboard\nend\n\ndefcomponent(name)\ninfo=@data_source.send\"get_#{name}_info\",@id\nprice=@data_source.send\"get_#{name}_price\",@id\nresult=\"#{name.capitalize}:#{info}($#{price})\"\nreturn\"*#{result}\"ifprice>=100\nresult\nend\nend\n```\n\nDYNAMIC METHOD\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defself.define_component(name)\ndefine_method(name)do\n  info=@data_source.send\"get_#{name}_info\",@id\n  price=@data_source.send\"get_#{name}_price\",@id\n  result=\"#{name.capitalize}:#{info}($#{price})\"\n  return\"*#{result}\"ifprice>=100\n  result\nend\nend\n\n  define_component:mouse\ndefine_component:cpu\ndefine_component:keyboard\nend\n\n```\n\nBEST WAY\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\ndata_source.methods.grep(/^get_(.*)_info$/){Computer.define_component$1}\nend\n\n  defself.define_component(name)\ndefine_method(name)do\n  #...\n  end\nend\nend\n```\n\n### method_missing\n\n25) The Hashie gem contains a little bit of magic called Hashie::Mash. A Mash is a more powerful version of Rubys standard OpenStruct class: a hash-like object whose attributes work like Ruby variables. If you want a new attribute, just assign a value to the attribute, and it will spring into existence:\n\n```ruby\nrequire'hashie'\nicecream=Hashie::Mash.new\nicecream.flavor=\"strawberry\"\nicecream.flavor#=>\"strawberry\"\n```\n\nWhat hanppen inside?\n\n```ruby\nmoduleHashie\nclassMash<Hashie::Hash\ndefmethod_missing(method_name,*args,&blk)\n  returnself.[](method_name,&blk)ifkey?(method_name)\n  match=method_name.to_s.match(/(.*?)([?=!]?)$/)\n  casematch[2]\n  when\"=\"\n  self[match[1]]=args.first\n  #...\n  else\n  default(method_name,*args,&blk)\n  end\n    end\n#...\n  end\nend\n```\n\n26) **Ghost Methods** (57) are usually icing on the cake, but some objects actually rely almost exclusively on them. These objects are often wrappers for something elsemaybe another object, a web service, or code written in a different language. They collect method calls through method_missing and forward them to the wrapped object. Lets look at a complex real-life example.\n\nRefactor:\n\n```ruby\nclassComputer\ndefinitialize(computer_id,data_source)\n@id=computer_id\n@data_source=data_source\nend\n\n  defmethod_missing(name)\nsuperif!@data_source.respond_to?(\"get_#{name}_info\")\ninfo=@data_source.send(\"get_#{name}_info\",@id)\nprice=@data_source.send(\"get_#{name}_price\",@id)\nresult=\"#{name.capitalize}:#{info}($#{price})\"\nreturn\"*#{result}\"ifprice>=100\nresult\nend\nend\n```\n\n27) Khi dng ghost method, gi s trong method_missing chng ta mun to ra 1 method x, tuy nhin x li c trong cy k tha => x trong method missing s khng c gi. Lc ny ta cn Blank Slates.\n\n### Blank Slates\n\n28) If you dont need the inherited method, you can fix the problem by removing it. While youre at it, you might want to remove most methods from the class, preventing such name clashes from ever happening again. A skinny class Spell: Blank Slate with a minimal number of methods is called a Blank Slate. As it turns out, Ruby has a ready-made Blank Slate for you to use\n\n29) If you dont specify a superclass, your classes inherit by default from Object, which is itself a subclass of BasicObject. If you want a Blank Slate (66), you can inherit directly from BasicObject instead. For example, if Computer inherited directly from BasicObject, then it wouldnt have a problematic display method.\n=> khng ly nhm method trong class Object, v lp Computer c k tha trc tip t BasicObject\n\n30) Inheriting from BasicObject is the quicker way to define a Blank Slate in Ruby.\n**class Computer < BasicObject**\n\n31) You can remove a method from a class by using either Module#undef_method or Module#remove_method. The drastic undef_method removes any method, including the inherited ones. The kinder remove_method removes the method from the receiver, but it leaves inherited methods alone. Lets look at a real-life library that uses undef_method to create a Blank Slate.\n\n```ruby\nclassBlankSlate\n#Hidethemethodnamed+name+intheBlankSlateclass.Don't\n#hide+instance_eval+oranymethodbeginningwith\"__\".\ndefself.hide(name)\n  #...\n  ifinstance_methods.include?(name._blankslate_as_name)&&\n    name!~/^(__|instance_eval$)/\n    undef_methodname\n  end\nend\n#...\ninstance_methods.each{|m|hide(m)}\nend\n```\n\n32) **use Dynamic Methods if you can and Ghost Methods if you have to**\n\n\n## BLOCKS\n\n### Blocks Are Closures\n\n```ruby\ndefmy_method\nx=\"Goodbye\"\nyield(\"cruel\")\nend\n\nx=\"Hello\"\nmy_method{|y|\"#{x},#{y}world\"}#=>\"Hello,cruelworld\"\n```\n\n33) When you create the block, you capture the local bindings, such as x. Then you pass the block to a method that has its own separate set of bindings. In the previous example, those bindings also include a variable named x. Still, the code in the block sees the x that was around when the block was defined, not the methods x, which is not visible at all in the block.\n\n34) khi gi 1 block, n lu vt li cc rng buc cc b ni block c gi, sau  block c truyn cho 1 method, m method  s c cc rng cuc cc b ca ring n, v block s s dng rng buc ca mnh (v d nh bin x  trn).\n\n```ruby\ndefjust_yield\nyield\nend\n\ntop_level_variable=1\njust_yielddo\ntop_level_variable+=1\nlocal_to_block=1\nend\n\ntop_level_variable#=>2\nlocal_to_block#=>Error!\n```\nTrong v d ny th local_to_block l 1 binding thuc block, v ra ngoi ng cnh block n khng c gi tr.\n\n35) This example shows how scope changes as your program runs, tracking the names of bindings with the Kernel#local_variables method:\n\n```ruby\nv1=1\n\nclassMyClass\nv2=2\nlocal_variables#=>[:v2]\ndefmy_method\n  v3=3\n  local_variables\nend\n  local_variables#=>[:v2]\nend\n\nobj=MyClass.new\nobj.my_method#=>[:v3]\nobj.my_method#=>[:v3]\nlocal_variables#=>[:v1,:obj]\n```\n\n36) There are exactly three places where a program leaves the previous scope behind and opens a new one:\nClass definitions\nModule definitions\nMethods\n\n37) Scope changes whenever the program enters (or exits) a class or module definition or a method. These three borders are marked by the keywords class, module, and def, respectively. Each of these keywords acts like a **Scope Gate**.\n\n```ruby\nv1=1\nclassMyClass#SCOPEGATE:enteringclass\n  v2=2\nlocal_variables#=>[\"v2\"]\ndefmy_method#SCOPEGATE:enteringdef\n  v3=3\n  local_variables\nend#SCOPEGATE:leavingdef\n\n  local_variables#=>[\"v2\"]\nend#SCOPEGATE:leavingclass\n\nobj=MyClass.new\nobj.my_method#=>[:v3]\nlocal_variables#=>[:v1,:obj]\n```\n\n```ruby\nmy_var=\"Success\"\n\nMyClass=Class.newdo\n\"#{my_var}intheclassdefinition\"\n\n  define_method:my_methoddo\n  \"#{my_var}inthemethod\"\n end\nend\n```\n\nkhai bo thng thng th my_var khng th s dng trong class hoc def (v n m ra  1 scope mi). Nn dng call method gi l **flat scope**.\n\n38) If you replace Scope Gates with method calls, you allow one scope to see variables from another scope. Technically, this trick should be called nested lexical scopes, but many Ruby coders refer to it simply as flattening the scope, meaning that the two scopes share variables as if the scopes were squeezed together. For short, you can call this spell a Flat Scope.\n\n39) Once you know about Flat Scopes (83), you can do pretty much whatever you want with scopes. For example, assume that you want to share a variable among a few methods, and you dont want anybody else to see that variable. You can do that by defining all the methods in the same Flat Scope as the variable:\n\n```ruby\ndefdefine_methods\nshared=0\nKernel.send:define_method,:counterdo\nshared\nend\n\nKernel.send:define_method,:incdo|x|\nshared+=x\nend\nend\n\nMun ch share variable cho 1 vi method nht nh, dng cc phng thc support bi kernel v gi y l **Flat Scope**.\n\n```\n\n### instance_eval()\n\n```ruby\nv=2\nobj.instance_eval{@v=v}\nobj.instance_eval{@v}#=>2\n```\n\n40) The three lines in the previous example are evaluated in the same Flat Scope (83), so they can all access the local variable vbut the blocks are evaluated with the object as self, so they can also access objs instance variable @v. In all these cases, you can call the block that you pass to instance_eval a Context Probe, because its like a snippet of code that you dip inside an object to do Spell: Context Probe something in there\n\n41) Tosolvethisproblem RubyprovidesthestandardlibraryclassProc.\nAProcisablockthathasbeenturnedintoanobject.YoucancreateaProcbypassing\ntheblocktoProc.new\n\n### Callable Objects\n\n42) To attach a binding to the block, you can add one special argument to the method. This argument must be the last in the list of arguments and prefixed by an & sign.\n\n```ruby\ndefmy_method(&the_proc)\nthe_proc\nend\n\np=my_method{|name|\"Hello,#{name}!\"}\np.class#=>Proc\np.call(\"Bill\")#=>\"Hello,Bill!\"\n\n\ndefmy_method(greeting)\n\"#{greeting},#{yield}!\"\nend\n\nmy_proc=proc{\"Bill\"}\nmy_method(\"Hello\",&my_proc)\n```\nWhenyoucallmy_method,the&convertsmy_proctoablockandpassesthat blocktothemethod.\n\n43) There are two differences between procs and lambdas. One has to do with the return keyword, and the other concerns the checking of arguments.\n\nIn a lambda, return just returns from the lambda.\nIn a proc, return behaves differently. Rather than return from the proc, it returns from the scope where the proc itself was defined:\n\nlambdas tend to be less tolerant than procs (and regular blocks) when it comes to arguments. Call a lambda with the wrong arity, and it fails with an ArgumentError. On the other hand, a proc fits the argument list to its own expectations:\n\n```ruby\nclassMyClass\ndefinitialize(value)\n@x=value\nend\n\n  defmy_method\n@x\nend\nend\n\nobject=MyClass.new(1)\nm=object.method:my_method\nm.call#=>1\n```\n\n44) By calling Kernel#method, you get the method itself as a Method object, which you can later execute with Method#call.\n\n### Writing a Domain-Specific Language\n\nN/A\n\n## CLASS DEFINITIONS\n\n### Class Definitions Demystified\n\n### Singleton Methods\n\n### Singleton Classes\n\n### Method Wrappers\n\n45) At the top level of your program, the current class is Object, the class of main. (**Thats why, if you define a method at the top level, that method becomes an instance method of Object.**)\n\n46) Module#class_eval is very different from BasicObject#instance_eval, which you learned about earlier in instance_eval(), on page 85. instance_eval only changes self, **while class_eval changes both self and the current class.**\n\n```ruby\ndefadd_method_to(a_class)\n  a_class.class_evaldo\ndefm;'Hello!';end\nend\nend\n\nadd_method_toString\n\"abc\".m#=>\"Hello!\"\n```\n","slug":"2019-8-10-meta-programming-ruby","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbd003fp3m2bjflbkyu","content":"<h2 id=\"IMAGES\"><a href=\"#IMAGES\" class=\"headerlink\" title=\"IMAGES\"></a>IMAGES</h2><p><img src=\"/images/meta2/1.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/2.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/3.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/4.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/5.png\" alt=\"hoa\"></p>\n<!-- ![hoa](/images/meta2/6.png) -->\n\n<p><img src=\"/images/meta2/7.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/8.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/9.png\" alt=\"hoa\"></p>\n<h2 id=\"RUBY-OBJECT-MODEL\"><a href=\"#RUBY-OBJECT-MODEL\" class=\"headerlink\" title=\"RUBY OBJECT MODEL\"></a>RUBY OBJECT MODEL</h2><h3 id=\"Open-Classes\"><a href=\"#Open-Classes\" class=\"headerlink\" title=\"Open Classes\"></a>Open Classes</h3><p><strong>rails g model Movie title:string director:string</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Movie</span> &lt; ActiveRecord:<span class=\"title\">Base</span>;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>1) What about methods such as <strong>title=</strong> and title, which access object attributes (accessor methods for short)? This is where metaprogramming comes in: Bob doesnt have to write those methods. Active Record defines them automatically, after inferring their names from the database schema. ActiveRecord::Base reads the schema at runtime, discovers that the movies table has two columns named title and director, and defines accessor methods for two attributes of the same name. This means that Active Record defines methods such as <strong>Movie#title</strong> and <strong>Movie#director=</strong> out of thin air while the program runs.</p>\n<p>Open Class</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Numeric</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">to_money</span><span class=\"params\">(currency = <span class=\"literal\">nil</span>)</span></span></span><br><span class=\"line\">    Money.from_numeric(<span class=\"keyword\">self</span>, currency <span class=\"params\">||</span> Money.default_currency)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>2) As cool as they are, however, Open Classes have a dark sideone that youre about to experience.</p>\n<p>| This can override the method of superclass and make wrong result in somewhere (monkeypath). So we need be careful when set the name for the override method.</p>\n<h3 id=\"Inside-the-Object-Model\"><a href=\"#Inside-the-Object-Model\" class=\"headerlink\" title=\"Inside the Object Model\"></a>Inside the Object Model</h3><p>3) Objects that share the same class also share the same methods, so the methods must be stored in the class, not the object.</p>\n<p>4) The false argument here means: ignore inherited methods Class.instance_methods(false) # =&gt; [:allocate, :new, :superclass]</p>\n<p>5) The superclass of Class is Modulewhich is to say, every class is also a module.<br>To be precise, a class is a module with three additional instance methods (new, allocate, and superclass)</p>\n<p>6) All the constants in a program are arranged in a tree similar to a file system.</p>\n<p>7) The Module class also provides an instance method and a class method that, confusingly, are both called constants.</p>\n<p>8) Whats an object? Its a bunch of instance variables, plus a link to a class. The objects methods dont live in the objectthey live in the objects class, where theyre called the instance methods of the class.</p>\n<p>9) Whats a class? Its an object (an instance of Class), plus a list of instance methods and a link to a superclass. Class is a subclass of Module, so a class is also a module</p>\n<p>10) These are instance methods of the Class class. Like any object, a class has its own methods, such as new. Also like any object, classes must be accessed through references. You already have a constant reference to each class: the classs name.</p>\n<p>11) Using load, however, has a side effect. The motd.rb file probably defines variables and classes. Although variables fall out of scope when the file has finished loading, constants dont. As a result, motd.rb can pollute your program with the names of its own constantsin particular, class names. You can force motd.rb to keep its constants to itself by passing a second, optional argument to load: <strong>load(motd.rb, true)</strong> If you load a file this way, Ruby creates <strong>an anonymous module</strong>, uses that module as a Namespace to contain all the constants from motd.rb, and then destroys the module. The require method is quite similar to load, but its meant for a different purpose. You use load to execute code, and you use require to import libraries. Thats why require has no second argument: those leftover class names are probably the reason why you imported the file in the first place. Also, thats why require tries only once to load each file, while load executes the file again every time you call it.</p>\n<p>Whats the class of Object?<br>Whats the superclass of Module?<br>Whats the class of Class?</p>\n<h3 id=\"What-Happens-When-You-Call-a-Method\"><a href=\"#What-Happens-When-You-Call-a-Method\" class=\"headerlink\" title=\"What Happens When You Call a Method?\"></a>What Happens When You Call a Method?</h3><p>12) When you call a method, Ruby does two things:</p>\n<ol>\n<li>It finds the method. This is a process called method lookup.</li>\n<li>It executes the method. To do that, Ruby needs something called self.</li>\n</ol>\n<p>13) Before you look at a more complicated example, though, you need to know about two new concepts: the receiver and the ancestors chain.The receiver is the object that you call a method on. For example, if you write <strong>my_string.reverse()</strong>, then <strong>my_string</strong> is the receiver. To understand the concept of an ancestors chain, look at any Ruby class. Then imagine moving from the class into its superclass, then into the superclasss superclass, and so on, until you reach BasicObject, the root of the Ruby class hierarchy. The path of classes you just traversed is the ancestors chain of the class.<br>MySubclass.ancestors # =&gt; [MySubclass, MyClass, Object, Kernel, BasicObject]</p>\n<p>14) When you include a module in a class (or even in another module), Ruby inserts the module in the ancestors chain, right above the including class itself:</p>\n<p>15) Starting from Ruby 2.0, you also have a second way to insert a module in a classs chain of ancestors: <strong>the prepend method</strong>. It works like include, but it inserts the module below the including class (sometimes called the includer).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C2</span></span></span><br><span class=\"line\"> prepend M2</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D2</span> &lt; C2;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\">D2.ancestors <span class=\"comment\"># =&gt; [D2, M2, C2, Object, Kernel, BasicObject]</span></span><br></pre></td></tr></table></figure>\n\n<p>16) This is true every time you include or prepend a module: if that module is already in the chain, Ruby silently ignores the second inclusion.</p>\n<p>Kernel.private_instance_methods.grep(/^pr/) # =&gt; [:printf, :print, :proc]</p>\n<p>17) The trick here is that class Object includes Kernel, so Kernel gets into every objects ancestors chain. Every line of Ruby is always executed inside an object, so you can call the instance methods in Kernel from anywhere.</p>\n<p>18) You can take advantage of this mechanism yourself: if you add a method to Spell: Kernel Method Kernel, this Kernel Method will be available to all objects. To prove that Kernel Methods are actually useful, you can look at the way some Ruby libraries use them.</p>\n<p>19) Every line of Ruby code is executed inside an objectthe so-called current object. The current object is also known as self, because you can access it with the self keyword.</p>\n<p>20) Only one object can take the role of self at a given time, but no object holds that role for a long time. In particular, when you call a method, the receiver becomes self. From that moment on, all instance variables are instance variables of self, and all methods called without an explicit receiver are called on self.</p>\n<p>21) As soon as you start a Ruby program, youre sitting within an object named main that the Ruby interpreter created for you. This object is sometimes called the top-level context, because its the object youre in when youre at the top level of the call stack: either you havent called any method yet or all the methods that you called have returned.</p>\n<p>22) This code refines the String class with a new to_alphanumeric method. Differently from a regular Open Class, however, a Refinement is not active by default. If you try to call   <strong>String#to_alphanumeric</strong>, youll get an error: <strong>my <em>1st</em> refinement!.to_alphanumeric  NoMethodError: undefined method to_alphanumeric []</strong> To activate the changes, you have to do so explicitly, with the using method: using StringExtensions</p>\n<p>23) you can call refine in a regular module, but you cannot call it in a class, even if a class is itself a module.</p>\n<h2 id=\"METHODS\"><a href=\"#METHODS\" class=\"headerlink\" title=\"METHODS\"></a>METHODS</h2><h3 id=\"Dynamic-Methods\"><a href=\"#Dynamic-Methods\" class=\"headerlink\" title=\"Dynamic Methods\"></a>Dynamic Methods</h3><p>24) If that kind of breaching of encapsulation makes you uneasy, you can use public_send instead. Its like send, but it makes a point of respecting the receivers privacy. Be prepared, however, for the fact that Ruby code in the wild rarely bothers with this concern. If anything, a lot of Ruby programmers use send exactly because it allows calling private methods, not in spite of that</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">DS</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"comment\">#connecttodatasource...</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_cpu_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_cpu_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_mouse_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_mouse_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_keyboard_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_keyboard_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_display_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_display_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"comment\">#...andsoon</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">mouse</span></span></span><br><span class=\"line\">  info=@data_source.get_mouse_info(@id)</span><br><span class=\"line\">  price=@data_source.get_mouse_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Mouse:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">cpu</span></span></span><br><span class=\"line\">  info=@data_source.get_cpu_info(@id)</span><br><span class=\"line\">  price=@data_source.get_cpu_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Cpu:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">keyboard</span></span></span><br><span class=\"line\">  info=@data_source.get_keyboard_info(@id)</span><br><span class=\"line\">  price=@data_source.get_keyboard_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Keyboard:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>DYNAMIC DISPATCH</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">mouse</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:mouse</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">cpu</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:cpu</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">keyboard</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:keyboard</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">info=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id</span><br><span class=\"line\">price=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id</span><br><span class=\"line\">result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\"><span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>DYNAMIC METHOD</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">define_component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">define_method(name)<span class=\"keyword\">do</span></span><br><span class=\"line\">  info=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id</span><br><span class=\"line\">  price=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id</span><br><span class=\"line\">  result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  define_component<span class=\"symbol\">:mouse</span></span><br><span class=\"line\">define_component<span class=\"symbol\">:cpu</span></span><br><span class=\"line\">define_component<span class=\"symbol\">:keyboard</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>BEST WAY</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\">data_source.methods.grep(<span class=\"regexp\">/^get_(.*)_info$/</span>)&#123;Computer.define_component$1&#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">define_component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">define_method(name)<span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"method-missing\"><a href=\"#method-missing\" class=\"headerlink\" title=\"method_missing\"></a>method_missing</h3><p>25) The Hashie gem contains a little bit of magic called Hashie::Mash. A Mash is a more powerful version of Rubys standard OpenStruct class: a hash-like object whose attributes work like Ruby variables. If you want a new attribute, just assign a value to the attribute, and it will spring into existence:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span><span class=\"string\">'hashie'</span></span><br><span class=\"line\">icecream=Hashie::Mash.new</span><br><span class=\"line\">icecream.flavor=<span class=\"string\">\"strawberry\"</span></span><br><span class=\"line\">icecream.flavor<span class=\"comment\">#=&gt;\"strawberry\"</span></span><br></pre></td></tr></table></figure>\n\n<p>What hanppen inside?</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span><span class=\"title\">Hashie</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Mash</span>&lt;Hashie::Hash</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">method_missing</span><span class=\"params\">(method_name,*args,&amp;blk)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"keyword\">self</span>.[](method_name,&amp;blk)<span class=\"keyword\">if</span>key?(method_name)</span><br><span class=\"line\">  match=method_name.to_s.match(<span class=\"regexp\">/(.*?)([?=!]?)$/</span>)</span><br><span class=\"line\">  <span class=\"keyword\">case</span>match[<span class=\"number\">2</span>]</span><br><span class=\"line\">  <span class=\"keyword\">when</span><span class=\"string\">\"=\"</span></span><br><span class=\"line\">  <span class=\"keyword\">self</span>[match[<span class=\"number\">1</span>]]=args.first</span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">  default(method_name,*args,&amp;blk)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>26) <strong>Ghost Methods</strong> (57) are usually icing on the cake, but some objects actually rely almost exclusively on them. These objects are often wrappers for something elsemaybe another object, a web service, or code written in a different language. They collect method calls through method_missing and forward them to the wrapped object. Lets look at a complex real-life example.</p>\n<p>Refactor:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">method_missing</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\"><span class=\"keyword\">super</span><span class=\"keyword\">if</span>!@data_source.respond_to?(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>)</span><br><span class=\"line\">info=@data_source.send(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id)</span><br><span class=\"line\">price=@data_source.send(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id)</span><br><span class=\"line\">result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\"><span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>27) Khi dng ghost method, gi s trong method_missing chng ta mun to ra 1 method x, tuy nhin x li c trong cy k tha =&gt; x trong method missing s khng c gi. Lc ny ta cn Blank Slates.</p>\n<h3 id=\"Blank-Slates\"><a href=\"#Blank-Slates\" class=\"headerlink\" title=\"Blank Slates\"></a>Blank Slates</h3><p>28) If you dont need the inherited method, you can fix the problem by removing it. While youre at it, you might want to remove most methods from the class, preventing such name clashes from ever happening again. A skinny class Spell: Blank Slate with a minimal number of methods is called a Blank Slate. As it turns out, Ruby has a ready-made Blank Slate for you to use</p>\n<p>29) If you dont specify a superclass, your classes inherit by default from Object, which is itself a subclass of BasicObject. If you want a Blank Slate (66), you can inherit directly from BasicObject instead. For example, if Computer inherited directly from BasicObject, then it wouldnt have a problematic display method.<br>=&gt; khng ly nhm method trong class Object, v lp Computer c k tha trc tip t BasicObject</p>\n<p>30) Inheriting from BasicObject is the quicker way to define a Blank Slate in Ruby.<br><strong>class Computer &lt; BasicObject</strong></p>\n<p>31) You can remove a method from a class by using either Module#undef_method or Module#remove_method. The drastic undef_method removes any method, including the inherited ones. The kinder remove_method removes the method from the receiver, but it leaves inherited methods alone. Lets look at a real-life library that uses undef_method to create a Blank Slate.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">BlankSlate</span></span></span><br><span class=\"line\"><span class=\"comment\">#Hidethemethodnamed+name+intheBlankSlateclass.Don't</span></span><br><span class=\"line\"><span class=\"comment\">#hide+instance_eval+oranymethodbeginningwith\"__\".</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">hide</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>instance_methods.<span class=\"keyword\">include</span>?(name._blankslate_as_name)&amp;&amp;</span><br><span class=\"line\">    name!~<span class=\"regexp\">/^(__|instance_eval$)/</span></span><br><span class=\"line\">    undef_methodname</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\">instance_methods.each&#123;<span class=\"params\">|m|</span>hide(m)&#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>32) <strong>use Dynamic Methods if you can and Ghost Methods if you have to</strong></p>\n<h2 id=\"BLOCKS\"><a href=\"#BLOCKS\" class=\"headerlink\" title=\"BLOCKS\"></a>BLOCKS</h2><h3 id=\"Blocks-Are-Closures\"><a href=\"#Blocks-Are-Closures\" class=\"headerlink\" title=\"Blocks Are Closures\"></a>Blocks Are Closures</h3><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">x=<span class=\"string\">\"Goodbye\"</span></span><br><span class=\"line\"><span class=\"keyword\">yield</span>(<span class=\"string\">\"cruel\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">x=<span class=\"string\">\"Hello\"</span></span><br><span class=\"line\">my_method&#123;<span class=\"params\">|y|</span><span class=\"string\">\"<span class=\"subst\">#&#123;x&#125;</span>,<span class=\"subst\">#&#123;y&#125;</span>world\"</span>&#125;<span class=\"comment\">#=&gt;\"Hello,cruelworld\"</span></span><br></pre></td></tr></table></figure>\n\n<p>33) When you create the block, you capture the local bindings, such as x. Then you pass the block to a method that has its own separate set of bindings. In the previous example, those bindings also include a variable named x. Still, the code in the block sees the x that was around when the block was defined, not the methods x, which is not visible at all in the block.</p>\n<p>34) khi gi 1 block, n lu vt li cc rng buc cc b ni block c gi, sau  block c truyn cho 1 method, m method  s c cc rng cuc cc b ca ring n, v block s s dng rng buc ca mnh (v d nh bin x  trn).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">just_yield</span></span></span><br><span class=\"line\"><span class=\"keyword\">yield</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">top_level_variable=<span class=\"number\">1</span></span><br><span class=\"line\">just_yield<span class=\"keyword\">do</span></span><br><span class=\"line\">top_level_variable+=<span class=\"number\">1</span></span><br><span class=\"line\">local_to_block=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">top_level_variable<span class=\"comment\">#=&gt;2</span></span><br><span class=\"line\">local_to_block<span class=\"comment\">#=&gt;Error!</span></span><br></pre></td></tr></table></figure>\n<p>Trong v d ny th local_to_block l 1 binding thuc block, v ra ngoi ng cnh block n khng c gi tr.</p>\n<p>35) This example shows how scope changes as your program runs, tracking the names of bindings with the Kernel#local_variables method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v1=<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span></span></span><br><span class=\"line\">v2=<span class=\"number\">2</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v2]</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">  v3=<span class=\"number\">3</span></span><br><span class=\"line\">  local_variables</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\">  local_variables<span class=\"comment\">#=&gt;[:v2]</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj=MyClass.new</span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v1,:obj]</span></span><br></pre></td></tr></table></figure>\n\n<p>36) There are exactly three places where a program leaves the previous scope behind and opens a new one:<br>Class definitions<br>Module definitions<br>Methods</p>\n<p>37) Scope changes whenever the program enters (or exits) a class or module definition or a method. These three borders are marked by the keywords class, module, and def, respectively. Each of these keywords acts like a <strong>Scope Gate</strong>.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v1=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span><span class=\"comment\">#SCOPEGATE:enteringclass</span></span></span><br><span class=\"line\">  v2=<span class=\"number\">2</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[\"v2\"]</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"comment\">#SCOPEGATE:enteringdef</span></span></span><br><span class=\"line\">  v3=<span class=\"number\">3</span></span><br><span class=\"line\">  local_variables</span><br><span class=\"line\"><span class=\"keyword\">end</span><span class=\"comment\">#SCOPEGATE:leavingdef</span></span><br><span class=\"line\"></span><br><span class=\"line\">  local_variables<span class=\"comment\">#=&gt;[\"v2\"]</span></span><br><span class=\"line\"><span class=\"keyword\">end</span><span class=\"comment\">#SCOPEGATE:leavingclass</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj=MyClass.new</span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v1,:obj]</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">my_var=<span class=\"string\">\"Success\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">MyClass=Class.new<span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"string\">\"<span class=\"subst\">#&#123;my_var&#125;</span>intheclassdefinition\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  define_method<span class=\"symbol\">:my_method</span><span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"string\">\"<span class=\"subst\">#&#123;my_var&#125;</span>inthemethod\"</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>khai bo thng thng th my_var khng th s dng trong class hoc def (v n m ra  1 scope mi). Nn dng call method gi l <strong>flat scope</strong>.</p>\n<p>38) If you replace Scope Gates with method calls, you allow one scope to see variables from another scope. Technically, this trick should be called nested lexical scopes, but many Ruby coders refer to it simply as flattening the scope, meaning that the two scopes share variables as if the scopes were squeezed together. For short, you can call this spell a Flat Scope.</p>\n<p>39) Once you know about Flat Scopes (83), you can do pretty much whatever you want with scopes. For example, assume that you want to share a variable among a few methods, and you dont want anybody else to see that variable. You can do that by defining all the methods in the same Flat Scope as the variable:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">define_methods</span></span></span><br><span class=\"line\">shared=<span class=\"number\">0</span></span><br><span class=\"line\">Kernel.send<span class=\"symbol\">:define_method</span>,<span class=\"symbol\">:counter</span><span class=\"keyword\">do</span></span><br><span class=\"line\">shared</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Kernel.send<span class=\"symbol\">:define_method</span>,<span class=\"symbol\">:inc</span><span class=\"keyword\">do</span><span class=\"params\">|x|</span></span><br><span class=\"line\">shared+=x</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Mun ch share variable cho <span class=\"number\">1</span> vi method nht nh, dng cc phng thc support bi kernel v gi y l **Flat Scope**.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"instance-eval\"><a href=\"#instance-eval\" class=\"headerlink\" title=\"instance_eval()\"></a>instance_eval()</h3><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v=<span class=\"number\">2</span></span><br><span class=\"line\">obj.instance_eval&#123;@v=v&#125;</span><br><span class=\"line\">obj.instance_eval&#123;@v&#125;<span class=\"comment\">#=&gt;2</span></span><br></pre></td></tr></table></figure>\n\n<p>40) The three lines in the previous example are evaluated in the same Flat Scope (83), so they can all access the local variable vbut the blocks are evaluated with the object as self, so they can also access objs instance variable @v. In all these cases, you can call the block that you pass to instance_eval a Context Probe, because its like a snippet of code that you dip inside an object to do Spell: Context Probe something in there</p>\n<p>41) To solve this problem Ruby provides the standard library class Proc.<br>A Proc isa block that has been turned into an object. You can create a Proc by passing<br>the block to Proc.new</p>\n<h3 id=\"Callable-Objects\"><a href=\"#Callable-Objects\" class=\"headerlink\" title=\"Callable Objects\"></a>Callable Objects</h3><p>42) To attach a binding to the block, you can add one special argument to the method. This argument must be the last in the list of arguments and prefixed by an &amp; sign.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"params\">(&amp;the_proc)</span></span></span><br><span class=\"line\">the_proc</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">p=my_method&#123;<span class=\"params\">|name|</span><span class=\"string\">\"Hello,<span class=\"subst\">#&#123;name&#125;</span>!\"</span>&#125;</span><br><span class=\"line\">p<span class=\"class\">.<span class=\"keyword\">class</span><span class=\"comment\">#=&gt;Proc</span></span></span><br><span class=\"line\">p.call(<span class=\"string\">\"Bill\"</span>)<span class=\"comment\">#=&gt;\"Hello,Bill!\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"params\">(greeting)</span></span></span><br><span class=\"line\"><span class=\"string\">\"<span class=\"subst\">#&#123;greeting&#125;</span>,<span class=\"subst\">#&#123;<span class=\"keyword\">yield</span>&#125;</span>!\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">my_proc=proc&#123;<span class=\"string\">\"Bill\"</span>&#125;</span><br><span class=\"line\">my_method(<span class=\"string\">\"Hello\"</span>,&amp;my_proc)</span><br></pre></td></tr></table></figure>\n<p>When you call my_method, the &amp; converts my_proc to a block and passes that block to the method.</p>\n<p>43) There are two differences between procs and lambdas. One has to do with the return keyword, and the other concerns the checking of arguments.</p>\n<p>In a lambda, return just returns from the lambda.<br>In a proc, return behaves differently. Rather than return from the proc, it returns from the scope where the proc itself was defined:</p>\n<p>lambdas tend to be less tolerant than procs (and regular blocks) when it comes to arguments. Call a lambda with the wrong arity, and it fails with an ArgumentError. On the other hand, a proc fits the argument list to its own expectations:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">@x=value</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">@x</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">object=MyClass.new(<span class=\"number\">1</span>)</span><br><span class=\"line\">m=object.method<span class=\"symbol\">:my_method</span></span><br><span class=\"line\">m.call<span class=\"comment\">#=&gt;1</span></span><br></pre></td></tr></table></figure>\n\n<p>44) By calling Kernel#method, you get the method itself as a Method object, which you can later execute with Method#call.</p>\n<h3 id=\"Writing-a-Domain-Specific-Language\"><a href=\"#Writing-a-Domain-Specific-Language\" class=\"headerlink\" title=\"Writing a Domain-Specific Language\"></a>Writing a Domain-Specific Language</h3><p>N/A</p>\n<h2 id=\"CLASS-DEFINITIONS\"><a href=\"#CLASS-DEFINITIONS\" class=\"headerlink\" title=\"CLASS DEFINITIONS\"></a>CLASS DEFINITIONS</h2><h3 id=\"Class-Definitions-Demystified\"><a href=\"#Class-Definitions-Demystified\" class=\"headerlink\" title=\"Class Definitions Demystified\"></a>Class Definitions Demystified</h3><h3 id=\"Singleton-Methods\"><a href=\"#Singleton-Methods\" class=\"headerlink\" title=\"Singleton Methods\"></a>Singleton Methods</h3><h3 id=\"Singleton-Classes\"><a href=\"#Singleton-Classes\" class=\"headerlink\" title=\"Singleton Classes\"></a>Singleton Classes</h3><h3 id=\"Method-Wrappers\"><a href=\"#Method-Wrappers\" class=\"headerlink\" title=\"Method Wrappers\"></a>Method Wrappers</h3><p>45) At the top level of your program, the current class is Object, the class of main. (<strong>Thats why, if you define a method at the top level, that method becomes an instance method of Object.</strong>)</p>\n<p>46) Module#class_eval is very different from BasicObject#instance_eval, which you learned about earlier in instance_eval(), on page 85. instance_eval only changes self, <strong>while class_eval changes both self and the current class.</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">add_method_to</span><span class=\"params\">(a_class)</span></span></span><br><span class=\"line\">  a_class.class_eval<span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">m</span>;</span><span class=\"string\">'Hello!'</span>;<span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">add_method_toString</span><br><span class=\"line\"><span class=\"string\">\"abc\"</span>.m<span class=\"comment\">#=&gt;\"Hello!\"</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"IMAGES\"><a href=\"#IMAGES\" class=\"headerlink\" title=\"IMAGES\"></a>IMAGES</h2><p><img src=\"/images/meta2/1.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/2.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/3.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/4.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/5.png\" alt=\"hoa\"></p>\n<!-- ![hoa](/images/meta2/6.png) -->\n\n<p><img src=\"/images/meta2/7.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/8.png\" alt=\"hoa\"></p>\n<p><img src=\"/images/meta2/9.png\" alt=\"hoa\"></p>\n<h2 id=\"RUBY-OBJECT-MODEL\"><a href=\"#RUBY-OBJECT-MODEL\" class=\"headerlink\" title=\"RUBY OBJECT MODEL\"></a>RUBY OBJECT MODEL</h2><h3 id=\"Open-Classes\"><a href=\"#Open-Classes\" class=\"headerlink\" title=\"Open Classes\"></a>Open Classes</h3><p><strong>rails g model Movie title:string director:string</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Movie</span> &lt; ActiveRecord:<span class=\"title\">Base</span>;</span> <span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>1) What about methods such as <strong>title=</strong> and title, which access object attributes (accessor methods for short)? This is where metaprogramming comes in: Bob doesnt have to write those methods. Active Record defines them automatically, after inferring their names from the database schema. ActiveRecord::Base reads the schema at runtime, discovers that the movies table has two columns named title and director, and defines accessor methods for two attributes of the same name. This means that Active Record defines methods such as <strong>Movie#title</strong> and <strong>Movie#director=</strong> out of thin air while the program runs.</p>\n<p>Open Class</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Numeric</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">to_money</span><span class=\"params\">(currency = <span class=\"literal\">nil</span>)</span></span></span><br><span class=\"line\">    Money.from_numeric(<span class=\"keyword\">self</span>, currency <span class=\"params\">||</span> Money.default_currency)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>2) As cool as they are, however, Open Classes have a dark sideone that youre about to experience.</p>\n<p>| This can override the method of superclass and make wrong result in somewhere (monkeypath). So we need be careful when set the name for the override method.</p>\n<h3 id=\"Inside-the-Object-Model\"><a href=\"#Inside-the-Object-Model\" class=\"headerlink\" title=\"Inside the Object Model\"></a>Inside the Object Model</h3><p>3) Objects that share the same class also share the same methods, so the methods must be stored in the class, not the object.</p>\n<p>4) The false argument here means: ignore inherited methods Class.instance_methods(false) # =&gt; [:allocate, :new, :superclass]</p>\n<p>5) The superclass of Class is Modulewhich is to say, every class is also a module.<br>To be precise, a class is a module with three additional instance methods (new, allocate, and superclass)</p>\n<p>6) All the constants in a program are arranged in a tree similar to a file system.</p>\n<p>7) The Module class also provides an instance method and a class method that, confusingly, are both called constants.</p>\n<p>8) Whats an object? Its a bunch of instance variables, plus a link to a class. The objects methods dont live in the objectthey live in the objects class, where theyre called the instance methods of the class.</p>\n<p>9) Whats a class? Its an object (an instance of Class), plus a list of instance methods and a link to a superclass. Class is a subclass of Module, so a class is also a module</p>\n<p>10) These are instance methods of the Class class. Like any object, a class has its own methods, such as new. Also like any object, classes must be accessed through references. You already have a constant reference to each class: the classs name.</p>\n<p>11) Using load, however, has a side effect. The motd.rb file probably defines variables and classes. Although variables fall out of scope when the file has finished loading, constants dont. As a result, motd.rb can pollute your program with the names of its own constantsin particular, class names. You can force motd.rb to keep its constants to itself by passing a second, optional argument to load: <strong>load(motd.rb, true)</strong> If you load a file this way, Ruby creates <strong>an anonymous module</strong>, uses that module as a Namespace to contain all the constants from motd.rb, and then destroys the module. The require method is quite similar to load, but its meant for a different purpose. You use load to execute code, and you use require to import libraries. Thats why require has no second argument: those leftover class names are probably the reason why you imported the file in the first place. Also, thats why require tries only once to load each file, while load executes the file again every time you call it.</p>\n<p>Whats the class of Object?<br>Whats the superclass of Module?<br>Whats the class of Class?</p>\n<h3 id=\"What-Happens-When-You-Call-a-Method\"><a href=\"#What-Happens-When-You-Call-a-Method\" class=\"headerlink\" title=\"What Happens When You Call a Method?\"></a>What Happens When You Call a Method?</h3><p>12) When you call a method, Ruby does two things:</p>\n<ol>\n<li>It finds the method. This is a process called method lookup.</li>\n<li>It executes the method. To do that, Ruby needs something called self.</li>\n</ol>\n<p>13) Before you look at a more complicated example, though, you need to know about two new concepts: the receiver and the ancestors chain.The receiver is the object that you call a method on. For example, if you write <strong>my_string.reverse()</strong>, then <strong>my_string</strong> is the receiver. To understand the concept of an ancestors chain, look at any Ruby class. Then imagine moving from the class into its superclass, then into the superclasss superclass, and so on, until you reach BasicObject, the root of the Ruby class hierarchy. The path of classes you just traversed is the ancestors chain of the class.<br>MySubclass.ancestors # =&gt; [MySubclass, MyClass, Object, Kernel, BasicObject]</p>\n<p>14) When you include a module in a class (or even in another module), Ruby inserts the module in the ancestors chain, right above the including class itself:</p>\n<p>15) Starting from Ruby 2.0, you also have a second way to insert a module in a classs chain of ancestors: <strong>the prepend method</strong>. It works like include, but it inserts the module below the including class (sometimes called the includer).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C2</span></span></span><br><span class=\"line\"> prepend M2</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D2</span> &lt; C2;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\">D2.ancestors <span class=\"comment\"># =&gt; [D2, M2, C2, Object, Kernel, BasicObject]</span></span><br></pre></td></tr></table></figure>\n\n<p>16) This is true every time you include or prepend a module: if that module is already in the chain, Ruby silently ignores the second inclusion.</p>\n<p>Kernel.private_instance_methods.grep(/^pr/) # =&gt; [:printf, :print, :proc]</p>\n<p>17) The trick here is that class Object includes Kernel, so Kernel gets into every objects ancestors chain. Every line of Ruby is always executed inside an object, so you can call the instance methods in Kernel from anywhere.</p>\n<p>18) You can take advantage of this mechanism yourself: if you add a method to Spell: Kernel Method Kernel, this Kernel Method will be available to all objects. To prove that Kernel Methods are actually useful, you can look at the way some Ruby libraries use them.</p>\n<p>19) Every line of Ruby code is executed inside an objectthe so-called current object. The current object is also known as self, because you can access it with the self keyword.</p>\n<p>20) Only one object can take the role of self at a given time, but no object holds that role for a long time. In particular, when you call a method, the receiver becomes self. From that moment on, all instance variables are instance variables of self, and all methods called without an explicit receiver are called on self.</p>\n<p>21) As soon as you start a Ruby program, youre sitting within an object named main that the Ruby interpreter created for you. This object is sometimes called the top-level context, because its the object youre in when youre at the top level of the call stack: either you havent called any method yet or all the methods that you called have returned.</p>\n<p>22) This code refines the String class with a new to_alphanumeric method. Differently from a regular Open Class, however, a Refinement is not active by default. If you try to call   <strong>String#to_alphanumeric</strong>, youll get an error: <strong>my <em>1st</em> refinement!.to_alphanumeric  NoMethodError: undefined method to_alphanumeric []</strong> To activate the changes, you have to do so explicitly, with the using method: using StringExtensions</p>\n<p>23) you can call refine in a regular module, but you cannot call it in a class, even if a class is itself a module.</p>\n<h2 id=\"METHODS\"><a href=\"#METHODS\" class=\"headerlink\" title=\"METHODS\"></a>METHODS</h2><h3 id=\"Dynamic-Methods\"><a href=\"#Dynamic-Methods\" class=\"headerlink\" title=\"Dynamic Methods\"></a>Dynamic Methods</h3><p>24) If that kind of breaching of encapsulation makes you uneasy, you can use public_send instead. Its like send, but it makes a point of respecting the receivers privacy. Be prepared, however, for the fact that Ruby code in the wild rarely bothers with this concern. If anything, a lot of Ruby programmers use send exactly because it allows calling private methods, not in spite of that</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">DS</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"comment\">#connecttodatasource...</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_cpu_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_cpu_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_mouse_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_mouse_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_keyboard_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_keyboard_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_display_info</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">get_display_price</span><span class=\"params\">(workstation_id)</span></span><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"comment\">#...andsoon</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">mouse</span></span></span><br><span class=\"line\">  info=@data_source.get_mouse_info(@id)</span><br><span class=\"line\">  price=@data_source.get_mouse_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Mouse:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">cpu</span></span></span><br><span class=\"line\">  info=@data_source.get_cpu_info(@id)</span><br><span class=\"line\">  price=@data_source.get_cpu_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Cpu:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">keyboard</span></span></span><br><span class=\"line\">  info=@data_source.get_keyboard_info(@id)</span><br><span class=\"line\">  price=@data_source.get_keyboard_price(@id)</span><br><span class=\"line\">  result=<span class=\"string\">\"Keyboard:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>DYNAMIC DISPATCH</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">mouse</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:mouse</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">cpu</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:cpu</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">keyboard</span></span></span><br><span class=\"line\">  component<span class=\"symbol\">:keyboard</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">info=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id</span><br><span class=\"line\">price=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id</span><br><span class=\"line\">result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\"><span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>DYNAMIC METHOD</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">define_component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">define_method(name)<span class=\"keyword\">do</span></span><br><span class=\"line\">  info=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id</span><br><span class=\"line\">  price=@data_source.send<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id</span><br><span class=\"line\">  result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">  result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  define_component<span class=\"symbol\">:mouse</span></span><br><span class=\"line\">define_component<span class=\"symbol\">:cpu</span></span><br><span class=\"line\">define_component<span class=\"symbol\">:keyboard</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>BEST WAY</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\">data_source.methods.grep(<span class=\"regexp\">/^get_(.*)_info$/</span>)&#123;Computer.define_component$1&#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">define_component</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">define_method(name)<span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"method-missing\"><a href=\"#method-missing\" class=\"headerlink\" title=\"method_missing\"></a>method_missing</h3><p>25) The Hashie gem contains a little bit of magic called Hashie::Mash. A Mash is a more powerful version of Rubys standard OpenStruct class: a hash-like object whose attributes work like Ruby variables. If you want a new attribute, just assign a value to the attribute, and it will spring into existence:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">require</span><span class=\"string\">'hashie'</span></span><br><span class=\"line\">icecream=Hashie::Mash.new</span><br><span class=\"line\">icecream.flavor=<span class=\"string\">\"strawberry\"</span></span><br><span class=\"line\">icecream.flavor<span class=\"comment\">#=&gt;\"strawberry\"</span></span><br></pre></td></tr></table></figure>\n\n<p>What hanppen inside?</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span><span class=\"title\">Hashie</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Mash</span>&lt;Hashie::Hash</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">method_missing</span><span class=\"params\">(method_name,*args,&amp;blk)</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span><span class=\"keyword\">self</span>.[](method_name,&amp;blk)<span class=\"keyword\">if</span>key?(method_name)</span><br><span class=\"line\">  match=method_name.to_s.match(<span class=\"regexp\">/(.*?)([?=!]?)$/</span>)</span><br><span class=\"line\">  <span class=\"keyword\">case</span>match[<span class=\"number\">2</span>]</span><br><span class=\"line\">  <span class=\"keyword\">when</span><span class=\"string\">\"=\"</span></span><br><span class=\"line\">  <span class=\"keyword\">self</span>[match[<span class=\"number\">1</span>]]=args.first</span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">  default(method_name,*args,&amp;blk)</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>26) <strong>Ghost Methods</strong> (57) are usually icing on the cake, but some objects actually rely almost exclusively on them. These objects are often wrappers for something elsemaybe another object, a web service, or code written in a different language. They collect method calls through method_missing and forward them to the wrapped object. Lets look at a complex real-life example.</p>\n<p>Refactor:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">Computer</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(computer_id,data_source)</span></span></span><br><span class=\"line\">@id=computer_id</span><br><span class=\"line\">@data_source=data_source</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">method_missing</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\"><span class=\"keyword\">super</span><span class=\"keyword\">if</span>!@data_source.respond_to?(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>)</span><br><span class=\"line\">info=@data_source.send(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_info\"</span>,@id)</span><br><span class=\"line\">price=@data_source.send(<span class=\"string\">\"get_<span class=\"subst\">#&#123;name&#125;</span>_price\"</span>,@id)</span><br><span class=\"line\">result=<span class=\"string\">\"<span class=\"subst\">#&#123;name.capitalize&#125;</span>:<span class=\"subst\">#&#123;info&#125;</span>($<span class=\"subst\">#&#123;price&#125;</span>)\"</span></span><br><span class=\"line\"><span class=\"keyword\">return</span><span class=\"string\">\"*<span class=\"subst\">#&#123;result&#125;</span>\"</span><span class=\"keyword\">if</span>price&gt;=<span class=\"number\">100</span></span><br><span class=\"line\">result</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>27) Khi dng ghost method, gi s trong method_missing chng ta mun to ra 1 method x, tuy nhin x li c trong cy k tha =&gt; x trong method missing s khng c gi. Lc ny ta cn Blank Slates.</p>\n<h3 id=\"Blank-Slates\"><a href=\"#Blank-Slates\" class=\"headerlink\" title=\"Blank Slates\"></a>Blank Slates</h3><p>28) If you dont need the inherited method, you can fix the problem by removing it. While youre at it, you might want to remove most methods from the class, preventing such name clashes from ever happening again. A skinny class Spell: Blank Slate with a minimal number of methods is called a Blank Slate. As it turns out, Ruby has a ready-made Blank Slate for you to use</p>\n<p>29) If you dont specify a superclass, your classes inherit by default from Object, which is itself a subclass of BasicObject. If you want a Blank Slate (66), you can inherit directly from BasicObject instead. For example, if Computer inherited directly from BasicObject, then it wouldnt have a problematic display method.<br>=&gt; khng ly nhm method trong class Object, v lp Computer c k tha trc tip t BasicObject</p>\n<p>30) Inheriting from BasicObject is the quicker way to define a Blank Slate in Ruby.<br><strong>class Computer &lt; BasicObject</strong></p>\n<p>31) You can remove a method from a class by using either Module#undef_method or Module#remove_method. The drastic undef_method removes any method, including the inherited ones. The kinder remove_method removes the method from the receiver, but it leaves inherited methods alone. Lets look at a real-life library that uses undef_method to create a Blank Slate.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">BlankSlate</span></span></span><br><span class=\"line\"><span class=\"comment\">#Hidethemethodnamed+name+intheBlankSlateclass.Don't</span></span><br><span class=\"line\"><span class=\"comment\">#hide+instance_eval+oranymethodbeginningwith\"__\".</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">self</span>.<span class=\"title\">hide</span><span class=\"params\">(name)</span></span></span><br><span class=\"line\">  <span class=\"comment\">#...</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>instance_methods.<span class=\"keyword\">include</span>?(name._blankslate_as_name)&amp;&amp;</span><br><span class=\"line\">    name!~<span class=\"regexp\">/^(__|instance_eval$)/</span></span><br><span class=\"line\">    undef_methodname</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"comment\">#...</span></span><br><span class=\"line\">instance_methods.each&#123;<span class=\"params\">|m|</span>hide(m)&#125;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>32) <strong>use Dynamic Methods if you can and Ghost Methods if you have to</strong></p>\n<h2 id=\"BLOCKS\"><a href=\"#BLOCKS\" class=\"headerlink\" title=\"BLOCKS\"></a>BLOCKS</h2><h3 id=\"Blocks-Are-Closures\"><a href=\"#Blocks-Are-Closures\" class=\"headerlink\" title=\"Blocks Are Closures\"></a>Blocks Are Closures</h3><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">x=<span class=\"string\">\"Goodbye\"</span></span><br><span class=\"line\"><span class=\"keyword\">yield</span>(<span class=\"string\">\"cruel\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">x=<span class=\"string\">\"Hello\"</span></span><br><span class=\"line\">my_method&#123;<span class=\"params\">|y|</span><span class=\"string\">\"<span class=\"subst\">#&#123;x&#125;</span>,<span class=\"subst\">#&#123;y&#125;</span>world\"</span>&#125;<span class=\"comment\">#=&gt;\"Hello,cruelworld\"</span></span><br></pre></td></tr></table></figure>\n\n<p>33) When you create the block, you capture the local bindings, such as x. Then you pass the block to a method that has its own separate set of bindings. In the previous example, those bindings also include a variable named x. Still, the code in the block sees the x that was around when the block was defined, not the methods x, which is not visible at all in the block.</p>\n<p>34) khi gi 1 block, n lu vt li cc rng buc cc b ni block c gi, sau  block c truyn cho 1 method, m method  s c cc rng cuc cc b ca ring n, v block s s dng rng buc ca mnh (v d nh bin x  trn).</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">just_yield</span></span></span><br><span class=\"line\"><span class=\"keyword\">yield</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">top_level_variable=<span class=\"number\">1</span></span><br><span class=\"line\">just_yield<span class=\"keyword\">do</span></span><br><span class=\"line\">top_level_variable+=<span class=\"number\">1</span></span><br><span class=\"line\">local_to_block=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">top_level_variable<span class=\"comment\">#=&gt;2</span></span><br><span class=\"line\">local_to_block<span class=\"comment\">#=&gt;Error!</span></span><br></pre></td></tr></table></figure>\n<p>Trong v d ny th local_to_block l 1 binding thuc block, v ra ngoi ng cnh block n khng c gi tr.</p>\n<p>35) This example shows how scope changes as your program runs, tracking the names of bindings with the Kernel#local_variables method:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v1=<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span></span></span><br><span class=\"line\">v2=<span class=\"number\">2</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v2]</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">  v3=<span class=\"number\">3</span></span><br><span class=\"line\">  local_variables</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\">  local_variables<span class=\"comment\">#=&gt;[:v2]</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj=MyClass.new</span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v1,:obj]</span></span><br></pre></td></tr></table></figure>\n\n<p>36) There are exactly three places where a program leaves the previous scope behind and opens a new one:<br>Class definitions<br>Module definitions<br>Methods</p>\n<p>37) Scope changes whenever the program enters (or exits) a class or module definition or a method. These three borders are marked by the keywords class, module, and def, respectively. Each of these keywords acts like a <strong>Scope Gate</strong>.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v1=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span><span class=\"comment\">#SCOPEGATE:enteringclass</span></span></span><br><span class=\"line\">  v2=<span class=\"number\">2</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[\"v2\"]</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"comment\">#SCOPEGATE:enteringdef</span></span></span><br><span class=\"line\">  v3=<span class=\"number\">3</span></span><br><span class=\"line\">  local_variables</span><br><span class=\"line\"><span class=\"keyword\">end</span><span class=\"comment\">#SCOPEGATE:leavingdef</span></span><br><span class=\"line\"></span><br><span class=\"line\">  local_variables<span class=\"comment\">#=&gt;[\"v2\"]</span></span><br><span class=\"line\"><span class=\"keyword\">end</span><span class=\"comment\">#SCOPEGATE:leavingclass</span></span><br><span class=\"line\"></span><br><span class=\"line\">obj=MyClass.new</span><br><span class=\"line\">obj.my_method<span class=\"comment\">#=&gt;[:v3]</span></span><br><span class=\"line\">local_variables<span class=\"comment\">#=&gt;[:v1,:obj]</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">my_var=<span class=\"string\">\"Success\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">MyClass=Class.new<span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"string\">\"<span class=\"subst\">#&#123;my_var&#125;</span>intheclassdefinition\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  define_method<span class=\"symbol\">:my_method</span><span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"string\">\"<span class=\"subst\">#&#123;my_var&#125;</span>inthemethod\"</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>khai bo thng thng th my_var khng th s dng trong class hoc def (v n m ra  1 scope mi). Nn dng call method gi l <strong>flat scope</strong>.</p>\n<p>38) If you replace Scope Gates with method calls, you allow one scope to see variables from another scope. Technically, this trick should be called nested lexical scopes, but many Ruby coders refer to it simply as flattening the scope, meaning that the two scopes share variables as if the scopes were squeezed together. For short, you can call this spell a Flat Scope.</p>\n<p>39) Once you know about Flat Scopes (83), you can do pretty much whatever you want with scopes. For example, assume that you want to share a variable among a few methods, and you dont want anybody else to see that variable. You can do that by defining all the methods in the same Flat Scope as the variable:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">define_methods</span></span></span><br><span class=\"line\">shared=<span class=\"number\">0</span></span><br><span class=\"line\">Kernel.send<span class=\"symbol\">:define_method</span>,<span class=\"symbol\">:counter</span><span class=\"keyword\">do</span></span><br><span class=\"line\">shared</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Kernel.send<span class=\"symbol\">:define_method</span>,<span class=\"symbol\">:inc</span><span class=\"keyword\">do</span><span class=\"params\">|x|</span></span><br><span class=\"line\">shared+=x</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">Mun ch share variable cho <span class=\"number\">1</span> vi method nht nh, dng cc phng thc support bi kernel v gi y l **Flat Scope**.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"instance-eval\"><a href=\"#instance-eval\" class=\"headerlink\" title=\"instance_eval()\"></a>instance_eval()</h3><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v=<span class=\"number\">2</span></span><br><span class=\"line\">obj.instance_eval&#123;@v=v&#125;</span><br><span class=\"line\">obj.instance_eval&#123;@v&#125;<span class=\"comment\">#=&gt;2</span></span><br></pre></td></tr></table></figure>\n\n<p>40) The three lines in the previous example are evaluated in the same Flat Scope (83), so they can all access the local variable vbut the blocks are evaluated with the object as self, so they can also access objs instance variable @v. In all these cases, you can call the block that you pass to instance_eval a Context Probe, because its like a snippet of code that you dip inside an object to do Spell: Context Probe something in there</p>\n<p>41) To solve this problem Ruby provides the standard library class Proc.<br>A Proc isa block that has been turned into an object. You can create a Proc by passing<br>the block to Proc.new</p>\n<h3 id=\"Callable-Objects\"><a href=\"#Callable-Objects\" class=\"headerlink\" title=\"Callable Objects\"></a>Callable Objects</h3><p>42) To attach a binding to the block, you can add one special argument to the method. This argument must be the last in the list of arguments and prefixed by an &amp; sign.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"params\">(&amp;the_proc)</span></span></span><br><span class=\"line\">the_proc</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">p=my_method&#123;<span class=\"params\">|name|</span><span class=\"string\">\"Hello,<span class=\"subst\">#&#123;name&#125;</span>!\"</span>&#125;</span><br><span class=\"line\">p<span class=\"class\">.<span class=\"keyword\">class</span><span class=\"comment\">#=&gt;Proc</span></span></span><br><span class=\"line\">p.call(<span class=\"string\">\"Bill\"</span>)<span class=\"comment\">#=&gt;\"Hello,Bill!\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span><span class=\"params\">(greeting)</span></span></span><br><span class=\"line\"><span class=\"string\">\"<span class=\"subst\">#&#123;greeting&#125;</span>,<span class=\"subst\">#&#123;<span class=\"keyword\">yield</span>&#125;</span>!\"</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">my_proc=proc&#123;<span class=\"string\">\"Bill\"</span>&#125;</span><br><span class=\"line\">my_method(<span class=\"string\">\"Hello\"</span>,&amp;my_proc)</span><br></pre></td></tr></table></figure>\n<p>When you call my_method, the &amp; converts my_proc to a block and passes that block to the method.</p>\n<p>43) There are two differences between procs and lambdas. One has to do with the return keyword, and the other concerns the checking of arguments.</p>\n<p>In a lambda, return just returns from the lambda.<br>In a proc, return behaves differently. Rather than return from the proc, it returns from the scope where the proc itself was defined:</p>\n<p>lambdas tend to be less tolerant than procs (and regular blocks) when it comes to arguments. Call a lambda with the wrong arity, and it fails with an ArgumentError. On the other hand, a proc fits the argument list to its own expectations:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">MyClass</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">initialize</span><span class=\"params\">(value)</span></span></span><br><span class=\"line\">@x=value</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">my_method</span></span></span><br><span class=\"line\">@x</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">object=MyClass.new(<span class=\"number\">1</span>)</span><br><span class=\"line\">m=object.method<span class=\"symbol\">:my_method</span></span><br><span class=\"line\">m.call<span class=\"comment\">#=&gt;1</span></span><br></pre></td></tr></table></figure>\n\n<p>44) By calling Kernel#method, you get the method itself as a Method object, which you can later execute with Method#call.</p>\n<h3 id=\"Writing-a-Domain-Specific-Language\"><a href=\"#Writing-a-Domain-Specific-Language\" class=\"headerlink\" title=\"Writing a Domain-Specific Language\"></a>Writing a Domain-Specific Language</h3><p>N/A</p>\n<h2 id=\"CLASS-DEFINITIONS\"><a href=\"#CLASS-DEFINITIONS\" class=\"headerlink\" title=\"CLASS DEFINITIONS\"></a>CLASS DEFINITIONS</h2><h3 id=\"Class-Definitions-Demystified\"><a href=\"#Class-Definitions-Demystified\" class=\"headerlink\" title=\"Class Definitions Demystified\"></a>Class Definitions Demystified</h3><h3 id=\"Singleton-Methods\"><a href=\"#Singleton-Methods\" class=\"headerlink\" title=\"Singleton Methods\"></a>Singleton Methods</h3><h3 id=\"Singleton-Classes\"><a href=\"#Singleton-Classes\" class=\"headerlink\" title=\"Singleton Classes\"></a>Singleton Classes</h3><h3 id=\"Method-Wrappers\"><a href=\"#Method-Wrappers\" class=\"headerlink\" title=\"Method Wrappers\"></a>Method Wrappers</h3><p>45) At the top level of your program, the current class is Object, the class of main. (<strong>Thats why, if you define a method at the top level, that method becomes an instance method of Object.</strong>)</p>\n<p>46) Module#class_eval is very different from BasicObject#instance_eval, which you learned about earlier in instance_eval(), on page 85. instance_eval only changes self, <strong>while class_eval changes both self and the current class.</strong></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">add_method_to</span><span class=\"params\">(a_class)</span></span></span><br><span class=\"line\">  a_class.class_eval<span class=\"keyword\">do</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span><span class=\"title\">m</span>;</span><span class=\"string\">'Hello!'</span>;<span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">add_method_toString</span><br><span class=\"line\"><span class=\"string\">\"abc\"</span>.m<span class=\"comment\">#=&gt;\"Hello!\"</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Hello Hexo!","date":"2019-11-12T03:38:22.000Z","label":"#til","_content":"\n![the con](/../images/thecon.jpg)\n\n1. `hexo init new_project`\n\n2. `hexo s`\n\n3. `hexo clean` (remove public folder)\n\n4. `hexo generate` (generate static site from your post and something related)\n\n5. `hexo deploy` (install and use hexo-deployer-git)\n\n6. Config _config.yml to use hexo-deployer-git and add some information\n\n-----\n","source":"_posts/2019-8-21-hello-hexo.md","raw":"---\ntitle: Hello Hexo!\ndate: 2019-11-12 10:38:22\ntags:\nlabel: \"#til\"\n---\n\n![the con](/../images/thecon.jpg)\n\n1. `hexo init new_project`\n\n2. `hexo s`\n\n3. `hexo clean` (remove public folder)\n\n4. `hexo generate` (generate static site from your post and something related)\n\n5. `hexo deploy` (install and use hexo-deployer-git)\n\n6. Config _config.yml to use hexo-deployer-git and add some information\n\n-----\n","slug":"2019-8-21-hello-hexo","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbe003jp3m22kjv8s4y","content":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<ol>\n<li><p><code>hexo init new_project</code></p>\n</li>\n<li><p><code>hexo s</code></p>\n</li>\n<li><p><code>hexo clean</code> (remove public folder)</p>\n</li>\n<li><p><code>hexo generate</code> (generate static site from your post and something related)</p>\n</li>\n<li><p><code>hexo deploy</code> (install and use hexo-deployer-git)</p>\n</li>\n<li><p>Config _config.yml to use hexo-deployer-git and add some information</p>\n</li>\n</ol>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/../images/thecon.jpg\" alt=\"the con\"></p>\n<ol>\n<li><p><code>hexo init new_project</code></p>\n</li>\n<li><p><code>hexo s</code></p>\n</li>\n<li><p><code>hexo clean</code> (remove public folder)</p>\n</li>\n<li><p><code>hexo generate</code> (generate static site from your post and something related)</p>\n</li>\n<li><p><code>hexo deploy</code> (install and use hexo-deployer-git)</p>\n</li>\n<li><p>Config _config.yml to use hexo-deployer-git and add some information</p>\n</li>\n</ol>\n<hr>\n"},{"title":"SQL Performance Explained","date":"2020-01-04T17:00:00.000Z","label":"#book","_content":"\n> The notes of mine after read SQL Performance Explained Ebook (boring, but helpful).\n\n## Anatomy of an Index\n\nC s d liu s dng 2 loi cu trc  lu tr index. **B-Tree** v **Doubly Linked List**. V vy cch s dng 2 loi cu trc ny s gii thch cho phn ln cc c tnh ca SQL.\n\n### Doubly Linked List\n\n1. Mi mt node (node cha index) s l mt node trong 1 **Doubly Linked List**, v vy n s c lin kt ti n 2 node ln cn (mt trc v mt sau). Khi ta mun chn thm 1 node mi vo dslk i ny. Ta s tm v tr 2 node cn chn node mi vo gia chng, n gin ch thay i con tr ca 2 node . V th v tr vt l ca node mi khng quan trng. Li ch ca vic ny l gip vic chn thm d liu khng tn qu nhiu cng sc, ch thay i vi con tr.\n\n2. Mi **leaf node** c lu ch trong 1 block/page. Mi block s thn l 1 vi KB, csdl s c gng lu nhiu node (node cha index) nht c th trong mi block/page. Vy csdl s dng dsdl i  qun l trong 2 cp (Dng trong cc node thuc 1 block/page v dng gia cc blog vi nhau). Hiu n gin nh ta chia Vit Nam thnh 63 block ng vi 63 tnh thnh. Mi khi ta mun tm 1 tnh no  th tm trong sdl i ca 63 tnh. Khi  tm thy tnh cn tm ta mun tm n huyn (cc huyn trong tnh  cng dng dslk i  kt ni). Nhn hnh di y.\n\n![2 level doubly linked list](/../images/leaf-node.png)\n\n### The Search Tree (B-Tree)\n\n1. Dslk i gip thc hin nhanh cc thao tc chn, xo node, tuy nhin vy cn tm kim th sao. Nh li cu trc dslk th vic tm kim l tuyn tnh, v vy chng ta cn mt cu trc d liu b sung  gip csdl bit c i tng cn tm ang nm trong block/page no 1 cch nhanh chng. V cu trc d liu c chn l B-Tree. Nhn hnh di y:\n\n![b-tree](/../images/b-tree-sql.png)\n\n2. Nh hnh trn. Dslk i gip sp xp cc node v cc block/page. Root v **branch node** gip y nhanh qu trnh tm kim 1 block/page cn thit.\n\n3. L do B-Tree c la chn v s dng rng ri l v c tnh cn bng ca cy.  cao ca cy l khng i t root n bt k node l no. Tnh tng trng chiu cao ca cy theo Logarit khi tng node l dn n 1 cy bc 4, 5 c th cha hng triu node v trong thc t gn nh khng c trng hp no c  su ln n 6.\n\n## The Where Clause\n\n### Concatenated Indexes\n\n1. Cc h qun tr c s d liu hin nay s nh index cho kho chnh mt cch t ng.\n\n2. **Concatenated Indexes**: Index c to bng nhiu ct.\n\n3. Mt index c to t 2 ct v d **col-1** v **col-2** th trong 1 cu truy vn where dng vi 2 ct trn, index s hot ng khng khc g so vi index mt ct c. Tuy nhin th t 2 ct trong cu lnh to index s rt quan trng.\n\ne.g:\n\n```sql\nCREATE UNIQUE INDEX employee_pk\n  ON employees (employee_id, subsidiary_id);\n```\n\nKhi ny nu chng ta dng truy vn sau:\n\n```sql\nSELECT first_name, last_name\n  FROM employees\n  WHERE subsidiary_id = 20;\n```\n\nIndex s to bn trn v dng v csdl s full scan ton b bng employees.\n\n> Ct u tin s l tiu ch chnh  xc nh record cn tm, ch s dng ct th 2 khi m c nhiu hn 1 record p ng c tiu ch v ct u tin. V vy 1 truy vn vi ct th 2 s l v ngha.\n\n![2-col](/../images/2-col.png)\n\nTrong hnh trn ta c th thy, B-Tree c sp xp theo ct u tin, v ta ch s dng ct th 2 khi c nhiu hn 1 record p ng c iu kin vi ct u tin. V d nh record c id = 123, B-Tree s dn chng ta ti block cha id ny,  y v c nhiu hn 1 record c id = 123. N mi da vo ct th 2  ly record cn tm. Vy nu ta query vi iu kin where ch c ct th 2 th r rng l hon ton v ngha.\n\n4. Bn thn B-Tree trong trng hp ny cng ch lu ct th 2  node l m thi, nhng node trung gian khng c thng tin ca ct 2.\n\n> iu quan trng nht khi to mt index gm nhiu ct l xc nh xem nn chn ct no lm ct u tin trong index.\n\n### Function-base index\n\nTrong trng hp  nh index cho ct **last_name**, v khng kim sot c d liu ca ngi dng nhp v d liu trong csdl, ch hoa v ch thng trong trng hp ny khng phn bit. Vy ta nn lm g?\n\n```sql\nSELECT first_name, last_name, phone_number\n  FROM employees\n  WHERE UPPER(last_name) = UPPER('winand');\n```\n\nTm cc record c last_name = 'winand', trc khi tm kim th s dng hm UPPER  covert d liu sang ch hoa khi so khp. Nh iu kin bn trn, chng ta  nh index cho field **last_name** tuy nhin trong trng hp ny index s khng cn hot ng, thay vo  l 1 full scan ton b bng.\n\nM tut:\n\n```sql\nSELECT first_name, last_name, phone_number\n  FROM employees\n  WHERE BLACKBOX(...) = 'WINAND';\n```\n\nTrong  thay **BLACKBOX** bng mt function bt k, ng vi vic index khng cn hot ng.\n\nGii php: nh index lun gi tr thc s s dng khi tm kim,  y l last_name di dng vit hoa.\n\n```sql\nCREATE INDEX emp_up_name\n  ON employees (UPPER(last_name));\n```\n\n> Ta gi ch mc c to trn l function-based index (FBI), ch mc da trn function.\n\nThay v copy lun d liu ct c nh vo cy index. Mt function-based index s apply function vo d liu trc khi ghi vo cy index. Vy trong v d trn, cy index s cha ton b last_name di dng ch hoa.\n\n> Mt s ORM dng upper/lower 1 cch ngm v mc nh, ch khng cn dev phi trc tip thc hin, v d nh Hibernate s t ng thc hin function-based index vi lower ca ct cn nh.\n\nTrn l kin thc SQL, vi cc h qun tr c s d liu trong thc t, cch thc hin khng phi lc no cng nh vy.\n\n### User-Defined Functions\n\nKhng phi function no cng c th dng cho function-based index.\n\nCh nhng function l **deterministic** mi c th dng trong function-based index.\n\n> deterministic: nhng function tr v cng mt kt qu khi nhn tham s ging nhau.\n\n```sql\nCREATE FUNCTION get_age(date_of_birth DATE)\nRETURN NUMBER\nAS\nBEGIN\n RETURN\n TRUNC(MONTHS_BETWEEN(SYSDATE, date_of_birth)/12);\nEND;\n```\n\nKhng th dng **get_age** cho function-based index. V v d ti sinh ngy 30/08/1995. ng vi mi thi im khc nhau output ca hm ny s khc nhau vi cng mt i s truyn vo l ngy sinh ca ti. Vy nn n khng dng  function-based index c.\n\n> Cc function khc khng th dng cho index l function random hoc function da trn bin mi trng.\n\nNotes: Gi s chng ta nh index cho ct **last_name** ri nh tip cho **UPPER(last_name)**, vi mi ln update i tng c trng last_name, ng ngha chng ta phi update cho 2 index. ng vi 2 index  nh, v vy khng nn nh index qu nhiu, nht l vi function-based index.\n\n### Parameterized Queries\n\n> Bind parameters/dynamic parameters/ bind variables l mt cch truyn tham s vo cu query gin tip bng cc k hiu nh **?**, **:name**, **@name**.\n\n> Bind variables are the best way to prevent SQL injection.\n\n> Cc h qun tr csdl s cache li cc d liu ng truy cp y ht nhau. Khi ta thay i tham s truyn vo h c s d liu s query mi v khng cn dng cache.\n\n> Not using bind parameters is like recompiling a program every time.\n\n### Searching for Ranges\n\n> Ri do hiu sut ln nht vi INDEX RANGE SCAN l qu trnh duyt qua nt l.\n\n```sql\nSELECT first_name, last_name, date_of_birth\n  FROM employees\n  WHERE date_of_birth >= TO_DATE(?, 'YYYY-MM-DD')\n  AND date_of_birth <= TO_DATE(?, 'YYYY-MM-DD')\n  AND subsidiary_id = ?\n```\n\nOk, gi chng ta c mt cu truy vn nh trn, tm tt c nhn vin c subsidiary_id = 27 v ngy sinh nm trong khong 1/1/1971 v 9/1/1971.\n\nChng ta s nh index cho 2 ct trn, nh nh bn trn  ghi. Tuy nhin **th t nh index** nh no?\n\n**Trng hp xp date_or_birth trc**:\n\n![date- first](/../images/date-first.png)\n\n**Trng hp xp subsidiary_id trc**:\n\n![sub- first](/../images/sub-first.png)\n\n**Ti sao trng hp cho subsidiary_id u tin trong index li em li performance tt hn?**\n\nL gii: khi dng range first, kiu g cng phi duyt ht range  thi, record no trong range  l s c duyt qua ri so khp vi iu kin so bng th hai.\n\nKhi dng trng so bng u tin, ta lm gim phm v s record cn qut qua (theo quy tc ca B-Tree).\n\n> Rule of thumb: index for equality firstthen for ranges.\n\n### Indexing LIKE Filters\n\nVi cc query vi **LIKE**, chng ta vn c th nh index bnh thng ln trng c truy vn. Tuy nhin trong mt s trng hp chng ta s gp vn  v d nh:\n\nDng k t **%** trong t cn tm.\n\n```sql\nSELECT first_name, last_name, date_of_birth\n  FROM employees\n  WHERE UPPER(last_name) LIKE 'WINND'\n```\n\nnh index trn last_name v ngon.\n\n```sql\nSELECT first_name, last_name, date_of_birth\n  FROM employees\n  WHERE UPPER(last_name) LIKE 'WIN%D'\n```\n\nK t **%** xut hin v khng ngon na ri. V lc ny, **index** ch s dng phn trc **%**  tnh khong range cn qut, cn phn ng sau **%** ch dng nhim v so khp.\n\nTc l phi qut qua bao nhiu phn t s hon ton do phn u tin quyt nh. T c ta c 2 nh ngha tc gi nu ra:\n\n1. **access predicate**: phn u\n2. **filter predicate**: phn cn li\n\nV d hnh di y:\n\n![like-query](/../images/like-query.png)\n\nKhi thay cm t ng trc **%** t WI -> WIN -> WINA th scan range  thay i t:\n\n18 -> 2 -> 1 (trong c s d liu mu).\n\n### Index Merge\n\n> One index scan is faster than two.\n\nLiu nn to mi index cho mt column, hay to mt index cho tt c column, trng hp no hiu qu hn? Cu tr li ca tc gi l nhiu ct cho mt index s hiu qu hn trong truy vn where.\n\nTi sao li nh vy?\n\nQuay tr li nh ngha, chng ta  c c rng index dng B-Tree kt hp vi dslk i  cover cc trng hp.\n\nVy gi s, ta nh index ln 2 column (last_name v date_of_bird) theo ng th t sp xp. Khi ny h qun tr csdl s nh sp khong theo last_name, tc l node l s bt u ti last_name c k t nh nht (v d l A) v node l cui cng s l k t ln nht (v d l Z). Khi ny, trng th 2 trong index ch dng  so khp khi ta c 2 last_name bng nhau m thi.\n\n\nVy nu ta nh 2 index ring bit cho last_name v date_of_bird th sao? Lc ny vi mt cu truy vn di y:\n\n```sql\nSELECT first_name, last_name, date_of_birth\n  FROM employees\n  WHERE UPPER(last_name) < ?\n  AND date_of_birth < ?\n```\n\nh qun tr csdl s phi duyt qua 2 cy index (1 cy ng vi index cho last_name v cy cn li ng vi index cho date_of_birth). Sau  combine kt qu ca 2 ln duyt  trn li.\n\nS tn resource hn rt nhiu so vi nh 1 index cho last_name + date_of_birth.\n\n> C mt loi index gip gii quyt bi ton trn gi l bitmap index, tuy nhin bitmap index gp vn  ln trong vic ghi ng thi, v th n khng th s dng trong cc csdl thanh ton online.\n\n### Partial Indexes\n\nnh ch mc cho 1 nhm phn t thuc 1 bng.\n\n```sql\nCREATE INDEX messages_todo\n  ON messages (receiver)\n  WHERE processed = 'N'\n```\n\nnh index cho cc row thuc bng messages m c column processed c gi tr bng N.\n\nVy ta dng c index ny khi no. Cu tr li l chng ta c th dng mi lc khi query vi mnh  where.\n\n## Performance and Scalability\n\n## The Join Operation\n\n## Clustering Data\n","source":"_posts/2020-01-05-sql-performance-explained-notes.md","raw":"---\ntitle: \"SQL Performance Explained\"\ndate: 2020-01-05\ntags: [\"NOTES\"]\nlabel: \"#book\"\n---\n\n> The notes of mine after read SQL Performance Explained Ebook (boring, but helpful).\n\n## Anatomy of an Index\n\nC s d liu s dng 2 loi cu trc  lu tr index. **B-Tree** v **Doubly Linked List**. V vy cch s dng 2 loi cu trc ny s gii thch cho phn ln cc c tnh ca SQL.\n\n### Doubly Linked List\n\n1. Mi mt node (node cha index) s l mt node trong 1 **Doubly Linked List**, v vy n s c lin kt ti n 2 node ln cn (mt trc v mt sau). Khi ta mun chn thm 1 node mi vo dslk i ny. Ta s tm v tr 2 node cn chn node mi vo gia chng, n gin ch thay i con tr ca 2 node . V th v tr vt l ca node mi khng quan trng. Li ch ca vic ny l gip vic chn thm d liu khng tn qu nhiu cng sc, ch thay i vi con tr.\n\n2. Mi **leaf node** c lu ch trong 1 block/page. Mi block s thn l 1 vi KB, csdl s c gng lu nhiu node (node cha index) nht c th trong mi block/page. Vy csdl s dng dsdl i  qun l trong 2 cp (Dng trong cc node thuc 1 block/page v dng gia cc blog vi nhau). Hiu n gin nh ta chia Vit Nam thnh 63 block ng vi 63 tnh thnh. Mi khi ta mun tm 1 tnh no  th tm trong sdl i ca 63 tnh. Khi  tm thy tnh cn tm ta mun tm n huyn (cc huyn trong tnh  cng dng dslk i  kt ni). Nhn hnh di y.\n\n![2 level doubly linked list](/../images/leaf-node.png)\n\n### The Search Tree (B-Tree)\n\n1. Dslk i gip thc hin nhanh cc thao tc chn, xo node, tuy nhin vy cn tm kim th sao. Nh li cu trc dslk th vic tm kim l tuyn tnh, v vy chng ta cn mt cu trc d liu b sung  gip csdl bit c i tng cn tm ang nm trong block/page no 1 cch nhanh chng. V cu trc d liu c chn l B-Tree. Nhn hnh di y:\n\n![b-tree](/../images/b-tree-sql.png)\n\n2. Nh hnh trn. Dslk i gip sp xp cc node v cc block/page. Root v **branch node** gip y nhanh qu trnh tm kim 1 block/page cn thit.\n\n3. L do B-Tree c la chn v s dng rng ri l v c tnh cn bng ca cy.  cao ca cy l khng i t root n bt k node l no. Tnh tng trng chiu cao ca cy theo Logarit khi tng node l dn n 1 cy bc 4, 5 c th cha hng triu node v trong thc t gn nh khng c trng hp no c  su ln n 6.\n\n## The Where Clause\n\n### Concatenated Indexes\n\n1. Cc h qun tr c s d liu hin nay s nh index cho kho chnh mt cch t ng.\n\n2. **Concatenated Indexes**: Index c to bng nhiu ct.\n\n3. Mt index c to t 2 ct v d **col-1** v **col-2** th trong 1 cu truy vn where dng vi 2 ct trn, index s hot ng khng khc g so vi index mt ct c. Tuy nhin th t 2 ct trong cu lnh to index s rt quan trng.\n\ne.g:\n\n```sql\nCREATE UNIQUE INDEX employee_pk\n  ON employees (employee_id, subsidiary_id);\n```\n\nKhi ny nu chng ta dng truy vn sau:\n\n```sql\nSELECT first_name, last_name\n  FROM employees\n  WHERE subsidiary_id = 20;\n```\n\nIndex s to bn trn v dng v csdl s full scan ton b bng employees.\n\n> Ct u tin s l tiu ch chnh  xc nh record cn tm, ch s dng ct th 2 khi m c nhiu hn 1 record p ng c tiu ch v ct u tin. V vy 1 truy vn vi ct th 2 s l v ngha.\n\n![2-col](/../images/2-col.png)\n\nTrong hnh trn ta c th thy, B-Tree c sp xp theo ct u tin, v ta ch s dng ct th 2 khi c nhiu hn 1 record p ng c iu kin vi ct u tin. V d nh record c id = 123, B-Tree s dn chng ta ti block cha id ny,  y v c nhiu hn 1 record c id = 123. N mi da vo ct th 2  ly record cn tm. Vy nu ta query vi iu kin where ch c ct th 2 th r rng l hon ton v ngha.\n\n4. Bn thn B-Tree trong trng hp ny cng ch lu ct th 2  node l m thi, nhng node trung gian khng c thng tin ca ct 2.\n\n> iu quan trng nht khi to mt index gm nhiu ct l xc nh xem nn chn ct no lm ct u tin trong index.\n\n### Function-base index\n\nTrong trng hp  nh index cho ct **last_name**, v khng kim sot c d liu ca ngi dng nhp v d liu trong csdl, ch hoa v ch thng trong trng hp ny khng phn bit. Vy ta nn lm g?\n\n```sql\nSELECT first_name, last_name, phone_number\n  FROM employees\n  WHERE UPPER(last_name) = UPPER('winand');\n```\n\nTm cc record c last_name = 'winand', trc khi tm kim th s dng hm UPPER  covert d liu sang ch hoa khi so khp. Nh iu kin bn trn, chng ta  nh index cho field **last_name** tuy nhin trong trng hp ny index s khng cn hot ng, thay vo  l 1 full scan ton b bng.\n\nM tut:\n\n```sql\nSELECT first_name, last_name, phone_number\n  FROM employees\n  WHERE BLACKBOX(...) = 'WINAND';\n```\n\nTrong  thay **BLACKBOX** bng mt function bt k, ng vi vic index khng cn hot ng.\n\nGii php: nh index lun gi tr thc s s dng khi tm kim,  y l last_name di dng vit hoa.\n\n```sql\nCREATE INDEX emp_up_name\n  ON employees (UPPER(last_name));\n```\n\n> Ta gi ch mc c to trn l function-based index (FBI), ch mc da trn function.\n\nThay v copy lun d liu ct c nh vo cy index. Mt function-based index s apply function vo d liu trc khi ghi vo cy index. Vy trong v d trn, cy index s cha ton b last_name di dng ch hoa.\n\n> Mt s ORM dng upper/lower 1 cch ngm v mc nh, ch khng cn dev phi trc tip thc hin, v d nh Hibernate s t ng thc hin function-based index vi lower ca ct cn nh.\n\nTrn l kin thc SQL, vi cc h qun tr c s d liu trong thc t, cch thc hin khng phi lc no cng nh vy.\n\n### User-Defined Functions\n\nKhng phi function no cng c th dng cho function-based index.\n\nCh nhng function l **deterministic** mi c th dng trong function-based index.\n\n> deterministic: nhng function tr v cng mt kt qu khi nhn tham s ging nhau.\n\n```sql\nCREATE FUNCTION get_age(date_of_birth DATE)\nRETURN NUMBER\nAS\nBEGIN\n RETURN\n TRUNC(MONTHS_BETWEEN(SYSDATE, date_of_birth)/12);\nEND;\n```\n\nKhng th dng **get_age** cho function-based index. V v d ti sinh ngy 30/08/1995. ng vi mi thi im khc nhau output ca hm ny s khc nhau vi cng mt i s truyn vo l ngy sinh ca ti. Vy nn n khng dng  function-based index c.\n\n> Cc function khc khng th dng cho index l function random hoc function da trn bin mi trng.\n\nNotes: Gi s chng ta nh index cho ct **last_name** ri nh tip cho **UPPER(last_name)**, vi mi ln update i tng c trng last_name, ng ngha chng ta phi update cho 2 index. ng vi 2 index  nh, v vy khng nn nh index qu nhiu, nht l vi function-based index.\n\n### Parameterized Queries\n\n> Bind parameters/dynamic parameters/ bind variables l mt cch truyn tham s vo cu query gin tip bng cc k hiu nh **?**, **:name**, **@name**.\n\n> Bind variables are the best way to prevent SQL injection.\n\n> Cc h qun tr csdl s cache li cc d liu ng truy cp y ht nhau. Khi ta thay i tham s truyn vo h c s d liu s query mi v khng cn dng cache.\n\n> Not using bind parameters is like recompiling a program every time.\n\n### Searching for Ranges\n\n> Ri do hiu sut ln nht vi INDEX RANGE SCAN l qu trnh duyt qua nt l.\n\n```sql\nSELECT first_name, last_name, date_of_birth\n  FROM employees\n  WHERE date_of_birth >= TO_DATE(?, 'YYYY-MM-DD')\n  AND date_of_birth <= TO_DATE(?, 'YYYY-MM-DD')\n  AND subsidiary_id = ?\n```\n\nOk, gi chng ta c mt cu truy vn nh trn, tm tt c nhn vin c subsidiary_id = 27 v ngy sinh nm trong khong 1/1/1971 v 9/1/1971.\n\nChng ta s nh index cho 2 ct trn, nh nh bn trn  ghi. Tuy nhin **th t nh index** nh no?\n\n**Trng hp xp date_or_birth trc**:\n\n![date- first](/../images/date-first.png)\n\n**Trng hp xp subsidiary_id trc**:\n\n![sub- first](/../images/sub-first.png)\n\n**Ti sao trng hp cho subsidiary_id u tin trong index li em li performance tt hn?**\n\nL gii: khi dng range first, kiu g cng phi duyt ht range  thi, record no trong range  l s c duyt qua ri so khp vi iu kin so bng th hai.\n\nKhi dng trng so bng u tin, ta lm gim phm v s record cn qut qua (theo quy tc ca B-Tree).\n\n> Rule of thumb: index for equality firstthen for ranges.\n\n### Indexing LIKE Filters\n\nVi cc query vi **LIKE**, chng ta vn c th nh index bnh thng ln trng c truy vn. Tuy nhin trong mt s trng hp chng ta s gp vn  v d nh:\n\nDng k t **%** trong t cn tm.\n\n```sql\nSELECT first_name, last_name, date_of_birth\n  FROM employees\n  WHERE UPPER(last_name) LIKE 'WINND'\n```\n\nnh index trn last_name v ngon.\n\n```sql\nSELECT first_name, last_name, date_of_birth\n  FROM employees\n  WHERE UPPER(last_name) LIKE 'WIN%D'\n```\n\nK t **%** xut hin v khng ngon na ri. V lc ny, **index** ch s dng phn trc **%**  tnh khong range cn qut, cn phn ng sau **%** ch dng nhim v so khp.\n\nTc l phi qut qua bao nhiu phn t s hon ton do phn u tin quyt nh. T c ta c 2 nh ngha tc gi nu ra:\n\n1. **access predicate**: phn u\n2. **filter predicate**: phn cn li\n\nV d hnh di y:\n\n![like-query](/../images/like-query.png)\n\nKhi thay cm t ng trc **%** t WI -> WIN -> WINA th scan range  thay i t:\n\n18 -> 2 -> 1 (trong c s d liu mu).\n\n### Index Merge\n\n> One index scan is faster than two.\n\nLiu nn to mi index cho mt column, hay to mt index cho tt c column, trng hp no hiu qu hn? Cu tr li ca tc gi l nhiu ct cho mt index s hiu qu hn trong truy vn where.\n\nTi sao li nh vy?\n\nQuay tr li nh ngha, chng ta  c c rng index dng B-Tree kt hp vi dslk i  cover cc trng hp.\n\nVy gi s, ta nh index ln 2 column (last_name v date_of_bird) theo ng th t sp xp. Khi ny h qun tr csdl s nh sp khong theo last_name, tc l node l s bt u ti last_name c k t nh nht (v d l A) v node l cui cng s l k t ln nht (v d l Z). Khi ny, trng th 2 trong index ch dng  so khp khi ta c 2 last_name bng nhau m thi.\n\n\nVy nu ta nh 2 index ring bit cho last_name v date_of_bird th sao? Lc ny vi mt cu truy vn di y:\n\n```sql\nSELECT first_name, last_name, date_of_birth\n  FROM employees\n  WHERE UPPER(last_name) < ?\n  AND date_of_birth < ?\n```\n\nh qun tr csdl s phi duyt qua 2 cy index (1 cy ng vi index cho last_name v cy cn li ng vi index cho date_of_birth). Sau  combine kt qu ca 2 ln duyt  trn li.\n\nS tn resource hn rt nhiu so vi nh 1 index cho last_name + date_of_birth.\n\n> C mt loi index gip gii quyt bi ton trn gi l bitmap index, tuy nhin bitmap index gp vn  ln trong vic ghi ng thi, v th n khng th s dng trong cc csdl thanh ton online.\n\n### Partial Indexes\n\nnh ch mc cho 1 nhm phn t thuc 1 bng.\n\n```sql\nCREATE INDEX messages_todo\n  ON messages (receiver)\n  WHERE processed = 'N'\n```\n\nnh index cho cc row thuc bng messages m c column processed c gi tr bng N.\n\nVy ta dng c index ny khi no. Cu tr li l chng ta c th dng mi lc khi query vi mnh  where.\n\n## Performance and Scalability\n\n## The Join Operation\n\n## Clustering Data\n","slug":"2020-01-05-sql-performance-explained-notes","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbe003lp3m2fx8adqn7","content":"<blockquote>\n<p>The notes of mine after read SQL Performance Explained Ebook (boring, but helpful).</p>\n</blockquote>\n<h2 id=\"Anatomy-of-an-Index\"><a href=\"#Anatomy-of-an-Index\" class=\"headerlink\" title=\"Anatomy of an Index\"></a>Anatomy of an Index</h2><p>C s d liu s dng 2 loi cu trc  lu tr index. <strong>B-Tree</strong> v <strong>Doubly Linked List</strong>. V vy cch s dng 2 loi cu trc ny s gii thch cho phn ln cc c tnh ca SQL.</p>\n<h3 id=\"Doubly-Linked-List\"><a href=\"#Doubly-Linked-List\" class=\"headerlink\" title=\"Doubly Linked List\"></a>Doubly Linked List</h3><ol>\n<li><p>Mi mt node (node cha index) s l mt node trong 1 <strong>Doubly Linked List</strong>, v vy n s c lin kt ti n 2 node ln cn (mt trc v mt sau). Khi ta mun chn thm 1 node mi vo dslk i ny. Ta s tm v tr 2 node cn chn node mi vo gia chng, n gin ch thay i con tr ca 2 node . V th v tr vt l ca node mi khng quan trng. Li ch ca vic ny l gip vic chn thm d liu khng tn qu nhiu cng sc, ch thay i vi con tr.</p>\n</li>\n<li><p>Mi <strong>leaf node</strong> c lu ch trong 1 block/page. Mi block s thn l 1 vi KB, csdl s c gng lu nhiu node (node cha index) nht c th trong mi block/page. Vy csdl s dng dsdl i  qun l trong 2 cp (Dng trong cc node thuc 1 block/page v dng gia cc blog vi nhau). Hiu n gin nh ta chia Vit Nam thnh 63 block ng vi 63 tnh thnh. Mi khi ta mun tm 1 tnh no  th tm trong sdl i ca 63 tnh. Khi  tm thy tnh cn tm ta mun tm n huyn (cc huyn trong tnh  cng dng dslk i  kt ni). Nhn hnh di y.</p>\n</li>\n</ol>\n<p><img src=\"/../images/leaf-node.png\" alt=\"2 level doubly linked list\"></p>\n<h3 id=\"The-Search-Tree-B-Tree\"><a href=\"#The-Search-Tree-B-Tree\" class=\"headerlink\" title=\"The Search Tree (B-Tree)\"></a>The Search Tree (B-Tree)</h3><ol>\n<li>Dslk i gip thc hin nhanh cc thao tc chn, xo node, tuy nhin vy cn tm kim th sao. Nh li cu trc dslk th vic tm kim l tuyn tnh, v vy chng ta cn mt cu trc d liu b sung  gip csdl bit c i tng cn tm ang nm trong block/page no 1 cch nhanh chng. V cu trc d liu c chn l B-Tree. Nhn hnh di y:</li>\n</ol>\n<p><img src=\"/../images/b-tree-sql.png\" alt=\"b-tree\"></p>\n<ol start=\"2\">\n<li><p>Nh hnh trn. Dslk i gip sp xp cc node v cc block/page. Root v <strong>branch node</strong> gip y nhanh qu trnh tm kim 1 block/page cn thit.</p>\n</li>\n<li><p>L do B-Tree c la chn v s dng rng ri l v c tnh cn bng ca cy.  cao ca cy l khng i t root n bt k node l no. Tnh tng trng chiu cao ca cy theo Logarit khi tng node l dn n 1 cy bc 4, 5 c th cha hng triu node v trong thc t gn nh khng c trng hp no c  su ln n 6.</p>\n</li>\n</ol>\n<h2 id=\"The-Where-Clause\"><a href=\"#The-Where-Clause\" class=\"headerlink\" title=\"The Where Clause\"></a>The Where Clause</h2><h3 id=\"Concatenated-Indexes\"><a href=\"#Concatenated-Indexes\" class=\"headerlink\" title=\"Concatenated Indexes\"></a>Concatenated Indexes</h3><ol>\n<li><p>Cc h qun tr c s d liu hin nay s nh index cho kho chnh mt cch t ng.</p>\n</li>\n<li><p><strong>Concatenated Indexes</strong>: Index c to bng nhiu ct.</p>\n</li>\n<li><p>Mt index c to t 2 ct v d <strong>col-1</strong> v <strong>col-2</strong> th trong 1 cu truy vn where dng vi 2 ct trn, index s hot ng khng khc g so vi index mt ct c. Tuy nhin th t 2 ct trong cu lnh to index s rt quan trng.</p>\n</li>\n</ol>\n<p>e.g:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">INDEX</span> employee_pk</span><br><span class=\"line\">  <span class=\"keyword\">ON</span> employees (employee_id, subsidiary_id);</span><br></pre></td></tr></table></figure>\n\n<p>Khi ny nu chng ta dng truy vn sau:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> subsidiary_id = <span class=\"number\">20</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Index s to bn trn v dng v csdl s full scan ton b bng employees.</p>\n<blockquote>\n<p>Ct u tin s l tiu ch chnh  xc nh record cn tm, ch s dng ct th 2 khi m c nhiu hn 1 record p ng c tiu ch v ct u tin. V vy 1 truy vn vi ct th 2 s l v ngha.</p>\n</blockquote>\n<p><img src=\"/../images/2-col.png\" alt=\"2-col\"></p>\n<p>Trong hnh trn ta c th thy, B-Tree c sp xp theo ct u tin, v ta ch s dng ct th 2 khi c nhiu hn 1 record p ng c iu kin vi ct u tin. V d nh record c id = 123, B-Tree s dn chng ta ti block cha id ny,  y v c nhiu hn 1 record c id = 123. N mi da vo ct th 2  ly record cn tm. Vy nu ta query vi iu kin where ch c ct th 2 th r rng l hon ton v ngha.</p>\n<ol start=\"4\">\n<li>Bn thn B-Tree trong trng hp ny cng ch lu ct th 2  node l m thi, nhng node trung gian khng c thng tin ca ct 2.</li>\n</ol>\n<blockquote>\n<p>iu quan trng nht khi to mt index gm nhiu ct l xc nh xem nn chn ct no lm ct u tin trong index.</p>\n</blockquote>\n<h3 id=\"Function-base-index\"><a href=\"#Function-base-index\" class=\"headerlink\" title=\"Function-base index\"></a>Function-base index</h3><p>Trong trng hp  nh index cho ct <strong>last_name</strong>, v khng kim sot c d liu ca ngi dng nhp v d liu trong csdl, ch hoa v ch thng trong trng hp ny khng phn bit. Vy ta nn lm g?</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, phone_number</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(last_name) = <span class=\"keyword\">UPPER</span>(<span class=\"string\">'winand'</span>);</span><br></pre></td></tr></table></figure>\n\n<p>Tm cc record c last_name = winand, trc khi tm kim th s dng hm UPPER  covert d liu sang ch hoa khi so khp. Nh iu kin bn trn, chng ta  nh index cho field <strong>last_name</strong> tuy nhin trong trng hp ny index s khng cn hot ng, thay vo  l 1 full scan ton b bng.</p>\n<p>M tut:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, phone_number</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> BLACKBOX(...) = <span class=\"string\">'WINAND'</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Trong  thay <strong>BLACKBOX</strong> bng mt function bt k, ng vi vic index khng cn hot ng.</p>\n<p>Gii php: nh index lun gi tr thc s s dng khi tm kim,  y l last_name di dng vit hoa.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">INDEX</span> emp_up_name</span><br><span class=\"line\">  <span class=\"keyword\">ON</span> employees (<span class=\"keyword\">UPPER</span>(last_name));</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Ta gi ch mc c to trn l function-based index (FBI), ch mc da trn function.</p>\n</blockquote>\n<p>Thay v copy lun d liu ct c nh vo cy index. Mt function-based index s apply function vo d liu trc khi ghi vo cy index. Vy trong v d trn, cy index s cha ton b last_name di dng ch hoa.</p>\n<blockquote>\n<p>Mt s ORM dng upper/lower 1 cch ngm v mc nh, ch khng cn dev phi trc tip thc hin, v d nh Hibernate s t ng thc hin function-based index vi lower ca ct cn nh.</p>\n</blockquote>\n<p>Trn l kin thc SQL, vi cc h qun tr c s d liu trong thc t, cch thc hin khng phi lc no cng nh vy.</p>\n<h3 id=\"User-Defined-Functions\"><a href=\"#User-Defined-Functions\" class=\"headerlink\" title=\"User-Defined Functions\"></a>User-Defined Functions</h3><p>Khng phi function no cng c th dng cho function-based index.</p>\n<p>Ch nhng function l <strong>deterministic</strong> mi c th dng trong function-based index.</p>\n<blockquote>\n<p>deterministic: nhng function tr v cng mt kt qu khi nhn tham s ging nhau.</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">FUNCTION</span> get_age(date_of_birth <span class=\"built_in\">DATE</span>)</span><br><span class=\"line\"><span class=\"keyword\">RETURN</span> <span class=\"built_in\">NUMBER</span></span><br><span class=\"line\"><span class=\"keyword\">AS</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\"> <span class=\"keyword\">RETURN</span></span><br><span class=\"line\"> TRUNC(MONTHS_BETWEEN(<span class=\"keyword\">SYSDATE</span>, date_of_birth)/<span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Khng th dng <strong>get_age</strong> cho function-based index. V v d ti sinh ngy 30/08/1995. ng vi mi thi im khc nhau output ca hm ny s khc nhau vi cng mt i s truyn vo l ngy sinh ca ti. Vy nn n khng dng  function-based index c.</p>\n<blockquote>\n<p>Cc function khc khng th dng cho index l function random hoc function da trn bin mi trng.</p>\n</blockquote>\n<p>Notes: Gi s chng ta nh index cho ct <strong>last_name</strong> ri nh tip cho <strong>UPPER(last_name)</strong>, vi mi ln update i tng c trng last_name, ng ngha chng ta phi update cho 2 index. ng vi 2 index  nh, v vy khng nn nh index qu nhiu, nht l vi function-based index.</p>\n<h3 id=\"Parameterized-Queries\"><a href=\"#Parameterized-Queries\" class=\"headerlink\" title=\"Parameterized Queries\"></a>Parameterized Queries</h3><blockquote>\n<p>Bind parameters/dynamic parameters/ bind variables l mt cch truyn tham s vo cu query gin tip bng cc k hiu nh <strong>?</strong>, <strong>:name</strong>, <strong>@name</strong>.</p>\n</blockquote>\n<blockquote>\n<p>Bind variables are the best way to prevent SQL injection.</p>\n</blockquote>\n<blockquote>\n<p>Cc h qun tr csdl s cache li cc d liu ng truy cp y ht nhau. Khi ta thay i tham s truyn vo h c s d liu s query mi v khng cn dng cache.</p>\n</blockquote>\n<blockquote>\n<p>Not using bind parameters is like recompiling a program every time.</p>\n</blockquote>\n<h3 id=\"Searching-for-Ranges\"><a href=\"#Searching-for-Ranges\" class=\"headerlink\" title=\"Searching for Ranges\"></a>Searching for Ranges</h3><blockquote>\n<p>Ri do hiu sut ln nht vi INDEX RANGE SCAN l qu trnh duyt qua nt l.</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, date_of_birth</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> date_of_birth &gt;= <span class=\"keyword\">TO_DATE</span>(?, <span class=\"string\">'YYYY-MM-DD'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">AND</span> date_of_birth &lt;= <span class=\"keyword\">TO_DATE</span>(?, <span class=\"string\">'YYYY-MM-DD'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">AND</span> subsidiary_id = ?</span><br></pre></td></tr></table></figure>\n\n<p>Ok, gi chng ta c mt cu truy vn nh trn, tm tt c nhn vin c subsidiary_id = 27 v ngy sinh nm trong khong 1/1/1971 v 9/1/1971.</p>\n<p>Chng ta s nh index cho 2 ct trn, nh nh bn trn  ghi. Tuy nhin <strong>th t nh index</strong> nh no?</p>\n<p><strong>Trng hp xp date_or_birth trc</strong>:</p>\n<p><img src=\"/../images/date-first.png\" alt=\"date- first\"></p>\n<p><strong>Trng hp xp subsidiary_id trc</strong>:</p>\n<p><img src=\"/../images/sub-first.png\" alt=\"sub- first\"></p>\n<p><strong>Ti sao trng hp cho subsidiary_id u tin trong index li em li performance tt hn?</strong></p>\n<p>L gii: khi dng range first, kiu g cng phi duyt ht range  thi, record no trong range  l s c duyt qua ri so khp vi iu kin so bng th hai.</p>\n<p>Khi dng trng so bng u tin, ta lm gim phm v s record cn qut qua (theo quy tc ca B-Tree).</p>\n<blockquote>\n<p>Rule of thumb: index for equality firstthen for ranges.</p>\n</blockquote>\n<h3 id=\"Indexing-LIKE-Filters\"><a href=\"#Indexing-LIKE-Filters\" class=\"headerlink\" title=\"Indexing LIKE Filters\"></a>Indexing LIKE Filters</h3><p>Vi cc query vi <strong>LIKE</strong>, chng ta vn c th nh index bnh thng ln trng c truy vn. Tuy nhin trong mt s trng hp chng ta s gp vn  v d nh:</p>\n<p>Dng k t <strong>%</strong> trong t cn tm.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, date_of_birth</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(last_name) <span class=\"keyword\">LIKE</span> <span class=\"string\">'WINND'</span></span><br></pre></td></tr></table></figure>\n\n<p>nh index trn last_name v ngon.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, date_of_birth</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(last_name) <span class=\"keyword\">LIKE</span> <span class=\"string\">'WIN%D'</span></span><br></pre></td></tr></table></figure>\n\n<p>K t <strong>%</strong> xut hin v khng ngon na ri. V lc ny, <strong>index</strong> ch s dng phn trc <strong>%</strong>  tnh khong range cn qut, cn phn ng sau <strong>%</strong> ch dng nhim v so khp.</p>\n<p>Tc l phi qut qua bao nhiu phn t s hon ton do phn u tin quyt nh. T c ta c 2 nh ngha tc gi nu ra:</p>\n<ol>\n<li><strong>access predicate</strong>: phn u</li>\n<li><strong>filter predicate</strong>: phn cn li</li>\n</ol>\n<p>V d hnh di y:</p>\n<p><img src=\"/../images/like-query.png\" alt=\"like-query\"></p>\n<p>Khi thay cm t ng trc <strong>%</strong> t WI -&gt; WIN -&gt; WINA th scan range  thay i t:</p>\n<p>18 -&gt; 2 -&gt; 1 (trong c s d liu mu).</p>\n<h3 id=\"Index-Merge\"><a href=\"#Index-Merge\" class=\"headerlink\" title=\"Index Merge\"></a>Index Merge</h3><blockquote>\n<p>One index scan is faster than two.</p>\n</blockquote>\n<p>Liu nn to mi index cho mt column, hay to mt index cho tt c column, trng hp no hiu qu hn? Cu tr li ca tc gi l nhiu ct cho mt index s hiu qu hn trong truy vn where.</p>\n<p>Ti sao li nh vy?</p>\n<p>Quay tr li nh ngha, chng ta  c c rng index dng B-Tree kt hp vi dslk i  cover cc trng hp.</p>\n<p>Vy gi s, ta nh index ln 2 column (last_name v date_of_bird) theo ng th t sp xp. Khi ny h qun tr csdl s nh sp khong theo last_name, tc l node l s bt u ti last_name c k t nh nht (v d l A) v node l cui cng s l k t ln nht (v d l Z). Khi ny, trng th 2 trong index ch dng  so khp khi ta c 2 last_name bng nhau m thi.</p>\n<p>Vy nu ta nh 2 index ring bit cho last_name v date_of_bird th sao? Lc ny vi mt cu truy vn di y:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, date_of_birth</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(last_name) &lt; ?</span><br><span class=\"line\">  <span class=\"keyword\">AND</span> date_of_birth &lt; ?</span><br></pre></td></tr></table></figure>\n\n<p>h qun tr csdl s phi duyt qua 2 cy index (1 cy ng vi index cho last_name v cy cn li ng vi index cho date_of_birth). Sau  combine kt qu ca 2 ln duyt  trn li.</p>\n<p>S tn resource hn rt nhiu so vi nh 1 index cho last_name + date_of_birth.</p>\n<blockquote>\n<p>C mt loi index gip gii quyt bi ton trn gi l bitmap index, tuy nhin bitmap index gp vn  ln trong vic ghi ng thi, v th n khng th s dng trong cc csdl thanh ton online.</p>\n</blockquote>\n<h3 id=\"Partial-Indexes\"><a href=\"#Partial-Indexes\" class=\"headerlink\" title=\"Partial Indexes\"></a>Partial Indexes</h3><p>nh ch mc cho 1 nhm phn t thuc 1 bng.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">INDEX</span> messages_todo</span><br><span class=\"line\">  <span class=\"keyword\">ON</span> messages (receiver)</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> processed = <span class=\"string\">'N'</span></span><br></pre></td></tr></table></figure>\n\n<p>nh index cho cc row thuc bng messages m c column processed c gi tr bng N.</p>\n<p>Vy ta dng c index ny khi no. Cu tr li l chng ta c th dng mi lc khi query vi mnh  where.</p>\n<h2 id=\"Performance-and-Scalability\"><a href=\"#Performance-and-Scalability\" class=\"headerlink\" title=\"Performance and Scalability\"></a>Performance and Scalability</h2><h2 id=\"The-Join-Operation\"><a href=\"#The-Join-Operation\" class=\"headerlink\" title=\"The Join Operation\"></a>The Join Operation</h2><h2 id=\"Clustering-Data\"><a href=\"#Clustering-Data\" class=\"headerlink\" title=\"Clustering Data\"></a>Clustering Data</h2>","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>The notes of mine after read SQL Performance Explained Ebook (boring, but helpful).</p>\n</blockquote>\n<h2 id=\"Anatomy-of-an-Index\"><a href=\"#Anatomy-of-an-Index\" class=\"headerlink\" title=\"Anatomy of an Index\"></a>Anatomy of an Index</h2><p>C s d liu s dng 2 loi cu trc  lu tr index. <strong>B-Tree</strong> v <strong>Doubly Linked List</strong>. V vy cch s dng 2 loi cu trc ny s gii thch cho phn ln cc c tnh ca SQL.</p>\n<h3 id=\"Doubly-Linked-List\"><a href=\"#Doubly-Linked-List\" class=\"headerlink\" title=\"Doubly Linked List\"></a>Doubly Linked List</h3><ol>\n<li><p>Mi mt node (node cha index) s l mt node trong 1 <strong>Doubly Linked List</strong>, v vy n s c lin kt ti n 2 node ln cn (mt trc v mt sau). Khi ta mun chn thm 1 node mi vo dslk i ny. Ta s tm v tr 2 node cn chn node mi vo gia chng, n gin ch thay i con tr ca 2 node . V th v tr vt l ca node mi khng quan trng. Li ch ca vic ny l gip vic chn thm d liu khng tn qu nhiu cng sc, ch thay i vi con tr.</p>\n</li>\n<li><p>Mi <strong>leaf node</strong> c lu ch trong 1 block/page. Mi block s thn l 1 vi KB, csdl s c gng lu nhiu node (node cha index) nht c th trong mi block/page. Vy csdl s dng dsdl i  qun l trong 2 cp (Dng trong cc node thuc 1 block/page v dng gia cc blog vi nhau). Hiu n gin nh ta chia Vit Nam thnh 63 block ng vi 63 tnh thnh. Mi khi ta mun tm 1 tnh no  th tm trong sdl i ca 63 tnh. Khi  tm thy tnh cn tm ta mun tm n huyn (cc huyn trong tnh  cng dng dslk i  kt ni). Nhn hnh di y.</p>\n</li>\n</ol>\n<p><img src=\"/../images/leaf-node.png\" alt=\"2 level doubly linked list\"></p>\n<h3 id=\"The-Search-Tree-B-Tree\"><a href=\"#The-Search-Tree-B-Tree\" class=\"headerlink\" title=\"The Search Tree (B-Tree)\"></a>The Search Tree (B-Tree)</h3><ol>\n<li>Dslk i gip thc hin nhanh cc thao tc chn, xo node, tuy nhin vy cn tm kim th sao. Nh li cu trc dslk th vic tm kim l tuyn tnh, v vy chng ta cn mt cu trc d liu b sung  gip csdl bit c i tng cn tm ang nm trong block/page no 1 cch nhanh chng. V cu trc d liu c chn l B-Tree. Nhn hnh di y:</li>\n</ol>\n<p><img src=\"/../images/b-tree-sql.png\" alt=\"b-tree\"></p>\n<ol start=\"2\">\n<li><p>Nh hnh trn. Dslk i gip sp xp cc node v cc block/page. Root v <strong>branch node</strong> gip y nhanh qu trnh tm kim 1 block/page cn thit.</p>\n</li>\n<li><p>L do B-Tree c la chn v s dng rng ri l v c tnh cn bng ca cy.  cao ca cy l khng i t root n bt k node l no. Tnh tng trng chiu cao ca cy theo Logarit khi tng node l dn n 1 cy bc 4, 5 c th cha hng triu node v trong thc t gn nh khng c trng hp no c  su ln n 6.</p>\n</li>\n</ol>\n<h2 id=\"The-Where-Clause\"><a href=\"#The-Where-Clause\" class=\"headerlink\" title=\"The Where Clause\"></a>The Where Clause</h2><h3 id=\"Concatenated-Indexes\"><a href=\"#Concatenated-Indexes\" class=\"headerlink\" title=\"Concatenated Indexes\"></a>Concatenated Indexes</h3><ol>\n<li><p>Cc h qun tr c s d liu hin nay s nh index cho kho chnh mt cch t ng.</p>\n</li>\n<li><p><strong>Concatenated Indexes</strong>: Index c to bng nhiu ct.</p>\n</li>\n<li><p>Mt index c to t 2 ct v d <strong>col-1</strong> v <strong>col-2</strong> th trong 1 cu truy vn where dng vi 2 ct trn, index s hot ng khng khc g so vi index mt ct c. Tuy nhin th t 2 ct trong cu lnh to index s rt quan trng.</p>\n</li>\n</ol>\n<p>e.g:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">INDEX</span> employee_pk</span><br><span class=\"line\">  <span class=\"keyword\">ON</span> employees (employee_id, subsidiary_id);</span><br></pre></td></tr></table></figure>\n\n<p>Khi ny nu chng ta dng truy vn sau:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> subsidiary_id = <span class=\"number\">20</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Index s to bn trn v dng v csdl s full scan ton b bng employees.</p>\n<blockquote>\n<p>Ct u tin s l tiu ch chnh  xc nh record cn tm, ch s dng ct th 2 khi m c nhiu hn 1 record p ng c tiu ch v ct u tin. V vy 1 truy vn vi ct th 2 s l v ngha.</p>\n</blockquote>\n<p><img src=\"/../images/2-col.png\" alt=\"2-col\"></p>\n<p>Trong hnh trn ta c th thy, B-Tree c sp xp theo ct u tin, v ta ch s dng ct th 2 khi c nhiu hn 1 record p ng c iu kin vi ct u tin. V d nh record c id = 123, B-Tree s dn chng ta ti block cha id ny,  y v c nhiu hn 1 record c id = 123. N mi da vo ct th 2  ly record cn tm. Vy nu ta query vi iu kin where ch c ct th 2 th r rng l hon ton v ngha.</p>\n<ol start=\"4\">\n<li>Bn thn B-Tree trong trng hp ny cng ch lu ct th 2  node l m thi, nhng node trung gian khng c thng tin ca ct 2.</li>\n</ol>\n<blockquote>\n<p>iu quan trng nht khi to mt index gm nhiu ct l xc nh xem nn chn ct no lm ct u tin trong index.</p>\n</blockquote>\n<h3 id=\"Function-base-index\"><a href=\"#Function-base-index\" class=\"headerlink\" title=\"Function-base index\"></a>Function-base index</h3><p>Trong trng hp  nh index cho ct <strong>last_name</strong>, v khng kim sot c d liu ca ngi dng nhp v d liu trong csdl, ch hoa v ch thng trong trng hp ny khng phn bit. Vy ta nn lm g?</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, phone_number</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(last_name) = <span class=\"keyword\">UPPER</span>(<span class=\"string\">'winand'</span>);</span><br></pre></td></tr></table></figure>\n\n<p>Tm cc record c last_name = winand, trc khi tm kim th s dng hm UPPER  covert d liu sang ch hoa khi so khp. Nh iu kin bn trn, chng ta  nh index cho field <strong>last_name</strong> tuy nhin trong trng hp ny index s khng cn hot ng, thay vo  l 1 full scan ton b bng.</p>\n<p>M tut:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, phone_number</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> BLACKBOX(...) = <span class=\"string\">'WINAND'</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Trong  thay <strong>BLACKBOX</strong> bng mt function bt k, ng vi vic index khng cn hot ng.</p>\n<p>Gii php: nh index lun gi tr thc s s dng khi tm kim,  y l last_name di dng vit hoa.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">INDEX</span> emp_up_name</span><br><span class=\"line\">  <span class=\"keyword\">ON</span> employees (<span class=\"keyword\">UPPER</span>(last_name));</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Ta gi ch mc c to trn l function-based index (FBI), ch mc da trn function.</p>\n</blockquote>\n<p>Thay v copy lun d liu ct c nh vo cy index. Mt function-based index s apply function vo d liu trc khi ghi vo cy index. Vy trong v d trn, cy index s cha ton b last_name di dng ch hoa.</p>\n<blockquote>\n<p>Mt s ORM dng upper/lower 1 cch ngm v mc nh, ch khng cn dev phi trc tip thc hin, v d nh Hibernate s t ng thc hin function-based index vi lower ca ct cn nh.</p>\n</blockquote>\n<p>Trn l kin thc SQL, vi cc h qun tr c s d liu trong thc t, cch thc hin khng phi lc no cng nh vy.</p>\n<h3 id=\"User-Defined-Functions\"><a href=\"#User-Defined-Functions\" class=\"headerlink\" title=\"User-Defined Functions\"></a>User-Defined Functions</h3><p>Khng phi function no cng c th dng cho function-based index.</p>\n<p>Ch nhng function l <strong>deterministic</strong> mi c th dng trong function-based index.</p>\n<blockquote>\n<p>deterministic: nhng function tr v cng mt kt qu khi nhn tham s ging nhau.</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">FUNCTION</span> get_age(date_of_birth <span class=\"built_in\">DATE</span>)</span><br><span class=\"line\"><span class=\"keyword\">RETURN</span> <span class=\"built_in\">NUMBER</span></span><br><span class=\"line\"><span class=\"keyword\">AS</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\"> <span class=\"keyword\">RETURN</span></span><br><span class=\"line\"> TRUNC(MONTHS_BETWEEN(<span class=\"keyword\">SYSDATE</span>, date_of_birth)/<span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br></pre></td></tr></table></figure>\n\n<p>Khng th dng <strong>get_age</strong> cho function-based index. V v d ti sinh ngy 30/08/1995. ng vi mi thi im khc nhau output ca hm ny s khc nhau vi cng mt i s truyn vo l ngy sinh ca ti. Vy nn n khng dng  function-based index c.</p>\n<blockquote>\n<p>Cc function khc khng th dng cho index l function random hoc function da trn bin mi trng.</p>\n</blockquote>\n<p>Notes: Gi s chng ta nh index cho ct <strong>last_name</strong> ri nh tip cho <strong>UPPER(last_name)</strong>, vi mi ln update i tng c trng last_name, ng ngha chng ta phi update cho 2 index. ng vi 2 index  nh, v vy khng nn nh index qu nhiu, nht l vi function-based index.</p>\n<h3 id=\"Parameterized-Queries\"><a href=\"#Parameterized-Queries\" class=\"headerlink\" title=\"Parameterized Queries\"></a>Parameterized Queries</h3><blockquote>\n<p>Bind parameters/dynamic parameters/ bind variables l mt cch truyn tham s vo cu query gin tip bng cc k hiu nh <strong>?</strong>, <strong>:name</strong>, <strong>@name</strong>.</p>\n</blockquote>\n<blockquote>\n<p>Bind variables are the best way to prevent SQL injection.</p>\n</blockquote>\n<blockquote>\n<p>Cc h qun tr csdl s cache li cc d liu ng truy cp y ht nhau. Khi ta thay i tham s truyn vo h c s d liu s query mi v khng cn dng cache.</p>\n</blockquote>\n<blockquote>\n<p>Not using bind parameters is like recompiling a program every time.</p>\n</blockquote>\n<h3 id=\"Searching-for-Ranges\"><a href=\"#Searching-for-Ranges\" class=\"headerlink\" title=\"Searching for Ranges\"></a>Searching for Ranges</h3><blockquote>\n<p>Ri do hiu sut ln nht vi INDEX RANGE SCAN l qu trnh duyt qua nt l.</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, date_of_birth</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> date_of_birth &gt;= <span class=\"keyword\">TO_DATE</span>(?, <span class=\"string\">'YYYY-MM-DD'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">AND</span> date_of_birth &lt;= <span class=\"keyword\">TO_DATE</span>(?, <span class=\"string\">'YYYY-MM-DD'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">AND</span> subsidiary_id = ?</span><br></pre></td></tr></table></figure>\n\n<p>Ok, gi chng ta c mt cu truy vn nh trn, tm tt c nhn vin c subsidiary_id = 27 v ngy sinh nm trong khong 1/1/1971 v 9/1/1971.</p>\n<p>Chng ta s nh index cho 2 ct trn, nh nh bn trn  ghi. Tuy nhin <strong>th t nh index</strong> nh no?</p>\n<p><strong>Trng hp xp date_or_birth trc</strong>:</p>\n<p><img src=\"/../images/date-first.png\" alt=\"date- first\"></p>\n<p><strong>Trng hp xp subsidiary_id trc</strong>:</p>\n<p><img src=\"/../images/sub-first.png\" alt=\"sub- first\"></p>\n<p><strong>Ti sao trng hp cho subsidiary_id u tin trong index li em li performance tt hn?</strong></p>\n<p>L gii: khi dng range first, kiu g cng phi duyt ht range  thi, record no trong range  l s c duyt qua ri so khp vi iu kin so bng th hai.</p>\n<p>Khi dng trng so bng u tin, ta lm gim phm v s record cn qut qua (theo quy tc ca B-Tree).</p>\n<blockquote>\n<p>Rule of thumb: index for equality firstthen for ranges.</p>\n</blockquote>\n<h3 id=\"Indexing-LIKE-Filters\"><a href=\"#Indexing-LIKE-Filters\" class=\"headerlink\" title=\"Indexing LIKE Filters\"></a>Indexing LIKE Filters</h3><p>Vi cc query vi <strong>LIKE</strong>, chng ta vn c th nh index bnh thng ln trng c truy vn. Tuy nhin trong mt s trng hp chng ta s gp vn  v d nh:</p>\n<p>Dng k t <strong>%</strong> trong t cn tm.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, date_of_birth</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(last_name) <span class=\"keyword\">LIKE</span> <span class=\"string\">'WINND'</span></span><br></pre></td></tr></table></figure>\n\n<p>nh index trn last_name v ngon.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, date_of_birth</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(last_name) <span class=\"keyword\">LIKE</span> <span class=\"string\">'WIN%D'</span></span><br></pre></td></tr></table></figure>\n\n<p>K t <strong>%</strong> xut hin v khng ngon na ri. V lc ny, <strong>index</strong> ch s dng phn trc <strong>%</strong>  tnh khong range cn qut, cn phn ng sau <strong>%</strong> ch dng nhim v so khp.</p>\n<p>Tc l phi qut qua bao nhiu phn t s hon ton do phn u tin quyt nh. T c ta c 2 nh ngha tc gi nu ra:</p>\n<ol>\n<li><strong>access predicate</strong>: phn u</li>\n<li><strong>filter predicate</strong>: phn cn li</li>\n</ol>\n<p>V d hnh di y:</p>\n<p><img src=\"/../images/like-query.png\" alt=\"like-query\"></p>\n<p>Khi thay cm t ng trc <strong>%</strong> t WI -&gt; WIN -&gt; WINA th scan range  thay i t:</p>\n<p>18 -&gt; 2 -&gt; 1 (trong c s d liu mu).</p>\n<h3 id=\"Index-Merge\"><a href=\"#Index-Merge\" class=\"headerlink\" title=\"Index Merge\"></a>Index Merge</h3><blockquote>\n<p>One index scan is faster than two.</p>\n</blockquote>\n<p>Liu nn to mi index cho mt column, hay to mt index cho tt c column, trng hp no hiu qu hn? Cu tr li ca tc gi l nhiu ct cho mt index s hiu qu hn trong truy vn where.</p>\n<p>Ti sao li nh vy?</p>\n<p>Quay tr li nh ngha, chng ta  c c rng index dng B-Tree kt hp vi dslk i  cover cc trng hp.</p>\n<p>Vy gi s, ta nh index ln 2 column (last_name v date_of_bird) theo ng th t sp xp. Khi ny h qun tr csdl s nh sp khong theo last_name, tc l node l s bt u ti last_name c k t nh nht (v d l A) v node l cui cng s l k t ln nht (v d l Z). Khi ny, trng th 2 trong index ch dng  so khp khi ta c 2 last_name bng nhau m thi.</p>\n<p>Vy nu ta nh 2 index ring bit cho last_name v date_of_bird th sao? Lc ny vi mt cu truy vn di y:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> first_name, last_name, date_of_birth</span><br><span class=\"line\">  <span class=\"keyword\">FROM</span> employees</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> <span class=\"keyword\">UPPER</span>(last_name) &lt; ?</span><br><span class=\"line\">  <span class=\"keyword\">AND</span> date_of_birth &lt; ?</span><br></pre></td></tr></table></figure>\n\n<p>h qun tr csdl s phi duyt qua 2 cy index (1 cy ng vi index cho last_name v cy cn li ng vi index cho date_of_birth). Sau  combine kt qu ca 2 ln duyt  trn li.</p>\n<p>S tn resource hn rt nhiu so vi nh 1 index cho last_name + date_of_birth.</p>\n<blockquote>\n<p>C mt loi index gip gii quyt bi ton trn gi l bitmap index, tuy nhin bitmap index gp vn  ln trong vic ghi ng thi, v th n khng th s dng trong cc csdl thanh ton online.</p>\n</blockquote>\n<h3 id=\"Partial-Indexes\"><a href=\"#Partial-Indexes\" class=\"headerlink\" title=\"Partial Indexes\"></a>Partial Indexes</h3><p>nh ch mc cho 1 nhm phn t thuc 1 bng.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">INDEX</span> messages_todo</span><br><span class=\"line\">  <span class=\"keyword\">ON</span> messages (receiver)</span><br><span class=\"line\">  <span class=\"keyword\">WHERE</span> processed = <span class=\"string\">'N'</span></span><br></pre></td></tr></table></figure>\n\n<p>nh index cho cc row thuc bng messages m c column processed c gi tr bng N.</p>\n<p>Vy ta dng c index ny khi no. Cu tr li l chng ta c th dng mi lc khi query vi mnh  where.</p>\n<h2 id=\"Performance-and-Scalability\"><a href=\"#Performance-and-Scalability\" class=\"headerlink\" title=\"Performance and Scalability\"></a>Performance and Scalability</h2><h2 id=\"The-Join-Operation\"><a href=\"#The-Join-Operation\" class=\"headerlink\" title=\"The Join Operation\"></a>The Join Operation</h2><h2 id=\"Clustering-Data\"><a href=\"#Clustering-Data\" class=\"headerlink\" title=\"Clustering Data\"></a>Clustering Data</h2>"},{"title":"ReactJS Short Note","date":"2020-01-07T17:00:00.000Z","label":"#note","_content":"\n> This is a short note from ReactJS docs.\n\n## Main Concepts\n\n### 1.JSX\n\nJSX l **syntax extension to JavaScript**\n\nL do cn s xut hin ca JSX l  React nhng logic vo giao din.\n\nNhng biu thc logic vo JSX thng qua cp ngoc **{}**:\n\n```jsx\nconst name = \"Meo\";\nconst element = <b>{name}</b>\n```\n\nChng ta cng c th nhng JSX vo mt **if** hay **for** trong javascript:\n\n```jsx\nfunction getGreeting(user) {\n  if (user) {\n    return <h1>Hello, {formatName(user)}!</h1>;\n  }\n\n  return <h1>Hello, Stranger.</h1>;\n}\n```\n\nNhng biu thc vo Attributes ca mt i tng:\n\n```jsx\nconst element = <img src={user.avatarUrl}></img>;\n```\n\nNote: Dng \"\" cho chui, dng {} cho biu thc logic, khng dng 2 th cng lc.\n\nJSX din t mt i tng:\n\nKhi babel bin dch, i tng trn s c call trong **React.createElement()**\n\n```jsx\nconst element = (\n  <h1 className=\"greeting\">\n    Hello, world!\n  </h1>\n);\n```\n\nSau bin dch s thnh:\n\n```jsx\nconst element = {\n  type: 'h1',\n  props: {\n    className: 'greeting',\n    children: 'Hello, world!'\n  }\n};\n```\n\n### 2.Render Element\n\nReact dng cc i tng ny  xy dng cy DOM.\n\nReact elements l immutable. Mt khi bn to mt element, bn khng th thay  thuc tnh hoc children ca n. Mt element React ging nh mt on trong 1 cun phim: N ch i din cho UI trong 1 thi im.\n\nDo vy, cch duy nht  cp nht giao din l to ra mt phn t mi thay th cho phn t c. V cch duy nht  to ra mt phn t React l dng **ReactDOM.render()**\n\n### 3.Component v Props\n\n**Function Component**:\n\n```jsx\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n```\n\nCh chp nhn 1 params props.\n\n**ES6 Class**:\n\n```jsx\nclass Welcome extends React.Component {\n  render() {\n    return <h1>Hello, {this.props.name}</h1>;\n  }\n}\n```\n\nKhi s dng Class s c mt s chc nng c b sung.\n\n>  React elements: l  th c bin dch qua babel  mc 2\n\nReact element c th i din cho DOM tag hoc user-defined components\n\n```jsx\nconst element = <div />;\n\nconst element = <Welcome name=\"Sara\" />;\n```\n\nReact khi gp cc element i din cho mt user-defined componts, n s pass jsx attributes vo component  di dng **MT OBJECT DUY NHT**,  l props.\n\n```jsx\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n\nconst element = <Welcome name=\"Sara\" />;\nReactDOM.render(\n  element,\n  document.getElementById('root')\n);\n```\n\nTrong v d trn, object duy nht l: **props = {name: \"Sara\"}**\n\n1. We call ReactDOM.render() with the `<Welcome name=\"Sara\" />` element.\n2. React calls the Welcome component with {name: 'Sara'} as the props.\n3. Our Welcome component returns a `<h1>Hello, Sara</h1>` element as the result.\n4. React DOM efficiently updates the DOM to match `<h1>Hello, Sara</h1>`.\n\n> Lun to mt component vi ch ci u vit hoa, react dng y  nhn din ch DOM tag v user-defined components\n\n### 4.State v vng i\n\nNi duy nht ta c th set state l trong constructor.  cc khu vc khc, phi call hm setState  thay i gi tr state.\n\nCp nht state l bt ng b.  khc phc, setState nhn tham s u tin l state c.\n\n```jsx\n// Correct\nthis.setState((state, props) => ({\n  counter: state.counter + props.increment\n}));\n```\n\n```jsx\nconstructor(props) {\n  super(props);\n\n  this.state = {\n    name: 'Chinh',\n    age: 25\n  }\n}\n```\n\nKhi gi:\n\n```jsx\nthis.setState({\n  name: 'Duy'\n})\n```\n\nname trong state s c replace v thay mi, cn age th gi nguyn => gi l merge vy thi\n\n## Advandced Guide\n\n## React Hooks\n\n## Original Link\n\n[1] [https://reactjs.org/docs](https://reactjs.org/docs)\n","source":"_posts/2020-01-08-reactjs-notes.md","raw":"---\ntitle: \"ReactJS Short Note\"\ndate: 2020-01-08\ntags: [\"NOTES\"]\nlabel: \"#note\"\n---\n\n> This is a short note from ReactJS docs.\n\n## Main Concepts\n\n### 1.JSX\n\nJSX l **syntax extension to JavaScript**\n\nL do cn s xut hin ca JSX l  React nhng logic vo giao din.\n\nNhng biu thc logic vo JSX thng qua cp ngoc **{}**:\n\n```jsx\nconst name = \"Meo\";\nconst element = <b>{name}</b>\n```\n\nChng ta cng c th nhng JSX vo mt **if** hay **for** trong javascript:\n\n```jsx\nfunction getGreeting(user) {\n  if (user) {\n    return <h1>Hello, {formatName(user)}!</h1>;\n  }\n\n  return <h1>Hello, Stranger.</h1>;\n}\n```\n\nNhng biu thc vo Attributes ca mt i tng:\n\n```jsx\nconst element = <img src={user.avatarUrl}></img>;\n```\n\nNote: Dng \"\" cho chui, dng {} cho biu thc logic, khng dng 2 th cng lc.\n\nJSX din t mt i tng:\n\nKhi babel bin dch, i tng trn s c call trong **React.createElement()**\n\n```jsx\nconst element = (\n  <h1 className=\"greeting\">\n    Hello, world!\n  </h1>\n);\n```\n\nSau bin dch s thnh:\n\n```jsx\nconst element = {\n  type: 'h1',\n  props: {\n    className: 'greeting',\n    children: 'Hello, world!'\n  }\n};\n```\n\n### 2.Render Element\n\nReact dng cc i tng ny  xy dng cy DOM.\n\nReact elements l immutable. Mt khi bn to mt element, bn khng th thay  thuc tnh hoc children ca n. Mt element React ging nh mt on trong 1 cun phim: N ch i din cho UI trong 1 thi im.\n\nDo vy, cch duy nht  cp nht giao din l to ra mt phn t mi thay th cho phn t c. V cch duy nht  to ra mt phn t React l dng **ReactDOM.render()**\n\n### 3.Component v Props\n\n**Function Component**:\n\n```jsx\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n```\n\nCh chp nhn 1 params props.\n\n**ES6 Class**:\n\n```jsx\nclass Welcome extends React.Component {\n  render() {\n    return <h1>Hello, {this.props.name}</h1>;\n  }\n}\n```\n\nKhi s dng Class s c mt s chc nng c b sung.\n\n>  React elements: l  th c bin dch qua babel  mc 2\n\nReact element c th i din cho DOM tag hoc user-defined components\n\n```jsx\nconst element = <div />;\n\nconst element = <Welcome name=\"Sara\" />;\n```\n\nReact khi gp cc element i din cho mt user-defined componts, n s pass jsx attributes vo component  di dng **MT OBJECT DUY NHT**,  l props.\n\n```jsx\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n\nconst element = <Welcome name=\"Sara\" />;\nReactDOM.render(\n  element,\n  document.getElementById('root')\n);\n```\n\nTrong v d trn, object duy nht l: **props = {name: \"Sara\"}**\n\n1. We call ReactDOM.render() with the `<Welcome name=\"Sara\" />` element.\n2. React calls the Welcome component with {name: 'Sara'} as the props.\n3. Our Welcome component returns a `<h1>Hello, Sara</h1>` element as the result.\n4. React DOM efficiently updates the DOM to match `<h1>Hello, Sara</h1>`.\n\n> Lun to mt component vi ch ci u vit hoa, react dng y  nhn din ch DOM tag v user-defined components\n\n### 4.State v vng i\n\nNi duy nht ta c th set state l trong constructor.  cc khu vc khc, phi call hm setState  thay i gi tr state.\n\nCp nht state l bt ng b.  khc phc, setState nhn tham s u tin l state c.\n\n```jsx\n// Correct\nthis.setState((state, props) => ({\n  counter: state.counter + props.increment\n}));\n```\n\n```jsx\nconstructor(props) {\n  super(props);\n\n  this.state = {\n    name: 'Chinh',\n    age: 25\n  }\n}\n```\n\nKhi gi:\n\n```jsx\nthis.setState({\n  name: 'Duy'\n})\n```\n\nname trong state s c replace v thay mi, cn age th gi nguyn => gi l merge vy thi\n\n## Advandced Guide\n\n## React Hooks\n\n## Original Link\n\n[1] [https://reactjs.org/docs](https://reactjs.org/docs)\n","slug":"2020-01-08-reactjs-notes","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbf003op3m2hhn13yvc","content":"<blockquote>\n<p>This is a short note from ReactJS docs.</p>\n</blockquote>\n<h2 id=\"Main-Concepts\"><a href=\"#Main-Concepts\" class=\"headerlink\" title=\"Main Concepts\"></a>Main Concepts</h2><h3 id=\"1-JSX\"><a href=\"#1-JSX\" class=\"headerlink\" title=\"1.JSX\"></a>1.JSX</h3><p>JSX l <strong>syntax extension to JavaScript</strong></p>\n<p>L do cn s xut hin ca JSX l  React nhng logic vo giao din.</p>\n<p>Nhng biu thc logic vo JSX thng qua cp ngoc <strong>{}</strong>:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> name = <span class=\"string\">\"Meo\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>&#123;name&#125;<span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>Chng ta cng c th nhng JSX vo mt <strong>if</strong> hay <strong>for</strong> trong javascript:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getGreeting</span>(<span class=\"params\">user</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (user) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, &#123;formatName(user)&#125;!<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, Stranger.<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Nhng biu thc vo Attributes ca mt i tng:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;user.avatarUrl&#125;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">img</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p>Note: Dng  cho chui, dng {} cho biu thc logic, khng dng 2 th cng lc.</p>\n<p>JSX din t mt i tng:</p>\n<p>Khi babel bin dch, i tng trn s c call trong <strong>React.createElement()</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> element = (</span><br><span class=\"line\">  &lt;h1 className=<span class=\"string\">\"greeting\"</span>&gt;</span><br><span class=\"line\">    Hello, world!</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">);</span></span><br></pre></td></tr></table></figure>\n\n<p>Sau bin dch s thnh:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> element = &#123;</span><br><span class=\"line\">  type: <span class=\"string\">'h1'</span>,</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    className: <span class=\"string\">'greeting'</span>,</span><br><span class=\"line\">    children: <span class=\"string\">'Hello, world!'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Render-Element\"><a href=\"#2-Render-Element\" class=\"headerlink\" title=\"2.Render Element\"></a>2.Render Element</h3><p>React dng cc i tng ny  xy dng cy DOM.</p>\n<p>React elements l immutable. Mt khi bn to mt element, bn khng th thay  thuc tnh hoc children ca n. Mt element React ging nh mt on trong 1 cun phim: N ch i din cho UI trong 1 thi im.</p>\n<p>Do vy, cch duy nht  cp nht giao din l to ra mt phn t mi thay th cho phn t c. V cch duy nht  to ra mt phn t React l dng <strong>ReactDOM.render()</strong></p>\n<h3 id=\"3-Component-va-Props\"><a href=\"#3-Component-va-Props\" class=\"headerlink\" title=\"3.Component v Props\"></a>3.Component v Props</h3><p><strong>Function Component</strong>:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Welcome</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Ch chp nhn 1 params props.</p>\n<p><strong>ES6 Class</strong>:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Welcome</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Khi s dng Class s c mt s chc nng c b sung.</p>\n<blockquote>\n<p> React elements: l  th c bin dch qua babel  mc 2</p>\n</blockquote>\n<p>React element c th i din cho DOM tag hoc user-defined components</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> /&gt;</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Welcome</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Sara\"</span> /&gt;</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p>React khi gp cc element i din cho mt user-defined componts, n s pass jsx attributes vo component  di dng <strong>MT OBJECT DUY NHT</strong>,  l props.</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Welcome</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Welcome</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Sara\"</span> /&gt;</span></span>;</span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  element,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'root'</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>Trong v d trn, object duy nht l: <strong>props = {name: Sara}</strong></p>\n<ol>\n<li>We call ReactDOM.render() with the <code>&lt;Welcome name=&quot;Sara&quot; /&gt;</code> element.</li>\n<li>React calls the Welcome component with {name: Sara} as the props.</li>\n<li>Our Welcome component returns a <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> element as the result.</li>\n<li>React DOM efficiently updates the DOM to match <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>.</li>\n</ol>\n<blockquote>\n<p>Lun to mt component vi ch ci u vit hoa, react dng y  nhn din ch DOM tag v user-defined components</p>\n</blockquote>\n<h3 id=\"4-State-va-vong-doi\"><a href=\"#4-State-va-vong-doi\" class=\"headerlink\" title=\"4.State v vng i\"></a>4.State v vng i</h3><p>Ni duy nht ta c th set state l trong constructor.  cc khu vc khc, phi call hm setState  thay i gi tr state.</p>\n<p>Cp nht state l bt ng b.  khc phc, setState nhn tham s u tin l state c.</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Correct</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.setState(<span class=\"function\">(<span class=\"params\">state, props</span>) =&gt;</span> (&#123;</span><br><span class=\"line\">  counter: state.counter + props.increment</span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>(props);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.state = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Chinh'</span>,</span><br><span class=\"line\">    age: <span class=\"number\">25</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Khi gi:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Duy'</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>name trong state s c replace v thay mi, cn age th gi nguyn =&gt; gi l merge vy thi</p>\n<h2 id=\"Advandced-Guide\"><a href=\"#Advandced-Guide\" class=\"headerlink\" title=\"Advandced Guide\"></a>Advandced Guide</h2><h2 id=\"React-Hooks\"><a href=\"#React-Hooks\" class=\"headerlink\" title=\"React Hooks\"></a>React Hooks</h2><h2 id=\"Original-Link\"><a href=\"#Original-Link\" class=\"headerlink\" title=\"Original Link\"></a>Original Link</h2><p>[1] <a href=\"https://reactjs.org/docs\" target=\"_blank\" rel=\"noopener\">https://reactjs.org/docs</a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>This is a short note from ReactJS docs.</p>\n</blockquote>\n<h2 id=\"Main-Concepts\"><a href=\"#Main-Concepts\" class=\"headerlink\" title=\"Main Concepts\"></a>Main Concepts</h2><h3 id=\"1-JSX\"><a href=\"#1-JSX\" class=\"headerlink\" title=\"1.JSX\"></a>1.JSX</h3><p>JSX l <strong>syntax extension to JavaScript</strong></p>\n<p>L do cn s xut hin ca JSX l  React nhng logic vo giao din.</p>\n<p>Nhng biu thc logic vo JSX thng qua cp ngoc <strong>{}</strong>:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> name = <span class=\"string\">\"Meo\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>&#123;name&#125;<span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>Chng ta cng c th nhng JSX vo mt <strong>if</strong> hay <strong>for</strong> trong javascript:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getGreeting</span>(<span class=\"params\">user</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (user) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, &#123;formatName(user)&#125;!<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, Stranger.<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Nhng biu thc vo Attributes ca mt i tng:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;user.avatarUrl&#125;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">img</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p>Note: Dng  cho chui, dng {} cho biu thc logic, khng dng 2 th cng lc.</p>\n<p>JSX din t mt i tng:</p>\n<p>Khi babel bin dch, i tng trn s c call trong <strong>React.createElement()</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> element = (</span><br><span class=\"line\">  &lt;h1 className=<span class=\"string\">\"greeting\"</span>&gt;</span><br><span class=\"line\">    Hello, world!</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">);</span></span><br></pre></td></tr></table></figure>\n\n<p>Sau bin dch s thnh:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> element = &#123;</span><br><span class=\"line\">  type: <span class=\"string\">'h1'</span>,</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    className: <span class=\"string\">'greeting'</span>,</span><br><span class=\"line\">    children: <span class=\"string\">'Hello, world!'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Render-Element\"><a href=\"#2-Render-Element\" class=\"headerlink\" title=\"2.Render Element\"></a>2.Render Element</h3><p>React dng cc i tng ny  xy dng cy DOM.</p>\n<p>React elements l immutable. Mt khi bn to mt element, bn khng th thay  thuc tnh hoc children ca n. Mt element React ging nh mt on trong 1 cun phim: N ch i din cho UI trong 1 thi im.</p>\n<p>Do vy, cch duy nht  cp nht giao din l to ra mt phn t mi thay th cho phn t c. V cch duy nht  to ra mt phn t React l dng <strong>ReactDOM.render()</strong></p>\n<h3 id=\"3-Component-va-Props\"><a href=\"#3-Component-va-Props\" class=\"headerlink\" title=\"3.Component v Props\"></a>3.Component v Props</h3><p><strong>Function Component</strong>:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Welcome</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Ch chp nhn 1 params props.</p>\n<p><strong>ES6 Class</strong>:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Welcome</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Khi s dng Class s c mt s chc nng c b sung.</p>\n<blockquote>\n<p> React elements: l  th c bin dch qua babel  mc 2</p>\n</blockquote>\n<p>React element c th i din cho DOM tag hoc user-defined components</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> /&gt;</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Welcome</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Sara\"</span> /&gt;</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p>React khi gp cc element i din cho mt user-defined componts, n s pass jsx attributes vo component  di dng <strong>MT OBJECT DUY NHT</strong>,  l props.</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Welcome</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Welcome</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Sara\"</span> /&gt;</span></span>;</span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  element,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'root'</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>Trong v d trn, object duy nht l: <strong>props = {name: Sara}</strong></p>\n<ol>\n<li>We call ReactDOM.render() with the <code>&lt;Welcome name=&quot;Sara&quot; /&gt;</code> element.</li>\n<li>React calls the Welcome component with {name: Sara} as the props.</li>\n<li>Our Welcome component returns a <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> element as the result.</li>\n<li>React DOM efficiently updates the DOM to match <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>.</li>\n</ol>\n<blockquote>\n<p>Lun to mt component vi ch ci u vit hoa, react dng y  nhn din ch DOM tag v user-defined components</p>\n</blockquote>\n<h3 id=\"4-State-va-vong-doi\"><a href=\"#4-State-va-vong-doi\" class=\"headerlink\" title=\"4.State v vng i\"></a>4.State v vng i</h3><p>Ni duy nht ta c th set state l trong constructor.  cc khu vc khc, phi call hm setState  thay i gi tr state.</p>\n<p>Cp nht state l bt ng b.  khc phc, setState nhn tham s u tin l state c.</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Correct</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.setState(<span class=\"function\">(<span class=\"params\">state, props</span>) =&gt;</span> (&#123;</span><br><span class=\"line\">  counter: state.counter + props.increment</span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>(props);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.state = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Chinh'</span>,</span><br><span class=\"line\">    age: <span class=\"number\">25</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Khi gi:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Duy'</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>name trong state s c replace v thay mi, cn age th gi nguyn =&gt; gi l merge vy thi</p>\n<h2 id=\"Advandced-Guide\"><a href=\"#Advandced-Guide\" class=\"headerlink\" title=\"Advandced Guide\"></a>Advandced Guide</h2><h2 id=\"React-Hooks\"><a href=\"#React-Hooks\" class=\"headerlink\" title=\"React Hooks\"></a>React Hooks</h2><h2 id=\"Original-Link\"><a href=\"#Original-Link\" class=\"headerlink\" title=\"Original Link\"></a>Original Link</h2><p>[1] <a href=\"https://reactjs.org/docs\" target=\"_blank\" rel=\"noopener\">https://reactjs.org/docs</a></p>\n"},{"title":"Callback, Promise, Async Await","date":"2020-01-08T17:00:00.000Z","label":"#note","_content":"\n## 1. Event Loop\n\nJavascript chy n lung, tng t nh ruby, nhng khc mt iu, mi trng lm vic ca javascript a phn l trnh duyt, nu mi th u chy tun t n lung liu c n khng?\n\nV d:\n\n```javascript\nAPI.get(\"/cats\")\n\nAPI.get(\"/dogs\")\n```\n\nGi d on code ly v d liu dogs bn trn gp li hoc tn rt nhiu thi gian  thc hin, khi  giao din (trn trnh duyt) ca ngi dng s treo hon ton nu javascript khng c gii php cho s n lung v chy tun t?\n\nCch gii quyt l n n lung v chy khng tun t, hay cn gi l chy bt ng b:\n\nVy javascript v ruby cng l n lung, nhng javascript chy bt ng b cn ruby th chy ng b tun t.\n\nVideo s [6] di mc tham kho  gii thch rt hay v event loop v khng c l do g chng ta i ghi li 1 th  c ngi lm qu tt. Mt vi lu  mnh lm lt nn note li:\n\n1. Event Loop c mt nhim v duy nht - gim st **Call Stack** v **Callback Queue**. Nu Call Stack trng, n s ly s kin u tin t queue v y vo Call Stack\n\n2.Nhng Web API ny l g? Chng l nhng thread m bn khng th truy cp c, ch c th gi  xi m thi. Chng l nhng nhn t trong trnh duyt m thc s c th chy ng thi (concurrency). Vy th event loop l g:\n\n3. ES6 gii thiu khi nim v job queue c s dng bi Promises trong JavaScript. S khc bit gia message queue v job queue l job queue c mc u tin cao hn message queue, c ngha l cc promise job bn trong job queue s c thc thi trc cc callback bn trong message queue.\n\n\n## 2. Callback\n\nTrong js, function cng l object.\n\nKhi chng ta truyn function A v function B di dng tham s ca B, lc ny A c gi l Callback function.\n\n```javascript\nfunction A() {\n  console.log(\"Pass me in B, but I don't know why we need do that\");\n}\n\nfunction B(callback) {\n  callback();\n}\n\nB(A);\n```\n\nKhi chng ta truyn function khng tn vo B thay v truyn 1 function c tn l A, lc ny function  gi l anonymous function, trng hp ny chng ta lm rt nhiu, tiu biu l cc event jquery chng vn dng hay hm `setTimeout` build-in trong javascript cng l mt v d tiu biu, n nhn vo 2 tham s: mt function v 1 khong thi gian dng milisecond.\n\n```javascript\nfunction B(callback) {\n  console.log(\"Do something before call callback\");\n  callback();\n  console.log(\"Do something after call callback\");\n}\n\nB(function() {\n  console.log(\"Callback runing...\");\n});\n\n// Output will be:\n\n// Do something before call callback\n// Callback runing...\n// Do something after call callback\n```\n\nTi sao cn dng callback?\n\nV bn cht ca ngn ng javascript l bt ng b, lm g lm lun, my lm tr/chm th k my, t** o thch tun t.\n\n```javascript\n// Copy from: https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/\nfunction serverRequest(query, callback){\n  setTimeout(function(){\n    var response = query + \"full!\";\n    callback(response);\n  },5000);\n}\n\nfunction getResults(results){\n  console.log(\"Response from the server: \" + results);\n}\n\nserverRequest(\"The glass is half \", getResults);\n\n// Result in console after 5 second delay:\n// Response from the server: The glass is half full!\n```\n\nTrong v d trn, chng ta gi lp 1 request ti server, v request ny tn 5s, sau khi request ny c kt qu th 1 function khc  y mi chy, chnh l function `getResults`, v vy truyn `getResults` di dng callback function vo `serverRequest` ri \"sau khi nhn c response t server\" ta truyn d liu  cho callback function  n lm cng vic m n cn lm.\n\nMt v d khc:\n\n```javascript\n// Copy from: https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced\nT.get('search/tweets', params, function(err, data, response) {\n  if(!err){\n    // This is where the magic will happen\n  } else {\n    console.log(err);\n  }\n})\n```\n\nTrong v d trn, callback function s chy sau khi m ci hm `T.get` chy xong, cc tham s ca callback function chnh l cc gi tr `T.get` tr v.\n\n## 3. Promise\n\n```javascript\nlet p = new Promise((resolve, reject) => {\n  let a = 1\n\n  response = {\n    success: true,\n    data: {\n      name: 'Chinh',\n      age: 25\n    }\n  }\n\n  if (a == 1) {\n    resolve(response);\n  } else {\n    reject('Fail');\n  }\n});\n\np.then((data) => {\n  if (data.success) {\n    console.log('This is data: ', data.data);\n  } else {\n    console.log('Something went wrong!');\n  }\n}).catch((err) => {\n  console.log('The error is: ', err);\n});\n```\n\nV d 2 v **Promise.all**\n\n```javascript\nlet cats = new Promise((resolve, reject) => {\n  resolve(\"all cats\");\n});\n\nlet dogs = new Promise((resolve, reject) => {\n  resolve(\"all dogs\");\n});\n\nPromise.all([\n  cats,\n  dogs\n]).then((data) => {\n  console.log(data);\n});\n\n// Output will be:\n// [\"all cats\", \"all dogs\"]\n```\n\n## 4. Async Await\n\nClear code cho promise, c b sung trong ES7\n\n```javascript\n// Copy from: https://www.youtube.com/watch?v=V_Kr9OSfDeU\nfunction makeRequest(location) {\n  return new Promise((resolve, reject) => {\n    if (location === 'Google') {\n      resolve('Google say hi');\n    } else {\n      reject('You can only talk to google');\n    }\n  })\n}\n\nfunction processRequest(response) {\n  return new Promise((resolve, reject) => {\n    console.log('Processing response');\n    resolve(`Extra information: ${response}`)\n  });\n}\n\n// Promise hell\nmakeRequest('Google').then(data => {\n  processRequest(data).then(extraData => {\n    console.log('Final data: ', extraData)\n  })\n}).catch((err) => {\n  console.log('err: ', err);\n});\n\n// Update to fix Promise hell\nmakeRequest('Google')\n  .then(data => {\n    return processRequest(data)\n  })\n  .then(extraData => {\n    console.log('Final data: ', extraData)\n  })\n  .catch((err) => {\n    console.log('err: ', err);\n  });\n```\n\nUpdate thnh dng **async await**\n\n```javascript\nasync function doWork() {\n  try {\n    const response = await makeRequest('Google');\n    const processedResponse = await processRequest(response);\n    // Do anything with processedResponse\n  } catch (err) {\n    console.log('err: ', err);\n  }\n}\n```\n\n## 5. References\n\n[1][https://viblo.asia/p/javascript-callback-function-PdbGnozAeyA](https://viblo.asia/p/javascript-callback-function-PdbGnozAeyA)\n[2][https://kipalog.com/posts/Promise-la-khi-gi-](https://kipalog.com/posts/Promise-la-khi-gi-)\n[3][https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/](https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/)\n[4][https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced](https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced)\n[5][https://viblo.asia/p/hieu-ve-asynchronous-javascript-RQqKLARmZ7z](https://viblo.asia/p/hieu-ve-asynchronous-javascript-RQqKLARmZ7z)\n[6][https://www.youtube.com/watch?v=8aGhZQkoFbQ](https://www.youtube.com/watch?v=8aGhZQkoFbQ)\n[7][https://www.youtube.com/watch?v=DHvZLI7Db8E](https://www.youtube.com/watch?v=DHvZLI7Db8E)\n[8][https://www.youtube.com/watch?v=V_Kr9OSfDeU](https://www.youtube.com/watch?v=V_Kr9OSfDeU)\n","source":"_posts/2020-01-09-callback-promise-anyc-await.md","raw":"---\ntitle: \"Callback, Promise, Async Await\"\ndate: 2020-01-09\ntags: [\"NOTES\"]\nlabel: \"#note\"\n---\n\n## 1. Event Loop\n\nJavascript chy n lung, tng t nh ruby, nhng khc mt iu, mi trng lm vic ca javascript a phn l trnh duyt, nu mi th u chy tun t n lung liu c n khng?\n\nV d:\n\n```javascript\nAPI.get(\"/cats\")\n\nAPI.get(\"/dogs\")\n```\n\nGi d on code ly v d liu dogs bn trn gp li hoc tn rt nhiu thi gian  thc hin, khi  giao din (trn trnh duyt) ca ngi dng s treo hon ton nu javascript khng c gii php cho s n lung v chy tun t?\n\nCch gii quyt l n n lung v chy khng tun t, hay cn gi l chy bt ng b:\n\nVy javascript v ruby cng l n lung, nhng javascript chy bt ng b cn ruby th chy ng b tun t.\n\nVideo s [6] di mc tham kho  gii thch rt hay v event loop v khng c l do g chng ta i ghi li 1 th  c ngi lm qu tt. Mt vi lu  mnh lm lt nn note li:\n\n1. Event Loop c mt nhim v duy nht - gim st **Call Stack** v **Callback Queue**. Nu Call Stack trng, n s ly s kin u tin t queue v y vo Call Stack\n\n2.Nhng Web API ny l g? Chng l nhng thread m bn khng th truy cp c, ch c th gi  xi m thi. Chng l nhng nhn t trong trnh duyt m thc s c th chy ng thi (concurrency). Vy th event loop l g:\n\n3. ES6 gii thiu khi nim v job queue c s dng bi Promises trong JavaScript. S khc bit gia message queue v job queue l job queue c mc u tin cao hn message queue, c ngha l cc promise job bn trong job queue s c thc thi trc cc callback bn trong message queue.\n\n\n## 2. Callback\n\nTrong js, function cng l object.\n\nKhi chng ta truyn function A v function B di dng tham s ca B, lc ny A c gi l Callback function.\n\n```javascript\nfunction A() {\n  console.log(\"Pass me in B, but I don't know why we need do that\");\n}\n\nfunction B(callback) {\n  callback();\n}\n\nB(A);\n```\n\nKhi chng ta truyn function khng tn vo B thay v truyn 1 function c tn l A, lc ny function  gi l anonymous function, trng hp ny chng ta lm rt nhiu, tiu biu l cc event jquery chng vn dng hay hm `setTimeout` build-in trong javascript cng l mt v d tiu biu, n nhn vo 2 tham s: mt function v 1 khong thi gian dng milisecond.\n\n```javascript\nfunction B(callback) {\n  console.log(\"Do something before call callback\");\n  callback();\n  console.log(\"Do something after call callback\");\n}\n\nB(function() {\n  console.log(\"Callback runing...\");\n});\n\n// Output will be:\n\n// Do something before call callback\n// Callback runing...\n// Do something after call callback\n```\n\nTi sao cn dng callback?\n\nV bn cht ca ngn ng javascript l bt ng b, lm g lm lun, my lm tr/chm th k my, t** o thch tun t.\n\n```javascript\n// Copy from: https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/\nfunction serverRequest(query, callback){\n  setTimeout(function(){\n    var response = query + \"full!\";\n    callback(response);\n  },5000);\n}\n\nfunction getResults(results){\n  console.log(\"Response from the server: \" + results);\n}\n\nserverRequest(\"The glass is half \", getResults);\n\n// Result in console after 5 second delay:\n// Response from the server: The glass is half full!\n```\n\nTrong v d trn, chng ta gi lp 1 request ti server, v request ny tn 5s, sau khi request ny c kt qu th 1 function khc  y mi chy, chnh l function `getResults`, v vy truyn `getResults` di dng callback function vo `serverRequest` ri \"sau khi nhn c response t server\" ta truyn d liu  cho callback function  n lm cng vic m n cn lm.\n\nMt v d khc:\n\n```javascript\n// Copy from: https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced\nT.get('search/tweets', params, function(err, data, response) {\n  if(!err){\n    // This is where the magic will happen\n  } else {\n    console.log(err);\n  }\n})\n```\n\nTrong v d trn, callback function s chy sau khi m ci hm `T.get` chy xong, cc tham s ca callback function chnh l cc gi tr `T.get` tr v.\n\n## 3. Promise\n\n```javascript\nlet p = new Promise((resolve, reject) => {\n  let a = 1\n\n  response = {\n    success: true,\n    data: {\n      name: 'Chinh',\n      age: 25\n    }\n  }\n\n  if (a == 1) {\n    resolve(response);\n  } else {\n    reject('Fail');\n  }\n});\n\np.then((data) => {\n  if (data.success) {\n    console.log('This is data: ', data.data);\n  } else {\n    console.log('Something went wrong!');\n  }\n}).catch((err) => {\n  console.log('The error is: ', err);\n});\n```\n\nV d 2 v **Promise.all**\n\n```javascript\nlet cats = new Promise((resolve, reject) => {\n  resolve(\"all cats\");\n});\n\nlet dogs = new Promise((resolve, reject) => {\n  resolve(\"all dogs\");\n});\n\nPromise.all([\n  cats,\n  dogs\n]).then((data) => {\n  console.log(data);\n});\n\n// Output will be:\n// [\"all cats\", \"all dogs\"]\n```\n\n## 4. Async Await\n\nClear code cho promise, c b sung trong ES7\n\n```javascript\n// Copy from: https://www.youtube.com/watch?v=V_Kr9OSfDeU\nfunction makeRequest(location) {\n  return new Promise((resolve, reject) => {\n    if (location === 'Google') {\n      resolve('Google say hi');\n    } else {\n      reject('You can only talk to google');\n    }\n  })\n}\n\nfunction processRequest(response) {\n  return new Promise((resolve, reject) => {\n    console.log('Processing response');\n    resolve(`Extra information: ${response}`)\n  });\n}\n\n// Promise hell\nmakeRequest('Google').then(data => {\n  processRequest(data).then(extraData => {\n    console.log('Final data: ', extraData)\n  })\n}).catch((err) => {\n  console.log('err: ', err);\n});\n\n// Update to fix Promise hell\nmakeRequest('Google')\n  .then(data => {\n    return processRequest(data)\n  })\n  .then(extraData => {\n    console.log('Final data: ', extraData)\n  })\n  .catch((err) => {\n    console.log('err: ', err);\n  });\n```\n\nUpdate thnh dng **async await**\n\n```javascript\nasync function doWork() {\n  try {\n    const response = await makeRequest('Google');\n    const processedResponse = await processRequest(response);\n    // Do anything with processedResponse\n  } catch (err) {\n    console.log('err: ', err);\n  }\n}\n```\n\n## 5. References\n\n[1][https://viblo.asia/p/javascript-callback-function-PdbGnozAeyA](https://viblo.asia/p/javascript-callback-function-PdbGnozAeyA)\n[2][https://kipalog.com/posts/Promise-la-khi-gi-](https://kipalog.com/posts/Promise-la-khi-gi-)\n[3][https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/](https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/)\n[4][https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced](https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced)\n[5][https://viblo.asia/p/hieu-ve-asynchronous-javascript-RQqKLARmZ7z](https://viblo.asia/p/hieu-ve-asynchronous-javascript-RQqKLARmZ7z)\n[6][https://www.youtube.com/watch?v=8aGhZQkoFbQ](https://www.youtube.com/watch?v=8aGhZQkoFbQ)\n[7][https://www.youtube.com/watch?v=DHvZLI7Db8E](https://www.youtube.com/watch?v=DHvZLI7Db8E)\n[8][https://www.youtube.com/watch?v=V_Kr9OSfDeU](https://www.youtube.com/watch?v=V_Kr9OSfDeU)\n","slug":"2020-01-09-callback-promise-anyc-await","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbf003qp3m2am7a5b9f","content":"<h2 id=\"1-Event-Loop\"><a href=\"#1-Event-Loop\" class=\"headerlink\" title=\"1. Event Loop\"></a>1. Event Loop</h2><p>Javascript chy n lung, tng t nh ruby, nhng khc mt iu, mi trng lm vic ca javascript a phn l trnh duyt, nu mi th u chy tun t n lung liu c n khng?</p>\n<p>V d:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">API.get(<span class=\"string\">\"/cats\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">API.get(<span class=\"string\">\"/dogs\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Gi d on code ly v d liu dogs bn trn gp li hoc tn rt nhiu thi gian  thc hin, khi  giao din (trn trnh duyt) ca ngi dng s treo hon ton nu javascript khng c gii php cho s n lung v chy tun t?</p>\n<p>Cch gii quyt l n n lung v chy khng tun t, hay cn gi l chy bt ng b:</p>\n<p>Vy javascript v ruby cng l n lung, nhng javascript chy bt ng b cn ruby th chy ng b tun t.</p>\n<p>Video s [6] di mc tham kho  gii thch rt hay v event loop v khng c l do g chng ta i ghi li 1 th  c ngi lm qu tt. Mt vi lu  mnh lm lt nn note li:</p>\n<ol>\n<li>Event Loop c mt nhim v duy nht - gim st <strong>Call Stack</strong> v <strong>Callback Queue</strong>. Nu Call Stack trng, n s ly s kin u tin t queue v y vo Call Stack</li>\n</ol>\n<p>2.Nhng Web API ny l g? Chng l nhng thread m bn khng th truy cp c, ch c th gi  xi m thi. Chng l nhng nhn t trong trnh duyt m thc s c th chy ng thi (concurrency). Vy th event loop l g:</p>\n<ol start=\"3\">\n<li>ES6 gii thiu khi nim v job queue c s dng bi Promises trong JavaScript. S khc bit gia message queue v job queue l job queue c mc u tin cao hn message queue, c ngha l cc promise job bn trong job queue s c thc thi trc cc callback bn trong message queue.</li>\n</ol>\n<h2 id=\"2-Callback\"><a href=\"#2-Callback\" class=\"headerlink\" title=\"2. Callback\"></a>2. Callback</h2><p>Trong js, function cng l object.</p>\n<p>Khi chng ta truyn function A v function B di dng tham s ca B, lc ny A c gi l Callback function.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">A</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Pass me in B, but I don't know why we need do that\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">B</span>(<span class=\"params\">callback</span>) </span>&#123;</span><br><span class=\"line\">  callback();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">B(A);</span><br></pre></td></tr></table></figure>\n\n<p>Khi chng ta truyn function khng tn vo B thay v truyn 1 function c tn l A, lc ny function  gi l anonymous function, trng hp ny chng ta lm rt nhiu, tiu biu l cc event jquery chng vn dng hay hm <code>setTimeout</code> build-in trong javascript cng l mt v d tiu biu, n nhn vo 2 tham s: mt function v 1 khong thi gian dng milisecond.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">B</span>(<span class=\"params\">callback</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Do something before call callback\"</span>);</span><br><span class=\"line\">  callback();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Do something after call callback\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">B(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Callback runing...\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Output will be:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Do something before call callback</span></span><br><span class=\"line\"><span class=\"comment\">// Callback runing...</span></span><br><span class=\"line\"><span class=\"comment\">// Do something after call callback</span></span><br></pre></td></tr></table></figure>\n\n<p>Ti sao cn dng callback?</p>\n<p>V bn cht ca ngn ng javascript l bt ng b, lm g lm lun, my lm tr/chm th k my, t** o thch tun t.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">serverRequest</span>(<span class=\"params\">query, callback</span>)</span>&#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> response = query + <span class=\"string\">\"full!\"</span>;</span><br><span class=\"line\">    callback(response);</span><br><span class=\"line\">  &#125;,<span class=\"number\">5000</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResults</span>(<span class=\"params\">results</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Response from the server: \"</span> + results);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">serverRequest(<span class=\"string\">\"The glass is half \"</span>, getResults);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Result in console after 5 second delay:</span></span><br><span class=\"line\"><span class=\"comment\">// Response from the server: The glass is half full!</span></span><br></pre></td></tr></table></figure>\n\n<p>Trong v d trn, chng ta gi lp 1 request ti server, v request ny tn 5s, sau khi request ny c kt qu th 1 function khc  y mi chy, chnh l function <code>getResults</code>, v vy truyn <code>getResults</code> di dng callback function vo <code>serverRequest</code> ri sau khi nhn c response t server ta truyn d liu  cho callback function  n lm cng vic m n cn lm.</p>\n<p>Mt v d khc:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced</span></span><br><span class=\"line\">T.get(<span class=\"string\">'search/tweets'</span>, params, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, data, response</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!err)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// This is where the magic will happen</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Trong v d trn, callback function s chy sau khi m ci hm <code>T.get</code> chy xong, cc tham s ca callback function chnh l cc gi tr <code>T.get</code> tr v.</p>\n<h2 id=\"3-Promise\"><a href=\"#3-Promise\" class=\"headerlink\" title=\"3. Promise\"></a>3. Promise</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> a = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  response = &#123;</span><br><span class=\"line\">    success: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">      name: <span class=\"string\">'Chinh'</span>,</span><br><span class=\"line\">      age: <span class=\"number\">25</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    resolve(response);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    reject(<span class=\"string\">'Fail'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">p.then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (data.success) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'This is data: '</span>, data.data);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Something went wrong!'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'The error is: '</span>, err);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>V d 2 v <strong>Promise.all</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> cats = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  resolve(<span class=\"string\">\"all cats\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> dogs = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  resolve(<span class=\"string\">\"all dogs\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([</span><br><span class=\"line\">  cats,</span><br><span class=\"line\">  dogs</span><br><span class=\"line\">]).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Output will be:</span></span><br><span class=\"line\"><span class=\"comment\">// [\"all cats\", \"all dogs\"]</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Async-Await\"><a href=\"#4-Async-Await\" class=\"headerlink\" title=\"4. Async Await\"></a>4. Async Await</h2><p>Clear code cho promise, c b sung trong ES7</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: https://www.youtube.com/watch?v=V_Kr9OSfDeU</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeRequest</span>(<span class=\"params\">location</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location === <span class=\"string\">'Google'</span>) &#123;</span><br><span class=\"line\">      resolve(<span class=\"string\">'Google say hi'</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      reject(<span class=\"string\">'You can only talk to google'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">processRequest</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Processing response'</span>);</span><br><span class=\"line\">    resolve(<span class=\"string\">`Extra information: <span class=\"subst\">$&#123;response&#125;</span>`</span>)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Promise hell</span></span><br><span class=\"line\">makeRequest(<span class=\"string\">'Google'</span>).then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">  processRequest(data).then(<span class=\"function\"><span class=\"params\">extraData</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Final data: '</span>, extraData)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Update to fix Promise hell</span></span><br><span class=\"line\">makeRequest(<span class=\"string\">'Google'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> processRequest(data)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">extraData</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Final data: '</span>, extraData)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Update thnh dng <strong>async await</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doWork</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> makeRequest(<span class=\"string\">'Google'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> processedResponse = <span class=\"keyword\">await</span> processRequest(response);</span><br><span class=\"line\">    <span class=\"comment\">// Do anything with processedResponse</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-References\"><a href=\"#5-References\" class=\"headerlink\" title=\"5. References\"></a>5. References</h2><p>[1]<a href=\"https://viblo.asia/p/javascript-callback-function-PdbGnozAeyA\" target=\"_blank\" rel=\"noopener\">https://viblo.asia/p/javascript-callback-function-PdbGnozAeyA</a><br>[2]<a href=\"https://kipalog.com/posts/Promise-la-khi-gi-\" target=\"_blank\" rel=\"noopener\">https://kipalog.com/posts/Promise-la-khi-gi-</a><br>[3]<a href=\"https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/\" target=\"_blank\" rel=\"noopener\">https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/</a><br>[4]<a href=\"https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced\" target=\"_blank\" rel=\"noopener\">https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced</a><br>[5]<a href=\"https://viblo.asia/p/hieu-ve-asynchronous-javascript-RQqKLARmZ7z\" target=\"_blank\" rel=\"noopener\">https://viblo.asia/p/hieu-ve-asynchronous-javascript-RQqKLARmZ7z</a><br>[6]<a href=\"https://www.youtube.com/watch?v=8aGhZQkoFbQ\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=8aGhZQkoFbQ</a><br>[7]<a href=\"https://www.youtube.com/watch?v=DHvZLI7Db8E\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=DHvZLI7Db8E</a><br>[8]<a href=\"https://www.youtube.com/watch?v=V_Kr9OSfDeU\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=V_Kr9OSfDeU</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Event-Loop\"><a href=\"#1-Event-Loop\" class=\"headerlink\" title=\"1. Event Loop\"></a>1. Event Loop</h2><p>Javascript chy n lung, tng t nh ruby, nhng khc mt iu, mi trng lm vic ca javascript a phn l trnh duyt, nu mi th u chy tun t n lung liu c n khng?</p>\n<p>V d:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">API.get(<span class=\"string\">\"/cats\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">API.get(<span class=\"string\">\"/dogs\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Gi d on code ly v d liu dogs bn trn gp li hoc tn rt nhiu thi gian  thc hin, khi  giao din (trn trnh duyt) ca ngi dng s treo hon ton nu javascript khng c gii php cho s n lung v chy tun t?</p>\n<p>Cch gii quyt l n n lung v chy khng tun t, hay cn gi l chy bt ng b:</p>\n<p>Vy javascript v ruby cng l n lung, nhng javascript chy bt ng b cn ruby th chy ng b tun t.</p>\n<p>Video s [6] di mc tham kho  gii thch rt hay v event loop v khng c l do g chng ta i ghi li 1 th  c ngi lm qu tt. Mt vi lu  mnh lm lt nn note li:</p>\n<ol>\n<li>Event Loop c mt nhim v duy nht - gim st <strong>Call Stack</strong> v <strong>Callback Queue</strong>. Nu Call Stack trng, n s ly s kin u tin t queue v y vo Call Stack</li>\n</ol>\n<p>2.Nhng Web API ny l g? Chng l nhng thread m bn khng th truy cp c, ch c th gi  xi m thi. Chng l nhng nhn t trong trnh duyt m thc s c th chy ng thi (concurrency). Vy th event loop l g:</p>\n<ol start=\"3\">\n<li>ES6 gii thiu khi nim v job queue c s dng bi Promises trong JavaScript. S khc bit gia message queue v job queue l job queue c mc u tin cao hn message queue, c ngha l cc promise job bn trong job queue s c thc thi trc cc callback bn trong message queue.</li>\n</ol>\n<h2 id=\"2-Callback\"><a href=\"#2-Callback\" class=\"headerlink\" title=\"2. Callback\"></a>2. Callback</h2><p>Trong js, function cng l object.</p>\n<p>Khi chng ta truyn function A v function B di dng tham s ca B, lc ny A c gi l Callback function.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">A</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Pass me in B, but I don't know why we need do that\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">B</span>(<span class=\"params\">callback</span>) </span>&#123;</span><br><span class=\"line\">  callback();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">B(A);</span><br></pre></td></tr></table></figure>\n\n<p>Khi chng ta truyn function khng tn vo B thay v truyn 1 function c tn l A, lc ny function  gi l anonymous function, trng hp ny chng ta lm rt nhiu, tiu biu l cc event jquery chng vn dng hay hm <code>setTimeout</code> build-in trong javascript cng l mt v d tiu biu, n nhn vo 2 tham s: mt function v 1 khong thi gian dng milisecond.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">B</span>(<span class=\"params\">callback</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Do something before call callback\"</span>);</span><br><span class=\"line\">  callback();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Do something after call callback\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">B(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Callback runing...\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Output will be:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Do something before call callback</span></span><br><span class=\"line\"><span class=\"comment\">// Callback runing...</span></span><br><span class=\"line\"><span class=\"comment\">// Do something after call callback</span></span><br></pre></td></tr></table></figure>\n\n<p>Ti sao cn dng callback?</p>\n<p>V bn cht ca ngn ng javascript l bt ng b, lm g lm lun, my lm tr/chm th k my, t** o thch tun t.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">serverRequest</span>(<span class=\"params\">query, callback</span>)</span>&#123;</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> response = query + <span class=\"string\">\"full!\"</span>;</span><br><span class=\"line\">    callback(response);</span><br><span class=\"line\">  &#125;,<span class=\"number\">5000</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResults</span>(<span class=\"params\">results</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Response from the server: \"</span> + results);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">serverRequest(<span class=\"string\">\"The glass is half \"</span>, getResults);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Result in console after 5 second delay:</span></span><br><span class=\"line\"><span class=\"comment\">// Response from the server: The glass is half full!</span></span><br></pre></td></tr></table></figure>\n\n<p>Trong v d trn, chng ta gi lp 1 request ti server, v request ny tn 5s, sau khi request ny c kt qu th 1 function khc  y mi chy, chnh l function <code>getResults</code>, v vy truyn <code>getResults</code> di dng callback function vo <code>serverRequest</code> ri sau khi nhn c response t server ta truyn d liu  cho callback function  n lm cng vic m n cn lm.</p>\n<p>Mt v d khc:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced</span></span><br><span class=\"line\">T.get(<span class=\"string\">'search/tweets'</span>, params, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, data, response</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!err)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// This is where the magic will happen</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>Trong v d trn, callback function s chy sau khi m ci hm <code>T.get</code> chy xong, cc tham s ca callback function chnh l cc gi tr <code>T.get</code> tr v.</p>\n<h2 id=\"3-Promise\"><a href=\"#3-Promise\" class=\"headerlink\" title=\"3. Promise\"></a>3. Promise</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> a = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  response = &#123;</span><br><span class=\"line\">    success: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">      name: <span class=\"string\">'Chinh'</span>,</span><br><span class=\"line\">      age: <span class=\"number\">25</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    resolve(response);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    reject(<span class=\"string\">'Fail'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">p.then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (data.success) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'This is data: '</span>, data.data);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Something went wrong!'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'The error is: '</span>, err);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>V d 2 v <strong>Promise.all</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> cats = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  resolve(<span class=\"string\">\"all cats\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> dogs = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  resolve(<span class=\"string\">\"all dogs\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([</span><br><span class=\"line\">  cats,</span><br><span class=\"line\">  dogs</span><br><span class=\"line\">]).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Output will be:</span></span><br><span class=\"line\"><span class=\"comment\">// [\"all cats\", \"all dogs\"]</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Async-Await\"><a href=\"#4-Async-Await\" class=\"headerlink\" title=\"4. Async Await\"></a>4. Async Await</h2><p>Clear code cho promise, c b sung trong ES7</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: https://www.youtube.com/watch?v=V_Kr9OSfDeU</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeRequest</span>(<span class=\"params\">location</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (location === <span class=\"string\">'Google'</span>) &#123;</span><br><span class=\"line\">      resolve(<span class=\"string\">'Google say hi'</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      reject(<span class=\"string\">'You can only talk to google'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">processRequest</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Processing response'</span>);</span><br><span class=\"line\">    resolve(<span class=\"string\">`Extra information: <span class=\"subst\">$&#123;response&#125;</span>`</span>)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Promise hell</span></span><br><span class=\"line\">makeRequest(<span class=\"string\">'Google'</span>).then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">  processRequest(data).then(<span class=\"function\"><span class=\"params\">extraData</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Final data: '</span>, extraData)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Update to fix Promise hell</span></span><br><span class=\"line\">makeRequest(<span class=\"string\">'Google'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> processRequest(data)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">extraData</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Final data: '</span>, extraData)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Update thnh dng <strong>async await</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doWork</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> makeRequest(<span class=\"string\">'Google'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> processedResponse = <span class=\"keyword\">await</span> processRequest(response);</span><br><span class=\"line\">    <span class=\"comment\">// Do anything with processedResponse</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-References\"><a href=\"#5-References\" class=\"headerlink\" title=\"5. References\"></a>5. References</h2><p>[1]<a href=\"https://viblo.asia/p/javascript-callback-function-PdbGnozAeyA\" target=\"_blank\" rel=\"noopener\">https://viblo.asia/p/javascript-callback-function-PdbGnozAeyA</a><br>[2]<a href=\"https://kipalog.com/posts/Promise-la-khi-gi-\" target=\"_blank\" rel=\"noopener\">https://kipalog.com/posts/Promise-la-khi-gi-</a><br>[3]<a href=\"https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/\" target=\"_blank\" rel=\"noopener\">https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/</a><br>[4]<a href=\"https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced\" target=\"_blank\" rel=\"noopener\">https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced</a><br>[5]<a href=\"https://viblo.asia/p/hieu-ve-asynchronous-javascript-RQqKLARmZ7z\" target=\"_blank\" rel=\"noopener\">https://viblo.asia/p/hieu-ve-asynchronous-javascript-RQqKLARmZ7z</a><br>[6]<a href=\"https://www.youtube.com/watch?v=8aGhZQkoFbQ\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=8aGhZQkoFbQ</a><br>[7]<a href=\"https://www.youtube.com/watch?v=DHvZLI7Db8E\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=DHvZLI7Db8E</a><br>[8]<a href=\"https://www.youtube.com/watch?v=V_Kr9OSfDeU\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=V_Kr9OSfDeU</a></p>\n"},{"title":"Method And Function","date":"2020-01-10T17:00:00.000Z","label":"#note","_content":"\n### 1.What is the different between method and function?\n\n> A method is on an object. (Tn ti trn/trong mt Object)\n\n> A function is independent of an object. (c lp vi cc Object)\n\n### 2.Method and Function in programming languages\n\n> For C, there are only functions (because no OOP context in C)\n\n> For C++ it would depend on whether or not you're in a class.\n\n> For Ruby, there are only methods, because almost anything in Ruby is Object and when you define a \"function\" not blong to any object, actually it still exist in an \"global object\" (feeling matrix movie).\n\n> For Js, existing both.\n\n### 3.Reference\n\n[1][https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function](https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function)\n","source":"_posts/2020-01-10-method-and-function-notes.md","raw":"---\ntitle: \"Method And Function\"\ndate: 2020-01-11\ntags: [\"NOTES\"]\nlabel: \"#note\"\n---\n\n### 1.What is the different between method and function?\n\n> A method is on an object. (Tn ti trn/trong mt Object)\n\n> A function is independent of an object. (c lp vi cc Object)\n\n### 2.Method and Function in programming languages\n\n> For C, there are only functions (because no OOP context in C)\n\n> For C++ it would depend on whether or not you're in a class.\n\n> For Ruby, there are only methods, because almost anything in Ruby is Object and when you define a \"function\" not blong to any object, actually it still exist in an \"global object\" (feeling matrix movie).\n\n> For Js, existing both.\n\n### 3.Reference\n\n[1][https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function](https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function)\n","slug":"2020-01-10-method-and-function-notes","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbg003sp3m2fihu5ff6","content":"<h3 id=\"1-What-is-the-different-between-method-and-function\"><a href=\"#1-What-is-the-different-between-method-and-function\" class=\"headerlink\" title=\"1.What is the different between method and function?\"></a>1.What is the different between method and function?</h3><blockquote>\n<p>A method is on an object. (Tn ti trn/trong mt Object)</p>\n</blockquote>\n<blockquote>\n<p>A function is independent of an object. (c lp vi cc Object)</p>\n</blockquote>\n<h3 id=\"2-Method-and-Function-in-programming-languages\"><a href=\"#2-Method-and-Function-in-programming-languages\" class=\"headerlink\" title=\"2.Method and Function in programming languages\"></a>2.Method and Function in programming languages</h3><blockquote>\n<p>For C, there are only functions (because no OOP context in C)</p>\n</blockquote>\n<blockquote>\n<p>For C++ it would depend on whether or not youre in a class.</p>\n</blockquote>\n<blockquote>\n<p>For Ruby, there are only methods, because almost anything in Ruby is Object and when you define a function not blong to any object, actually it still exist in an global object (feeling matrix movie).</p>\n</blockquote>\n<blockquote>\n<p>For Js, existing both.</p>\n</blockquote>\n<h3 id=\"3-Reference\"><a href=\"#3-Reference\" class=\"headerlink\" title=\"3.Reference\"></a>3.Reference</h3><p>[1]<a href=\"https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1-What-is-the-different-between-method-and-function\"><a href=\"#1-What-is-the-different-between-method-and-function\" class=\"headerlink\" title=\"1.What is the different between method and function?\"></a>1.What is the different between method and function?</h3><blockquote>\n<p>A method is on an object. (Tn ti trn/trong mt Object)</p>\n</blockquote>\n<blockquote>\n<p>A function is independent of an object. (c lp vi cc Object)</p>\n</blockquote>\n<h3 id=\"2-Method-and-Function-in-programming-languages\"><a href=\"#2-Method-and-Function-in-programming-languages\" class=\"headerlink\" title=\"2.Method and Function in programming languages\"></a>2.Method and Function in programming languages</h3><blockquote>\n<p>For C, there are only functions (because no OOP context in C)</p>\n</blockquote>\n<blockquote>\n<p>For C++ it would depend on whether or not youre in a class.</p>\n</blockquote>\n<blockquote>\n<p>For Ruby, there are only methods, because almost anything in Ruby is Object and when you define a function not blong to any object, actually it still exist in an global object (feeling matrix movie).</p>\n</blockquote>\n<blockquote>\n<p>For Js, existing both.</p>\n</blockquote>\n<h3 id=\"3-Reference\"><a href=\"#3-Reference\" class=\"headerlink\" title=\"3.Reference\"></a>3.Reference</h3><p>[1]<a href=\"https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function</a></p>\n"},{"title":"The THIS Keyword In Javascript","date":"2020-01-09T17:00:00.000Z","_content":"\nI don't remember I write the first line of JS code how long before from now. It seems like happen every a long time ago, Until now, I still do not know what exactly is **this** in JS. Too bad, but today I will try to understand it again.\n\n## What is THIS?\n\n**this** is an object in Javascript and object in Javascript like a hash in other language programming.\n\nIn a blank file js, if you run one line code blow:\n\n```javascript\nconsole.log(this);\n```\n\nSo, what is appear after run? The output will not is an error, just like blow:\n\n```javascript\n{}\n```\n\nSo, yes, **this** always exist in Javascript code. I used to believe **this** only exist in an object or in a function, but it's not true.\n\n> The JavaScript this keyword refers to the object it belongs to. So that is why always exist an this in Javascript.\n\n## THIS in Context\n\n**This** has different values depending on where it is used:\n\n1. In a **method**, this refers to the **owner object**.\n\n2. **Alone**, this refers to the **global object**.\n\n3. In a **function**, this refers to the **global object**.\n\n4. In a **function, in strict mode**, this is **undefined**.\n\n5. In **an event**, this refers to **the element that received the event**.\n\n6. Methods like call(), and apply() can refer this to any object.\n\n## Reference\n\n[1][https://www.w3schools.com/js/js_this.asp](https://www.w3schools.com/js/js_this.asp)\n\n[2][https://developer.mozilla.org/en-US/docs/Glossary/Global_object](https://developer.mozilla.org/en-US/docs/Glossary/Global_object)\n\n[3][https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/](https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/)\n","source":"_posts/2020-01-11-this-in-javascript.md","raw":"---\ntitle: \"The THIS Keyword In Javascript\"\ndate: 2020-01-10\ntags: [\"JS\"]\n# label: \"note\"\n---\n\nI don't remember I write the first line of JS code how long before from now. It seems like happen every a long time ago, Until now, I still do not know what exactly is **this** in JS. Too bad, but today I will try to understand it again.\n\n## What is THIS?\n\n**this** is an object in Javascript and object in Javascript like a hash in other language programming.\n\nIn a blank file js, if you run one line code blow:\n\n```javascript\nconsole.log(this);\n```\n\nSo, what is appear after run? The output will not is an error, just like blow:\n\n```javascript\n{}\n```\n\nSo, yes, **this** always exist in Javascript code. I used to believe **this** only exist in an object or in a function, but it's not true.\n\n> The JavaScript this keyword refers to the object it belongs to. So that is why always exist an this in Javascript.\n\n## THIS in Context\n\n**This** has different values depending on where it is used:\n\n1. In a **method**, this refers to the **owner object**.\n\n2. **Alone**, this refers to the **global object**.\n\n3. In a **function**, this refers to the **global object**.\n\n4. In a **function, in strict mode**, this is **undefined**.\n\n5. In **an event**, this refers to **the element that received the event**.\n\n6. Methods like call(), and apply() can refer this to any object.\n\n## Reference\n\n[1][https://www.w3schools.com/js/js_this.asp](https://www.w3schools.com/js/js_this.asp)\n\n[2][https://developer.mozilla.org/en-US/docs/Glossary/Global_object](https://developer.mozilla.org/en-US/docs/Glossary/Global_object)\n\n[3][https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/](https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/)\n","slug":"2020-01-11-this-in-javascript","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbi003tp3m2cmpa00ey","content":"<p>I dont remember I write the first line of JS code how long before from now. It seems like happen every a long time ago, Until now, I still do not know what exactly is <strong>this</strong> in JS. Too bad, but today I will try to understand it again.</p>\n<h2 id=\"What-is-THIS\"><a href=\"#What-is-THIS\" class=\"headerlink\" title=\"What is THIS?\"></a>What is THIS?</h2><p><strong>this</strong> is an object in Javascript and object in Javascript like a hash in other language programming.</p>\n<p>In a blank file js, if you run one line code blow:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>);</span><br></pre></td></tr></table></figure>\n\n<p>So, what is appear after run? The output will not is an error, just like blow:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>So, yes, <strong>this</strong> always exist in Javascript code. I used to believe <strong>this</strong> only exist in an object or in a function, but its not true.</p>\n<blockquote>\n<p>The JavaScript this keyword refers to the object it belongs to. So that is why always exist an this in Javascript.</p>\n</blockquote>\n<h2 id=\"THIS-in-Context\"><a href=\"#THIS-in-Context\" class=\"headerlink\" title=\"THIS in Context\"></a>THIS in Context</h2><p><strong>This</strong> has different values depending on where it is used:</p>\n<ol>\n<li><p>In a <strong>method</strong>, this refers to the <strong>owner object</strong>.</p>\n</li>\n<li><p><strong>Alone</strong>, this refers to the <strong>global object</strong>.</p>\n</li>\n<li><p>In a <strong>function</strong>, this refers to the <strong>global object</strong>.</p>\n</li>\n<li><p>In a <strong>function, in strict mode</strong>, this is <strong>undefined</strong>.</p>\n</li>\n<li><p>In <strong>an event</strong>, this refers to <strong>the element that received the event</strong>.</p>\n</li>\n<li><p>Methods like call(), and apply() can refer this to any object.</p>\n</li>\n</ol>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p>[1]<a href=\"https://www.w3schools.com/js/js_this.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/js/js_this.asp</a></p>\n<p>[2]<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Global_object\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Glossary/Global_object</a></p>\n<p>[3]<a href=\"https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/\" target=\"_blank\" rel=\"noopener\">https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>I dont remember I write the first line of JS code how long before from now. It seems like happen every a long time ago, Until now, I still do not know what exactly is <strong>this</strong> in JS. Too bad, but today I will try to understand it again.</p>\n<h2 id=\"What-is-THIS\"><a href=\"#What-is-THIS\" class=\"headerlink\" title=\"What is THIS?\"></a>What is THIS?</h2><p><strong>this</strong> is an object in Javascript and object in Javascript like a hash in other language programming.</p>\n<p>In a blank file js, if you run one line code blow:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>);</span><br></pre></td></tr></table></figure>\n\n<p>So, what is appear after run? The output will not is an error, just like blow:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>So, yes, <strong>this</strong> always exist in Javascript code. I used to believe <strong>this</strong> only exist in an object or in a function, but its not true.</p>\n<blockquote>\n<p>The JavaScript this keyword refers to the object it belongs to. So that is why always exist an this in Javascript.</p>\n</blockquote>\n<h2 id=\"THIS-in-Context\"><a href=\"#THIS-in-Context\" class=\"headerlink\" title=\"THIS in Context\"></a>THIS in Context</h2><p><strong>This</strong> has different values depending on where it is used:</p>\n<ol>\n<li><p>In a <strong>method</strong>, this refers to the <strong>owner object</strong>.</p>\n</li>\n<li><p><strong>Alone</strong>, this refers to the <strong>global object</strong>.</p>\n</li>\n<li><p>In a <strong>function</strong>, this refers to the <strong>global object</strong>.</p>\n</li>\n<li><p>In a <strong>function, in strict mode</strong>, this is <strong>undefined</strong>.</p>\n</li>\n<li><p>In <strong>an event</strong>, this refers to <strong>the element that received the event</strong>.</p>\n</li>\n<li><p>Methods like call(), and apply() can refer this to any object.</p>\n</li>\n</ol>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p>[1]<a href=\"https://www.w3schools.com/js/js_this.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/js/js_this.asp</a></p>\n<p>[2]<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Global_object\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Glossary/Global_object</a></p>\n<p>[3]<a href=\"https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/\" target=\"_blank\" rel=\"noopener\">https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/</a></p>\n"},{"title":"New Project Notes [Part 1]","date":"2020-02-04T17:00:00.000Z","label":"#note","_content":"\n## 1. Rbenv does not show all version ruby.\n\n- Reseaon: ruby-build outdated\n- Solution: update ruby-build\n\nFind ruby-build folder and pull the latest code, just type **git pull** (it is a repository).\n\n## 2. Apply bootstrap for rails 6\n\n- step 1: **yarn add bootstrap jquery popper.js**\n\n- step 2: add the code below to **config/webpack/environment.js**\n\n```js\nconst { environment } = require('@rails/webpacker')\n\nconst webpack = require('webpack')\nenvironment.plugins.append('Provide', new webpack.ProvidePlugin({\n  $: 'jquery',\n  jQuery: 'jquery',\n  Popper: ['popper.js', 'default']\n}))\n\nmodule.exports = environment\n```\n\n- step 3: add to **app/javascript/packs/application.js**\nrequire(\"bootstrap/dist/js/bootstrap\")\n\n- step 4: add to **app/assets/stylesheets/application.css**\n@import \"bootstrap/scss/bootstrap\";\n\n## 3. Apply git ignore to committed files\n\n- step 1: edit **.gitignore**\n- step 2: **git rm --cached /path/to/file* or *git rm --cached -r /path/to/folder**\n\n## 4. Rename both local and remote branch\n\n- step 1: rename local branch **git branch -m new-name**\n- step 2: delete old remote branch **git push origin :old-name new-name**\n- step 3: update for the new romote branch **git push origin -u new-name**\n\n## 5. References\n\n[1][https://gorails.com/forum/install-bootstrap-with-webpack-with-rails-6-beta](https://gorails.com/forum/install-bootstrap-with-webpack-with-rails-6-beta)\n\n[2][https://stackoverflow.com/questions/7527982/applying-gitignore-to-committed-files](https://stackoverflow.com/questions/7527982/applying-gitignore-to-committed-files)\n\n[3][https://linuxize.com/post/how-to-create-mysql-user-accounts-and-grant-privileges/](https://linuxize.com/post/how-to-create-mysql-user-accounts-and-grant-privileges/)\n\n[4][https://multiplestates.wordpress.com/2015/02/05/rename-a-local-and-remote-branch-in-git/](https://multiplestates.wordpress.com/2015/02/05/rename-a-local-and-remote-branch-in-git/)\n","source":"_posts/2020-02-05-the-first-note-in-the-new-luna-year.md","raw":"---\ntitle: \"New Project Notes [Part 1]\"\ndate: 2020-02-05\ntags: [\"NOTES\"]\nlabel: \"#note\"\n---\n\n## 1. Rbenv does not show all version ruby.\n\n- Reseaon: ruby-build outdated\n- Solution: update ruby-build\n\nFind ruby-build folder and pull the latest code, just type **git pull** (it is a repository).\n\n## 2. Apply bootstrap for rails 6\n\n- step 1: **yarn add bootstrap jquery popper.js**\n\n- step 2: add the code below to **config/webpack/environment.js**\n\n```js\nconst { environment } = require('@rails/webpacker')\n\nconst webpack = require('webpack')\nenvironment.plugins.append('Provide', new webpack.ProvidePlugin({\n  $: 'jquery',\n  jQuery: 'jquery',\n  Popper: ['popper.js', 'default']\n}))\n\nmodule.exports = environment\n```\n\n- step 3: add to **app/javascript/packs/application.js**\nrequire(\"bootstrap/dist/js/bootstrap\")\n\n- step 4: add to **app/assets/stylesheets/application.css**\n@import \"bootstrap/scss/bootstrap\";\n\n## 3. Apply git ignore to committed files\n\n- step 1: edit **.gitignore**\n- step 2: **git rm --cached /path/to/file* or *git rm --cached -r /path/to/folder**\n\n## 4. Rename both local and remote branch\n\n- step 1: rename local branch **git branch -m new-name**\n- step 2: delete old remote branch **git push origin :old-name new-name**\n- step 3: update for the new romote branch **git push origin -u new-name**\n\n## 5. References\n\n[1][https://gorails.com/forum/install-bootstrap-with-webpack-with-rails-6-beta](https://gorails.com/forum/install-bootstrap-with-webpack-with-rails-6-beta)\n\n[2][https://stackoverflow.com/questions/7527982/applying-gitignore-to-committed-files](https://stackoverflow.com/questions/7527982/applying-gitignore-to-committed-files)\n\n[3][https://linuxize.com/post/how-to-create-mysql-user-accounts-and-grant-privileges/](https://linuxize.com/post/how-to-create-mysql-user-accounts-and-grant-privileges/)\n\n[4][https://multiplestates.wordpress.com/2015/02/05/rename-a-local-and-remote-branch-in-git/](https://multiplestates.wordpress.com/2015/02/05/rename-a-local-and-remote-branch-in-git/)\n","slug":"2020-02-05-the-first-note-in-the-new-luna-year","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbn003vp3m2dc3g8eeg","content":"<h2 id=\"1-Rbenv-does-not-show-all-version-ruby\"><a href=\"#1-Rbenv-does-not-show-all-version-ruby\" class=\"headerlink\" title=\"1. Rbenv does not show all version ruby.\"></a>1. Rbenv does not show all version ruby.</h2><ul>\n<li>Reseaon: ruby-build outdated</li>\n<li>Solution: update ruby-build</li>\n</ul>\n<p>Find ruby-build folder and pull the latest code, just type <strong>git pull</strong> (it is a repository).</p>\n<h2 id=\"2-Apply-bootstrap-for-rails-6\"><a href=\"#2-Apply-bootstrap-for-rails-6\" class=\"headerlink\" title=\"2. Apply bootstrap for rails 6\"></a>2. Apply bootstrap for rails 6</h2><ul>\n<li><p>step 1: <strong>yarn add bootstrap jquery popper.js</strong></p>\n</li>\n<li><p>step 2: add the code below to <strong>config/webpack/environment.js</strong></p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; environment &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'@rails/webpacker'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</span><br><span class=\"line\">environment.plugins.append(<span class=\"string\">'Provide'</span>, <span class=\"keyword\">new</span> webpack.ProvidePlugin(&#123;</span><br><span class=\"line\">  $: <span class=\"string\">'jquery'</span>,</span><br><span class=\"line\">  jQuery: <span class=\"string\">'jquery'</span>,</span><br><span class=\"line\">  Popper: [<span class=\"string\">'popper.js'</span>, <span class=\"string\">'default'</span>]</span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = environment</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>step 3: add to <strong>app/javascript/packs/application.js</strong><br>require(bootstrap/dist/js/bootstrap)</p>\n</li>\n<li><p>step 4: add to <strong>app/assets/stylesheets/application.css</strong><br>@import bootstrap/scss/bootstrap;</p>\n</li>\n</ul>\n<h2 id=\"3-Apply-git-ignore-to-committed-files\"><a href=\"#3-Apply-git-ignore-to-committed-files\" class=\"headerlink\" title=\"3. Apply git ignore to committed files\"></a>3. Apply git ignore to committed files</h2><ul>\n<li>step 1: edit <strong>.gitignore</strong></li>\n<li>step 2: <strong>git rm cached /path/to/file* or *git rm cached -r /path/to/folder</strong></li>\n</ul>\n<h2 id=\"4-Rename-both-local-and-remote-branch\"><a href=\"#4-Rename-both-local-and-remote-branch\" class=\"headerlink\" title=\"4. Rename both local and remote branch\"></a>4. Rename both local and remote branch</h2><ul>\n<li>step 1: rename local branch <strong>git branch -m new-name</strong></li>\n<li>step 2: delete old remote branch <strong>git push origin :old-name new-name</strong></li>\n<li>step 3: update for the new romote branch <strong>git push origin -u new-name</strong></li>\n</ul>\n<h2 id=\"5-References\"><a href=\"#5-References\" class=\"headerlink\" title=\"5. References\"></a>5. References</h2><p>[1]<a href=\"https://gorails.com/forum/install-bootstrap-with-webpack-with-rails-6-beta\" target=\"_blank\" rel=\"noopener\">https://gorails.com/forum/install-bootstrap-with-webpack-with-rails-6-beta</a></p>\n<p>[2]<a href=\"https://stackoverflow.com/questions/7527982/applying-gitignore-to-committed-files\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/7527982/applying-gitignore-to-committed-files</a></p>\n<p>[3]<a href=\"https://linuxize.com/post/how-to-create-mysql-user-accounts-and-grant-privileges/\" target=\"_blank\" rel=\"noopener\">https://linuxize.com/post/how-to-create-mysql-user-accounts-and-grant-privileges/</a></p>\n<p>[4]<a href=\"https://multiplestates.wordpress.com/2015/02/05/rename-a-local-and-remote-branch-in-git/\" target=\"_blank\" rel=\"noopener\">https://multiplestates.wordpress.com/2015/02/05/rename-a-local-and-remote-branch-in-git/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Rbenv-does-not-show-all-version-ruby\"><a href=\"#1-Rbenv-does-not-show-all-version-ruby\" class=\"headerlink\" title=\"1. Rbenv does not show all version ruby.\"></a>1. Rbenv does not show all version ruby.</h2><ul>\n<li>Reseaon: ruby-build outdated</li>\n<li>Solution: update ruby-build</li>\n</ul>\n<p>Find ruby-build folder and pull the latest code, just type <strong>git pull</strong> (it is a repository).</p>\n<h2 id=\"2-Apply-bootstrap-for-rails-6\"><a href=\"#2-Apply-bootstrap-for-rails-6\" class=\"headerlink\" title=\"2. Apply bootstrap for rails 6\"></a>2. Apply bootstrap for rails 6</h2><ul>\n<li><p>step 1: <strong>yarn add bootstrap jquery popper.js</strong></p>\n</li>\n<li><p>step 2: add the code below to <strong>config/webpack/environment.js</strong></p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; environment &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'@rails/webpacker'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</span><br><span class=\"line\">environment.plugins.append(<span class=\"string\">'Provide'</span>, <span class=\"keyword\">new</span> webpack.ProvidePlugin(&#123;</span><br><span class=\"line\">  $: <span class=\"string\">'jquery'</span>,</span><br><span class=\"line\">  jQuery: <span class=\"string\">'jquery'</span>,</span><br><span class=\"line\">  Popper: [<span class=\"string\">'popper.js'</span>, <span class=\"string\">'default'</span>]</span><br><span class=\"line\">&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = environment</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>step 3: add to <strong>app/javascript/packs/application.js</strong><br>require(bootstrap/dist/js/bootstrap)</p>\n</li>\n<li><p>step 4: add to <strong>app/assets/stylesheets/application.css</strong><br>@import bootstrap/scss/bootstrap;</p>\n</li>\n</ul>\n<h2 id=\"3-Apply-git-ignore-to-committed-files\"><a href=\"#3-Apply-git-ignore-to-committed-files\" class=\"headerlink\" title=\"3. Apply git ignore to committed files\"></a>3. Apply git ignore to committed files</h2><ul>\n<li>step 1: edit <strong>.gitignore</strong></li>\n<li>step 2: <strong>git rm cached /path/to/file* or *git rm cached -r /path/to/folder</strong></li>\n</ul>\n<h2 id=\"4-Rename-both-local-and-remote-branch\"><a href=\"#4-Rename-both-local-and-remote-branch\" class=\"headerlink\" title=\"4. Rename both local and remote branch\"></a>4. Rename both local and remote branch</h2><ul>\n<li>step 1: rename local branch <strong>git branch -m new-name</strong></li>\n<li>step 2: delete old remote branch <strong>git push origin :old-name new-name</strong></li>\n<li>step 3: update for the new romote branch <strong>git push origin -u new-name</strong></li>\n</ul>\n<h2 id=\"5-References\"><a href=\"#5-References\" class=\"headerlink\" title=\"5. References\"></a>5. References</h2><p>[1]<a href=\"https://gorails.com/forum/install-bootstrap-with-webpack-with-rails-6-beta\" target=\"_blank\" rel=\"noopener\">https://gorails.com/forum/install-bootstrap-with-webpack-with-rails-6-beta</a></p>\n<p>[2]<a href=\"https://stackoverflow.com/questions/7527982/applying-gitignore-to-committed-files\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/7527982/applying-gitignore-to-committed-files</a></p>\n<p>[3]<a href=\"https://linuxize.com/post/how-to-create-mysql-user-accounts-and-grant-privileges/\" target=\"_blank\" rel=\"noopener\">https://linuxize.com/post/how-to-create-mysql-user-accounts-and-grant-privileges/</a></p>\n<p>[4]<a href=\"https://multiplestates.wordpress.com/2015/02/05/rename-a-local-and-remote-branch-in-git/\" target=\"_blank\" rel=\"noopener\">https://multiplestates.wordpress.com/2015/02/05/rename-a-local-and-remote-branch-in-git/</a></p>\n"},{"title":"New Project Notes [Part 2]","date":"2020-03-15T17:00:00.000Z","label":"#note","_content":"\n## 1. Install homebrew formula\n\nWhen you install a new homebrew formula, homebrew will update all formula as default option. In almost case, it's no problem. But, if you'd like to install new formula without update current formula, try:\n\n```\nHOMEBREW_NO_AUTO_UPDATE=1 brew install <formula>\n```\n\n## 2. Why you need run \"bundle exec\"\n\nYou have installed rspec for your project. sometime you run **rspec** and everything work well, but sometimes it does not, it required you type **bundle exec rspec**.\n\nThe short explain, when you have more than one version of gem (eg. rspec), you need type **bundle exec** to tell rails use the version in Gemfile (Gemfile.lock)\n\n\n## 3. Install the older version mysql in macos with homebrew\n\nToday, I have a crazy problem with our project that we are working on. The one f**king lib in this project need mysql 5.7\n\nBut, remember, when you copy paste from go rails to install ruby, rails and related databases, we always install the lastest version of all, :D\n\nSo what? Let quick check mysql version on my machine...\n\nOh, shit, above 8.0.\n\nOk, no worry, just google \"how to install another mysql version with homebrew\" and then I take 3 hours to install, remove, run command which I have no idea what it doing for....and still  get error, error and error again. I'm sad, I lost my hope about my carrer :(\n\nAnd finally, I try to install mysql 5.7\n\n1. Remove mysql current version\n```\nbrew uninstall mysql\n```\n\n2. Remove mysql version 5.7\n```\nbrew uninstall mysql@5.7\n```\n\n3. Remove folder config mysql\n```\nrm -rf /usr/local/var/mysql\n```\n\n4. Remove config file\n```\nrm /usr/local/etc/my.cnf\n```\n\n5. Reinstall mysql version 5.7\n```\nrm /usr/local/etc/my.cnf\n```\n\n6. Manually link to mysql 5.7 because it's not latest version so home brew will do nothing\n\n```\nbrew link --force mysql@5.7\n```\n\n7. Start mysql 5.7\n```\nbrew services start mysql@5.7\n```\n\n8. Important note\nWhen you reinstall mysql with older version, in all projects that you used mysql, you need to **gem uninstall mysql2** and **bundle** to reinstall gems mysql2, if not, you will get error.\n\n## 4. Ignore migration file check\n```ruby\nconfig.active_record.migration_error = false\n```\n\nAdd above config to config file.(config/envirements/*.rb)\n\n## 3. References\n\n[1][https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean](https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean)\n\n[2][https://medium.com/@at0dd/install-mysql-5-7-on-mac-os-mojave-cd07ec936034](https://medium.com/@at0dd/install-mysql-5-7-on-mac-os-mojave-cd07ec936034)\n","source":"_posts/2020-03-16-new-project-notes-2.md","raw":"---\ntitle: \"New Project Notes [Part 2]\"\ndate: 2020-03-16\ntags: [\"NOTES\"]\nlabel: \"#note\"\n---\n\n## 1. Install homebrew formula\n\nWhen you install a new homebrew formula, homebrew will update all formula as default option. In almost case, it's no problem. But, if you'd like to install new formula without update current formula, try:\n\n```\nHOMEBREW_NO_AUTO_UPDATE=1 brew install <formula>\n```\n\n## 2. Why you need run \"bundle exec\"\n\nYou have installed rspec for your project. sometime you run **rspec** and everything work well, but sometimes it does not, it required you type **bundle exec rspec**.\n\nThe short explain, when you have more than one version of gem (eg. rspec), you need type **bundle exec** to tell rails use the version in Gemfile (Gemfile.lock)\n\n\n## 3. Install the older version mysql in macos with homebrew\n\nToday, I have a crazy problem with our project that we are working on. The one f**king lib in this project need mysql 5.7\n\nBut, remember, when you copy paste from go rails to install ruby, rails and related databases, we always install the lastest version of all, :D\n\nSo what? Let quick check mysql version on my machine...\n\nOh, shit, above 8.0.\n\nOk, no worry, just google \"how to install another mysql version with homebrew\" and then I take 3 hours to install, remove, run command which I have no idea what it doing for....and still  get error, error and error again. I'm sad, I lost my hope about my carrer :(\n\nAnd finally, I try to install mysql 5.7\n\n1. Remove mysql current version\n```\nbrew uninstall mysql\n```\n\n2. Remove mysql version 5.7\n```\nbrew uninstall mysql@5.7\n```\n\n3. Remove folder config mysql\n```\nrm -rf /usr/local/var/mysql\n```\n\n4. Remove config file\n```\nrm /usr/local/etc/my.cnf\n```\n\n5. Reinstall mysql version 5.7\n```\nrm /usr/local/etc/my.cnf\n```\n\n6. Manually link to mysql 5.7 because it's not latest version so home brew will do nothing\n\n```\nbrew link --force mysql@5.7\n```\n\n7. Start mysql 5.7\n```\nbrew services start mysql@5.7\n```\n\n8. Important note\nWhen you reinstall mysql with older version, in all projects that you used mysql, you need to **gem uninstall mysql2** and **bundle** to reinstall gems mysql2, if not, you will get error.\n\n## 4. Ignore migration file check\n```ruby\nconfig.active_record.migration_error = false\n```\n\nAdd above config to config file.(config/envirements/*.rb)\n\n## 3. References\n\n[1][https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean](https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean)\n\n[2][https://medium.com/@at0dd/install-mysql-5-7-on-mac-os-mojave-cd07ec936034](https://medium.com/@at0dd/install-mysql-5-7-on-mac-os-mojave-cd07ec936034)\n","slug":"2020-03-16-new-project-notes-2","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbn003xp3m2c9i3ebk3","content":"<h2 id=\"1-Install-homebrew-formula\"><a href=\"#1-Install-homebrew-formula\" class=\"headerlink\" title=\"1. Install homebrew formula\"></a>1. Install homebrew formula</h2><p>When you install a new homebrew formula, homebrew will update all formula as default option. In almost case, its no problem. But, if youd like to install new formula without update current formula, try:</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">HOMEBREW_NO_AUTO_UPDATE</span>=<span class=\"number\">1</span> brew install &lt;formula&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Why-you-need-run-bundle-exec\"><a href=\"#2-Why-you-need-run-bundle-exec\" class=\"headerlink\" title=\"2. Why you need run bundle exec\"></a>2. Why you need run bundle exec</h2><p>You have installed rspec for your project. sometime you run <strong>rspec</strong> and everything work well, but sometimes it does not, it required you type <strong>bundle exec rspec</strong>.</p>\n<p>The short explain, when you have more than one version of gem (eg. rspec), you need type <strong>bundle exec</strong> to tell rails use the version in Gemfile (Gemfile.lock)</p>\n<h2 id=\"3-Install-the-older-version-mysql-in-macos-with-homebrew\"><a href=\"#3-Install-the-older-version-mysql-in-macos-with-homebrew\" class=\"headerlink\" title=\"3. Install the older version mysql in macos with homebrew\"></a>3. Install the older version mysql in macos with homebrew</h2><p>Today, I have a crazy problem with our project that we are working on. The one f**king lib in this project need mysql 5.7</p>\n<p>But, remember, when you copy paste from go rails to install ruby, rails and related databases, we always install the lastest version of all, :D</p>\n<p>So what? Let quick check mysql version on my machine</p>\n<p>Oh, shit, above 8.0.</p>\n<p>Ok, no worry, just google how to install another mysql version with homebrew and then I take 3 hours to install, remove, run command which I have no idea what it doing for.and still  get error, error and error again. Im sad, I lost my hope about my carrer :(</p>\n<p>And finally, I try to install mysql 5.7</p>\n<ol>\n<li><p>Remove mysql current version</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">brew </span>uninstall mysql</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Remove mysql version 5.7</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew uninstall <span class=\"symbol\">mysql@</span><span class=\"number\">5.7</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Remove folder config mysql</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">rm</span> -rf /usr/<span class=\"keyword\">local</span>/<span class=\"keyword\">var</span>/mysql</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Remove config file</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /usr/<span class=\"keyword\">local</span>/etc/<span class=\"keyword\">my</span>.cnf</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Reinstall mysql version 5.7</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /usr/<span class=\"keyword\">local</span>/etc/<span class=\"keyword\">my</span>.cnf</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Manually link to mysql 5.7 because its not latest version so home brew will do nothing</p>\n</li>\n</ol>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew link --force <span class=\"symbol\">mysql@</span><span class=\"number\">5.7</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"7\">\n<li><p>Start mysql 5.7</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew services start <span class=\"symbol\">mysql@</span><span class=\"number\">5.7</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Important note<br>When you reinstall mysql with older version, in all projects that you used mysql, you need to <strong>gem uninstall mysql2</strong> and <strong>bundle</strong> to reinstall gems mysql2, if not, you will get error.</p>\n</li>\n</ol>\n<h2 id=\"4-Ignore-migration-file-check\"><a href=\"#4-Ignore-migration-file-check\" class=\"headerlink\" title=\"4. Ignore migration file check\"></a>4. Ignore migration file check</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">config.active_record.migration_error = <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<p>Add above config to config file.(config/envirements/*.rb)</p>\n<h2 id=\"3-References\"><a href=\"#3-References\" class=\"headerlink\" title=\"3. References\"></a>3. References</h2><p>[1]<a href=\"https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean</a></p>\n<p>[2]<a href=\"https://medium.com/@at0dd/install-mysql-5-7-on-mac-os-mojave-cd07ec936034\" target=\"_blank\" rel=\"noopener\">https://medium.com/@at0dd/install-mysql-5-7-on-mac-os-mojave-cd07ec936034</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Install-homebrew-formula\"><a href=\"#1-Install-homebrew-formula\" class=\"headerlink\" title=\"1. Install homebrew formula\"></a>1. Install homebrew formula</h2><p>When you install a new homebrew formula, homebrew will update all formula as default option. In almost case, its no problem. But, if youd like to install new formula without update current formula, try:</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">HOMEBREW_NO_AUTO_UPDATE</span>=<span class=\"number\">1</span> brew install &lt;formula&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Why-you-need-run-bundle-exec\"><a href=\"#2-Why-you-need-run-bundle-exec\" class=\"headerlink\" title=\"2. Why you need run bundle exec\"></a>2. Why you need run bundle exec</h2><p>You have installed rspec for your project. sometime you run <strong>rspec</strong> and everything work well, but sometimes it does not, it required you type <strong>bundle exec rspec</strong>.</p>\n<p>The short explain, when you have more than one version of gem (eg. rspec), you need type <strong>bundle exec</strong> to tell rails use the version in Gemfile (Gemfile.lock)</p>\n<h2 id=\"3-Install-the-older-version-mysql-in-macos-with-homebrew\"><a href=\"#3-Install-the-older-version-mysql-in-macos-with-homebrew\" class=\"headerlink\" title=\"3. Install the older version mysql in macos with homebrew\"></a>3. Install the older version mysql in macos with homebrew</h2><p>Today, I have a crazy problem with our project that we are working on. The one f**king lib in this project need mysql 5.7</p>\n<p>But, remember, when you copy paste from go rails to install ruby, rails and related databases, we always install the lastest version of all, :D</p>\n<p>So what? Let quick check mysql version on my machine</p>\n<p>Oh, shit, above 8.0.</p>\n<p>Ok, no worry, just google how to install another mysql version with homebrew and then I take 3 hours to install, remove, run command which I have no idea what it doing for.and still  get error, error and error again. Im sad, I lost my hope about my carrer :(</p>\n<p>And finally, I try to install mysql 5.7</p>\n<ol>\n<li><p>Remove mysql current version</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">brew </span>uninstall mysql</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Remove mysql version 5.7</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew uninstall <span class=\"symbol\">mysql@</span><span class=\"number\">5.7</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Remove folder config mysql</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">rm</span> -rf /usr/<span class=\"keyword\">local</span>/<span class=\"keyword\">var</span>/mysql</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Remove config file</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /usr/<span class=\"keyword\">local</span>/etc/<span class=\"keyword\">my</span>.cnf</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Reinstall mysql version 5.7</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /usr/<span class=\"keyword\">local</span>/etc/<span class=\"keyword\">my</span>.cnf</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Manually link to mysql 5.7 because its not latest version so home brew will do nothing</p>\n</li>\n</ol>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew link --force <span class=\"symbol\">mysql@</span><span class=\"number\">5.7</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"7\">\n<li><p>Start mysql 5.7</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew services start <span class=\"symbol\">mysql@</span><span class=\"number\">5.7</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Important note<br>When you reinstall mysql with older version, in all projects that you used mysql, you need to <strong>gem uninstall mysql2</strong> and <strong>bundle</strong> to reinstall gems mysql2, if not, you will get error.</p>\n</li>\n</ol>\n<h2 id=\"4-Ignore-migration-file-check\"><a href=\"#4-Ignore-migration-file-check\" class=\"headerlink\" title=\"4. Ignore migration file check\"></a>4. Ignore migration file check</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">config.active_record.migration_error = <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<p>Add above config to config file.(config/envirements/*.rb)</p>\n<h2 id=\"3-References\"><a href=\"#3-References\" class=\"headerlink\" title=\"3. References\"></a>3. References</h2><p>[1]<a href=\"https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean</a></p>\n<p>[2]<a href=\"https://medium.com/@at0dd/install-mysql-5-7-on-mac-os-mojave-cd07ec936034\" target=\"_blank\" rel=\"noopener\">https://medium.com/@at0dd/install-mysql-5-7-on-mac-os-mojave-cd07ec936034</a></p>\n"},{"title":"Redux Notes","date":"2020-01-08T17:00:00.000Z","label":"#note","_content":"\nSource from:\n\n[1][https://www.youtube.com/watch?v=HOrA-uzZpw8](https://www.youtube.com/watch?v=HOrA-uzZpw8)\n[2][https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js](https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js)\n\n```javascript\n// Copy from: https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js\nconsole.log(window.Redux)\n\nconst { createStore } = window.Redux;\n\n// SETUP REDUX STORE\n// state\n// reducer\n// store\nconst initialState = JSON.parse(localStorage.getItem('hobby_list')) || [];\n\nconst hobbyReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ADD_HOBBY': {\n      const newList = [...state];\n      newList.push(action.payload);\n\n      return newList;\n    }\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(hobbyReducer);\n\n// -----------------\n\n// RENDER REDUX HOBBY LIST\nconst renderHobbyList = (hobbyList) => {\n  if (!Array.isArray(hobbyList) || hobbyList.length === 0) return;\n\n  const ulElement = document.querySelector('#hobbyListId');\n  if (!ulElement) return;\n\n  // reset previous content of ul\n  ulElement.innerHTML = '';\n\n  for (const hobby of hobbyList) {\n    const liElement = document.createElement('li');\n    liElement.textContent = hobby;\n\n    ulElement.appendChild(liElement);\n  }\n}\n\n\n// RENDER INITIAL HOBBY LIST\nconst initialHobbyList = store.getState();\nconsole.log(initialHobbyList);\nrenderHobbyList(initialHobbyList);\n\n\n// HANDLE FORM SUBMIT\nconst hobbyFormElement = document.querySelector('#hobbyFormId');\nif (hobbyFormElement) {\n  const handleFormSubmit = (e) => {\n    // prevent browser from reloading\n    e.preventDefault();\n\n    const hobbyTextElement = hobbyFormElement.querySelector('#hobbyTextId');\n    if (!hobbyTextElement) return;\n\n    console.log('SUBMIT', hobbyTextElement.value);\n    const action = {\n      type: 'ADD_HOBBY',\n      payload: hobbyTextElement.value\n    };\n    store.dispatch(action);\n\n    // reset form\n    hobbyFormElement.reset();\n  };\n\n  hobbyFormElement.addEventListener('submit', handleFormSubmit);\n}\n\nstore.subscribe(() => {\n  console.log('STATE UPDATE: ', store.getState());\n  const newHobbyList = store.getState();\n  renderHobbyList(newHobbyList);\n\n  localStorage.setItem('hobby_list', JSON.stringify(newHobbyList));\n});\n```\n","source":"_posts/2020-03-8-redux-co-ban.md","raw":"---\ntitle: \"Redux Notes\"\ndate: 2020-01-09\ntags: [\"NOTES\"]\nlabel: \"#note\"\n---\n\nSource from:\n\n[1][https://www.youtube.com/watch?v=HOrA-uzZpw8](https://www.youtube.com/watch?v=HOrA-uzZpw8)\n[2][https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js](https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js)\n\n```javascript\n// Copy from: https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js\nconsole.log(window.Redux)\n\nconst { createStore } = window.Redux;\n\n// SETUP REDUX STORE\n// state\n// reducer\n// store\nconst initialState = JSON.parse(localStorage.getItem('hobby_list')) || [];\n\nconst hobbyReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ADD_HOBBY': {\n      const newList = [...state];\n      newList.push(action.payload);\n\n      return newList;\n    }\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(hobbyReducer);\n\n// -----------------\n\n// RENDER REDUX HOBBY LIST\nconst renderHobbyList = (hobbyList) => {\n  if (!Array.isArray(hobbyList) || hobbyList.length === 0) return;\n\n  const ulElement = document.querySelector('#hobbyListId');\n  if (!ulElement) return;\n\n  // reset previous content of ul\n  ulElement.innerHTML = '';\n\n  for (const hobby of hobbyList) {\n    const liElement = document.createElement('li');\n    liElement.textContent = hobby;\n\n    ulElement.appendChild(liElement);\n  }\n}\n\n\n// RENDER INITIAL HOBBY LIST\nconst initialHobbyList = store.getState();\nconsole.log(initialHobbyList);\nrenderHobbyList(initialHobbyList);\n\n\n// HANDLE FORM SUBMIT\nconst hobbyFormElement = document.querySelector('#hobbyFormId');\nif (hobbyFormElement) {\n  const handleFormSubmit = (e) => {\n    // prevent browser from reloading\n    e.preventDefault();\n\n    const hobbyTextElement = hobbyFormElement.querySelector('#hobbyTextId');\n    if (!hobbyTextElement) return;\n\n    console.log('SUBMIT', hobbyTextElement.value);\n    const action = {\n      type: 'ADD_HOBBY',\n      payload: hobbyTextElement.value\n    };\n    store.dispatch(action);\n\n    // reset form\n    hobbyFormElement.reset();\n  };\n\n  hobbyFormElement.addEventListener('submit', handleFormSubmit);\n}\n\nstore.subscribe(() => {\n  console.log('STATE UPDATE: ', store.getState());\n  const newHobbyList = store.getState();\n  renderHobbyList(newHobbyList);\n\n  localStorage.setItem('hobby_list', JSON.stringify(newHobbyList));\n});\n```\n","slug":"2020-03-8-redux-co-ban","published":1,"updated":"2022-01-29T09:29:59.929Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbo0040p3m2dz43gip5","content":"<p>Source from:</p>\n<p>[1]<a href=\"https://www.youtube.com/watch?v=HOrA-uzZpw8\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=HOrA-uzZpw8</a><br>[2]<a href=\"https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js\" target=\"_blank\" rel=\"noopener\">https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">window</span>.Redux)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; createStore &#125; = <span class=\"built_in\">window</span>.Redux;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// SETUP REDUX STORE</span></span><br><span class=\"line\"><span class=\"comment\">// state</span></span><br><span class=\"line\"><span class=\"comment\">// reducer</span></span><br><span class=\"line\"><span class=\"comment\">// store</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = <span class=\"built_in\">JSON</span>.parse(localStorage.getItem(<span class=\"string\">'hobby_list'</span>)) || [];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> hobbyReducer = <span class=\"function\">(<span class=\"params\">state = initialState, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'ADD_HOBBY'</span>: &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> newList = [...state];</span><br><span class=\"line\">      newList.push(action.payload);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> newList;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(hobbyReducer);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// -----------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// RENDER REDUX HOBBY LIST</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> renderHobbyList = <span class=\"function\">(<span class=\"params\">hobbyList</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"built_in\">Array</span>.isArray(hobbyList) || hobbyList.length === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> ulElement = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#hobbyListId'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!ulElement) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// reset previous content of ul</span></span><br><span class=\"line\">  ulElement.innerHTML = <span class=\"string\">''</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> hobby <span class=\"keyword\">of</span> hobbyList) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> liElement = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'li'</span>);</span><br><span class=\"line\">    liElement.textContent = hobby;</span><br><span class=\"line\"></span><br><span class=\"line\">    ulElement.appendChild(liElement);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// RENDER INITIAL HOBBY LIST</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialHobbyList = store.getState();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(initialHobbyList);</span><br><span class=\"line\">renderHobbyList(initialHobbyList);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// HANDLE FORM SUBMIT</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> hobbyFormElement = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#hobbyFormId'</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (hobbyFormElement) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleFormSubmit = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// prevent browser from reloading</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> hobbyTextElement = hobbyFormElement.querySelector(<span class=\"string\">'#hobbyTextId'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!hobbyTextElement) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'SUBMIT'</span>, hobbyTextElement.value);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> action = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'ADD_HOBBY'</span>,</span><br><span class=\"line\">      payload: hobbyTextElement.value</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    store.dispatch(action);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// reset form</span></span><br><span class=\"line\">    hobbyFormElement.reset();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  hobbyFormElement.addEventListener(<span class=\"string\">'submit'</span>, handleFormSubmit);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">store.subscribe(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'STATE UPDATE: '</span>, store.getState());</span><br><span class=\"line\">  <span class=\"keyword\">const</span> newHobbyList = store.getState();</span><br><span class=\"line\">  renderHobbyList(newHobbyList);</span><br><span class=\"line\"></span><br><span class=\"line\">  localStorage.setItem(<span class=\"string\">'hobby_list'</span>, <span class=\"built_in\">JSON</span>.stringify(newHobbyList));</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>Source from:</p>\n<p>[1]<a href=\"https://www.youtube.com/watch?v=HOrA-uzZpw8\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=HOrA-uzZpw8</a><br>[2]<a href=\"https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js\" target=\"_blank\" rel=\"noopener\">https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: https://github.com/paulnguyen-mn/redux-pure-js/blob/master/main.js</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"built_in\">window</span>.Redux)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; createStore &#125; = <span class=\"built_in\">window</span>.Redux;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// SETUP REDUX STORE</span></span><br><span class=\"line\"><span class=\"comment\">// state</span></span><br><span class=\"line\"><span class=\"comment\">// reducer</span></span><br><span class=\"line\"><span class=\"comment\">// store</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState = <span class=\"built_in\">JSON</span>.parse(localStorage.getItem(<span class=\"string\">'hobby_list'</span>)) || [];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> hobbyReducer = <span class=\"function\">(<span class=\"params\">state = initialState, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'ADD_HOBBY'</span>: &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> newList = [...state];</span><br><span class=\"line\">      newList.push(action.payload);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> newList;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(hobbyReducer);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// -----------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// RENDER REDUX HOBBY LIST</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> renderHobbyList = <span class=\"function\">(<span class=\"params\">hobbyList</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"built_in\">Array</span>.isArray(hobbyList) || hobbyList.length === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> ulElement = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#hobbyListId'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!ulElement) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// reset previous content of ul</span></span><br><span class=\"line\">  ulElement.innerHTML = <span class=\"string\">''</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> hobby <span class=\"keyword\">of</span> hobbyList) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> liElement = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'li'</span>);</span><br><span class=\"line\">    liElement.textContent = hobby;</span><br><span class=\"line\"></span><br><span class=\"line\">    ulElement.appendChild(liElement);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// RENDER INITIAL HOBBY LIST</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialHobbyList = store.getState();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(initialHobbyList);</span><br><span class=\"line\">renderHobbyList(initialHobbyList);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// HANDLE FORM SUBMIT</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> hobbyFormElement = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#hobbyFormId'</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (hobbyFormElement) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleFormSubmit = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// prevent browser from reloading</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> hobbyTextElement = hobbyFormElement.querySelector(<span class=\"string\">'#hobbyTextId'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!hobbyTextElement) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'SUBMIT'</span>, hobbyTextElement.value);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> action = &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'ADD_HOBBY'</span>,</span><br><span class=\"line\">      payload: hobbyTextElement.value</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    store.dispatch(action);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// reset form</span></span><br><span class=\"line\">    hobbyFormElement.reset();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  hobbyFormElement.addEventListener(<span class=\"string\">'submit'</span>, handleFormSubmit);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">store.subscribe(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'STATE UPDATE: '</span>, store.getState());</span><br><span class=\"line\">  <span class=\"keyword\">const</span> newHobbyList = store.getState();</span><br><span class=\"line\">  renderHobbyList(newHobbyList);</span><br><span class=\"line\"></span><br><span class=\"line\">  localStorage.setItem(<span class=\"string\">'hobby_list'</span>, <span class=\"built_in\">JSON</span>.stringify(newHobbyList));</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n"},{"title":"Exception Trong Rails [Part 2]","date":"2020-04-22T17:00:00.000Z","_content":"\n## 1. X l exception trong method\n\nE.g. Trong products_controller.rb ta c method sau:\n\n```ruby\n  def show\n    product = Product.find(12)\n\n    render layout_for_product_detail\n  end\n```\n\nNu khng c product no c id = 12, on code trn s gp li, v ngi dng s nhn c 1 mn hnh error server.\n\nKhng mun iu ny xy ra, ta update li on code nh sau:\n\n```ruby\ndef show\n  begin\n    product = Product.find(12)\n\n    render layout_for_product_detail\n  rescue StandardError => e\n    # Do something good for user\n  end\nend\n```\n\nVy l n, nh trong bi phn 1, catch exception vi StandardError l  tt  p dng v c l  tt  pass review code.\n\n## 2. X l exception vi controller\n\nPhn 1  n, nhng khng c tt, l do l v nu chng ta c 100 methods, vy chng ta s lp li on catch exception kia 100 ln. Khng DRY cht no, vit 1 chc method lp li cng 1 exception th c l khng pass c review code =))\n\nUpdate: products_controller.rb\n\n```ruby\nclass ProductsController < ApplicationController\n  rescue_from StandardError, with: :private_method_you_use_to_handle_exception\n\n  def show\n    product = Product.find(12)\n\n    render layout_for_product_detail\n  end\n\n  # 100 methods na  y...\n\n  private\n\n  def private_method_you_use_to_handle_exception\n    # Do something good\n  end\nend\n```\n\nNh vy  phi vit lp i lp li 100 ln. C v tt hn ri, tuy nhin   tt?\n\n## 3. X l exception vi controller cha\n\nVy nu ta c 100 controller, v ch  bt StandardError m chng ta phi vit rescue_from cho c 100 controller ?\n\nTa c th x l trng hp trn bng cch dng rescue_from trong controller cha,  y th cha ca products controller l application controller.\n\n```ruby\nclass ApplicationControler < ActionController::Base\n  rescue_from StandardError, with: :private_method_you_use_to_handle_exception\n\n  private\n\n  def private_method_you_use_to_handle_exception\n    # Do something good\n  end\nend\n\nclass ProductsController < ApplicationController\n  def show\n    product = Product.find(12)\n\n    render layout_for_product_detail\n  end\nend\n```\n\n## 4. Tch exception ra module ring\n\nGi chng ta ch c 1 exception c bn, nhng khng g m bo c rng th gii quan ngoi kia c th km hm ni ti nng ca bn, rt c th vi nm sau project lm chi ngy no ca bn thnh startup triu ? =)) logic v bussiness lc  phc tp thm chc/trm/ngn ln.\n\nNn tch exception handle sang 1 module ring l la chn khng ti cho hin ti v l la chn khng th trnh khi trong tng lai (project ca bn mp ln).\n\nBn mun tch moudle ny vo u? ti khng bit, ti th b vo concerns folder ca folder controller cho nhanh.\n\n```ruby\n# controllers/concerns/handle_exception.rb\nmodule HandleException\n  included do\n    rescue_from StandardError do |e|\n      # Do something good\n    end\n end\nend\n\nclass ApplicationControler < ActionController::Base\n  include HandleException\nend\n\n```\n\nVy l chng ta  tch on logic x l exception ra khi controller.\n\n## 5. Bt exception chi tit hn\n\nn mc s 4, mi th  kh tt, tuy vy, c nhiu exception trong rails (v framework no cng vy). Standard l 1 exception rt chung chung, v vy ch bt Standard exception c l ginh cho trng hp chng ta... li, hoc d n khng nhiu logic, hoc khng  thi gian  implement, deadline d qu chy khng kp, nn chy c l tt ri ch ch cn thi gian m ngh n exception tt hay cha.\n\nTrong trng hp bn...rnh hoc d n yu cu, hoc leader kh tnh, chng ta nn bt cc exception chi tit hn v ch nn cover Standard sau cng.\n\n\n```ruby\n# controllers/concerns/handle_exception.rb\nmodule HandleException\n  included do\n    # Exception 1\n    rescue_from StandardError do |e|\n      # Do something good\n    end\n\n    # Exception 2\n    rescue_from ActiveRecord::RecordNotFound do |e|\n      # Do something good\n    end\n\n    # ... N exception na, tu nhu cu ca bn.\n end\nend\n\nclass ApplicationControler < ActionController::Base\n  include HandleException\nend\n\n```\n\n> Theo th t included, exception khai bo sau s c gi trc, vy exception 2 s c gi trc exception 1. Do  nn khai bo cho Standard exception lm exception u tin.\n\n## 6. To thm cc lp exception\n\nGi s vi lng exception mc nh trong rails khng  cho project tm c 4.0 ca bn? bn mun catch nhng exception c bit m bn ch bn ngh ra?\n\nChng ta c th to thm cc class exception  p ng nhu cu trn:\n\n```ruby\n# controllers/concerns/handle_exception.rb\nmodule HandleException\n  # Khi bo class exception bn to,\n  # chng u k tha t class StandardError\n  class WeakPassword < StandardError; end\n\n  included do\n    # Exception 1\n    rescue_from StandardError do |e|\n      # Do something good\n    end\n\n    # Exception 2\n    rescue_from ActiveRecord::RecordNotFound do |e|\n      # Do something good\n    end\n\n\n    # Exception 3\n    rescue_from HandleException::WeakPassword do |e|\n      # TODO: notification password too weak\n      # TODO: init recommmend password\n      # TODO: display recommend password for UI\n    end\n\n    # ... N exception na, tu nhu cu ca bn.\n end\nend\n\nclass ApplicationControler < ActionController::Base\n  include HandleException\nend\n\n```\n\nNh vy, khi bn validate mt khu ca user submit ln, nu khng tho mn iu kin l mt mt khu  mnh, **raise** exception  khai bo.\n\n## 7. X l exception trong method\n\nLi quay li bc 1, nhng khng phi chng ta x l mi exception trong tng method. M khi chng ta c 1 on logic c bit, khng lp li, v c tnh quan trng th chng ta nn catch exception ngay ti ch on logic  din ra:\n\n1. d c code\n2. v l 1 trng hp logic quan trng nn cng cn nhng x l exception c th quan trng theo, ch khng ch l bn bug ra terminal hay ghi log.\n\n```ruby\nclass ChargesController < ApplicationController\n  def important_method\n    begin\n      payment_intent = Stripe::PaymentIntent.create(\n        :amount => source.amount,\n        :currency => source.currency,\n        :source => source.id,\n        :payment_method_types => [source.type],\n        :description => \"PaymentIntent for Source webhook\",\n        :confirm => true,\n        :capture_method => ENV['CAPTURE_METHOD'] == \"manual\" ? \"manual\" : \"automatic\",\n      )\n    rescue Stripe::StripeError => e\n      status 400\n      return log_info(\"Webhook: Error creating PaymentIntent: #{e.message}\")\n    end\n  end\nend\n```\n\n> on code trn c copy t [stripe sample code](https://github.com/stripe/example-mobile-backend/blob/master/web.rb)\n\nNh v d trn, khi bn x dng th vin, hoc api ca bn th 3, c nhng exception c trng cho tng loi th vin, lm theo docs ca th vin  thi, nn bt cc exception ngay ti ni logic ang din ra. Sau c dc th vin  i hay update th cng d x l hn.\n\n## 8. Ghi log\n\nCui cng, khi sn phm ca bn ln production, bn cn ghi log,  c, truy vt iu tra li khi cn.\n\nTi hin vit log theo cch sau:\n\n```ruby\n# controllers/concerns/handle_log.rb\nmodule HandleLog\n  def write_log(e)\n    issue = \"START: ---------------------------\\n\"\n    issue << \"TIME: #{Time.now.utc} \\n\"\n    issue << \"PARAMS: #{params.to_json} \\n\"\n    issue << \"MESSAGE: #{e.message}\\n\"\n    issue << \"----------------------------- :END\\n\"\n\n    Rails.logger.info issue\n  end\nend\n\n# controllers/concerns/handle_exception.rb\nmodule HandleException\n  # Khi bo class exception bn to,\n  # chng u k tha t class StandardError\n  class WeakPassword < StandardError; end\n\n  included do\n    # Exception 1\n    rescue_from StandardError do |e|\n      # Do something good\n      write_log(e)\n    end\n\n    # Exception 2\n    rescue_from ActiveRecord::RecordNotFound do |e|\n      # Do something good\n      write_log(e)\n    end\n\n\n    # Exception 3\n    rescue_from HandleException::WeakPassword do |e|\n      # TODO: notification password too weak\n      # TODO: init recommmend password\n      # TODO: display recommend password for UI\n    end\n\n    # ... N exception na, tu nhu cu ca bn.\n end\nend\n\nclass ApplicationControler < ActionController::Base\n  include HandleLog\n  include HandleException\nend\n```\n\n## 9. Tham kho\n\n[1] [http://rubylearning.com/satishtalim/ruby_exceptions.html](http://rubylearning.com/satishtalim/ruby_exceptions.html)\n","source":"_posts/2020-04-23-handle-exception-in-rails.md","raw":"---\ntitle: \"Exception Trong Rails [Part 2]\"\ndate: 2020-04-23\ntags: [\"RUBY\"]\n---\n\n## 1. X l exception trong method\n\nE.g. Trong products_controller.rb ta c method sau:\n\n```ruby\n  def show\n    product = Product.find(12)\n\n    render layout_for_product_detail\n  end\n```\n\nNu khng c product no c id = 12, on code trn s gp li, v ngi dng s nhn c 1 mn hnh error server.\n\nKhng mun iu ny xy ra, ta update li on code nh sau:\n\n```ruby\ndef show\n  begin\n    product = Product.find(12)\n\n    render layout_for_product_detail\n  rescue StandardError => e\n    # Do something good for user\n  end\nend\n```\n\nVy l n, nh trong bi phn 1, catch exception vi StandardError l  tt  p dng v c l  tt  pass review code.\n\n## 2. X l exception vi controller\n\nPhn 1  n, nhng khng c tt, l do l v nu chng ta c 100 methods, vy chng ta s lp li on catch exception kia 100 ln. Khng DRY cht no, vit 1 chc method lp li cng 1 exception th c l khng pass c review code =))\n\nUpdate: products_controller.rb\n\n```ruby\nclass ProductsController < ApplicationController\n  rescue_from StandardError, with: :private_method_you_use_to_handle_exception\n\n  def show\n    product = Product.find(12)\n\n    render layout_for_product_detail\n  end\n\n  # 100 methods na  y...\n\n  private\n\n  def private_method_you_use_to_handle_exception\n    # Do something good\n  end\nend\n```\n\nNh vy  phi vit lp i lp li 100 ln. C v tt hn ri, tuy nhin   tt?\n\n## 3. X l exception vi controller cha\n\nVy nu ta c 100 controller, v ch  bt StandardError m chng ta phi vit rescue_from cho c 100 controller ?\n\nTa c th x l trng hp trn bng cch dng rescue_from trong controller cha,  y th cha ca products controller l application controller.\n\n```ruby\nclass ApplicationControler < ActionController::Base\n  rescue_from StandardError, with: :private_method_you_use_to_handle_exception\n\n  private\n\n  def private_method_you_use_to_handle_exception\n    # Do something good\n  end\nend\n\nclass ProductsController < ApplicationController\n  def show\n    product = Product.find(12)\n\n    render layout_for_product_detail\n  end\nend\n```\n\n## 4. Tch exception ra module ring\n\nGi chng ta ch c 1 exception c bn, nhng khng g m bo c rng th gii quan ngoi kia c th km hm ni ti nng ca bn, rt c th vi nm sau project lm chi ngy no ca bn thnh startup triu ? =)) logic v bussiness lc  phc tp thm chc/trm/ngn ln.\n\nNn tch exception handle sang 1 module ring l la chn khng ti cho hin ti v l la chn khng th trnh khi trong tng lai (project ca bn mp ln).\n\nBn mun tch moudle ny vo u? ti khng bit, ti th b vo concerns folder ca folder controller cho nhanh.\n\n```ruby\n# controllers/concerns/handle_exception.rb\nmodule HandleException\n  included do\n    rescue_from StandardError do |e|\n      # Do something good\n    end\n end\nend\n\nclass ApplicationControler < ActionController::Base\n  include HandleException\nend\n\n```\n\nVy l chng ta  tch on logic x l exception ra khi controller.\n\n## 5. Bt exception chi tit hn\n\nn mc s 4, mi th  kh tt, tuy vy, c nhiu exception trong rails (v framework no cng vy). Standard l 1 exception rt chung chung, v vy ch bt Standard exception c l ginh cho trng hp chng ta... li, hoc d n khng nhiu logic, hoc khng  thi gian  implement, deadline d qu chy khng kp, nn chy c l tt ri ch ch cn thi gian m ngh n exception tt hay cha.\n\nTrong trng hp bn...rnh hoc d n yu cu, hoc leader kh tnh, chng ta nn bt cc exception chi tit hn v ch nn cover Standard sau cng.\n\n\n```ruby\n# controllers/concerns/handle_exception.rb\nmodule HandleException\n  included do\n    # Exception 1\n    rescue_from StandardError do |e|\n      # Do something good\n    end\n\n    # Exception 2\n    rescue_from ActiveRecord::RecordNotFound do |e|\n      # Do something good\n    end\n\n    # ... N exception na, tu nhu cu ca bn.\n end\nend\n\nclass ApplicationControler < ActionController::Base\n  include HandleException\nend\n\n```\n\n> Theo th t included, exception khai bo sau s c gi trc, vy exception 2 s c gi trc exception 1. Do  nn khai bo cho Standard exception lm exception u tin.\n\n## 6. To thm cc lp exception\n\nGi s vi lng exception mc nh trong rails khng  cho project tm c 4.0 ca bn? bn mun catch nhng exception c bit m bn ch bn ngh ra?\n\nChng ta c th to thm cc class exception  p ng nhu cu trn:\n\n```ruby\n# controllers/concerns/handle_exception.rb\nmodule HandleException\n  # Khi bo class exception bn to,\n  # chng u k tha t class StandardError\n  class WeakPassword < StandardError; end\n\n  included do\n    # Exception 1\n    rescue_from StandardError do |e|\n      # Do something good\n    end\n\n    # Exception 2\n    rescue_from ActiveRecord::RecordNotFound do |e|\n      # Do something good\n    end\n\n\n    # Exception 3\n    rescue_from HandleException::WeakPassword do |e|\n      # TODO: notification password too weak\n      # TODO: init recommmend password\n      # TODO: display recommend password for UI\n    end\n\n    # ... N exception na, tu nhu cu ca bn.\n end\nend\n\nclass ApplicationControler < ActionController::Base\n  include HandleException\nend\n\n```\n\nNh vy, khi bn validate mt khu ca user submit ln, nu khng tho mn iu kin l mt mt khu  mnh, **raise** exception  khai bo.\n\n## 7. X l exception trong method\n\nLi quay li bc 1, nhng khng phi chng ta x l mi exception trong tng method. M khi chng ta c 1 on logic c bit, khng lp li, v c tnh quan trng th chng ta nn catch exception ngay ti ch on logic  din ra:\n\n1. d c code\n2. v l 1 trng hp logic quan trng nn cng cn nhng x l exception c th quan trng theo, ch khng ch l bn bug ra terminal hay ghi log.\n\n```ruby\nclass ChargesController < ApplicationController\n  def important_method\n    begin\n      payment_intent = Stripe::PaymentIntent.create(\n        :amount => source.amount,\n        :currency => source.currency,\n        :source => source.id,\n        :payment_method_types => [source.type],\n        :description => \"PaymentIntent for Source webhook\",\n        :confirm => true,\n        :capture_method => ENV['CAPTURE_METHOD'] == \"manual\" ? \"manual\" : \"automatic\",\n      )\n    rescue Stripe::StripeError => e\n      status 400\n      return log_info(\"Webhook: Error creating PaymentIntent: #{e.message}\")\n    end\n  end\nend\n```\n\n> on code trn c copy t [stripe sample code](https://github.com/stripe/example-mobile-backend/blob/master/web.rb)\n\nNh v d trn, khi bn x dng th vin, hoc api ca bn th 3, c nhng exception c trng cho tng loi th vin, lm theo docs ca th vin  thi, nn bt cc exception ngay ti ni logic ang din ra. Sau c dc th vin  i hay update th cng d x l hn.\n\n## 8. Ghi log\n\nCui cng, khi sn phm ca bn ln production, bn cn ghi log,  c, truy vt iu tra li khi cn.\n\nTi hin vit log theo cch sau:\n\n```ruby\n# controllers/concerns/handle_log.rb\nmodule HandleLog\n  def write_log(e)\n    issue = \"START: ---------------------------\\n\"\n    issue << \"TIME: #{Time.now.utc} \\n\"\n    issue << \"PARAMS: #{params.to_json} \\n\"\n    issue << \"MESSAGE: #{e.message}\\n\"\n    issue << \"----------------------------- :END\\n\"\n\n    Rails.logger.info issue\n  end\nend\n\n# controllers/concerns/handle_exception.rb\nmodule HandleException\n  # Khi bo class exception bn to,\n  # chng u k tha t class StandardError\n  class WeakPassword < StandardError; end\n\n  included do\n    # Exception 1\n    rescue_from StandardError do |e|\n      # Do something good\n      write_log(e)\n    end\n\n    # Exception 2\n    rescue_from ActiveRecord::RecordNotFound do |e|\n      # Do something good\n      write_log(e)\n    end\n\n\n    # Exception 3\n    rescue_from HandleException::WeakPassword do |e|\n      # TODO: notification password too weak\n      # TODO: init recommmend password\n      # TODO: display recommend password for UI\n    end\n\n    # ... N exception na, tu nhu cu ca bn.\n end\nend\n\nclass ApplicationControler < ActionController::Base\n  include HandleLog\n  include HandleException\nend\n```\n\n## 9. Tham kho\n\n[1] [http://rubylearning.com/satishtalim/ruby_exceptions.html](http://rubylearning.com/satishtalim/ruby_exceptions.html)\n","slug":"2020-04-23-handle-exception-in-rails","published":1,"updated":"2022-01-29T09:29:59.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbp0042p3m25b2n4old","content":"<h2 id=\"1-Xu-ly-exception-trong-method\"><a href=\"#1-Xu-ly-exception-trong-method\" class=\"headerlink\" title=\"1. X l exception trong method\"></a>1. X l exception trong method</h2><p>E.g. Trong products_controller.rb ta c method sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span></span></span><br><span class=\"line\">  product = Product.find(<span class=\"number\">12</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  render layout_for_product_detail</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu khng c product no c id = 12, on code trn s gp li, v ngi dng s nhn c 1 mn hnh error server.</p>\n<p>Khng mun iu ny xy ra, ta update li on code nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span></span></span><br><span class=\"line\">  <span class=\"keyword\">begin</span></span><br><span class=\"line\">    product = Product.find(<span class=\"number\">12</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    render layout_for_product_detail</span><br><span class=\"line\">  <span class=\"keyword\">rescue</span> StandardError =&gt; e</span><br><span class=\"line\">    <span class=\"comment\"># Do something good for user</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy l n, nh trong bi phn 1, catch exception vi StandardError l  tt  p dng v c l  tt  pass review code.</p>\n<h2 id=\"2-Xu-ly-exception-voi-controller\"><a href=\"#2-Xu-ly-exception-voi-controller\" class=\"headerlink\" title=\"2. X l exception vi controller\"></a>2. X l exception vi controller</h2><p>Phn 1  n, nhng khng c tt, l do l v nu chng ta c 100 methods, vy chng ta s lp li on catch exception kia 100 ln. Khng DRY cht no, vit 1 chc method lp li cng 1 exception th c l khng pass c review code =))</p>\n<p>Update: products_controller.rb</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductsController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  rescue_from StandardError, <span class=\"symbol\">with:</span> <span class=\"symbol\">:private_method_you_use_to_handle_exception</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span></span></span><br><span class=\"line\">    product = Product.find(<span class=\"number\">12</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    render layout_for_product_detail</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 100 methods na  y...</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">private_method_you_use_to_handle_exception</span></span></span><br><span class=\"line\">    <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh vy  phi vit lp i lp li 100 ln. C v tt hn ri, tuy nhin   tt?</p>\n<h2 id=\"3-Xu-ly-exception-voi-controller-cha\"><a href=\"#3-Xu-ly-exception-voi-controller-cha\" class=\"headerlink\" title=\"3. X l exception vi controller cha\"></a>3. X l exception vi controller cha</h2><p>Vy nu ta c 100 controller, v ch  bt StandardError m chng ta phi vit rescue_from cho c 100 controller ?</p>\n<p>Ta c th x l trng hp trn bng cch dng rescue_from trong controller cha,  y th cha ca products controller l application controller.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  rescue_from StandardError, <span class=\"symbol\">with:</span> <span class=\"symbol\">:private_method_you_use_to_handle_exception</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">private_method_you_use_to_handle_exception</span></span></span><br><span class=\"line\">    <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductsController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span></span></span><br><span class=\"line\">    product = Product.find(<span class=\"number\">12</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    render layout_for_product_detail</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Tach-exception-ra-module-rieng\"><a href=\"#4-Tach-exception-ra-module-rieng\" class=\"headerlink\" title=\"4. Tch exception ra module ring\"></a>4. Tch exception ra module ring</h2><p>Gi chng ta ch c 1 exception c bn, nhng khng g m bo c rng th gii quan ngoi kia c th km hm ni ti nng ca bn, rt c th vi nm sau project lm chi ngy no ca bn thnh startup triu ? =)) logic v bussiness lc  phc tp thm chc/trm/ngn ln.</p>\n<p>Nn tch exception handle sang 1 module ring l la chn khng ti cho hin ti v l la chn khng th trnh khi trong tng lai (project ca bn mp ln).</p>\n<p>Bn mun tch moudle ny vo u? ti khng bit, ti th b vo concerns folder ca folder controller cho nhanh.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_exception.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleException</span></span></span><br><span class=\"line\">  included <span class=\"keyword\">do</span></span><br><span class=\"line\">    rescue_from StandardError <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleException</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy l chng ta  tch on logic x l exception ra khi controller.</p>\n<h2 id=\"5-Bat-exception-chi-tiet-hon\"><a href=\"#5-Bat-exception-chi-tiet-hon\" class=\"headerlink\" title=\"5. Bt exception chi tit hn\"></a>5. Bt exception chi tit hn</h2><p>n mc s 4, mi th  kh tt, tuy vy, c nhiu exception trong rails (v framework no cng vy). Standard l 1 exception rt chung chung, v vy ch bt Standard exception c l ginh cho trng hp chng ta li, hoc d n khng nhiu logic, hoc khng  thi gian  implement, deadline d qu chy khng kp, nn chy c l tt ri ch ch cn thi gian m ngh n exception tt hay cha.</p>\n<p>Trong trng hp bnrnh hoc d n yu cu, hoc leader kh tnh, chng ta nn bt cc exception chi tit hn v ch nn cover Standard sau cng.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_exception.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleException</span></span></span><br><span class=\"line\">  included <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"comment\"># Exception 1</span></span><br><span class=\"line\">    rescue_from StandardError <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 2</span></span><br><span class=\"line\">    rescue_from ActiveRecord::RecordNotFound <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ... N exception na, tu nhu cu ca bn.</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleException</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Theo th t included, exception khai bo sau s c gi trc, vy exception 2 s c gi trc exception 1. Do  nn khai bo cho Standard exception lm exception u tin.</p>\n</blockquote>\n<h2 id=\"6-Tao-them-cac-lop-exception\"><a href=\"#6-Tao-them-cac-lop-exception\" class=\"headerlink\" title=\"6. To thm cc lp exception\"></a>6. To thm cc lp exception</h2><p>Gi s vi lng exception mc nh trong rails khng  cho project tm c 4.0 ca bn? bn mun catch nhng exception c bit m bn ch bn ngh ra?</p>\n<p>Chng ta c th to thm cc class exception  p ng nhu cu trn:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_exception.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleException</span></span></span><br><span class=\"line\">  <span class=\"comment\"># Khi bo class exception bn to,</span></span><br><span class=\"line\">  <span class=\"comment\"># chng u k tha t class StandardError</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakPassword</span> &lt; StandardError;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  included <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"comment\"># Exception 1</span></span><br><span class=\"line\">    rescue_from StandardError <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 2</span></span><br><span class=\"line\">    rescue_from ActiveRecord::RecordNotFound <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 3</span></span><br><span class=\"line\">    rescue_from HandleException::WeakPassword <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> notification password too weak</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> init recommmend password</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> display recommend password for UI</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ... N exception na, tu nhu cu ca bn.</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleException</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh vy, khi bn validate mt khu ca user submit ln, nu khng tho mn iu kin l mt mt khu  mnh, <strong>raise</strong> exception  khai bo.</p>\n<h2 id=\"7-Xu-ly-exception-trong-method\"><a href=\"#7-Xu-ly-exception-trong-method\" class=\"headerlink\" title=\"7. X l exception trong method\"></a>7. X l exception trong method</h2><p>Li quay li bc 1, nhng khng phi chng ta x l mi exception trong tng method. M khi chng ta c 1 on logic c bit, khng lp li, v c tnh quan trng th chng ta nn catch exception ngay ti ch on logic  din ra:</p>\n<ol>\n<li>d c code</li>\n<li>v l 1 trng hp logic quan trng nn cng cn nhng x l exception c th quan trng theo, ch khng ch l bn bug ra terminal hay ghi log.</li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChargesController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">important_method</span></span></span><br><span class=\"line\">    <span class=\"keyword\">begin</span></span><br><span class=\"line\">      payment_intent = Stripe::PaymentIntent.create(</span><br><span class=\"line\">        <span class=\"symbol\">:amount</span> =&gt; source.amount,</span><br><span class=\"line\">        <span class=\"symbol\">:currency</span> =&gt; source.currency,</span><br><span class=\"line\">        <span class=\"symbol\">:source</span> =&gt; source.id,</span><br><span class=\"line\">        <span class=\"symbol\">:payment_method_types</span> =&gt; [source.type],</span><br><span class=\"line\">        <span class=\"symbol\">:description</span> =&gt; <span class=\"string\">\"PaymentIntent for Source webhook\"</span>,</span><br><span class=\"line\">        <span class=\"symbol\">:confirm</span> =&gt; <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"symbol\">:capture_method</span> =&gt; ENV[<span class=\"string\">'CAPTURE_METHOD'</span>] == <span class=\"string\">\"manual\"</span> ? <span class=\"string\">\"manual\"</span> : <span class=\"string\">\"automatic\"</span>,</span><br><span class=\"line\">      )</span><br><span class=\"line\">    <span class=\"keyword\">rescue</span> Stripe::StripeError =&gt; e</span><br><span class=\"line\">      status <span class=\"number\">400</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> log_info(<span class=\"string\">\"Webhook: Error creating PaymentIntent: <span class=\"subst\">#&#123;e.message&#125;</span>\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>on code trn c copy t <a href=\"https://github.com/stripe/example-mobile-backend/blob/master/web.rb\" target=\"_blank\" rel=\"noopener\">stripe sample code</a></p>\n</blockquote>\n<p>Nh v d trn, khi bn x dng th vin, hoc api ca bn th 3, c nhng exception c trng cho tng loi th vin, lm theo docs ca th vin  thi, nn bt cc exception ngay ti ni logic ang din ra. Sau c dc th vin  i hay update th cng d x l hn.</p>\n<h2 id=\"8-Ghi-log\"><a href=\"#8-Ghi-log\" class=\"headerlink\" title=\"8. Ghi log\"></a>8. Ghi log</h2><p>Cui cng, khi sn phm ca bn ln production, bn cn ghi log,  c, truy vt iu tra li khi cn.</p>\n<p>Ti hin vit log theo cch sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_log.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleLog</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_log</span><span class=\"params\">(e)</span></span></span><br><span class=\"line\">    issue = <span class=\"string\">\"START: ---------------------------\\n\"</span></span><br><span class=\"line\">    issue &lt;&lt; <span class=\"string\">\"TIME: <span class=\"subst\">#&#123;Time.now.utc&#125;</span> \\n\"</span></span><br><span class=\"line\">    issue &lt;&lt; <span class=\"string\">\"PARAMS: <span class=\"subst\">#&#123;params.to_json&#125;</span> \\n\"</span></span><br><span class=\"line\">    issue &lt;&lt; <span class=\"string\">\"MESSAGE: <span class=\"subst\">#&#123;e.message&#125;</span>\\n\"</span></span><br><span class=\"line\">    issue &lt;&lt; <span class=\"string\">\"----------------------------- :END\\n\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    Rails.logger.info issue</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_exception.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleException</span></span></span><br><span class=\"line\">  <span class=\"comment\"># Khi bo class exception bn to,</span></span><br><span class=\"line\">  <span class=\"comment\"># chng u k tha t class StandardError</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakPassword</span> &lt; StandardError;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  included <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"comment\"># Exception 1</span></span><br><span class=\"line\">    rescue_from StandardError <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">      write_log(e)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 2</span></span><br><span class=\"line\">    rescue_from ActiveRecord::RecordNotFound <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">      write_log(e)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 3</span></span><br><span class=\"line\">    rescue_from HandleException::WeakPassword <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> notification password too weak</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> init recommmend password</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> display recommend password for UI</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ... N exception na, tu nhu cu ca bn.</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleLog</span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleException</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-Tham-khao\"><a href=\"#9-Tham-khao\" class=\"headerlink\" title=\"9. Tham kho\"></a>9. Tham kho</h2><p>[1] <a href=\"http://rubylearning.com/satishtalim/ruby_exceptions.html\" target=\"_blank\" rel=\"noopener\">http://rubylearning.com/satishtalim/ruby_exceptions.html</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Xu-ly-exception-trong-method\"><a href=\"#1-Xu-ly-exception-trong-method\" class=\"headerlink\" title=\"1. X l exception trong method\"></a>1. X l exception trong method</h2><p>E.g. Trong products_controller.rb ta c method sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span></span></span><br><span class=\"line\">  product = Product.find(<span class=\"number\">12</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  render layout_for_product_detail</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nu khng c product no c id = 12, on code trn s gp li, v ngi dng s nhn c 1 mn hnh error server.</p>\n<p>Khng mun iu ny xy ra, ta update li on code nh sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span></span></span><br><span class=\"line\">  <span class=\"keyword\">begin</span></span><br><span class=\"line\">    product = Product.find(<span class=\"number\">12</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    render layout_for_product_detail</span><br><span class=\"line\">  <span class=\"keyword\">rescue</span> StandardError =&gt; e</span><br><span class=\"line\">    <span class=\"comment\"># Do something good for user</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy l n, nh trong bi phn 1, catch exception vi StandardError l  tt  p dng v c l  tt  pass review code.</p>\n<h2 id=\"2-Xu-ly-exception-voi-controller\"><a href=\"#2-Xu-ly-exception-voi-controller\" class=\"headerlink\" title=\"2. X l exception vi controller\"></a>2. X l exception vi controller</h2><p>Phn 1  n, nhng khng c tt, l do l v nu chng ta c 100 methods, vy chng ta s lp li on catch exception kia 100 ln. Khng DRY cht no, vit 1 chc method lp li cng 1 exception th c l khng pass c review code =))</p>\n<p>Update: products_controller.rb</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductsController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  rescue_from StandardError, <span class=\"symbol\">with:</span> <span class=\"symbol\">:private_method_you_use_to_handle_exception</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span></span></span><br><span class=\"line\">    product = Product.find(<span class=\"number\">12</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    render layout_for_product_detail</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 100 methods na  y...</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">private_method_you_use_to_handle_exception</span></span></span><br><span class=\"line\">    <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh vy  phi vit lp i lp li 100 ln. C v tt hn ri, tuy nhin   tt?</p>\n<h2 id=\"3-Xu-ly-exception-voi-controller-cha\"><a href=\"#3-Xu-ly-exception-voi-controller-cha\" class=\"headerlink\" title=\"3. X l exception vi controller cha\"></a>3. X l exception vi controller cha</h2><p>Vy nu ta c 100 controller, v ch  bt StandardError m chng ta phi vit rescue_from cho c 100 controller ?</p>\n<p>Ta c th x l trng hp trn bng cch dng rescue_from trong controller cha,  y th cha ca products controller l application controller.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  rescue_from StandardError, <span class=\"symbol\">with:</span> <span class=\"symbol\">:private_method_you_use_to_handle_exception</span></span><br><span class=\"line\"></span><br><span class=\"line\">  private</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">private_method_you_use_to_handle_exception</span></span></span><br><span class=\"line\">    <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductsController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span></span></span><br><span class=\"line\">    product = Product.find(<span class=\"number\">12</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    render layout_for_product_detail</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Tach-exception-ra-module-rieng\"><a href=\"#4-Tach-exception-ra-module-rieng\" class=\"headerlink\" title=\"4. Tch exception ra module ring\"></a>4. Tch exception ra module ring</h2><p>Gi chng ta ch c 1 exception c bn, nhng khng g m bo c rng th gii quan ngoi kia c th km hm ni ti nng ca bn, rt c th vi nm sau project lm chi ngy no ca bn thnh startup triu ? =)) logic v bussiness lc  phc tp thm chc/trm/ngn ln.</p>\n<p>Nn tch exception handle sang 1 module ring l la chn khng ti cho hin ti v l la chn khng th trnh khi trong tng lai (project ca bn mp ln).</p>\n<p>Bn mun tch moudle ny vo u? ti khng bit, ti th b vo concerns folder ca folder controller cho nhanh.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_exception.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleException</span></span></span><br><span class=\"line\">  included <span class=\"keyword\">do</span></span><br><span class=\"line\">    rescue_from StandardError <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleException</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Vy l chng ta  tch on logic x l exception ra khi controller.</p>\n<h2 id=\"5-Bat-exception-chi-tiet-hon\"><a href=\"#5-Bat-exception-chi-tiet-hon\" class=\"headerlink\" title=\"5. Bt exception chi tit hn\"></a>5. Bt exception chi tit hn</h2><p>n mc s 4, mi th  kh tt, tuy vy, c nhiu exception trong rails (v framework no cng vy). Standard l 1 exception rt chung chung, v vy ch bt Standard exception c l ginh cho trng hp chng ta li, hoc d n khng nhiu logic, hoc khng  thi gian  implement, deadline d qu chy khng kp, nn chy c l tt ri ch ch cn thi gian m ngh n exception tt hay cha.</p>\n<p>Trong trng hp bnrnh hoc d n yu cu, hoc leader kh tnh, chng ta nn bt cc exception chi tit hn v ch nn cover Standard sau cng.</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_exception.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleException</span></span></span><br><span class=\"line\">  included <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"comment\"># Exception 1</span></span><br><span class=\"line\">    rescue_from StandardError <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 2</span></span><br><span class=\"line\">    rescue_from ActiveRecord::RecordNotFound <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ... N exception na, tu nhu cu ca bn.</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleException</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Theo th t included, exception khai bo sau s c gi trc, vy exception 2 s c gi trc exception 1. Do  nn khai bo cho Standard exception lm exception u tin.</p>\n</blockquote>\n<h2 id=\"6-Tao-them-cac-lop-exception\"><a href=\"#6-Tao-them-cac-lop-exception\" class=\"headerlink\" title=\"6. To thm cc lp exception\"></a>6. To thm cc lp exception</h2><p>Gi s vi lng exception mc nh trong rails khng  cho project tm c 4.0 ca bn? bn mun catch nhng exception c bit m bn ch bn ngh ra?</p>\n<p>Chng ta c th to thm cc class exception  p ng nhu cu trn:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_exception.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleException</span></span></span><br><span class=\"line\">  <span class=\"comment\"># Khi bo class exception bn to,</span></span><br><span class=\"line\">  <span class=\"comment\"># chng u k tha t class StandardError</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakPassword</span> &lt; StandardError;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  included <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"comment\"># Exception 1</span></span><br><span class=\"line\">    rescue_from StandardError <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 2</span></span><br><span class=\"line\">    rescue_from ActiveRecord::RecordNotFound <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 3</span></span><br><span class=\"line\">    rescue_from HandleException::WeakPassword <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> notification password too weak</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> init recommmend password</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> display recommend password for UI</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ... N exception na, tu nhu cu ca bn.</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleException</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<p>Nh vy, khi bn validate mt khu ca user submit ln, nu khng tho mn iu kin l mt mt khu  mnh, <strong>raise</strong> exception  khai bo.</p>\n<h2 id=\"7-Xu-ly-exception-trong-method\"><a href=\"#7-Xu-ly-exception-trong-method\" class=\"headerlink\" title=\"7. X l exception trong method\"></a>7. X l exception trong method</h2><p>Li quay li bc 1, nhng khng phi chng ta x l mi exception trong tng method. M khi chng ta c 1 on logic c bit, khng lp li, v c tnh quan trng th chng ta nn catch exception ngay ti ch on logic  din ra:</p>\n<ol>\n<li>d c code</li>\n<li>v l 1 trng hp logic quan trng nn cng cn nhng x l exception c th quan trng theo, ch khng ch l bn bug ra terminal hay ghi log.</li>\n</ol>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChargesController</span> &lt; ApplicationController</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">important_method</span></span></span><br><span class=\"line\">    <span class=\"keyword\">begin</span></span><br><span class=\"line\">      payment_intent = Stripe::PaymentIntent.create(</span><br><span class=\"line\">        <span class=\"symbol\">:amount</span> =&gt; source.amount,</span><br><span class=\"line\">        <span class=\"symbol\">:currency</span> =&gt; source.currency,</span><br><span class=\"line\">        <span class=\"symbol\">:source</span> =&gt; source.id,</span><br><span class=\"line\">        <span class=\"symbol\">:payment_method_types</span> =&gt; [source.type],</span><br><span class=\"line\">        <span class=\"symbol\">:description</span> =&gt; <span class=\"string\">\"PaymentIntent for Source webhook\"</span>,</span><br><span class=\"line\">        <span class=\"symbol\">:confirm</span> =&gt; <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"symbol\">:capture_method</span> =&gt; ENV[<span class=\"string\">'CAPTURE_METHOD'</span>] == <span class=\"string\">\"manual\"</span> ? <span class=\"string\">\"manual\"</span> : <span class=\"string\">\"automatic\"</span>,</span><br><span class=\"line\">      )</span><br><span class=\"line\">    <span class=\"keyword\">rescue</span> Stripe::StripeError =&gt; e</span><br><span class=\"line\">      status <span class=\"number\">400</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> log_info(<span class=\"string\">\"Webhook: Error creating PaymentIntent: <span class=\"subst\">#&#123;e.message&#125;</span>\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>on code trn c copy t <a href=\"https://github.com/stripe/example-mobile-backend/blob/master/web.rb\" target=\"_blank\" rel=\"noopener\">stripe sample code</a></p>\n</blockquote>\n<p>Nh v d trn, khi bn x dng th vin, hoc api ca bn th 3, c nhng exception c trng cho tng loi th vin, lm theo docs ca th vin  thi, nn bt cc exception ngay ti ni logic ang din ra. Sau c dc th vin  i hay update th cng d x l hn.</p>\n<h2 id=\"8-Ghi-log\"><a href=\"#8-Ghi-log\" class=\"headerlink\" title=\"8. Ghi log\"></a>8. Ghi log</h2><p>Cui cng, khi sn phm ca bn ln production, bn cn ghi log,  c, truy vt iu tra li khi cn.</p>\n<p>Ti hin vit log theo cch sau:</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_log.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleLog</span></span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_log</span><span class=\"params\">(e)</span></span></span><br><span class=\"line\">    issue = <span class=\"string\">\"START: ---------------------------\\n\"</span></span><br><span class=\"line\">    issue &lt;&lt; <span class=\"string\">\"TIME: <span class=\"subst\">#&#123;Time.now.utc&#125;</span> \\n\"</span></span><br><span class=\"line\">    issue &lt;&lt; <span class=\"string\">\"PARAMS: <span class=\"subst\">#&#123;params.to_json&#125;</span> \\n\"</span></span><br><span class=\"line\">    issue &lt;&lt; <span class=\"string\">\"MESSAGE: <span class=\"subst\">#&#123;e.message&#125;</span>\\n\"</span></span><br><span class=\"line\">    issue &lt;&lt; <span class=\"string\">\"----------------------------- :END\\n\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    Rails.logger.info issue</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># controllers/concerns/handle_exception.rb</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">HandleException</span></span></span><br><span class=\"line\">  <span class=\"comment\"># Khi bo class exception bn to,</span></span><br><span class=\"line\">  <span class=\"comment\"># chng u k tha t class StandardError</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakPassword</span> &lt; StandardError;</span> <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  included <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"comment\"># Exception 1</span></span><br><span class=\"line\">    rescue_from StandardError <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">      write_log(e)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 2</span></span><br><span class=\"line\">    rescue_from ActiveRecord::RecordNotFound <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># Do something good</span></span><br><span class=\"line\">      write_log(e)</span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Exception 3</span></span><br><span class=\"line\">    rescue_from HandleException::WeakPassword <span class=\"keyword\">do</span> <span class=\"params\">|e|</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> notification password too weak</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> init recommmend password</span></span><br><span class=\"line\">      <span class=\"comment\"># <span class=\"doctag\">TODO:</span> display recommend password for UI</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ... N exception na, tu nhu cu ca bn.</span></span><br><span class=\"line\"> <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationControler</span> &lt; ActionController::Base</span></span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleLog</span><br><span class=\"line\">  <span class=\"keyword\">include</span> HandleException</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-Tham-khao\"><a href=\"#9-Tham-khao\" class=\"headerlink\" title=\"9. Tham kho\"></a>9. Tham kho</h2><p>[1] <a href=\"http://rubylearning.com/satishtalim/ruby_exceptions.html\" target=\"_blank\" rel=\"noopener\">http://rubylearning.com/satishtalim/ruby_exceptions.html</a></p>\n"},{"title":"Save Navigation Operator","date":"2020-05-11T17:00:00.000Z","label":"#til","_content":"\n> Just take a note from resources on internet!\n\n## 1. ActiveRecord\n\n```ruby\naccount = Account.new(owner: nil) # account without an owner\n\naccount.owner.address\n# => NoMethodError: undefined method `address' for nil:NilClass\n\naccount && account.owner && account.owner.address\n# => nil\n\naccount.try(:owner).try(:address)\n# => nil\n\naccount&.owner&.address\n# => nil\n```\n\n```ruby\naccount = Account.new(owner: false)\n\naccount.owner.address\n# => NoMethodError: undefined method `address' for false:FalseClass `\n\naccount && account.owner && account.owner.address\n# => false\n\naccount.try(:owner).try(:address)\n# => nil\n\naccount&.owner&.address\n# => undefined method `address' for false:FalseClass`\n```\n\n```ruby\naccount = Account.new(owner: Object.new)\n# owner have not addreess column\n\naccount.owner.address\n# => NoMethodError: undefined method `address' for #<Object:0x00559996b5bde8>\n\naccount && account.owner && account.owner.address\n# => NoMethodError: undefined method `address' for #<Object:0x00559996b5bde8>`\n\naccount.try(:owner).try(:address)\n# => nil\n\naccount&.owner&.address\n# => NoMethodError: undefined method `address' for #<Object:0x00559996b5bde8>`\n```\n\nCatch exception with `try!`\n\n```ruby\naccount.try!(:owner).try!(:address)\n# => NoMethodError: undefined method `address' for #<Object:0x00559996b5bde8>`\n```\n\n## 2. Hash\n\n```ruby\nh = {\n  key_1: {\n    key_2: {\n      key_3: \"Value\"\n    }\n  }\n}\n```\n\n```ruby\nh&.[](:key_1)&.[](:key_2)&.[](:key_3)\n```\n\n```ruby\nh.dig(:key_1, :key_2, :key_3)\n```\n\n## Resources\n\n[1][http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/](http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/)\n\n[2][https://stackoverflow.com/questions/35922774/safe-navigation-equivalent-to-rails-try-for-hashes](https://stackoverflow.com/questions/35922774/safe-navigation-equivalent-to-rails-try-for-hashes)\n","source":"_posts/2020-05-12-safe-navigation-operator.md","raw":"---\ntitle: \"Save Navigation Operator\"\ndate: 2020-05-12\ntags: [\"NOTES\"]\nlabel: \"#til\"\n---\n\n> Just take a note from resources on internet!\n\n## 1. ActiveRecord\n\n```ruby\naccount = Account.new(owner: nil) # account without an owner\n\naccount.owner.address\n# => NoMethodError: undefined method `address' for nil:NilClass\n\naccount && account.owner && account.owner.address\n# => nil\n\naccount.try(:owner).try(:address)\n# => nil\n\naccount&.owner&.address\n# => nil\n```\n\n```ruby\naccount = Account.new(owner: false)\n\naccount.owner.address\n# => NoMethodError: undefined method `address' for false:FalseClass `\n\naccount && account.owner && account.owner.address\n# => false\n\naccount.try(:owner).try(:address)\n# => nil\n\naccount&.owner&.address\n# => undefined method `address' for false:FalseClass`\n```\n\n```ruby\naccount = Account.new(owner: Object.new)\n# owner have not addreess column\n\naccount.owner.address\n# => NoMethodError: undefined method `address' for #<Object:0x00559996b5bde8>\n\naccount && account.owner && account.owner.address\n# => NoMethodError: undefined method `address' for #<Object:0x00559996b5bde8>`\n\naccount.try(:owner).try(:address)\n# => nil\n\naccount&.owner&.address\n# => NoMethodError: undefined method `address' for #<Object:0x00559996b5bde8>`\n```\n\nCatch exception with `try!`\n\n```ruby\naccount.try!(:owner).try!(:address)\n# => NoMethodError: undefined method `address' for #<Object:0x00559996b5bde8>`\n```\n\n## 2. Hash\n\n```ruby\nh = {\n  key_1: {\n    key_2: {\n      key_3: \"Value\"\n    }\n  }\n}\n```\n\n```ruby\nh&.[](:key_1)&.[](:key_2)&.[](:key_3)\n```\n\n```ruby\nh.dig(:key_1, :key_2, :key_3)\n```\n\n## Resources\n\n[1][http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/](http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/)\n\n[2][https://stackoverflow.com/questions/35922774/safe-navigation-equivalent-to-rails-try-for-hashes](https://stackoverflow.com/questions/35922774/safe-navigation-equivalent-to-rails-try-for-hashes)\n","slug":"2020-05-12-safe-navigation-operator","published":1,"updated":"2022-01-29T09:29:59.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbp0045p3m2gtwubt2w","content":"<blockquote>\n<p>Just take a note from resources on internet!</p>\n</blockquote>\n<h2 id=\"1-ActiveRecord\"><a href=\"#1-ActiveRecord\" class=\"headerlink\" title=\"1. ActiveRecord\"></a>1. ActiveRecord</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">account = Account.new(<span class=\"symbol\">owner:</span> <span class=\"literal\">nil</span>) <span class=\"comment\"># account without an owner</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for nil:NilClass</span></span><br><span class=\"line\"></span><br><span class=\"line\">account &amp;&amp; account.owner &amp;&amp; account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.try(<span class=\"symbol\">:owner</span>).try(<span class=\"symbol\">:address</span>)</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">account&amp;.owner&amp;.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">account = Account.new(<span class=\"symbol\">owner:</span> <span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for false:FalseClass `</span></span><br><span class=\"line\"></span><br><span class=\"line\">account &amp;&amp; account.owner &amp;&amp; account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; false</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.try(<span class=\"symbol\">:owner</span>).try(<span class=\"symbol\">:address</span>)</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">account&amp;.owner&amp;.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; undefined method `address' for false:FalseClass`</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">account = Account.new(<span class=\"symbol\">owner:</span> Object.new)</span><br><span class=\"line\"><span class=\"comment\"># owner have not addreess column</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">account &amp;&amp; account.owner &amp;&amp; account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;`</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.try(<span class=\"symbol\">:owner</span>).try(<span class=\"symbol\">:address</span>)</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">account&amp;.owner&amp;.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;`</span></span><br></pre></td></tr></table></figure>\n\n<p>Catch exception with <code>try!</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">account.try!(<span class=\"symbol\">:owner</span>).try!(<span class=\"symbol\">:address</span>)</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;`</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Hash\"><a href=\"#2-Hash\" class=\"headerlink\" title=\"2. Hash\"></a>2. Hash</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h = &#123;</span><br><span class=\"line\">  <span class=\"symbol\">key_1:</span> &#123;</span><br><span class=\"line\">    <span class=\"symbol\">key_2:</span> &#123;</span><br><span class=\"line\">      <span class=\"symbol\">key_3:</span> <span class=\"string\">\"Value\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h&amp;.[](<span class=\"symbol\">:key_1</span>)&amp;.[](<span class=\"symbol\">:key_2</span>)&amp;.[](<span class=\"symbol\">:key_3</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h.dig(<span class=\"symbol\">:key_1</span>, <span class=\"symbol\">:key_2</span>, <span class=\"symbol\">:key_3</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Resources\"><a href=\"#Resources\" class=\"headerlink\" title=\"Resources\"></a>Resources</h2><p>[1]<a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" target=\"_blank\" rel=\"noopener\">http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/</a></p>\n<p>[2]<a href=\"https://stackoverflow.com/questions/35922774/safe-navigation-equivalent-to-rails-try-for-hashes\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/35922774/safe-navigation-equivalent-to-rails-try-for-hashes</a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>Just take a note from resources on internet!</p>\n</blockquote>\n<h2 id=\"1-ActiveRecord\"><a href=\"#1-ActiveRecord\" class=\"headerlink\" title=\"1. ActiveRecord\"></a>1. ActiveRecord</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">account = Account.new(<span class=\"symbol\">owner:</span> <span class=\"literal\">nil</span>) <span class=\"comment\"># account without an owner</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for nil:NilClass</span></span><br><span class=\"line\"></span><br><span class=\"line\">account &amp;&amp; account.owner &amp;&amp; account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.try(<span class=\"symbol\">:owner</span>).try(<span class=\"symbol\">:address</span>)</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">account&amp;.owner&amp;.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">account = Account.new(<span class=\"symbol\">owner:</span> <span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for false:FalseClass `</span></span><br><span class=\"line\"></span><br><span class=\"line\">account &amp;&amp; account.owner &amp;&amp; account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; false</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.try(<span class=\"symbol\">:owner</span>).try(<span class=\"symbol\">:address</span>)</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">account&amp;.owner&amp;.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; undefined method `address' for false:FalseClass`</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">account = Account.new(<span class=\"symbol\">owner:</span> Object.new)</span><br><span class=\"line\"><span class=\"comment\"># owner have not addreess column</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">account &amp;&amp; account.owner &amp;&amp; account.owner.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;`</span></span><br><span class=\"line\"></span><br><span class=\"line\">account.try(<span class=\"symbol\">:owner</span>).try(<span class=\"symbol\">:address</span>)</span><br><span class=\"line\"><span class=\"comment\"># =&gt; nil</span></span><br><span class=\"line\"></span><br><span class=\"line\">account&amp;.owner&amp;.address</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;`</span></span><br></pre></td></tr></table></figure>\n\n<p>Catch exception with <code>try!</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">account.try!(<span class=\"symbol\">:owner</span>).try!(<span class=\"symbol\">:address</span>)</span><br><span class=\"line\"><span class=\"comment\"># =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;`</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Hash\"><a href=\"#2-Hash\" class=\"headerlink\" title=\"2. Hash\"></a>2. Hash</h2><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h = &#123;</span><br><span class=\"line\">  <span class=\"symbol\">key_1:</span> &#123;</span><br><span class=\"line\">    <span class=\"symbol\">key_2:</span> &#123;</span><br><span class=\"line\">      <span class=\"symbol\">key_3:</span> <span class=\"string\">\"Value\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h&amp;.[](<span class=\"symbol\">:key_1</span>)&amp;.[](<span class=\"symbol\">:key_2</span>)&amp;.[](<span class=\"symbol\">:key_3</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h.dig(<span class=\"symbol\">:key_1</span>, <span class=\"symbol\">:key_2</span>, <span class=\"symbol\">:key_3</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Resources\"><a href=\"#Resources\" class=\"headerlink\" title=\"Resources\"></a>Resources</h2><p>[1]<a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" target=\"_blank\" rel=\"noopener\">http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/</a></p>\n<p>[2]<a href=\"https://stackoverflow.com/questions/35922774/safe-navigation-equivalent-to-rails-try-for-hashes\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/35922774/safe-navigation-equivalent-to-rails-try-for-hashes</a></p>\n"},{"title":"URLs: Dash vs. Underscores","date":"2020-05-13T17:00:00.000Z","label":"#til","_content":"\nConsider using punctuation in your URLs. The URL http://www.example.com/green-dress.html is much more useful to us than http://www.example.com/greendress.html. We recommend that you use hyphens (-) instead of underscores (_) in your URLs.\n\n>Dashes are recommended by Google over underscores.\n>Dashes are more familiar to the end user.\n>Dashes are easier to write on a standard keyboard (no need to Shift).\n>Dashes don't hide behind underlines.\n>Dashes feel more native in the context of URLs as they are allowed in domain names.\n\n[1][https://stackoverflow.com/questions/119312/urls-dash-vs-underscore](https://stackoverflow.com/questions/119312/urls-dash-vs-underscore)\n\n[2][https://support.google.com/webmasters/answer/76329?hl=en](https://support.google.com/webmasters/answer/76329?hl=en)\n","source":"_posts/2020-05-14-url-dash-vs-underscore.md","raw":"---\ntitle: \"URLs: Dash vs. Underscores\"\ndate: 2020-05-14\ntags: [\"NOTES\"]\nlabel: \"#til\"\n---\n\nConsider using punctuation in your URLs. The URL http://www.example.com/green-dress.html is much more useful to us than http://www.example.com/greendress.html. We recommend that you use hyphens (-) instead of underscores (_) in your URLs.\n\n>Dashes are recommended by Google over underscores.\n>Dashes are more familiar to the end user.\n>Dashes are easier to write on a standard keyboard (no need to Shift).\n>Dashes don't hide behind underlines.\n>Dashes feel more native in the context of URLs as they are allowed in domain names.\n\n[1][https://stackoverflow.com/questions/119312/urls-dash-vs-underscore](https://stackoverflow.com/questions/119312/urls-dash-vs-underscore)\n\n[2][https://support.google.com/webmasters/answer/76329?hl=en](https://support.google.com/webmasters/answer/76329?hl=en)\n","slug":"2020-05-14-url-dash-vs-underscore","published":1,"updated":"2022-01-29T09:29:59.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbq0047p3m2cahtc3ny","content":"<p>Consider using punctuation in your URLs. The URL <a href=\"http://www.example.com/green-dress.html\" target=\"_blank\" rel=\"noopener\">http://www.example.com/green-dress.html</a> is much more useful to us than <a href=\"http://www.example.com/greendress.html\" target=\"_blank\" rel=\"noopener\">http://www.example.com/greendress.html</a>. We recommend that you use hyphens (-) instead of underscores (_) in your URLs.</p>\n<blockquote>\n<p>Dashes are recommended by Google over underscores.<br>Dashes are more familiar to the end user.<br>Dashes are easier to write on a standard keyboard (no need to Shift).<br>Dashes dont hide behind underlines.<br>Dashes feel more native in the context of URLs as they are allowed in domain names.</p>\n</blockquote>\n<p>[1]<a href=\"https://stackoverflow.com/questions/119312/urls-dash-vs-underscore\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/119312/urls-dash-vs-underscore</a></p>\n<p>[2]<a href=\"https://support.google.com/webmasters/answer/76329?hl=en\" target=\"_blank\" rel=\"noopener\">https://support.google.com/webmasters/answer/76329?hl=en</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Consider using punctuation in your URLs. The URL <a href=\"http://www.example.com/green-dress.html\" target=\"_blank\" rel=\"noopener\">http://www.example.com/green-dress.html</a> is much more useful to us than <a href=\"http://www.example.com/greendress.html\" target=\"_blank\" rel=\"noopener\">http://www.example.com/greendress.html</a>. We recommend that you use hyphens (-) instead of underscores (_) in your URLs.</p>\n<blockquote>\n<p>Dashes are recommended by Google over underscores.<br>Dashes are more familiar to the end user.<br>Dashes are easier to write on a standard keyboard (no need to Shift).<br>Dashes dont hide behind underlines.<br>Dashes feel more native in the context of URLs as they are allowed in domain names.</p>\n</blockquote>\n<p>[1]<a href=\"https://stackoverflow.com/questions/119312/urls-dash-vs-underscore\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/119312/urls-dash-vs-underscore</a></p>\n<p>[2]<a href=\"https://support.google.com/webmasters/answer/76329?hl=en\" target=\"_blank\" rel=\"noopener\">https://support.google.com/webmasters/answer/76329?hl=en</a></p>\n"},{"title":"Lm Mini App Cho V P.1","date":"2020-05-16T17:00:00.000Z","_content":"\n## Nhu cu\n\nChuyn l mnh  ly v c na nm, tnh ra cng kh sm, nhng u l ci duyn, duyn n th nhn, sm hay mun l do nhn m ra, quan trng bn thn cm thy vui v.\n\nV chng mnh tr...v d nhin cng ngho :(, chi tiu, gi c tng phi m, ci con s lm pht trn tivi c v khng c chnh xc, 2 v chng i lm c c gng m cui thng khng b ra c ng bao nhiu tin, trong khi cn cha c con ci, ng suy ngm m cng ng  lo lng.\n\nC vn , th ta tm cch gii quyt, mnh i n 2 quyt nh:\n\n1. Tm mt cng vic khc c thu nhp tt hn.\n2. Cc chi tiu cn c thng k li.\n\n c th thc hin iu s 2, v chng mnh cn ch ng ghi chp li ton b chi tiu, m ri lm sao  ghi chp?\n\nMnh c tm hiu mt s ng dng thng k, ghi chp thu chi, nhng kt qu khng tt, vi l do nhng ng dng  khng match c vi nhu cu. **Hn na iu quan trng nht,  l v chng mnh li, vy nn  duy tr mt thi quen lu di, chng mnh cn cng vic  thc s N GIN.**\n\nCc ng dng mnh tm c qu phc tp, ngay c vic m 1 ci app note ln ghi note text li thi, cha chc bn  lm c ngy ny qua ngy khc, hung h ghi thu chi.\n\n\nV vy, mnh quyt nh lm 1 ng dng mini  match ng nhu cu mnh ang c, v n phi n gin, n gin n mc mnh (1 ngi li) cng c th duy tr lu di.\n\n## D nh\n\nVi d nh nh trn, mnh quyt nh lm 1 **Chat Bot** n gin,  mi ln ghi thu chi mnh c th m 1 app nhn tin no  ln g v enter l xong. Tip  mnh cn 1 **web app** cng n gin khng km, ch cn c chc nng ng nhp, xem thu chi trong ngy, trong thng, trong nm, xem  th so snh gia cc ngy trong tun, xem  th so snh gia cc tun trong thng, v c th trong tng lai l so snh cc ngy trong nm, v c chc nng gi report qua email. Vy l n v match vi nhu cu tit kim ca v chng mnh.\n\nVi s tnh nng trn mnh  la chn nh sau:\n\n1. **Chat Bot**: S dng nn tng ca facebook messenger (l do: ni ting, bn thn mnh v v cng hay xi).\n\n2. **Web App**: Backend (Ruby On Rails, mnh c 1 side project nn gi ch vit thm module cho phn chc nng cn c ca app thu chi ch khng cn to project t u - Trin khai trn Heroku), Frontend (Reactjs - Trin khai trn Now.sh).\n\nFlow nh sau:\n\n1. Mnh gi tin nhn n facebook chatbot.\n2. Tin nhn  c gi ti server backend. Backend phn tch format ca tin nhn v lu li thng tin nu d liu hp l.\n3. Mnh vo web Frontend  monitor qu trnh chi tiu.\n\n## Tng kt\n\nKhi mnh vit bi vit ny, th ng dng nh ny  c trin khai v v chng mnh  c 1 tun s dng, chng mnh kh ng , hi vng c th duy tr thi quen ny lu di.\n\nQua y mnh s vit qu trnh lm mini app ny, t khi lm ti khi trin khai v sau  l c gng hc hi  improve t chc project tt hn (mnh cha c nhiu kinh nghim Frontend, nn y cng l c hi  c nhng ti liu hay ho v Frontend).\n","source":"_posts/2020-05-17-lam-mini-app-cho-vo-phan-1.md","raw":"---\ntitle: \"Lm Mini App Cho V P.1\"\ndate: 2020-05-17\n---\n\n## Nhu cu\n\nChuyn l mnh  ly v c na nm, tnh ra cng kh sm, nhng u l ci duyn, duyn n th nhn, sm hay mun l do nhn m ra, quan trng bn thn cm thy vui v.\n\nV chng mnh tr...v d nhin cng ngho :(, chi tiu, gi c tng phi m, ci con s lm pht trn tivi c v khng c chnh xc, 2 v chng i lm c c gng m cui thng khng b ra c ng bao nhiu tin, trong khi cn cha c con ci, ng suy ngm m cng ng  lo lng.\n\nC vn , th ta tm cch gii quyt, mnh i n 2 quyt nh:\n\n1. Tm mt cng vic khc c thu nhp tt hn.\n2. Cc chi tiu cn c thng k li.\n\n c th thc hin iu s 2, v chng mnh cn ch ng ghi chp li ton b chi tiu, m ri lm sao  ghi chp?\n\nMnh c tm hiu mt s ng dng thng k, ghi chp thu chi, nhng kt qu khng tt, vi l do nhng ng dng  khng match c vi nhu cu. **Hn na iu quan trng nht,  l v chng mnh li, vy nn  duy tr mt thi quen lu di, chng mnh cn cng vic  thc s N GIN.**\n\nCc ng dng mnh tm c qu phc tp, ngay c vic m 1 ci app note ln ghi note text li thi, cha chc bn  lm c ngy ny qua ngy khc, hung h ghi thu chi.\n\n\nV vy, mnh quyt nh lm 1 ng dng mini  match ng nhu cu mnh ang c, v n phi n gin, n gin n mc mnh (1 ngi li) cng c th duy tr lu di.\n\n## D nh\n\nVi d nh nh trn, mnh quyt nh lm 1 **Chat Bot** n gin,  mi ln ghi thu chi mnh c th m 1 app nhn tin no  ln g v enter l xong. Tip  mnh cn 1 **web app** cng n gin khng km, ch cn c chc nng ng nhp, xem thu chi trong ngy, trong thng, trong nm, xem  th so snh gia cc ngy trong tun, xem  th so snh gia cc tun trong thng, v c th trong tng lai l so snh cc ngy trong nm, v c chc nng gi report qua email. Vy l n v match vi nhu cu tit kim ca v chng mnh.\n\nVi s tnh nng trn mnh  la chn nh sau:\n\n1. **Chat Bot**: S dng nn tng ca facebook messenger (l do: ni ting, bn thn mnh v v cng hay xi).\n\n2. **Web App**: Backend (Ruby On Rails, mnh c 1 side project nn gi ch vit thm module cho phn chc nng cn c ca app thu chi ch khng cn to project t u - Trin khai trn Heroku), Frontend (Reactjs - Trin khai trn Now.sh).\n\nFlow nh sau:\n\n1. Mnh gi tin nhn n facebook chatbot.\n2. Tin nhn  c gi ti server backend. Backend phn tch format ca tin nhn v lu li thng tin nu d liu hp l.\n3. Mnh vo web Frontend  monitor qu trnh chi tiu.\n\n## Tng kt\n\nKhi mnh vit bi vit ny, th ng dng nh ny  c trin khai v v chng mnh  c 1 tun s dng, chng mnh kh ng , hi vng c th duy tr thi quen ny lu di.\n\nQua y mnh s vit qu trnh lm mini app ny, t khi lm ti khi trin khai v sau  l c gng hc hi  improve t chc project tt hn (mnh cha c nhiu kinh nghim Frontend, nn y cng l c hi  c nhng ti liu hay ho v Frontend).\n","slug":"2020-05-17-lam-mini-app-cho-vo-phan-1","published":1,"updated":"2022-01-29T09:29:59.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbq004ap3m291jeg5kh","content":"<h2 id=\"Nhu-cau\"><a href=\"#Nhu-cau\" class=\"headerlink\" title=\"Nhu cu\"></a>Nhu cu</h2><p>Chuyn l mnh  ly v c na nm, tnh ra cng kh sm, nhng u l ci duyn, duyn n th nhn, sm hay mun l do nhn m ra, quan trng bn thn cm thy vui v.</p>\n<p>V chng mnh trv d nhin cng ngho :(, chi tiu, gi c tng phi m, ci con s lm pht trn tivi c v khng c chnh xc, 2 v chng i lm c c gng m cui thng khng b ra c ng bao nhiu tin, trong khi cn cha c con ci, ng suy ngm m cng ng  lo lng.</p>\n<p>C vn , th ta tm cch gii quyt, mnh i n 2 quyt nh:</p>\n<ol>\n<li>Tm mt cng vic khc c thu nhp tt hn.</li>\n<li>Cc chi tiu cn c thng k li.</li>\n</ol>\n<p> c th thc hin iu s 2, v chng mnh cn ch ng ghi chp li ton b chi tiu, m ri lm sao  ghi chp?</p>\n<p>Mnh c tm hiu mt s ng dng thng k, ghi chp thu chi, nhng kt qu khng tt, vi l do nhng ng dng  khng match c vi nhu cu. <strong>Hn na iu quan trng nht,  l v chng mnh li, vy nn  duy tr mt thi quen lu di, chng mnh cn cng vic  thc s N GIN.</strong></p>\n<p>Cc ng dng mnh tm c qu phc tp, ngay c vic m 1 ci app note ln ghi note text li thi, cha chc bn  lm c ngy ny qua ngy khc, hung h ghi thu chi.</p>\n<p>V vy, mnh quyt nh lm 1 ng dng mini  match ng nhu cu mnh ang c, v n phi n gin, n gin n mc mnh (1 ngi li) cng c th duy tr lu di.</p>\n<h2 id=\"Du-dinh\"><a href=\"#Du-dinh\" class=\"headerlink\" title=\"D nh\"></a>D nh</h2><p>Vi d nh nh trn, mnh quyt nh lm 1 <strong>Chat Bot</strong> n gin,  mi ln ghi thu chi mnh c th m 1 app nhn tin no  ln g v enter l xong. Tip  mnh cn 1 <strong>web app</strong> cng n gin khng km, ch cn c chc nng ng nhp, xem thu chi trong ngy, trong thng, trong nm, xem  th so snh gia cc ngy trong tun, xem  th so snh gia cc tun trong thng, v c th trong tng lai l so snh cc ngy trong nm, v c chc nng gi report qua email. Vy l n v match vi nhu cu tit kim ca v chng mnh.</p>\n<p>Vi s tnh nng trn mnh  la chn nh sau:</p>\n<ol>\n<li><p><strong>Chat Bot</strong>: S dng nn tng ca facebook messenger (l do: ni ting, bn thn mnh v v cng hay xi).</p>\n</li>\n<li><p><strong>Web App</strong>: Backend (Ruby On Rails, mnh c 1 side project nn gi ch vit thm module cho phn chc nng cn c ca app thu chi ch khng cn to project t u - Trin khai trn Heroku), Frontend (Reactjs - Trin khai trn Now.sh).</p>\n</li>\n</ol>\n<p>Flow nh sau:</p>\n<ol>\n<li>Mnh gi tin nhn n facebook chatbot.</li>\n<li>Tin nhn  c gi ti server backend. Backend phn tch format ca tin nhn v lu li thng tin nu d liu hp l.</li>\n<li>Mnh vo web Frontend  monitor qu trnh chi tiu.</li>\n</ol>\n<h2 id=\"Tong-ket\"><a href=\"#Tong-ket\" class=\"headerlink\" title=\"Tng kt\"></a>Tng kt</h2><p>Khi mnh vit bi vit ny, th ng dng nh ny  c trin khai v v chng mnh  c 1 tun s dng, chng mnh kh ng , hi vng c th duy tr thi quen ny lu di.</p>\n<p>Qua y mnh s vit qu trnh lm mini app ny, t khi lm ti khi trin khai v sau  l c gng hc hi  improve t chc project tt hn (mnh cha c nhiu kinh nghim Frontend, nn y cng l c hi  c nhng ti liu hay ho v Frontend).</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Nhu-cau\"><a href=\"#Nhu-cau\" class=\"headerlink\" title=\"Nhu cu\"></a>Nhu cu</h2><p>Chuyn l mnh  ly v c na nm, tnh ra cng kh sm, nhng u l ci duyn, duyn n th nhn, sm hay mun l do nhn m ra, quan trng bn thn cm thy vui v.</p>\n<p>V chng mnh trv d nhin cng ngho :(, chi tiu, gi c tng phi m, ci con s lm pht trn tivi c v khng c chnh xc, 2 v chng i lm c c gng m cui thng khng b ra c ng bao nhiu tin, trong khi cn cha c con ci, ng suy ngm m cng ng  lo lng.</p>\n<p>C vn , th ta tm cch gii quyt, mnh i n 2 quyt nh:</p>\n<ol>\n<li>Tm mt cng vic khc c thu nhp tt hn.</li>\n<li>Cc chi tiu cn c thng k li.</li>\n</ol>\n<p> c th thc hin iu s 2, v chng mnh cn ch ng ghi chp li ton b chi tiu, m ri lm sao  ghi chp?</p>\n<p>Mnh c tm hiu mt s ng dng thng k, ghi chp thu chi, nhng kt qu khng tt, vi l do nhng ng dng  khng match c vi nhu cu. <strong>Hn na iu quan trng nht,  l v chng mnh li, vy nn  duy tr mt thi quen lu di, chng mnh cn cng vic  thc s N GIN.</strong></p>\n<p>Cc ng dng mnh tm c qu phc tp, ngay c vic m 1 ci app note ln ghi note text li thi, cha chc bn  lm c ngy ny qua ngy khc, hung h ghi thu chi.</p>\n<p>V vy, mnh quyt nh lm 1 ng dng mini  match ng nhu cu mnh ang c, v n phi n gin, n gin n mc mnh (1 ngi li) cng c th duy tr lu di.</p>\n<h2 id=\"Du-dinh\"><a href=\"#Du-dinh\" class=\"headerlink\" title=\"D nh\"></a>D nh</h2><p>Vi d nh nh trn, mnh quyt nh lm 1 <strong>Chat Bot</strong> n gin,  mi ln ghi thu chi mnh c th m 1 app nhn tin no  ln g v enter l xong. Tip  mnh cn 1 <strong>web app</strong> cng n gin khng km, ch cn c chc nng ng nhp, xem thu chi trong ngy, trong thng, trong nm, xem  th so snh gia cc ngy trong tun, xem  th so snh gia cc tun trong thng, v c th trong tng lai l so snh cc ngy trong nm, v c chc nng gi report qua email. Vy l n v match vi nhu cu tit kim ca v chng mnh.</p>\n<p>Vi s tnh nng trn mnh  la chn nh sau:</p>\n<ol>\n<li><p><strong>Chat Bot</strong>: S dng nn tng ca facebook messenger (l do: ni ting, bn thn mnh v v cng hay xi).</p>\n</li>\n<li><p><strong>Web App</strong>: Backend (Ruby On Rails, mnh c 1 side project nn gi ch vit thm module cho phn chc nng cn c ca app thu chi ch khng cn to project t u - Trin khai trn Heroku), Frontend (Reactjs - Trin khai trn Now.sh).</p>\n</li>\n</ol>\n<p>Flow nh sau:</p>\n<ol>\n<li>Mnh gi tin nhn n facebook chatbot.</li>\n<li>Tin nhn  c gi ti server backend. Backend phn tch format ca tin nhn v lu li thng tin nu d liu hp l.</li>\n<li>Mnh vo web Frontend  monitor qu trnh chi tiu.</li>\n</ol>\n<h2 id=\"Tong-ket\"><a href=\"#Tong-ket\" class=\"headerlink\" title=\"Tng kt\"></a>Tng kt</h2><p>Khi mnh vit bi vit ny, th ng dng nh ny  c trin khai v v chng mnh  c 1 tun s dng, chng mnh kh ng , hi vng c th duy tr thi quen ny lu di.</p>\n<p>Qua y mnh s vit qu trnh lm mini app ny, t khi lm ti khi trin khai v sau  l c gng hc hi  improve t chc project tt hn (mnh cha c nhiu kinh nghim Frontend, nn y cng l c hi  c nhng ti liu hay ho v Frontend).</p>\n"},{"title":"Linux Process Type","date":"2020-05-12T17:00:00.000Z","label":"#til","_content":"\n> In Linux, these processes are divided into 3 types of processes: Interactive, Batch and Daemon.\n\nThe processes which are run by a user at the command line are called **Interactive processes**.\n\nThe processes which are not associated with the command line and are presented from a queue of processes, which are also most convenient for recurring tasks during the time when the system usage is low is called **the batch processes**.\n\nThe process which is identified by the system and whose PID is always init, is called as **Daemons**. The init is a process which always gets started first at the time when a Linux computer is turned on and it remains on that system until the computer is turned off.\n\nThe Processes due to which Daemons get initiated are forking, making a parent process die when the child process starts performing their normal functions.\n\n[1][https://www.quora.com/What-is-a-daemon-process-in-Linux](https://www.quora.com/What-is-a-daemon-process-in-Linux)\n","source":"_posts/2020-05-13-linux-process-types-dirty-method.md","raw":"---\ntitle: \"Linux Process Type\"\ndate: 2020-05-13\ntags: [\"NOTES\"]\nlabel: \"#til\"\n---\n\n> In Linux, these processes are divided into 3 types of processes: Interactive, Batch and Daemon.\n\nThe processes which are run by a user at the command line are called **Interactive processes**.\n\nThe processes which are not associated with the command line and are presented from a queue of processes, which are also most convenient for recurring tasks during the time when the system usage is low is called **the batch processes**.\n\nThe process which is identified by the system and whose PID is always init, is called as **Daemons**. The init is a process which always gets started first at the time when a Linux computer is turned on and it remains on that system until the computer is turned off.\n\nThe Processes due to which Daemons get initiated are forking, making a parent process die when the child process starts performing their normal functions.\n\n[1][https://www.quora.com/What-is-a-daemon-process-in-Linux](https://www.quora.com/What-is-a-daemon-process-in-Linux)\n","slug":"2020-05-13-linux-process-types-dirty-method","published":1,"updated":"2022-01-29T09:29:59.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbr004cp3m22kfphlqw","content":"<blockquote>\n<p>In Linux, these processes are divided into 3 types of processes: Interactive, Batch and Daemon.</p>\n</blockquote>\n<p>The processes which are run by a user at the command line are called <strong>Interactive processes</strong>.</p>\n<p>The processes which are not associated with the command line and are presented from a queue of processes, which are also most convenient for recurring tasks during the time when the system usage is low is called <strong>the batch processes</strong>.</p>\n<p>The process which is identified by the system and whose PID is always init, is called as <strong>Daemons</strong>. The init is a process which always gets started first at the time when a Linux computer is turned on and it remains on that system until the computer is turned off.</p>\n<p>The Processes due to which Daemons get initiated are forking, making a parent process die when the child process starts performing their normal functions.</p>\n<p>[1]<a href=\"https://www.quora.com/What-is-a-daemon-process-in-Linux\" target=\"_blank\" rel=\"noopener\">https://www.quora.com/What-is-a-daemon-process-in-Linux</a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>In Linux, these processes are divided into 3 types of processes: Interactive, Batch and Daemon.</p>\n</blockquote>\n<p>The processes which are run by a user at the command line are called <strong>Interactive processes</strong>.</p>\n<p>The processes which are not associated with the command line and are presented from a queue of processes, which are also most convenient for recurring tasks during the time when the system usage is low is called <strong>the batch processes</strong>.</p>\n<p>The process which is identified by the system and whose PID is always init, is called as <strong>Daemons</strong>. The init is a process which always gets started first at the time when a Linux computer is turned on and it remains on that system until the computer is turned off.</p>\n<p>The Processes due to which Daemons get initiated are forking, making a parent process die when the child process starts performing their normal functions.</p>\n<p>[1]<a href=\"https://www.quora.com/What-is-a-daemon-process-in-Linux\" target=\"_blank\" rel=\"noopener\">https://www.quora.com/What-is-a-daemon-process-in-Linux</a></p>\n"},{"title":"Side Project Tip Theo","date":"2020-06-26T17:00:00.000Z","_content":"\nChuyn l mnh va ngh lm  cng ty c, trong thi gian v nh trc khi tm vic mi, mnh quyt nh lm mt side project nh tip theo.\n\n tng ca project ny n t 2 ngun cm hng:\n1. S li hc Ting Anh n cng cc ca mnh.\n2. Phng php Spaced Repetition.\n\nV th l mt Web App  hc t vng ting anh li c ra i, mc cho  c bit bao nhiu App c chc nng tng t.\n\nSau 5 ngy, d n nh ca mnh  hon thnh, cng  deploy v hin gi mnh cng ang s dng.\n\nChc nng th v cng n gin, nhng cng tn kh nhiu thi gian. L do l mnh host BE trn heroku vi gi free, nn cng phi cn chnh u ui m bo chy c cho 10k users ch :)\n\nQua d n nh ny mnh cng hc thm c vi th hay ho, khng lin quan n coding (l do l c qu t chc nng v app qu n gin nn cng ch c g  m improve nh phim).\n\nNhng iu mnh hc c l cch tip cn vn , ng gc nhn ca user ch **khng t overskill nhng th khng quan trng**, mnh ngh **nhn thc v UX ca mnh cng  c m mang**, UI tuy xu nhng mnh tin l UX ca mnh ang n. Ngoi ra vi ti nguyn v thi gian hu hn, **t ln chin lc**, thc hin v trin khai d n nh ny cng gip mnh ln k hoch tt hn, chnh mnh v c th c bn, ngi c nhng dng ny  tng nhiu ln ln k hoch lm g  nhng cui cng li khng bao gi lm.\n\nHin gi ci app n gin ca mnh  c 1k user ng k v sp x 100 user active hng ngy.  sao li ln nhanh nh vy  h? Ci ny l nh cu bn mnh c ci page gn 50K like trn FB, nn mnh mn PR cht nh. Hn th c 2 user rt trung thnh  l mnh v v, coi nh vy  thnh cng 1 phn, bn cht side project m ngi vit ra li khng dng c th coi nh tht bi.\n\n cn v phng php Spaced Repetition, mnh ly cm hng t bi vit di y, cc bn c th nh, to rt nhiu ng lc  nh c th gii =))) Cn lm c hay khng th vn l du hi. Bi vit ny mnh c c thng qua getpocket.\n\n[https://ncase.me/remember/](https://ncase.me/remember/)\n","source":"_posts/2020-06-27-viet-side-project.md","raw":"---\ntitle: \"Side Project Tip Theo\"\ndate: 2020-06-27\n---\n\nChuyn l mnh va ngh lm  cng ty c, trong thi gian v nh trc khi tm vic mi, mnh quyt nh lm mt side project nh tip theo.\n\n tng ca project ny n t 2 ngun cm hng:\n1. S li hc Ting Anh n cng cc ca mnh.\n2. Phng php Spaced Repetition.\n\nV th l mt Web App  hc t vng ting anh li c ra i, mc cho  c bit bao nhiu App c chc nng tng t.\n\nSau 5 ngy, d n nh ca mnh  hon thnh, cng  deploy v hin gi mnh cng ang s dng.\n\nChc nng th v cng n gin, nhng cng tn kh nhiu thi gian. L do l mnh host BE trn heroku vi gi free, nn cng phi cn chnh u ui m bo chy c cho 10k users ch :)\n\nQua d n nh ny mnh cng hc thm c vi th hay ho, khng lin quan n coding (l do l c qu t chc nng v app qu n gin nn cng ch c g  m improve nh phim).\n\nNhng iu mnh hc c l cch tip cn vn , ng gc nhn ca user ch **khng t overskill nhng th khng quan trng**, mnh ngh **nhn thc v UX ca mnh cng  c m mang**, UI tuy xu nhng mnh tin l UX ca mnh ang n. Ngoi ra vi ti nguyn v thi gian hu hn, **t ln chin lc**, thc hin v trin khai d n nh ny cng gip mnh ln k hoch tt hn, chnh mnh v c th c bn, ngi c nhng dng ny  tng nhiu ln ln k hoch lm g  nhng cui cng li khng bao gi lm.\n\nHin gi ci app n gin ca mnh  c 1k user ng k v sp x 100 user active hng ngy.  sao li ln nhanh nh vy  h? Ci ny l nh cu bn mnh c ci page gn 50K like trn FB, nn mnh mn PR cht nh. Hn th c 2 user rt trung thnh  l mnh v v, coi nh vy  thnh cng 1 phn, bn cht side project m ngi vit ra li khng dng c th coi nh tht bi.\n\n cn v phng php Spaced Repetition, mnh ly cm hng t bi vit di y, cc bn c th nh, to rt nhiu ng lc  nh c th gii =))) Cn lm c hay khng th vn l du hi. Bi vit ny mnh c c thng qua getpocket.\n\n[https://ncase.me/remember/](https://ncase.me/remember/)\n","slug":"2020-06-27-viet-side-project","published":1,"updated":"2022-01-29T09:29:59.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbr004fp3m20qwz5xwb","content":"<p>Chuyn l mnh va ngh lm  cng ty c, trong thi gian v nh trc khi tm vic mi, mnh quyt nh lm mt side project nh tip theo.</p>\n<p> tng ca project ny n t 2 ngun cm hng:</p>\n<ol>\n<li>S li hc Ting Anh n cng cc ca mnh.</li>\n<li>Phng php Spaced Repetition.</li>\n</ol>\n<p>V th l mt Web App  hc t vng ting anh li c ra i, mc cho  c bit bao nhiu App c chc nng tng t.</p>\n<p>Sau 5 ngy, d n nh ca mnh  hon thnh, cng  deploy v hin gi mnh cng ang s dng.</p>\n<p>Chc nng th v cng n gin, nhng cng tn kh nhiu thi gian. L do l mnh host BE trn heroku vi gi free, nn cng phi cn chnh u ui m bo chy c cho 10k users ch :)</p>\n<p>Qua d n nh ny mnh cng hc thm c vi th hay ho, khng lin quan n coding (l do l c qu t chc nng v app qu n gin nn cng ch c g  m improve nh phim).</p>\n<p>Nhng iu mnh hc c l cch tip cn vn , ng gc nhn ca user ch <strong>khng t overskill nhng th khng quan trng</strong>, mnh ngh <strong>nhn thc v UX ca mnh cng  c m mang</strong>, UI tuy xu nhng mnh tin l UX ca mnh ang n. Ngoi ra vi ti nguyn v thi gian hu hn, <strong>t ln chin lc</strong>, thc hin v trin khai d n nh ny cng gip mnh ln k hoch tt hn, chnh mnh v c th c bn, ngi c nhng dng ny  tng nhiu ln ln k hoch lm g  nhng cui cng li khng bao gi lm.</p>\n<p>Hin gi ci app n gin ca mnh  c 1k user ng k v sp x 100 user active hng ngy.  sao li ln nhanh nh vy  h? Ci ny l nh cu bn mnh c ci page gn 50K like trn FB, nn mnh mn PR cht nh. Hn th c 2 user rt trung thnh  l mnh v v, coi nh vy  thnh cng 1 phn, bn cht side project m ngi vit ra li khng dng c th coi nh tht bi.</p>\n<p> cn v phng php Spaced Repetition, mnh ly cm hng t bi vit di y, cc bn c th nh, to rt nhiu ng lc  nh c th gii =))) Cn lm c hay khng th vn l du hi. Bi vit ny mnh c c thng qua getpocket.</p>\n<p><a href=\"https://ncase.me/remember/\" target=\"_blank\" rel=\"noopener\">https://ncase.me/remember/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Chuyn l mnh va ngh lm  cng ty c, trong thi gian v nh trc khi tm vic mi, mnh quyt nh lm mt side project nh tip theo.</p>\n<p> tng ca project ny n t 2 ngun cm hng:</p>\n<ol>\n<li>S li hc Ting Anh n cng cc ca mnh.</li>\n<li>Phng php Spaced Repetition.</li>\n</ol>\n<p>V th l mt Web App  hc t vng ting anh li c ra i, mc cho  c bit bao nhiu App c chc nng tng t.</p>\n<p>Sau 5 ngy, d n nh ca mnh  hon thnh, cng  deploy v hin gi mnh cng ang s dng.</p>\n<p>Chc nng th v cng n gin, nhng cng tn kh nhiu thi gian. L do l mnh host BE trn heroku vi gi free, nn cng phi cn chnh u ui m bo chy c cho 10k users ch :)</p>\n<p>Qua d n nh ny mnh cng hc thm c vi th hay ho, khng lin quan n coding (l do l c qu t chc nng v app qu n gin nn cng ch c g  m improve nh phim).</p>\n<p>Nhng iu mnh hc c l cch tip cn vn , ng gc nhn ca user ch <strong>khng t overskill nhng th khng quan trng</strong>, mnh ngh <strong>nhn thc v UX ca mnh cng  c m mang</strong>, UI tuy xu nhng mnh tin l UX ca mnh ang n. Ngoi ra vi ti nguyn v thi gian hu hn, <strong>t ln chin lc</strong>, thc hin v trin khai d n nh ny cng gip mnh ln k hoch tt hn, chnh mnh v c th c bn, ngi c nhng dng ny  tng nhiu ln ln k hoch lm g  nhng cui cng li khng bao gi lm.</p>\n<p>Hin gi ci app n gin ca mnh  c 1k user ng k v sp x 100 user active hng ngy.  sao li ln nhanh nh vy  h? Ci ny l nh cu bn mnh c ci page gn 50K like trn FB, nn mnh mn PR cht nh. Hn th c 2 user rt trung thnh  l mnh v v, coi nh vy  thnh cng 1 phn, bn cht side project m ngi vit ra li khng dng c th coi nh tht bi.</p>\n<p> cn v phng php Spaced Repetition, mnh ly cm hng t bi vit di y, cc bn c th nh, to rt nhiu ng lc  nh c th gii =))) Cn lm c hay khng th vn l du hi. Bi vit ny mnh c c thng qua getpocket.</p>\n<p><a href=\"https://ncase.me/remember/\" target=\"_blank\" rel=\"noopener\">https://ncase.me/remember/</a></p>\n"},{"title":"Bad way to deploy Rails project to EC2","date":"2022-06-17T17:00:00.000Z","_content":"\n## 1. Setup Docker\n\n```bash\nsudo apt-get update\n```\n\n```bash\nsudo apt-get install \\\n    ca-certificates \\\n    curl \\\n    gnupg \\\n    lsb-release\n```\n\n```bash\nsudo mkdir -p /etc/apt/keyrings\n```\n\n```bash\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n```\n\n```bash\n echo \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n```\n\n```bash\nsudo apt-get update\n```\n\n```bash\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin\n```\n\n```bash\nsudo usermod -aG docker $USER\n```\n\n```bash\nsudo docker run hello-world\n```\n\n## 2. Setup docker compose\n\n```bash\nsudo apt-get update\n```\n\n```bash\nsudo apt-get install docker-compose-plugin\n```\n\n```bash\ndocker compose version\n```\n\n## 3. Pull source code to EC2\n\n## 4. Build docker images\n\n```bash\ndocker compose build\n```\n\n## 5. Run docker container\n\n```bash\ndocker compose up -d\n```\n\n## References\n[1][https://docs.docker.com/engine/install/ubuntu/#install-docker-engine](https://docs.docker.com/engine/install/ubuntu/#install-docker-engine)\n[2][https://docs.docker.com/compose/install/compose-plugin/#install-using-the-repository](https://docs.docker.com/compose/install/compose-plugin/#install-using-the-repository)\n","source":"_posts/2022-02-01-docker-2021.md","raw":"---\ntitle: Bad way to deploy Rails project to EC2\ndate: 2022-06-18\n---\n\n## 1. Setup Docker\n\n```bash\nsudo apt-get update\n```\n\n```bash\nsudo apt-get install \\\n    ca-certificates \\\n    curl \\\n    gnupg \\\n    lsb-release\n```\n\n```bash\nsudo mkdir -p /etc/apt/keyrings\n```\n\n```bash\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n```\n\n```bash\n echo \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n```\n\n```bash\nsudo apt-get update\n```\n\n```bash\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin\n```\n\n```bash\nsudo usermod -aG docker $USER\n```\n\n```bash\nsudo docker run hello-world\n```\n\n## 2. Setup docker compose\n\n```bash\nsudo apt-get update\n```\n\n```bash\nsudo apt-get install docker-compose-plugin\n```\n\n```bash\ndocker compose version\n```\n\n## 3. Pull source code to EC2\n\n## 4. Build docker images\n\n```bash\ndocker compose build\n```\n\n## 5. Run docker container\n\n```bash\ndocker compose up -d\n```\n\n## References\n[1][https://docs.docker.com/engine/install/ubuntu/#install-docker-engine](https://docs.docker.com/engine/install/ubuntu/#install-docker-engine)\n[2][https://docs.docker.com/compose/install/compose-plugin/#install-using-the-repository](https://docs.docker.com/compose/install/compose-plugin/#install-using-the-repository)\n","slug":"2022-02-01-docker-2021","published":1,"updated":"2022-06-18T08:36:29.946Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbr004hp3m24x5s8lbz","content":"<h2 id=\"1-Setup-Docker\"><a href=\"#1-Setup-Docker\" class=\"headerlink\" title=\"1. Setup Docker\"></a>1. Setup Docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install \\</span><br><span class=\"line\">    ca-certificates \\</span><br><span class=\"line\">    curl \\</span><br><span class=\"line\">    gnupg \\</span><br><span class=\"line\">    lsb-release</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /etc/apt/keyrings</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> \\</span><br><span class=\"line\"> <span class=\"string\">\"deb [arch=<span class=\"variable\">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\</span></span><br><span class=\"line\"><span class=\"string\"> <span class=\"variable\">$(lsb_release -cs)</span> stable\"</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo usermod -aG docker <span class=\"variable\">$USER</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run hello-world</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Setup-docker-compose\"><a href=\"#2-Setup-docker-compose\" class=\"headerlink\" title=\"2. Setup docker compose\"></a>2. Setup docker compose</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install docker-compose-plugin</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker compose version</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Pull-source-code-to-EC2\"><a href=\"#3-Pull-source-code-to-EC2\" class=\"headerlink\" title=\"3. Pull source code to EC2\"></a>3. Pull source code to EC2</h2><h2 id=\"4-Build-docker-images\"><a href=\"#4-Build-docker-images\" class=\"headerlink\" title=\"4. Build docker images\"></a>4. Build docker images</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker compose build</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-Run-docker-container\"><a href=\"#5-Run-docker-container\" class=\"headerlink\" title=\"5. Run docker container\"></a>5. Run docker container</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker compose up -d</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://docs.docker.com/engine/install/ubuntu/#install-docker-engine\" target=\"_blank\" rel=\"noopener\">https://docs.docker.com/engine/install/ubuntu/#install-docker-engine</a><br>[2]<a href=\"https://docs.docker.com/compose/install/compose-plugin/#install-using-the-repository\" target=\"_blank\" rel=\"noopener\">https://docs.docker.com/compose/install/compose-plugin/#install-using-the-repository</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Setup-Docker\"><a href=\"#1-Setup-Docker\" class=\"headerlink\" title=\"1. Setup Docker\"></a>1. Setup Docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install \\</span><br><span class=\"line\">    ca-certificates \\</span><br><span class=\"line\">    curl \\</span><br><span class=\"line\">    gnupg \\</span><br><span class=\"line\">    lsb-release</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /etc/apt/keyrings</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> \\</span><br><span class=\"line\"> <span class=\"string\">\"deb [arch=<span class=\"variable\">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\</span></span><br><span class=\"line\"><span class=\"string\"> <span class=\"variable\">$(lsb_release -cs)</span> stable\"</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo usermod -aG docker <span class=\"variable\">$USER</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run hello-world</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Setup-docker-compose\"><a href=\"#2-Setup-docker-compose\" class=\"headerlink\" title=\"2. Setup docker compose\"></a>2. Setup docker compose</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install docker-compose-plugin</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker compose version</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Pull-source-code-to-EC2\"><a href=\"#3-Pull-source-code-to-EC2\" class=\"headerlink\" title=\"3. Pull source code to EC2\"></a>3. Pull source code to EC2</h2><h2 id=\"4-Build-docker-images\"><a href=\"#4-Build-docker-images\" class=\"headerlink\" title=\"4. Build docker images\"></a>4. Build docker images</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker compose build</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-Run-docker-container\"><a href=\"#5-Run-docker-container\" class=\"headerlink\" title=\"5. Run docker container\"></a>5. Run docker container</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker compose up -d</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://docs.docker.com/engine/install/ubuntu/#install-docker-engine\" target=\"_blank\" rel=\"noopener\">https://docs.docker.com/engine/install/ubuntu/#install-docker-engine</a><br>[2]<a href=\"https://docs.docker.com/compose/install/compose-plugin/#install-using-the-repository\" target=\"_blank\" rel=\"noopener\">https://docs.docker.com/compose/install/compose-plugin/#install-using-the-repository</a></p>\n"},{"title":"Leetcode Tracking List","date":"2020-07-02T17:00:00.000Z","label":"#note","_content":"\n## 1. Array\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      |  3/7/2020 | normal |\n|2| https://leetcode.com/problems/container-with-most-water/     | 3/7/2020  |  high |\n|3| https://leetcode.com/problems/remove-duplicates-from-sorted-array/ | 4/7/2020 | high|\n\n## 2. Hash\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      | n/a | normal |\n|2| https://leetcode.com/problems/single-number/    | n/a | normal |\n|3| https://leetcode.com/problems/valid-anagram/   | n/a | high |\n|4| https://leetcode.com/problems/group-anagrams/   | n/a | high |\n|5| https://leetcode.com/problems/contains-duplicate/   | n/a | high |\n|6| https://leetcode.com/problems/top-k-frequent-elements/   | n/a | high |\n\n\n## 4. Search\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      | n/a | n/a |\n|2| https://leetcode.com/problems/container-with-most-water/     | n/a   |  n/a |\n\n## 5. Sort\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      | n/a | n/a |\n|2| https://leetcode.com/problems/container-with-most-water/     | n/a   |  n/a |\n\n## 6. Linked List\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      | n/a | n/a |\n|2| https://leetcode.com/problems/container-with-most-water/     | n/a   |  n/a |\n\n## 7. Sliding Window\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1|https://leetcode.com/problems/longest-substring-without-repeating-characters/     | n/a | high |\n\n## 7. SQL\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/combine-two-tables/ | n/a | high |\n|2| https://leetcode.com/problems/second-highest-salary/| n/a | high |\n|3| https://leetcode.com/problems/employees-earning-more-than-their-managers/submissions/| n/a | high |\n|4|https://leetcode.com/problems/duplicate-emails/| n/a | high |\n|5|https://leetcode.com/problems/customers-who-never-order/| n/a | high |\n|6|https://leetcode.com/problems/delete-duplicate-emails/solution/| n/a | high |\n|7|https://leetcode.com/problems/not-boring-movies/submissions/| n/a | high |\n|7|https://leetcode.com/problems/classes-more-than-5-students/ |n/a | high |\n|8|https://leetcode.com/problems/swap-salary/|n/a | high |\n\n## References\n\n[1][https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed](https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed)\n[2][https://stackoverflow.com/questions/8269916/what-is-sliding-window-algorithm-examples](https://stackoverflow.com/questions/8269916/what-is-sliding-window-algorithm-examples)\n[3][https://medium.com/outco/how-to-solve-sliding-window-problems-28d67601a66](https://medium.com/outco/how-to-solve-sliding-window-problems-28d67601a66)\n[4][https://www.geeksforgeeks.org/window-sliding-technique/](https://www.geeksforgeeks.org/window-sliding-technique/)\n[5][https://www.w3schools.com/sql/exercise.asp](https://www.w3schools.com/sql/exercise.asp)\n[6][https://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/intro/src/art/bkntjoin.gif](https://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/intro/src/art/bkntjoin.gif)\n","source":"_posts/2020-07-03-leetcode-track-list.md","raw":"---\ntitle: \"Leetcode Tracking List\"\ndate: 2020-07-03\nlabel: \"#note\"\n---\n\n## 1. Array\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      |  3/7/2020 | normal |\n|2| https://leetcode.com/problems/container-with-most-water/     | 3/7/2020  |  high |\n|3| https://leetcode.com/problems/remove-duplicates-from-sorted-array/ | 4/7/2020 | high|\n\n## 2. Hash\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      | n/a | normal |\n|2| https://leetcode.com/problems/single-number/    | n/a | normal |\n|3| https://leetcode.com/problems/valid-anagram/   | n/a | high |\n|4| https://leetcode.com/problems/group-anagrams/   | n/a | high |\n|5| https://leetcode.com/problems/contains-duplicate/   | n/a | high |\n|6| https://leetcode.com/problems/top-k-frequent-elements/   | n/a | high |\n\n\n## 4. Search\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      | n/a | n/a |\n|2| https://leetcode.com/problems/container-with-most-water/     | n/a   |  n/a |\n\n## 5. Sort\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      | n/a | n/a |\n|2| https://leetcode.com/problems/container-with-most-water/     | n/a   |  n/a |\n\n## 6. Linked List\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/two-sum/      | n/a | n/a |\n|2| https://leetcode.com/problems/container-with-most-water/     | n/a   |  n/a |\n\n## 7. Sliding Window\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1|https://leetcode.com/problems/longest-substring-without-repeating-characters/     | n/a | high |\n\n## 7. SQL\n\n| Order | Question        | Last Time           | Priority  |\n| --: | ------------- |:-------------:| -----:|\n|1| https://leetcode.com/problems/combine-two-tables/ | n/a | high |\n|2| https://leetcode.com/problems/second-highest-salary/| n/a | high |\n|3| https://leetcode.com/problems/employees-earning-more-than-their-managers/submissions/| n/a | high |\n|4|https://leetcode.com/problems/duplicate-emails/| n/a | high |\n|5|https://leetcode.com/problems/customers-who-never-order/| n/a | high |\n|6|https://leetcode.com/problems/delete-duplicate-emails/solution/| n/a | high |\n|7|https://leetcode.com/problems/not-boring-movies/submissions/| n/a | high |\n|7|https://leetcode.com/problems/classes-more-than-5-students/ |n/a | high |\n|8|https://leetcode.com/problems/swap-salary/|n/a | high |\n\n## References\n\n[1][https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed](https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed)\n[2][https://stackoverflow.com/questions/8269916/what-is-sliding-window-algorithm-examples](https://stackoverflow.com/questions/8269916/what-is-sliding-window-algorithm-examples)\n[3][https://medium.com/outco/how-to-solve-sliding-window-problems-28d67601a66](https://medium.com/outco/how-to-solve-sliding-window-problems-28d67601a66)\n[4][https://www.geeksforgeeks.org/window-sliding-technique/](https://www.geeksforgeeks.org/window-sliding-technique/)\n[5][https://www.w3schools.com/sql/exercise.asp](https://www.w3schools.com/sql/exercise.asp)\n[6][https://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/intro/src/art/bkntjoin.gif](https://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/intro/src/art/bkntjoin.gif)\n","slug":"2020-07-03-leetcode-track-list","published":1,"updated":"2022-01-29T09:34:22.460Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbs004ip3m20rdrfavb","content":"<h2 id=\"1-Array\"><a href=\"#1-Array\" class=\"headerlink\" title=\"1. Array\"></a>1. Array</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">3/7/2020</td>\n<td align=\"right\">normal</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/container-with-most-water/</a></td>\n<td align=\"center\">3/7/2020</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td><a href=\"https://leetcode.com/problems/remove-duplicates-from-sorted-array/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/remove-duplicates-from-sorted-array/</a></td>\n<td align=\"center\">4/7/2020</td>\n<td align=\"right\">high</td>\n</tr>\n</tbody></table>\n<h2 id=\"2-Hash\"><a href=\"#2-Hash\" class=\"headerlink\" title=\"2. Hash\"></a>2. Hash</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">normal</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/single-number/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/single-number/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">normal</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td><a href=\"https://leetcode.com/problems/valid-anagram/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/valid-anagram/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">4</td>\n<td><a href=\"https://leetcode.com/problems/group-anagrams/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/group-anagrams/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">5</td>\n<td><a href=\"https://leetcode.com/problems/contains-duplicate/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/contains-duplicate/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">6</td>\n<td><a href=\"https://leetcode.com/problems/top-k-frequent-elements/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/top-k-frequent-elements/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n</tbody></table>\n<h2 id=\"4-Search\"><a href=\"#4-Search\" class=\"headerlink\" title=\"4. Search\"></a>4. Search</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/container-with-most-water/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n</tbody></table>\n<h2 id=\"5-Sort\"><a href=\"#5-Sort\" class=\"headerlink\" title=\"5. Sort\"></a>5. Sort</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/container-with-most-water/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n</tbody></table>\n<h2 id=\"6-Linked-List\"><a href=\"#6-Linked-List\" class=\"headerlink\" title=\"6. Linked List\"></a>6. Linked List</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/container-with-most-water/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n</tbody></table>\n<h2 id=\"7-Sliding-Window\"><a href=\"#7-Sliding-Window\" class=\"headerlink\" title=\"7. Sliding Window\"></a>7. Sliding Window</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/longest-substring-without-repeating-characters/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/longest-substring-without-repeating-characters/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n</tbody></table>\n<h2 id=\"7-SQL\"><a href=\"#7-SQL\" class=\"headerlink\" title=\"7. SQL\"></a>7. SQL</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/combine-two-tables/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/combine-two-tables/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/second-highest-salary/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/second-highest-salary/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td><a href=\"https://leetcode.com/problems/employees-earning-more-than-their-managers/submissions/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/employees-earning-more-than-their-managers/submissions/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">4</td>\n<td><a href=\"https://leetcode.com/problems/duplicate-emails/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/duplicate-emails/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">5</td>\n<td><a href=\"https://leetcode.com/problems/customers-who-never-order/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/customers-who-never-order/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">6</td>\n<td><a href=\"https://leetcode.com/problems/delete-duplicate-emails/solution/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/delete-duplicate-emails/solution/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">7</td>\n<td><a href=\"https://leetcode.com/problems/not-boring-movies/submissions/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/not-boring-movies/submissions/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">7</td>\n<td><a href=\"https://leetcode.com/problems/classes-more-than-5-students/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/classes-more-than-5-students/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">8</td>\n<td><a href=\"https://leetcode.com/problems/swap-salary/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/swap-salary/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n</tbody></table>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed\" target=\"_blank\" rel=\"noopener\">https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed</a><br>[2]<a href=\"https://stackoverflow.com/questions/8269916/what-is-sliding-window-algorithm-examples\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/8269916/what-is-sliding-window-algorithm-examples</a><br>[3]<a href=\"https://medium.com/outco/how-to-solve-sliding-window-problems-28d67601a66\" target=\"_blank\" rel=\"noopener\">https://medium.com/outco/how-to-solve-sliding-window-problems-28d67601a66</a><br>[4]<a href=\"https://www.geeksforgeeks.org/window-sliding-technique/\" target=\"_blank\" rel=\"noopener\">https://www.geeksforgeeks.org/window-sliding-technique/</a><br>[5]<a href=\"https://www.w3schools.com/sql/exercise.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/sql/exercise.asp</a><br>[6]<a href=\"https://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/intro/src/art/bkntjoin.gif\" target=\"_blank\" rel=\"noopener\">https://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/intro/src/art/bkntjoin.gif</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Array\"><a href=\"#1-Array\" class=\"headerlink\" title=\"1. Array\"></a>1. Array</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">3/7/2020</td>\n<td align=\"right\">normal</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/container-with-most-water/</a></td>\n<td align=\"center\">3/7/2020</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td><a href=\"https://leetcode.com/problems/remove-duplicates-from-sorted-array/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/remove-duplicates-from-sorted-array/</a></td>\n<td align=\"center\">4/7/2020</td>\n<td align=\"right\">high</td>\n</tr>\n</tbody></table>\n<h2 id=\"2-Hash\"><a href=\"#2-Hash\" class=\"headerlink\" title=\"2. Hash\"></a>2. Hash</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">normal</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/single-number/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/single-number/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">normal</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td><a href=\"https://leetcode.com/problems/valid-anagram/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/valid-anagram/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">4</td>\n<td><a href=\"https://leetcode.com/problems/group-anagrams/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/group-anagrams/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">5</td>\n<td><a href=\"https://leetcode.com/problems/contains-duplicate/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/contains-duplicate/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">6</td>\n<td><a href=\"https://leetcode.com/problems/top-k-frequent-elements/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/top-k-frequent-elements/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n</tbody></table>\n<h2 id=\"4-Search\"><a href=\"#4-Search\" class=\"headerlink\" title=\"4. Search\"></a>4. Search</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/container-with-most-water/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n</tbody></table>\n<h2 id=\"5-Sort\"><a href=\"#5-Sort\" class=\"headerlink\" title=\"5. Sort\"></a>5. Sort</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/container-with-most-water/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n</tbody></table>\n<h2 id=\"6-Linked-List\"><a href=\"#6-Linked-List\" class=\"headerlink\" title=\"6. Linked List\"></a>6. Linked List</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/two-sum/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/two-sum/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/container-with-most-water/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/container-with-most-water/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">n/a</td>\n</tr>\n</tbody></table>\n<h2 id=\"7-Sliding-Window\"><a href=\"#7-Sliding-Window\" class=\"headerlink\" title=\"7. Sliding Window\"></a>7. Sliding Window</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/longest-substring-without-repeating-characters/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/longest-substring-without-repeating-characters/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n</tbody></table>\n<h2 id=\"7-SQL\"><a href=\"#7-SQL\" class=\"headerlink\" title=\"7. SQL\"></a>7. SQL</h2><table>\n<thead>\n<tr>\n<th align=\"right\">Order</th>\n<th>Question</th>\n<th align=\"center\">Last Time</th>\n<th align=\"right\">Priority</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">1</td>\n<td><a href=\"https://leetcode.com/problems/combine-two-tables/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/combine-two-tables/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">2</td>\n<td><a href=\"https://leetcode.com/problems/second-highest-salary/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/second-highest-salary/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">3</td>\n<td><a href=\"https://leetcode.com/problems/employees-earning-more-than-their-managers/submissions/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/employees-earning-more-than-their-managers/submissions/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">4</td>\n<td><a href=\"https://leetcode.com/problems/duplicate-emails/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/duplicate-emails/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">5</td>\n<td><a href=\"https://leetcode.com/problems/customers-who-never-order/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/customers-who-never-order/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">6</td>\n<td><a href=\"https://leetcode.com/problems/delete-duplicate-emails/solution/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/delete-duplicate-emails/solution/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">7</td>\n<td><a href=\"https://leetcode.com/problems/not-boring-movies/submissions/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/not-boring-movies/submissions/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">7</td>\n<td><a href=\"https://leetcode.com/problems/classes-more-than-5-students/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/classes-more-than-5-students/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n<tr>\n<td align=\"right\">8</td>\n<td><a href=\"https://leetcode.com/problems/swap-salary/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/problems/swap-salary/</a></td>\n<td align=\"center\">n/a</td>\n<td align=\"right\">high</td>\n</tr>\n</tbody></table>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[1]<a href=\"https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed\" target=\"_blank\" rel=\"noopener\">https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed</a><br>[2]<a href=\"https://stackoverflow.com/questions/8269916/what-is-sliding-window-algorithm-examples\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/8269916/what-is-sliding-window-algorithm-examples</a><br>[3]<a href=\"https://medium.com/outco/how-to-solve-sliding-window-problems-28d67601a66\" target=\"_blank\" rel=\"noopener\">https://medium.com/outco/how-to-solve-sliding-window-problems-28d67601a66</a><br>[4]<a href=\"https://www.geeksforgeeks.org/window-sliding-technique/\" target=\"_blank\" rel=\"noopener\">https://www.geeksforgeeks.org/window-sliding-technique/</a><br>[5]<a href=\"https://www.w3schools.com/sql/exercise.asp\" target=\"_blank\" rel=\"noopener\">https://www.w3schools.com/sql/exercise.asp</a><br>[6]<a href=\"https://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/intro/src/art/bkntjoin.gif\" target=\"_blank\" rel=\"noopener\">https://www.ibm.com/support/knowledgecenter/SSEPEK_10.0.0/intro/src/art/bkntjoin.gif</a></p>\n"},{"title":"Gi API Ti Frontend","date":"2020-06-27T17:00:00.000Z","label":"#note","_content":"\n## 1. Fetch\n\nFetch l mt module c tch hp sn trong cc trnh duyt, iu  c ngha l khng phi tt c cc trnh duyt c u c th s dng fetch.\n\nu im l khng cn ci thm package cho phn x l API. Nhc im l ch dng cho ng dng chy vi trnh duyt.\n\ni tng c tr v l dng Stream, ng ngha vi vic phi convert khi gi data ln khi nhn data.\n\n### 1.1 Fetch vi async await\n\n```\nasync function getCats() {\n  try {\n    const url = \"http://localhost:4000/api/v1/cats\";\n    const response = await fetch(url);\n    const responseJSON = await response.json();\n\n    return responseJSON.data;\n  } catch (err) {\n    return [];\n  }\n}\n\n// Set data to state\ngetCats().then((cats) => {\n  this.setState({ cats });\n});\n```\n\n### 1.2 Fetch vi Promise\n\n```javascript\nconst url = \"http://localhost:4000/api/v1/cats\";\nconst _this = this;\n\nfetch(url)\n.then(\n  function(response) {\n    // .json() return a promise\n    response.json().then(data => {\n      _this.setState({\n        cats: data.data\n      });\n    })\n  }\n)\n.catch(err => {\n  console.log('Error:', err)\n});\n```\n\n###  1.3 Cc v d khc\n\n```javascript\n// Copy from: http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript\nfunction status(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return Promise.resolve(response)\n  } else {\n    return Promise.reject(new Error(response.statusText))\n  }\n}\nfunction json(response) {\n  return response.json()\n}\n\nfetch('')\n  .then(status)\n  .then(json)\n  .then(data => {\n    console.log('Request succeeded with JSON response', data);\n  })\n  .catch(function(error) {\n    console.log('Request failed', error);\n  });\n\n\nfetch(url, {\n  method: 'POST',\n  headers: {\n    \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n  },\n  body: 'foo=bar&lorem=ipsum'\n})\n.then(json)\n.then(data => {\n  console.log('Request succeeded with JSON response', data);\n})\n.catch(error => {\n  console.log('Request failed', error);\n});\n\n// Post json object\nvar data = {username: 'example'};\n\nfetch(url, {\n  method: 'POST',\n  body: JSON.stringify(data),\n  headers:{\n    'Content-Type': 'application/json'\n  }\n})\n.then(res => res.json())\n.then(response => console.log('Success:', JSON.stringify(response)))\n.catch(error => console.error('Error:', error))\n```\n\n## 2. Axios\n\n```javascript\naxios.get(`http://localhost:4000/api/v1/cats`)\n  .then(res => {\n    const persons = res.data;\n    this.setState({ cats });\n  })\n\nconst user = {\n  name: this.state.name\n};\n\naxios.post(`http://localhost:4000/api/v1/cats`, { user })\n  .then(res => {\n    console.log(res);\n    console.log(res.data);\n  })\n```\n\n## 3. References\n\n[1][http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript/](http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript/)\n[2][https://alligator.io/react/axios-react/](https://alligator.io/react/axios-react/)\n","source":"_posts/2020-06-28-goi-api-tu-fe.md","raw":"---\ntitle: \"Gi API Ti Frontend\"\ndate: 2020-06-28\nlabel: \"#note\"\n---\n\n## 1. Fetch\n\nFetch l mt module c tch hp sn trong cc trnh duyt, iu  c ngha l khng phi tt c cc trnh duyt c u c th s dng fetch.\n\nu im l khng cn ci thm package cho phn x l API. Nhc im l ch dng cho ng dng chy vi trnh duyt.\n\ni tng c tr v l dng Stream, ng ngha vi vic phi convert khi gi data ln khi nhn data.\n\n### 1.1 Fetch vi async await\n\n```\nasync function getCats() {\n  try {\n    const url = \"http://localhost:4000/api/v1/cats\";\n    const response = await fetch(url);\n    const responseJSON = await response.json();\n\n    return responseJSON.data;\n  } catch (err) {\n    return [];\n  }\n}\n\n// Set data to state\ngetCats().then((cats) => {\n  this.setState({ cats });\n});\n```\n\n### 1.2 Fetch vi Promise\n\n```javascript\nconst url = \"http://localhost:4000/api/v1/cats\";\nconst _this = this;\n\nfetch(url)\n.then(\n  function(response) {\n    // .json() return a promise\n    response.json().then(data => {\n      _this.setState({\n        cats: data.data\n      });\n    })\n  }\n)\n.catch(err => {\n  console.log('Error:', err)\n});\n```\n\n###  1.3 Cc v d khc\n\n```javascript\n// Copy from: http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript\nfunction status(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return Promise.resolve(response)\n  } else {\n    return Promise.reject(new Error(response.statusText))\n  }\n}\nfunction json(response) {\n  return response.json()\n}\n\nfetch('')\n  .then(status)\n  .then(json)\n  .then(data => {\n    console.log('Request succeeded with JSON response', data);\n  })\n  .catch(function(error) {\n    console.log('Request failed', error);\n  });\n\n\nfetch(url, {\n  method: 'POST',\n  headers: {\n    \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n  },\n  body: 'foo=bar&lorem=ipsum'\n})\n.then(json)\n.then(data => {\n  console.log('Request succeeded with JSON response', data);\n})\n.catch(error => {\n  console.log('Request failed', error);\n});\n\n// Post json object\nvar data = {username: 'example'};\n\nfetch(url, {\n  method: 'POST',\n  body: JSON.stringify(data),\n  headers:{\n    'Content-Type': 'application/json'\n  }\n})\n.then(res => res.json())\n.then(response => console.log('Success:', JSON.stringify(response)))\n.catch(error => console.error('Error:', error))\n```\n\n## 2. Axios\n\n```javascript\naxios.get(`http://localhost:4000/api/v1/cats`)\n  .then(res => {\n    const persons = res.data;\n    this.setState({ cats });\n  })\n\nconst user = {\n  name: this.state.name\n};\n\naxios.post(`http://localhost:4000/api/v1/cats`, { user })\n  .then(res => {\n    console.log(res);\n    console.log(res.data);\n  })\n```\n\n## 3. References\n\n[1][http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript/](http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript/)\n[2][https://alligator.io/react/axios-react/](https://alligator.io/react/axios-react/)\n","slug":"2020-06-28-goi-api-tu-fe","published":1,"updated":"2022-01-31T13:24:08.245Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl4jmlsbs004lp3m2hudqbvwf","content":"<h2 id=\"1-Fetch\"><a href=\"#1-Fetch\" class=\"headerlink\" title=\"1. Fetch\"></a>1. Fetch</h2><p>Fetch l mt module c tch hp sn trong cc trnh duyt, iu  c ngha l khng phi tt c cc trnh duyt c u c th s dng fetch.</p>\n<p>u im l khng cn ci thm package cho phn x l API. Nhc im l ch dng cho ng dng chy vi trnh duyt.</p>\n<p>i tng c tr v l dng Stream, ng ngha vi vic phi convert khi gi data ln khi nhn data.</p>\n<h3 id=\"1-1-Fetch-voi-async-await\"><a href=\"#1-1-Fetch-voi-async-await\" class=\"headerlink\" title=\"1.1 Fetch vi async await\"></a>1.1 Fetch vi async await</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCats</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = <span class=\"string\">\"http://localhost:4000/api/v1/cats\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> fetch(url);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> responseJSON = <span class=\"keyword\">await</span> response.json();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> responseJSON.data;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Set data to state</span></span><br><span class=\"line\">getCats().then(<span class=\"function\">(<span class=\"params\">cats</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.setState(&#123; cats &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-Fetch-voi-Promise\"><a href=\"#1-2-Fetch-voi-Promise\" class=\"headerlink\" title=\"1.2 Fetch vi Promise\"></a>1.2 Fetch vi Promise</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> url = <span class=\"string\">\"http://localhost:4000/api/v1/cats\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> _this = <span class=\"keyword\">this</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">fetch(url)</span><br><span class=\"line\">.then(</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// .json() return a promise</span></span><br><span class=\"line\">    response.json().then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      _this.setState(&#123;</span><br><span class=\"line\">        cats: data.data</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">)</span><br><span class=\"line\">.catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Error:'</span>, err)</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-Cac-vi-du-khac\"><a href=\"#1-3-Cac-vi-du-khac\" class=\"headerlink\" title=\"1.3 Cc v d khc\"></a>1.3 Cc v d khc</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">status</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (response.status &gt;= <span class=\"number\">200</span> &amp;&amp; response.status &lt; <span class=\"number\">300</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(response)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(response.statusText))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">json</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">fetch(<span class=\"string\">''</span>)</span><br><span class=\"line\">  .then(status)</span><br><span class=\"line\">  .then(json)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request succeeded with JSON response'</span>, data);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request failed'</span>, error);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">fetch(url, &#123;</span><br><span class=\"line\">  method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"application/x-www-form-urlencoded; charset=UTF-8\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  body: <span class=\"string\">'foo=bar&amp;lorem=ipsum'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.then(json)</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request succeeded with JSON response'</span>, data);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request failed'</span>, error);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Post json object</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = &#123;<span class=\"attr\">username</span>: <span class=\"string\">'example'</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">fetch(url, &#123;</span><br><span class=\"line\">  method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">  body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">  headers:&#123;</span><br><span class=\"line\">    <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.json())</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'Success:'</span>, <span class=\"built_in\">JSON</span>.stringify(response)))</span><br><span class=\"line\">.catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.error(<span class=\"string\">'Error:'</span>, error))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Axios\"><a href=\"#2-Axios\" class=\"headerlink\" title=\"2. Axios\"></a>2. Axios</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.get(<span class=\"string\">`http://localhost:4000/api/v1/cats`</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> persons = res.data;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; cats &#125;);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  name: <span class=\"keyword\">this</span>.state.name</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">axios.post(<span class=\"string\">`http://localhost:4000/api/v1/cats`</span>, &#123; user &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res.data);</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-References\"><a href=\"#3-References\" class=\"headerlink\" title=\"3. References\"></a>3. References</h2><p>[1]<a href=\"http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript/\" target=\"_blank\" rel=\"noopener\">http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript/</a><br>[2]<a href=\"https://alligator.io/react/axios-react/\" target=\"_blank\" rel=\"noopener\">https://alligator.io/react/axios-react/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Fetch\"><a href=\"#1-Fetch\" class=\"headerlink\" title=\"1. Fetch\"></a>1. Fetch</h2><p>Fetch l mt module c tch hp sn trong cc trnh duyt, iu  c ngha l khng phi tt c cc trnh duyt c u c th s dng fetch.</p>\n<p>u im l khng cn ci thm package cho phn x l API. Nhc im l ch dng cho ng dng chy vi trnh duyt.</p>\n<p>i tng c tr v l dng Stream, ng ngha vi vic phi convert khi gi data ln khi nhn data.</p>\n<h3 id=\"1-1-Fetch-voi-async-await\"><a href=\"#1-1-Fetch-voi-async-await\" class=\"headerlink\" title=\"1.1 Fetch vi async await\"></a>1.1 Fetch vi async await</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCats</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = <span class=\"string\">\"http://localhost:4000/api/v1/cats\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> fetch(url);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> responseJSON = <span class=\"keyword\">await</span> response.json();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> responseJSON.data;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Set data to state</span></span><br><span class=\"line\">getCats().then(<span class=\"function\">(<span class=\"params\">cats</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.setState(&#123; cats &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-Fetch-voi-Promise\"><a href=\"#1-2-Fetch-voi-Promise\" class=\"headerlink\" title=\"1.2 Fetch vi Promise\"></a>1.2 Fetch vi Promise</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> url = <span class=\"string\">\"http://localhost:4000/api/v1/cats\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> _this = <span class=\"keyword\">this</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">fetch(url)</span><br><span class=\"line\">.then(</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// .json() return a promise</span></span><br><span class=\"line\">    response.json().then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      _this.setState(&#123;</span><br><span class=\"line\">        cats: data.data</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">)</span><br><span class=\"line\">.catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Error:'</span>, err)</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-Cac-vi-du-khac\"><a href=\"#1-3-Cac-vi-du-khac\" class=\"headerlink\" title=\"1.3 Cc v d khc\"></a>1.3 Cc v d khc</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Copy from: http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">status</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (response.status &gt;= <span class=\"number\">200</span> &amp;&amp; response.status &lt; <span class=\"number\">300</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(response)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(response.statusText))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">json</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> response.json()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">fetch(<span class=\"string\">''</span>)</span><br><span class=\"line\">  .then(status)</span><br><span class=\"line\">  .then(json)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request succeeded with JSON response'</span>, data);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request failed'</span>, error);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">fetch(url, &#123;</span><br><span class=\"line\">  method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"application/x-www-form-urlencoded; charset=UTF-8\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  body: <span class=\"string\">'foo=bar&amp;lorem=ipsum'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.then(json)</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request succeeded with JSON response'</span>, data);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Request failed'</span>, error);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Post json object</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = &#123;<span class=\"attr\">username</span>: <span class=\"string\">'example'</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">fetch(url, &#123;</span><br><span class=\"line\">  method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">  body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">  headers:&#123;</span><br><span class=\"line\">    <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.json())</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'Success:'</span>, <span class=\"built_in\">JSON</span>.stringify(response)))</span><br><span class=\"line\">.catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.error(<span class=\"string\">'Error:'</span>, error))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Axios\"><a href=\"#2-Axios\" class=\"headerlink\" title=\"2. Axios\"></a>2. Axios</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.get(<span class=\"string\">`http://localhost:4000/api/v1/cats`</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> persons = res.data;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; cats &#125;);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  name: <span class=\"keyword\">this</span>.state.name</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">axios.post(<span class=\"string\">`http://localhost:4000/api/v1/cats`</span>, &#123; user &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res.data);</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-References\"><a href=\"#3-References\" class=\"headerlink\" title=\"3. References\"></a>3. References</h2><p>[1]<a href=\"http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript/\" target=\"_blank\" rel=\"noopener\">http://vuilaptrinh.com/2018-10-01-huong-dan-gioi-thieu-fetch-javascript/</a><br>[2]<a href=\"https://alligator.io/react/axios-react/\" target=\"_blank\" rel=\"noopener\">https://alligator.io/react/axios-react/</a></p>\n"},{"title":"Put Images In The Header","date":"2022-01-30T17:00:00.000Z","photos":["/images/test/test1.jpg","/images/test/test2.jpg","/images/test/test3.jpg","/images/test/test4.jpg","/images/test/test5.jpg","/images/test/test6.jpg","/images/test/test7.jpg","/images/test/test8.jpg","/images/test/test9.jpg","/images/test/test10.jpg"],"_content":"","source":"_posts/2022-01-31-put-images-in-the-header.md","raw":"---\ntitle: Put Images In The Header\ndate: 2022-01-31\nphotos:\n- /images/test/test1.jpg\n- /images/test/test2.jpg\n- /images/test/test3.jpg\n- /images/test/test4.jpg\n- /images/test/test5.jpg\n- /images/test/test6.jpg\n- /images/test/test7.jpg\n- /images/test/test8.jpg\n- /images/test/test9.jpg\n- /images/test/test10.jpg\n---\n","slug":"2022-01-31-put-images-in-the-header","published":1,"updated":"2022-02-01T13:20:11.591Z","comments":1,"layout":"post","link":"","_id":"cl4jmlsbt004np3m24qtggdji","content":"","site":{"data":{}},"excerpt":"","more":""}],"PostAsset":[],"PostCategory":[{"post_id":"cl4jmls9t0000p3m29zu12hwq","category_id":"cl4jmlsa50003p3m25k1d0bwd","_id":"cl4jmlsad000ep3m20jobdq8g"},{"post_id":"cl4jmlsa20002p3m2dd183ajn","category_id":"cl4jmlsa50003p3m25k1d0bwd","_id":"cl4jmlsae000jp3m26uyq90nh"},{"post_id":"cl4jmlsad000hp3m20u4h4iwp","category_id":"cl4jmlsa50003p3m25k1d0bwd","_id":"cl4jmlsag000pp3m29ubo8mir"},{"post_id":"cl4jmlsa60005p3m2gcd2eidk","category_id":"cl4jmlsa50003p3m25k1d0bwd","_id":"cl4jmlsaj000sp3m2dgqdftrk"},{"post_id":"cl4jmlsae000ip3m25gc82b75","category_id":"cl4jmlsaf000np3m24nrshf9b","_id":"cl4jmlsal0010p3m2hjty2ipb"},{"post_id":"cl4jmlsak000xp3m2egka1dhz","category_id":"cl4jmlsaj000up3m2h7hq2bif","_id":"cl4jmlsaq0017p3m284yl38tn"},{"post_id":"cl4jmlsaf000mp3m2fmqielb1","category_id":"cl4jmlsaj000up3m2h7hq2bif","_id":"cl4jmlsar001ap3m20u1rb9vr"},{"post_id":"cl4jmlsak000zp3m2bsz05h09","category_id":"cl4jmlsaj000up3m2h7hq2bif","_id":"cl4jmlsat001dp3m2biegf6xy"},{"post_id":"cl4jmlsan0014p3m2afkldx31","category_id":"cl4jmlsaj000up3m2h7hq2bif","_id":"cl4jmlsau001hp3m23pjcci75"},{"post_id":"cl4jmlsaj000tp3m24olxbr6z","category_id":"cl4jmlsaj000up3m2h7hq2bif","_id":"cl4jmlsaw001kp3m2hr7l41o8"},{"post_id":"cl4jmlsat001cp3m25opih4xm","category_id":"cl4jmlsaf000np3m24nrshf9b","_id":"cl4jmlsaz001np3m202rs4oi1"},{"post_id":"cl4jmlsau001gp3m20s2u9j6i","category_id":"cl4jmlsaj000up3m2h7hq2bif","_id":"cl4jmlsb4001sp3m2gn74fa9l"},{"post_id":"cl4jmlsb5001zp3m2gr1p2vmr","category_id":"cl4jmlsb2001pp3m2e0763hdz","_id":"cl4jmlsb70029p3m2gug4fjeu"},{"post_id":"cl4jmlsax001mp3m2epto803r","category_id":"cl4jmlsb2001pp3m2e0763hdz","_id":"cl4jmlsb8002dp3m2eauj64ho"},{"post_id":"cl4jmlsb60022p3m242jha7ss","category_id":"cl4jmlsb2001pp3m2e0763hdz","_id":"cl4jmlsb8002hp3m23jngav66"},{"post_id":"cl4jmlsb3001rp3m24xpf63g1","category_id":"cl4jmlsb60023p3m219lwa81e","_id":"cl4jmlsb9002lp3m27e2mc6dh"},{"post_id":"cl4jmlsb70028p3m22412dup0","category_id":"cl4jmlsb2001pp3m2e0763hdz","_id":"cl4jmlsb9002op3m25x7gfidu"},{"post_id":"cl4jmlsb4001up3m24ams57lp","category_id":"cl4jmlsb60023p3m219lwa81e","_id":"cl4jmlsba002tp3m2b45ba2w7"},{"post_id":"cl4jmlsaw001jp3m2basybd2q","category_id":"cl4jmlsb2001pp3m2e0763hdz","_id":"cl4jmlsba002yp3m23ygq7m55"},{"post_id":"cl4jmlsaw001jp3m2basybd2q","category_id":"cl4jmlsb8002jp3m236853bx0","_id":"cl4jmlsbb0030p3m20bdh8219"},{"post_id":"cl4jmlsb4001wp3m26aaaai9f","category_id":"cl4jmlsb60023p3m219lwa81e","_id":"cl4jmlsbb0033p3m2co0fdz1g"},{"post_id":"cl4jmlsb7002cp3m20yle4b0o","category_id":"cl4jmlsba002xp3m23se00p4t","_id":"cl4jmlsbd003cp3m24536c6as"},{"post_id":"cl4jmlsb8002gp3m24gb8hzd4","category_id":"cl4jmlsba002xp3m23se00p4t","_id":"cl4jmlsbe003ip3m26cze75co"},{"post_id":"cl4jmlsb8002kp3m266czc1nn","category_id":"cl4jmlsbd003bp3m2hzuzf0ox","_id":"cl4jmlsbf003pp3m22i3j76ql"}],"PostTag":[{"post_id":"cl4jmls9t0000p3m29zu12hwq","tag_id":"cl4jmlsa60004p3m21t5a91iz","_id":"cl4jmlsaa000ap3m25fkh6pse"},{"post_id":"cl4jmlsa20002p3m2dd183ajn","tag_id":"cl4jmlsa60004p3m21t5a91iz","_id":"cl4jmlsad000gp3m28fxed27k"},{"post_id":"cl4jmlsa60005p3m2gcd2eidk","tag_id":"cl4jmlsa60004p3m21t5a91iz","_id":"cl4jmlsaf000lp3m26if86cjv"},{"post_id":"cl4jmlsai000rp3m241tx0xdg","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsak000wp3m2ezrhg06h"},{"post_id":"cl4jmlsa70006p3m21i8zbbmd","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsak000yp3m248u69d44"},{"post_id":"cl4jmlsa70006p3m21i8zbbmd","tag_id":"cl4jmlsag000qp3m256er73o8","_id":"cl4jmlsan0013p3m26fpqhe77"},{"post_id":"cl4jmlsa80007p3m2842meocb","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsao0015p3m236vj8ve0"},{"post_id":"cl4jmlsab000bp3m2aucx0i58","tag_id":"cl4jmlsal0012p3m26npx2r6a","_id":"cl4jmlsat001bp3m26woe778l"},{"post_id":"cl4jmlsao0016p3m22urk7b17","tag_id":"cl4jmlsag000qp3m256er73o8","_id":"cl4jmlsat001ep3m29idaebfh"},{"post_id":"cl4jmlsar0019p3m27dy15vq3","tag_id":"cl4jmlsag000qp3m256er73o8","_id":"cl4jmlsav001ip3m2988p25l4"},{"post_id":"cl4jmlsab000cp3m2dks73agw","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsaw001lp3m29vedcx79"},{"post_id":"cl4jmlsad000hp3m20u4h4iwp","tag_id":"cl4jmlsat001fp3m28l82c1qo","_id":"cl4jmlsb3001qp3m2e6a18fmd"},{"post_id":"cl4jmlsax001mp3m2epto803r","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsb4001tp3m2f0wbgti2"},{"post_id":"cl4jmlsae000ip3m25gc82b75","tag_id":"cl4jmlsb0001op3m2frxhaiss","_id":"cl4jmlsb5001yp3m2g5sn3c3s"},{"post_id":"cl4jmlsb4001up3m24ams57lp","tag_id":"cl4jmlsag000qp3m256er73o8","_id":"cl4jmlsb50020p3m29klxdgqk"},{"post_id":"cl4jmlsb4001wp3m26aaaai9f","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsb60024p3m255dw1tlt"},{"post_id":"cl4jmlsb4001wp3m26aaaai9f","tag_id":"cl4jmlsag000qp3m256er73o8","_id":"cl4jmlsb60026p3m2fxagaxid"},{"post_id":"cl4jmlsb5001zp3m2gr1p2vmr","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsb7002ap3m2bn948p9h"},{"post_id":"cl4jmlsaf000mp3m2fmqielb1","tag_id":"cl4jmlsb4001vp3m24931c1un","_id":"cl4jmlsb8002ep3m23pncglw5"},{"post_id":"cl4jmlsaf000mp3m2fmqielb1","tag_id":"cl4jmlsb60021p3m2h35wbfpn","_id":"cl4jmlsb8002ip3m21chf32s8"},{"post_id":"cl4jmlsb70028p3m22412dup0","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsb9002mp3m2h11y6usm"},{"post_id":"cl4jmlsaf000op3m24zkz5xb7","tag_id":"cl4jmlsag000qp3m256er73o8","_id":"cl4jmlsb9002qp3m26342hk67"},{"post_id":"cl4jmlsaj000tp3m24olxbr6z","tag_id":"cl4jmlsb8002fp3m2bpqa1h1v","_id":"cl4jmlsba002up3m25khwdwiz"},{"post_id":"cl4jmlsbb002zp3m2hk1p8ar8","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsbc0034p3m2ezfghwuk"},{"post_id":"cl4jmlsbb0031p3m24p19gzbh","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsbc0037p3m2dn1p0rsx"},{"post_id":"cl4jmlsbc0036p3m243osdgse","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsbd003ap3m211pd4u4i"},{"post_id":"cl4jmlsak000xp3m2egka1dhz","tag_id":"cl4jmlsb9002pp3m264v3h5a3","_id":"cl4jmlsbd003ep3m21ssshbyk"},{"post_id":"cl4jmlsak000xp3m2egka1dhz","tag_id":"cl4jmlsb60021p3m2h35wbfpn","_id":"cl4jmlsbe003hp3m23na6ejsi"},{"post_id":"cl4jmlsak000xp3m2egka1dhz","tag_id":"cl4jmlsb8002fp3m2bpqa1h1v","_id":"cl4jmlsbe003kp3m2gvvj094k"},{"post_id":"cl4jmlsbc0038p3m20kvy4mx1","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsbf003np3m22ksvdx3d"},{"post_id":"cl4jmlsak000zp3m2bsz05h09","tag_id":"cl4jmlsb60021p3m2h35wbfpn","_id":"cl4jmlsbn003wp3m24biybfb5"},{"post_id":"cl4jmlsak000zp3m2bsz05h09","tag_id":"cl4jmlsb9002pp3m264v3h5a3","_id":"cl4jmlsbo003yp3m25zl5h9a5"},{"post_id":"cl4jmlsak000zp3m2bsz05h09","tag_id":"cl4jmlsbe003mp3m2fetx6l08","_id":"cl4jmlsbo0041p3m2hdwncspp"},{"post_id":"cl4jmlsak000zp3m2bsz05h09","tag_id":"cl4jmlsb8002fp3m2bpqa1h1v","_id":"cl4jmlsbp0043p3m23u6ffgmt"},{"post_id":"cl4jmlsan0014p3m2afkldx31","tag_id":"cl4jmlsbm003up3m2g4uj7mfp","_id":"cl4jmlsbp0046p3m26ibz7ugr"},{"post_id":"cl4jmlsan0014p3m2afkldx31","tag_id":"cl4jmlsb4001vp3m24931c1un","_id":"cl4jmlsbq0048p3m22sfy59ze"},{"post_id":"cl4jmlsbp0042p3m25b2n4old","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsbq004bp3m21wsh0buf"},{"post_id":"cl4jmlsat001cp3m25opih4xm","tag_id":"cl4jmlsb0001op3m2frxhaiss","_id":"cl4jmlsbr004dp3m2f8zgdnsx"},{"post_id":"cl4jmlsau001gp3m20s2u9j6i","tag_id":"cl4jmlsb60021p3m2h35wbfpn","_id":"cl4jmlsbr004gp3m2ekz829z1"},{"post_id":"cl4jmlsaw001jp3m2basybd2q","tag_id":"cl4jmlsbr004ep3m2gy5j98ol","_id":"cl4jmlsbs004kp3m24oz09nyg"},{"post_id":"cl4jmlsaw001jp3m2basybd2q","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsbt004mp3m2aiod5147"},{"post_id":"cl4jmlsb3001rp3m24xpf63g1","tag_id":"cl4jmlsbs004jp3m2aoz64d8t","_id":"cl4jmlsbt004pp3m2733f4g73"},{"post_id":"cl4jmlsb3001rp3m24xpf63g1","tag_id":"cl4jmlsag000qp3m256er73o8","_id":"cl4jmlsbt004qp3m29cih0br3"},{"post_id":"cl4jmlsb60022p3m242jha7ss","tag_id":"cl4jmlsbt004op3m2hzn460tc","_id":"cl4jmlsbt004sp3m2bg4khhzw"},{"post_id":"cl4jmlsb60022p3m242jha7ss","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsbt004tp3m223pt9sj8"},{"post_id":"cl4jmlsb60025p3m2cm933tm0","tag_id":"cl4jmlsbt004rp3m2dxelcyte","_id":"cl4jmlsbu004vp3m2ayq9f1ei"},{"post_id":"cl4jmlsb60025p3m2cm933tm0","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsbu004wp3m2btdhhlyn"},{"post_id":"cl4jmlsb7002cp3m20yle4b0o","tag_id":"cl4jmlsbt004up3m2afin71l4","_id":"cl4jmlsbu004yp3m2akgl93ty"},{"post_id":"cl4jmlsb8002gp3m24gb8hzd4","tag_id":"cl4jmlsbt004up3m2afin71l4","_id":"cl4jmlsbv0050p3m2di54aey2"},{"post_id":"cl4jmlsb8002kp3m266czc1nn","tag_id":"cl4jmlsbt004up3m2afin71l4","_id":"cl4jmlsbv0052p3m25kj442rp"},{"post_id":"cl4jmlsb9002np3m22gwieq4f","tag_id":"cl4jmlsbv0051p3m22w57d979","_id":"cl4jmlsbv0054p3m2gtlfbq5h"},{"post_id":"cl4jmlsba002sp3m26niucg7s","tag_id":"cl4jmlsbv0051p3m22w57d979","_id":"cl4jmlsbx0056p3m2as9c4q0c"},{"post_id":"cl4jmlsba002vp3m2f8iogfvu","tag_id":"cl4jmlsae000kp3m21n1dfr6h","_id":"cl4jmlsby0058p3m2epn3es6r"},{"post_id":"cl4jmlsba002vp3m2f8iogfvu","tag_id":"cl4jmlsbv0051p3m22w57d979","_id":"cl4jmlsby0059p3m22brxhi6g"},{"post_id":"cl4jmlsbd003dp3m27o2udrvk","tag_id":"cl4jmlsbx0057p3m2h57i0tco","_id":"cl4jmlsc1005bp3m2h0tqe35c"},{"post_id":"cl4jmlsbd003fp3m2bjflbkyu","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc2005dp3m2bl089rz6"},{"post_id":"cl4jmlsbe003lp3m2fx8adqn7","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc3005fp3m26wje39vs"},{"post_id":"cl4jmlsbf003op3m2hhn13yvc","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc3005hp3m2gkwy1bai"},{"post_id":"cl4jmlsbf003qp3m2am7a5b9f","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc4005jp3m2bs0n3e5z"},{"post_id":"cl4jmlsbg003sp3m2fihu5ff6","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc4005lp3m2czf44uud"},{"post_id":"cl4jmlsbi003tp3m2cmpa00ey","tag_id":"cl4jmlsbx0057p3m2h57i0tco","_id":"cl4jmlsc4005np3m28zok8qsw"},{"post_id":"cl4jmlsbn003vp3m2dc3g8eeg","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc5005pp3m2fovnbqaz"},{"post_id":"cl4jmlsbn003xp3m2c9i3ebk3","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc5005rp3m23h1t5q7h"},{"post_id":"cl4jmlsbo0040p3m2dz43gip5","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc5005tp3m2bw9x2new"},{"post_id":"cl4jmlsbp0045p3m2gtwubt2w","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc5005vp3m2bmfr7cgs"},{"post_id":"cl4jmlsbq0047p3m2cahtc3ny","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc6005xp3m2bo4jbeir"},{"post_id":"cl4jmlsbr004cp3m22kfphlqw","tag_id":"cl4jmlsby005ap3m2co51e0rb","_id":"cl4jmlsc6005yp3m233in2x14"}],"Tag":[{"name":"UNIX","_id":"cl4jmlsa60004p3m21t5a91iz"},{"name":"RUBY","_id":"cl4jmlsae000kp3m21n1dfr6h"},{"name":"RAILS","_id":"cl4jmlsag000qp3m256er73o8"},{"name":"random","_id":"cl4jmlsal0012p3m26npx2r6a"},{"name":"unix","_id":"cl4jmlsat001fp3m28l82c1qo"},{"name":"ruby","_id":"cl4jmlsb0001op3m2frxhaiss"},{"name":"secure","_id":"cl4jmlsb4001vp3m24931c1un"},{"name":"rails","_id":"cl4jmlsb60021p3m2h35wbfpn"},{"name":"til","_id":"cl4jmlsb8002fp3m2bpqa1h1v"},{"name":"aws","_id":"cl4jmlsb9002pp3m264v3h5a3"},{"name":"carrierwave","_id":"cl4jmlsbe003mp3m2fetx6l08"},{"name":"https","_id":"cl4jmlsbm003up3m2g4uj7mfp"},{"name":"SOLID","_id":"cl4jmlsbr004ep3m2gy5j98ol"},{"name":"SECURE","_id":"cl4jmlsbs004jp3m2aoz64d8t"},{"name":"ORM","_id":"cl4jmlsbt004op3m2hzn460tc"},{"name":"RACK","_id":"cl4jmlsbt004rp3m2dxelcyte"},{"name":"TIl","_id":"cl4jmlsbt004up3m2afin71l4"},{"name":"TIL","_id":"cl4jmlsbv0051p3m22w57d979"},{"name":"JS","_id":"cl4jmlsbx0057p3m2h57i0tco"},{"name":"NOTES","_id":"cl4jmlsby005ap3m2co51e0rb"}]}}